"use strict";var eg=Object.create;var Fa=Object.defineProperty;var tg=Object.getOwnPropertyDescriptor;var rg=Object.getOwnPropertyNames;var ig=Object.getPrototypeOf,ng=Object.prototype.hasOwnProperty;var Gl=e=>{throw TypeError(e)};var o=(e,t)=>Fa(e,"name",{value:t,configurable:!0});var D=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var ag=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of rg(t))!ng.call(e,n)&&n!==r&&Fa(e,n,{get:()=>t[n],enumerable:!(i=tg(t,n))||i.enumerable});return e};var X=(e,t,r)=>(r=e!=null?eg(ig(e)):{},ag(t||!e||!e.__esModule?Fa(r,"default",{value:e,enumerable:!0}):r,e));var _a=(e,t,r)=>t.has(e)||Gl("Cannot "+r);var T=(e,t,r)=>(_a(e,t,"read from private field"),r?r.call(e):t.get(e)),we=(e,t,r)=>t.has(e)?Gl("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,r),Ze=(e,t,r,i)=>(_a(e,t,"write to private field"),i?i.call(e,r):t.set(e,r),r),Ue=(e,t,r)=>(_a(e,t,"access private method"),r);var qr=D((Sb,Pa)=>{"use strict";typeof process>"u"||!process.version||process.version.indexOf("v0.")===0||process.version.indexOf("v1.")===0&&process.version.indexOf("v1.8.")!==0?Pa.exports={nextTick:ug}:Pa.exports=process;function ug(e,t,r,i){if(typeof e!="function")throw new TypeError('"callback" argument must be a function');var n=arguments.length,a,s;switch(n){case 0:case 1:return process.nextTick(e);case 2:return process.nextTick(o(function(){e.call(null,t)},"afterTickOne"));case 3:return process.nextTick(o(function(){e.call(null,t,r)},"afterTickTwo"));case 4:return process.nextTick(o(function(){e.call(null,t,r,i)},"afterTickThree"));default:for(a=new Array(n-1),s=0;s<a.length;)a[s++]=arguments[s];return process.nextTick(o(function(){e.apply(null,a)},"afterTick"))}}o(ug,"nextTick")});var Xl=D((Fb,Yl)=>{var cg={}.toString;Yl.exports=Array.isArray||function(e){return cg.call(e)=="[object Array]"}});var Ra=D((_b,Ql)=>{Ql.exports=require("stream")});var jr=D((Ia,tu)=>{var Vi=require("buffer"),Ke=Vi.Buffer;function eu(e,t){for(var r in e)t[r]=e[r]}o(eu,"copyProps");Ke.from&&Ke.alloc&&Ke.allocUnsafe&&Ke.allocUnsafeSlow?tu.exports=Vi:(eu(Vi,Ia),Ia.Buffer=Kt);function Kt(e,t,r){return Ke(e,t,r)}o(Kt,"SafeBuffer");eu(Ke,Kt);Kt.from=function(e,t,r){if(typeof e=="number")throw new TypeError("Argument must not be a number");return Ke(e,t,r)};Kt.alloc=function(e,t,r){if(typeof e!="number")throw new TypeError("Argument must be a number");var i=Ke(e);return t!==void 0?typeof r=="string"?i.fill(t,r):i.fill(t):i.fill(0),i};Kt.allocUnsafe=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Ke(e)};Kt.allocUnsafeSlow=function(e){if(typeof e!="number")throw new TypeError("Argument must be a number");return Vi.SlowBuffer(e)}});var Jt=D(ne=>{function hg(e){return Array.isArray?Array.isArray(e):Zi(e)==="[object Array]"}o(hg,"isArray");ne.isArray=hg;function fg(e){return typeof e=="boolean"}o(fg,"isBoolean");ne.isBoolean=fg;function dg(e){return e===null}o(dg,"isNull");ne.isNull=dg;function pg(e){return e==null}o(pg,"isNullOrUndefined");ne.isNullOrUndefined=pg;function gg(e){return typeof e=="number"}o(gg,"isNumber");ne.isNumber=gg;function mg(e){return typeof e=="string"}o(mg,"isString");ne.isString=mg;function Dg(e){return typeof e=="symbol"}o(Dg,"isSymbol");ne.isSymbol=Dg;function vg(e){return e===void 0}o(vg,"isUndefined");ne.isUndefined=vg;function yg(e){return Zi(e)==="[object RegExp]"}o(yg,"isRegExp");ne.isRegExp=yg;function wg(e){return typeof e=="object"&&e!==null}o(wg,"isObject");ne.isObject=wg;function bg(e){return Zi(e)==="[object Date]"}o(bg,"isDate");ne.isDate=bg;function Cg(e){return Zi(e)==="[object Error]"||e instanceof Error}o(Cg,"isError");ne.isError=Cg;function kg(e){return typeof e=="function"}o(kg,"isFunction");ne.isFunction=kg;function xg(e){return e===null||typeof e=="boolean"||typeof e=="number"||typeof e=="string"||typeof e=="symbol"||typeof e>"u"}o(xg,"isPrimitive");ne.isPrimitive=xg;ne.isBuffer=require("buffer").Buffer.isBuffer;function Zi(e){return Object.prototype.toString.call(e)}o(Zi,"objectToString")});var ru=D((Rb,Ma)=>{typeof Object.create=="function"?Ma.exports=o(function(t,r){r&&(t.super_=r,t.prototype=Object.create(r.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))},"inherits"):Ma.exports=o(function(t,r){if(r){t.super_=r;var i=o(function(){},"TempCtor");i.prototype=r.prototype,t.prototype=new i,t.prototype.constructor=t}},"inherits")});var Yt=D((Mb,Ba)=>{try{if(La=require("util"),typeof La.inherits!="function")throw"";Ba.exports=La.inherits}catch{Ba.exports=ru()}var La});var nu=D((Lb,Oa)=>{"use strict";function Sg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}o(Sg,"_classCallCheck");var iu=jr().Buffer,zr=require("util");function Eg(e,t,r){e.copy(t,r)}o(Eg,"copyBuffer");Oa.exports=function(){function e(){Sg(this,e),this.head=null,this.tail=null,this.length=0}return o(e,"BufferList"),e.prototype.push=o(function(r){var i={data:r,next:null};this.length>0?this.tail.next=i:this.head=i,this.tail=i,++this.length},"push"),e.prototype.unshift=o(function(r){var i={data:r,next:this.head};this.length===0&&(this.tail=i),this.head=i,++this.length},"unshift"),e.prototype.shift=o(function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}},"shift"),e.prototype.clear=o(function(){this.head=this.tail=null,this.length=0},"clear"),e.prototype.join=o(function(r){if(this.length===0)return"";for(var i=this.head,n=""+i.data;i=i.next;)n+=r+i.data;return n},"join"),e.prototype.concat=o(function(r){if(this.length===0)return iu.alloc(0);for(var i=iu.allocUnsafe(r>>>0),n=this.head,a=0;n;)Eg(n.data,i,a),a+=n.data.length,n=n.next;return i},"concat"),e}();zr&&zr.inspect&&zr.inspect.custom&&(Oa.exports.prototype[zr.inspect.custom]=function(){var e=zr.inspect({length:this.length});return this.constructor.name+" "+e})});var Ua=D((Ob,au)=>{"use strict";var Ki=qr();function Fg(e,t){var r=this,i=this._readableState&&this._readableState.destroyed,n=this._writableState&&this._writableState.destroyed;return i||n?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,Ki.nextTick(Ji,this,e)):Ki.nextTick(Ji,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,function(a){!t&&a?r._writableState?r._writableState.errorEmitted||(r._writableState.errorEmitted=!0,Ki.nextTick(Ji,r,a)):Ki.nextTick(Ji,r,a):t&&t(a)}),this)}o(Fg,"destroy");function _g(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}o(_g,"undestroy");function Ji(e,t){e.emit("error",t)}o(Ji,"emitErrorNT");au.exports={destroy:Fg,undestroy:_g}});var su=D((Nb,ou)=>{ou.exports=require("util").deprecate});var Wa=D((Wb,gu)=>{"use strict";var kt=qr();gu.exports=K;function uu(e){var t=this;this.next=null,this.entry=null,this.finish=function(){$g(t,e)}}o(uu,"CorkedRequest");var Ag=!process.browser&&["v0.10","v0.9."].indexOf(process.version.slice(0,5))>-1?setImmediate:kt.nextTick,Xt;K.WritableState=Gr;var cu=Object.create(Jt());cu.inherits=Yt();var Tg={deprecate:su()},hu=Ra(),Xi=jr().Buffer,Pg=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function Rg(e){return Xi.from(e)}o(Rg,"_uint8ArrayToBuffer");function Ig(e){return Xi.isBuffer(e)||e instanceof Pg}o(Ig,"_isUint8Array");var fu=Ua();cu.inherits(K,hu);function Mg(){}o(Mg,"nop");function Gr(e,t){Xt=Xt||xt(),e=e||{};var r=t instanceof Xt;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.writableObjectMode);var i=e.highWaterMark,n=e.writableHighWaterMark,a=this.objectMode?16:16*1024;i||i===0?this.highWaterMark=i:r&&(n||n===0)?this.highWaterMark=n:this.highWaterMark=a,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=e.decodeStrings===!1;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(l){qg(t,l)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new uu(this)}o(Gr,"WritableState");Gr.prototype.getBuffer=o(function(){for(var t=this.bufferedRequest,r=[];t;)r.push(t),t=t.next;return r},"getBuffer");(function(){try{Object.defineProperty(Gr.prototype,"buffer",{get:Tg.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Yi;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Yi=Function.prototype[Symbol.hasInstance],Object.defineProperty(K,Symbol.hasInstance,{value:o(function(e){return Yi.call(this,e)?!0:this!==K?!1:e&&e._writableState instanceof Gr},"value")})):Yi=o(function(e){return e instanceof this},"realHasInstance");function K(e){if(Xt=Xt||xt(),!Yi.call(K,this)&&!(this instanceof Xt))return new K(e);this._writableState=new Gr(e,this),this.writable=!0,e&&(typeof e.write=="function"&&(this._write=e.write),typeof e.writev=="function"&&(this._writev=e.writev),typeof e.destroy=="function"&&(this._destroy=e.destroy),typeof e.final=="function"&&(this._final=e.final)),hu.call(this)}o(K,"Writable");K.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))};function Lg(e,t){var r=new Error("write after end");e.emit("error",r),kt.nextTick(t,r)}o(Lg,"writeAfterEnd");function Bg(e,t,r,i){var n=!0,a=!1;return r===null?a=new TypeError("May not write null values to stream"):typeof r!="string"&&r!==void 0&&!t.objectMode&&(a=new TypeError("Invalid non-string/buffer chunk")),a&&(e.emit("error",a),kt.nextTick(i,a),n=!1),n}o(Bg,"validChunk");K.prototype.write=function(e,t,r){var i=this._writableState,n=!1,a=!i.objectMode&&Ig(e);return a&&!Xi.isBuffer(e)&&(e=Rg(e)),typeof t=="function"&&(r=t,t=null),a?t="buffer":t||(t=i.defaultEncoding),typeof r!="function"&&(r=Mg),i.ended?Lg(this,r):(a||Bg(this,i,e,r))&&(i.pendingcb++,n=Ug(this,i,a,e,t,r)),n};K.prototype.cork=function(){var e=this._writableState;e.corked++};K.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,!e.writing&&!e.corked&&!e.bufferProcessing&&e.bufferedRequest&&du(this,e))};K.prototype.setDefaultEncoding=o(function(t){if(typeof t=="string"&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},"setDefaultEncoding");function Og(e,t,r){return!e.objectMode&&e.decodeStrings!==!1&&typeof t=="string"&&(t=Xi.from(t,r)),t}o(Og,"decodeChunk");Object.defineProperty(K.prototype,"writableHighWaterMark",{enumerable:!1,get:o(function(){return this._writableState.highWaterMark},"get")});function Ug(e,t,r,i,n,a){if(!r){var s=Og(t,i,n);i!==s&&(r=!0,n="buffer",i=s)}var l=t.objectMode?1:i.length;t.length+=l;var h=t.length<t.highWaterMark;if(h||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:i,encoding:n,isBuf:r,callback:a,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else Na(e,t,!1,l,i,n,a);return h}o(Ug,"writeOrBuffer");function Na(e,t,r,i,n,a,s){t.writelen=i,t.writecb=s,t.writing=!0,t.sync=!0,r?e._writev(n,t.onwrite):e._write(n,a,t.onwrite),t.sync=!1}o(Na,"doWrite");function Ng(e,t,r,i,n){--t.pendingcb,r?(kt.nextTick(n,i),kt.nextTick(Hr,e,t),e._writableState.errorEmitted=!0,e.emit("error",i)):(n(i),e._writableState.errorEmitted=!0,e.emit("error",i),Hr(e,t))}o(Ng,"onwriteError");function Wg(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}o(Wg,"onwriteStateUpdate");function qg(e,t){var r=e._writableState,i=r.sync,n=r.writecb;if(Wg(r),t)Ng(e,r,i,t,n);else{var a=pu(r);!a&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&du(e,r),i?Ag(lu,e,r,a,n):lu(e,r,a,n)}}o(qg,"onwrite");function lu(e,t,r,i){r||jg(e,t),t.pendingcb--,i(),Hr(e,t)}o(lu,"afterWrite");function jg(e,t){t.length===0&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}o(jg,"onwriteDrain");function du(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var i=t.bufferedRequestCount,n=new Array(i),a=t.corkedRequestsFree;a.entry=r;for(var s=0,l=!0;r;)n[s]=r,r.isBuf||(l=!1),r=r.next,s+=1;n.allBuffers=l,Na(e,t,!0,t.length,n,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new uu(t),t.bufferedRequestCount=0}else{for(;r;){var h=r.chunk,u=r.encoding,c=r.callback,f=t.objectMode?1:h.length;if(Na(e,t,!1,f,h,u,c),r=r.next,t.bufferedRequestCount--,t.writing)break}r===null&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}o(du,"clearBuffer");K.prototype._write=function(e,t,r){r(new Error("_write() is not implemented"))};K.prototype._writev=null;K.prototype.end=function(e,t,r){var i=this._writableState;typeof e=="function"?(r=e,e=null,t=null):typeof t=="function"&&(r=t,t=null),e!=null&&this.write(e,t),i.corked&&(i.corked=1,this.uncork()),i.ending||Gg(this,i,r)};function pu(e){return e.ending&&e.length===0&&e.bufferedRequest===null&&!e.finished&&!e.writing}o(pu,"needFinish");function zg(e,t){e._final(function(r){t.pendingcb--,r&&e.emit("error",r),t.prefinished=!0,e.emit("prefinish"),Hr(e,t)})}o(zg,"callFinal");function Hg(e,t){!t.prefinished&&!t.finalCalled&&(typeof e._final=="function"?(t.pendingcb++,t.finalCalled=!0,kt.nextTick(zg,e,t)):(t.prefinished=!0,e.emit("prefinish")))}o(Hg,"prefinish");function Hr(e,t){var r=pu(t);return r&&(Hg(e,t),t.pendingcb===0&&(t.finished=!0,e.emit("finish"))),r}o(Hr,"finishMaybe");function Gg(e,t,r){t.ending=!0,Hr(e,t),r&&(t.finished?kt.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}o(Gg,"endWritable");function $g(e,t,r){var i=e.entry;for(e.entry=null;i;){var n=i.callback;t.pendingcb--,n(r),i=i.next}t.corkedRequestsFree.next=e}o($g,"onCorkedFinish");Object.defineProperty(K.prototype,"destroyed",{get:o(function(){return this._writableState===void 0?!1:this._writableState.destroyed},"get"),set:o(function(e){this._writableState&&(this._writableState.destroyed=e)},"set")});K.prototype.destroy=fu.destroy;K.prototype._undestroy=fu.undestroy;K.prototype._destroy=function(e,t){this.end(),t(e)}});var xt=D((jb,yu)=>{"use strict";var mu=qr(),Vg=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};yu.exports=Je;var Du=Object.create(Jt());Du.inherits=Yt();var vu=za(),ja=Wa();Du.inherits(Je,vu);for(qa=Vg(ja.prototype),Qi=0;Qi<qa.length;Qi++)en=qa[Qi],Je.prototype[en]||(Je.prototype[en]=ja.prototype[en]);var qa,en,Qi;function Je(e){if(!(this instanceof Je))return new Je(e);vu.call(this,e),ja.call(this,e),e&&e.readable===!1&&(this.readable=!1),e&&e.writable===!1&&(this.writable=!1),this.allowHalfOpen=!0,e&&e.allowHalfOpen===!1&&(this.allowHalfOpen=!1),this.once("end",Zg)}o(Je,"Duplex");Object.defineProperty(Je.prototype,"writableHighWaterMark",{enumerable:!1,get:o(function(){return this._writableState.highWaterMark},"get")});function Zg(){this.allowHalfOpen||this._writableState.ended||mu.nextTick(Kg,this)}o(Zg,"onend");function Kg(e){e.end()}o(Kg,"onEndNT");Object.defineProperty(Je.prototype,"destroyed",{get:o(function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},"get"),set:o(function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)},"set")});Je.prototype._destroy=function(e,t){this.push(null),this.end(),mu.nextTick(t,e)}});var $a=D(bu=>{"use strict";var Ga=jr().Buffer,wu=Ga.isEncoding||function(e){switch(e=""+e,e&&e.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function Jg(e){if(!e)return"utf8";for(var t;;)switch(e){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return e;default:if(t)return;e=(""+e).toLowerCase(),t=!0}}o(Jg,"_normalizeEncoding");function Yg(e){var t=Jg(e);if(typeof t!="string"&&(Ga.isEncoding===wu||!wu(e)))throw new Error("Unknown encoding: "+e);return t||e}o(Yg,"normalizeEncoding");bu.StringDecoder=$r;function $r(e){this.encoding=Yg(e);var t;switch(this.encoding){case"utf16le":this.text=im,this.end=nm,t=4;break;case"utf8":this.fillLast=em,t=4;break;case"base64":this.text=am,this.end=om,t=3;break;default:this.write=sm,this.end=lm;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=Ga.allocUnsafe(t)}o($r,"StringDecoder");$r.prototype.write=function(e){if(e.length===0)return"";var t,r;if(this.lastNeed){if(t=this.fillLast(e),t===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<e.length?t?t+this.text(e,r):this.text(e,r):t||""};$r.prototype.end=rm;$r.prototype.text=tm;$r.prototype.fillLast=function(e){if(this.lastNeed<=e.length)return e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,this.lastTotal-this.lastNeed,0,e.length),this.lastNeed-=e.length};function Ha(e){return e<=127?0:e>>5===6?2:e>>4===14?3:e>>3===30?4:e>>6===2?-1:-2}o(Ha,"utf8CheckByte");function Xg(e,t,r){var i=t.length-1;if(i<r)return 0;var n=Ha(t[i]);return n>=0?(n>0&&(e.lastNeed=n-1),n):--i<r||n===-2?0:(n=Ha(t[i]),n>=0?(n>0&&(e.lastNeed=n-2),n):--i<r||n===-2?0:(n=Ha(t[i]),n>=0?(n>0&&(n===2?n=0:e.lastNeed=n-3),n):0))}o(Xg,"utf8CheckIncomplete");function Qg(e,t,r){if((t[0]&192)!==128)return e.lastNeed=0,"\uFFFD";if(e.lastNeed>1&&t.length>1){if((t[1]&192)!==128)return e.lastNeed=1,"\uFFFD";if(e.lastNeed>2&&t.length>2&&(t[2]&192)!==128)return e.lastNeed=2,"\uFFFD"}}o(Qg,"utf8CheckExtraBytes");function em(e){var t=this.lastTotal-this.lastNeed,r=Qg(this,e,t);if(r!==void 0)return r;if(this.lastNeed<=e.length)return e.copy(this.lastChar,t,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);e.copy(this.lastChar,t,0,e.length),this.lastNeed-=e.length}o(em,"utf8FillLast");function tm(e,t){var r=Xg(this,e,t);if(!this.lastNeed)return e.toString("utf8",t);this.lastTotal=r;var i=e.length-(r-this.lastNeed);return e.copy(this.lastChar,0,i),e.toString("utf8",t,i)}o(tm,"utf8Text");function rm(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+"\uFFFD":t}o(rm,"utf8End");function im(e,t){if((e.length-t)%2===0){var r=e.toString("utf16le",t);if(r){var i=r.charCodeAt(r.length-1);if(i>=55296&&i<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=e[e.length-1],e.toString("utf16le",t,e.length-1)}o(im,"utf16Text");function nm(e){var t=e&&e.length?this.write(e):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return t+this.lastChar.toString("utf16le",0,r)}return t}o(nm,"utf16End");function am(e,t){var r=(e.length-t)%3;return r===0?e.toString("base64",t):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=e[e.length-1]:(this.lastChar[0]=e[e.length-2],this.lastChar[1]=e[e.length-1]),e.toString("base64",t,e.length-r))}o(am,"base64Text");function om(e){var t=e&&e.length?this.write(e):"";return this.lastNeed?t+this.lastChar.toString("base64",0,3-this.lastNeed):t}o(om,"base64End");function sm(e){return e.toString(this.encoding)}o(sm,"simpleWrite");function lm(e){return e&&e.length?this.write(e):""}o(lm,"simpleEnd")});var za=D((Vb,Iu)=>{"use strict";var er=qr();Iu.exports=j;var um=Xl(),Vr;j.ReadableState=_u;var $b=require("events").EventEmitter,Su=o(function(e,t){return e.listeners(t).length},"EElistenerCount"),Ya=Ra(),Zr=jr().Buffer,cm=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function hm(e){return Zr.from(e)}o(hm,"_uint8ArrayToBuffer");function fm(e){return Zr.isBuffer(e)||e instanceof cm}o(fm,"_isUint8Array");var Eu=Object.create(Jt());Eu.inherits=Yt();var Va=require("util"),O=void 0;Va&&Va.debuglog?O=Va.debuglog("stream"):O=o(function(){},"debug");var dm=nu(),Fu=Ua(),Qt;Eu.inherits(j,Ya);var Za=["error","close","destroy","pause","resume"];function pm(e,t,r){if(typeof e.prependListener=="function")return e.prependListener(t,r);!e._events||!e._events[t]?e.on(t,r):um(e._events[t])?e._events[t].unshift(r):e._events[t]=[r,e._events[t]]}o(pm,"prependListener");function _u(e,t){Vr=Vr||xt(),e=e||{};var r=t instanceof Vr;this.objectMode=!!e.objectMode,r&&(this.objectMode=this.objectMode||!!e.readableObjectMode);var i=e.highWaterMark,n=e.readableHighWaterMark,a=this.objectMode?16:16*1024;i||i===0?this.highWaterMark=i:r&&(n||n===0)?this.highWaterMark=n:this.highWaterMark=a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new dm,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(Qt||(Qt=$a().StringDecoder),this.decoder=new Qt(e.encoding),this.encoding=e.encoding)}o(_u,"ReadableState");function j(e){if(Vr=Vr||xt(),!(this instanceof j))return new j(e);this._readableState=new _u(e,this),this.readable=!0,e&&(typeof e.read=="function"&&(this._read=e.read),typeof e.destroy=="function"&&(this._destroy=e.destroy)),Ya.call(this)}o(j,"Readable");Object.defineProperty(j.prototype,"destroyed",{get:o(function(){return this._readableState===void 0?!1:this._readableState.destroyed},"get"),set:o(function(e){this._readableState&&(this._readableState.destroyed=e)},"set")});j.prototype.destroy=Fu.destroy;j.prototype._undestroy=Fu.undestroy;j.prototype._destroy=function(e,t){this.push(null),t(e)};j.prototype.push=function(e,t){var r=this._readableState,i;return r.objectMode?i=!0:typeof e=="string"&&(t=t||r.defaultEncoding,t!==r.encoding&&(e=Zr.from(e,t),t=""),i=!0),Au(this,e,t,!1,i)};j.prototype.unshift=function(e){return Au(this,e,null,!0,!1)};function Au(e,t,r,i,n){var a=e._readableState;if(t===null)a.reading=!1,vm(e,a);else{var s;n||(s=gm(a,t)),s?e.emit("error",s):a.objectMode||t&&t.length>0?(typeof t!="string"&&!a.objectMode&&Object.getPrototypeOf(t)!==Zr.prototype&&(t=hm(t)),i?a.endEmitted?e.emit("error",new Error("stream.unshift() after end event")):Ka(e,a,t,!0):a.ended?e.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!r?(t=a.decoder.write(t),a.objectMode||t.length!==0?Ka(e,a,t,!1):Tu(e,a)):Ka(e,a,t,!1))):i||(a.reading=!1)}return mm(a)}o(Au,"readableAddChunk");function Ka(e,t,r,i){t.flowing&&t.length===0&&!t.sync?(e.emit("data",r),e.read(0)):(t.length+=t.objectMode?1:r.length,i?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&tn(e)),Tu(e,t)}o(Ka,"addChunk");function gm(e,t){var r;return!fm(t)&&typeof t!="string"&&t!==void 0&&!e.objectMode&&(r=new TypeError("Invalid non-string/buffer chunk")),r}o(gm,"chunkInvalid");function mm(e){return!e.ended&&(e.needReadable||e.length<e.highWaterMark||e.length===0)}o(mm,"needMoreData");j.prototype.isPaused=function(){return this._readableState.flowing===!1};j.prototype.setEncoding=function(e){return Qt||(Qt=$a().StringDecoder),this._readableState.decoder=new Qt(e),this._readableState.encoding=e,this};var Cu=8388608;function Dm(e){return e>=Cu?e=Cu:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}o(Dm,"computeNewHighWaterMark");function ku(e,t){return e<=0||t.length===0&&t.ended?0:t.objectMode?1:e!==e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=Dm(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}o(ku,"howMuchToRead");j.prototype.read=function(e){O("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(e!==0&&(t.emittedReadable=!1),e===0&&t.needReadable&&(t.length>=t.highWaterMark||t.ended))return O("read: emitReadable",t.length,t.ended),t.length===0&&t.ended?Ja(this):tn(this),null;if(e=ku(e,t),e===0&&t.ended)return t.length===0&&Ja(this),null;var i=t.needReadable;O("need readable",i),(t.length===0||t.length-e<t.highWaterMark)&&(i=!0,O("length less than watermark",i)),t.ended||t.reading?(i=!1,O("reading or ended",i)):i&&(O("do read"),t.reading=!0,t.sync=!0,t.length===0&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=ku(r,t)));var n;return e>0?n=Pu(e,t):n=null,n===null?(t.needReadable=!0,e=0):t.length-=e,t.length===0&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&Ja(this)),n!==null&&this.emit("data",n),n};function vm(e,t){if(!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,tn(e)}}o(vm,"onEofChunk");function tn(e){var t=e._readableState;t.needReadable=!1,t.emittedReadable||(O("emitReadable",t.flowing),t.emittedReadable=!0,t.sync?er.nextTick(xu,e):xu(e))}o(tn,"emitReadable");function xu(e){O("emit readable"),e.emit("readable"),Xa(e)}o(xu,"emitReadable_");function Tu(e,t){t.readingMore||(t.readingMore=!0,er.nextTick(ym,e,t))}o(Tu,"maybeReadMore");function ym(e,t){for(var r=t.length;!t.reading&&!t.flowing&&!t.ended&&t.length<t.highWaterMark&&(O("maybeReadMore read 0"),e.read(0),r!==t.length);)r=t.length;t.readingMore=!1}o(ym,"maybeReadMore_");j.prototype._read=function(e){this.emit("error",new Error("_read() is not implemented"))};j.prototype.pipe=function(e,t){var r=this,i=this._readableState;switch(i.pipesCount){case 0:i.pipes=e;break;case 1:i.pipes=[i.pipes,e];break;default:i.pipes.push(e);break}i.pipesCount+=1,O("pipe count=%d opts=%j",i.pipesCount,t);var n=(!t||t.end!==!1)&&e!==process.stdout&&e!==process.stderr,a=n?l:y;i.endEmitted?er.nextTick(a):r.once("end",a),e.on("unpipe",s);function s(m,b){O("onunpipe"),m===r&&b&&b.hasUnpiped===!1&&(b.hasUnpiped=!0,c())}o(s,"onunpipe");function l(){O("onend"),e.end()}o(l,"onend");var h=wm(r);e.on("drain",h);var u=!1;function c(){O("cleanup"),e.removeListener("close",C),e.removeListener("finish",v),e.removeListener("drain",h),e.removeListener("error",p),e.removeListener("unpipe",s),r.removeListener("end",l),r.removeListener("end",y),r.removeListener("data",d),u=!0,i.awaitDrain&&(!e._writableState||e._writableState.needDrain)&&h()}o(c,"cleanup");var f=!1;r.on("data",d);function d(m){O("ondata"),f=!1;var b=e.write(m);b===!1&&!f&&((i.pipesCount===1&&i.pipes===e||i.pipesCount>1&&Ru(i.pipes,e)!==-1)&&!u&&(O("false write response, pause",i.awaitDrain),i.awaitDrain++,f=!0),r.pause())}o(d,"ondata");function p(m){O("onerror",m),y(),e.removeListener("error",p),Su(e,"error")===0&&e.emit("error",m)}o(p,"onerror"),pm(e,"error",p);function C(){e.removeListener("finish",v),y()}o(C,"onclose"),e.once("close",C);function v(){O("onfinish"),e.removeListener("close",C),y()}o(v,"onfinish"),e.once("finish",v);function y(){O("unpipe"),r.unpipe(e)}return o(y,"unpipe"),e.emit("pipe",r),i.flowing||(O("pipe resume"),r.resume()),e};function wm(e){return function(){var t=e._readableState;O("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,t.awaitDrain===0&&Su(e,"data")&&(t.flowing=!0,Xa(e))}}o(wm,"pipeOnDrain");j.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(t.pipesCount===0)return this;if(t.pipesCount===1)return e&&e!==t.pipes?this:(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r),this);if(!e){var i=t.pipes,n=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var a=0;a<n;a++)i[a].emit("unpipe",this,{hasUnpiped:!1});return this}var s=Ru(t.pipes,e);return s===-1?this:(t.pipes.splice(s,1),t.pipesCount-=1,t.pipesCount===1&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r),this)};j.prototype.on=function(e,t){var r=Ya.prototype.on.call(this,e,t);if(e==="data")this._readableState.flowing!==!1&&this.resume();else if(e==="readable"){var i=this._readableState;!i.endEmitted&&!i.readableListening&&(i.readableListening=i.needReadable=!0,i.emittedReadable=!1,i.reading?i.length&&tn(this):er.nextTick(bm,this))}return r};j.prototype.addListener=j.prototype.on;function bm(e){O("readable nexttick read 0"),e.read(0)}o(bm,"nReadingNextTick");j.prototype.resume=function(){var e=this._readableState;return e.flowing||(O("resume"),e.flowing=!0,Cm(this,e)),this};function Cm(e,t){t.resumeScheduled||(t.resumeScheduled=!0,er.nextTick(km,e,t))}o(Cm,"resume");function km(e,t){t.reading||(O("resume read 0"),e.read(0)),t.resumeScheduled=!1,t.awaitDrain=0,e.emit("resume"),Xa(e),t.flowing&&!t.reading&&e.read(0)}o(km,"resume_");j.prototype.pause=function(){return O("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(O("pause"),this._readableState.flowing=!1,this.emit("pause")),this};function Xa(e){var t=e._readableState;for(O("flow",t.flowing);t.flowing&&e.read()!==null;);}o(Xa,"flow");j.prototype.wrap=function(e){var t=this,r=this._readableState,i=!1;e.on("end",function(){if(O("wrapped end"),r.decoder&&!r.ended){var s=r.decoder.end();s&&s.length&&t.push(s)}t.push(null)}),e.on("data",function(s){if(O("wrapped data"),r.decoder&&(s=r.decoder.write(s)),!(r.objectMode&&s==null)&&!(!r.objectMode&&(!s||!s.length))){var l=t.push(s);l||(i=!0,e.pause())}});for(var n in e)this[n]===void 0&&typeof e[n]=="function"&&(this[n]=function(s){return function(){return e[s].apply(e,arguments)}}(n));for(var a=0;a<Za.length;a++)e.on(Za[a],this.emit.bind(this,Za[a]));return this._read=function(s){O("wrapped _read",s),i&&(i=!1,e.resume())},this};Object.defineProperty(j.prototype,"readableHighWaterMark",{enumerable:!1,get:o(function(){return this._readableState.highWaterMark},"get")});j._fromList=Pu;function Pu(e,t){if(t.length===0)return null;var r;return t.objectMode?r=t.buffer.shift():!e||e>=t.length?(t.decoder?r=t.buffer.join(""):t.buffer.length===1?r=t.buffer.head.data:r=t.buffer.concat(t.length),t.buffer.clear()):r=xm(e,t.buffer,t.decoder),r}o(Pu,"fromList");function xm(e,t,r){var i;return e<t.head.data.length?(i=t.head.data.slice(0,e),t.head.data=t.head.data.slice(e)):e===t.head.data.length?i=t.shift():i=r?Sm(e,t):Em(e,t),i}o(xm,"fromListPartial");function Sm(e,t){var r=t.head,i=1,n=r.data;for(e-=n.length;r=r.next;){var a=r.data,s=e>a.length?a.length:e;if(s===a.length?n+=a:n+=a.slice(0,e),e-=s,e===0){s===a.length?(++i,r.next?t.head=r.next:t.head=t.tail=null):(t.head=r,r.data=a.slice(s));break}++i}return t.length-=i,n}o(Sm,"copyFromBufferString");function Em(e,t){var r=Zr.allocUnsafe(e),i=t.head,n=1;for(i.data.copy(r),e-=i.data.length;i=i.next;){var a=i.data,s=e>a.length?a.length:e;if(a.copy(r,r.length-e,0,s),e-=s,e===0){s===a.length?(++n,i.next?t.head=i.next:t.head=t.tail=null):(t.head=i,i.data=a.slice(s));break}++n}return t.length-=n,r}o(Em,"copyFromBuffer");function Ja(e){var t=e._readableState;if(t.length>0)throw new Error('"endReadable()" called on non-empty stream');t.endEmitted||(t.ended=!0,er.nextTick(Fm,t,e))}o(Ja,"endReadable");function Fm(e,t){!e.endEmitted&&e.length===0&&(e.endEmitted=!0,t.readable=!1,t.emit("end"))}o(Fm,"endReadableNT");function Ru(e,t){for(var r=0,i=e.length;r<i;r++)if(e[r]===t)return r;return-1}o(Ru,"indexOf")});var Qa=D((Kb,Bu)=>{"use strict";Bu.exports=Ye;var rn=xt(),Lu=Object.create(Jt());Lu.inherits=Yt();Lu.inherits(Ye,rn);function _m(e,t){var r=this._transformState;r.transforming=!1;var i=r.writecb;if(!i)return this.emit("error",new Error("write callback called multiple times"));r.writechunk=null,r.writecb=null,t!=null&&this.push(t),i(e);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}o(_m,"afterTransform");function Ye(e){if(!(this instanceof Ye))return new Ye(e);rn.call(this,e),this._transformState={afterTransform:_m.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&(typeof e.transform=="function"&&(this._transform=e.transform),typeof e.flush=="function"&&(this._flush=e.flush)),this.on("prefinish",Am)}o(Ye,"Transform");function Am(){var e=this;typeof this._flush=="function"?this._flush(function(t,r){Mu(e,t,r)}):Mu(this,null,null)}o(Am,"prefinish");Ye.prototype.push=function(e,t){return this._transformState.needTransform=!1,rn.prototype.push.call(this,e,t)};Ye.prototype._transform=function(e,t,r){throw new Error("_transform() is not implemented")};Ye.prototype._write=function(e,t,r){var i=this._transformState;if(i.writecb=r,i.writechunk=e,i.writeencoding=t,!i.transforming){var n=this._readableState;(i.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}};Ye.prototype._read=function(e){var t=this._transformState;t.writechunk!==null&&t.writecb&&!t.transforming?(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform)):t.needTransform=!0};Ye.prototype._destroy=function(e,t){var r=this;rn.prototype._destroy.call(this,e,function(i){t(i),r.emit("close")})};function Mu(e,t,r){if(t)return e.emit("error",t);if(r!=null&&e.push(r),e._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(e._transformState.transforming)throw new Error("Calling transform done when still transforming");return e.push(null)}o(Mu,"done")});var Wu=D((Yb,Nu)=>{"use strict";Nu.exports=Kr;var Ou=Qa(),Uu=Object.create(Jt());Uu.inherits=Yt();Uu.inherits(Kr,Ou);function Kr(e){if(!(this instanceof Kr))return new Kr(e);Ou.call(this,e)}o(Kr,"PassThrough");Kr.prototype._transform=function(e,t,r){r(null,e)}});var eo=D((re,nn)=>{var Ne=require("stream");process.env.READABLE_STREAM==="disable"&&Ne?(nn.exports=Ne,re=nn.exports=Ne.Readable,re.Readable=Ne.Readable,re.Writable=Ne.Writable,re.Duplex=Ne.Duplex,re.Transform=Ne.Transform,re.PassThrough=Ne.PassThrough,re.Stream=Ne):(re=nn.exports=za(),re.Stream=Ne||re,re.Readable=re,re.Writable=Wa(),re.Duplex=xt(),re.Transform=Qa(),re.PassThrough=Wu())});var Xe=D(ge=>{"use strict";ge.base64=!0;ge.array=!0;ge.string=!0;ge.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u";ge.nodebuffer=typeof Buffer<"u";ge.uint8array=typeof Uint8Array<"u";if(typeof ArrayBuffer>"u")ge.blob=!1;else{to=new ArrayBuffer(0);try{ge.blob=new Blob([to],{type:"application/zip"}).size===0}catch{try{qu=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,ro=new qu,ro.append(to),ge.blob=ro.getBlob("application/zip").size===0}catch{ge.blob=!1}}}var to,qu,ro;try{ge.nodestream=!!eo().Readable}catch{ge.nodestream=!1}});var no=D(io=>{"use strict";var Tm=H(),Pm=Xe(),We="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";io.encode=function(e){for(var t=[],r,i,n,a,s,l,h,u=0,c=e.length,f=c,d=Tm.getTypeOf(e)!=="string";u<e.length;)f=c-u,d?(r=e[u++],i=u<c?e[u++]:0,n=u<c?e[u++]:0):(r=e.charCodeAt(u++),i=u<c?e.charCodeAt(u++):0,n=u<c?e.charCodeAt(u++):0),a=r>>2,s=(r&3)<<4|i>>4,l=f>1?(i&15)<<2|n>>6:64,h=f>2?n&63:64,t.push(We.charAt(a)+We.charAt(s)+We.charAt(l)+We.charAt(h));return t.join("")};io.decode=function(e){var t,r,i,n,a,s,l,h=0,u=0,c="data:";if(e.substr(0,c.length)===c)throw new Error("Invalid base64 input, it looks like a data url.");e=e.replace(/[^A-Za-z0-9+/=]/g,"");var f=e.length*3/4;if(e.charAt(e.length-1)===We.charAt(64)&&f--,e.charAt(e.length-2)===We.charAt(64)&&f--,f%1!==0)throw new Error("Invalid base64 input, bad content length.");var d;for(Pm.uint8array?d=new Uint8Array(f|0):d=new Array(f|0);h<e.length;)n=We.indexOf(e.charAt(h++)),a=We.indexOf(e.charAt(h++)),s=We.indexOf(e.charAt(h++)),l=We.indexOf(e.charAt(h++)),t=n<<2|a>>4,r=(a&15)<<4|s>>2,i=(s&3)<<6|l,d[u++]=t,s!==64&&(d[u++]=r),l!==64&&(d[u++]=i);return d}});var Jr=D((tC,ju)=>{"use strict";ju.exports={isNode:typeof Buffer<"u",newBufferFrom:o(function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if(typeof e=="number")throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},"newBufferFrom"),allocBuffer:o(function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},"allocBuffer"),isBuffer:o(function(e){return Buffer.isBuffer(e)},"isBuffer"),isStream:o(function(e){return e&&typeof e.on=="function"&&typeof e.pause=="function"&&typeof e.resume=="function"},"isStream")}});var $u=D((iC,Gu)=>{"use strict";var zu=global.MutationObserver||global.WebKitMutationObserver,tr;process.browser?zu?(ao=0,Hu=new zu(Yr),oo=global.document.createTextNode(""),Hu.observe(oo,{characterData:!0}),tr=o(function(){oo.data=ao=++ao%2},"scheduleDrain")):!global.setImmediate&&typeof global.MessageChannel<"u"?(so=new global.MessageChannel,so.port1.onmessage=Yr,tr=o(function(){so.port2.postMessage(0)},"scheduleDrain")):"document"in global&&"onreadystatechange"in global.document.createElement("script")?tr=o(function(){var e=global.document.createElement("script");e.onreadystatechange=function(){Yr(),e.onreadystatechange=null,e.parentNode.removeChild(e),e=null},global.document.documentElement.appendChild(e)},"scheduleDrain"):tr=o(function(){setTimeout(Yr,0)},"scheduleDrain"):tr=o(function(){process.nextTick(Yr)},"scheduleDrain");var ao,Hu,oo,so,lo,Xr=[];function Yr(){lo=!0;for(var e,t,r=Xr.length;r;){for(t=Xr,Xr=[],e=-1;++e<r;)t[e]();r=Xr.length}lo=!1}o(Yr,"nextTick");Gu.exports=Rm;function Rm(e){Xr.push(e)===1&&!lo&&tr()}o(Rm,"immediate")});var Qu=D((aC,Xu)=>{"use strict";var Vu=$u();function rr(){}o(rr,"INTERNAL");var ae={},Zu=["REJECTED"],uo=["FULFILLED"],Ku=["PENDING"];process.browser||(Qr=["UNHANDLED"]);var Qr;Xu.exports=ot;function ot(e){if(typeof e!="function")throw new TypeError("resolver must be a function");this.state=Ku,this.queue=[],this.outcome=void 0,process.browser||(this.handled=Qr),e!==rr&&Ju(this,e)}o(ot,"Promise");ot.prototype.finally=function(e){if(typeof e!="function")return this;var t=this.constructor;return this.then(r,i);function r(n){function a(){return n}return o(a,"yes"),t.resolve(e()).then(a)}function i(n){function a(){throw n}return o(a,"no"),t.resolve(e()).then(a)}};ot.prototype.catch=function(e){return this.then(null,e)};ot.prototype.then=function(e,t){if(typeof e!="function"&&this.state===uo||typeof t!="function"&&this.state===Zu)return this;var r=new this.constructor(rr);if(process.browser||this.handled===Qr&&(this.handled=null),this.state!==Ku){var i=this.state===uo?e:t;co(r,i,this.outcome)}else this.queue.push(new ei(r,e,t));return r};function ei(e,t,r){this.promise=e,typeof t=="function"&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),typeof r=="function"&&(this.onRejected=r,this.callRejected=this.otherCallRejected)}o(ei,"QueueItem");ei.prototype.callFulfilled=function(e){ae.resolve(this.promise,e)};ei.prototype.otherCallFulfilled=function(e){co(this.promise,this.onFulfilled,e)};ei.prototype.callRejected=function(e){ae.reject(this.promise,e)};ei.prototype.otherCallRejected=function(e){co(this.promise,this.onRejected,e)};function co(e,t,r){Vu(function(){var i;try{i=t(r)}catch(n){return ae.reject(e,n)}i===e?ae.reject(e,new TypeError("Cannot resolve promise with itself")):ae.resolve(e,i)})}o(co,"unwrap");ae.resolve=function(e,t){var r=Yu(Im,t);if(r.status==="error")return ae.reject(e,r.value);var i=r.value;if(i)Ju(e,i);else{e.state=uo,e.outcome=t;for(var n=-1,a=e.queue.length;++n<a;)e.queue[n].callFulfilled(t)}return e};ae.reject=function(e,t){e.state=Zu,e.outcome=t,process.browser||e.handled===Qr&&Vu(function(){e.handled===Qr&&process.emit("unhandledRejection",t,e)});for(var r=-1,i=e.queue.length;++r<i;)e.queue[r].callRejected(t);return e};function Im(e){var t=e&&e.then;if(e&&(typeof e=="object"||typeof e=="function")&&typeof t=="function")return o(function(){t.apply(e,arguments)},"appyThen")}o(Im,"getThen");function Ju(e,t){var r=!1;function i(l){r||(r=!0,ae.reject(e,l))}o(i,"onError");function n(l){r||(r=!0,ae.resolve(e,l))}o(n,"onSuccess");function a(){t(n,i)}o(a,"tryToUnwrap");var s=Yu(a);s.status==="error"&&i(s.value)}o(Ju,"safelyResolveThenable");function Yu(e,t){var r={};try{r.value=e(t),r.status="success"}catch(i){r.status="error",r.value=i}return r}o(Yu,"tryCatch");ot.resolve=Mm;function Mm(e){return e instanceof this?e:ae.resolve(new this(rr),e)}o(Mm,"resolve");ot.reject=Lm;function Lm(e){var t=new this(rr);return ae.reject(t,e)}o(Lm,"reject");ot.all=Bm;function Bm(e){var t=this;if(Object.prototype.toString.call(e)!=="[object Array]")return this.reject(new TypeError("must be an array"));var r=e.length,i=!1;if(!r)return this.resolve([]);for(var n=new Array(r),a=0,s=-1,l=new this(rr);++s<r;)h(e[s],s);return l;function h(u,c){t.resolve(u).then(f,function(d){i||(i=!0,ae.reject(l,d))});function f(d){n[c]=d,++a===r&&!i&&(i=!0,ae.resolve(l,n))}o(f,"resolveFromAll")}}o(Bm,"all");ot.race=Om;function Om(e){var t=this;if(Object.prototype.toString.call(e)!=="[object Array]")return this.reject(new TypeError("must be an array"));var r=e.length,i=!1;if(!r)return this.resolve([]);for(var n=-1,a=new this(rr);++n<r;)s(e[n]);return a;function s(l){t.resolve(l).then(function(h){i||(i=!0,ae.resolve(a,h))},function(h){i||(i=!0,ae.reject(a,h))})}}o(Om,"race")});var ir=D((sC,ec)=>{"use strict";var ho=null;typeof Promise<"u"?ho=Promise:ho=Qu();ec.exports={Promise:ho}});var rc=D(tc=>{(function(e,t){"use strict";if(e.setImmediate)return;var r=1,i={},n=!1,a=e.document,s;function l(b){typeof b!="function"&&(b=new Function(""+b));for(var k=new Array(arguments.length-1),w=0;w<k.length;w++)k[w]=arguments[w+1];var g={callback:b,args:k};return i[r]=g,s(r),r++}o(l,"setImmediate");function h(b){delete i[b]}o(h,"clearImmediate");function u(b){var k=b.callback,w=b.args;switch(w.length){case 0:k();break;case 1:k(w[0]);break;case 2:k(w[0],w[1]);break;case 3:k(w[0],w[1],w[2]);break;default:k.apply(t,w);break}}o(u,"run");function c(b){if(n)setTimeout(c,0,b);else{var k=i[b];if(k){n=!0;try{u(k)}finally{h(b),n=!1}}}}o(c,"runIfPresent");function f(){s=o(function(b){process.nextTick(function(){c(b)})},"registerImmediate")}o(f,"installNextTickImplementation");function d(){if(e.postMessage&&!e.importScripts){var b=!0,k=e.onmessage;return e.onmessage=function(){b=!1},e.postMessage("","*"),e.onmessage=k,b}}o(d,"canUsePostMessage");function p(){var b="setImmediate$"+Math.random()+"$",k=o(function(w){w.source===e&&typeof w.data=="string"&&w.data.indexOf(b)===0&&c(+w.data.slice(b.length))},"onGlobalMessage");e.addEventListener?e.addEventListener("message",k,!1):e.attachEvent("onmessage",k),s=o(function(w){e.postMessage(b+w,"*")},"registerImmediate")}o(p,"installPostMessageImplementation");function C(){var b=new MessageChannel;b.port1.onmessage=function(k){var w=k.data;c(w)},s=o(function(k){b.port2.postMessage(k)},"registerImmediate")}o(C,"installMessageChannelImplementation");function v(){var b=a.documentElement;s=o(function(k){var w=a.createElement("script");w.onreadystatechange=function(){c(k),w.onreadystatechange=null,b.removeChild(w),w=null},b.appendChild(w)},"registerImmediate")}o(v,"installReadyStateChangeImplementation");function y(){s=o(function(b){setTimeout(c,0,b)},"registerImmediate")}o(y,"installSetTimeoutImplementation");var m=Object.getPrototypeOf&&Object.getPrototypeOf(e);m=m&&m.setTimeout?m:e,{}.toString.call(e.process)==="[object process]"?f():d()?p():e.MessageChannel?C():a&&"onreadystatechange"in a.createElement("script")?v():y(),m.setImmediate=l,m.clearImmediate=h})(typeof self>"u"?typeof global>"u"?tc:global:self)});var H=D(J=>{"use strict";var st=Xe(),Um=no(),nr=Jr(),fo=ir();rc();function Nm(e){var t=null;return st.uint8array?t=new Uint8Array(e.length):t=new Array(e.length),on(e,t)}o(Nm,"string2binary");J.newBlob=function(e,t){J.checkSupport("blob");try{return new Blob([e],{type:t})}catch{try{var r=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,i=new r;return i.append(e),i.getBlob(t)}catch{throw new Error("Bug : can't construct the Blob.")}}};function ti(e){return e}o(ti,"identity");function on(e,t){for(var r=0;r<e.length;++r)t[r]=e.charCodeAt(r)&255;return t}o(on,"stringToArrayLike");var an={stringifyByChunk:o(function(e,t,r){var i=[],n=0,a=e.length;if(a<=r)return String.fromCharCode.apply(null,e);for(;n<a;)t==="array"||t==="nodebuffer"?i.push(String.fromCharCode.apply(null,e.slice(n,Math.min(n+r,a)))):i.push(String.fromCharCode.apply(null,e.subarray(n,Math.min(n+r,a)))),n+=r;return i.join("")},"stringifyByChunk"),stringifyByChar:o(function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(e[r]);return t},"stringifyByChar"),applyCanBeUsed:{uint8array:function(){try{return st.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return st.nodebuffer&&String.fromCharCode.apply(null,nr.allocBuffer(1)).length===1}catch{return!1}}()}};function ri(e){var t=65536,r=J.getTypeOf(e),i=!0;if(r==="uint8array"?i=an.applyCanBeUsed.uint8array:r==="nodebuffer"&&(i=an.applyCanBeUsed.nodebuffer),i)for(;t>1;)try{return an.stringifyByChunk(e,r,t)}catch{t=Math.floor(t/2)}return an.stringifyByChar(e)}o(ri,"arrayLikeToString");J.applyFromCharCode=ri;function sn(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}o(sn,"arrayLikeToArrayLike");var lt={};lt.string={string:ti,array:o(function(e){return on(e,new Array(e.length))},"array"),arraybuffer:o(function(e){return lt.string.uint8array(e).buffer},"arraybuffer"),uint8array:o(function(e){return on(e,new Uint8Array(e.length))},"uint8array"),nodebuffer:o(function(e){return on(e,nr.allocBuffer(e.length))},"nodebuffer")};lt.array={string:ri,array:ti,arraybuffer:o(function(e){return new Uint8Array(e).buffer},"arraybuffer"),uint8array:o(function(e){return new Uint8Array(e)},"uint8array"),nodebuffer:o(function(e){return nr.newBufferFrom(e)},"nodebuffer")};lt.arraybuffer={string:o(function(e){return ri(new Uint8Array(e))},"string"),array:o(function(e){return sn(new Uint8Array(e),new Array(e.byteLength))},"array"),arraybuffer:ti,uint8array:o(function(e){return new Uint8Array(e)},"uint8array"),nodebuffer:o(function(e){return nr.newBufferFrom(new Uint8Array(e))},"nodebuffer")};lt.uint8array={string:ri,array:o(function(e){return sn(e,new Array(e.length))},"array"),arraybuffer:o(function(e){return e.buffer},"arraybuffer"),uint8array:ti,nodebuffer:o(function(e){return nr.newBufferFrom(e)},"nodebuffer")};lt.nodebuffer={string:ri,array:o(function(e){return sn(e,new Array(e.length))},"array"),arraybuffer:o(function(e){return lt.nodebuffer.uint8array(e).buffer},"arraybuffer"),uint8array:o(function(e){return sn(e,new Uint8Array(e.length))},"uint8array"),nodebuffer:ti};J.transformTo=function(e,t){if(t||(t=""),!e)return t;J.checkSupport(e);var r=J.getTypeOf(t),i=lt[r][e](t);return i};J.resolve=function(e){for(var t=e.split("/"),r=[],i=0;i<t.length;i++){var n=t[i];n==="."||n===""&&i!==0&&i!==t.length-1||(n===".."?r.pop():r.push(n))}return r.join("/")};J.getTypeOf=function(e){if(typeof e=="string")return"string";if(Object.prototype.toString.call(e)==="[object Array]")return"array";if(st.nodebuffer&&nr.isBuffer(e))return"nodebuffer";if(st.uint8array&&e instanceof Uint8Array)return"uint8array";if(st.arraybuffer&&e instanceof ArrayBuffer)return"arraybuffer"};J.checkSupport=function(e){var t=st[e.toLowerCase()];if(!t)throw new Error(e+" is not supported by this platform")};J.MAX_VALUE_16BITS=65535;J.MAX_VALUE_32BITS=-1;J.pretty=function(e){var t="",r,i;for(i=0;i<(e||"").length;i++)r=e.charCodeAt(i),t+="\\x"+(r<16?"0":"")+r.toString(16).toUpperCase();return t};J.delay=function(e,t,r){setImmediate(function(){e.apply(r||null,t||[])})};J.inherits=function(e,t){var r=o(function(){},"Obj");r.prototype=t.prototype,e.prototype=new r};J.extend=function(){var e={},t,r;for(t=0;t<arguments.length;t++)for(r in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],r)&&typeof e[r]>"u"&&(e[r]=arguments[t][r]);return e};J.prepareContent=function(e,t,r,i,n){var a=fo.Promise.resolve(t).then(function(s){var l=st.blob&&(s instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(s))!==-1);return l&&typeof FileReader<"u"?new fo.Promise(function(h,u){var c=new FileReader;c.onload=function(f){h(f.target.result)},c.onerror=function(f){u(f.target.error)},c.readAsArrayBuffer(s)}):s});return a.then(function(s){var l=J.getTypeOf(s);return l?(l==="arraybuffer"?s=J.transformTo("uint8array",s):l==="string"&&(n?s=Um.decode(s):r&&i!==!0&&(s=Nm(s))),s):fo.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}});var me=D((fC,nc)=>{"use strict";function ic(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}o(ic,"GenericWorker");ic.prototype={push:o(function(e){this.emit("data",e)},"push"),end:o(function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},"end"),error:o(function(e){return this.isFinished?!1:(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},"error"),on:o(function(e,t){return this._listeners[e].push(t),this},"on"),cleanUp:o(function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},"cleanUp"),emit:o(function(e,t){if(this._listeners[e])for(var r=0;r<this._listeners[e].length;r++)this._listeners[e][r].call(this,t)},"emit"),pipe:o(function(e){return e.registerPrevious(this)},"pipe"),registerPrevious:o(function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",function(r){t.processChunk(r)}),e.on("end",function(){t.end()}),e.on("error",function(r){t.error(r)}),this},"registerPrevious"),pause:o(function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},"pause"),resume:o(function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var e=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},"resume"),flush:o(function(){},"flush"),processChunk:o(function(e){this.push(e)},"processChunk"),withStreamInfo:o(function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},"withStreamInfo"),mergeStreamInfo:o(function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},"mergeStreamInfo"),lock:o(function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},"lock"),toString:o(function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e},"toString")};nc.exports=ic});var or=D(ut=>{"use strict";var ar=H(),St=Xe(),Wm=Jr(),ln=me(),ii=new Array(256);for(Qe=0;Qe<256;Qe++)ii[Qe]=Qe>=252?6:Qe>=248?5:Qe>=240?4:Qe>=224?3:Qe>=192?2:1;var Qe;ii[254]=ii[254]=1;var qm=o(function(e){var t,r,i,n,a,s=e.length,l=0;for(n=0;n<s;n++)r=e.charCodeAt(n),(r&64512)===55296&&n+1<s&&(i=e.charCodeAt(n+1),(i&64512)===56320&&(r=65536+(r-55296<<10)+(i-56320),n++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(St.uint8array?t=new Uint8Array(l):t=new Array(l),a=0,n=0;a<l;n++)r=e.charCodeAt(n),(r&64512)===55296&&n+1<s&&(i=e.charCodeAt(n+1),(i&64512)===56320&&(r=65536+(r-55296<<10)+(i-56320),n++)),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|r&63):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|r&63):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|r&63);return t},"string2buf"),jm=o(function(e,t){var r;for(t=t||e.length,t>e.length&&(t=e.length),r=t-1;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+ii[e[r]]>t?r:t},"utf8border"),zm=o(function(e){var t,r,i,n,a=e.length,s=new Array(a*2);for(r=0,t=0;t<a;){if(i=e[t++],i<128){s[r++]=i;continue}if(n=ii[i],n>4){s[r++]=65533,t+=n-1;continue}for(i&=n===2?31:n===3?15:7;n>1&&t<a;)i=i<<6|e[t++]&63,n--;if(n>1){s[r++]=65533;continue}i<65536?s[r++]=i:(i-=65536,s[r++]=55296|i>>10&1023,s[r++]=56320|i&1023)}return s.length!==r&&(s.subarray?s=s.subarray(0,r):s.length=r),ar.applyFromCharCode(s)},"buf2string");ut.utf8encode=o(function(t){return St.nodebuffer?Wm.newBufferFrom(t,"utf-8"):qm(t)},"utf8encode");ut.utf8decode=o(function(t){return St.nodebuffer?ar.transformTo("nodebuffer",t).toString("utf-8"):(t=ar.transformTo(St.uint8array?"uint8array":"array",t),zm(t))},"utf8decode");function un(){ln.call(this,"utf-8 decode"),this.leftOver=null}o(un,"Utf8DecodeWorker");ar.inherits(un,ln);un.prototype.processChunk=function(e){var t=ar.transformTo(St.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(St.uint8array){var r=t;t=new Uint8Array(r.length+this.leftOver.length),t.set(this.leftOver,0),t.set(r,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var i=jm(t),n=t;i!==t.length&&(St.uint8array?(n=t.subarray(0,i),this.leftOver=t.subarray(i,t.length)):(n=t.slice(0,i),this.leftOver=t.slice(i,t.length))),this.push({data:ut.utf8decode(n),meta:e.meta})};un.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:ut.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)};ut.Utf8DecodeWorker=un;function po(){ln.call(this,"utf-8 encode")}o(po,"Utf8EncodeWorker");ar.inherits(po,ln);po.prototype.processChunk=function(e){this.push({data:ut.utf8encode(e.data),meta:e.meta})};ut.Utf8EncodeWorker=po});var lc=D((mC,sc)=>{"use strict";var ac=me(),oc=H();function go(e){ac.call(this,"ConvertWorker to "+e),this.destType=e}o(go,"ConvertWorker");oc.inherits(go,ac);go.prototype.processChunk=function(e){this.push({data:oc.transformTo(this.destType,e.data),meta:e.meta})};sc.exports=go});var hc=D((vC,cc)=>{"use strict";var uc=eo().Readable,Hm=H();Hm.inherits(mo,uc);function mo(e,t,r){uc.call(this,t),this._helper=e;var i=this;e.on("data",function(n,a){i.push(n)||i._helper.pause(),r&&r(a)}).on("error",function(n){i.emit("error",n)}).on("end",function(){i.push(null)})}o(mo,"NodejsStreamOutputAdapter");mo.prototype._read=function(){this._helper.resume()};cc.exports=mo});var Do=D((wC,pc)=>{"use strict";var Et=H(),Gm=lc(),$m=me(),Vm=no(),Zm=Xe(),Km=ir(),fc=null;if(Zm.nodestream)try{fc=hc()}catch{}function Jm(e,t,r){switch(e){case"blob":return Et.newBlob(Et.transformTo("arraybuffer",t),r);case"base64":return Vm.encode(t);default:return Et.transformTo(e,t)}}o(Jm,"transformZipOutput");function Ym(e,t){var r,i=0,n=null,a=0;for(r=0;r<t.length;r++)a+=t[r].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(n=new Uint8Array(a),r=0;r<t.length;r++)n.set(t[r],i),i+=t[r].length;return n;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}o(Ym,"concat");function Xm(e,t){return new Km.Promise(function(r,i){var n=[],a=e._internalType,s=e._outputType,l=e._mimeType;e.on("data",function(h,u){n.push(h),t&&t(u)}).on("error",function(h){n=[],i(h)}).on("end",function(){try{var h=Jm(s,Ym(a,n),l);r(h)}catch(u){i(u)}n=[]}).resume()})}o(Xm,"accumulate");function dc(e,t,r){var i=t;switch(t){case"blob":case"arraybuffer":i="uint8array";break;case"base64":i="string";break}try{this._internalType=i,this._outputType=t,this._mimeType=r,Et.checkSupport(i),this._worker=e.pipe(new Gm(i)),e.lock()}catch(n){this._worker=new $m("error"),this._worker.error(n)}}o(dc,"StreamHelper");dc.prototype={accumulate:o(function(e){return Xm(this,e)},"accumulate"),on:o(function(e,t){var r=this;return e==="data"?this._worker.on(e,function(i){t.call(r,i.data,i.meta)}):this._worker.on(e,function(){Et.delay(t,arguments,r)}),this},"on"),resume:o(function(){return Et.delay(this._worker.resume,[],this._worker),this},"resume"),pause:o(function(){return this._worker.pause(),this},"pause"),toNodejsStream:o(function(e){if(Et.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new fc(this,{objectMode:this._outputType!=="nodebuffer"},e)},"toNodejsStream")};pc.exports=dc});var vo=D(Te=>{"use strict";Te.base64=!1;Te.binary=!1;Te.dir=!1;Te.createFolders=!0;Te.date=null;Te.compression=null;Te.compressionOptions=null;Te.comment=null;Te.unixPermissions=null;Te.dosPermissions=null});var yo=D((kC,gc)=>{"use strict";var cn=H(),hn=me(),Qm=16*1024;function sr(e){hn.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then(function(r){t.dataIsReady=!0,t.data=r,t.max=r&&r.length||0,t.type=cn.getTypeOf(r),t.isPaused||t._tickAndRepeat()},function(r){t.error(r)})}o(sr,"DataWorker");cn.inherits(sr,hn);sr.prototype.cleanUp=function(){hn.prototype.cleanUp.call(this),this.data=null};sr.prototype.resume=function(){return hn.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,cn.delay(this._tickAndRepeat,[],this)),!0):!1};sr.prototype._tickAndRepeat=function(){this._tickScheduled=!1,!(this.isPaused||this.isFinished)&&(this._tick(),this.isFinished||(cn.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))};sr.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=Qm,t=null,r=Math.min(this.max,this.index+e);if(this.index>=this.max)return this.end();switch(this.type){case"string":t=this.data.substring(this.index,r);break;case"uint8array":t=this.data.subarray(this.index,r);break;case"array":case"nodebuffer":t=this.data.slice(this.index,r);break}return this.index=r,this.push({data:t,meta:{percent:this.max?this.index/this.max*100:0}})};gc.exports=sr});var fn=D((SC,Dc)=>{"use strict";var e0=H();function t0(){for(var e,t=[],r=0;r<256;r++){e=r;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t}o(t0,"makeTable");var mc=t0();function r0(e,t,r,i){var n=mc,a=i+r;e=e^-1;for(var s=i;s<a;s++)e=e>>>8^n[(e^t[s])&255];return e^-1}o(r0,"crc32");function i0(e,t,r,i){var n=mc,a=i+r;e=e^-1;for(var s=i;s<a;s++)e=e>>>8^n[(e^t.charCodeAt(s))&255];return e^-1}o(i0,"crc32str");Dc.exports=o(function(t,r){if(typeof t>"u"||!t.length)return 0;var i=e0.getTypeOf(t)!=="string";return i?r0(r|0,t,t.length,0):i0(r|0,t,t.length,0)},"crc32wrapper")});var bo=D((FC,yc)=>{"use strict";var vc=me(),n0=fn(),a0=H();function wo(){vc.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}o(wo,"Crc32Probe");a0.inherits(wo,vc);wo.prototype.processChunk=function(e){this.streamInfo.crc32=n0(e.data,this.streamInfo.crc32||0),this.push(e)};yc.exports=wo});var bc=D((AC,wc)=>{"use strict";var o0=H(),Co=me();function ko(e){Co.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}o(ko,"DataLengthProbe");o0.inherits(ko,Co);ko.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}Co.prototype.processChunk.call(this,e)};wc.exports=ko});var dn=D((PC,xc)=>{"use strict";var Cc=ir(),kc=yo(),s0=bo(),xo=bc();function So(e,t,r,i,n){this.compressedSize=e,this.uncompressedSize=t,this.crc32=r,this.compression=i,this.compressedContent=n}o(So,"CompressedObject");So.prototype={getContentWorker:o(function(){var e=new kc(Cc.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new xo("data_length")),t=this;return e.on("end",function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),e},"getContentWorker"),getCompressedWorker:o(function(){return new kc(Cc.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)},"getCompressedWorker")};So.createWorkerFrom=function(e,t,r){return e.pipe(new s0).pipe(new xo("uncompressedSize")).pipe(t.compressWorker(r)).pipe(new xo("compressedSize")).withStreamInfo("compression",t)};xc.exports=So});var _c=D((IC,Fc)=>{"use strict";var l0=Do(),u0=yo(),Eo=or(),Fo=dn(),Sc=me(),_o=o(function(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this._dataBinary=r.binary,this.options={compression:r.compression,compressionOptions:r.compressionOptions}},"ZipObject");_o.prototype={internalStream:o(function(e){var t=null,r="string";try{if(!e)throw new Error("No output type specified.");r=e.toLowerCase();var i=r==="string"||r==="text";(r==="binarystring"||r==="text")&&(r="string"),t=this._decompressWorker();var n=!this._dataBinary;n&&!i&&(t=t.pipe(new Eo.Utf8EncodeWorker)),!n&&i&&(t=t.pipe(new Eo.Utf8DecodeWorker))}catch(a){t=new Sc("error"),t.error(a)}return new l0(t,r,"")},"internalStream"),async:o(function(e,t){return this.internalStream(e).accumulate(t)},"async"),nodeStream:o(function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},"nodeStream"),_compressWorker:o(function(e,t){if(this._data instanceof Fo&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var r=this._decompressWorker();return this._dataBinary||(r=r.pipe(new Eo.Utf8EncodeWorker)),Fo.createWorkerFrom(r,e,t)},"_compressWorker"),_decompressWorker:o(function(){return this._data instanceof Fo?this._data.getContentWorker():this._data instanceof Sc?this._data:new u0(this._data)},"_decompressWorker")};var Ec=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],c0=o(function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},"removedFn");for(pn=0;pn<Ec.length;pn++)_o.prototype[Ec[pn]]=c0;var pn;Fc.exports=_o});var et=D(se=>{"use strict";var h0=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";function f0(e,t){return Object.prototype.hasOwnProperty.call(e,t)}o(f0,"_has");se.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if(typeof r!="object")throw new TypeError(r+"must be non-object");for(var i in r)f0(r,i)&&(e[i]=r[i])}}return e};se.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var d0={arraySet:o(function(e,t,r,i,n){if(t.subarray&&e.subarray){e.set(t.subarray(r,r+i),n);return}for(var a=0;a<i;a++)e[n+a]=t[r+a]},"arraySet"),flattenChunks:o(function(e){var t,r,i,n,a,s;for(i=0,t=0,r=e.length;t<r;t++)i+=e[t].length;for(s=new Uint8Array(i),n=0,t=0,r=e.length;t<r;t++)a=e[t],s.set(a,n),n+=a.length;return s},"flattenChunks")},p0={arraySet:o(function(e,t,r,i,n){for(var a=0;a<i;a++)e[n+a]=t[r+a]},"arraySet"),flattenChunks:o(function(e){return[].concat.apply([],e)},"flattenChunks")};se.setTyped=function(e){e?(se.Buf8=Uint8Array,se.Buf16=Uint16Array,se.Buf32=Int32Array,se.assign(se,d0)):(se.Buf8=Array,se.Buf16=Array,se.Buf32=Array,se.assign(se,p0))};se.setTyped(h0)});var Yc=D(cr=>{"use strict";var g0=et(),m0=4,Ac=0,Tc=1,D0=2;function ur(e){for(var t=e.length;--t>=0;)e[t]=0}o(ur,"zero");var v0=0,Bc=1,y0=2,w0=3,b0=258,Lo=29,ui=256,ai=ui+1+Lo,lr=30,Bo=19,Oc=2*ai+1,Ft=15,Ao=16,C0=7,Oo=256,Uc=16,Nc=17,Wc=18,Io=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],gn=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],k0=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],qc=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],x0=512,tt=new Array((ai+2)*2);ur(tt);var ni=new Array(lr*2);ur(ni);var oi=new Array(x0);ur(oi);var si=new Array(b0-w0+1);ur(si);var Uo=new Array(Lo);ur(Uo);var mn=new Array(lr);ur(mn);function To(e,t,r,i,n){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=e&&e.length}o(To,"StaticTreeDesc");var jc,zc,Hc;function Po(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}o(Po,"TreeDesc");function Gc(e){return e<256?oi[e]:oi[256+(e>>>7)]}o(Gc,"d_code");function li(e,t){e.pending_buf[e.pending++]=t&255,e.pending_buf[e.pending++]=t>>>8&255}o(li,"put_short");function he(e,t,r){e.bi_valid>Ao-r?(e.bi_buf|=t<<e.bi_valid&65535,li(e,e.bi_buf),e.bi_buf=t>>Ao-e.bi_valid,e.bi_valid+=r-Ao):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}o(he,"send_bits");function qe(e,t,r){he(e,r[t*2],r[t*2+1])}o(qe,"send_code");function $c(e,t){var r=0;do r|=e&1,e>>>=1,r<<=1;while(--t>0);return r>>>1}o($c,"bi_reverse");function S0(e){e.bi_valid===16?(li(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=e.bi_buf&255,e.bi_buf>>=8,e.bi_valid-=8)}o(S0,"bi_flush");function E0(e,t){var r=t.dyn_tree,i=t.max_code,n=t.stat_desc.static_tree,a=t.stat_desc.has_stree,s=t.stat_desc.extra_bits,l=t.stat_desc.extra_base,h=t.stat_desc.max_length,u,c,f,d,p,C,v=0;for(d=0;d<=Ft;d++)e.bl_count[d]=0;for(r[e.heap[e.heap_max]*2+1]=0,u=e.heap_max+1;u<Oc;u++)c=e.heap[u],d=r[r[c*2+1]*2+1]+1,d>h&&(d=h,v++),r[c*2+1]=d,!(c>i)&&(e.bl_count[d]++,p=0,c>=l&&(p=s[c-l]),C=r[c*2],e.opt_len+=C*(d+p),a&&(e.static_len+=C*(n[c*2+1]+p)));if(v!==0){do{for(d=h-1;e.bl_count[d]===0;)d--;e.bl_count[d]--,e.bl_count[d+1]+=2,e.bl_count[h]--,v-=2}while(v>0);for(d=h;d!==0;d--)for(c=e.bl_count[d];c!==0;)f=e.heap[--u],!(f>i)&&(r[f*2+1]!==d&&(e.opt_len+=(d-r[f*2+1])*r[f*2],r[f*2+1]=d),c--)}}o(E0,"gen_bitlen");function Vc(e,t,r){var i=new Array(Ft+1),n=0,a,s;for(a=1;a<=Ft;a++)i[a]=n=n+r[a-1]<<1;for(s=0;s<=t;s++){var l=e[s*2+1];l!==0&&(e[s*2]=$c(i[l]++,l))}}o(Vc,"gen_codes");function F0(){var e,t,r,i,n,a=new Array(Ft+1);for(r=0,i=0;i<Lo-1;i++)for(Uo[i]=r,e=0;e<1<<Io[i];e++)si[r++]=i;for(si[r-1]=i,n=0,i=0;i<16;i++)for(mn[i]=n,e=0;e<1<<gn[i];e++)oi[n++]=i;for(n>>=7;i<lr;i++)for(mn[i]=n<<7,e=0;e<1<<gn[i]-7;e++)oi[256+n++]=i;for(t=0;t<=Ft;t++)a[t]=0;for(e=0;e<=143;)tt[e*2+1]=8,e++,a[8]++;for(;e<=255;)tt[e*2+1]=9,e++,a[9]++;for(;e<=279;)tt[e*2+1]=7,e++,a[7]++;for(;e<=287;)tt[e*2+1]=8,e++,a[8]++;for(Vc(tt,ai+1,a),e=0;e<lr;e++)ni[e*2+1]=5,ni[e*2]=$c(e,5);jc=new To(tt,Io,ui+1,ai,Ft),zc=new To(ni,gn,0,lr,Ft),Hc=new To(new Array(0),k0,0,Bo,C0)}o(F0,"tr_static_init");function Zc(e){var t;for(t=0;t<ai;t++)e.dyn_ltree[t*2]=0;for(t=0;t<lr;t++)e.dyn_dtree[t*2]=0;for(t=0;t<Bo;t++)e.bl_tree[t*2]=0;e.dyn_ltree[Oo*2]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}o(Zc,"init_block");function Kc(e){e.bi_valid>8?li(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}o(Kc,"bi_windup");function _0(e,t,r,i){Kc(e),i&&(li(e,r),li(e,~r)),g0.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}o(_0,"copy_block");function Pc(e,t,r,i){var n=t*2,a=r*2;return e[n]<e[a]||e[n]===e[a]&&i[t]<=i[r]}o(Pc,"smaller");function Ro(e,t,r){for(var i=e.heap[r],n=r<<1;n<=e.heap_len&&(n<e.heap_len&&Pc(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!Pc(t,i,e.heap[n],e.depth));)e.heap[r]=e.heap[n],r=n,n<<=1;e.heap[r]=i}o(Ro,"pqdownheap");function Rc(e,t,r){var i,n,a=0,s,l;if(e.last_lit!==0)do i=e.pending_buf[e.d_buf+a*2]<<8|e.pending_buf[e.d_buf+a*2+1],n=e.pending_buf[e.l_buf+a],a++,i===0?qe(e,n,t):(s=si[n],qe(e,s+ui+1,t),l=Io[s],l!==0&&(n-=Uo[s],he(e,n,l)),i--,s=Gc(i),qe(e,s,r),l=gn[s],l!==0&&(i-=mn[s],he(e,i,l)));while(a<e.last_lit);qe(e,Oo,t)}o(Rc,"compress_block");function Mo(e,t){var r=t.dyn_tree,i=t.stat_desc.static_tree,n=t.stat_desc.has_stree,a=t.stat_desc.elems,s,l,h=-1,u;for(e.heap_len=0,e.heap_max=Oc,s=0;s<a;s++)r[s*2]!==0?(e.heap[++e.heap_len]=h=s,e.depth[s]=0):r[s*2+1]=0;for(;e.heap_len<2;)u=e.heap[++e.heap_len]=h<2?++h:0,r[u*2]=1,e.depth[u]=0,e.opt_len--,n&&(e.static_len-=i[u*2+1]);for(t.max_code=h,s=e.heap_len>>1;s>=1;s--)Ro(e,r,s);u=a;do s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Ro(e,r,1),l=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=l,r[u*2]=r[s*2]+r[l*2],e.depth[u]=(e.depth[s]>=e.depth[l]?e.depth[s]:e.depth[l])+1,r[s*2+1]=r[l*2+1]=u,e.heap[1]=u++,Ro(e,r,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],E0(e,t),Vc(r,h,e.bl_count)}o(Mo,"build_tree");function Ic(e,t,r){var i,n=-1,a,s=t[0*2+1],l=0,h=7,u=4;for(s===0&&(h=138,u=3),t[(r+1)*2+1]=65535,i=0;i<=r;i++)a=s,s=t[(i+1)*2+1],!(++l<h&&a===s)&&(l<u?e.bl_tree[a*2]+=l:a!==0?(a!==n&&e.bl_tree[a*2]++,e.bl_tree[Uc*2]++):l<=10?e.bl_tree[Nc*2]++:e.bl_tree[Wc*2]++,l=0,n=a,s===0?(h=138,u=3):a===s?(h=6,u=3):(h=7,u=4))}o(Ic,"scan_tree");function Mc(e,t,r){var i,n=-1,a,s=t[0*2+1],l=0,h=7,u=4;for(s===0&&(h=138,u=3),i=0;i<=r;i++)if(a=s,s=t[(i+1)*2+1],!(++l<h&&a===s)){if(l<u)do qe(e,a,e.bl_tree);while(--l!==0);else a!==0?(a!==n&&(qe(e,a,e.bl_tree),l--),qe(e,Uc,e.bl_tree),he(e,l-3,2)):l<=10?(qe(e,Nc,e.bl_tree),he(e,l-3,3)):(qe(e,Wc,e.bl_tree),he(e,l-11,7));l=0,n=a,s===0?(h=138,u=3):a===s?(h=6,u=3):(h=7,u=4)}}o(Mc,"send_tree");function A0(e){var t;for(Ic(e,e.dyn_ltree,e.l_desc.max_code),Ic(e,e.dyn_dtree,e.d_desc.max_code),Mo(e,e.bl_desc),t=Bo-1;t>=3&&e.bl_tree[qc[t]*2+1]===0;t--);return e.opt_len+=3*(t+1)+5+5+4,t}o(A0,"build_bl_tree");function T0(e,t,r,i){var n;for(he(e,t-257,5),he(e,r-1,5),he(e,i-4,4),n=0;n<i;n++)he(e,e.bl_tree[qc[n]*2+1],3);Mc(e,e.dyn_ltree,t-1),Mc(e,e.dyn_dtree,r-1)}o(T0,"send_all_trees");function P0(e){var t=4093624447,r;for(r=0;r<=31;r++,t>>>=1)if(t&1&&e.dyn_ltree[r*2]!==0)return Ac;if(e.dyn_ltree[9*2]!==0||e.dyn_ltree[10*2]!==0||e.dyn_ltree[13*2]!==0)return Tc;for(r=32;r<ui;r++)if(e.dyn_ltree[r*2]!==0)return Tc;return Ac}o(P0,"detect_data_type");var Lc=!1;function R0(e){Lc||(F0(),Lc=!0),e.l_desc=new Po(e.dyn_ltree,jc),e.d_desc=new Po(e.dyn_dtree,zc),e.bl_desc=new Po(e.bl_tree,Hc),e.bi_buf=0,e.bi_valid=0,Zc(e)}o(R0,"_tr_init");function Jc(e,t,r,i){he(e,(v0<<1)+(i?1:0),3),_0(e,t,r,!0)}o(Jc,"_tr_stored_block");function I0(e){he(e,Bc<<1,3),qe(e,Oo,tt),S0(e)}o(I0,"_tr_align");function M0(e,t,r,i){var n,a,s=0;e.level>0?(e.strm.data_type===D0&&(e.strm.data_type=P0(e)),Mo(e,e.l_desc),Mo(e,e.d_desc),s=A0(e),n=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=n&&(n=a)):n=a=r+5,r+4<=n&&t!==-1?Jc(e,t,r,i):e.strategy===m0||a===n?(he(e,(Bc<<1)+(i?1:0),3),Rc(e,tt,ni)):(he(e,(y0<<1)+(i?1:0),3),T0(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),Rc(e,e.dyn_ltree,e.dyn_dtree)),Zc(e),i&&Kc(e)}o(M0,"_tr_flush_block");function L0(e,t,r){return e.pending_buf[e.d_buf+e.last_lit*2]=t>>>8&255,e.pending_buf[e.d_buf+e.last_lit*2+1]=t&255,e.pending_buf[e.l_buf+e.last_lit]=r&255,e.last_lit++,t===0?e.dyn_ltree[r*2]++:(e.matches++,t--,e.dyn_ltree[(si[r]+ui+1)*2]++,e.dyn_dtree[Gc(t)*2]++),e.last_lit===e.lit_bufsize-1}o(L0,"_tr_tally");cr._tr_init=R0;cr._tr_stored_block=Jc;cr._tr_flush_block=M0;cr._tr_tally=L0;cr._tr_align=I0});var No=D((NC,Xc)=>{"use strict";function B0(e,t,r,i){for(var n=e&65535|0,a=e>>>16&65535|0,s=0;r!==0;){s=r>2e3?2e3:r,r-=s;do n=n+t[i++]|0,a=a+n|0;while(--s);n%=65521,a%=65521}return n|a<<16|0}o(B0,"adler32");Xc.exports=B0});var Wo=D((qC,Qc)=>{"use strict";function O0(){for(var e,t=[],r=0;r<256;r++){e=r;for(var i=0;i<8;i++)e=e&1?3988292384^e>>>1:e>>>1;t[r]=e}return t}o(O0,"makeTable");var U0=O0();function N0(e,t,r,i){var n=U0,a=i+r;e^=-1;for(var s=i;s<a;s++)e=e>>>8^n[(e^t[s])&255];return e^-1}o(N0,"crc32");Qc.exports=N0});var Dn=D((zC,eh)=>{"use strict";eh.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}});var uh=D(He=>{"use strict";var le=et(),be=Yc(),nh=No(),ct=Wo(),W0=Dn(),Pt=0,q0=1,j0=3,gt=4,th=5,ze=0,rh=1,Ce=-2,z0=-3,qo=-5,H0=-1,G0=1,vn=2,$0=3,V0=4,Z0=0,K0=2,Cn=8,J0=9,Y0=15,X0=8,Q0=29,eD=256,zo=eD+1+Q0,tD=30,rD=19,iD=2*zo+1,nD=15,I=3,dt=258,Pe=dt+I+1,aD=32,kn=42,Ho=69,yn=73,wn=91,bn=103,_t=113,hi=666,Y=1,fi=2,At=3,dr=4,oD=3;function pt(e,t){return e.msg=W0[t],t}o(pt,"err");function ih(e){return(e<<1)-(e>4?9:0)}o(ih,"rank");function ft(e){for(var t=e.length;--t>=0;)e[t]=0}o(ft,"zero");function ht(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),r!==0&&(le.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,t.pending===0&&(t.pending_out=0))}o(ht,"flush_pending");function ie(e,t){be._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ht(e.strm)}o(ie,"flush_block_only");function L(e,t){e.pending_buf[e.pending++]=t}o(L,"put_byte");function ci(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=t&255}o(ci,"putShortMSB");function sD(e,t,r,i){var n=e.avail_in;return n>i&&(n=i),n===0?0:(e.avail_in-=n,le.arraySet(t,e.input,e.next_in,n,r),e.state.wrap===1?e.adler=nh(e.adler,t,n,r):e.state.wrap===2&&(e.adler=ct(e.adler,t,n,r)),e.next_in+=n,e.total_in+=n,n)}o(sD,"read_buf");function ah(e,t){var r=e.max_chain_length,i=e.strstart,n,a,s=e.prev_length,l=e.nice_match,h=e.strstart>e.w_size-Pe?e.strstart-(e.w_size-Pe):0,u=e.window,c=e.w_mask,f=e.prev,d=e.strstart+dt,p=u[i+s-1],C=u[i+s];e.prev_length>=e.good_match&&(r>>=2),l>e.lookahead&&(l=e.lookahead);do if(n=t,!(u[n+s]!==C||u[n+s-1]!==p||u[n]!==u[i]||u[++n]!==u[i+1])){i+=2,n++;do;while(u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&u[++i]===u[++n]&&i<d);if(a=dt-(d-i),i=d-dt,a>s){if(e.match_start=t,s=a,a>=l)break;p=u[i+s-1],C=u[i+s]}}while((t=f[t&c])>h&&--r!==0);return s<=e.lookahead?s:e.lookahead}o(ah,"longest_match");function Tt(e){var t=e.w_size,r,i,n,a,s;do{if(a=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-Pe)){le.arraySet(e.window,e.window,t,t,0),e.match_start-=t,e.strstart-=t,e.block_start-=t,i=e.hash_size,r=i;do n=e.head[--r],e.head[r]=n>=t?n-t:0;while(--i);i=t,r=i;do n=e.prev[--r],e.prev[r]=n>=t?n-t:0;while(--i);a+=t}if(e.strm.avail_in===0)break;if(i=sD(e.strm,e.window,e.strstart+e.lookahead,a),e.lookahead+=i,e.lookahead+e.insert>=I)for(s=e.strstart-e.insert,e.ins_h=e.window[s],e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[s+I-1])&e.hash_mask,e.prev[s&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=s,s++,e.insert--,!(e.lookahead+e.insert<I)););}while(e.lookahead<Pe&&e.strm.avail_in!==0)}o(Tt,"fill_window");function lD(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(Tt(e),e.lookahead===0&&t===Pt)return Y;if(e.lookahead===0)break}e.strstart+=e.lookahead,e.lookahead=0;var i=e.block_start+r;if((e.strstart===0||e.strstart>=i)&&(e.lookahead=e.strstart-i,e.strstart=i,ie(e,!1),e.strm.avail_out===0)||e.strstart-e.block_start>=e.w_size-Pe&&(ie(e,!1),e.strm.avail_out===0))return Y}return e.insert=0,t===gt?(ie(e,!0),e.strm.avail_out===0?At:dr):(e.strstart>e.block_start&&(ie(e,!1),e.strm.avail_out===0),Y)}o(lD,"deflate_stored");function jo(e,t){for(var r,i;;){if(e.lookahead<Pe){if(Tt(e),e.lookahead<Pe&&t===Pt)return Y;if(e.lookahead===0)break}if(r=0,e.lookahead>=I&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+I-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),r!==0&&e.strstart-r<=e.w_size-Pe&&(e.match_length=ah(e,r)),e.match_length>=I)if(i=be._tr_tally(e,e.strstart-e.match_start,e.match_length-I),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=I){e.match_length--;do e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+I-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!==0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else i=be._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(ie(e,!1),e.strm.avail_out===0))return Y}return e.insert=e.strstart<I-1?e.strstart:I-1,t===gt?(ie(e,!0),e.strm.avail_out===0?At:dr):e.last_lit&&(ie(e,!1),e.strm.avail_out===0)?Y:fi}o(jo,"deflate_fast");function hr(e,t){for(var r,i,n;;){if(e.lookahead<Pe){if(Tt(e),e.lookahead<Pe&&t===Pt)return Y;if(e.lookahead===0)break}if(r=0,e.lookahead>=I&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+I-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=I-1,r!==0&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-Pe&&(e.match_length=ah(e,r),e.match_length<=5&&(e.strategy===G0||e.match_length===I&&e.strstart-e.match_start>4096)&&(e.match_length=I-1)),e.prev_length>=I&&e.match_length<=e.prev_length){n=e.strstart+e.lookahead-I,i=be._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-I),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=n&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+I-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!==0);if(e.match_available=0,e.match_length=I-1,e.strstart++,i&&(ie(e,!1),e.strm.avail_out===0))return Y}else if(e.match_available){if(i=be._tr_tally(e,0,e.window[e.strstart-1]),i&&ie(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return Y}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=be._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<I-1?e.strstart:I-1,t===gt?(ie(e,!0),e.strm.avail_out===0?At:dr):e.last_lit&&(ie(e,!1),e.strm.avail_out===0)?Y:fi}o(hr,"deflate_slow");function uD(e,t){for(var r,i,n,a,s=e.window;;){if(e.lookahead<=dt){if(Tt(e),e.lookahead<=dt&&t===Pt)return Y;if(e.lookahead===0)break}if(e.match_length=0,e.lookahead>=I&&e.strstart>0&&(n=e.strstart-1,i=s[n],i===s[++n]&&i===s[++n]&&i===s[++n])){a=e.strstart+dt;do;while(i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&i===s[++n]&&n<a);e.match_length=dt-(a-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=I?(r=be._tr_tally(e,1,e.match_length-I),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=be._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(ie(e,!1),e.strm.avail_out===0))return Y}return e.insert=0,t===gt?(ie(e,!0),e.strm.avail_out===0?At:dr):e.last_lit&&(ie(e,!1),e.strm.avail_out===0)?Y:fi}o(uD,"deflate_rle");function cD(e,t){for(var r;;){if(e.lookahead===0&&(Tt(e),e.lookahead===0)){if(t===Pt)return Y;break}if(e.match_length=0,r=be._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(ie(e,!1),e.strm.avail_out===0))return Y}return e.insert=0,t===gt?(ie(e,!0),e.strm.avail_out===0?At:dr):e.last_lit&&(ie(e,!1),e.strm.avail_out===0)?Y:fi}o(cD,"deflate_huff");function je(e,t,r,i,n){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=i,this.func=n}o(je,"Config");var fr;fr=[new je(0,0,0,0,lD),new je(4,4,8,4,jo),new je(4,5,16,8,jo),new je(4,6,32,32,jo),new je(4,4,16,16,hr),new je(8,16,32,32,hr),new je(8,16,128,128,hr),new je(8,32,128,256,hr),new je(32,128,258,1024,hr),new je(32,258,258,4096,hr)];function hD(e){e.window_size=2*e.w_size,ft(e.head),e.max_lazy_match=fr[e.level].max_lazy,e.good_match=fr[e.level].good_length,e.nice_match=fr[e.level].nice_length,e.max_chain_length=fr[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=I-1,e.match_available=0,e.ins_h=0}o(hD,"lm_init");function fD(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=Cn,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new le.Buf16(iD*2),this.dyn_dtree=new le.Buf16((2*tD+1)*2),this.bl_tree=new le.Buf16((2*rD+1)*2),ft(this.dyn_ltree),ft(this.dyn_dtree),ft(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new le.Buf16(nD+1),this.heap=new le.Buf16(2*zo+1),ft(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new le.Buf16(2*zo+1),ft(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}o(fD,"DeflateState");function oh(e){var t;return!e||!e.state?pt(e,Ce):(e.total_in=e.total_out=0,e.data_type=K0,t=e.state,t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?kn:_t,e.adler=t.wrap===2?0:1,t.last_flush=Pt,be._tr_init(t),ze)}o(oh,"deflateResetKeep");function sh(e){var t=oh(e);return t===ze&&hD(e.state),t}o(sh,"deflateReset");function dD(e,t){return!e||!e.state||e.state.wrap!==2?Ce:(e.state.gzhead=t,ze)}o(dD,"deflateSetHeader");function lh(e,t,r,i,n,a){if(!e)return Ce;var s=1;if(t===H0&&(t=6),i<0?(s=0,i=-i):i>15&&(s=2,i-=16),n<1||n>J0||r!==Cn||i<8||i>15||t<0||t>9||a<0||a>V0)return pt(e,Ce);i===8&&(i=9);var l=new fD;return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=n+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+I-1)/I),l.window=new le.Buf8(l.w_size*2),l.head=new le.Buf16(l.hash_size),l.prev=new le.Buf16(l.w_size),l.lit_bufsize=1<<n+6,l.pending_buf_size=l.lit_bufsize*4,l.pending_buf=new le.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=a,l.method=r,sh(e)}o(lh,"deflateInit2");function pD(e,t){return lh(e,t,Cn,Y0,X0,Z0)}o(pD,"deflateInit");function gD(e,t){var r,i,n,a;if(!e||!e.state||t>th||t<0)return e?pt(e,Ce):Ce;if(i=e.state,!e.output||!e.input&&e.avail_in!==0||i.status===hi&&t!==gt)return pt(e,e.avail_out===0?qo:Ce);if(i.strm=e,r=i.last_flush,i.last_flush=t,i.status===kn)if(i.wrap===2)e.adler=0,L(i,31),L(i,139),L(i,8),i.gzhead?(L(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),L(i,i.gzhead.time&255),L(i,i.gzhead.time>>8&255),L(i,i.gzhead.time>>16&255),L(i,i.gzhead.time>>24&255),L(i,i.level===9?2:i.strategy>=vn||i.level<2?4:0),L(i,i.gzhead.os&255),i.gzhead.extra&&i.gzhead.extra.length&&(L(i,i.gzhead.extra.length&255),L(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=ct(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=Ho):(L(i,0),L(i,0),L(i,0),L(i,0),L(i,0),L(i,i.level===9?2:i.strategy>=vn||i.level<2?4:0),L(i,oD),i.status=_t);else{var s=Cn+(i.w_bits-8<<4)<<8,l=-1;i.strategy>=vn||i.level<2?l=0:i.level<6?l=1:i.level===6?l=2:l=3,s|=l<<6,i.strstart!==0&&(s|=aD),s+=31-s%31,i.status=_t,ci(i,s),i.strstart!==0&&(ci(i,e.adler>>>16),ci(i,e.adler&65535)),e.adler=1}if(i.status===Ho)if(i.gzhead.extra){for(n=i.pending;i.gzindex<(i.gzhead.extra.length&65535)&&!(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=ct(e.adler,i.pending_buf,i.pending-n,n)),ht(e),n=i.pending,i.pending===i.pending_buf_size));)L(i,i.gzhead.extra[i.gzindex]&255),i.gzindex++;i.gzhead.hcrc&&i.pending>n&&(e.adler=ct(e.adler,i.pending_buf,i.pending-n,n)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=yn)}else i.status=yn;if(i.status===yn)if(i.gzhead.name){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=ct(e.adler,i.pending_buf,i.pending-n,n)),ht(e),n=i.pending,i.pending===i.pending_buf_size)){a=1;break}i.gzindex<i.gzhead.name.length?a=i.gzhead.name.charCodeAt(i.gzindex++)&255:a=0,L(i,a)}while(a!==0);i.gzhead.hcrc&&i.pending>n&&(e.adler=ct(e.adler,i.pending_buf,i.pending-n,n)),a===0&&(i.gzindex=0,i.status=wn)}else i.status=wn;if(i.status===wn)if(i.gzhead.comment){n=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>n&&(e.adler=ct(e.adler,i.pending_buf,i.pending-n,n)),ht(e),n=i.pending,i.pending===i.pending_buf_size)){a=1;break}i.gzindex<i.gzhead.comment.length?a=i.gzhead.comment.charCodeAt(i.gzindex++)&255:a=0,L(i,a)}while(a!==0);i.gzhead.hcrc&&i.pending>n&&(e.adler=ct(e.adler,i.pending_buf,i.pending-n,n)),a===0&&(i.status=bn)}else i.status=bn;if(i.status===bn&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&ht(e),i.pending+2<=i.pending_buf_size&&(L(i,e.adler&255),L(i,e.adler>>8&255),e.adler=0,i.status=_t)):i.status=_t),i.pending!==0){if(ht(e),e.avail_out===0)return i.last_flush=-1,ze}else if(e.avail_in===0&&ih(t)<=ih(r)&&t!==gt)return pt(e,qo);if(i.status===hi&&e.avail_in!==0)return pt(e,qo);if(e.avail_in!==0||i.lookahead!==0||t!==Pt&&i.status!==hi){var h=i.strategy===vn?cD(i,t):i.strategy===$0?uD(i,t):fr[i.level].func(i,t);if((h===At||h===dr)&&(i.status=hi),h===Y||h===At)return e.avail_out===0&&(i.last_flush=-1),ze;if(h===fi&&(t===q0?be._tr_align(i):t!==th&&(be._tr_stored_block(i,0,0,!1),t===j0&&(ft(i.head),i.lookahead===0&&(i.strstart=0,i.block_start=0,i.insert=0))),ht(e),e.avail_out===0))return i.last_flush=-1,ze}return t!==gt?ze:i.wrap<=0?rh:(i.wrap===2?(L(i,e.adler&255),L(i,e.adler>>8&255),L(i,e.adler>>16&255),L(i,e.adler>>24&255),L(i,e.total_in&255),L(i,e.total_in>>8&255),L(i,e.total_in>>16&255),L(i,e.total_in>>24&255)):(ci(i,e.adler>>>16),ci(i,e.adler&65535)),ht(e),i.wrap>0&&(i.wrap=-i.wrap),i.pending!==0?ze:rh)}o(gD,"deflate");function mD(e){var t;return!e||!e.state?Ce:(t=e.state.status,t!==kn&&t!==Ho&&t!==yn&&t!==wn&&t!==bn&&t!==_t&&t!==hi?pt(e,Ce):(e.state=null,t===_t?pt(e,z0):ze))}o(mD,"deflateEnd");function DD(e,t){var r=t.length,i,n,a,s,l,h,u,c;if(!e||!e.state||(i=e.state,s=i.wrap,s===2||s===1&&i.status!==kn||i.lookahead))return Ce;for(s===1&&(e.adler=nh(e.adler,t,r,0)),i.wrap=0,r>=i.w_size&&(s===0&&(ft(i.head),i.strstart=0,i.block_start=0,i.insert=0),c=new le.Buf8(i.w_size),le.arraySet(c,t,r-i.w_size,i.w_size,0),t=c,r=i.w_size),l=e.avail_in,h=e.next_in,u=e.input,e.avail_in=r,e.next_in=0,e.input=t,Tt(i);i.lookahead>=I;){n=i.strstart,a=i.lookahead-(I-1);do i.ins_h=(i.ins_h<<i.hash_shift^i.window[n+I-1])&i.hash_mask,i.prev[n&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=n,n++;while(--a);i.strstart=n,i.lookahead=I-1,Tt(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=I-1,i.match_available=0,e.next_in=h,e.input=u,e.avail_in=l,i.wrap=s,ze}o(DD,"deflateSetDictionary");He.deflateInit=pD;He.deflateInit2=lh;He.deflateReset=sh;He.deflateResetKeep=oh;He.deflateSetHeader=dD;He.deflate=gD;He.deflateEnd=mD;He.deflateSetDictionary=DD;He.deflateInfo="pako deflate (from Nodeca project)"});var Go=D(pr=>{"use strict";var xn=et(),ch=!0,hh=!0;try{String.fromCharCode.apply(null,[0])}catch{ch=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{hh=!1}var di=new xn.Buf8(256);for(rt=0;rt<256;rt++)di[rt]=rt>=252?6:rt>=248?5:rt>=240?4:rt>=224?3:rt>=192?2:1;var rt;di[254]=di[254]=1;pr.string2buf=function(e){var t,r,i,n,a,s=e.length,l=0;for(n=0;n<s;n++)r=e.charCodeAt(n),(r&64512)===55296&&n+1<s&&(i=e.charCodeAt(n+1),(i&64512)===56320&&(r=65536+(r-55296<<10)+(i-56320),n++)),l+=r<128?1:r<2048?2:r<65536?3:4;for(t=new xn.Buf8(l),a=0,n=0;a<l;n++)r=e.charCodeAt(n),(r&64512)===55296&&n+1<s&&(i=e.charCodeAt(n+1),(i&64512)===56320&&(r=65536+(r-55296<<10)+(i-56320),n++)),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|r&63):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|r&63):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|r&63);return t};function fh(e,t){if(t<65534&&(e.subarray&&hh||!e.subarray&&ch))return String.fromCharCode.apply(null,xn.shrinkBuf(e,t));for(var r="",i=0;i<t;i++)r+=String.fromCharCode(e[i]);return r}o(fh,"buf2binstring");pr.buf2binstring=function(e){return fh(e,e.length)};pr.binstring2buf=function(e){for(var t=new xn.Buf8(e.length),r=0,i=t.length;r<i;r++)t[r]=e.charCodeAt(r);return t};pr.buf2string=function(e,t){var r,i,n,a,s=t||e.length,l=new Array(s*2);for(i=0,r=0;r<s;){if(n=e[r++],n<128){l[i++]=n;continue}if(a=di[n],a>4){l[i++]=65533,r+=a-1;continue}for(n&=a===2?31:a===3?15:7;a>1&&r<s;)n=n<<6|e[r++]&63,a--;if(a>1){l[i++]=65533;continue}n<65536?l[i++]=n:(n-=65536,l[i++]=55296|n>>10&1023,l[i++]=56320|n&1023)}return fh(l,i)};pr.utf8border=function(e,t){var r;for(t=t||e.length,t>e.length&&(t=e.length),r=t-1;r>=0&&(e[r]&192)===128;)r--;return r<0||r===0?t:r+di[e[r]]>t?r:t}});var $o=D((ZC,dh)=>{"use strict";function vD(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}o(vD,"ZStream");dh.exports=vD});var Dh=D(mi=>{"use strict";var pi=uh(),gi=et(),Zo=Go(),Ko=Dn(),yD=$o(),mh=Object.prototype.toString,wD=0,Vo=4,gr=0,ph=1,gh=2,bD=-1,CD=0,kD=8;function Rt(e){if(!(this instanceof Rt))return new Rt(e);this.options=gi.assign({level:bD,method:kD,chunkSize:16384,windowBits:15,memLevel:8,strategy:CD,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new yD,this.strm.avail_out=0;var r=pi.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==gr)throw new Error(Ko[r]);if(t.header&&pi.deflateSetHeader(this.strm,t.header),t.dictionary){var i;if(typeof t.dictionary=="string"?i=Zo.string2buf(t.dictionary):mh.call(t.dictionary)==="[object ArrayBuffer]"?i=new Uint8Array(t.dictionary):i=t.dictionary,r=pi.deflateSetDictionary(this.strm,i),r!==gr)throw new Error(Ko[r]);this._dict_set=!0}}o(Rt,"Deflate");Rt.prototype.push=function(e,t){var r=this.strm,i=this.options.chunkSize,n,a;if(this.ended)return!1;a=t===~~t?t:t===!0?Vo:wD,typeof e=="string"?r.input=Zo.string2buf(e):mh.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new gi.Buf8(i),r.next_out=0,r.avail_out=i),n=pi.deflate(r,a),n!==ph&&n!==gr)return this.onEnd(n),this.ended=!0,!1;(r.avail_out===0||r.avail_in===0&&(a===Vo||a===gh))&&(this.options.to==="string"?this.onData(Zo.buf2binstring(gi.shrinkBuf(r.output,r.next_out))):this.onData(gi.shrinkBuf(r.output,r.next_out)))}while((r.avail_in>0||r.avail_out===0)&&n!==ph);return a===Vo?(n=pi.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===gr):(a===gh&&(this.onEnd(gr),r.avail_out=0),!0)};Rt.prototype.onData=function(e){this.chunks.push(e)};Rt.prototype.onEnd=function(e){e===gr&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=gi.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function Jo(e,t){var r=new Rt(t);if(r.push(e,!0),r.err)throw r.msg||Ko[r.err];return r.result}o(Jo,"deflate");function xD(e,t){return t=t||{},t.raw=!0,Jo(e,t)}o(xD,"deflateRaw");function SD(e,t){return t=t||{},t.gzip=!0,Jo(e,t)}o(SD,"gzip");mi.Deflate=Rt;mi.deflate=Jo;mi.deflateRaw=xD;mi.gzip=SD});var yh=D((XC,vh)=>{"use strict";var Sn=30,ED=12;vh.exports=o(function(t,r){var i,n,a,s,l,h,u,c,f,d,p,C,v,y,m,b,k,w,g,E,_,x,A,q,F;i=t.state,n=t.next_in,q=t.input,a=n+(t.avail_in-5),s=t.next_out,F=t.output,l=s-(r-t.avail_out),h=s+(t.avail_out-257),u=i.dmax,c=i.wsize,f=i.whave,d=i.wnext,p=i.window,C=i.hold,v=i.bits,y=i.lencode,m=i.distcode,b=(1<<i.lenbits)-1,k=(1<<i.distbits)-1;e:do{v<15&&(C+=q[n++]<<v,v+=8,C+=q[n++]<<v,v+=8),w=y[C&b];t:for(;;){if(g=w>>>24,C>>>=g,v-=g,g=w>>>16&255,g===0)F[s++]=w&65535;else if(g&16){E=w&65535,g&=15,g&&(v<g&&(C+=q[n++]<<v,v+=8),E+=C&(1<<g)-1,C>>>=g,v-=g),v<15&&(C+=q[n++]<<v,v+=8,C+=q[n++]<<v,v+=8),w=m[C&k];r:for(;;){if(g=w>>>24,C>>>=g,v-=g,g=w>>>16&255,g&16){if(_=w&65535,g&=15,v<g&&(C+=q[n++]<<v,v+=8,v<g&&(C+=q[n++]<<v,v+=8)),_+=C&(1<<g)-1,_>u){t.msg="invalid distance too far back",i.mode=Sn;break e}if(C>>>=g,v-=g,g=s-l,_>g){if(g=_-g,g>f&&i.sane){t.msg="invalid distance too far back",i.mode=Sn;break e}if(x=0,A=p,d===0){if(x+=c-g,g<E){E-=g;do F[s++]=p[x++];while(--g);x=s-_,A=F}}else if(d<g){if(x+=c+d-g,g-=d,g<E){E-=g;do F[s++]=p[x++];while(--g);if(x=0,d<E){g=d,E-=g;do F[s++]=p[x++];while(--g);x=s-_,A=F}}}else if(x+=d-g,g<E){E-=g;do F[s++]=p[x++];while(--g);x=s-_,A=F}for(;E>2;)F[s++]=A[x++],F[s++]=A[x++],F[s++]=A[x++],E-=3;E&&(F[s++]=A[x++],E>1&&(F[s++]=A[x++]))}else{x=s-_;do F[s++]=F[x++],F[s++]=F[x++],F[s++]=F[x++],E-=3;while(E>2);E&&(F[s++]=F[x++],E>1&&(F[s++]=F[x++]))}}else if(g&64){t.msg="invalid distance code",i.mode=Sn;break e}else{w=m[(w&65535)+(C&(1<<g)-1)];continue r}break}}else if(g&64)if(g&32){i.mode=ED;break e}else{t.msg="invalid literal/length code",i.mode=Sn;break e}else{w=y[(w&65535)+(C&(1<<g)-1)];continue t}break}}while(n<a&&s<h);E=v>>3,n-=E,v-=E<<3,C&=(1<<v)-1,t.next_in=n,t.next_out=s,t.avail_in=n<a?5+(a-n):5-(n-a),t.avail_out=s<h?257+(h-s):257-(s-h),i.hold=C,i.bits=v},"inflate_fast")});var Eh=D((ek,Sh)=>{"use strict";var wh=et(),mr=15,bh=852,Ch=592,kh=0,Yo=1,xh=2,FD=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],_D=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],AD=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],TD=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];Sh.exports=o(function(t,r,i,n,a,s,l,h){var u=h.bits,c=0,f=0,d=0,p=0,C=0,v=0,y=0,m=0,b=0,k=0,w,g,E,_,x,A=null,q=0,F,pe=new wh.Buf16(mr+1),Zt=new wh.Buf16(mr+1),qi=null,zl=0,Hl,ji,zi;for(c=0;c<=mr;c++)pe[c]=0;for(f=0;f<n;f++)pe[r[i+f]]++;for(C=u,p=mr;p>=1&&pe[p]===0;p--);if(C>p&&(C=p),p===0)return a[s++]=1<<24|64<<16|0,a[s++]=1<<24|64<<16|0,h.bits=1,0;for(d=1;d<p&&pe[d]===0;d++);for(C<d&&(C=d),m=1,c=1;c<=mr;c++)if(m<<=1,m-=pe[c],m<0)return-1;if(m>0&&(t===kh||p!==1))return-1;for(Zt[1]=0,c=1;c<mr;c++)Zt[c+1]=Zt[c]+pe[c];for(f=0;f<n;f++)r[i+f]!==0&&(l[Zt[r[i+f]]++]=f);if(t===kh?(A=qi=l,F=19):t===Yo?(A=FD,q-=257,qi=_D,zl-=257,F=256):(A=AD,qi=TD,F=-1),k=0,f=0,c=d,x=s,v=C,y=0,E=-1,b=1<<C,_=b-1,t===Yo&&b>bh||t===xh&&b>Ch)return 1;for(;;){Hl=c-y,l[f]<F?(ji=0,zi=l[f]):l[f]>F?(ji=qi[zl+l[f]],zi=A[q+l[f]]):(ji=96,zi=0),w=1<<c-y,g=1<<v,d=g;do g-=w,a[x+(k>>y)+g]=Hl<<24|ji<<16|zi|0;while(g!==0);for(w=1<<c-1;k&w;)w>>=1;if(w!==0?(k&=w-1,k+=w):k=0,f++,--pe[c]===0){if(c===p)break;c=r[i+l[f]]}if(c>C&&(k&_)!==E){for(y===0&&(y=C),x+=d,v=c-y,m=1<<v;v+y<p&&(m-=pe[v+y],!(m<=0));)v++,m<<=1;if(b+=1<<v,t===Yo&&b>bh||t===xh&&b>Ch)return 1;E=k&_,a[E]=C<<24|v<<16|x-s|0}}return k!==0&&(a[x+k]=c-y<<24|64<<16|0),h.bits=C,0},"inflate_table")});var lf=D(Re=>{"use strict";var De=et(),is=No(),Ge=Wo(),PD=yh(),Di=Eh(),RD=0,Xh=1,Qh=2,Fh=4,ID=5,En=6,It=0,MD=1,LD=2,ke=-2,ef=-3,ns=-4,BD=-5,_h=8,tf=1,Ah=2,Th=3,Ph=4,Rh=5,Ih=6,Mh=7,Lh=8,Bh=9,Oh=10,An=11,it=12,Xo=13,Uh=14,Qo=15,Nh=16,Wh=17,qh=18,jh=19,Fn=20,_n=21,zh=22,Hh=23,Gh=24,$h=25,Vh=26,es=27,Zh=28,Kh=29,z=30,as=31,OD=32,UD=852,ND=592,WD=15,qD=WD;function Jh(e){return(e>>>24&255)+(e>>>8&65280)+((e&65280)<<8)+((e&255)<<24)}o(Jh,"zswap32");function jD(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new De.Buf16(320),this.work=new De.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}o(jD,"InflateState");function rf(e){var t;return!e||!e.state?ke:(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=t.wrap&1),t.mode=tf,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new De.Buf32(UD),t.distcode=t.distdyn=new De.Buf32(ND),t.sane=1,t.back=-1,It)}o(rf,"inflateResetKeep");function nf(e){var t;return!e||!e.state?ke:(t=e.state,t.wsize=0,t.whave=0,t.wnext=0,rf(e))}o(nf,"inflateReset");function af(e,t){var r,i;return!e||!e.state||(i=e.state,t<0?(r=0,t=-t):(r=(t>>4)+1,t<48&&(t&=15)),t&&(t<8||t>15))?ke:(i.window!==null&&i.wbits!==t&&(i.window=null),i.wrap=r,i.wbits=t,nf(e))}o(af,"inflateReset2");function of(e,t){var r,i;return e?(i=new jD,e.state=i,i.window=null,r=af(e,t),r!==It&&(e.state=null),r):ke}o(of,"inflateInit2");function zD(e){return of(e,qD)}o(zD,"inflateInit");var Yh=!0,ts,rs;function HD(e){if(Yh){var t;for(ts=new De.Buf32(512),rs=new De.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(Di(Xh,e.lens,0,288,ts,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;Di(Qh,e.lens,0,32,rs,0,e.work,{bits:5}),Yh=!1}e.lencode=ts,e.lenbits=9,e.distcode=rs,e.distbits=5}o(HD,"fixedtables");function sf(e,t,r,i){var n,a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new De.Buf8(a.wsize)),i>=a.wsize?(De.arraySet(a.window,t,r-a.wsize,a.wsize,0),a.wnext=0,a.whave=a.wsize):(n=a.wsize-a.wnext,n>i&&(n=i),De.arraySet(a.window,t,r-i,n,a.wnext),i-=n,i?(De.arraySet(a.window,t,r-i,i,0),a.wnext=i,a.whave=a.wsize):(a.wnext+=n,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=n))),0}o(sf,"updatewindow");function GD(e,t){var r,i,n,a,s,l,h,u,c,f,d,p,C,v,y=0,m,b,k,w,g,E,_,x,A=new De.Buf8(4),q,F,pe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&e.avail_in!==0)return ke;r=e.state,r.mode===it&&(r.mode=Xo),s=e.next_out,n=e.output,h=e.avail_out,a=e.next_in,i=e.input,l=e.avail_in,u=r.hold,c=r.bits,f=l,d=h,x=It;e:for(;;)switch(r.mode){case tf:if(r.wrap===0){r.mode=Xo;break}for(;c<16;){if(l===0)break e;l--,u+=i[a++]<<c,c+=8}if(r.wrap&2&&u===35615){r.check=0,A[0]=u&255,A[1]=u>>>8&255,r.check=Ge(r.check,A,2,0),u=0,c=0,r.mode=Ah;break}if(r.flags=0,r.head&&(r.head.done=!1),!(r.wrap&1)||(((u&255)<<8)+(u>>8))%31){e.msg="incorrect header check",r.mode=z;break}if((u&15)!==_h){e.msg="unknown compression method",r.mode=z;break}if(u>>>=4,c-=4,_=(u&15)+8,r.wbits===0)r.wbits=_;else if(_>r.wbits){e.msg="invalid window size",r.mode=z;break}r.dmax=1<<_,e.adler=r.check=1,r.mode=u&512?Oh:it,u=0,c=0;break;case Ah:for(;c<16;){if(l===0)break e;l--,u+=i[a++]<<c,c+=8}if(r.flags=u,(r.flags&255)!==_h){e.msg="unknown compression method",r.mode=z;break}if(r.flags&57344){e.msg="unknown header flags set",r.mode=z;break}r.head&&(r.head.text=u>>8&1),r.flags&512&&(A[0]=u&255,A[1]=u>>>8&255,r.check=Ge(r.check,A,2,0)),u=0,c=0,r.mode=Th;case Th:for(;c<32;){if(l===0)break e;l--,u+=i[a++]<<c,c+=8}r.head&&(r.head.time=u),r.flags&512&&(A[0]=u&255,A[1]=u>>>8&255,A[2]=u>>>16&255,A[3]=u>>>24&255,r.check=Ge(r.check,A,4,0)),u=0,c=0,r.mode=Ph;case Ph:for(;c<16;){if(l===0)break e;l--,u+=i[a++]<<c,c+=8}r.head&&(r.head.xflags=u&255,r.head.os=u>>8),r.flags&512&&(A[0]=u&255,A[1]=u>>>8&255,r.check=Ge(r.check,A,2,0)),u=0,c=0,r.mode=Rh;case Rh:if(r.flags&1024){for(;c<16;){if(l===0)break e;l--,u+=i[a++]<<c,c+=8}r.length=u,r.head&&(r.head.extra_len=u),r.flags&512&&(A[0]=u&255,A[1]=u>>>8&255,r.check=Ge(r.check,A,2,0)),u=0,c=0}else r.head&&(r.head.extra=null);r.mode=Ih;case Ih:if(r.flags&1024&&(p=r.length,p>l&&(p=l),p&&(r.head&&(_=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),De.arraySet(r.head.extra,i,a,p,_)),r.flags&512&&(r.check=Ge(r.check,i,p,a)),l-=p,a+=p,r.length-=p),r.length))break e;r.length=0,r.mode=Mh;case Mh:if(r.flags&2048){if(l===0)break e;p=0;do _=i[a+p++],r.head&&_&&r.length<65536&&(r.head.name+=String.fromCharCode(_));while(_&&p<l);if(r.flags&512&&(r.check=Ge(r.check,i,p,a)),l-=p,a+=p,_)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=Lh;case Lh:if(r.flags&4096){if(l===0)break e;p=0;do _=i[a+p++],r.head&&_&&r.length<65536&&(r.head.comment+=String.fromCharCode(_));while(_&&p<l);if(r.flags&512&&(r.check=Ge(r.check,i,p,a)),l-=p,a+=p,_)break e}else r.head&&(r.head.comment=null);r.mode=Bh;case Bh:if(r.flags&512){for(;c<16;){if(l===0)break e;l--,u+=i[a++]<<c,c+=8}if(u!==(r.check&65535)){e.msg="header crc mismatch",r.mode=z;break}u=0,c=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=it;break;case Oh:for(;c<32;){if(l===0)break e;l--,u+=i[a++]<<c,c+=8}e.adler=r.check=Jh(u),u=0,c=0,r.mode=An;case An:if(r.havedict===0)return e.next_out=s,e.avail_out=h,e.next_in=a,e.avail_in=l,r.hold=u,r.bits=c,LD;e.adler=r.check=1,r.mode=it;case it:if(t===ID||t===En)break e;case Xo:if(r.last){u>>>=c&7,c-=c&7,r.mode=es;break}for(;c<3;){if(l===0)break e;l--,u+=i[a++]<<c,c+=8}switch(r.last=u&1,u>>>=1,c-=1,u&3){case 0:r.mode=Uh;break;case 1:if(HD(r),r.mode=Fn,t===En){u>>>=2,c-=2;break e}break;case 2:r.mode=Wh;break;case 3:e.msg="invalid block type",r.mode=z}u>>>=2,c-=2;break;case Uh:for(u>>>=c&7,c-=c&7;c<32;){if(l===0)break e;l--,u+=i[a++]<<c,c+=8}if((u&65535)!==(u>>>16^65535)){e.msg="invalid stored block lengths",r.mode=z;break}if(r.length=u&65535,u=0,c=0,r.mode=Qo,t===En)break e;case Qo:r.mode=Nh;case Nh:if(p=r.length,p){if(p>l&&(p=l),p>h&&(p=h),p===0)break e;De.arraySet(n,i,a,p,s),l-=p,a+=p,h-=p,s+=p,r.length-=p;break}r.mode=it;break;case Wh:for(;c<14;){if(l===0)break e;l--,u+=i[a++]<<c,c+=8}if(r.nlen=(u&31)+257,u>>>=5,c-=5,r.ndist=(u&31)+1,u>>>=5,c-=5,r.ncode=(u&15)+4,u>>>=4,c-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=z;break}r.have=0,r.mode=qh;case qh:for(;r.have<r.ncode;){for(;c<3;){if(l===0)break e;l--,u+=i[a++]<<c,c+=8}r.lens[pe[r.have++]]=u&7,u>>>=3,c-=3}for(;r.have<19;)r.lens[pe[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,q={bits:r.lenbits},x=Di(RD,r.lens,0,19,r.lencode,0,r.work,q),r.lenbits=q.bits,x){e.msg="invalid code lengths set",r.mode=z;break}r.have=0,r.mode=jh;case jh:for(;r.have<r.nlen+r.ndist;){for(;y=r.lencode[u&(1<<r.lenbits)-1],m=y>>>24,b=y>>>16&255,k=y&65535,!(m<=c);){if(l===0)break e;l--,u+=i[a++]<<c,c+=8}if(k<16)u>>>=m,c-=m,r.lens[r.have++]=k;else{if(k===16){for(F=m+2;c<F;){if(l===0)break e;l--,u+=i[a++]<<c,c+=8}if(u>>>=m,c-=m,r.have===0){e.msg="invalid bit length repeat",r.mode=z;break}_=r.lens[r.have-1],p=3+(u&3),u>>>=2,c-=2}else if(k===17){for(F=m+3;c<F;){if(l===0)break e;l--,u+=i[a++]<<c,c+=8}u>>>=m,c-=m,_=0,p=3+(u&7),u>>>=3,c-=3}else{for(F=m+7;c<F;){if(l===0)break e;l--,u+=i[a++]<<c,c+=8}u>>>=m,c-=m,_=0,p=11+(u&127),u>>>=7,c-=7}if(r.have+p>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=z;break}for(;p--;)r.lens[r.have++]=_}}if(r.mode===z)break;if(r.lens[256]===0){e.msg="invalid code -- missing end-of-block",r.mode=z;break}if(r.lenbits=9,q={bits:r.lenbits},x=Di(Xh,r.lens,0,r.nlen,r.lencode,0,r.work,q),r.lenbits=q.bits,x){e.msg="invalid literal/lengths set",r.mode=z;break}if(r.distbits=6,r.distcode=r.distdyn,q={bits:r.distbits},x=Di(Qh,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,q),r.distbits=q.bits,x){e.msg="invalid distances set",r.mode=z;break}if(r.mode=Fn,t===En)break e;case Fn:r.mode=_n;case _n:if(l>=6&&h>=258){e.next_out=s,e.avail_out=h,e.next_in=a,e.avail_in=l,r.hold=u,r.bits=c,PD(e,d),s=e.next_out,n=e.output,h=e.avail_out,a=e.next_in,i=e.input,l=e.avail_in,u=r.hold,c=r.bits,r.mode===it&&(r.back=-1);break}for(r.back=0;y=r.lencode[u&(1<<r.lenbits)-1],m=y>>>24,b=y>>>16&255,k=y&65535,!(m<=c);){if(l===0)break e;l--,u+=i[a++]<<c,c+=8}if(b&&!(b&240)){for(w=m,g=b,E=k;y=r.lencode[E+((u&(1<<w+g)-1)>>w)],m=y>>>24,b=y>>>16&255,k=y&65535,!(w+m<=c);){if(l===0)break e;l--,u+=i[a++]<<c,c+=8}u>>>=w,c-=w,r.back+=w}if(u>>>=m,c-=m,r.back+=m,r.length=k,b===0){r.mode=Vh;break}if(b&32){r.back=-1,r.mode=it;break}if(b&64){e.msg="invalid literal/length code",r.mode=z;break}r.extra=b&15,r.mode=zh;case zh:if(r.extra){for(F=r.extra;c<F;){if(l===0)break e;l--,u+=i[a++]<<c,c+=8}r.length+=u&(1<<r.extra)-1,u>>>=r.extra,c-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=Hh;case Hh:for(;y=r.distcode[u&(1<<r.distbits)-1],m=y>>>24,b=y>>>16&255,k=y&65535,!(m<=c);){if(l===0)break e;l--,u+=i[a++]<<c,c+=8}if(!(b&240)){for(w=m,g=b,E=k;y=r.distcode[E+((u&(1<<w+g)-1)>>w)],m=y>>>24,b=y>>>16&255,k=y&65535,!(w+m<=c);){if(l===0)break e;l--,u+=i[a++]<<c,c+=8}u>>>=w,c-=w,r.back+=w}if(u>>>=m,c-=m,r.back+=m,b&64){e.msg="invalid distance code",r.mode=z;break}r.offset=k,r.extra=b&15,r.mode=Gh;case Gh:if(r.extra){for(F=r.extra;c<F;){if(l===0)break e;l--,u+=i[a++]<<c,c+=8}r.offset+=u&(1<<r.extra)-1,u>>>=r.extra,c-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=z;break}r.mode=$h;case $h:if(h===0)break e;if(p=d-h,r.offset>p){if(p=r.offset-p,p>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=z;break}p>r.wnext?(p-=r.wnext,C=r.wsize-p):C=r.wnext-p,p>r.length&&(p=r.length),v=r.window}else v=n,C=s-r.offset,p=r.length;p>h&&(p=h),h-=p,r.length-=p;do n[s++]=v[C++];while(--p);r.length===0&&(r.mode=_n);break;case Vh:if(h===0)break e;n[s++]=r.length,h--,r.mode=_n;break;case es:if(r.wrap){for(;c<32;){if(l===0)break e;l--,u|=i[a++]<<c,c+=8}if(d-=h,e.total_out+=d,r.total+=d,d&&(e.adler=r.check=r.flags?Ge(r.check,n,d,s-d):is(r.check,n,d,s-d)),d=h,(r.flags?u:Jh(u))!==r.check){e.msg="incorrect data check",r.mode=z;break}u=0,c=0}r.mode=Zh;case Zh:if(r.wrap&&r.flags){for(;c<32;){if(l===0)break e;l--,u+=i[a++]<<c,c+=8}if(u!==(r.total&4294967295)){e.msg="incorrect length check",r.mode=z;break}u=0,c=0}r.mode=Kh;case Kh:x=MD;break e;case z:x=ef;break e;case as:return ns;case OD:default:return ke}return e.next_out=s,e.avail_out=h,e.next_in=a,e.avail_in=l,r.hold=u,r.bits=c,(r.wsize||d!==e.avail_out&&r.mode<z&&(r.mode<es||t!==Fh))&&sf(e,e.output,e.next_out,d-e.avail_out)?(r.mode=as,ns):(f-=e.avail_in,d-=e.avail_out,e.total_in+=f,e.total_out+=d,r.total+=d,r.wrap&&d&&(e.adler=r.check=r.flags?Ge(r.check,n,d,e.next_out-d):is(r.check,n,d,e.next_out-d)),e.data_type=r.bits+(r.last?64:0)+(r.mode===it?128:0)+(r.mode===Fn||r.mode===Qo?256:0),(f===0&&d===0||t===Fh)&&x===It&&(x=BD),x)}o(GD,"inflate");function $D(e){if(!e||!e.state)return ke;var t=e.state;return t.window&&(t.window=null),e.state=null,It}o($D,"inflateEnd");function VD(e,t){var r;return!e||!e.state||(r=e.state,!(r.wrap&2))?ke:(r.head=t,t.done=!1,It)}o(VD,"inflateGetHeader");function ZD(e,t){var r=t.length,i,n,a;return!e||!e.state||(i=e.state,i.wrap!==0&&i.mode!==An)?ke:i.mode===An&&(n=1,n=is(n,t,r,0),n!==i.check)?ef:(a=sf(e,t,r,r),a?(i.mode=as,ns):(i.havedict=1,It))}o(ZD,"inflateSetDictionary");Re.inflateReset=nf;Re.inflateReset2=af;Re.inflateResetKeep=rf;Re.inflateInit=zD;Re.inflateInit2=of;Re.inflate=GD;Re.inflateEnd=$D;Re.inflateGetHeader=VD;Re.inflateSetDictionary=ZD;Re.inflateInfo="pako inflate (from Nodeca project)"});var os=D((nk,uf)=>{"use strict";uf.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}});var hf=D((ak,cf)=>{"use strict";function KD(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}o(KD,"GZheader");cf.exports=KD});var df=D(yi=>{"use strict";var Dr=lf(),vi=et(),Tn=Go(),V=os(),ss=Dn(),JD=$o(),YD=hf(),ff=Object.prototype.toString;function Mt(e){if(!(this instanceof Mt))return new Mt(e);this.options=vi.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,t.windowBits===0&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(t.windowBits&15||(t.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new JD,this.strm.avail_out=0;var r=Dr.inflateInit2(this.strm,t.windowBits);if(r!==V.Z_OK)throw new Error(ss[r]);if(this.header=new YD,Dr.inflateGetHeader(this.strm,this.header),t.dictionary&&(typeof t.dictionary=="string"?t.dictionary=Tn.string2buf(t.dictionary):ff.call(t.dictionary)==="[object ArrayBuffer]"&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=Dr.inflateSetDictionary(this.strm,t.dictionary),r!==V.Z_OK)))throw new Error(ss[r])}o(Mt,"Inflate");Mt.prototype.push=function(e,t){var r=this.strm,i=this.options.chunkSize,n=this.options.dictionary,a,s,l,h,u,c=!1;if(this.ended)return!1;s=t===~~t?t:t===!0?V.Z_FINISH:V.Z_NO_FLUSH,typeof e=="string"?r.input=Tn.binstring2buf(e):ff.call(e)==="[object ArrayBuffer]"?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;do{if(r.avail_out===0&&(r.output=new vi.Buf8(i),r.next_out=0,r.avail_out=i),a=Dr.inflate(r,V.Z_NO_FLUSH),a===V.Z_NEED_DICT&&n&&(a=Dr.inflateSetDictionary(this.strm,n)),a===V.Z_BUF_ERROR&&c===!0&&(a=V.Z_OK,c=!1),a!==V.Z_STREAM_END&&a!==V.Z_OK)return this.onEnd(a),this.ended=!0,!1;r.next_out&&(r.avail_out===0||a===V.Z_STREAM_END||r.avail_in===0&&(s===V.Z_FINISH||s===V.Z_SYNC_FLUSH))&&(this.options.to==="string"?(l=Tn.utf8border(r.output,r.next_out),h=r.next_out-l,u=Tn.buf2string(r.output,l),r.next_out=h,r.avail_out=i-h,h&&vi.arraySet(r.output,r.output,l,h,0),this.onData(u)):this.onData(vi.shrinkBuf(r.output,r.next_out))),r.avail_in===0&&r.avail_out===0&&(c=!0)}while((r.avail_in>0||r.avail_out===0)&&a!==V.Z_STREAM_END);return a===V.Z_STREAM_END&&(s=V.Z_FINISH),s===V.Z_FINISH?(a=Dr.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===V.Z_OK):(s===V.Z_SYNC_FLUSH&&(this.onEnd(V.Z_OK),r.avail_out=0),!0)};Mt.prototype.onData=function(e){this.chunks.push(e)};Mt.prototype.onEnd=function(e){e===V.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=vi.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};function ls(e,t){var r=new Mt(t);if(r.push(e,!0),r.err)throw r.msg||ss[r.err];return r.result}o(ls,"inflate");function XD(e,t){return t=t||{},t.raw=!0,ls(e,t)}o(XD,"inflateRaw");yi.Inflate=Mt;yi.inflate=ls;yi.inflateRaw=XD;yi.ungzip=ls});var mf=D((uk,gf)=>{"use strict";var QD=et().assign,ev=Dh(),tv=df(),rv=os(),pf={};QD(pf,ev,tv,rv);gf.exports=pf});var vf=D(Rn=>{"use strict";var iv=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",nv=mf(),Df=H(),Pn=me(),av=iv?"uint8array":"array";Rn.magic="\b\0";function Lt(e,t){Pn.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}o(Lt,"FlateWorker");Df.inherits(Lt,Pn);Lt.prototype.processChunk=function(e){this.meta=e.meta,this._pako===null&&this._createPako(),this._pako.push(Df.transformTo(av,e.data),!1)};Lt.prototype.flush=function(){Pn.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)};Lt.prototype.cleanUp=function(){Pn.prototype.cleanUp.call(this),this._pako=null};Lt.prototype._createPako=function(){this._pako=new nv[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}};Rn.compressWorker=function(e){return new Lt("Deflate",e)};Rn.uncompressWorker=function(){return new Lt("Inflate",{})}});var cs=D(us=>{"use strict";var yf=me();us.STORE={magic:"\0\0",compressWorker:o(function(){return new yf("STORE compression")},"compressWorker"),uncompressWorker:o(function(){return new yf("STORE decompression")},"uncompressWorker")};us.DEFLATE=vf()});var hs=D(Bt=>{"use strict";Bt.LOCAL_FILE_HEADER="PK";Bt.CENTRAL_FILE_HEADER="PK";Bt.CENTRAL_DIRECTORY_END="PK";Bt.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07";Bt.ZIP64_CENTRAL_DIRECTORY_END="PK";Bt.DATA_DESCRIPTOR="PK\x07\b"});var kf=D((gk,Cf)=>{"use strict";var vr=H(),yr=me(),fs=or(),wf=fn(),In=hs(),W=o(function(e,t){var r="",i;for(i=0;i<t;i++)r+=String.fromCharCode(e&255),e=e>>>8;return r},"decToHex"),ov=o(function(e,t){var r=e;return e||(r=t?16893:33204),(r&65535)<<16},"generateUnixExternalFileAttr"),sv=o(function(e){return(e||0)&63},"generateDosExternalFileAttr"),bf=o(function(e,t,r,i,n,a){var s=e.file,l=e.compression,h=a!==fs.utf8encode,u=vr.transformTo("string",a(s.name)),c=vr.transformTo("string",fs.utf8encode(s.name)),f=s.comment,d=vr.transformTo("string",a(f)),p=vr.transformTo("string",fs.utf8encode(f)),C=c.length!==s.name.length,v=p.length!==f.length,y,m,b="",k="",w="",g=s.dir,E=s.date,_={crc32:0,compressedSize:0,uncompressedSize:0};(!t||r)&&(_.crc32=e.crc32,_.compressedSize=e.compressedSize,_.uncompressedSize=e.uncompressedSize);var x=0;t&&(x|=8),!h&&(C||v)&&(x|=2048);var A=0,q=0;g&&(A|=16),n==="UNIX"?(q=798,A|=ov(s.unixPermissions,g)):(q=20,A|=sv(s.dosPermissions,g)),y=E.getUTCHours(),y=y<<6,y=y|E.getUTCMinutes(),y=y<<5,y=y|E.getUTCSeconds()/2,m=E.getUTCFullYear()-1980,m=m<<4,m=m|E.getUTCMonth()+1,m=m<<5,m=m|E.getUTCDate(),C&&(k=W(1,1)+W(wf(u),4)+c,b+="up"+W(k.length,2)+k),v&&(w=W(1,1)+W(wf(d),4)+p,b+="uc"+W(w.length,2)+w);var F="";F+=`
\0`,F+=W(x,2),F+=l.magic,F+=W(y,2),F+=W(m,2),F+=W(_.crc32,4),F+=W(_.compressedSize,4),F+=W(_.uncompressedSize,4),F+=W(u.length,2),F+=W(b.length,2);var pe=In.LOCAL_FILE_HEADER+F+u+b,Zt=In.CENTRAL_FILE_HEADER+W(q,2)+F+W(d.length,2)+"\0\0\0\0"+W(A,4)+W(i,4)+u+b+d;return{fileRecord:pe,dirRecord:Zt}},"generateZipParts"),lv=o(function(e,t,r,i,n){var a="",s=vr.transformTo("string",n(i));return a=In.CENTRAL_DIRECTORY_END+"\0\0\0\0"+W(e,2)+W(e,2)+W(t,4)+W(r,4)+W(s.length,2)+s,a},"generateCentralDirectoryEnd"),uv=o(function(e){var t="";return t=In.DATA_DESCRIPTOR+W(e.crc32,4)+W(e.compressedSize,4)+W(e.uncompressedSize,4),t},"generateDataDescriptors");function Ie(e,t,r,i){yr.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=r,this.encodeFileName=i,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}o(Ie,"ZipFileWorker");vr.inherits(Ie,yr);Ie.prototype.push=function(e){var t=e.meta.percent||0,r=this.entriesCount,i=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,yr.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:r?(t+100*(r-i-1))/r:100}}))};Ie.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var r=bf(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:r.fileRecord,meta:{percent:0}})}else this.accumulate=!0};Ie.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,r=bf(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(r.dirRecord),t)this.push({data:uv(e),meta:{percent:100}});else for(this.push({data:r.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null};Ie.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var r=this.bytesWritten-e,i=lv(this.dirRecords.length,r,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})};Ie.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()};Ie.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",function(r){t.processChunk(r)}),e.on("end",function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()}),e.on("error",function(r){t.error(r)}),this};Ie.prototype.resume=function(){if(!yr.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0};Ie.prototype.error=function(e){var t=this._sources;if(!yr.prototype.error.call(this,e))return!1;for(var r=0;r<t.length;r++)try{t[r].error(e)}catch{}return!0};Ie.prototype.lock=function(){yr.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()};Cf.exports=Ie});var Sf=D(xf=>{"use strict";var cv=cs(),hv=kf(),fv=o(function(e,t){var r=e||t,i=cv[r];if(!i)throw new Error(r+" is not a valid compression method !");return i},"getCompression");xf.generateWorker=function(e,t,r){var i=new hv(t.streamFiles,r,t.platform,t.encodeFileName),n=0;try{e.forEach(function(a,s){n++;var l=fv(s.options.compression,t.compression),h=s.options.compressionOptions||t.compressionOptions||{},u=s.dir,c=s.date;s._compressWorker(l,h).withStreamInfo("file",{name:a,dir:u,date:c,comment:s.comment||"",unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions}).pipe(i)}),i.entriesCount=n}catch(a){i.error(a)}return i}});var Ff=D((yk,Ef)=>{"use strict";var dv=H(),Mn=me();function wi(e,t){Mn.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}o(wi,"NodejsStreamInputAdapter");dv.inherits(wi,Mn);wi.prototype._bindStream=function(e){var t=this;this._stream=e,e.pause(),e.on("data",function(r){t.push({data:r,meta:{percent:0}})}).on("error",function(r){t.isPaused?this.generatedError=r:t.error(r)}).on("end",function(){t.isPaused?t._upstreamEnded=!0:t.end()})};wi.prototype.pause=function(){return Mn.prototype.pause.call(this)?(this._stream.pause(),!0):!1};wi.prototype.resume=function(){return Mn.prototype.resume.call(this)?(this._upstreamEnded?this.end():this._stream.resume(),!0):!1};Ef.exports=wi});var Of=D((bk,Bf)=>{"use strict";var pv=or(),bi=H(),Pf=me(),gv=Do(),Rf=vo(),_f=dn(),mv=_c(),Dv=Sf(),Af=Jr(),vv=Ff(),If=o(function(e,t,r){var i=bi.getTypeOf(t),n,a=bi.extend(r||{},Rf);a.date=a.date||new Date,a.compression!==null&&(a.compression=a.compression.toUpperCase()),typeof a.unixPermissions=="string"&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&a.unixPermissions&16384&&(a.dir=!0),a.dosPermissions&&a.dosPermissions&16&&(a.dir=!0),a.dir&&(e=Mf(e)),a.createFolders&&(n=yv(e))&&Lf.call(this,n,!0);var s=i==="string"&&a.binary===!1&&a.base64===!1;(!r||typeof r.binary>"u")&&(a.binary=!s);var l=t instanceof _f&&t.uncompressedSize===0;(l||a.dir||!t||t.length===0)&&(a.base64=!1,a.binary=!0,t="",a.compression="STORE",i="string");var h=null;t instanceof _f||t instanceof Pf?h=t:Af.isNode&&Af.isStream(t)?h=new vv(e,t):h=bi.prepareContent(e,t,a.binary,a.optimizedBinaryString,a.base64);var u=new mv(e,h,a);this.files[e]=u},"fileAdd"),yv=o(function(e){e.slice(-1)==="/"&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},"parentFolder"),Mf=o(function(e){return e.slice(-1)!=="/"&&(e+="/"),e},"forceTrailingSlash"),Lf=o(function(e,t){return t=typeof t<"u"?t:Rf.createFolders,e=Mf(e),this.files[e]||If.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]},"folderAdd");function Tf(e){return Object.prototype.toString.call(e)==="[object RegExp]"}o(Tf,"isRegExp");var wv={load:o(function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},"load"),forEach:o(function(e){var t,r,i;for(t in this.files)i=this.files[t],r=t.slice(this.root.length,t.length),r&&t.slice(0,this.root.length)===this.root&&e(r,i)},"forEach"),filter:o(function(e){var t=[];return this.forEach(function(r,i){e(r,i)&&t.push(i)}),t},"filter"),file:o(function(e,t,r){if(arguments.length===1)if(Tf(e)){var i=e;return this.filter(function(a,s){return!s.dir&&i.test(a)})}else{var n=this.files[this.root+e];return n&&!n.dir?n:null}else e=this.root+e,If.call(this,e,t,r);return this},"file"),folder:o(function(e){if(!e)return this;if(Tf(e))return this.filter(function(n,a){return a.dir&&e.test(n)});var t=this.root+e,r=Lf.call(this,t),i=this.clone();return i.root=r.name,i},"folder"),remove:o(function(e){e=this.root+e;var t=this.files[e];if(t||(e.slice(-1)!=="/"&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var r=this.filter(function(n,a){return a.name.slice(0,e.length)===e}),i=0;i<r.length;i++)delete this.files[r[i].name];return this},"remove"),generate:o(function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},"generate"),generateInternalStream:o(function(e){var t,r={};try{if(r=bi.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:pv.utf8encode}),r.type=r.type.toLowerCase(),r.compression=r.compression.toUpperCase(),r.type==="binarystring"&&(r.type="string"),!r.type)throw new Error("No output type specified.");bi.checkSupport(r.type),(r.platform==="darwin"||r.platform==="freebsd"||r.platform==="linux"||r.platform==="sunos")&&(r.platform="UNIX"),r.platform==="win32"&&(r.platform="DOS");var i=r.comment||this.comment||"";t=Dv.generateWorker(this,r,i)}catch(n){t=new Pf("error"),t.error(n)}return new gv(t,r.type||"string",r.mimeType)},"generateInternalStream"),generateAsync:o(function(e,t){return this.generateInternalStream(e).accumulate(t)},"generateAsync"),generateNodeStream:o(function(e,t){return e=e||{},e.type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)},"generateNodeStream")};Bf.exports=wv});var ds=D((kk,Nf)=>{"use strict";var bv=H();function Uf(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}o(Uf,"DataReader");Uf.prototype={checkOffset:o(function(e){this.checkIndex(this.index+e)},"checkOffset"),checkIndex:o(function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},"checkIndex"),setIndex:o(function(e){this.checkIndex(e),this.index=e},"setIndex"),skip:o(function(e){this.setIndex(this.index+e)},"skip"),byteAt:o(function(){},"byteAt"),readInt:o(function(e){var t=0,r;for(this.checkOffset(e),r=this.index+e-1;r>=this.index;r--)t=(t<<8)+this.byteAt(r);return this.index+=e,t},"readInt"),readString:o(function(e){return bv.transformTo("string",this.readData(e))},"readString"),readData:o(function(){},"readData"),lastIndexOfSignature:o(function(){},"lastIndexOfSignature"),readAndCheckSignature:o(function(){},"readAndCheckSignature"),readDate:o(function(){var e=this.readInt(4);return new Date(Date.UTC((e>>25&127)+1980,(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(e&31)<<1))},"readDate")};Nf.exports=Uf});var ps=D((Sk,qf)=>{"use strict";var Wf=ds(),Cv=H();function wr(e){Wf.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=e[t]&255}o(wr,"ArrayReader");Cv.inherits(wr,Wf);wr.prototype.byteAt=function(e){return this.data[this.zero+e]};wr.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),i=e.charCodeAt(2),n=e.charCodeAt(3),a=this.length-4;a>=0;--a)if(this.data[a]===t&&this.data[a+1]===r&&this.data[a+2]===i&&this.data[a+3]===n)return a-this.zero;return-1};wr.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),r=e.charCodeAt(1),i=e.charCodeAt(2),n=e.charCodeAt(3),a=this.readData(4);return t===a[0]&&r===a[1]&&i===a[2]&&n===a[3]};wr.prototype.readData=function(e){if(this.checkOffset(e),e===0)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t};qf.exports=wr});var Hf=D((Fk,zf)=>{"use strict";var jf=ds(),kv=H();function br(e){jf.call(this,e)}o(br,"StringReader");kv.inherits(br,jf);br.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)};br.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero};br.prototype.readAndCheckSignature=function(e){var t=this.readData(4);return e===t};br.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t};zf.exports=br});var ms=D((Ak,$f)=>{"use strict";var Gf=ps(),xv=H();function gs(e){Gf.call(this,e)}o(gs,"Uint8ArrayReader");xv.inherits(gs,Gf);gs.prototype.readData=function(e){if(this.checkOffset(e),e===0)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t};$f.exports=gs});var Kf=D((Pk,Zf)=>{"use strict";var Vf=ms(),Sv=H();function Ds(e){Vf.call(this,e)}o(Ds,"NodeBufferReader");Sv.inherits(Ds,Vf);Ds.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t};Zf.exports=Ds});var vs=D((Ik,Yf)=>{"use strict";var Ln=H(),Jf=Xe(),Ev=ps(),Fv=Hf(),_v=Kf(),Av=ms();Yf.exports=function(e){var t=Ln.getTypeOf(e);return Ln.checkSupport(t),t==="string"&&!Jf.uint8array?new Fv(e):t==="nodebuffer"?new _v(e):Jf.uint8array?new Av(Ln.transformTo("uint8array",e)):new Ev(Ln.transformTo("array",e))}});var td=D((Mk,ed)=>{"use strict";var ys=vs(),mt=H(),Tv=dn(),Xf=fn(),Bn=or(),On=cs(),Pv=Xe(),Rv=0,Iv=3,Mv=o(function(e){for(var t in On)if(Object.prototype.hasOwnProperty.call(On,t)&&On[t].magic===e)return On[t];return null},"findCompression");function Qf(e,t){this.options=e,this.loadOptions=t}o(Qf,"ZipEntry");Qf.prototype={isEncrypted:o(function(){return(this.bitFlag&1)===1},"isEncrypted"),useUTF8:o(function(){return(this.bitFlag&2048)===2048},"useUTF8"),readLocalPart:o(function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(r),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(t=Mv(this.compressionMethod),t===null)throw new Error("Corrupted zip : compression "+mt.pretty(this.compressionMethod)+" unknown (inner file : "+mt.transformTo("string",this.fileName)+")");this.decompressed=new Tv(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},"readLocalPart"),readCentralPart:o(function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},"readCentralPart"),processAttributes:o(function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),e===Rv&&(this.dosPermissions=this.externalFileAttributes&63),e===Iv&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},"processAttributes"),parseZIP64ExtraField:o(function(){if(this.extraFields[1]){var e=ys(this.extraFields[1].value);this.uncompressedSize===mt.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===mt.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===mt.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===mt.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},"parseZIP64ExtraField"),readExtraFields:o(function(e){var t=e.index+this.extraFieldsLength,r,i,n;for(this.extraFields||(this.extraFields={});e.index+4<t;)r=e.readInt(2),i=e.readInt(2),n=e.readData(i),this.extraFields[r]={id:r,length:i,value:n};e.setIndex(t)},"readExtraFields"),handleUTF8:o(function(){var e=Pv.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=Bn.utf8decode(this.fileName),this.fileCommentStr=Bn.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(t!==null)this.fileNameStr=t;else{var r=mt.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var i=this.findExtraFieldUnicodeComment();if(i!==null)this.fileCommentStr=i;else{var n=mt.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(n)}}},"handleUTF8"),findExtraFieldUnicodePath:o(function(){var e=this.extraFields[28789];if(e){var t=ys(e.value);return t.readInt(1)!==1||Xf(this.fileName)!==t.readInt(4)?null:Bn.utf8decode(t.readData(e.length-5))}return null},"findExtraFieldUnicodePath"),findExtraFieldUnicodeComment:o(function(){var e=this.extraFields[25461];if(e){var t=ys(e.value);return t.readInt(1)!==1||Xf(this.fileComment)!==t.readInt(4)?null:Bn.utf8decode(t.readData(e.length-5))}return null},"findExtraFieldUnicodeComment")};ed.exports=Qf});var nd=D((Bk,id)=>{"use strict";var Lv=vs(),nt=H(),Me=hs(),Bv=td(),Ov=Xe();function rd(e){this.files=[],this.loadOptions=e}o(rd,"ZipEntries");rd.prototype={checkSignature:o(function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+nt.pretty(t)+", expected "+nt.pretty(e)+")")}},"checkSignature"),isSignature:o(function(e,t){var r=this.reader.index;this.reader.setIndex(e);var i=this.reader.readString(4),n=i===t;return this.reader.setIndex(r),n},"isSignature"),readBlockEndOfCentral:o(function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=Ov.uint8array?"uint8array":"array",r=nt.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(r)},"readBlockEndOfCentral"),readBlockZip64EndOfCentral:o(function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e=this.zip64EndOfCentralSize-44,t=0,r,i,n;t<e;)r=this.reader.readInt(2),i=this.reader.readInt(4),n=this.reader.readData(i),this.zip64ExtensibleData[r]={id:r,length:i,value:n}},"readBlockZip64EndOfCentral"),readBlockZip64EndOfCentralLocator:o(function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},"readBlockZip64EndOfCentralLocator"),readLocalFiles:o(function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(Me.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},"readLocalFiles"),readCentralDir:o(function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(Me.CENTRAL_FILE_HEADER);)e=new Bv({zip64:this.zip64},this.loadOptions),e.readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},"readCentralDir"),readEndOfCentral:o(function(){var e=this.reader.lastIndexOfSignature(Me.CENTRAL_DIRECTORY_END);if(e<0){var t=!this.isSignature(0,Me.LOCAL_FILE_HEADER);throw t?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(e);var r=e;if(this.checkSignature(Me.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===nt.MAX_VALUE_16BITS||this.diskWithCentralDirStart===nt.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===nt.MAX_VALUE_16BITS||this.centralDirRecords===nt.MAX_VALUE_16BITS||this.centralDirSize===nt.MAX_VALUE_32BITS||this.centralDirOffset===nt.MAX_VALUE_32BITS){if(this.zip64=!0,e=this.reader.lastIndexOfSignature(Me.ZIP64_CENTRAL_DIRECTORY_LOCATOR),e<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(Me.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,Me.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(Me.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(Me.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var i=this.centralDirOffset+this.centralDirSize;this.zip64&&(i+=20,i+=12+this.zip64EndOfCentralSize);var n=r-i;if(n>0)this.isSignature(r,Me.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(n<0)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},"readEndOfCentral"),prepareReader:o(function(e){this.reader=Lv(e)},"prepareReader"),load:o(function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()},"load")};id.exports=rd});var sd=D((Uk,od)=>{"use strict";var ws=H(),Un=ir(),Uv=or(),Nv=nd(),Wv=bo(),ad=Jr();function qv(e){return new Un.Promise(function(t,r){var i=e.decompressed.getContentWorker().pipe(new Wv);i.on("error",function(n){r(n)}).on("end",function(){i.streamInfo.crc32!==e.decompressed.crc32?r(new Error("Corrupted zip : CRC32 mismatch")):t()}).resume()})}o(qv,"checkEntryCRC32");od.exports=function(e,t){var r=this;return t=ws.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:Uv.utf8decode}),ad.isNode&&ad.isStream(e)?Un.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):ws.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then(function(i){var n=new Nv(t);return n.load(i),n}).then(o(function(n){var a=[Un.Promise.resolve(n)],s=n.files;if(t.checkCRC32)for(var l=0;l<s.length;l++)a.push(qv(s[l]));return Un.Promise.all(a)},"checkCRC32")).then(o(function(n){for(var a=n.shift(),s=a.files,l=0;l<s.length;l++){var h=s[l],u=h.fileNameStr,c=ws.resolve(h.fileNameStr);r.file(c,h.decompressed,{binary:!0,optimizedBinaryString:!0,date:h.date,dir:h.dir,comment:h.fileCommentStr.length?h.fileCommentStr:null,unixPermissions:h.unixPermissions,dosPermissions:h.dosPermissions,createFolders:t.createFolders}),h.dir||(r.file(c).unsafeOriginalName=u)}return a.zipComment.length&&(r.comment=a.zipComment),r},"addFiles"))}});var Nn=D((Wk,ld)=>{"use strict";function xe(){if(!(this instanceof xe))return new xe;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new xe;for(var t in this)typeof this[t]!="function"&&(e[t]=this[t]);return e}}o(xe,"JSZip");xe.prototype=Of();xe.prototype.loadAsync=sd();xe.support=Xe();xe.defaults=vo();xe.version="3.10.1";xe.loadAsync=function(e,t){return new xe().loadAsync(e,t)};xe.external=ir();ld.exports=xe});var dd=D((R1,fd)=>{var Cr=1e3,kr=Cr*60,xr=kr*60,Ut=xr*24,Jv=Ut*7,Yv=Ut*365.25;fd.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return Xv(e);if(r==="number"&&isFinite(e))return t.long?ey(e):Qv(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function Xv(e){if(e=String(e),!(e.length>100)){var t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return r*Yv;case"weeks":case"week":case"w":return r*Jv;case"days":case"day":case"d":return r*Ut;case"hours":case"hour":case"hrs":case"hr":case"h":return r*xr;case"minutes":case"minute":case"mins":case"min":case"m":return r*kr;case"seconds":case"second":case"secs":case"sec":case"s":return r*Cr;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}o(Xv,"parse");function Qv(e){var t=Math.abs(e);return t>=Ut?Math.round(e/Ut)+"d":t>=xr?Math.round(e/xr)+"h":t>=kr?Math.round(e/kr)+"m":t>=Cr?Math.round(e/Cr)+"s":e+"ms"}o(Qv,"fmtShort");function ey(e){var t=Math.abs(e);return t>=Ut?Wn(e,t,Ut,"day"):t>=xr?Wn(e,t,xr,"hour"):t>=kr?Wn(e,t,kr,"minute"):t>=Cr?Wn(e,t,Cr,"second"):e+" ms"}o(ey,"fmtLong");function Wn(e,t,r,i){var n=t>=r*1.5;return Math.round(e/r)+" "+i+(n?"s":"")}o(Wn,"plural")});var Ss=D((M1,pd)=>{function ty(e){r.debug=r,r.default=r,r.coerce=h,r.disable=a,r.enable=n,r.enabled=s,r.humanize=dd(),r.destroy=u,Object.keys(e).forEach(c=>{r[c]=e[c]}),r.names=[],r.skips=[],r.formatters={};function t(c){let f=0;for(let d=0;d<c.length;d++)f=(f<<5)-f+c.charCodeAt(d),f|=0;return r.colors[Math.abs(f)%r.colors.length]}o(t,"selectColor"),r.selectColor=t;function r(c){let f,d=null,p,C;function v(...y){if(!v.enabled)return;let m=v,b=Number(new Date),k=b-(f||b);m.diff=k,m.prev=f,m.curr=b,f=b,y[0]=r.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");let w=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,(E,_)=>{if(E==="%%")return"%";w++;let x=r.formatters[_];if(typeof x=="function"){let A=y[w];E=x.call(m,A),y.splice(w,1),w--}return E}),r.formatArgs.call(m,y),(m.log||r.log).apply(m,y)}return o(v,"debug"),v.namespace=c,v.useColors=r.useColors(),v.color=r.selectColor(c),v.extend=i,v.destroy=r.destroy,Object.defineProperty(v,"enabled",{enumerable:!0,configurable:!1,get:o(()=>d!==null?d:(p!==r.namespaces&&(p=r.namespaces,C=r.enabled(c)),C),"get"),set:o(y=>{d=y},"set")}),typeof r.init=="function"&&r.init(v),v}o(r,"createDebug");function i(c,f){let d=r(this.namespace+(typeof f>"u"?":":f)+c);return d.log=this.log,d}o(i,"extend");function n(c){r.save(c),r.namespaces=c,r.names=[],r.skips=[];let f,d=(typeof c=="string"?c:"").split(/[\s,]+/),p=d.length;for(f=0;f<p;f++)d[f]&&(c=d[f].replace(/\*/g,".*?"),c[0]==="-"?r.skips.push(new RegExp("^"+c.slice(1)+"$")):r.names.push(new RegExp("^"+c+"$")))}o(n,"enable");function a(){let c=[...r.names.map(l),...r.skips.map(l).map(f=>"-"+f)].join(",");return r.enable(""),c}o(a,"disable");function s(c){if(c[c.length-1]==="*")return!0;let f,d;for(f=0,d=r.skips.length;f<d;f++)if(r.skips[f].test(c))return!1;for(f=0,d=r.names.length;f<d;f++)if(r.names[f].test(c))return!0;return!1}o(s,"enabled");function l(c){return c.toString().substring(2,c.toString().length-2).replace(/\.\*\?$/,"*")}o(l,"toNamespace");function h(c){return c instanceof Error?c.stack||c.message:c}o(h,"coerce");function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return o(u,"destroy"),r.enable(r.load()),r}o(ty,"setup");pd.exports=ty});var gd=D((ve,qn)=>{ve.formatArgs=iy;ve.save=ny;ve.load=ay;ve.useColors=ry;ve.storage=oy();ve.destroy=(()=>{let e=!1;return()=>{e||(e=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})();ve.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function ry(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let e;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(e=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(e[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}o(ry,"useColors");function iy(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+qn.exports.humanize(this.diff),!this.useColors)return;let t="color: "+this.color;e.splice(1,0,t,"color: inherit");let r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,n=>{n!=="%%"&&(r++,n==="%c"&&(i=r))}),e.splice(i,0,t)}o(iy,"formatArgs");ve.log=console.debug||console.log||(()=>{});function ny(e){try{e?ve.storage.setItem("debug",e):ve.storage.removeItem("debug")}catch{}}o(ny,"save");function ay(){let e;try{e=ve.storage.getItem("debug")}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}o(ay,"load");function oy(){try{return localStorage}catch{}}o(oy,"localstorage");qn.exports=Ss()(ve);var{formatters:sy}=qn.exports;sy.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}});var Dd=D((O1,md)=>{"use strict";md.exports=(e,t=process.argv)=>{let r=e.startsWith("-")?"":e.length===1?"-":"--",i=t.indexOf(r+e),n=t.indexOf("--");return i!==-1&&(n===-1||i<n)}});var wd=D((U1,yd)=>{"use strict";var ly=require("os"),vd=require("tty"),Se=Dd(),{env:Q}=process,Dt;Se("no-color")||Se("no-colors")||Se("color=false")||Se("color=never")?Dt=0:(Se("color")||Se("colors")||Se("color=true")||Se("color=always"))&&(Dt=1);"FORCE_COLOR"in Q&&(Q.FORCE_COLOR==="true"?Dt=1:Q.FORCE_COLOR==="false"?Dt=0:Dt=Q.FORCE_COLOR.length===0?1:Math.min(parseInt(Q.FORCE_COLOR,10),3));function Es(e){return e===0?!1:{level:e,hasBasic:!0,has256:e>=2,has16m:e>=3}}o(Es,"translateLevel");function Fs(e,t){if(Dt===0)return 0;if(Se("color=16m")||Se("color=full")||Se("color=truecolor"))return 3;if(Se("color=256"))return 2;if(e&&!t&&Dt===void 0)return 0;let r=Dt||0;if(Q.TERM==="dumb")return r;if(process.platform==="win32"){let i=ly.release().split(".");return Number(i[0])>=10&&Number(i[2])>=10586?Number(i[2])>=14931?3:2:1}if("CI"in Q)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some(i=>i in Q)||Q.CI_NAME==="codeship"?1:r;if("TEAMCITY_VERSION"in Q)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Q.TEAMCITY_VERSION)?1:0;if(Q.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in Q){let i=parseInt((Q.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Q.TERM_PROGRAM){case"iTerm.app":return i>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Q.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(Q.TERM)||"COLORTERM"in Q?1:r}o(Fs,"supportsColor");function uy(e){let t=Fs(e,e&&e.isTTY);return Es(t)}o(uy,"getSupportLevel");yd.exports={supportsColor:uy,stdout:Es(Fs(!0,vd.isatty(1))),stderr:Es(Fs(!0,vd.isatty(2)))}});var Cd=D((ee,zn)=>{var cy=require("tty"),jn=require("util");ee.init=Dy;ee.log=py;ee.formatArgs=fy;ee.save=gy;ee.load=my;ee.useColors=hy;ee.destroy=jn.deprecate(()=>{},"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.");ee.colors=[6,2,3,4,5,1];try{let e=wd();e&&(e.stderr||e).level>=2&&(ee.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch{}ee.inspectOpts=Object.keys(process.env).filter(e=>/^debug_/i.test(e)).reduce((e,t)=>{let r=t.substring(6).toLowerCase().replace(/_([a-z])/g,(n,a)=>a.toUpperCase()),i=process.env[t];return/^(yes|on|true|enabled)$/i.test(i)?i=!0:/^(no|off|false|disabled)$/i.test(i)?i=!1:i==="null"?i=null:i=Number(i),e[r]=i,e},{});function hy(){return"colors"in ee.inspectOpts?!!ee.inspectOpts.colors:cy.isatty(process.stderr.fd)}o(hy,"useColors");function fy(e){let{namespace:t,useColors:r}=this;if(r){let i=this.color,n="\x1B[3"+(i<8?i:"8;5;"+i),a=`  ${n};1m${t} \x1B[0m`;e[0]=a+e[0].split(`
`).join(`
`+a),e.push(n+"m+"+zn.exports.humanize(this.diff)+"\x1B[0m")}else e[0]=dy()+t+" "+e[0]}o(fy,"formatArgs");function dy(){return ee.inspectOpts.hideDate?"":new Date().toISOString()+" "}o(dy,"getDate");function py(...e){return process.stderr.write(jn.formatWithOptions(ee.inspectOpts,...e)+`
`)}o(py,"log");function gy(e){e?process.env.DEBUG=e:delete process.env.DEBUG}o(gy,"save");function my(){return process.env.DEBUG}o(my,"load");function Dy(e){e.inspectOpts={};let t=Object.keys(ee.inspectOpts);for(let r=0;r<t.length;r++)e.inspectOpts[t[r]]=ee.inspectOpts[t[r]]}o(Dy,"init");zn.exports=Ss()(ee);var{formatters:bd}=zn.exports;bd.o=function(e){return this.inspectOpts.colors=this.useColors,jn.inspect(e,this.inspectOpts).split(`
`).map(t=>t.trim()).join(" ")};bd.O=function(e){return this.inspectOpts.colors=this.useColors,jn.inspect(e,this.inspectOpts)}});var kd=D((q1,_s)=>{typeof process>"u"||process.type==="renderer"||process.browser===!0||process.__nwjs?_s.exports=gd():_s.exports=Cd()});var Ld=D((te,Ls)=>{"use strict";Object.defineProperty(te,"__esModule",{value:!0});function vy(e){return e&&typeof e=="object"&&"default"in e?e.default:e}o(vy,"_interopDefault");var Rs=vy(kd()),Bs=class Bs{constructor(t,r){this.moduleName=t,this.packageNames=r}lazyloadExportOrDie(t){let r=this,i=Object.fromEntries(Object.getOwnPropertyNames(Reflect).map(n=>[n,function(a,...s){let h=r.loadModuleOrDie()[t];return Reflect[n](h||a,...s)}]));return new Proxy({},i)}loadModule(){return Ts(this.packageNames)}loadModuleOrDie(){let t=Ts(this.packageNames);if(t)return t;throw this.requireError}get requireError(){let t=this.moduleName.charAt(0).toUpperCase()+this.moduleName.slice(1);return new Error(`
  ${t} is missing. :-)

  I've tried loading ${this.packageNames.map(r=>`"${r}"`).join(", ")} - no luck.

  Make sure you install one of those packages or use the named 'addExtra' export,
  to patch a specific (and maybe non-standard) implementation of ${t}.

  To get the latest stable version of ${t} run:
  'yarn add ${this.moduleName}' or 'npm i ${this.moduleName}'
  `)}};o(Bs,"Loader");var As=Bs;function Ts(e){for(let t of e)try{return require(t)}catch{continue}}o(Ts,"requirePackages");var $e=new As("playwright",["playwright-core","playwright"]),ue=Rs("playwright-extra:puppeteer-compat"),Ps=o(e=>"unroute"in e,"isPlaywrightPage"),xd=o(e=>["parentFrame","frameLocator"].every(t=>t in e),"isPlaywrightFrame"),yy=o(e=>"newContext"in e,"isPlaywrightBrowser"),wy=o(e=>!!e&&typeof e=="object"&&!!e.isCompatShim,"isPuppeteerCompat"),at={objectToShim:new Map,cdpSession:{page:new Map,browser:new Map}};function Is(e){if(!e||typeof e!="object")return e;if(at.objectToShim.has(e))return at.objectToShim.get(e);if(wy(e))return e;if(ue("addPuppeteerCompat",at.objectToShim.size),Ps(e)||xd(e)){let t=Cy(e);return at.objectToShim.set(e,t),t}if(yy(e)){let t=ky(e);return at.objectToShim.set(e,t),t}return ue("Received unknown object:",Reflect.ownKeys(e)),e}o(Is,"addPuppeteerCompat");var Sd={send:o(async(...e)=>{ue("dummy CDP client called","send",e)},"send"),on:o((...e)=>{ue("dummy CDP client called","on",e)},"on")};async function ki(e){let t=at.cdpSession.page.get(e);if(t)return ue("getPageCDPSession: use existing"),t;ue("getPageCDPSession: use new");let r=xd(e)?e.page().context():e.context();try{return t=await r.newCDPSession(e),at.cdpSession.page.set(e,t),t}catch(i){ue("getPageCDPSession: error while creating session:",i.message),ue("getPageCDPSession: Unable create CDP session (most likely a different browser than chromium) - returning a dummy")}return Sd}o(ki,"getPageCDPSession");async function by(e){let t=at.cdpSession.browser.get(e);if(t)return ue("getBrowserCDPSession: use existing"),t;ue("getBrowserCDPSession: use new");try{return t=await e.newBrowserCDPSession(),at.cdpSession.browser.set(e,t),t}catch(r){ue("getBrowserCDPSession: error while creating session:",r.message),ue("getBrowserCDPSession: Unable create CDP session (most likely a different browser than chromium) - returning a dummy")}return Sd}o(by,"getBrowserCDPSession");function Cy(e){let t=Math.random().toString(36).substring(2,7);return new Proxy(e,{get(i,n){return n==="isCompatShim"||n==="isPlaywright"?!0:(ue("page - get",t,n),n==="_client"?()=>({send:o(async(a,s)=>await(await ki(e)).send(a,s),"send"),on:o((a,s)=>{ki(e).then(l=>{l.on(a,s)})},"on")}):n==="setBypassCSP"?async a=>await(await ki(e)).send("Page.setBypassCSP",{enabled:a}):n==="setUserAgent"?async(a,s)=>await(await ki(e)).send("Emulation.setUserAgentOverride",{userAgent:a,userAgentMetadata:s}):n==="browser"&&Ps(e)?()=>{let a=e.context().browser();return a||(ue("page.browser() - not available, most likely due to launchPersistentContext"),a=e),Is(a)}:n==="evaluateOnNewDocument"&&Ps(e)?async function(a,...s){return await e.addInitScript(a,s[0])}:n==="userAgent"?async a=>(await(await ki(e)).send("Browser.getVersion")).userAgent:Reflect.get(i,n))}})}o(Cy,"createPageShim");function ky(e){let t=Math.random().toString(36).substring(2,7);return new Proxy(e,{get(i,n){return n==="isCompatShim"||n==="isPlaywright"?!0:(ue("browser - get",t,n),n==="pages"?()=>e.contexts().flatMap(a=>a.pages().map(s=>Is(s))):n==="userAgent"?async()=>(await(await by(e)).send("Browser.getVersion")).userAgent:Reflect.get(i,n))}})}o(ky,"createBrowserShim");var Ee=Rs("playwright-extra:plugins"),Os=class Os{constructor(){this._plugins=[],this._dependencyDefaults=new Map,this._dependencyResolution=new Map}get list(){return this._plugins}get names(){return this._plugins.map(t=>t.name)}add(t){var r;return this.isValidPluginInstance(t)?(t.onPluginRegistered&&t.onPluginRegistered({framework:"playwright"}),t._registerChildClassMembers&&t._registerChildClassMembers(Object.getPrototypeOf(t)),!((r=t.requirements)===null||r===void 0)&&r.has("dataFromPlugins")&&(t.getDataFromPlugins=this.getData.bind(this)),this._plugins.push(t),!0):!1}isValidPluginInstance(t){return!t||typeof t!="object"||!t._isPuppeteerExtraPlugin?(console.error("Warning: Plugin is not derived from PuppeteerExtraPlugin, ignoring.",t),!1):t.name?!0:(console.error("Warning: Plugin with no name registering, ignoring.",t),!1)}onPluginError(t,r,i){console.warn(`An error occured while executing "${r}" in plugin "${t.name}":`,i)}setDependencyDefaults(t,r){return this._dependencyDefaults.set(t,r),this}setDependencyResolution(t,r){return this._dependencyResolution.set(t,r),this}prepare(){this.resolveDependencies(),this.order()}filterByMethod(t){return this._plugins.filter(r=>r._childClassMembers&&Array.isArray(r._childClassMembers)?r._childClassMembers.includes(t):t in r)}_addPuppeteerCompatIfNeeded(t,r,i){let n=t._isPuppeteerExtraPlugin&&!t.noPuppeteerShim,s=["onBrowser","onPageCreated","onPageClose","afterConnect","afterLaunch"].includes(r);return!n||!s?i:(Ee("add puppeteer compatibility",t.name,r),[...i.map(l=>Is(l))])}dispatch(t,...r){var i,n;let a=this.filterByMethod(t);Ee("dispatch",t,{all:this._plugins.length,filteredByMethod:a.length});for(let s of a)try{r=this._addPuppeteerCompatIfNeeded.bind(this)(s,t,r);let l=(n=(i=s[t])===null||i===void 0?void 0:i.constructor)===null||n===void 0?void 0:n.name;Ee("dispatch to plugin",{plugin:s.name,method:t,fnType:l}),l==="AsyncFunction"?s[t](...r).catch(h=>this.onPluginError(s,t,h)):s[t](...r)}catch(l){this.onPluginError(s,t,l)}}async dispatchBlocking(t,...r){let i=this.filterByMethod(t);Ee("dispatchBlocking",t,{all:this._plugins.length,filteredByMethod:i.length});let n=null;for(let a of i)try{r=this._addPuppeteerCompatIfNeeded.bind(this)(a,t,r),n=await a[t](...r),n!==void 0&&(r[0]=n)}catch(s){return this.onPluginError(a,t,s),n}return n}order(){Ee("order:before",this.names);let t=this._plugins.filter(r=>{var i;return(i=r.requirements)===null||i===void 0?void 0:i.has("runLast")}).map(r=>r.name);for(let r of t){let i=this._plugins.findIndex(n=>n.name===r);this._plugins.push(this._plugins.splice(i,1)[0])}Ee("order:after",this.names)}getData(t){let r=this._plugins.filter(i=>!!i.data).map(i=>Array.isArray(i.data)?i.data:[i.data]).reduce((i,n)=>[...i,...n],[]);return t?r.filter(i=>i.name===t):r}resolvePluginsStanza(){Ee("resolvePluginsStanza");let t=new Set(this.names);this._plugins.filter(r=>!!r.plugins&&r.plugins.length).filter(r=>!t.has(r.name)).forEach(r=>{(r.plugins||[]).forEach(i=>{Ee(r.name,"adding missing plugin",i.name),this.add(i)})})}resolveDependenciesStanza(){Ee("resolveDependenciesStanza");let t=o((n,a)=>{if(this._dependencyResolution.has(a))return this._dependencyResolution.get(a);let s=["puppeteer-extra-plugin-"],l=s.some(f=>a.startsWith(f)),h=[];l||h.push(...s.map(f=>f+a)),h.push(a);let u=Ts(h);if(u)return u;let c=`
The plugin '${n}' listed '${a}' as dependency,
which could not be found. Please install it:

${h.map(f=>`yarn add ${f.split("/")[0]}`).join(`
 or:
`)}

Note: You don't need to require the plugin yourself,
unless you want to modify it's default settings.

If your bundler has issues with dynamic imports take a look at '.plugins.setDependencyResolution()'.
      `;throw console.warn(c),new Error("Plugin dependency not found")},"requireDependencyOrDie"),r=new Set(this.names),i=o(({name:n,dependencies:a})=>{if(!a)return;let s=o((l,h)=>{let u=t(n,l);h=h||this._dependencyDefaults.get(l)||{};let c=u(h);if(r.has(c.name)){Ee(n,"=> dependency already exists:",c.name);return}return r.add(c.name),Ee(n,"=> adding new dependency:",c.name,h),this.add(c),i(c)},"processDependency");if(a instanceof Set||Array.isArray(a))return[...a].forEach(l=>s(l));if(a instanceof Map)return a.forEach((l,h)=>s(h,l))},"recursivelyLoadMissingDependencies");this.list.forEach(i)}resolveDependencies(){Ee("resolveDependencies"),this.resolvePluginsStanza(),this.resolveDependenciesStanza()}};o(Os,"PluginList");var xi=Os,Le=Rs("playwright-extra"),Us=class Us{constructor(t){this._launcher=t,this.plugins=new xi}use(t){if(!(t&&"name"in t))throw new Error("A plugin must be provided to .use()");return this.plugins.add(t)&&Le("Plugin registered",t.name),this}get launcher(){if(!this._launcher)throw $e.requireError;return this._launcher}async launch(...t){if(!this.launcher.launch)throw new Error('Launcher does not support "launch"');let[r]=t;r=Object.assign({args:[]},r||{}),Le("launch",r),this.plugins.prepare(),r=await this.plugins.dispatchBlocking("beforeLaunch",r)||r,Le("launch with options",r),"userDataDir"in r&&(Le("A plugin defined userDataDir during .launch, which isn't supported by playwright - ignoring"),delete r.userDataDir);let i=await this.launcher.launch(r);return await this.plugins.dispatchBlocking("onBrowser",i),await this._bindBrowserEvents(i),await this.plugins.dispatchBlocking("afterLaunch",i),i}async launchPersistentContext(...t){if(!this.launcher.launchPersistentContext)throw new Error('Launcher does not support "launchPersistentContext"');let[r,i]=t;i=Object.assign({args:[]},i||{}),Le("launchPersistentContext",i),this.plugins.prepare(),i=await this.plugins.dispatchBlocking("beforeLaunch",i)||i;let n=await this.launcher.launchPersistentContext(r,i);return await this.plugins.dispatchBlocking("afterLaunch",n),this._bindBrowserContextEvents(n),n}async connect(t,r={}){if(!this.launcher.connect)throw new Error('Launcher does not support "connect"');this.plugins.prepare();let i={},n=!1;typeof t=="object"?i=Object.assign(Object.assign({},t),r):(n=!0,i=Object.assign({wsEndpoint:t},r)),Le("connect",i),i=await this.plugins.dispatchBlocking("beforeConnect",i)||i;let a=[],s=i.wsEndpoint;n?(delete i.wsEndpoint,a.push(s,i)):a.push(i);let l=await this.launcher.connect(...a);return await this.plugins.dispatchBlocking("onBrowser",l),await this._bindBrowserEvents(l),await this.plugins.dispatchBlocking("afterConnect",l),l}async connectOverCDP(t,r={}){if(!this.launcher.connectOverCDP)throw new Error("Launcher does not implement 'connectOverCDP'");this.plugins.prepare();let i={},n=!1;typeof t=="object"?i=Object.assign(Object.assign({},t),r):(n=!0,i=Object.assign({endpointURL:t},r)),Le("connectOverCDP"),i=await this.plugins.dispatchBlocking("beforeConnect",i)||i;let a=[],s=i.endpointURL;n?(delete i.endpointURL,a.push(s,i)):a.push(i);let l=await this.launcher.connectOverCDP(...a);return await this.plugins.dispatchBlocking("onBrowser",l),await this._bindBrowserEvents(l),await this.plugins.dispatchBlocking("afterConnect",l),l}async _bindBrowserContextEvents(t,r){Le("_bindBrowserContextEvents"),this.plugins.dispatch("onContextCreated",t,r),t.newPage=((i,n)=>async()=>{let a=await i.call(n);return await a.goto("about:blank"),a})(t.newPage,t),t.on("close",()=>{t.browser()||this.plugins.dispatch("onDisconnected")}),t.on("page",i=>{this.plugins.dispatch("onPageCreated",i),i.on("close",()=>{this.plugins.dispatch("onPageClose",i)})})}async _bindBrowserEvents(t){Le("_bindPlaywrightBrowserEvents"),t.on("disconnected",()=>{this.plugins.dispatch("onDisconnected",t)}),t.newContext=((r,i)=>async(n={})=>{let a=await this.plugins.dispatchBlocking("beforeContext",n,t)||n,s=await r.call(i,a);return this._bindBrowserContextEvents(s,a),s})(t.newContext,t)}};o(Us,"PlaywrightExtraClass");var Si=Us,Ms=new Proxy(Si,{construct(e,t){Le(`create instance of ${e.name}`);let r=Reflect.construct(e,t);return new Proxy(r,{get(i,n){return n in i?Reflect.get(i,n):(Le("proxying property to original launcher: ",n),Reflect.get(i.launcher,n))}})}}),Ei=o(e=>new Ms(e),"addExtra"),Ed=Ei(($e.loadModule()||{}).chromium),Fd=Ei(($e.loadModule()||{}).firefox),_d=Ei(($e.loadModule()||{}).webkit),Ad=$e.lazyloadExportOrDie("_android"),Td=$e.lazyloadExportOrDie("_electron"),Pd=$e.lazyloadExportOrDie("request"),Rd=$e.lazyloadExportOrDie("selectors"),Id=$e.lazyloadExportOrDie("devices"),Md=$e.lazyloadExportOrDie("errors"),xy={PlaywrightExtra:Ms,PlaywrightExtraClass:Si,PluginList:xi,addExtra:Ei,chromium:Ed,firefox:Fd,webkit:_d,_android:Ad,_electron:Td,request:Pd,selectors:Rd,devices:Id,errors:Md};te.PlaywrightExtra=Ms;te.PlaywrightExtraClass=Si;te.PluginList=xi;te._android=Ad;te._electron=Td;te.addExtra=Ei;te.chromium=Ed;te.default=xy;te.devices=Id;te.errors=Md;te.firefox=Fd;te.request=Pd;te.selectors=Rd;te.webkit=_d;Ls.exports=te.default||{};Object.entries(te).forEach(([e,t])=>{Ls.exports[e]=t})});var ta=D((SS,zd)=>{var Xs=require("tty"),qd,ea,jd,Fy=((jd=(ea=(qd=Xs==null?void 0:Xs.WriteStream)==null?void 0:qd.prototype)==null?void 0:ea.hasColors)==null?void 0:jd.call(ea))??!1,R=o((e,t)=>{if(!Fy)return n=>n;let r=`\x1B[${e}m`,i=`\x1B[${t}m`;return n=>{let a=n+"",s=a.indexOf(i);if(s===-1)return r+a+i;let l=r,h=0;for(;s!==-1;)l+=a.slice(h,s)+r,h=s+i.length,s=a.indexOf(i,h);return l+=a.slice(h)+i,l}},"format"),P={};P.reset=R(0,0);P.bold=R(1,22);P.dim=R(2,22);P.italic=R(3,23);P.underline=R(4,24);P.overline=R(53,55);P.inverse=R(7,27);P.hidden=R(8,28);P.strikethrough=R(9,29);P.black=R(30,39);P.red=R(31,39);P.green=R(32,39);P.yellow=R(33,39);P.blue=R(34,39);P.magenta=R(35,39);P.cyan=R(36,39);P.white=R(37,39);P.gray=R(90,39);P.bgBlack=R(40,49);P.bgRed=R(41,49);P.bgGreen=R(42,49);P.bgYellow=R(43,49);P.bgBlue=R(44,49);P.bgMagenta=R(45,49);P.bgCyan=R(46,49);P.bgWhite=R(47,49);P.bgGray=R(100,49);P.redBright=R(91,39);P.greenBright=R(92,39);P.yellowBright=R(93,39);P.blueBright=R(94,39);P.magentaBright=R(95,39);P.cyanBright=R(96,39);P.whiteBright=R(97,39);P.bgRedBright=R(101,49);P.bgGreenBright=R(102,49);P.bgYellowBright=R(103,49);P.bgBlueBright=R(104,49);P.bgMagentaBright=R(105,49);P.bgCyanBright=R(106,49);P.bgWhiteBright=R(107,49);zd.exports=P});var Jd=D((XS,Kd)=>{"use strict";Kd.exports=Ly;function My(e){let t={defaultWidth:0,output:process.stdout,tty:require("tty")};return e?(Object.keys(t).forEach(function(r){e[r]||(e[r]=t[r])}),e):t}o(My,"normalizeOpts");function Ly(e){let t=My(e);if(t.output.getWindowSize)return t.output.getWindowSize()[0]||t.defaultWidth;if(t.tty.getWindowSize)return t.tty.getWindowSize()[1]||t.defaultWidth;if(t.output.columns)return t.output.columns;if(process.env.CLI_WIDTH){let r=parseInt(process.env.CLI_WIDTH,10);if(!isNaN(r)&&r!==0)return r}return t.defaultWidth}o(Ly,"cliWidth")});var Xd=D((eE,Yd)=>{"use strict";Yd.exports=({onlyFirst:e=!1}={})=>{let t=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(t,e?void 0:"g")}});var ra=D((tE,Qd)=>{"use strict";var By=Xd();Qd.exports=e=>typeof e=="string"?e.replace(By(),""):e});var tp=D((rE,el)=>{"use strict";var ep=o(e=>Number.isNaN(e)?!1:e>=4352&&(e<=4447||e===9001||e===9002||11904<=e&&e<=12871&&e!==12351||12880<=e&&e<=19903||19968<=e&&e<=42182||43360<=e&&e<=43388||44032<=e&&e<=55203||63744<=e&&e<=64255||65040<=e&&e<=65049||65072<=e&&e<=65131||65281<=e&&e<=65376||65504<=e&&e<=65510||110592<=e&&e<=110593||127488<=e&&e<=127569||131072<=e&&e<=262141),"isFullwidthCodePoint");el.exports=ep;el.exports.default=ep});var ip=D((nE,rp)=>{"use strict";rp.exports=function(){return/\uD83C\uDFF4\uDB40\uDC67\uDB40\uDC62(?:\uDB40\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDB40\uDC73\uDB40\uDC63\uDB40\uDC74|\uDB40\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F|\uD83D\uDC68(?:\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68\uD83C\uDFFB|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFE])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D)?\uD83D\uDC68|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D[\uDC68\uDC69])\u200D(?:\uD83D[\uDC66\uDC67])|[\u2695\u2696\u2708]\uFE0F|\uD83D[\uDC66\uDC67]|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|(?:\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708])\uFE0F|\uD83C\uDFFB\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C[\uDFFB-\uDFFF])|(?:\uD83E\uDDD1\uD83C\uDFFB\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)\uD83C\uDFFB|\uD83E\uDDD1(?:\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1)|(?:\uD83E\uDDD1\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFF\u200D\uD83E\uDD1D\u200D(?:\uD83D[\uDC68\uDC69]))(?:\uD83C[\uDFFB-\uDFFE])|(?:\uD83E\uDDD1\uD83C\uDFFC\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB\uDFFC])|\uD83D\uDC69(?:\uD83C\uDFFE\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFC\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFB\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFC-\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFD\u200D(?:\uD83E\uDD1D\u200D\uD83D\uDC68(?:\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\u200D(?:\u2764\uFE0F\u200D(?:\uD83D\uDC8B\u200D(?:\uD83D[\uDC68\uDC69])|\uD83D[\uDC68\uDC69])|\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD])|\uD83C\uDFFF\u200D(?:\uD83C[\uDF3E\uDF73\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E[\uDDAF-\uDDB3\uDDBC\uDDBD]))|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67]))|(?:\uD83E\uDDD1\uD83C\uDFFD\u200D\uD83E\uDD1D\u200D\uD83E\uDDD1|\uD83D\uDC69\uD83C\uDFFE\u200D\uD83E\uDD1D\u200D\uD83D\uDC69)(?:\uD83C[\uDFFB-\uDFFD])|\uD83D\uDC69\u200D\uD83D\uDC66\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC69\u200D(?:\uD83D[\uDC66\uDC67])|(?:\uD83D\uDC41\uFE0F\u200D\uD83D\uDDE8|\uD83D\uDC69(?:\uD83C\uDFFF\u200D[\u2695\u2696\u2708]|\uD83C\uDFFE\u200D[\u2695\u2696\u2708]|\uD83C\uDFFC\u200D[\u2695\u2696\u2708]|\uD83C\uDFFB\u200D[\u2695\u2696\u2708]|\uD83C\uDFFD\u200D[\u2695\u2696\u2708]|\u200D[\u2695\u2696\u2708])|(?:(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)\uFE0F|\uD83D\uDC6F|\uD83E[\uDD3C\uDDDE\uDDDF])\u200D[\u2640\u2642]|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:(?:\uD83C[\uDFFB-\uDFFF])\u200D[\u2640\u2642]|\u200D[\u2640\u2642])|\uD83C\uDFF4\u200D\u2620)\uFE0F|\uD83D\uDC69\u200D\uD83D\uDC67\u200D(?:\uD83D[\uDC66\uDC67])|\uD83C\uDFF3\uFE0F\u200D\uD83C\uDF08|\uD83D\uDC15\u200D\uD83E\uDDBA|\uD83D\uDC69\u200D\uD83D\uDC66|\uD83D\uDC69\u200D\uD83D\uDC67|\uD83C\uDDFD\uD83C\uDDF0|\uD83C\uDDF4\uD83C\uDDF2|\uD83C\uDDF6\uD83C\uDDE6|[#\*0-9]\uFE0F\u20E3|\uD83C\uDDE7(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF])|\uD83C\uDDF9(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF])|\uD83C\uDDEA(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA])|\uD83E\uDDD1(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF7(?:\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC])|\uD83D\uDC69(?:\uD83C[\uDFFB-\uDFFF])|\uD83C\uDDF2(?:\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF])|\uD83C\uDDE6(?:\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF])|\uD83C\uDDF0(?:\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF])|\uD83C\uDDED(?:\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA])|\uD83C\uDDE9(?:\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF])|\uD83C\uDDFE(?:\uD83C[\uDDEA\uDDF9])|\uD83C\uDDEC(?:\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE])|\uD83C\uDDF8(?:\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF])|\uD83C\uDDEB(?:\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7])|\uD83C\uDDF5(?:\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE])|\uD83C\uDDFB(?:\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA])|\uD83C\uDDF3(?:\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF])|\uD83C\uDDE8(?:\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF5\uDDF7\uDDFA-\uDDFF])|\uD83C\uDDF1(?:\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE])|\uD83C\uDDFF(?:\uD83C[\uDDE6\uDDF2\uDDFC])|\uD83C\uDDFC(?:\uD83C[\uDDEB\uDDF8])|\uD83C\uDDFA(?:\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF])|\uD83C\uDDEE(?:\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9])|\uD83C\uDDEF(?:\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5])|(?:\uD83C[\uDFC3\uDFC4\uDFCA]|\uD83D[\uDC6E\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4-\uDEB6]|\uD83E[\uDD26\uDD37-\uDD39\uDD3D\uDD3E\uDDB8\uDDB9\uDDCD-\uDDCF\uDDD6-\uDDDD])(?:\uD83C[\uDFFB-\uDFFF])|(?:\u26F9|\uD83C[\uDFCB\uDFCC]|\uD83D\uDD75)(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u261D\u270A-\u270D]|\uD83C[\uDF85\uDFC2\uDFC7]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC70\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDCAA\uDD74\uDD7A\uDD90\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1C\uDD1E\uDD1F\uDD30-\uDD36\uDDB5\uDDB6\uDDBB\uDDD2-\uDDD5])(?:\uD83C[\uDFFB-\uDFFF])|(?:[\u231A\u231B\u23E9-\u23EC\u23F0\u23F3\u25FD\u25FE\u2614\u2615\u2648-\u2653\u267F\u2693\u26A1\u26AA\u26AB\u26BD\u26BE\u26C4\u26C5\u26CE\u26D4\u26EA\u26F2\u26F3\u26F5\u26FA\u26FD\u2705\u270A\u270B\u2728\u274C\u274E\u2753-\u2755\u2757\u2795-\u2797\u27B0\u27BF\u2B1B\u2B1C\u2B50\u2B55]|\uD83C[\uDC04\uDCCF\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF7C\uDF7E-\uDF93\uDFA0-\uDFCA\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF4\uDFF8-\uDFFF]|\uD83D[\uDC00-\uDC3E\uDC40\uDC42-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDD7A\uDD95\uDD96\uDDA4\uDDFB-\uDE4F\uDE80-\uDEC5\uDECC\uDED0-\uDED2\uDED5\uDEEB\uDEEC\uDEF4-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])|(?:[#\*0-9\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u261D\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692-\u2697\u2699\u269B\u269C\u26A0\u26A1\u26AA\u26AB\u26B0\u26B1\u26BD\u26BE\u26C4\u26C5\u26C8\u26CE\u26CF\u26D1\u26D3\u26D4\u26E9\u26EA\u26F0-\u26F5\u26F7-\u26FA\u26FD\u2702\u2705\u2708-\u270D\u270F\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763\u2764\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC04\uDCCF\uDD70\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDE6-\uDDFF\uDE01\uDE02\uDE1A\uDE2F\uDE32-\uDE3A\uDE50\uDE51\uDF00-\uDF21\uDF24-\uDF93\uDF96\uDF97\uDF99-\uDF9B\uDF9E-\uDFF0\uDFF3-\uDFF5\uDFF7-\uDFFF]|\uD83D[\uDC00-\uDCFD\uDCFF-\uDD3D\uDD49-\uDD4E\uDD50-\uDD67\uDD6F\uDD70\uDD73-\uDD7A\uDD87\uDD8A-\uDD8D\uDD90\uDD95\uDD96\uDDA4\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA-\uDE4F\uDE80-\uDEC5\uDECB-\uDED2\uDED5\uDEE0-\uDEE5\uDEE9\uDEEB\uDEEC\uDEF0\uDEF3-\uDEFA\uDFE0-\uDFEB]|\uD83E[\uDD0D-\uDD3A\uDD3C-\uDD45\uDD47-\uDD71\uDD73-\uDD76\uDD7A-\uDDA2\uDDA5-\uDDAA\uDDAE-\uDDCA\uDDCD-\uDDFF\uDE70-\uDE73\uDE78-\uDE7A\uDE80-\uDE82\uDE90-\uDE95])\uFE0F|(?:[\u261D\u26F9\u270A-\u270D]|\uD83C[\uDF85\uDFC2-\uDFC4\uDFC7\uDFCA-\uDFCC]|\uD83D[\uDC42\uDC43\uDC46-\uDC50\uDC66-\uDC78\uDC7C\uDC81-\uDC83\uDC85-\uDC87\uDC8F\uDC91\uDCAA\uDD74\uDD75\uDD7A\uDD90\uDD95\uDD96\uDE45-\uDE47\uDE4B-\uDE4F\uDEA3\uDEB4-\uDEB6\uDEC0\uDECC]|\uD83E[\uDD0F\uDD18-\uDD1F\uDD26\uDD30-\uDD39\uDD3C-\uDD3E\uDDB5\uDDB6\uDDB8\uDDB9\uDDBB\uDDCD-\uDDCF\uDDD1-\uDDDD])/g}});var ap=D((aE,tl)=>{"use strict";var Oy=ra(),Uy=tp(),Ny=ip(),np=o(e=>{if(typeof e!="string"||e.length===0||(e=Oy(e),e.length===0))return 0;e=e.replace(Ny(),"  ");let t=0;for(let r=0;r<e.length;r++){let i=e.codePointAt(r);i<=31||i>=127&&i<=159||i>=768&&i<=879||(i>65535&&r++,t+=Uy(i)?2:1)}return t},"stringWidth");tl.exports=np;tl.exports.default=np});var sp=D((sE,op)=>{"use strict";op.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}});var rl=D((lE,up)=>{var Pi=sp(),lp={};for(let e of Object.keys(Pi))lp[Pi[e]]=e;var S={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};up.exports=S;for(let e of Object.keys(S)){if(!("channels"in S[e]))throw new Error("missing channels property: "+e);if(!("labels"in S[e]))throw new Error("missing channel labels property: "+e);if(S[e].labels.length!==S[e].channels)throw new Error("channel and label counts mismatch: "+e);let{channels:t,labels:r}=S[e];delete S[e].channels,delete S[e].labels,Object.defineProperty(S[e],"channels",{value:t}),Object.defineProperty(S[e],"labels",{value:r})}S.rgb.hsl=function(e){let t=e[0]/255,r=e[1]/255,i=e[2]/255,n=Math.min(t,r,i),a=Math.max(t,r,i),s=a-n,l,h;a===n?l=0:t===a?l=(r-i)/s:r===a?l=2+(i-t)/s:i===a&&(l=4+(t-r)/s),l=Math.min(l*60,360),l<0&&(l+=360);let u=(n+a)/2;return a===n?h=0:u<=.5?h=s/(a+n):h=s/(2-a-n),[l,h*100,u*100]};S.rgb.hsv=function(e){let t,r,i,n,a,s=e[0]/255,l=e[1]/255,h=e[2]/255,u=Math.max(s,l,h),c=u-Math.min(s,l,h),f=o(function(d){return(u-d)/6/c+1/2},"diffc");return c===0?(n=0,a=0):(a=c/u,t=f(s),r=f(l),i=f(h),s===u?n=i-r:l===u?n=1/3+t-i:h===u&&(n=2/3+r-t),n<0?n+=1:n>1&&(n-=1)),[n*360,a*100,u*100]};S.rgb.hwb=function(e){let t=e[0],r=e[1],i=e[2],n=S.rgb.hsl(e)[0],a=1/255*Math.min(t,Math.min(r,i));return i=1-1/255*Math.max(t,Math.max(r,i)),[n,a*100,i*100]};S.rgb.cmyk=function(e){let t=e[0]/255,r=e[1]/255,i=e[2]/255,n=Math.min(1-t,1-r,1-i),a=(1-t-n)/(1-n)||0,s=(1-r-n)/(1-n)||0,l=(1-i-n)/(1-n)||0;return[a*100,s*100,l*100,n*100]};function Wy(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}o(Wy,"comparativeDistance");S.rgb.keyword=function(e){let t=lp[e];if(t)return t;let r=1/0,i;for(let n of Object.keys(Pi)){let a=Pi[n],s=Wy(e,a);s<r&&(r=s,i=n)}return i};S.keyword.rgb=function(e){return Pi[e]};S.rgb.xyz=function(e){let t=e[0]/255,r=e[1]/255,i=e[2]/255;t=t>.04045?((t+.055)/1.055)**2.4:t/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,i=i>.04045?((i+.055)/1.055)**2.4:i/12.92;let n=t*.4124+r*.3576+i*.1805,a=t*.2126+r*.7152+i*.0722,s=t*.0193+r*.1192+i*.9505;return[n*100,a*100,s*100]};S.rgb.lab=function(e){let t=S.rgb.xyz(e),r=t[0],i=t[1],n=t[2];r/=95.047,i/=100,n/=108.883,r=r>.008856?r**(1/3):7.787*r+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,n=n>.008856?n**(1/3):7.787*n+16/116;let a=116*i-16,s=500*(r-i),l=200*(i-n);return[a,s,l]};S.hsl.rgb=function(e){let t=e[0]/360,r=e[1]/100,i=e[2]/100,n,a,s;if(r===0)return s=i*255,[s,s,s];i<.5?n=i*(1+r):n=i+r-i*r;let l=2*i-n,h=[0,0,0];for(let u=0;u<3;u++)a=t+1/3*-(u-1),a<0&&a++,a>1&&a--,6*a<1?s=l+(n-l)*6*a:2*a<1?s=n:3*a<2?s=l+(n-l)*(2/3-a)*6:s=l,h[u]=s*255;return h};S.hsl.hsv=function(e){let t=e[0],r=e[1]/100,i=e[2]/100,n=r,a=Math.max(i,.01);i*=2,r*=i<=1?i:2-i,n*=a<=1?a:2-a;let s=(i+r)/2,l=i===0?2*n/(a+n):2*r/(i+r);return[t,l*100,s*100]};S.hsv.rgb=function(e){let t=e[0]/60,r=e[1]/100,i=e[2]/100,n=Math.floor(t)%6,a=t-Math.floor(t),s=255*i*(1-r),l=255*i*(1-r*a),h=255*i*(1-r*(1-a));switch(i*=255,n){case 0:return[i,h,s];case 1:return[l,i,s];case 2:return[s,i,h];case 3:return[s,l,i];case 4:return[h,s,i];case 5:return[i,s,l]}};S.hsv.hsl=function(e){let t=e[0],r=e[1]/100,i=e[2]/100,n=Math.max(i,.01),a,s;s=(2-r)*i;let l=(2-r)*n;return a=r*n,a/=l<=1?l:2-l,a=a||0,s/=2,[t,a*100,s*100]};S.hwb.rgb=function(e){let t=e[0]/360,r=e[1]/100,i=e[2]/100,n=r+i,a;n>1&&(r/=n,i/=n);let s=Math.floor(6*t),l=1-i;a=6*t-s,s&1&&(a=1-a);let h=r+a*(l-r),u,c,f;switch(s){default:case 6:case 0:u=l,c=h,f=r;break;case 1:u=h,c=l,f=r;break;case 2:u=r,c=l,f=h;break;case 3:u=r,c=h,f=l;break;case 4:u=h,c=r,f=l;break;case 5:u=l,c=r,f=h;break}return[u*255,c*255,f*255]};S.cmyk.rgb=function(e){let t=e[0]/100,r=e[1]/100,i=e[2]/100,n=e[3]/100,a=1-Math.min(1,t*(1-n)+n),s=1-Math.min(1,r*(1-n)+n),l=1-Math.min(1,i*(1-n)+n);return[a*255,s*255,l*255]};S.xyz.rgb=function(e){let t=e[0]/100,r=e[1]/100,i=e[2]/100,n,a,s;return n=t*3.2406+r*-1.5372+i*-.4986,a=t*-.9689+r*1.8758+i*.0415,s=t*.0557+r*-.204+i*1.057,n=n>.0031308?1.055*n**(1/2.4)-.055:n*12.92,a=a>.0031308?1.055*a**(1/2.4)-.055:a*12.92,s=s>.0031308?1.055*s**(1/2.4)-.055:s*12.92,n=Math.min(Math.max(0,n),1),a=Math.min(Math.max(0,a),1),s=Math.min(Math.max(0,s),1),[n*255,a*255,s*255]};S.xyz.lab=function(e){let t=e[0],r=e[1],i=e[2];t/=95.047,r/=100,i/=108.883,t=t>.008856?t**(1/3):7.787*t+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,i=i>.008856?i**(1/3):7.787*i+16/116;let n=116*r-16,a=500*(t-r),s=200*(r-i);return[n,a,s]};S.lab.xyz=function(e){let t=e[0],r=e[1],i=e[2],n,a,s;a=(t+16)/116,n=r/500+a,s=a-i/200;let l=a**3,h=n**3,u=s**3;return a=l>.008856?l:(a-16/116)/7.787,n=h>.008856?h:(n-16/116)/7.787,s=u>.008856?u:(s-16/116)/7.787,n*=95.047,a*=100,s*=108.883,[n,a,s]};S.lab.lch=function(e){let t=e[0],r=e[1],i=e[2],n;n=Math.atan2(i,r)*360/2/Math.PI,n<0&&(n+=360);let s=Math.sqrt(r*r+i*i);return[t,s,n]};S.lch.lab=function(e){let t=e[0],r=e[1],n=e[2]/360*2*Math.PI,a=r*Math.cos(n),s=r*Math.sin(n);return[t,a,s]};S.rgb.ansi16=function(e,t=null){let[r,i,n]=e,a=t===null?S.rgb.hsv(e)[2]:t;if(a=Math.round(a/50),a===0)return 30;let s=30+(Math.round(n/255)<<2|Math.round(i/255)<<1|Math.round(r/255));return a===2&&(s+=60),s};S.hsv.ansi16=function(e){return S.rgb.ansi16(S.hsv.rgb(e),e[2])};S.rgb.ansi256=function(e){let t=e[0],r=e[1],i=e[2];return t===r&&r===i?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(r/255*5)+Math.round(i/255*5)};S.ansi16.rgb=function(e){let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];let r=(~~(e>50)+1)*.5,i=(t&1)*r*255,n=(t>>1&1)*r*255,a=(t>>2&1)*r*255;return[i,n,a]};S.ansi256.rgb=function(e){if(e>=232){let a=(e-232)*10+8;return[a,a,a]}e-=16;let t,r=Math.floor(e/36)/5*255,i=Math.floor((t=e%36)/6)/5*255,n=t%6/5*255;return[r,i,n]};S.rgb.hex=function(e){let r=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".substring(r.length)+r};S.hex.rgb=function(e){let t=e.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!t)return[0,0,0];let r=t[0];t[0].length===3&&(r=r.split("").map(l=>l+l).join(""));let i=parseInt(r,16),n=i>>16&255,a=i>>8&255,s=i&255;return[n,a,s]};S.rgb.hcg=function(e){let t=e[0]/255,r=e[1]/255,i=e[2]/255,n=Math.max(Math.max(t,r),i),a=Math.min(Math.min(t,r),i),s=n-a,l,h;return s<1?l=a/(1-s):l=0,s<=0?h=0:n===t?h=(r-i)/s%6:n===r?h=2+(i-t)/s:h=4+(t-r)/s,h/=6,h%=1,[h*360,s*100,l*100]};S.hsl.hcg=function(e){let t=e[1]/100,r=e[2]/100,i=r<.5?2*t*r:2*t*(1-r),n=0;return i<1&&(n=(r-.5*i)/(1-i)),[e[0],i*100,n*100]};S.hsv.hcg=function(e){let t=e[1]/100,r=e[2]/100,i=t*r,n=0;return i<1&&(n=(r-i)/(1-i)),[e[0],i*100,n*100]};S.hcg.rgb=function(e){let t=e[0]/360,r=e[1]/100,i=e[2]/100;if(r===0)return[i*255,i*255,i*255];let n=[0,0,0],a=t%1*6,s=a%1,l=1-s,h=0;switch(Math.floor(a)){case 0:n[0]=1,n[1]=s,n[2]=0;break;case 1:n[0]=l,n[1]=1,n[2]=0;break;case 2:n[0]=0,n[1]=1,n[2]=s;break;case 3:n[0]=0,n[1]=l,n[2]=1;break;case 4:n[0]=s,n[1]=0,n[2]=1;break;default:n[0]=1,n[1]=0,n[2]=l}return h=(1-r)*i,[(r*n[0]+h)*255,(r*n[1]+h)*255,(r*n[2]+h)*255]};S.hcg.hsv=function(e){let t=e[1]/100,r=e[2]/100,i=t+r*(1-t),n=0;return i>0&&(n=t/i),[e[0],n*100,i*100]};S.hcg.hsl=function(e){let t=e[1]/100,i=e[2]/100*(1-t)+.5*t,n=0;return i>0&&i<.5?n=t/(2*i):i>=.5&&i<1&&(n=t/(2*(1-i))),[e[0],n*100,i*100]};S.hcg.hwb=function(e){let t=e[1]/100,r=e[2]/100,i=t+r*(1-t);return[e[0],(i-t)*100,(1-i)*100]};S.hwb.hcg=function(e){let t=e[1]/100,i=1-e[2]/100,n=i-t,a=0;return n<1&&(a=(i-n)/(1-n)),[e[0],n*100,a*100]};S.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};S.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};S.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};S.gray.hsl=function(e){return[0,0,e[0]]};S.gray.hsv=S.gray.hsl;S.gray.hwb=function(e){return[0,100,e[0]]};S.gray.cmyk=function(e){return[0,0,0,e[0]]};S.gray.lab=function(e){return[e[0],0,0]};S.gray.hex=function(e){let t=Math.round(e[0]/100*255)&255,i=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".substring(i.length)+i};S.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]}});var hp=D((cE,cp)=>{var ia=rl();function qy(){let e={},t=Object.keys(ia);for(let r=t.length,i=0;i<r;i++)e[t[i]]={distance:-1,parent:null};return e}o(qy,"buildGraph");function jy(e){let t=qy(),r=[e];for(t[e].distance=0;r.length;){let i=r.pop(),n=Object.keys(ia[i]);for(let a=n.length,s=0;s<a;s++){let l=n[s],h=t[l];h.distance===-1&&(h.distance=t[i].distance+1,h.parent=i,r.unshift(l))}}return t}o(jy,"deriveBFS");function zy(e,t){return function(r){return t(e(r))}}o(zy,"link");function Hy(e,t){let r=[t[e].parent,e],i=ia[t[e].parent][e],n=t[e].parent;for(;t[n].parent;)r.unshift(t[n].parent),i=zy(ia[t[n].parent][n],i),n=t[n].parent;return i.conversion=r,i}o(Hy,"wrapConversion");cp.exports=function(e){let t=jy(e),r={},i=Object.keys(t);for(let n=i.length,a=0;a<n;a++){let s=i[a];t[s].parent!==null&&(r[s]=Hy(s,t))}return r}});var dp=D((fE,fp)=>{var il=rl(),Gy=hp(),Tr={},$y=Object.keys(il);function Vy(e){let t=o(function(...r){let i=r[0];return i==null?i:(i.length>1&&(r=i),e(r))},"wrappedFn");return"conversion"in e&&(t.conversion=e.conversion),t}o(Vy,"wrapRaw");function Zy(e){let t=o(function(...r){let i=r[0];if(i==null)return i;i.length>1&&(r=i);let n=e(r);if(typeof n=="object")for(let a=n.length,s=0;s<a;s++)n[s]=Math.round(n[s]);return n},"wrappedFn");return"conversion"in e&&(t.conversion=e.conversion),t}o(Zy,"wrapRounded");$y.forEach(e=>{Tr[e]={},Object.defineProperty(Tr[e],"channels",{value:il[e].channels}),Object.defineProperty(Tr[e],"labels",{value:il[e].labels});let t=Gy(e);Object.keys(t).forEach(i=>{let n=t[i];Tr[e][i]=Zy(n),Tr[e][i].raw=Vy(n)})});fp.exports=Tr});var yp=D((pE,vp)=>{"use strict";var pp=o((e,t)=>(...r)=>`\x1B[${e(...r)+t}m`,"wrapAnsi16"),gp=o((e,t)=>(...r)=>{let i=e(...r);return`\x1B[${38+t};5;${i}m`},"wrapAnsi256"),mp=o((e,t)=>(...r)=>{let i=e(...r);return`\x1B[${38+t};2;${i[0]};${i[1]};${i[2]}m`},"wrapAnsi16m"),na=o(e=>e,"ansi2ansi"),Dp=o((e,t,r)=>[e,t,r],"rgb2rgb"),Pr=o((e,t,r)=>{Object.defineProperty(e,t,{get:o(()=>{let i=r();return Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0}),i},"get"),enumerable:!0,configurable:!0})},"setLazyProperty"),nl,Rr=o((e,t,r,i)=>{nl===void 0&&(nl=dp());let n=i?10:0,a={};for(let[s,l]of Object.entries(nl)){let h=s==="ansi16"?"ansi":s;s===t?a[h]=e(r,n):typeof l=="object"&&(a[h]=e(l[t],n))}return a},"makeDynamicStyles");function Ky(){let e=new Map,t={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};t.color.gray=t.color.blackBright,t.bgColor.bgGray=t.bgColor.bgBlackBright,t.color.grey=t.color.blackBright,t.bgColor.bgGrey=t.bgColor.bgBlackBright;for(let[r,i]of Object.entries(t)){for(let[n,a]of Object.entries(i))t[n]={open:`\x1B[${a[0]}m`,close:`\x1B[${a[1]}m`},i[n]=t[n],e.set(a[0],a[1]);Object.defineProperty(t,r,{value:i,enumerable:!1})}return Object.defineProperty(t,"codes",{value:e,enumerable:!1}),t.color.close="\x1B[39m",t.bgColor.close="\x1B[49m",Pr(t.color,"ansi",()=>Rr(pp,"ansi16",na,!1)),Pr(t.color,"ansi256",()=>Rr(gp,"ansi256",na,!1)),Pr(t.color,"ansi16m",()=>Rr(mp,"rgb",Dp,!1)),Pr(t.bgColor,"ansi",()=>Rr(pp,"ansi16",na,!0)),Pr(t.bgColor,"ansi256",()=>Rr(gp,"ansi256",na,!0)),Pr(t.bgColor,"ansi16m",()=>Rr(mp,"rgb",Dp,!0)),t}o(Ky,"assembleStyles");Object.defineProperty(vp,"exports",{enumerable:!0,get:Ky})});var Cp=D((mE,bp)=>{"use strict";var Ri=ap(),Jy=ra(),Yy=yp(),ol=new Set(["\x1B","\x9B"]),Xy=39,wp=o(e=>`${ol.values().next().value}[${e}m`,"wrapAnsi"),Qy=o(e=>e.split(" ").map(t=>Ri(t)),"wordLengths"),al=o((e,t,r)=>{let i=[...t],n=!1,a=Ri(Jy(e[e.length-1]));for(let[s,l]of i.entries()){let h=Ri(l);if(a+h<=r?e[e.length-1]+=l:(e.push(l),a=0),ol.has(l))n=!0;else if(n&&l==="m"){n=!1;continue}n||(a+=h,a===r&&s<i.length-1&&(e.push(""),a=0))}!a&&e[e.length-1].length>0&&e.length>1&&(e[e.length-2]+=e.pop())},"wrapWord"),ew=o(e=>{let t=e.split(" "),r=t.length;for(;r>0&&!(Ri(t[r-1])>0);)r--;return r===t.length?e:t.slice(0,r).join(" ")+t.slice(r).join("")},"stringVisibleTrimSpacesRight"),tw=o((e,t,r={})=>{if(r.trim!==!1&&e.trim()==="")return"";let i="",n="",a,s=Qy(e),l=[""];for(let[h,u]of e.split(" ").entries()){r.trim!==!1&&(l[l.length-1]=l[l.length-1].trimLeft());let c=Ri(l[l.length-1]);if(h!==0&&(c>=t&&(r.wordWrap===!1||r.trim===!1)&&(l.push(""),c=0),(c>0||r.trim===!1)&&(l[l.length-1]+=" ",c++)),r.hard&&s[h]>t){let f=t-c,d=1+Math.floor((s[h]-f-1)/t);Math.floor((s[h]-1)/t)<d&&l.push(""),al(l,u,t);continue}if(c+s[h]>t&&c>0&&s[h]>0){if(r.wordWrap===!1&&c<t){al(l,u,t);continue}l.push("")}if(c+s[h]>t&&r.wordWrap===!1){al(l,u,t);continue}l[l.length-1]+=u}r.trim!==!1&&(l=l.map(ew)),i=l.join(`
`);for(let[h,u]of[...i].entries()){if(n+=u,ol.has(u)){let f=parseFloat(/\d[^m]*/.exec(i.slice(h,h+4)));a=f===Xy?null:f}let c=Yy.codes.get(Number(a));a&&c&&(i[h+1]===`
`?n+=wp(c):u===`
`&&(n+=wp(a)))}return n},"exec");bp.exports=(e,t,r)=>String(e).normalize().replace(/\r\n/g,`
`).split(`
`).map(i=>tw(i,t,r)).join(`
`)});var Ap=D((RE,_p)=>{var nw=require("stream"),Ir,Ve,oa,sa,ul=class ul extends nw{constructor(r={}){super(r);we(this,Ve);we(this,Ir,null);this.writable=this.readable=!0,this.muted=!1,this.on("pipe",this._onpipe),this.replace=r.replace,this._prompt=r.prompt||null,this._hadControl=!1}get isTTY(){return T(this,Ir)!==null?T(this,Ir):Ue(this,Ve,oa).call(this,"isTTY",!1)}set isTTY(r){Ze(this,Ir,r)}get rows(){return Ue(this,Ve,oa).call(this,"rows")}get columns(){return Ue(this,Ve,oa).call(this,"columns")}mute(){this.muted=!0}unmute(){this.muted=!1}_onpipe(r){this._src=r}pipe(r,i){return this._dest=r,super.pipe(r,i)}pause(){if(this._src)return this._src.pause()}resume(){if(this._src)return this._src.resume()}write(r){if(this.muted){if(!this.replace)return!0;if(r.match(/^\u001b/))return r.indexOf(this._prompt)===0&&(r=r.slice(this._prompt.length),r=r.replace(/./g,this.replace),r=this._prompt+r),this._hadControl=!0,this.emit("data",r);this._prompt&&this._hadControl&&r.indexOf(this._prompt)===0&&(this._hadControl=!1,this.emit("data",this._prompt),r=r.slice(this._prompt.length)),r=r.toString().replace(/./g,this.replace)}this.emit("data",r)}end(r){this.muted&&(r&&this.replace?r=r.toString().replace(/./g,this.replace):r=null),r&&this.emit("data",r),this.emit("end")}destroy(...r){return Ue(this,Ve,sa).call(this,"destroy",...r)}destroySoon(...r){return Ue(this,Ve,sa).call(this,"destroySoon",...r)}close(...r){return Ue(this,Ve,sa).call(this,"close",...r)}};Ir=new WeakMap,Ve=new WeakSet,oa=o(function(r,i){return this._dest?this._dest[r]:this._src?this._src[r]:i},"#destSrc"),sa=o(function(r,...i){var n,a;typeof((n=this._dest)==null?void 0:n[r])=="function"&&this._dest[r](...i),typeof((a=this._src)==null?void 0:a[r])=="function"&&this._src[r](...i)},"#proxy"),o(ul,"MuteStream");var ll=ul;_p.exports=ll});var bl=D((WE,wl)=>{"use strict";var M=wl.exports;wl.exports.default=M;var U="\x1B[",Mi="\x1B]",Or="\x07",ha=";",Ip=process.env.TERM_PROGRAM==="Apple_Terminal";M.cursorTo=(e,t)=>{if(typeof e!="number")throw new TypeError("The `x` argument is required");return typeof t!="number"?U+(e+1)+"G":U+(t+1)+";"+(e+1)+"H"};M.cursorMove=(e,t)=>{if(typeof e!="number")throw new TypeError("The `x` argument is required");let r="";return e<0?r+=U+-e+"D":e>0&&(r+=U+e+"C"),t<0?r+=U+-t+"A":t>0&&(r+=U+t+"B"),r};M.cursorUp=(e=1)=>U+e+"A";M.cursorDown=(e=1)=>U+e+"B";M.cursorForward=(e=1)=>U+e+"C";M.cursorBackward=(e=1)=>U+e+"D";M.cursorLeft=U+"G";M.cursorSavePosition=Ip?"\x1B7":U+"s";M.cursorRestorePosition=Ip?"\x1B8":U+"u";M.cursorGetPosition=U+"6n";M.cursorNextLine=U+"E";M.cursorPrevLine=U+"F";M.cursorHide=U+"?25l";M.cursorShow=U+"?25h";M.eraseLines=e=>{let t="";for(let r=0;r<e;r++)t+=M.eraseLine+(r<e-1?M.cursorUp():"");return e&&(t+=M.cursorLeft),t};M.eraseEndLine=U+"K";M.eraseStartLine=U+"1K";M.eraseLine=U+"2K";M.eraseDown=U+"J";M.eraseUp=U+"1J";M.eraseScreen=U+"2J";M.scrollUp=U+"S";M.scrollDown=U+"T";M.clearScreen="\x1Bc";M.clearTerminal=process.platform==="win32"?`${M.eraseScreen}${U}0f`:`${M.eraseScreen}${U}3J${U}H`;M.beep=Or;M.link=(e,t)=>[Mi,"8",ha,ha,t,Or,e,Mi,"8",ha,ha,Or].join("");M.image=(e,t={})=>{let r=`${Mi}1337;File=inline=1`;return t.width&&(r+=`;width=${t.width}`),t.height&&(r+=`;height=${t.height}`),t.preserveAspectRatio===!1&&(r+=";preserveAspectRatio=0"),r+":"+e.toString("base64")+Or};M.iTerm={setCwd:o((e=process.cwd())=>`${Mi}50;CurrentDir=${e}${Or}`,"setCwd"),annotation:o((e,t={})=>{let r=`${Mi}1337;`,i=typeof t.x<"u",n=typeof t.y<"u";if((i||n)&&!(i&&n&&typeof t.length<"u"))throw new Error("`x`, `y` and `length` must be defined when `x` or `y` is defined");return e=e.replace(/\|/g,""),r+=t.isHidden?"AddHiddenAnnotation=":"AddAnnotation=",t.length>0?r+=(i?[e,t.length,t.x,t.y]:[t.length,e]).join("|"):r+=e,r+Or},"annotation")}});var Vv=require("@playwright/test");var Hi="checksum";var Nr=X(require("path"));var B=o(e=>new Promise(t=>setTimeout(t,e)),"awaitSleep"),oe=o(async(e,t=1e3,r="guardReturnTimedOut")=>{if(t===null)return e;let i="guard-timed-out",n=o(async()=>(await B(t+1e3),i),"guard"),a=await Promise.race([e,n()]);if(typeof a=="string"&&a===i)throw new Error(r);return a},"guardReturn");function Aa(e){return!!e&&!["navigation","keystroke","wait","get_more_items","custom_code"].includes(e)}o(Aa,"isActionOnElement");function $l(e){return{click:"click",fill:"input",click_and_type:"click_and_type",clear_and_type:"clear_and_type",double_click:"double_click",drag_and_drop:"drag_and_drop",upload_files:"upload_files",hover:"hover",navigate:"navigation",keystroke:"keystroke",selectoption:"selectoption",reset:void 0,save:void 0,fail:void 0,wait:void 0,finish:void 0,dismiss_modal:void 0,vision_help:void 0,get_more_items:void 0,switch_tab:"switch_tab",expand_interactable_elements:void 0,approve_release:void 0}[e]}o($l,"getActionEventCode");var Vl=o((e,t,r)=>{if(!t)return e;if(!r||!r.length)return e.locator(t);let i=e.frameLocator(r[0]);for(let n of r.slice(1))i=i.frameLocator(n);return i.locator(t)},"makeLocator");function Ta(){return process.env.CHECKSUM_ROOT_FOLDER?process.env.CHECKSUM_ROOT_FOLDER:Nr.join(__dirname,"..","..","..","checksum")}o(Ta,"checksumFolder");function Zl({isInit:e,excludeLogin:t}){return[...e?["example.checksum.spec.ts","github-actions.example.yml"]:[],...t?[]:["login.ts"],"checksum.config.ts","playwright.config.ts","README.md",".gitignore.example"]}o(Zl,"getRuntimeFiles");var Sw={generateSelectionData:!1,navigationTimeout:30*1e3,actionTimeout:5*1e3};var sg=require("jsdom");var Zv=X(Nn());var jv=250,bs=class bs{constructor(t,r){this.timeMachineable=t;this.initMethod=r;this.numberOfReceivedRrwebEventsIndex=0;this.syncTimeMachine=o(async()=>{try{let t;try{t=await this.timeMachineable.getRRwebEvents(this.numberOfReceivedRrwebEventsIndex)}catch{return}if(!t||t.length===0)return;try{await this.timeMachineable.getTimeMachinePage().evaluate(({events:r,len:i})=>window.checksum.timeMachine.handleEvents(r,i),{events:t,len:this.numberOfReceivedRrwebEventsIndex})}catch{return}this.numberOfReceivedRrwebEventsIndex+=t.length}finally{this.syncTimeout=setTimeout(this.syncTimeMachine,jv)}},"syncTimeMachine")}async start(t=!1){var r;await((r=this.initMethod)==null?void 0:r.call(this,t)),this.syncTimeMachine()}async stop(){clearTimeout(this.syncTimeout)}async disableEventsHandling(){await this.setShouldHandleEvents(!1)}async enableEventsHandling(){await this.setShouldHandleEvents(!0)}async setShouldHandleEvents(t){try{await this.timeMachineable.getTimeMachinePage().evaluate(r=>window.checksum.timeMachine.setShouldHandleEvents(r),t)}catch{}}};o(bs,"TimeMachineSync");var Ci=bs;var ud=require("path"),cd=require("fs");var Hv=!0,Cs=class Cs{constructor(t,r,i,n,a,s){this.evaluateWithChecksum=t;this.getPage=r;this.getTimeMachinePage=i;this.logger=n;this.options=a;this.loginFunction=s;this.newPagesIds=[];this.performFileUploadAction=o(async(t,r)=>{if(!await t.evaluate(n=>n.tagName==="INPUT"&&n.getAttribute("type")==="file"))throw new Error("File upload action performed on non-file input element");let i=r.files.map(n=>(0,ud.join)(this.options.testAssetsDir,n)).filter(n=>(0,cd.existsSync)(n)?!0:(this.logger.log(`Upload file not found: ${n}. Filtering out.`),!1));if(!i.length)throw new Error("No files to upload");await this.actionGuardReturn(t.setInputFiles(i),"Set input files timeout")},"performFileUploadAction");this.getSelectionDataForAction=o(async(t,r)=>t.checksumid?this.getSelectionDataForChecksumId(t.checksumid,r):t.position?await this.evaluateWithChecksum(async([i,n])=>window.checksum.testGenerator.getSelectorByPosition(i,n),[t.position.x,t.position.y]):t.selector?{selector:t.selector,locator:`locator("${t.selector}")`}:{selector:"",locator:""},"getSelectionDataForAction")}init(){let t=this.getPage();t.on("filechooser",async r=>{this.logger.log("File chooser event detected"),this.fileChooser=r}),t.context().on("page",r=>{this.newPagesIds.push(r._guid)})}getOpenedFileChooser(){if(this.fileChooser){let t=this.fileChooser;return this.fileChooser=void 0,t}return null}async handleFileChooserEvent(t=[]){let r=this.getOpenedFileChooser();if(!r)return{};let i="fc_"+Math.random().toString(36).slice(2,4);return await this.evaluateWithChecksum(async([n,a])=>{window.checksum.testGenerator.addForceIncludeElement(a,n)},[i,r.element()]),{interruptionEvent:"fileUploadOpenedEvent",payload:{checksumid:i,customFiles:t}}}async addMoreItemsToDom(t,r){let i=t.querySelector(`[checksum-get-more-items='${r}']`);if(!i)throw new Error("Get more items root not found");let{items:n,hasMoreItems:a}=await this.getMoreItemsForTemplate(r);i.innerHTML=i.innerHTML+n,a||i.removeAttribute("checksum-get-more-items")}async getPageInfo(t){return{id:t._guid,url:t.url(),title:await t.title(),new:this.newPagesIds.includes(t._guid),active:t._guid===this.getPage()._guid}}async getTabsInfo(){let t=(await Promise.all(this.getPage().context().pages().map(r=>this.getPageInfo(r)))).filter(r=>{var i;return r.id!==((i=this.getTimeMachinePage())==null?void 0:i._guid)});return this.newPagesIds=[],t}async getSelectionDataFromSelectorGenerator(t,r,i={}){if(i={useCompoundSelector:!0,useCSSExtraction:!0,useVariables:!0,...i},!t||!Aa($l(r.action.type))||!r.action.checksumid)return{};let n=await t.generateSelectionForAction(r,i);return n?{locator:`locator("${n.selector}")`,...n}:{}}async translateActionResponseToAgentPotentialAction(t,r=void 0,{pageId:i,makeStaticMetadataForESRA:n}={}){let a=structuredClone(t.actionHiddenOverride??t.action),{selector:s,selectorWithVars:l,locator:h,locatorWithVars:u,clickOffset:c,selectOptionValue:f,compoundSelector:d,alternateSelectors:p,parentFramesSelectors:C}={...await this.getSelectionDataForAction(a,t.actionHiddenOverride),...await this.getSelectionDataFromSelectorGenerator(r,t)},v=await this.getESRAForSelector(s,C,n);if(!v&&s&&this.logger.logError("Error getting ESRA metadata"),(v==null?void 0:v.tag)==="select")switch(this.getActionEventCode(a.type)){case"input":a.type="selectoption";break;case"click":f&&(a.type="selectoption",a.value=f);break}let y={eventCode:this.getActionEventCode(a.type),selector:s,selectorWithVars:l,parentFramesSelectors:C,locator:h,locatorWithVars:u,clickOffset:c,pageId:i,compoundSelector:d,alternateSelectors:p,fillValue:a.value,fillValueName:a.valueName?`variablesStore.${a.valueName}`:"",variables:t.variables,getMoreItemsId:a.getMoreItemsId,esraMetadata:v,description:t.thought,userRole:a.userRole};switch(y.eventCode){case"drag_and_drop":{let{selector:m,selectorWithVars:b,locator:k,locatorWithVars:w,parentFramesSelectors:g}={...await this.getSelectionDataForAction({type:t.action.type,checksumid:t.action.dropTargetChecksumid}),...await this.getSelectionDataFromSelectorGenerator(r,{...t,action:{type:t.action.type,checksumid:t.action.dropTargetChecksumid}},{useCompoundSelector:!1})};y.dropTarget={selector:m,selectorWithVars:b,locator:k,locatorWithVars:w,parentFramesSelectors:g,esraMetadata:await this.getESRAForSelector(m,g,n)}}break;case"upload_files":y.files=this.mapFileMIMETypeToFilename(a.files);break;case"switch_tab":y.switchToTab={id:a.tabId,index:this.getPage().context().pages().findIndex(m=>m._guid===a.tabId)};break;case"keystroke":y.fillValue=a.value}return y}async reauthenticate(t){this.loginFunction&&(await Promise.all([this.getPage().context().clearCookies(),this.getPage().evaluate(()=>localStorage.clear())]),await this.loginFunction(this.getPage(),{role:t}))}mapFileMIMETypeToFilename(t){return t.map(r=>{if(r.fileName)return r.fileName;switch(r.mimeType){case"image/png":return"image_200x200.png";case"image/jpeg":return"image_200x200.jpg";case"application/pdf":return"document.pdf";case"text/csv":return"data.csv";default:return"file.txt"}})}async performAction(t,{handleActionFailed:r,monitorFlashingHTML:i=!0}={}){try{if(t.executed){this.logger.log("[performAction] Action marked as executed, skipping...");return}if(Aa(t.eventCode)&&!t.selector)throw new Error("No selector provided for action. Try changing app rules preMapReducedHTMLSelectors to true");i&&(this.logger.log("starting flashing elements detection"),await this.evaluateWithChecksum(async()=>window.checksum.testGenerator.startFlashingElementsDetection())),this.logger.log(`Performing action: ${t.eventCode}. Selector: ${t.selector}, Position: ${t.clickOffset}, Parent frame: ${t.parentFramesSelectors}`);let n=o(()=>this.makeLocator(t.selector,t.parentFramesSelectors),"getLocator");switch(t.eventCode){case"click":try{await this.actionGuardReturn(n().click({position:t.clickOffset}),"Click timeout")}catch(l){this.logger.log("Error performing click, will attempt a force click",l),t.force=!0,await this.actionGuardReturn(n().click({position:t.clickOffset,force:!0}),"Click timeout")}break;case"double_click":try{await this.actionGuardReturn(n().dblclick({position:t.clickOffset}),"DoubleClick timeout")}catch(l){this.logger.log("Error performing double click, will attempt a force double click",l),t.force=!0,await this.actionGuardReturn(n().dblclick({position:t.clickOffset,force:!0}),"Click timeout")}break;case"check":await this.actionGuardReturn(n().check(),"Check timeout");break;case"uncheck":await this.actionGuardReturn(n().uncheck(),"UnCheck timeout");break;case"drag_and_drop":await this.actionGuardReturn(n().dragTo(this.makeLocator(t.dropTarget.selector,t.dropTarget.parentFramesSelectors)),"DragAndDrop timeout");break;case"input":await this.actionGuardReturn(n().fill(this.getActionFillValue(t)),"Fill timeout");break;case"click_and_type":await oe(n().click({position:t.clickOffset}),1e4,"Click before type timeout"),await oe(n().pressSequentially(this.getActionFillValue(t)),1e4,"pressSequentially timeout");break;case"clear_and_type":await oe(n().clear(),1e4,"Clear before type timeout"),await oe(n().pressSequentially(this.getActionFillValue(t)),1e4,"pressSequentially timeout");break;case"selectoption":await this.actionGuardReturn(n().selectOption(this.getActionFillValue(t)),"SelectOption timeout");break;case"hover":await this.actionGuardReturn(n().hover(),"Hover timeout");break;case"navigation":await this.actionGuardReturn(this.getPage().goto(t.fillValue),"Navigation timeout",!0);break;case"keystroke":await this.actionGuardReturn(this.getPage().keyboard.press(t.fillValue),"Keystroke timeout");break;case"upload_files":await this.performFileUploadAction(n(),t);break;case"wait":await B(this.options.waitActionDelay??1e3);break;case"custom_code":let a=`async (page) => {${t.fillValue}}`;await(0,eval)(a)(this.getPage());break;case"logout_and_login":await this.reauthenticate(t.userRole);break}}catch(n){throw this.logger.log(`Error performing action: ${t.eventCode}, will attempt a correction template`,n),await(r==null?void 0:r()),new Error("Failed performing action")}this.logger.log(`Successfully performed action ${t.eventCode} with description "${t.description}"`)}getActionFillValue(t,r=!0){let i=t.fillValue;if(!i){let n=t.selector.match(/(?<=value.*)('|").*/);n&&(i=n[0].slice(1,-1))}return typeof i!="string"&&(i="X"),r&&(t.fillValue=i),i}actionGuardReturn(t,r,i=!1){return oe(t,i?this.options.navigationTimeout:this.options.actionTimeout,r)}makeLocator(t,r){return Vl(this.getPage(),t,r)}getCurrentURL(){return this.getPage().url()}async getSelectionDataForChecksumId(t,r){if(r!=null&&r.selector)return{...r,selector:r.selector,clickOffset:r.position};if(!t)return this.logger.log(`[getSelectionDataForChecksumId] checksumid not provided (${t})`),{...r,selector:t};let i=await this.evaluateWithChecksum(async n=>{let{selector:a,locator:s,clickOffset:l,parentFramesSelectors:h,invalid:u,rrwebId:c}=await window.checksum.testGenerator.getSelectorForChecksumId(n),f=await window.checksum.testGenerator.getElementForChecksumId(n),d=f instanceof HTMLOptionElement&&f.value?f.value:void 0;return{selector:a,locator:s,clickOffset:l,selectOptionValue:d,parentFramesSelectors:h,invalid:u,rrwebId:c}},t);if(Hv&&i.invalid&&i.rrwebId){this.logger.log(`[getSelectionDataForChecksumId] Could not get selector for checksumid: ${t}. Trying to use time machine...`);try{let n=await this.getSelectionDataForRRwebIdAtReduceHTMLTime(i.rrwebId);i={...i,...n}}catch{this.logger.log(`[getSelectionDataForChecksumId] error using time machine to get selector for checksumid: ${t}`)}this.logger.log(`[getSelectionDataForChecksumId] got selector: ${i.selector} for checksumid: ${t} from time machine`)}return i!=null&&i.selector||this.logger.log(`[getSelectionDataForChecksumId] Could not get selector for checksumid: ${t}. If checksumid is correct, try to change app rules preMapReducedHTMLSelectors to true`),i}async getSelectionDataForRRwebIdAtReduceHTMLTime(t){if(!this.rrwebEventAtLastReducedHTML)return;let r=this.getTimeMachinePage();if(r)return r.evaluate(async({rrwebId:i,timestamp:n})=>{await window.checksum.timeMachine.goBack(n);let a=await window.checksum.testGenerator.getInspectedElementSelectionResultByRRwebId(i,{fromTimeMachine:!0});return await window.checksum.timeMachine.goLive(),a},{rrwebId:t,timestamp:this.rrwebEventAtLastReducedHTML.timestamp})}async getESRAForSelector(t,r,i){let n=await this.evaluateWithChecksum(async({selector:a,parentFramesSelectors:s})=>window.checksum.testGenerator.getSelectionDataForSelector(a,s),{selector:t,parentFramesSelectors:r});return n!=null&&n.esraMetadata&&i&&(n.esraMetadata.staticMetadata=await i(n.esraMetadata,t)),n==null?void 0:n.esraMetadata}async getMoreItemsForTemplate(t){return await this.evaluateWithChecksum(async r=>window.checksum.testGenerator.getMoreItemsForTemplate(r,{}),t)??{items:"",hasMoreItems:!1}}async getCurrentReducedHTML({retriesLeft:t=3,retryWaitMS:r=2e3,initialChecksumId:i="0",extractESRAForInterpretationRequiredElements:n=!1,stopFlashingElementsDetection:a=!1,assignChecksumIdsToAllElements:s}={}){let l=new Date;this.logger.log("[getCurrentReducedHTML] Fetching reduced HTML...");try{let{reducedHTML:h,currentChecksumId:u,flashingHTML:c,elementsForNodeInterpretation:f,lastRRwebEvent:d}=await this.evaluateWithChecksum(async C=>window.checksum.testGenerator.reduceHTML({},C),{initialChecksumId:i,extractESRAForInterpretationRequiredElements:n,stopFlashingElementsDetection:a,assignChecksumIdsToAllElements:s}),p=new Date;return this.logger.log(`[getCurrentReducedHTML] Fetched reduced HTML in ${p.getTime()-l.getTime()}ms`),this.rrwebEventAtLastReducedHTML=d,{reducedHTML:h,flashingHTML:c,elementsForNodeInterpretation:f,currentChecksumId:u}}catch(h){if(t>0)return this.logger.logError(`[getCurrentReducedHTML] Error: ${h.message}`),this.logger.logError(`Failed do obtain reduced HTML, trying again in ${r/1e3} seconds, ${t-1} to go.`),await B(r),this.getCurrentReducedHTML({retriesLeft:t-1,retryWaitMS:r});throw h}}getActionEventCode(t){return{click:"click",fill:"input",click_and_type:"click_and_type",clear_and_type:"clear_and_type",double_click:"double_click",drag_and_drop:"drag_and_drop",hover:"hover",navigate:"navigation",keystroke:"keystroke",selectoption:"selectoption",upload_files:"upload_files",wait:"wait",get_more_items:"get_more_items",reset:void 0,save:void 0,fail:void 0,finish:void 0,dismiss_modal:void 0,vision_help:void 0,switch_tab:"switch_tab",expand_interactable_elements:void 0,approve_release:void 0,logout_and_login:"logout_and_login"}[t]}exampleCustomCode(){function t(i){return new Promise(n=>setTimeout(n,i))}o(t,"sleep");async function r(){let i={foo:o(()=>{console.log("fooed")},"foo")};await(0,eval)('async (page) => {console.log("before foo"); await sleep(1000); page.foo();}')(i)}o(r,"doit"),(async()=>r())()}};o(Cs,"TestGenerationPageInteractor");var Ot=Cs;var C1=__dirname+"/checksumlib.js",k1=1e3*30;var hd=!1;function ks(e){hd=e}o(ks,"setLogToConsole");function Z(...e){hd&&console.log(...e)}o(Z,"log");function Kv(e,{role:t,environment:r}={},i=!1){var l,h;let n;r&&(n=(l=e.environments)==null?void 0:l.find(({name:u})=>r===u)),n||(n=(h=e.environments)==null?void 0:h.find(({default:u})=>u)),n||(n={baseURL:e.baseURL,default:!0,name:void 0});let a=(n==null?void 0:n.users)??e.users,s;if(a&&(t&&(s=a.find(u=>u.role===t)),s||(s=a.find(u=>u.default))),s||(s={role:void 0,username:e.username,password:e.password,default:!0}),r&&n.name!==r){if(i)throw new Error(`Could not find environment with name "${r}" in config file`);console.warn(`Could not find environment with name "${r}" in config file, trying to use default environment`)}if(t&&s.role!==t){if(i)throw new Error(`Could not find user with role "${t}" for environment "${r}" in config file`);console.warn(`Could not find user with role "${t}" for environment "${r}" in config file, trying to login with environment's default user`)}return{environment:n,user:s}}o(Kv,"resolveEnvironment");function xs(e){let{config:t,folder:r,throwIfAuthFailed:i}=e;try{let n=require(`${r??Ta()}/login.ts`).default;return async(a,{role:s,environment:l}={})=>{let h={username:t.username,password:t.password},{environment:u,user:c}=Kv(t,{role:s,environment:l});if(i&&!c)throw new Error("Could not find user credentials matching the provided role and/or environment");c&&(h.username=c.username,h.password=c.password);let f=o(()=>n(a,{...t,...h},{environment:u,user:c}),"performLogin");"checksumAI"in a?await a.checksumAI(`Log in${c!=null&&c.role?` using ${c.role} role`:""}${u!=null&&u.name?` in ${u.name} environment`:""}`,f):await f()}}catch(n){throw console.warn("Could not find checksum login file. Please create a login.ts file in your checksum folder"),n}}o(xs,"makeUnboundLogin");var Bd=require("path"),Fi=require("@playwright/test"),Ws=X(Ld());var Ns=class Ns{constructor(t){this.options=t;this.harData={methodIndex:{GET:0,POST:0,PUT:0,DELETE:0}};this.interceptors={recordHar:this.harInterceptor.bind(this),completeOriginHeader:this.completeOriginHeaderInterceptor.bind(this)};this.intercept=o(async(t,r,i)=>{let n=[],a=o(s=>{if(s)switch(s.type){case"abort":return t.abort(s.errorCode);case"fulfill":return t.fulfill(s.fulfillOptions);default:case"continue":n.push(s)}},"processResult");for(let[s,l]of Object.entries(this.interceptors))if(this.options[s]){let h=a(await l(t,r,i));if(h)return h}return this.applyContinueResults(t,n)},"intercept")}setOptions(t){this.options=t}mergeOptions(t){this.options={...this.options,...t}}applyContinueResults(t,r){let i=r.filter(a=>!!a),n={};return i.forEach(a=>{a.options&&(a.options.headers&&(n.headers={...n.headers,...a.options.headers}),a.options.method&&(n.method=a.options.method),a.options.postData&&(n.postData=a.options.postData),a.options.url&&(n.url=a.options.url))}),t.continue(n)}async harInterceptor(t){let r=t.request().headers(),i=t.request().method();return r["Checksum-Id"]=(++this.harData.methodIndex[i]).toString(),{options:{headers:r}}}async completeOriginHeaderInterceptor(t,r,{page:i}){let n=t.request().headers();if(!n.Origin){try{let a=new URL(i.url()).origin;n.Origin=a}catch{}return{options:{headers:n}}}}};o(Ns,"RouteInterceptors");var Hn=Ns;var qs=class qs{constructor(t={},r={}){this.browserConfig={devtools:!1,executablePath:process.env.PLAYWRIGHT_CHROMIUM_EXECUTABLE_PATH??void 0};this.options={fullScreenResolution:!1,defaultTimeout:3e4,defaultNavigationTimeout:3e4,disableWebSecurity:!0};this.navigationPromise={};this.contextClosePromise=void 0;this.eventListeners=[];this.lastSnapshot={selector:void 0,eventCode:void 0};this.snapshotTimeout=3e4;this.cacheScript=!1;this.pagesCounter=0;this.pagesIndexToGuid={};this.onRequestFinished=o(async t=>{try{let r=await t.response();if(!r.ok())return;let i=t.resourceType(),n=t.url(),a=o(async()=>{try{return await r.text()}catch{try{return await(await fetch(n)).text()}catch{return}}},"getBody");if(["document","script","stylesheet"].includes(i))try{let s=await a();if(!s)return;let l={url:n,source:s,type:i};await this.forEachEventListener(h=>{var u;return(u=h.onWebDriverResourceLoaded)==null?void 0:u.call(h,l)})}catch(s){console.error("[WebDriver] requestfinished event handler error",i,n,s)}}catch(r){console.error("[WebDriver] requestfinished event handler error",r)}},"onRequestFinished");this.onPage=o(async t=>{try{await(t==null?void 0:t.route("**/*",async(r,i)=>this.routeInterceptor.intercept(r,i,{page:t})))}catch(r){console.error("[WebDriver] onPage error",r)}},"onPage");this.onFrameNavigated=o(async t=>{let r=t.page();if(r.mainFrame()!==t)return;let i=o(async n=>{await this.forEachEventListener(a=>{var s;return(s=a.onWebDriverPageNavigated)==null?void 0:s.call(a,r,r.url(),n)})},"notifyFrameNavigated");await i(!1),this.navigationPromise[this.getGuid(r)]=new Promise(async n=>{await this.loadScript(r),await i(!0),n()})},"onFrameNavigated");this.navigatingPages={};this.tracing=!1;this.tracingChunk=!1;this.chunkIndex=0;var i;if(this.options={...this.options,...t},this.browserConfig={...this.browserConfig,...r},this.browserConfig.args||(this.browserConfig.args=[]),this.options.disableWebSecurity&&this.browserConfig.args.push("--disable-web-security"),this.browserConfig.args.push("--disable-site-isolation-trials"),this.browserConfig.args.push("--allow-running-insecure-content"),this.options.forceHeadless&&(this.browserConfig.headless=!0,this.browserConfig.devtools=!1),this.options.useProxy)if((i=this.options.webProxy)!=null&&i.server){console.log("[WebDriver] using proxy");let{server:n,username:a,password:s}=this.options.webProxy;this.browserConfig.proxy={server:n,username:a,password:s},this.browserConfig.args.push("--proxy-bypass-list=localhost,127.0.0.1")}else console.error("[WebDriver] useProxy=true but proxy not configured");this.routeInterceptor=new Hn({completeOriginHeader:this.options.completeOriginHeader,recordHar:this.options.recordHAR})}setOnScriptLoad(t){this.onScriptLoad=t}async prepare({storageState:t}={}){if(await this.shutdown(),this.options.useStealth){let i=require("puppeteer-extra-plugin-stealth");Ws.chromium.use(i()),this.browser=await Ws.chromium.launch(this.browserConfig)}else this.browser=await Fi.chromium.launch(this.browserConfig);let r={};return r.bypassCSP=!0,r.ignoreHTTPSErrors=!0,r.baseURL=this.options.baseURL,this.options.timezoneId&&(r.timezoneId=this.options.timezoneId),this.options.fullScreenResolution&&(r.viewport={width:1280,height:720}),t&&(r.storageState=t),this.context=await this.browser.newContext(r),this.options.defaultTimeout&&this.context.setDefaultTimeout(this.options.defaultTimeout),this.options.defaultNavigationTimeout&&this.context.setDefaultNavigationTimeout(this.options.defaultNavigationTimeout),this.pageInjectedScriptOptions=this.getPageInjectedScriptOptions(),this.context.on("page",i=>{this.onPage(i),this.onFrameNavigated(i.mainFrame()),i.on("framenavigated",this.onFrameNavigated)}),this.context.on("close",async()=>{this.contextClosePromise=this.forEachEventListener(i=>{var n;return(n=i.onWebDriverContextClose)==null?void 0:n.call(i)})}),this.activePage=await this.context.newPage(),this.originalPage=this.activePage,this.options.trackLoadedResources&&this.page.on("requestfinished",this.onRequestFinished),this.options.useCDPSession&&(this.cdpSession=await this.context.newCDPSession(this.page)),!0}getGuid(t){return t._guid}switchActivePage(t){let r=this.context.pages().find(i=>this.getGuid(i)===t);return!r||r.isClosed()?(console.error(`[WebDriver] Page with guid ${t} not found or has been closed.`),!1):(this.previousPage=this.activePage,this.activePage=r,!0)}getDefaultTimeout(){return this.options.defaultTimeout}getDefaultNavigationTimeout(){return this.options.defaultNavigationTimeout}async addHARMockAPIRecordings(t){if(!this.activePage){console.warn("[addHARMockAPIRecordings] Active page is not set, skipping HAR recording.");return}await this.activePage.routeFromHAR(t,{url:/^(?!.*\.(js|mjs|ts|jsx|tsx|css|jpg|jpeg|png|gif|svg|webp|heif|heic|raw|cr2|nef|arw|bmp|tiff|tif|ico|woff|woff2|ttf|otf|doc|docx|pdf|ws|wasm|mp3|wav|aac|flac|mp4|avi|mov|wmv|flv|zip|rar|7z|tar\.gz|xml|html|py|java|cpp|xls|xlsx|ppt|pptx|gif)$)/i,update:!0,updateMode:"minimal"})}forEachEventListener(t){return Promise.all(this.eventListeners.map(async r=>{try{await t(r)}catch(i){console.log("WebDriver/forEachEventListener exception",i)}}))}getPageInjectedScriptOptions(){switch(this.options.scriptSource){case"file":return this.options.scriptFile?{path:(0,Bd.join)(process.cwd(),this.options.scriptFile)}:void 0;case"url":return this.options.scriptURL?{url:this.options.scriptURL}:void 0;default:return}}registerEventListener(t){this.eventListeners.push(t)}async loadScript(t,{retriesLeft:r=3,retryWaitMS:i=2e3}={}){var s;if(!this.pageInjectedScriptOptions){console.warn("[WebDriver] Script options not set, skipping script load");return}if(t.isClosed())return;try{if(await t.waitForFunction(()=>!!window.checksum,void 0,{timeout:1e3}))return}catch{}if(t.isClosed())return;try{await t.addScriptTag(this.pageInjectedScriptOptions)}catch(l){if(r>0)return console.warn(`[WebDriver] Failed to add script, trying again in ${i/1e3} seconds, ${r-1} retries left.`,l),await B(i),this.loadScript(t,{retriesLeft:r-1,retryWaitMS:i});throw l}let n=this.getGuid(t),a=Date.now().toString(36)+Math.random().toString(36).substr(2);if(this.navigatingPages[n]=a,this.options.scriptInitWait&&(console.log(`Waiting ${this.options.scriptInitWait}[ms] before onScriptLoad...`),await B(this.options.scriptInitWait),console.log("Done waiting before onScriptLoad")),!t.isClosed()){if(this.navigatingPages[n]&&this.navigatingPages[n]!==a)return console.log("Page navigated again, waiting on new promise..."),this.navigationPromise[n];try{await((s=this.onScriptLoad)==null?void 0:s.call(this,t))}catch(l){console.error("[WebDriver] onScriptLoad error",l)}}}async getScript(){async function t(r){let{exec:i}=require("child_process");return new Promise((n,a)=>{i(r,s=>{s?(console.log("error executing cmd, ",s),a(s)):n()})})}switch(o(t,"execCmd"),this.options.scriptSource){case"file":return this.options.scriptFile;case"url":if(this.cacheScript)return this.options.scriptFile;try{return await t(`curl -o ${this.options.scriptFile} '${this.options.scriptURL}'`),this.options.scriptFile}catch(r){console.log("[web-driver] Failed fetching frontend script",r)}break}}async startJSCoverageTracking(){return await this.page.coverage.startJSCoverage(),[];return await this.cdpSession.send("Debugger.enable"),await this.cdpSession.send("Profiler.enable"),await this.cdpSession.send("Profiler.startPreciseCoverage",{callCount:!1,detailed:!0}),this.getCurrentJSCoverage()}stopJSCoverageTracking(){return this.page.coverage.stopJSCoverage()}async getCurrentJSCoverage(){let t=await this.page.coverage.stopJSCoverage();return await this.page.coverage.startJSCoverage(),t;return(await this.cdpSession.send("Profiler.takePreciseCoverage")).result}async startCSSCoverageTracking(){return await this.cdpSession.send("DOM.enable"),await this.cdpSession.send("CSS.enable"),await this.cdpSession.send("CSS.startRuleUsageTracking"),this.getCurrentCSSCoverage()}async getCurrentCSSCoverage(){return(await this.cdpSession.send("CSS.takeCoverageDelta")).coverage}getCDPSession(){return this.cdpSession}async navigate(t){return this.page.goto(t)}async setViewportSize(t,r){return this.page.setViewportSize({width:t,height:r})}async getStorageState(){return this.page.context().storageState()}async shutdown(){try{this.page&&(await this.page.close(),this.activePage=void 0),this.context&&(await this.context.close(),this.context=void 0),this.browser&&(await this.browser.close(),this.browser=void 0)}catch(t){console.warn("[WebDriver] shutdown error",t)}}async wrapWithBrowserLogs(t,{disabled:r=!1,onErrorOnly:i=!1}={}){if(r)return t();let n=[],a=o(h=>{n.push(h.text())},"log");this.page.on("console",a);let s,l;try{l=await t()}catch(h){s=h}if(this.page.off("console",a),(!i||s)&&console.log("browser console messages:",n),s)throw s;return l}async takeElementSnapshot(t,r,i={},n={}){if(t===this.lastSnapshot.selector&&r===this.lastSnapshot.eventCode)return{};if(!t)return{};try{let{snapshot:a,elementLocator:s}=await this.takeSnapshot(t,n,{frameLocatorSelector:i.frameLocatorSelector});return this.lastSnapshot={selector:t,eventCode:r},{snapshot:a,elementLocator:s}}catch(a){return console.error("takeElementSnapshot error",a),{}}}getScreenshotTimeout(t=!1){return t?this.snapshotTimeout:this.snapshotTimeout+5e3}async takePageSnapshot(t){let r=this.page.screenshot({...t,timeout:this.getScreenshotTimeout()});return await Promise.race([r,B(this.getScreenshotTimeout(!0))])}async takeSnapshot(t,r,{frameLocatorSelector:i}={}){let n=i?this.page.frameLocator(i).locator(t):this.page.locator(t),a=n.screenshot({...r,timeout:this.getScreenshotTimeout()});return{snapshot:await Promise.race([a,B(this.getScreenshotTimeout(!0))]),elementLocator:n}}async getCurrentURL(){return this.page.url()}async getClientScreenResolution(){return await this.page.evaluate(async()=>({width:window.screen.width,height:window.screen.height}))}async awaitContextClose(){return this.contextClosePromise||await B(100),this.contextClosePromise}get page(){return this.activePage}getPage(){return this.activePage}startPlaywrightTrace(){return this.tracing=!0,this.context.tracing.start({name:"trace",screenshots:!0,snapshots:!0})}startPlaywrightTraceChunk(){return this.tracingChunk=!0,this.context.tracing.startChunk({name:`trace-chunk-${this.chunkIndex}`})}stopPlaywrightTraceChunk(t){return this.tracingChunk=!1,this.context.tracing.stopChunk({path:`${t.replace(".zip",`.${this.chunkIndex++}.zip`)}`})}stopPlaywrightTrace(t){return this.tracing=!1,this.context.tracing.stop({path:t})}isTracing(){return this.tracing}isTracingChunk(){return this.tracingChunk}};o(qs,"WebDriver");var Gn=qs;var Sy={useCDPSession:!0,trackLoadedResources:!0},js=class js extends Gn{constructor(r={},i={devtools:!0},n={}){super({...Sy,...r},i);this.settings={frontendAppSpecificRules:void 0,initTestGenerator:!0,frontendTestGenerationConfig:void 0,useTimeMachine:!1};this.initTestGenerator=o(async r=>{let i={assertionGenerator:!0,sessionRecorder:!0};r===this.timeMachinePage&&(i.assertionGenerator=!1,i.sessionRecorder=!1);try{return await r.waitForFunction(()=>{var n;return!!((n=window.checksum)!=null&&n.testGenerator)}),r.evaluate(async({appSpecificRules:n,config:a,initModules:s})=>{window.checksum.testGenerator.init(n,a,s),n.hasGoals&&await window.checksum.goalTracker.init()},{appSpecificRules:this.settings.frontendAppSpecificRules,config:this.getFrontendTestGenerationConfig(),initModules:i})}catch(n){console.log("initTestGenerator exception",n)}},"initTestGenerator");this.settings={...this.settings,...n},this.settings.initTestGenerator&&this.setOnScriptLoad(this.initTestGenerator)}async prepare(r={}){let i=await super.prepare(r);return this.settings.loadScriptOnPrepare&&await this.loadScript(this.page),await this.page.addInitScript(()=>{window.sessionStorage.setItem("checksumai:disable","true")}),this.settings.useTimeMachine&&(this.timeMachinePage=await this.context.newPage(),await this.page.bringToFront(),await this.loadScript(this.timeMachinePage),await this.timeMachinePage.evaluate(()=>window.checksum.timeMachine.start({firstEventTimestamp:Date.now()}))),i}getTimeMachinePage(){return this.timeMachinePage}getFrontendTestGenerationConfig(){return this.settings.frontendTestGenerationConfig}async getBestMatchingElementSimilarityScore(r){return this.evaluateWithChecksum(async i=>await window.checksum.testGenerator.getBestMatchingElementSimilarityScore(i),r)}async getInteractableElements(){return this.evaluateWithChecksum(async()=>await window.checksum.testGenerator.getInteractableElements())}async getAllInteractableElementsForLastSelectQuery(){return this.evaluateWithChecksum(async()=>await window.checksum.testGenerator.getAllInteractableElementsForLastSelectQuery())}async evaluateWithChecksum(r,i){this.navigationPromise[this.getGuid(this.page)]&&await this.navigationPromise[this.getGuid(this.page)];try{return this.page.evaluate(r,i)}catch(n){throw console.error("evaluateWithChecksum error",n,r.toString()),n}}async overlayInteractableElementsWithChecksumId(r){return this.page.evaluate(i=>window.checksum.testGenerator.overlayInteractableElementsWithChecksumId(i),r)}async postRRwebEvents(r){return this.page.evaluate(i=>window.checksum.testGenerator.postRRwebEvents(i),r)}async getRRwebEvents(r=0){return this.evaluateWithChecksum(async({index:i})=>window.checksum.testGenerator.getRRwebEvents(i),{index:r})}async getGoals(){return await this.evaluateWithChecksum(async()=>window.checksum.goalTracker.getGoals())}async takeElementSnapshot(r,i,n={},a={}){try{let{snapshot:s,elementLocator:l}=await super.takeElementSnapshot(r,i,n);if(!s||!n.takeBodyScreenshot)return s?{snapshot:s}:{};await this.highlightElementByLocator(l,n.mousePosition);let h=await this.takePageSnapshot(a);return await this.clearHighlights(),{snapshot:s,bodySnapshot:h}}catch(s){return console.error("[ChecksumWebDriver] takeElementSnapshot error",s),{}}}async highlightElementByLocator(r,i,n="20px solid rgba(255,0,0,1)"){return this.evaluateWithChecksum(async([a,s,l])=>{window.checksum.testGenerator.highlightElement(a,{highlightStyle:{outline:s},mousePosition:l})},[await r.elementHandle(),n,i])}async clearHighlights(){return this.evaluateWithChecksum(async()=>window.checksum.testGenerator.clearHighlights())}async getInspectedElementSelectionResultByRRwebId(r,i={fromTimeMachine:!1}){return await(i.fromTimeMachine?this.getTimeMachinePage().evaluate.bind(this.getTimeMachinePage()):this.evaluateWithChecksum.bind(this))(([a,s])=>window.checksum.testGenerator.getInspectedElementSelectionResultByRRwebId(a,s),[parseInt(r,10),i])}};o(js,"ChecksumWebDriver");var Sr=js;var zs=class zs{constructor(t,r={},i=!0){this.requests=[];this.watcherConfig={minimumWaitTime:250,maximumWaitTime:1e4,followingRequestsWaitTime:250};this.resolved=!0;this.hasMinimumWaitTimePassed=!1;this.useLog=!1;this.logStack=[];this.resolve=o(()=>{this.resolved||(this.resolved=!0,clearTimeout(this.minimumWaitTimer),clearTimeout(this.maximumWaitTimer),clearTimeout(this.followingRequestWaitTimeoutId),this.loadResolve({totalTime:Date.now()-this.startTS,logs:this.logStack,pendingRequests:this.requests.length,totalRequests:this.observedRequestsCount}))},"resolve");this.watcherConfig={...this.watcherConfig,...r},this.initListeners(t),this.useLog=i}initListeners(t){t.on("request",r=>{var i;this.hasMinimumWaitTimePassed||(i=this.watcherConfig.whitelist)!=null&&i.length&&!this.watcherConfig.whitelist.some(n=>n.test(r.url()))||(this.useLog&&this.logStack.push(`${r.method()} ${r.url().substring(0,60)}`),this.requests.push(r),this.observedRequestsCount+=1)}),t.on("response",r=>{this.requests=this.requests.filter(i=>i!==r.request()),this.hasMinimumWaitTimePassed&&(this.requests.length||(clearTimeout(this.followingRequestWaitTimeoutId),this.followingRequestWaitTimeoutId=setTimeout(()=>{this.requests.length||this.resolve()},this.watcherConfig.followingRequestsWaitTime)))})}async wait(){return new Promise(t=>{this.loadResolve=t,this.resolved=!1,this.minimumWaitTimer=setTimeout(()=>{this.hasMinimumWaitTimePassed=!0,this.requests.length||this.resolve()},this.watcherConfig.minimumWaitTime),this.maximumWaitTimer=setTimeout(this.resolve,this.watcherConfig.maximumWaitTime)})}startListening(){this.requests=[],this.startTS=Date.now(),this.hasMinimumWaitTimePassed=!1,this.observedRequestsCount=0,this.useLog&&(this.logStack=[])}};o(zs,"NetworkWatcher");var Er=zs;var $n=o(e=>e.name==="up"||e.name==="k"||e.ctrl&&e.name==="p","isUpKey"),Hs=o(e=>e.name==="down"||e.name==="j"||e.ctrl&&e.name==="n","isDownKey");var Vn=o(e=>e.name==="backspace","isBackspaceKey"),Od=o(e=>"123456789".includes(e.name),"isNumberKey"),Zn=o(e=>e.name==="enter"||e.name==="return","isEnterKey");var Gs=class Gs extends Error{name="AbortPromptError";message="Prompt was aborted";constructor(t){super(),this.cause=t==null?void 0:t.cause}};o(Gs,"AbortPromptError");var Kn=Gs,$s=class $s extends Error{name="CancelPromptError";message="Prompt was canceled"};o($s,"CancelPromptError");var Jn=$s,Vs=class Vs extends Error{name="ExitPromptError"};o(Vs,"ExitPromptError");var Yn=Vs,Zs=class Zs extends Error{name="HookError"};o(Zs,"HookError");var Xn=Zs,Ks=class Ks extends Error{name="ValidationError"};o(Ks,"ValidationError");var Fr=Ks;var Qs=require("async_hooks");var Qn=require("async_hooks");var Ud=new Qn.AsyncLocalStorage;function Ey(e){return{rl:e,hooks:[],hooksCleanup:[],hooksEffect:[],index:0,handleChange(){}}}o(Ey,"createStore");function Nd(e,t){let r=Ey(e);return Ud.run(r,()=>{function i(n){r.handleChange=()=>{r.index=0,n()},r.handleChange()}return o(i,"cycle"),t(i)})}o(Nd,"withHooks");function Nt(){let e=Ud.getStore();if(!e)throw new Xn("[Inquirer] Hook functions can only be called from within a prompt");return e}o(Nt,"getStore");function Js(){return Nt().rl}o(Js,"readline");function Ys(e){let t=o((...r)=>{let i=Nt(),n=!1,a=i.handleChange;i.handleChange=()=>{n=!0};let s=e(...r);return n&&a(),i.handleChange=a,s},"wrapped");return Qn.AsyncResource.bind(t)}o(Ys,"withUpdates");function _r(e){let t=Nt(),{index:r}=t,i={get(){return t.hooks[r]},set(a){t.hooks[r]=a},initialized:r in t.hooks},n=e(i);return t.index++,n}o(_r,"withPointer");function Wd(){Nt().handleChange()}o(Wd,"handleChange");var Wt={queue(e){let t=Nt(),{index:r}=t;t.hooksEffect.push(()=>{var n,a;(a=(n=t.hooksCleanup)[r])==null||a.call(n);let i=e(Js());if(i!=null&&typeof i!="function")throw new Fr("useEffect return value must be a cleanup function or nothing.");t.hooksCleanup[r]=i})},run(){let e=Nt();Ys(()=>{e.hooksEffect.forEach(t=>{t()}),e.hooksEffect.length=0})()},clearAll(){let e=Nt();e.hooksCleanup.forEach(t=>{t==null||t()}),e.hooksEffect.length=0,e.hooksCleanup.length=0}};function fe(e){return _r(t=>{let r=o(n=>{t.get()!==n&&(t.set(n),Wd())},"setFn");if(t.initialized)return[t.get(),r];let i=typeof e=="function"?e():e;return t.set(i),[i,r]})}o(fe,"useState");function qt(e,t){_r(r=>{let i=r.get();(!Array.isArray(i)||t.some((a,s)=>!Object.is(a,i[s])))&&Wt.queue(e),r.set(t)})}o(qt,"useEffect");var Fe=X(ta(),1);var Be=X(require("process"),1);function _y(){return Be.default.platform!=="win32"?Be.default.env.TERM!=="linux":!!Be.default.env.WT_SESSION||!!Be.default.env.TERMINUS_SUBLIME||Be.default.env.ConEmuTask==="{cmd::Cmder}"||Be.default.env.TERM_PROGRAM==="Terminus-Sublime"||Be.default.env.TERM_PROGRAM==="vscode"||Be.default.env.TERM==="xterm-256color"||Be.default.env.TERM==="alacritty"||Be.default.env.TERMINAL_EMULATOR==="JetBrains-JediTerm"}o(_y,"isUnicodeSupported");var Hd={circleQuestionMark:"(?)",questionMarkPrefix:"(?)",square:"\u2588",squareDarkShade:"\u2593",squareMediumShade:"\u2592",squareLightShade:"\u2591",squareTop:"\u2580",squareBottom:"\u2584",squareLeft:"\u258C",squareRight:"\u2590",squareCenter:"\u25A0",bullet:"\u25CF",dot:"\u2024",ellipsis:"\u2026",pointerSmall:"\u203A",triangleUp:"\u25B2",triangleUpSmall:"\u25B4",triangleDown:"\u25BC",triangleDownSmall:"\u25BE",triangleLeftSmall:"\u25C2",triangleRightSmall:"\u25B8",home:"\u2302",heart:"\u2665",musicNote:"\u266A",musicNoteBeamed:"\u266B",arrowUp:"\u2191",arrowDown:"\u2193",arrowLeft:"\u2190",arrowRight:"\u2192",arrowLeftRight:"\u2194",arrowUpDown:"\u2195",almostEqual:"\u2248",notEqual:"\u2260",lessOrEqual:"\u2264",greaterOrEqual:"\u2265",identical:"\u2261",infinity:"\u221E",subscriptZero:"\u2080",subscriptOne:"\u2081",subscriptTwo:"\u2082",subscriptThree:"\u2083",subscriptFour:"\u2084",subscriptFive:"\u2085",subscriptSix:"\u2086",subscriptSeven:"\u2087",subscriptEight:"\u2088",subscriptNine:"\u2089",oneHalf:"\xBD",oneThird:"\u2153",oneQuarter:"\xBC",oneFifth:"\u2155",oneSixth:"\u2159",oneEighth:"\u215B",twoThirds:"\u2154",twoFifths:"\u2156",threeQuarters:"\xBE",threeFifths:"\u2157",threeEighths:"\u215C",fourFifths:"\u2158",fiveSixths:"\u215A",fiveEighths:"\u215D",sevenEighths:"\u215E",line:"\u2500",lineBold:"\u2501",lineDouble:"\u2550",lineDashed0:"\u2504",lineDashed1:"\u2505",lineDashed2:"\u2508",lineDashed3:"\u2509",lineDashed4:"\u254C",lineDashed5:"\u254D",lineDashed6:"\u2574",lineDashed7:"\u2576",lineDashed8:"\u2578",lineDashed9:"\u257A",lineDashed10:"\u257C",lineDashed11:"\u257E",lineDashed12:"\u2212",lineDashed13:"\u2013",lineDashed14:"\u2010",lineDashed15:"\u2043",lineVertical:"\u2502",lineVerticalBold:"\u2503",lineVerticalDouble:"\u2551",lineVerticalDashed0:"\u2506",lineVerticalDashed1:"\u2507",lineVerticalDashed2:"\u250A",lineVerticalDashed3:"\u250B",lineVerticalDashed4:"\u254E",lineVerticalDashed5:"\u254F",lineVerticalDashed6:"\u2575",lineVerticalDashed7:"\u2577",lineVerticalDashed8:"\u2579",lineVerticalDashed9:"\u257B",lineVerticalDashed10:"\u257D",lineVerticalDashed11:"\u257F",lineDownLeft:"\u2510",lineDownLeftArc:"\u256E",lineDownBoldLeftBold:"\u2513",lineDownBoldLeft:"\u2512",lineDownLeftBold:"\u2511",lineDownDoubleLeftDouble:"\u2557",lineDownDoubleLeft:"\u2556",lineDownLeftDouble:"\u2555",lineDownRight:"\u250C",lineDownRightArc:"\u256D",lineDownBoldRightBold:"\u250F",lineDownBoldRight:"\u250E",lineDownRightBold:"\u250D",lineDownDoubleRightDouble:"\u2554",lineDownDoubleRight:"\u2553",lineDownRightDouble:"\u2552",lineUpLeft:"\u2518",lineUpLeftArc:"\u256F",lineUpBoldLeftBold:"\u251B",lineUpBoldLeft:"\u251A",lineUpLeftBold:"\u2519",lineUpDoubleLeftDouble:"\u255D",lineUpDoubleLeft:"\u255C",lineUpLeftDouble:"\u255B",lineUpRight:"\u2514",lineUpRightArc:"\u2570",lineUpBoldRightBold:"\u2517",lineUpBoldRight:"\u2516",lineUpRightBold:"\u2515",lineUpDoubleRightDouble:"\u255A",lineUpDoubleRight:"\u2559",lineUpRightDouble:"\u2558",lineUpDownLeft:"\u2524",lineUpBoldDownBoldLeftBold:"\u252B",lineUpBoldDownBoldLeft:"\u2528",lineUpDownLeftBold:"\u2525",lineUpBoldDownLeftBold:"\u2529",lineUpDownBoldLeftBold:"\u252A",lineUpDownBoldLeft:"\u2527",lineUpBoldDownLeft:"\u2526",lineUpDoubleDownDoubleLeftDouble:"\u2563",lineUpDoubleDownDoubleLeft:"\u2562",lineUpDownLeftDouble:"\u2561",lineUpDownRight:"\u251C",lineUpBoldDownBoldRightBold:"\u2523",lineUpBoldDownBoldRight:"\u2520",lineUpDownRightBold:"\u251D",lineUpBoldDownRightBold:"\u2521",lineUpDownBoldRightBold:"\u2522",lineUpDownBoldRight:"\u251F",lineUpBoldDownRight:"\u251E",lineUpDoubleDownDoubleRightDouble:"\u2560",lineUpDoubleDownDoubleRight:"\u255F",lineUpDownRightDouble:"\u255E",lineDownLeftRight:"\u252C",lineDownBoldLeftBoldRightBold:"\u2533",lineDownLeftBoldRightBold:"\u252F",lineDownBoldLeftRight:"\u2530",lineDownBoldLeftBoldRight:"\u2531",lineDownBoldLeftRightBold:"\u2532",lineDownLeftRightBold:"\u252E",lineDownLeftBoldRight:"\u252D",lineDownDoubleLeftDoubleRightDouble:"\u2566",lineDownDoubleLeftRight:"\u2565",lineDownLeftDoubleRightDouble:"\u2564",lineUpLeftRight:"\u2534",lineUpBoldLeftBoldRightBold:"\u253B",lineUpLeftBoldRightBold:"\u2537",lineUpBoldLeftRight:"\u2538",lineUpBoldLeftBoldRight:"\u2539",lineUpBoldLeftRightBold:"\u253A",lineUpLeftRightBold:"\u2536",lineUpLeftBoldRight:"\u2535",lineUpDoubleLeftDoubleRightDouble:"\u2569",lineUpDoubleLeftRight:"\u2568",lineUpLeftDoubleRightDouble:"\u2567",lineUpDownLeftRight:"\u253C",lineUpBoldDownBoldLeftBoldRightBold:"\u254B",lineUpDownBoldLeftBoldRightBold:"\u2548",lineUpBoldDownLeftBoldRightBold:"\u2547",lineUpBoldDownBoldLeftRightBold:"\u254A",lineUpBoldDownBoldLeftBoldRight:"\u2549",lineUpBoldDownLeftRight:"\u2540",lineUpDownBoldLeftRight:"\u2541",lineUpDownLeftBoldRight:"\u253D",lineUpDownLeftRightBold:"\u253E",lineUpBoldDownBoldLeftRight:"\u2542",lineUpDownLeftBoldRightBold:"\u253F",lineUpBoldDownLeftBoldRight:"\u2543",lineUpBoldDownLeftRightBold:"\u2544",lineUpDownBoldLeftBoldRight:"\u2545",lineUpDownBoldLeftRightBold:"\u2546",lineUpDoubleDownDoubleLeftDoubleRightDouble:"\u256C",lineUpDoubleDownDoubleLeftRight:"\u256B",lineUpDownLeftDoubleRightDouble:"\u256A",lineCross:"\u2573",lineBackslash:"\u2572",lineSlash:"\u2571"},Gd={tick:"\u2714",info:"\u2139",warning:"\u26A0",cross:"\u2718",squareSmall:"\u25FB",squareSmallFilled:"\u25FC",circle:"\u25EF",circleFilled:"\u25C9",circleDotted:"\u25CC",circleDouble:"\u25CE",circleCircle:"\u24DE",circleCross:"\u24E7",circlePipe:"\u24BE",radioOn:"\u25C9",radioOff:"\u25EF",checkboxOn:"\u2612",checkboxOff:"\u2610",checkboxCircleOn:"\u24E7",checkboxCircleOff:"\u24BE",pointer:"\u276F",triangleUpOutline:"\u25B3",triangleLeft:"\u25C0",triangleRight:"\u25B6",lozenge:"\u25C6",lozengeOutline:"\u25C7",hamburger:"\u2630",smiley:"\u32E1",mustache:"\u0DF4",star:"\u2605",play:"\u25B6",nodejs:"\u2B22",oneSeventh:"\u2150",oneNinth:"\u2151",oneTenth:"\u2152"},Ay={tick:"\u221A",info:"i",warning:"\u203C",cross:"\xD7",squareSmall:"\u25A1",squareSmallFilled:"\u25A0",circle:"( )",circleFilled:"(*)",circleDotted:"( )",circleDouble:"( )",circleCircle:"(\u25CB)",circleCross:"(\xD7)",circlePipe:"(\u2502)",radioOn:"(*)",radioOff:"( )",checkboxOn:"[\xD7]",checkboxOff:"[ ]",checkboxCircleOn:"(\xD7)",checkboxCircleOff:"( )",pointer:">",triangleUpOutline:"\u2206",triangleLeft:"\u25C4",triangleRight:"\u25BA",lozenge:"\u2666",lozengeOutline:"\u25CA",hamburger:"\u2261",smiley:"\u263A",mustache:"\u250C\u2500\u2510",star:"\u2736",play:"\u25BA",nodejs:"\u2666",oneSeventh:"1/7",oneNinth:"1/9",oneTenth:"1/10"},Ty={...Hd,...Gd},Py={...Hd,...Ay},Ry=_y(),Iy=Ry?Ty:Py,Ar=Iy,FS=Object.entries(Gd);var $d={prefix:{idle:Fe.default.blue("?"),done:Fe.default.green(Ar.tick)},spinner:{interval:80,frames:["\u280B","\u2819","\u2839","\u2838","\u283C","\u2834","\u2826","\u2827","\u2807","\u280F"].map(e=>Fe.default.yellow(e))},style:{answer:Fe.default.cyan,message:Fe.default.bold,error:o(e=>Fe.default.red(`> ${e}`),"error"),defaultAnswer:o(e=>Fe.default.dim(`(${e})`),"defaultAnswer"),help:Fe.default.dim,highlight:Fe.default.cyan,key:o(e=>Fe.default.cyan(Fe.default.bold(`<${e}>`)),"key")}};function Vd(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}o(Vd,"isPlainObject");function Zd(...e){let t={};for(let r of e)for(let[i,n]of Object.entries(r)){let a=t[i];t[i]=Vd(a)&&Vd(n)?Zd(a,n):n}return t}o(Zd,"deepMerge");function jt(...e){let t=[$d,...e.filter(r=>r!=null)];return Zd(...t)}o(jt,"makeTheme");function _i({status:e="idle",theme:t}){let[r,i]=fe(!1),[n,a]=fe(0),{prefix:s,spinner:l}=jt(t);return qt(()=>{if(e==="loading"){let u,c=-1,f=setTimeout(Qs.AsyncResource.bind(()=>{i(!0),u=setInterval(Qs.AsyncResource.bind(()=>{c=c+1,a(c%l.frames.length)}),l.interval)}),300);return()=>{clearTimeout(f),clearInterval(u)}}else i(!1)},[e]),r?l.frames[n]:typeof s=="string"?s:s[e==="loading"?"idle":e]}o(_i,"usePrefix");function Ai(e,t){return _r(r=>{let i=r.get();if(!i||i.dependencies.length!==t.length||i.dependencies.some((n,a)=>n!==t[a])){let n=e();return r.set({value:n,dependencies:t}),n}return i.value})}o(Ai,"useMemo");function vt(e){return fe({current:e})[0]}o(vt,"useRef");function Ti(e){let t=vt(e);t.current=e,qt(r=>{let i=!1,n=Ys((a,s)=>{i||t.current(s,r)});return r.input.on("keypress",n),()=>{i=!0,r.input.removeListener("keypress",n)}},[])}o(Ti,"useKeypress");var kp=X(Jd(),1),xp=X(Cp(),1);function Ii(e,t){return e.split(`
`).flatMap(r=>(0,xp.default)(r,t,{trim:!1,hard:!0}).split(`
`).map(i=>i.trimEnd())).join(`
`)}o(Ii,"breakLines");function aa(){return(0,kp.default)({defaultWidth:80,output:Js().output})}o(aa,"readlineWidth");function rw(e,t){return Ii(e,t).split(`
`)}o(rw,"split");function iw(e,t){let r=t.length,i=(e%r+r)%r;return[...t.slice(i),...t.slice(0,i)]}o(iw,"rotate");function Sp({items:e,width:t,renderItem:r,active:i,position:n,pageSize:a}){let s=e.map((C,v)=>({item:C,index:v,isActive:v===i})),l=iw(i-n,s).slice(0,a),h=o(C=>l[C]==null?[]:rw(r(l[C]),t),"renderItemAt"),u=Array.from({length:a}),c=h(n).slice(0,a),f=n+c.length<=a?n:a-c.length;u.splice(f,c.length,...c);let d=f+c.length,p=n+1;for(;d<a&&p<l.length;){for(let C of h(p))if(u[d++]=C,d>=a)break;p++}for(d=f-1,p=n-1;d>=0&&p>=0;){for(let C of h(p).reverse())if(u[d--]=C,d<0)break;p--}return u.filter(C=>typeof C=="string")}o(Sp,"lines");function Ep({active:e,pageSize:t,total:r}){let i=Math.floor(t/2);return r<=t||e<i?e:e>=r-i?e+t-r:i}o(Ep,"finite");function Fp({active:e,lastActive:t,total:r,pageSize:i,pointer:n}){return r<=i?e:t<e&&e-t<i?Math.min(Math.floor(i/2),n+e-t):n}o(Fp,"infinite");function sl({items:e,active:t,renderItem:r,pageSize:i,loop:n=!0}){let a=vt({position:0,lastActive:0}),s=n?Fp({active:t,lastActive:a.current.lastActive,total:e.length,pageSize:i,pointer:a.current.position}):Ep({active:t,total:e.length,pageSize:i});return a.current.position=s,a.current.lastActive=t,Sp({items:e,width:aa(),renderItem:r,active:t,position:s,pageSize:i}).join(`
`)}o(sl,"usePagination");var Op=X(require("readline"),1),Up=require("async_hooks"),Np=X(Ap(),1);var zt=[];zt.push("SIGHUP","SIGINT","SIGTERM");process.platform!=="win32"&&zt.push("SIGALRM","SIGABRT","SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&zt.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT");var la=o(e=>!!e&&typeof e=="object"&&typeof e.removeListener=="function"&&typeof e.emit=="function"&&typeof e.reallyExit=="function"&&typeof e.listeners=="function"&&typeof e.kill=="function"&&typeof e.pid=="number"&&typeof e.on=="function","processOk"),cl=Symbol.for("signal-exit emitter"),hl=globalThis,aw=Object.defineProperty.bind(Object),ml=class ml{emitted={afterExit:!1,exit:!1};listeners={afterExit:[],exit:[]};count=0;id=Math.random();constructor(){if(hl[cl])return hl[cl];aw(hl,cl,{value:this,writable:!1,enumerable:!1,configurable:!1})}on(t,r){this.listeners[t].push(r)}removeListener(t,r){let i=this.listeners[t],n=i.indexOf(r);n!==-1&&(n===0&&i.length===1?i.length=0:i.splice(n,1))}emit(t,r,i){if(this.emitted[t])return!1;this.emitted[t]=!0;let n=!1;for(let a of this.listeners[t])n=a(r,i)===!0||n;return t==="exit"&&(n=this.emit("afterExit",r,i)||n),n}};o(ml,"Emitter");var fl=ml,Dl=class Dl{};o(Dl,"SignalExitBase");var ua=Dl,ow=o(e=>({onExit(t,r){return e.onExit(t,r)},load(){return e.load()},unload(){return e.unload()}}),"signalExitWrap"),vl=class vl extends ua{onExit(){return()=>{}}load(){}unload(){}};o(vl,"SignalExitFallback");var dl=vl,ca,ye,$,Mr,Lr,Ht,yt,Br,Tp,Pp,yl=class yl extends ua{constructor(r){super();we(this,Br);we(this,ca,gl.platform==="win32"?"SIGINT":"SIGHUP");we(this,ye,new fl);we(this,$);we(this,Mr);we(this,Lr);we(this,Ht,{});we(this,yt,!1);Ze(this,$,r),Ze(this,Ht,{});for(let i of zt)T(this,Ht)[i]=()=>{let n=T(this,$).listeners(i),{count:a}=T(this,ye),s=r;if(typeof s.__signal_exit_emitter__=="object"&&typeof s.__signal_exit_emitter__.count=="number"&&(a+=s.__signal_exit_emitter__.count),n.length===a){this.unload();let l=T(this,ye).emit("exit",null,i),h=i==="SIGHUP"?T(this,ca):i;l||r.kill(r.pid,h)}};Ze(this,Lr,r.reallyExit),Ze(this,Mr,r.emit)}onExit(r,i){if(!la(T(this,$)))return()=>{};T(this,yt)===!1&&this.load();let n=i!=null&&i.alwaysLast?"afterExit":"exit";return T(this,ye).on(n,r),()=>{T(this,ye).removeListener(n,r),T(this,ye).listeners.exit.length===0&&T(this,ye).listeners.afterExit.length===0&&this.unload()}}load(){if(!T(this,yt)){Ze(this,yt,!0),T(this,ye).count+=1;for(let r of zt)try{let i=T(this,Ht)[r];i&&T(this,$).on(r,i)}catch{}T(this,$).emit=(r,...i)=>Ue(this,Br,Pp).call(this,r,...i),T(this,$).reallyExit=r=>Ue(this,Br,Tp).call(this,r)}}unload(){T(this,yt)&&(Ze(this,yt,!1),zt.forEach(r=>{let i=T(this,Ht)[r];if(!i)throw new Error("Listener not defined for signal: "+r);try{T(this,$).removeListener(r,i)}catch{}}),T(this,$).emit=T(this,Mr),T(this,$).reallyExit=T(this,Lr),T(this,ye).count-=1)}};ca=new WeakMap,ye=new WeakMap,$=new WeakMap,Mr=new WeakMap,Lr=new WeakMap,Ht=new WeakMap,yt=new WeakMap,Br=new WeakSet,Tp=o(function(r){return la(T(this,$))?(T(this,$).exitCode=r||0,T(this,ye).emit("exit",T(this,$).exitCode,null),T(this,Lr).call(T(this,$),T(this,$).exitCode)):0},"#processReallyExit"),Pp=o(function(r,...i){let n=T(this,Mr);if(r==="exit"&&la(T(this,$))){typeof i[0]=="number"&&(T(this,$).exitCode=i[0]);let a=n.call(T(this,$),r,...i);return T(this,ye).emit("exit",T(this,$).exitCode,null),a}else return n.call(T(this,$),r,...i)},"#processEmit"),o(yl,"SignalExit");var pl=yl,gl=globalThis.process,{onExit:Rp,load:BE,unload:OE}=ow(la(gl)?new pl(gl):new dl);var Bp=X(ra(),1),wt=X(bl(),1);var Mp=o(e=>e.split(`
`).length,"height"),sw=o(e=>e.split(`
`).pop()??"","lastLine");function Lp(e){return e>0?wt.default.cursorDown(e):""}o(Lp,"cursorDown");var Cl=class Cl{rl;height=0;extraLinesUnderPrompt=0;cursorPos;constructor(t){this.rl=t,this.rl=t,this.cursorPos=t.getCursorPos()}write(t){this.rl.output.unmute(),this.rl.output.write(t),this.rl.output.mute()}render(t,r=""){let i=sw(t),n=(0,Bp.default)(i),a=n;this.rl.line.length>0&&(a=a.slice(0,-this.rl.line.length)),this.rl.setPrompt(a),this.cursorPos=this.rl.getCursorPos();let s=aa();t=Ii(t,s),r=Ii(r,s),n.length%s===0&&(t+=`
`);let l=t+(r?`
`+r:""),u=Math.floor(n.length/s)-this.cursorPos.rows+(r?Mp(r):0);u>0&&(l+=wt.default.cursorUp(u)),l+=wt.default.cursorTo(this.cursorPos.cols),this.write(Lp(this.extraLinesUnderPrompt)+wt.default.eraseLines(this.height)+l),this.extraLinesUnderPrompt=u,this.height=Mp(l)}checkCursorPos(){let t=this.rl.getCursorPos();t.cols!==this.cursorPos.cols&&(this.write(wt.default.cursorTo(t.cols)),this.cursorPos=t)}done({clearContent:t}){this.rl.setPrompt("");let r=Lp(this.extraLinesUnderPrompt);r+=t?wt.default.eraseLines(this.height):`
`,r+=wt.default.cursorShow,this.write(r),this.rl.close()}};o(Cl,"ScreenManager");var Li=Cl;var kl=class kl extends Promise{static withResolver(){let t,r;return{promise:new Promise((n,a)=>{t=n,r=a}),resolve:t,reject:r}}};o(kl,"PromisePolyfill");var fa=kl;function Bi(e){return o((r,i={})=>{let{input:n=process.stdin,signal:a}=i,s=new Set,l=new Np.default;l.pipe(i.output??process.stdout);let h=Op.createInterface({terminal:!0,input:n,output:l}),u=new Li(h),{promise:c,resolve:f,reject:d}=fa.withResolver(),p=o(()=>d(new Jn),"cancel");if(a){let v=o(()=>d(new Kn({cause:a.reason})),"abort");if(a.aborted)return v(),Object.assign(c,{cancel:p});a.addEventListener("abort",v),s.add(()=>a.removeEventListener("abort",v))}s.add(Rp((v,y)=>{d(new Yn(`User force closed the prompt with ${v} ${y}`))}));let C=o(()=>u.checkCursorPos(),"checkCursorPos");return h.input.on("keypress",C),s.add(()=>h.input.removeListener("keypress",C)),Nd(h,v=>{let y=Up.AsyncResource.bind(()=>Wt.clearAll());return h.on("close",y),s.add(()=>h.removeListener("close",y)),v(()=>{try{let m=e(r,w=>{setImmediate(()=>f(w))}),[b,k]=typeof m=="string"?[m]:m;u.render(b,k),Wt.run()}catch(m){d(m)}}),Object.assign(c.then(m=>(Wt.clearAll(),m),m=>{throw Wt.clearAll(),m}).finally(()=>{s.forEach(m=>m()),u.done({clearContent:!!(i!=null&&i.clearPromptOnDone)}),l.end()}).then(()=>c),{cancel:p})})},"prompt")}o(Bi,"createPrompt");var Wp=X(ta(),1);var xl=class xl{separator=Wp.default.dim(Array.from({length:15}).join(Ar.line));type="separator";constructor(t){t&&(this.separator=t)}static isSeparator(t){return!!(t&&typeof t=="object"&&"type"in t&&t.type==="separator")}};o(xl,"Separator");var bt=xl;var G=Bi((e,t)=>{let{required:r,validate:i=o(()=>!0,"validate")}=e,n=jt(e.theme),[a,s]=fe("pending"),[l="",h]=fe(e.default),[u,c]=fe(),[f,d]=fe(""),C=_i({isLoading:a==="loading",theme:n});Ti(async(k,w)=>{if(a==="pending")if(Zn(k)){let g=f||l;s("loading");let E=r&&!g?"You must provide a value":await i(g);E===!0?(d(g),s("done"),t(g)):(w.write(f),c(E||"You must provide a valid value"),s("pending"))}else Vn(k)&&!f?h(void 0):k.name==="tab"&&!f?(h(void 0),w.clearLine(0),w.write(l),d(l)):(d(w.line),c(void 0))});let v=n.style.message(e.message),y=f;typeof e.transformer=="function"?y=e.transformer(f,{isFinal:a==="done"}):a==="done"&&(y=n.style.answer(f));let m;l&&a!=="done"&&!f&&(m=n.style.defaultAnswer(l));let b="";return u&&(b=n.style.error(u)),[[C,v,m,y].filter(k=>k!==void 0).join(" "),b]});var Sl=X(ta(),1);var qp=X(bl(),1);var lw={icon:{cursor:Ar.pointer},style:{disabled:o(e=>Sl.default.dim(`- ${e}`),"disabled"),description:o(e=>Sl.default.cyan(e),"description")},helpMode:"auto"};function Ur(e){return!bt.isSeparator(e)&&!e.disabled}o(Ur,"isSelectable");function uw(e){return e.map(t=>{if(bt.isSeparator(t))return t;if(typeof t=="string")return{value:t,name:t,short:t,disabled:!1};let r=t.name??String(t.value);return{value:t.value,name:r,description:t.description,short:t.short??r,disabled:t.disabled??!1}})}o(uw,"normalizeChoices");var de=Bi((e,t)=>{let{loop:r=!0,pageSize:i=7}=e,n=vt(!0),a=jt(lw,e.theme),s=_i({theme:a}),[l,h]=fe("pending"),u=vt(),c=Ai(()=>uw(e.choices),[e.choices]),f=Ai(()=>{let g=c.findIndex(Ur),E=c.findLastIndex(Ur);if(g<0)throw new Fr("[select prompt] No selectable choices. All choices are disabled.");return{first:g,last:E}},[c]),d=Ai(()=>"default"in e?c.findIndex(g=>Ur(g)&&g.value===e.default):-1,[e.default,c]),[p,C]=fe(d===-1?f.first:d),v=c[p];Ti((g,E)=>{if(clearTimeout(u.current),Zn(g))h("done"),t(v.value);else if($n(g)||Hs(g)){if(E.clearLine(0),r||$n(g)&&p!==f.first||Hs(g)&&p!==f.last){let _=$n(g)?-1:1,x=p;do x=(x+_+c.length)%c.length;while(!Ur(c[x]));C(x)}}else if(Od(g)){E.clearLine(0);let _=Number(g.name)-1,x=c[_];x!=null&&Ur(x)&&C(_)}else if(Vn(g))E.clearLine(0);else{let _=E.line.toLowerCase(),x=c.findIndex(A=>bt.isSeparator(A)||!Ur(A)?!1:A.name.toLowerCase().startsWith(_));x>=0&&C(x),u.current=setTimeout(()=>{E.clearLine(0)},700)}}),qt(()=>()=>{clearTimeout(u.current)},[]);let y=a.style.message(e.message),m="",b="";(a.helpMode==="always"||a.helpMode==="auto"&&n.current)&&(n.current=!1,c.length>i?b=`
${a.style.help("(Use arrow keys to reveal more choices)")}`:m=a.style.help("(Use arrow keys)"));let k=sl({items:c,active:p,renderItem({item:g,isActive:E}){if(bt.isSeparator(g))return` ${g.separator}`;if(g.disabled){let A=typeof g.disabled=="string"?g.disabled:"(disabled)";return a.style.disabled(`${g.name} ${A}`)}let _=E?a.style.highlight:A=>A,x=E?a.icon.cursor:" ";return _(`${x} ${g.name}`)},pageSize:i,loop:r});if(l==="done")return`${s} ${y} ${a.style.answer(v.short)}`;let w=v.description?`
${a.style.description(v.description)}`:"";return`${[s,y,m].filter(Boolean).join(" ")}
${k}${b}${w}${qp.default.cursorHide}`});var El=class El{constructor(t,r,i){this.webDriver=t;this.pageInteractor=r;this.callbacks=i;this.quitWaitForUserInteractions=!1}async run(t){switch(await de({message:"What next?",choices:[{name:"Record my actions",value:"RecordManualActions"},{name:"Custom code",value:"CustomCode"},{name:"Generate assertions",value:"GenerateAssertions"},{name:"Back",value:"Back"}]})){case"RecordManualActions":await this.listenForUserInteractions(t);break;case"CustomCode":await this.getCustomCode();break;case"GenerateAssertions":await this.callbacks.generateAssertions();break;case"Back":break}}async listenForUserInteractions(t){this.quitWaitForUserInteractions=!1;let r=o(()=>{let n=G({message:"Waiting for user interaction [press anything to stop]...",default:void 0});return n.finally(()=>{}).then(()=>{this.quitWaitForUserInteractions=!0}).catch(()=>{}),n},"startQuit"),i=r();for(;!this.quitWaitForUserInteractions;)try{let n=await this.webDriver.getTimeMachinePage().evaluate(()=>window.checksum.visualTestGenerator.consumeInteractions());if(n.length){try{i.cancel()}catch{}for(let a of n)t&&a.timestamp<t||await this.vetManualAction(a);i=r()}await B(1e3)}catch(n){console.log("error",n)}}async vetManualAction(t){let{esraMetadata:r,nodeId:i,...n}=t;console.log("Interaction:",n);let a=await G({message:"Thought [no thought will filter out this interaction]?",default:void 0});a&&(t.description=a,this.callbacks.onActionExecuted(t))}async getCustomCode(){let t=await G({message:"Provide the body of the function: async (page: Page) => { /* code */ }"});if(!t)return;let r={eventCode:"custom_code",fillValue:t};await this.pageInteractor.performAction(r),await this.vetManualAction(r)}};o(El,"ManualVisualTestGenerator");var da=El;var pa=o(async(e,t,r={})=>{var l,h;let i=G({message:((l=r.makePromptMessage)==null?void 0:l.call(r,t))??`Continuing in ${t} seconds [Press enter to stop]...`},{clearPromptOnDone:!0}),n=!1;i.then(async u=>{n=!0,r.onCancelMessage&&console.log(r.onCancelMessage)}).catch(()=>{});let s=o(async()=>{if(await B(1e3),n)return;i.cancel();let u=t-1;return u===0?(r.onContinueMessage&&console.log(r.onContinueMessage),e()):pa(e,u,r)},"timeout")();try{let u=await Promise.race([s,i]);return n?(h=r.cancelCallback)==null?void 0:h.call(r,u):u}catch{return s}},"userInterruptibleDelayedCallback");var Fl=class Fl{constructor(t,r,i,n,a){this.webDriver=t;this.pageInteractor=r;this.apiBaseURL=i;this.apiKey=n;this.callbacks=a;this.previousActionFailed=!1;this.currentChecksumId="0";this.run=o(async(t=[])=>{this.clear(),this.executedActions=t,await this.startSession(),await this.iterationLoop()},"run");this.iterationLoop=o(async()=>{switch(await this.iterate()){case"continue":return this.runInterruptibleNextAIStep(this.iterationLoop);case"reset":return this.runInterruptibleNextAIStep(()=>this.run(this.callbacks.getExecutedActions()));case"stop":return}},"iterationLoop");this.runInterruptibleNextAIStep=o(async t=>pa(t,5,{makePromptMessage:o(i=>`Will continue in ${i} seconds [Press enter to stop]...`,"makePromptMessage"),onContinueMessage:"Continuing with AI...",onCancelMessage:"Stopping AI"}),"runInterruptibleNextAIStep")}async init(){}setStory(t){this.story=t}clear(){this.executedActions=[],this.remoteSessionId=void 0,this.userThoughtForNextLLMStep=void 0,this.previousActionFailed=!1,this.currentChecksumId="0"}async iterate(){let t="continue",{reducedHTML:r,flashingHTML:i,elementsForNodeInterpretation:n,currentChecksumId:a}=await this.webDriver.evaluateWithChecksum(async({appRules:l,currentChecksumId:h})=>window.checksum.testGenerator.reduceHTML(l,{stopFlashingElementsDetection:!0,assignChecksumIdsToAllElements:!0,initialChecksumId:h}),{appRules:{appSpecificInteractableElementsSelectors:[]},currentChecksumId:this.currentChecksumId});this.currentChecksumId=a;let s=await this.getNextAction({reducedHTML:r,flashingHTML:i,elementsForNodeInterpretation:n});if(this.isFailureAction(s))return await this.getUserThoughtForNextLLMStep(),"continue";try{let l=await this.pageInteractor.translateActionResponseToAgentPotentialAction(s),h=await this.approveAction(l);switch(await this.webDriver.clearHighlights(),h){case"ProvideGuidance":return await this.getUserThoughtForNextLLMStep(),this.iterate();case"ChangeValue":l.fillValue=await this.getValueReplacementFromUser(),t="reset";break;case"Finish":return this.callbacks.onSuccess(),this.callbacks.stop(),"stop";case"Abort":return this.callbacks.stop(),"stop"}if(this.userThoughtForNextLLMStep=void 0,this.previousActionFailed=!1,this.isFinishAction(s))return this.callbacks.onSuccess(),this.callbacks.stop(),"stop";try{let u=new Er(this.webDriver.page);u.startListening(),l.timestamp=Date.now(),await this.pageInteractor.performAction(l),await u.wait(),await B(2e3),this.callbacks.onActionExecuted(l)}catch(u){this.previousActionFailed=!0,console.error(u)}}catch(l){this.previousActionFailed=!0,console.error(l)}return t}async startSession({retriesLeft:t=3}={}){let r={type:"test-generation",storyTitle:this.story.goal,storyInstructions:this.story.instructions,testId:void 0,testSuiteId:void 0,thoughtsAndActions:{previous:this.executedActions.filter(i=>!!i.description).map(i=>({thought:i.description,action:void 0}))}};try{let i=await fetch(`${this.apiBaseURL}/ai-fallback/init`,{method:"POST",headers:{"Content-Type":"application/json",ChecksumAppCode:this.apiKey},body:JSON.stringify({data:r})});this.remoteSessionId=await i.text()}catch(i){if(console.error(i),await B(2e3),t>0)return this.startSession({retriesLeft:t-1});throw i}}async approveAction(t){var a;await this.webDriver.highlightElementByLocator(this.pageInteractor.makeLocator(t.selector,t.parentFramesSelectors),t.clickOffset,"10px solid rgba(255,0,0,1)");let r=`${t.description}${(a=t.fillValue)!=null&&a.length?` with "${t.fillValue}"`:""}`;return pa(async()=>"Proceed",5,{makePromptMessage:o(s=>`Will approve action ${r} in ${s} seconds [Press enter to stop]...`,"makePromptMessage"),onContinueMessage:"Continuing with AI...",cancelCallback:o(async()=>await de({message:`Proceed with action: "${r}"?`,choices:[{name:"Yes",value:"Proceed"},{name:"Yes, but use a different value",value:"ChangeValue"},{name:"No, I will provide guidance",value:"ProvideGuidance"},{name:"Abort (no test code will be generated)",value:"Abort"},{name:"Finish",value:"Finish"}]}),"getApproval")})}async getUserThoughtForNextLLMStep(){this.userThoughtForNextLLMStep=await G({message:"What should be done next?"})}async getValueReplacementFromUser(){return G({message:"What value should be used?"})}async getNextAction({reducedHTML:t,flashingHTML:r,elementsForNodeInterpretation:i}){let n={reduction:{reducedHTML:t,flashingHTML:r,elementsForNodeInterpretation:i},currentURL:this.webDriver.page.url(),previousActionOverview:{success:!this.previousActionFailed,userCorrection:this.userThoughtForNextLLMStep}};try{return await(await fetch(`${this.apiBaseURL}/ai-fallback/iterate`,{method:"POST",headers:{"Content-Type":"application/json",ChecksumAppCode:this.apiKey},body:JSON.stringify({sessionId:this.remoteSessionId,iterationData:n})})).json()}catch(a){throw console.error(a),a}}isFailureAction(t){var r;return["failed","fail"].includes(t.thought)||["failed","fail"].includes((r=t.action)==null?void 0:r.type)}isFinishAction(t){var r;return t.thought==="finish"||((r=t.action)==null?void 0:r.type)==="finish"}};o(Fl,"AIVisualTestGenerator");var ga=Fl;var ce=require("fs"),ma=X(require("child_process")),_e=require("path");var _l=class _l{constructor(t,r=!1){this.args=t;this.debugMode=r;this.checksumApiUrl="https://api.checksum.ai";this.checksumAppUrl="https://app.checksum.ai";this.childProcesses=[];this.printError=o(t=>{console.log("\x1B[31m%s\x1B[0m",t)},"printError");["SIGINT","SIGTERM"].forEach(i=>{process.on(i,()=>{this.cleanup(),process.exit()})})}async execCmd(t,r={}){let i={...process.env,...r},n=await ma.spawn(t,{env:i,shell:!0,stdio:"inherit"});return this.childProcesses.push(n),new Promise((s,l)=>{n.on("exit",h=>{h===0?s(!0):l(new Error(`Checksum failed execution with code: ${h} `)),this.childProcesses=this.childProcesses.filter(u=>u!==n)})})}async getCmdOutput(t){return new Promise(function(r,i){ma.exec(t,(n,a,s)=>{if(n){i(`Error executing command: ${n.message}`);return}r(a)})})}loadChecksumData(){this.locateChecksumLibs(),this.processChecksumArguments(),this.setChecksumConfig()}async patchPlaywright(t=!1){Z("Patching playwright",t);let r=(0,_e.join)(__dirname,"./scripts/patch.js");(0,ce.existsSync)(r)||(r=(0,_e.join)(__dirname,"../../../scripts/src/patch_playwright.js"));let i=`node "${r}"${t?" off":""}`;try{await this.execCmd(i,{PROJECT_ROOT:this.projectRootDirectory,RUNTIME:"true"})}catch(n){console.log("Error patching playwright",n.message)}}getPlaywrightConfigFilePath(){return(0,_e.join)(this.checksumRoot,"playwright.config.ts")}buildVolatileConfig(){if(!this.volatileChecksumConfig)return;let t=this.getVolatileConfigPath(),r=`
    import { RunMode, getChecksumConfig } from "@checksum-ai/runtime";
    
    export default getChecksumConfig(${JSON.stringify(this.config,null,2)});
    `;(0,ce.writeFileSync)(t,r)}cleanup(){this.deleteVolatileConfig(),this.childProcesses.forEach(t=>{t.kill("SIGTERM")})}async getEnvInfo(){let t={commitHash:"",branch:"branch",environment:process.env.CI?"CI":"local",name:"name",startedAt:Date.now()};try{t.commitHash=(await this.getCmdOutput("git rev-parse HEAD")).toString().trim()}catch(r){console.log("Error getting git hash",r.message)}try{t.branch=(await this.getCmdOutput("git rev-parse --abbrev-ref HEAD")).toString().trim()}catch(r){console.log("Error getting branch",r.message)}try{t.name=(await this.getCmdOutput("git log -1 --pretty=%B")).toString().trim()}catch(r){console.log("Error getting name",r.message)}return t}getVolatileConfigPath(){return(0,_e.join)(this.checksumRoot??"","checksum.config.tmp.ts")}deleteVolatileConfig(){let t=this.getVolatileConfigPath();(0,ce.existsSync)(t)&&(0,ce.rmSync)(t)}setChecksumConfig(){this.config={...require((0,_e.join)(this.checksumRoot,"checksum.config.ts")).default||{},...this.volatileChecksumConfig||{}},this.debugMode&&(this.config.options.printLogs=!0),this.config.apiURL&&(this.checksumApiUrl=this.config.apiURL)}processChecksumArguments(){this.deleteVolatileConfig();for(let t=0;t<this.args.length;t++){let r=this.args[t];if(r.startsWith("--checksum-config"))try{this.volatileChecksumConfig=JSON.parse(r.split("=")[1]),this.args.splice(t,1)}catch(i){console.log("Error parsing checksum config",i.message),this.volatileChecksumConfig=void 0}r==="--clidebug"&&this.args.splice(t,1),r==="--repl"&&this.args.splice(t,1)}}getChecksumRootOrigin(){return(0,_e.join)(this.projectRootDirectory,"node_modules","@checksum-ai","runtime","checksum-root")}locateChecksumLibs(){try{this.findProjectRoot(),this.findChecksumRoot(),Z("Project root found at",this.projectRootDirectory),Z("Checksum root found at",this.checksumRoot)}catch(t){console.log(t.message),process.exit(1)}}findProjectRoot(){let t=process.cwd();for(let r=0;r<6;r++){let i=(0,_e.join)(t,"node_modules","@checksum-ai","runtime");if((0,ce.existsSync)(i)){this.projectRootDirectory=t;return}if((0,_e.parse)(t).root===t)break;t=(0,_e.join)(t,"..")}throw new Error("Could not resolve checksum root origins")}findChecksumRoot(){let t=o(i=>{try{return(0,ce.readdirSync)(i).includes("checksum.config.ts")}catch{return!1}},"containsChecksumConfig"),r=[this.projectRootDirectory];for(;r.length;){let i=r.pop(),n=(0,ce.readdirSync)(i,{withFileTypes:!0});for(let a of n){let s=(0,_e.join)(i,a.name),l=s;if(a.isSymbolicLink())try{let h=(0,ce.readlinkSync)(s);if(!(0,ce.lstatSync)(h).isDirectory())continue;l=h}catch{continue}else if(!a.isDirectory())continue;if(a.name===Hi){if(t(l)){this.checksumRoot=l;return}}else r.push(s)}}throw new Error("Could not find checksum root folder. Run `npx checksumai init` to create one.")}};o(_l,"CLICommandBase");var Ae=_l;var Ui=require("fs");var Al=class Al{constructor(t){this.webDriver=t;this.quitListen=!1}async run(t,r){try{let i=await this.selectTime(t,r),n=await this.listenForSelection();if(!n)return;let a=await this.processAssertion(n),s=i==="before"?t[r-1]:t[r];s.assertions||(s.assertions=[]),s.assertions.push(a)}finally{this.webDriver.getTimeMachinePage().evaluate(async()=>{await window.checksum.timeMachine.goLive()})}}async selectTime(t,r){let i=await de({message:"Seek to time",choices:[{name:"Before action",value:"before"},{name:"After action",value:"after"}]}),n=o(()=>{var a;switch(i){case"before":return t[r].timestamp;case"after":return(a=t[r+1])==null?void 0:a.timestamp}},"getSeekTime");return await this.webDriver.getTimeMachinePage().evaluate(a=>window.checksum.timeMachine.goBack(a,{beforeTimestamp:!0}),n()),i}async listenForSelection(){this.webDriver.getTimeMachinePage().evaluate(()=>window.checksum.visualTestGenerator.startInspector(!0));try{this.quitListen=!1;let r=o(()=>{let i=G({message:"Waiting for selection [press anything to stop]...",default:void 0});return i.finally(()=>{}).then(()=>{this.quitListen=!0}).catch(()=>{}),i},"startQuit")();for(;!this.quitListen;)try{let i=await this.webDriver.getTimeMachinePage().evaluate(()=>window.checksum.visualTestGenerator.consumeSelections());if(i.length){try{r.cancel()}catch{}return i[0]}await B(1e3)}catch(i){console.log("error",i)}}finally{this.webDriver.getTimeMachinePage().evaluate(async()=>{await window.checksum.visualTestGenerator.stopInspector()})}}async processAssertion(t){let r={...t};console.log("Asserted element locator:",t.locator.replace("frameLocator('iframe').",""));let i=await G({message:"Thought [no thought will filter out this assertion]?",default:void 0});if(!i)return;let n=await G({message:"Override selector [no]?",default:void 0});n&&(r.selector=n,r.locator=`locator('${n}')`);let a=await G({message:'Matcher from https://playwright.dev/docs/test-assertions [e.g. toBeVisible(), not.toBeVisible(), toHaveText("hello"), toHaveCount(3)]?',default:void 0});if(a)return{thought:i,selected:!0,selector:r.selector,locator:r.locator,matcher:a}}};o(Al,"VisualAssertionsGenerator");var Da=Al;var N=require("fs"),Pl=X(Nn()),Rl=require("stream/promises"),zp=require("crypto"),Gt=require("path");var Tl,Il=class Il{constructor(t,r,i,n,a=!1){this.mode=t;this.traceDir=r;this.outputZipFilePath=i;this.frontendLogPrefix=n;this.deleteOriginalFiles=a;this.wallTimesToBeRemoved={};this.callIdsRemovals={};this.consoleLogGUIDs=[];this.numberOfLinesPerFile={};this.unarchiveFolder=(0,zp.randomUUID)();this.resourcesFolder=(0,Gt.join)(this.unarchiveFolder,"resources");this.runningIndexes={trace:0,network:0,stacks:0};this.generationAllowedAPIName=["page.goto","page.waitForNavigation","page.waitForTimeout","locator.fill","locator.click","locator.hover","locator.check","locator.uncheck","locator.dblclick","locator.dragTo"];let{createInterface:s}=require("readline/promises");Tl=s}async process(){if(this.mode==="runtime")return!1;try{if(!(0,N.existsSync)(this.traceDir))return!1;let r=(0,N.readdirSync)(this.traceDir).filter(i=>i.endsWith(".zip")).sort((i,n)=>{let a=o(h=>{try{let u=h.split(".");return parseInt(u[u.length-2])}catch{return 0}},"getIndex"),s=a(i),l=a(n);return s-l});if(!r.length)return!1;(0,N.mkdirSync)(this.unarchiveFolder),(0,N.mkdirSync)(this.resourcesFolder);for(let i of r)await this.processOne((0,Gt.join)(this.traceDir,i));if(await this.reZip(),(0,N.rmdirSync)(this.unarchiveFolder,{recursive:!0}),this.deleteOriginalFiles)for(let i of r)(0,N.rmSync)((0,Gt.join)(this.traceDir,i))}catch(t){return console.log("There was an error processing the trace files",t),!1}return!0}async processOne(t){let i=(await this.unzipAndWriteFiles(t)).trace.map(a=>(0,Gt.join)(this.unarchiveFolder,a));for(let a of i)await this.preprocessFile(a);let n=[...i];for(;n.length>0;)for(let a of n)await this.processFile(a,n)}async unzipAndWriteFiles(t){let r=(0,N.readFileSync)(t),i=await(0,Pl.loadAsync)(r),n={trace:[],network:[],stacks:[]},a=o(s=>{let l=o((h,u)=>(n[u].push(h),h),"addToUnarchivedFiles");return s.endsWith(".trace")?l(`trace${this.runningIndexes.trace++}.trace`,"trace"):s.endsWith(".network")?l(`trace${this.runningIndexes.network++}.network`,"network"):s.endsWith(".stacks")?l(`trace${this.runningIndexes.stacks++}.stacks`,"stacks"):null},"getNewFileName");for(let s of Object.keys(i.files)){let l=a(s);if(!l)continue;let h=i.file(s).nodeStream(),u=(0,N.createWriteStream)(`${this.unarchiveFolder}/${l}`);await(0,Rl.pipeline)(h,u)}for(let s of Object.keys(i.files)){if(!s.startsWith("resources/"))continue;let l=s.replace("resources/",""),h=`${this.resourcesFolder}/${l}`;if(this.mode==="generation"&&l.startsWith("src@")||(0,N.existsSync)(h))continue;let u=i.file(s).nodeStream(),c=(0,N.createWriteStream)(h);await(0,Rl.pipeline)(u,c)}return n}async reZip(){let t=await(0,Pl.loadAsync)("UEsFBgAAAAAAAAAAAAAAAAAAAAAAAA==",{base64:!0});for(let n of(0,N.readdirSync)(this.unarchiveFolder))if(n.endsWith(".network")||this.shouldIncludeStacksFiles()&&n.endsWith(".stacks")||n.endsWith(".trace")){let a=(0,N.readFileSync)((0,Gt.join)(this.unarchiveFolder,n));t.file(n,a)}let r=t.folder("resources");for(let n of(0,N.readdirSync)(this.resourcesFolder)){let a=(0,N.readFileSync)((0,Gt.join)(this.resourcesFolder,n));r.file(n,a)}let i=await t.generateAsync({type:"nodebuffer",compression:"DEFLATE"});(0,N.existsSync)(this.outputZipFilePath)&&(0,N.rmSync)(this.outputZipFilePath),(0,N.writeFileSync)(this.outputZipFilePath,i)}async preprocessFile(t){this.callIdsRemovals[t]={callIdsToBeRemoved:{},arrayOfCallIdsToBeRemoved:new Set};let r=(0,N.createReadStream)(t),i=Tl({input:r,crlfDelay:1/0}),n=0;for await(let a of i){n++;let s=JSON.parse(a);this.shouldLineBeRemoved(s)&&(s.wallTime&&(this.wallTimesToBeRemoved[s.wallTime]=!0),s.callId&&(this.callIdsRemovals[t].callIdsToBeRemoved[s.callId]=!0,this.callIdsRemovals[t].arrayOfCallIdsToBeRemoved.add(s.callId)))}this.numberOfLinesPerFile[t]=n}async processFile(t,r){var l,h;let i=[],n=(0,N.createReadStream)(t),a=Tl({input:n,crlfDelay:1/0}),s=t;for await(let u of a){let c=JSON.parse(u),f=!1;if(this.frontendLogPrefix){if(this.isChecksumConsoleLog(c)){this.consoleLogGUIDs.push(c.guid);continue}if(this.isConsoleLogMetadata(c)&&this.consoleLogGUIDs.includes((h=(l=c.params)==null?void 0:l.message)==null?void 0:h.guid))continue}if(this.lineCanBeRemoved(c)&&(this.wallTimesToBeRemoved[c.wallTime]||this.callIdsRemovals[s].callIdsToBeRemoved[c.callId]||Array.from(this.callIdsRemovals[s].arrayOfCallIdsToBeRemoved).some(d=>u.includes(`"${d}"`)))&&(f=!0),f){c.callId&&(this.callIdsRemovals[s].callIdsToBeRemoved[c.callId]=!0,this.callIdsRemovals[s].arrayOfCallIdsToBeRemoved.add(c.callId));continue}i.push(u)}if(i.length===this.numberOfLinesPerFile[s]){let u=r.indexOf(s);u>-1&&r.splice(u,1)}else this.numberOfLinesPerFile[s]=i.length,(0,N.writeFileSync)(t,i.join(`
`))}isChecksumConsoleLog(t){var r,i;return t.class==="ConsoleMessage"&&((i=(r=t.initializer)==null?void 0:r.text)==null?void 0:i.startsWith(this.frontendLogPrefix))||t.type==="console"&&t.text.startsWith(this.frontendLogPrefix)}isConsoleLogMetadata(t){return t.class==="BrowserContext"&&t.method==="console"}lineCanBeRemoved(t){return!["frame-snapshot"].includes(t.type)}shouldLineBeRemoved(t){switch(this.mode){case"runtime":return this.shouldLineBeRemoved_runtime(t);case"generation":return this.shouldLineBeRemoved_generation(t)}return!1}shouldLineBeRemoved_runtime(t){return!1}shouldIncludeStacksFiles(){return this.mode==="runtime"}shouldLineBeRemoved_generation(t){return!!t.apiName&&!this.generationAllowedAPIName.includes(t.apiName)}};o(Il,"PlaywrightTraceProcessor");var va=Il;var Hp=require("path");var Gp=require("fs");var ya=class ya{constructor(t,r,i){this.executedActions=t;this.loginFunction=r;this.settings=i;this.errors=[];this.webDriver=new Sr({fullScreenResolution:!0,baseURL:i.baseURL},{devtools:!1,headless:!1},{})}static fromJSON(t,r){let{executedActions:i,settings:n}=JSON.parse((0,Gp.readFileSync)(t,"utf-8"));return new ya(i,r,n)}async replay(){var r,i;await this.webDriver.prepare(),await this.injectHAR();let t=new Ot(this.webDriver.evaluateWithChecksum.bind(this.webDriver),()=>this.webDriver.page,()=>{},{log:console.log,logError:console.error},{navigationTimeout:30*1e3,actionTimeout:5*1e3,waitActionDelay:1e3,testAssetsDir:__dirname});await this.webDriver.startPlaywrightTrace(),this.settings.didLogin&&await this.loginFunction(this.webDriver.page);for(let n=0;n<this.executedActions.length;++n){let a=this.executedActions[n];((r=a.parentFramesSelectors)==null?void 0:r.length)>0&&(a.parentFramesSelectors=a.parentFramesSelectors.slice(1));try{console.log("Performing action",a.description),await t.performAction(a,{monitorFlashingHTML:!1})}catch{return console.error("Error performing action:",a),this.errors.push({type:"ActionError",actionIndex:n}),!1}if(!((i=a.assertions)!=null&&i.length)){await B(500);continue}for(let s of a.assertions)try{await this.replayAssertion(s)}catch(l){console.error(`Error replaying assertion ${s.locator} ${s.matcher}`,l.message),this.errors.push({type:"AssertionError",actionIndex:n,assertionIndex:a.assertions.indexOf(s)})}}await this.webDriver.stopPlaywrightTrace(this.settings.traceFilePath);try{await new va("generation",(0,Hp.dirname)(this.settings.traceFilePath),this.settings.traceFilePath,"$checksum").process()}catch(n){console.error("Error processing trace",n.message)}return!0}async report(){let t=[];if(this.errors.forEach(r=>{switch(r.type){case"ActionError":t.push(`Error performing action ${this.executedActions[r.actionIndex].description} at index ${r.actionIndex}`);break;case"AssertionError":t.push(`Error executing assertion ${this.executedActions[r.actionIndex].assertions[r.assertionIndex].thought} at index ${r.assertionIndex} of action at index ${r.actionIndex}`);break}}),!t.length){console.log("Replay successful!");return}console.error("Replay errors:"),console.error(t.join(`
`))}async replayAssertion(t){let r=(0,Fi.expect)(this.webDriver.page.locator(t.selector)),i=`async (expectCall) => expectCall.${t.matcher}`;await(0,eval)(i)(r)}async injectHAR(){let t={GET:0,POST:0,PUT:0,DELETE:0};try{await this.webDriver.page.routeFromHAR(this.settings.harFilePath,{url:"*/**",notFound:"fallback",update:!1});let r=this.webDriver.page._routes[0].handler;await this.webDriver.page.route("**/*",i=>{let n=i.request().headers(),a=i.request().method();n["Checksum-Id"]=(++t[a]).toString(),i.request()._applyFallbackOverrides({headers:n}),r(i)})}catch(r){console.error("Error setting up mock data",r.message)}}};o(ya,"TestGenerationReplayer");var Oi=ya;var $p=require("request"),ba=require("fs");var Ml=class Ml{constructor(t,r,i,n,a){this.apiBaseURL=t;this.apiKey=r;this.uploadTimeout=i;this.makeGetUploadUrlAPIPath=n;this.onOutstandingUpload=a}async uploadAsset(t){try{let{path:r}=t.info;if(console.log("Uploading file",r),await this.getSignedURLForUpload(t),!t.uploadURL){console.log("Error getting signed URL for asset",r),t.error=!0;return}let n=(0,ba.statSync)(r).size,a=(0,ba.createReadStream)(r),s=oe(new Promise((l,h)=>{var c;let u=(0,$p.put)(t.uploadURL,{body:a},(f,d)=>{f&&h(f),l(d)});(c=this.onOutstandingUpload)==null||c.call(this,{request:u,size:n})}),this.uploadTimeout);s.then(l=>{if(l.statusCode!==200)throw new Error("Upload failed");console.log("File uploaded successfully",r),t.complete=!0}).catch(l=>{console.log("Error uploading asset",r,l),t.error=!0}),t.response=s}catch{t.error=!0}}async getSignedURLForUpload(t){try{let r=t.info,i=await fetch(`${this.apiBaseURL}/${this.makeGetUploadUrlAPIPath(t)}`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",ChecksumAppCode:this.apiKey},body:JSON.stringify(r)}),{url:n}=await i.json();t.uploadURL=n}catch(r){return console.log("Error getting signed URL for artifact",r),null}}};o(Ml,"TestAssetUploader");var wa=Ml;var Vp=X(Nn()),$t=require("path"),Ct=require("fs");async function Zp(e,t){let r=await(0,Ct.readdirSync)(t);await Promise.all(r.map(async i=>{let n=(0,$t.join)(t,i);if((await(0,Ct.statSync)(n)).isDirectory()){let s=e.folder(i);await Zp(s,n)}else{let s=await(0,Ct.readFileSync)(n);e.file(i,s)}}))}o(Zp,"addFolderToZip");async function Kp(e){try{let t=await(0,Vp.loadAsync)("UEsFBgAAAAAAAAAAAAAAAAAAAAAAAA==",{base64:!0});await Zp(t,e);let r=await t.generateAsync({type:"nodebuffer",compression:"DEFLATE"}),i=(0,$t.join)((0,$t.dirname)(e),`${(0,$t.basename)(e)}.zip`);return(0,Ct.writeFileSync)(i,r),i}catch(t){return console.error("Error creating zip:",t),null}}o(Kp,"zipFolder");var Jp=require("fs"),Yp=require("path");var Ll=!1,Bl={story:{goal:"Send email via outreach list",instructions:"Make sure to select a user from the list first"},shouldLogin:!0,environment:{name:void 0,userRole:void 0}},Ol=class Ol extends Ae{constructor(r,i=!1){super(r,i);this.checksumScriptFilePath="node_modules/@checksum-ai/runtime/checksumlib.js";this.mode="both";this.stopLoop=!1;this.completedSuccessfully=!1;this.executedActions=[];this.initTimeMachine=o(async(r=!1)=>{await this.webDriver.getTimeMachinePage().evaluate(({shouldHandleEvents:i})=>window.checksum.visualTestGenerator.init(i),{shouldHandleEvents:r})},"initTimeMachine");this.login=o(async(r=this.webDriver.page)=>{await xs({config:this.config,folder:this.checksumRoot})(r,{role:this.environment.userRole,environment:this.environment.name})},"login")}async run(){await this.init();let r=this.args.find(n=>n.startsWith("--replay"));if(r){let n=r.split("=")[1];return this.loadAndReplay(n)}let i=this.args.find(n=>n.startsWith("--upload"));if(i){let n=i.split("=")[1];return this.uploadFromFolder(n)}await this.prepare(),await this.start(),await this.backup(),await this.replay(),await this.upload()}async loadAndReplay(r){let{executedActions:i,settings:n}=this.loadFile(r),a=new Oi(i,this.login,n);await a.replay(),a.report()}async uploadFromFolder(r){this.loadFile(r),await this.upload()}loadFile(r){let i=JSON.parse((0,Jp.readFileSync)(r,"utf-8")),{executedActions:n,settings:a,testGenerationId:s}=i;return this.executedActions=n,this.testGenerationId=s,this.assetsFolderPath=(0,Yp.dirname)(r),i}async init(){await this.patchPlaywright(),this.loadChecksumData(),this.apiBaseURL=this.checksumApiUrl+"/client-api/runtime"}async prepare({createAssetsFolder:r=!0}={}){this.webDriver=this.buildWebDriver(),this.timeMachineSync=new Ci(this.webDriver,this.initTimeMachine);let i={onActionExecuted:o(n=>Array.isArray(n)?this.executedActions.push(...n):this.executedActions.push(n),"onActionExecuted"),stop:o(()=>{this.stopLoop=!0},"stop"),onSuccess:o(()=>{this.completedSuccessfully=!0},"onSuccess"),generateAssertions:o(()=>this.generateAssertions(!1),"generateAssertions"),getExecutedActions:o(()=>this.executedActions,"getExecutedActions")};this.pageInteractor=new Ot(this.webDriver.evaluateWithChecksum.bind(this.webDriver),()=>this.webDriver.page,()=>{},{log:console.log,logError:console.error},{navigationTimeout:30*1e3,actionTimeout:5*1e3,waitActionDelay:1e3,testAssetsDir:__dirname}),r&&this.createTestGenerationAssetsFolders(),this.mode=await de({message:"Run mode?",choices:[{name:"AI and Manual",value:"both"},{name:"AI only",value:"ai"},{name:"Manual only",value:"manual"}]}),["manual","both"].includes(this.mode)&&(this.manualStepGenerator=new da(this.webDriver,this.pageInteractor,i)),["ai","both"].includes(this.mode)&&(this.aiStepGenerator=new ga(this.webDriver,this.pageInteractor,this.apiBaseURL,this.config.apiKey,i),await this.aiStepGenerator.init())}async start(){var i,n,a;this.story=await this.getStory(),this.aiStepGenerator&&this.aiStepGenerator.setStory(this.story),(i=this.story)!=null&&i.environment&&(this.environment=this.story.environment);let r=Ll?Bl.shouldLogin:await de({message:"Auto login?",choices:[{name:"Yes",value:!0},{name:"No",value:!1}]});if(r&&!this.environment&&(Ll?this.environment=Bl.environment:(this.environment={},this.environment.name=await G({message:"Environment name to use [optional]?"}),this.environment.name||(this.environment.name=void 0),this.environment.userRole=await G({message:"Role to login as [optional]?"}),this.environment.userRole||(this.environment.userRole=void 0))),await this.webDriver.prepare(),await this.webDriver.addHARMockAPIRecordings(this.getHarFilePath()),await this.timeMachineSync.start(),this.didLogin=!1,r)try{await this.login(),this.didLogin=!0}catch{console.error("Failed to execute login function")}if(!r||!this.didLogin||(n=this.story)!=null&&n.url){let s=(a=this.story)!=null&&a.url?this.story.url:this.config.baseURL;if(await this.webDriver.getCurrentURL()!=s){let l=new Er(this.webDriver.page);l.startListening(),await this.webDriver.navigate(s),await l.wait(),this.executedActions.push({description:"Navigate to start URL",eventCode:"navigation",fillValue:s}),await B(2e3)}}for(await this.timeMachineSync.enableEventsHandling();!this.stopLoop;)await this.iterate();console.log(this.completedSuccessfully?"Test completed successfully":"Test failed"),await this.webDriver.shutdown(),await B(2e3)}async backup(){let r={executedActions:this.executedActions,testGenerationId:this.testGenerationId,settings:{baseURL:this.config.baseURL,assetsFolderPath:this.assetsFolderPath,didLogin:this.didLogin,traceFilePath:this.getTraceFilePath(),harFilePath:this.getHarFilePath()}};(0,Ui.writeFileSync)(`${this.assetsFolderPath}/test.json`,JSON.stringify(r,null,2))}async replay(){let r=new Oi(this.executedActions,this.login,{baseURL:this.config.baseURL,assetsFolderPath:this.assetsFolderPath,didLogin:this.didLogin,traceFilePath:this.getTraceFilePath(),harFilePath:this.getHarFilePath()});await r.replay(),r.report()}async upload(){try{if(!this.testGenerationId){console.log("No test generation id, can't upload");return}this.testAssetUploader=new wa(this.apiBaseURL,this.config.apiKey,null,()=>`test-generation/${this.testGenerationId}/get-upload-url`);let r=o(s=>({complete:!1,error:!1,response:void 0,info:s}),"buildUploadAsset"),i=r({type:"trace",path:this.getTraceFilePath()}),n=r({type:"har",path:await Kp(this.getHarFolderPath())});await Promise.all([this.testAssetUploader.uploadAsset(i),this.testAssetUploader.uploadAsset(n)]);let a=await fetch(`${this.apiBaseURL}/test-generation/${this.testGenerationId}/completed`,{method:"POST",headers:{"Content-Type":"application/json",ChecksumAppCode:this.config.apiKey},body:JSON.stringify({actions:this.executedActions})})}catch(r){console.error("Failed to upload test",r)}}async getStory(){if(Ll)return Bl.story;let r=await G({message:"User story id [can't upload test without it]?"});if(r){let s=await fetch(`${this.apiBaseURL}/test-generation/init/${r}`,{method:"POST",headers:{"Content-Type":"application/json",ChecksumAppCode:this.config.apiKey}}),{testGenerationId:l,title:h,steps:u,startUrl:c,userRole:f,environment:d}=await s.json();return this.testGenerationId=l,{goal:h,instructions:u,url:c,environment:{userRole:f,name:d}}}if(this.mode==="manual"&&!await de({message:"Would you like to set the user story parameters (goal, instructions, start url)?",choices:[{name:"Yes",value:!0},{name:"No",value:!1}]}))return;let i=await G({message:"Test goal?"});if(!i)throw new Error("Test goal is required");let n=await G({message:"Special instructions for the test [optional]?"}),a=await G({message:"URL to start from [optional]?"});return{goal:i,instructions:n,url:a}}async iterate(){let r=[{name:"Generate assertion",value:"GenerateAssertions"}];["manual","both"].includes(this.mode)&&r.push({name:"Manual step",value:"PerformManualAction"}),["ai","both"].includes(this.mode)&&r.push({name:"AI step",value:"PerformAIAction"}),r.push({name:"Finish",value:"Finish"}),r.push({name:"Abort (no code will be generated)",value:"Abort"});let i=await de({message:"Next step?",choices:r});try{switch(i){case"PerformManualAction":return await this.timeMachineSync.enableEventsHandling(),this.manualStepGenerator.run(this.aiIterationEndTimestamp);case"PerformAIAction":await this.timeMachineSync.disableEventsHandling(),await this.aiStepGenerator.run(this.executedActions),this.aiIterationEndTimestamp=Date.now();return;case"GenerateAssertions":return this.generateAssertions(!1);case"Finish":this.completedSuccessfully=!0,this.stopLoop=!0;break;case"Abort":this.stopLoop=!0;break}}catch(n){return console.log("Something unexpected occurred, please try again...",n),await B(2e3),this.iterate()}}async generateAssertions(r=!0){if(r&&await G({message:"Generate assertion?",default:"yes"})!=="yes")return;let i=await de({message:"Assertion for which action?",choices:this.executedActions.map((n,a)=>({name:n.description,value:a}))});await new Da(this.webDriver).run(this.executedActions,i)}buildWebDriver(){return new Sr({scriptSource:"url",scriptURL:"http://localhost:3001/index.js",scriptFile:this.checksumScriptFilePath,fullScreenResolution:!0,baseURL:this.config.baseURL},{devtools:!1,headless:!1},{useTimeMachine:!0,frontendAppSpecificRules:{},frontendTestGenerationConfig:{logPrefix:"$checksum"}})}createTestGenerationAssetsFolders(){this.assetsFolderPath=this.projectRootDirectory+`/tg-assets/${Date.now()}`,(0,Ui.mkdirSync)(this.assetsFolderPath,{recursive:!0}),(0,Ui.mkdirSync)(this.getHarFolderPath(),{recursive:!0})}getHarFolderPath(){return this.assetsFolderPath+"/har"}getHarFilePath(){return`${this.getHarFolderPath()}/har.har`}getTraceFilePath(){return`${this.assetsFolderPath}/trace.zip`}};o(Ol,"VisualTestGenerator");var Ca=Ol;var Xp=require("fs"),Qp=X(require("child_process")),Ni=require("path");var Ul=class Ul extends Ae{constructor(r,i=!1){super(r,i);this.MAX_COMPLETION_WAIT=10*60*1e3;this.TEST_RUN_MONITOR_PATH=(0,Ni.join)(__dirname,"test-run-monitor.js");this.didFail=!1;this.isolationMode=!1;this.replMode=!1;this.completeIndicators={upload:!1,tests:!1,report:!1};this.uploadProgress=0;this.replMode=r.includes("--repl")}async run(){if(this.loadChecksumData(),!await this.getSession())return;let r;try{r=await oe(this.startTestRunMonitor(this.testSession),1e4,"test run monitor timeout")}catch{console.log("Error starting test run monitor. Test results will not be available on checksum.")}this.buildVolatileConfig();let i={CHECKSUM_ROOT_FOLDER:this.checksumRoot};r&&(i.CHECKSUM_UPLOAD_AGENT_PORT=r),this.config.options.hostReports&&(i.PW_TEST_HTML_REPORT_OPEN="never"),this.testSession&&this.testSession!=="isolated-session"&&(i.CHECKSUM_TEST_SUITE_ID=this.testSession),this.replMode&&(i.CHECKSUM_REPL="true");let n=[...this.args];this.replMode&&n.push("--debug");let a=`npx playwright test --config "${this.getPlaywrightConfigFilePath()}" ${n.map(s=>`"${s}"`).join(" ")}`;await this.patchPlaywright();try{console.log(`Tests running with @checksum-ai/runtime version ${require("./package.json").version}`),this.replMode?(console.log("Running in REPL mode"),this.execCmd(a,i),await this.execCmd(`node ${__dirname}/repl.js`,i)):await this.execCmd(a,i),console.log("Tests execution finished")}catch{this.didFail=!0,console.log("Error during test execution: Failed passing test")}finally{this.isolationMode||console.log("Waiting for test files to upload to Checksum..."),this.sendReportUploadRequest(),await this.patchPlaywright(!0),this.completeIndicators.tests=!0,await this.handleCompleteMessage()}}getPlaywrightReportPath(){var n;let r=o(a=>(Z("Using report folder",a),(0,Ni.join)(a,"index.html")),"makeFilePath");if(process.env.PLAYWRIGHT_HTML_REPORT)return r(process.env.PLAYWRIGHT_HTML_REPORT);let i=(n=this.playwrightConfig)==null?void 0:n.reporter;if(i instanceof Array){let s=i.filter(l=>l instanceof Array&&l[0]==="html").find(l=>{var h;return(h=l[1])==null?void 0:h.outputFolder});if(s)return r((0,Ni.join)(this.checksumRoot,s[1].outputFolder))}return r((0,Ni.join)(this.projectRootDirectory,"playwright-report"))}sendReportUploadRequest(){let r=this.getPlaywrightReportPath();if(!(0,Xp.existsSync)(r)){console.log(`Could not find report file at ${r}`),this.completeIndicators.report=!0;return}Z("Sending report upload request",r),this.testRunMonitorProcess.stdin.write(`cli:report=${r}`)}startTestRunMonitor(r){return new Promise(i=>{console.log("Starting test run monitor"),this.testRunMonitorProcess=Qp.spawn("node",[this.TEST_RUN_MONITOR_PATH,JSON.stringify({sessionId:r,checksumApiURL:this.checksumApiUrl,apiKey:this.config.apiKey}),...this.isolationMode?["isolated"]:[]]),this.testRunMonitorProcess.stdout.on("data",n=>{let a=n.toString().trim();if(Z("[trm] "+a),!a.startsWith("monitor"))return;let[s,l]=a.substring(a.indexOf(":")+1).split("=");s==="port"?i(l):this.handleTestRunMonitorMessage(s,l)}),this.testRunMonitorProcess.on("exit",(n,a)=>{console.log(`test run monitor process exited with code ${n} and signal ${a}`)}),this.testRunMonitorProcess.stderr.on("data",n=>{this.debugMode&&console.error("[trm] Error:",n.toString())}),this.testRunMonitorProcess.on("error",n=>{console.error(`Error starting test run monitor: ${n.message}`)})})}async handleTestRunMonitorMessage(r,i){switch(Z(`Handling test run monitor message ${this.isolationMode?"(isolation mode)":""}`,r,i),r){case"complete-with-errors":console.log("Error uploading test files to Checksum"),this.sendProcessingError().then(()=>{this.completeIndicators.upload=!0});break;case"complete":this.isolationMode||console.log("Test files uploaded successfully"),this.sendUploadsComplete().then(()=>{this.completeIndicators.upload=!0});break;case"report-complete":{if(this.isolationMode){this.completeIndicators.report=!0;break}let n=i.slice(0,i.indexOf(":"))==="true",a=i.slice(i.indexOf(":")+1),s={};try{s=JSON.parse(a)}catch(l){console.log("Error parsing stats",l.message)}if(await this.sendTestRunEnd(s),this.completeIndicators.report=!0,n){let l=`Checksum report URL: ${this.checksumAppUrl}/#/test-runs/${this.testSession}`,h="*".repeat(l.length);console.log(`${h}
${l}
${h}`)}else console.log("An error occurred while uploading the test report to Checksum");break}case"upload-progress":{let n=parseInt(i);(n<this.uploadProgress||n>=this.uploadProgress+10||n===100&&this.uploadProgress!==100)&&(this.uploadProgress=n,console.log(`[ Uploads progress: ${this.uploadProgress}% ]`))}break;case"log":console.log(i);break;case"playwrightConfig":this.playwrightConfig=JSON.parse(i);break;default:console.warn(`Unhandled test run monitor message: ${r}=${i}`)}}async handleCompleteMessage(){let r=Date.now();for(;;){if(Date.now()-r>this.MAX_COMPLETION_WAIT){console.log("An error occurred and Checksum wasn't able to complete processing the test suite."),this.shutdown(1);return}Object.keys(this.completeIndicators).find(i=>!this.completeIndicators[i])?(Z(this.completeIndicators),await B(1e3)):(console.log("Checksum test run complete"),this.shutdown(this.didFail?1:0))}}shutdown(r=0){this.cleanup(),process.exit(r)}cleanup(){var r,i;super.cleanup(),(r=this.testRunMonitorProcess)==null||r.stdin.write("cli:shutdown"),(i=this.testRunMonitorProcess)==null||i.kill()}async getSession(){try{if(!this.config.options.hostReports)return this.setIsolatedMode(),!0;let r=this.config.apiKey;if(!r||r==="<API key>")return this.printError("No API key found in checksum config - please set it in the config file - checksum.config.ts"),this.shutdown(1),!1;let i=JSON.stringify(await this.getEnvInfo()),n=await fetch(`${this.checksumApiUrl}/client-api/test-runs`,{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json",ChecksumAppCode:r},body:i});return this.testSession=(await n.json()).uuid,!0}catch{return console.log("Error connecting to Checksum, the report will not be hosted"),this.setIsolatedMode(),!0}}setIsolatedMode(){this.isolationMode=!0,this.testSession="isolated-session"}async sendTestRunEnd(r){if(!this.isolationMode)try{Z("Sending test run end",r);let i="{}";try{i=JSON.stringify({...r,endedAt:Date.now()})}catch(n){console.log("Error stringifying stats",n.message,r)}await this.updateTestRun(`${this.checksumApiUrl}/client-api/test-runs/${this.testSession}`,"PATCH",i)}catch(i){return console.log("Error sending test run end",i.message),null}}async sendUploadsComplete(){if(!this.isolationMode)try{await this.updateTestRun(`${this.checksumApiUrl}/client-api/test-runs/${this.testSession}/uploads-completed`,"PATCH")}catch(r){console.log("Error sending test run uploads complete",r.message)}}async sendProcessingError(){if(!this.isolationMode)try{await this.updateTestRun(`${this.checksumApiUrl}/client-api/test-runs/${this.testSession}/process-error`,"PATCH")}catch(r){console.log("Error sending test run processing error",r.message)}}async updateTestRun(r,i,n=void 0){let a=await fetch(r,{method:i,headers:{Accept:"application/json","Content-Type":"application/json",ChecksumAppCode:this.config.apiKey},body:n});return Z("Received update test run response from url:",r),await this.logApiResponse(a),a}async logApiResponse(r){try{if(!r.ok){Z("HTTP Error:",r.status,r.statusText);let n=await r.text();Z("Error Details:",n);return}r.headers.get("Content-Type").includes("application/json")?r.json().then(n=>{Z("API Response:",n)}):r.text().then(n=>{Z("API Response:",n)})}catch(i){Z("Error logging API response",i.message)}}};o(Ul,"TestsRunner");var ka=Ul;var Nl=class Nl extends Ae{constructor(t,r=!1){super(t,r)}async run(t){switch(t){default:console.log(`
Checksum CLI
Usage: checksum [command] [options]

Commands:
init                            installs checksum files and folders
test [options] [test-filter...] runs checksum tests
help                            prints this help message
show-report [options] [report]  show HTML report
`);break;case"test":try{let i=(await this.getCmdOutput("npx playwright test --help")).replace(/npx playwright/g,"yarn checksum").split(`
`);i.splice(5,0,"  --checksum-config=<config>   Checksum configuration in JSON format").join(`
`),console.log(i.join(`
`))}catch(r){console.log("Error",r.message)}break;case"show-report":try{let i=(await this.getCmdOutput("npx playwright show-report --help")).replace(/npx playwright/g,"yarn checksum");console.log(i)}catch(r){console.log("Error",r.message)}break;case"generate":console.log("Not implemented yet");break}}};o(Nl,"CLIHelp");var Wi=Nl;var Wl=class Wl extends Ae{constructor(t,r=!1){super(t,r)}async run(){let t=`npx playwright show-report ${this.args.join(" ")}`;try{await this.execCmd(t)}catch(r){console.log("Error showing report",r.message)}}};o(Wl,"CLIShowReport");var xa=Wl;var Oe=require("fs"),Vt=require("path");var ql=class ql extends Ae{constructor(t,r=!1){super(t,r)}run(){console.log("Creating Checksum directory and necessary files to run your tests");try{this.findProjectRoot()}catch(i){console.log(i.message),process.exit(1)}let t=(0,Vt.join)(process.cwd(),Hi);if((0,Oe.existsSync)(t)||(0,Oe.mkdirSync)(t),!(0,Oe.existsSync)(this.getChecksumRootOrigin()))throw new Error("Could not find checksum root directory, please install @checksum-ai/runtime package");let r=(0,Oe.existsSync)((0,Vt.join)(t,"checksum.config.ts"));Zl({isInit:!r}).forEach(i=>{let n=(0,Vt.join)(t,i);(0,Oe.existsSync)(n)||(0,Oe.copyFileSync)((0,Vt.join)(this.getChecksumRootOrigin(),i),n)}),(0,Oe.mkdirSync)((0,Vt.join)(t,"tests"),{recursive:!0}),["esra","har","trace","log"].forEach(i=>{(0,Oe.mkdirSync)((0,Vt.join)(t,"test-data",i),{recursive:!0})})}};o(ql,"CLIInstall");var Sa=ql;var jl=class jl{constructor(){}async execute(){let t=!!process.argv.find(i=>i==="--clidebug");t&&ks(!0);let r=process.argv.slice(3);switch(process.argv.find(i=>i==="--help"||i==="-h")&&(await new Wi(r,t).run(process.argv[2]),process.exit(0)),process.argv[2]){case"init":new Sa(r,t).run();break;case"test":await new ka(r,t).run();break;case"show-report":await new xa(r,t).run();break;case"generate":try{await new Ca(r,t).run()}catch(i){console.log("Error",i.message)}break;default:await new Wi(r,t).run()}process.exit(0)}};o(jl,"CLIDispatcher");var Ea=jl;(async()=>await new Ea().execute())();
/*! Bundled license information:

playwright-extra/dist/index.cjs.js:
  (*!
   * playwright-extra v4.3.5 by berstend
   * https://github.com/berstend/puppeteer-extra/tree/master/packages/playwright-extra#readme
   * @license MIT
   *)
*/
