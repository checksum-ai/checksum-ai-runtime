(()=>{var W0=Object.create;var hu=Object.defineProperty;var B0=Object.getOwnPropertyDescriptor;var V0=Object.getOwnPropertyNames;var U0=Object.getPrototypeOf,G0=Object.prototype.hasOwnProperty;var a=(n,e)=>hu(n,"name",{value:e,configurable:!0});var Do=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var z0=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of V0(e))!G0.call(n,i)&&i!==t&&hu(n,i,{get:()=>e[i],enumerable:!(r=B0(e,i))||r.enumerable});return n};var Xi=(n,e,t)=>(t=n!=null?W0(U0(n)):{},z0(e||!n||!n.__esModule?hu(t,"default",{value:n,enumerable:!0}):t,n));var ko=Do((oD,bm)=>{bm.exports=n=>new Promise(e=>setTimeout(e,n))});var Cm=Do((jn,es)=>{(function(){var n,e="4.17.21",t=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",c="__lodash_hash_undefined__",u=500,d="__lodash_placeholder__",f=1,p=2,g=4,y=1,b=2,E=1,C=2,w=4,M=8,N=16,A=32,_=64,z=128,G=256,ee=512,V=30,j="...",oe=800,W=16,q=1,B=2,te=3,Q=1/0,Y=9007199254740991,we=17976931348623157e292,Fe=NaN,_e=4294967295,mr=_e-1,pe=_e>>>1,lt=[["ary",z],["bind",E],["bindKey",C],["curry",M],["curryRight",N],["flip",ee],["partial",A],["partialRight",_],["rearg",G]],st="[object Arguments]",tt="[object Array]",cn="[object AsyncFunction]",Pt="[object Boolean]",It="[object Date]",gr="[object DOMException]",Hr="[object Error]",yr="[object Function]",xe="[object GeneratorFunction]",Ke="[object Map]",Ne="[object Number]",Ue="[object Null]",rt="[object Object]",Te="[object Promise]",Li="[object Proxy]",Ni="[object RegExp]",qt="[object Set]",Oi="[object String]",Gs="[object Symbol]",sE="[object Undefined]",_i="[object WeakMap]",oE="[object WeakSet]",Di="[object ArrayBuffer]",Nn="[object DataView]",zl="[object Float32Array]",ql="[object Float64Array]",jl="[object Int8Array]",Kl="[object Int16Array]",Yl="[object Int32Array]",Xl="[object Uint8Array]",Zl="[object Uint8ClampedArray]",Ql="[object Uint16Array]",Jl="[object Uint32Array]",aE=/\b__p \+= '';/g,lE=/\b(__p \+=) '' \+/g,cE=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Wh=/&(?:amp|lt|gt|quot|#39);/g,Bh=/[&<>"']/g,uE=RegExp(Wh.source),dE=RegExp(Bh.source),hE=/<%-([\s\S]+?)%>/g,fE=/<%([\s\S]+?)%>/g,Vh=/<%=([\s\S]+?)%>/g,pE=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mE=/^\w*$/,gE=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ec=/[\\^$.*+?()[\]{}|]/g,yE=RegExp(ec.source),tc=/^\s+/,vE=/\s/,bE=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,EE=/\{\n\/\* \[wrapped with (.+)\] \*/,SE=/,? & /,wE=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,xE=/[()=,{}\[\]\/\s]/,CE=/\\(\\)?/g,ME=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Uh=/\w*$/,TE=/^[-+]0x[0-9a-f]+$/i,IE=/^0b[01]+$/i,AE=/^\[object .+?Constructor\]$/,RE=/^0o[0-7]+$/i,LE=/^(?:0|[1-9]\d*)$/,NE=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,zs=/($^)/,OE=/['\n\r\u2028\u2029\\]/g,qs="\\ud800-\\udfff",_E="\\u0300-\\u036f",DE="\\ufe20-\\ufe2f",kE="\\u20d0-\\u20ff",Gh=_E+DE+kE,zh="\\u2700-\\u27bf",qh="a-z\\xdf-\\xf6\\xf8-\\xff",PE="\\xac\\xb1\\xd7\\xf7",FE="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",HE="\\u2000-\\u206f",$E=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",jh="A-Z\\xc0-\\xd6\\xd8-\\xde",Kh="\\ufe0e\\ufe0f",Yh=PE+FE+HE+$E,rc="['\u2019]",WE="["+qs+"]",Xh="["+Yh+"]",js="["+Gh+"]",Zh="\\d+",BE="["+zh+"]",Qh="["+qh+"]",Jh="[^"+qs+Yh+Zh+zh+qh+jh+"]",nc="\\ud83c[\\udffb-\\udfff]",VE="(?:"+js+"|"+nc+")",ef="[^"+qs+"]",ic="(?:\\ud83c[\\udde6-\\uddff]){2}",sc="[\\ud800-\\udbff][\\udc00-\\udfff]",On="["+jh+"]",tf="\\u200d",rf="(?:"+Qh+"|"+Jh+")",UE="(?:"+On+"|"+Jh+")",nf="(?:"+rc+"(?:d|ll|m|re|s|t|ve))?",sf="(?:"+rc+"(?:D|LL|M|RE|S|T|VE))?",of=VE+"?",af="["+Kh+"]?",GE="(?:"+tf+"(?:"+[ef,ic,sc].join("|")+")"+af+of+")*",zE="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",qE="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",lf=af+of+GE,jE="(?:"+[BE,ic,sc].join("|")+")"+lf,KE="(?:"+[ef+js+"?",js,ic,sc,WE].join("|")+")",YE=RegExp(rc,"g"),XE=RegExp(js,"g"),oc=RegExp(nc+"(?="+nc+")|"+KE+lf,"g"),ZE=RegExp([On+"?"+Qh+"+"+nf+"(?="+[Xh,On,"$"].join("|")+")",UE+"+"+sf+"(?="+[Xh,On+rf,"$"].join("|")+")",On+"?"+rf+"+"+nf,On+"+"+sf,qE,zE,Zh,jE].join("|"),"g"),QE=RegExp("["+tf+qs+Gh+Kh+"]"),JE=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,eS=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],tS=-1,He={};He[zl]=He[ql]=He[jl]=He[Kl]=He[Yl]=He[Xl]=He[Zl]=He[Ql]=He[Jl]=!0,He[st]=He[tt]=He[Di]=He[Pt]=He[Nn]=He[It]=He[Hr]=He[yr]=He[Ke]=He[Ne]=He[rt]=He[Ni]=He[qt]=He[Oi]=He[_i]=!1;var De={};De[st]=De[tt]=De[Di]=De[Nn]=De[Pt]=De[It]=De[zl]=De[ql]=De[jl]=De[Kl]=De[Yl]=De[Ke]=De[Ne]=De[rt]=De[Ni]=De[qt]=De[Oi]=De[Gs]=De[Xl]=De[Zl]=De[Ql]=De[Jl]=!0,De[Hr]=De[yr]=De[_i]=!1;var rS={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},nS={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},iS={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},sS={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},oS=parseFloat,aS=parseInt,cf=typeof global=="object"&&global&&global.Object===Object&&global,lS=typeof self=="object"&&self&&self.Object===Object&&self,ot=cf||lS||Function("return this")(),ac=typeof jn=="object"&&jn&&!jn.nodeType&&jn,un=ac&&typeof es=="object"&&es&&!es.nodeType&&es,uf=un&&un.exports===ac,lc=uf&&cf.process,Ft=function(){try{var R=un&&un.require&&un.require("util").types;return R||lc&&lc.binding&&lc.binding("util")}catch{}}(),df=Ft&&Ft.isArrayBuffer,hf=Ft&&Ft.isDate,ff=Ft&&Ft.isMap,pf=Ft&&Ft.isRegExp,mf=Ft&&Ft.isSet,gf=Ft&&Ft.isTypedArray;function At(R,D,O){switch(O.length){case 0:return R.call(D);case 1:return R.call(D,O[0]);case 2:return R.call(D,O[0],O[1]);case 3:return R.call(D,O[0],O[1],O[2])}return R.apply(D,O)}a(At,"apply");function cS(R,D,O,X){for(var ae=-1,Me=R==null?0:R.length;++ae<Me;){var nt=R[ae];D(X,nt,O(nt),R)}return X}a(cS,"arrayAggregator");function Ht(R,D){for(var O=-1,X=R==null?0:R.length;++O<X&&D(R[O],O,R)!==!1;);return R}a(Ht,"arrayEach");function uS(R,D){for(var O=R==null?0:R.length;O--&&D(R[O],O,R)!==!1;);return R}a(uS,"arrayEachRight");function yf(R,D){for(var O=-1,X=R==null?0:R.length;++O<X;)if(!D(R[O],O,R))return!1;return!0}a(yf,"arrayEvery");function $r(R,D){for(var O=-1,X=R==null?0:R.length,ae=0,Me=[];++O<X;){var nt=R[O];D(nt,O,R)&&(Me[ae++]=nt)}return Me}a($r,"arrayFilter");function Ks(R,D){var O=R==null?0:R.length;return!!O&&_n(R,D,0)>-1}a(Ks,"arrayIncludes");function cc(R,D,O){for(var X=-1,ae=R==null?0:R.length;++X<ae;)if(O(D,R[X]))return!0;return!1}a(cc,"arrayIncludesWith");function Ge(R,D){for(var O=-1,X=R==null?0:R.length,ae=Array(X);++O<X;)ae[O]=D(R[O],O,R);return ae}a(Ge,"arrayMap");function Wr(R,D){for(var O=-1,X=D.length,ae=R.length;++O<X;)R[ae+O]=D[O];return R}a(Wr,"arrayPush");function uc(R,D,O,X){var ae=-1,Me=R==null?0:R.length;for(X&&Me&&(O=R[++ae]);++ae<Me;)O=D(O,R[ae],ae,R);return O}a(uc,"arrayReduce");function dS(R,D,O,X){var ae=R==null?0:R.length;for(X&&ae&&(O=R[--ae]);ae--;)O=D(O,R[ae],ae,R);return O}a(dS,"arrayReduceRight");function dc(R,D){for(var O=-1,X=R==null?0:R.length;++O<X;)if(D(R[O],O,R))return!0;return!1}a(dc,"arraySome");var hS=hc("length");function fS(R){return R.split("")}a(fS,"asciiToArray");function pS(R){return R.match(wE)||[]}a(pS,"asciiWords");function vf(R,D,O){var X;return O(R,function(ae,Me,nt){if(D(ae,Me,nt))return X=Me,!1}),X}a(vf,"baseFindKey");function Ys(R,D,O,X){for(var ae=R.length,Me=O+(X?1:-1);X?Me--:++Me<ae;)if(D(R[Me],Me,R))return Me;return-1}a(Ys,"baseFindIndex");function _n(R,D,O){return D===D?TS(R,D,O):Ys(R,bf,O)}a(_n,"baseIndexOf");function mS(R,D,O,X){for(var ae=O-1,Me=R.length;++ae<Me;)if(X(R[ae],D))return ae;return-1}a(mS,"baseIndexOfWith");function bf(R){return R!==R}a(bf,"baseIsNaN");function Ef(R,D){var O=R==null?0:R.length;return O?pc(R,D)/O:Fe}a(Ef,"baseMean");function hc(R){return function(D){return D==null?n:D[R]}}a(hc,"baseProperty");function fc(R){return function(D){return R==null?n:R[D]}}a(fc,"basePropertyOf");function Sf(R,D,O,X,ae){return ae(R,function(Me,nt,Oe){O=X?(X=!1,Me):D(O,Me,nt,Oe)}),O}a(Sf,"baseReduce");function gS(R,D){var O=R.length;for(R.sort(D);O--;)R[O]=R[O].value;return R}a(gS,"baseSortBy");function pc(R,D){for(var O,X=-1,ae=R.length;++X<ae;){var Me=D(R[X]);Me!==n&&(O=O===n?Me:O+Me)}return O}a(pc,"baseSum");function mc(R,D){for(var O=-1,X=Array(R);++O<R;)X[O]=D(O);return X}a(mc,"baseTimes");function yS(R,D){return Ge(D,function(O){return[O,R[O]]})}a(yS,"baseToPairs");function wf(R){return R&&R.slice(0,Tf(R)+1).replace(tc,"")}a(wf,"baseTrim");function Rt(R){return function(D){return R(D)}}a(Rt,"baseUnary");function gc(R,D){return Ge(D,function(O){return R[O]})}a(gc,"baseValues");function ki(R,D){return R.has(D)}a(ki,"cacheHas");function xf(R,D){for(var O=-1,X=R.length;++O<X&&_n(D,R[O],0)>-1;);return O}a(xf,"charsStartIndex");function Cf(R,D){for(var O=R.length;O--&&_n(D,R[O],0)>-1;);return O}a(Cf,"charsEndIndex");function vS(R,D){for(var O=R.length,X=0;O--;)R[O]===D&&++X;return X}a(vS,"countHolders");var bS=fc(rS),ES=fc(nS);function SS(R){return"\\"+sS[R]}a(SS,"escapeStringChar");function wS(R,D){return R==null?n:R[D]}a(wS,"getValue");function Dn(R){return QE.test(R)}a(Dn,"hasUnicode");function xS(R){return JE.test(R)}a(xS,"hasUnicodeWord");function CS(R){for(var D,O=[];!(D=R.next()).done;)O.push(D.value);return O}a(CS,"iteratorToArray");function yc(R){var D=-1,O=Array(R.size);return R.forEach(function(X,ae){O[++D]=[ae,X]}),O}a(yc,"mapToArray");function Mf(R,D){return function(O){return R(D(O))}}a(Mf,"overArg");function Br(R,D){for(var O=-1,X=R.length,ae=0,Me=[];++O<X;){var nt=R[O];(nt===D||nt===d)&&(R[O]=d,Me[ae++]=O)}return Me}a(Br,"replaceHolders");function Xs(R){var D=-1,O=Array(R.size);return R.forEach(function(X){O[++D]=X}),O}a(Xs,"setToArray");function MS(R){var D=-1,O=Array(R.size);return R.forEach(function(X){O[++D]=[X,X]}),O}a(MS,"setToPairs");function TS(R,D,O){for(var X=O-1,ae=R.length;++X<ae;)if(R[X]===D)return X;return-1}a(TS,"strictIndexOf");function IS(R,D,O){for(var X=O+1;X--;)if(R[X]===D)return X;return X}a(IS,"strictLastIndexOf");function kn(R){return Dn(R)?RS(R):hS(R)}a(kn,"stringSize");function jt(R){return Dn(R)?LS(R):fS(R)}a(jt,"stringToArray");function Tf(R){for(var D=R.length;D--&&vE.test(R.charAt(D)););return D}a(Tf,"trimmedEndIndex");var AS=fc(iS);function RS(R){for(var D=oc.lastIndex=0;oc.test(R);)++D;return D}a(RS,"unicodeSize");function LS(R){return R.match(oc)||[]}a(LS,"unicodeToArray");function NS(R){return R.match(ZE)||[]}a(NS,"unicodeWords");var OS=a(function R(D){D=D==null?ot:Vr.defaults(ot.Object(),D,Vr.pick(ot,eS));var O=D.Array,X=D.Date,ae=D.Error,Me=D.Function,nt=D.Math,Oe=D.Object,vc=D.RegExp,_S=D.String,$t=D.TypeError,Zs=O.prototype,DS=Me.prototype,Pn=Oe.prototype,Qs=D["__core-js_shared__"],Js=DS.toString,Ae=Pn.hasOwnProperty,kS=0,If=function(){var s=/[^.]+$/.exec(Qs&&Qs.keys&&Qs.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),eo=Pn.toString,PS=Js.call(Oe),FS=ot._,HS=vc("^"+Js.call(Ae).replace(ec,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),to=uf?D.Buffer:n,Ur=D.Symbol,ro=D.Uint8Array,Af=to?to.allocUnsafe:n,no=Mf(Oe.getPrototypeOf,Oe),Rf=Oe.create,Lf=Pn.propertyIsEnumerable,io=Zs.splice,Nf=Ur?Ur.isConcatSpreadable:n,Pi=Ur?Ur.iterator:n,dn=Ur?Ur.toStringTag:n,so=function(){try{var s=gn(Oe,"defineProperty");return s({},"",{}),s}catch{}}(),$S=D.clearTimeout!==ot.clearTimeout&&D.clearTimeout,WS=X&&X.now!==ot.Date.now&&X.now,BS=D.setTimeout!==ot.setTimeout&&D.setTimeout,oo=nt.ceil,ao=nt.floor,bc=Oe.getOwnPropertySymbols,VS=to?to.isBuffer:n,Of=D.isFinite,US=Zs.join,GS=Mf(Oe.keys,Oe),it=nt.max,ft=nt.min,zS=X.now,qS=D.parseInt,_f=nt.random,jS=Zs.reverse,Ec=gn(D,"DataView"),Fi=gn(D,"Map"),Sc=gn(D,"Promise"),Fn=gn(D,"Set"),Hi=gn(D,"WeakMap"),$i=gn(Oe,"create"),lo=Hi&&new Hi,Hn={},KS=yn(Ec),YS=yn(Fi),XS=yn(Sc),ZS=yn(Fn),QS=yn(Hi),co=Ur?Ur.prototype:n,Wi=co?co.valueOf:n,Df=co?co.toString:n;function S(s){if(Ze(s)&&!le(s)&&!(s instanceof ge)){if(s instanceof Wt)return s;if(Ae.call(s,"__wrapped__"))return kp(s)}return new Wt(s)}a(S,"lodash");var $n=function(){function s(){}return a(s,"object"),function(l){if(!Ye(l))return{};if(Rf)return Rf(l);s.prototype=l;var h=new s;return s.prototype=n,h}}();function uo(){}a(uo,"baseLodash");function Wt(s,l){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!l,this.__index__=0,this.__values__=n}a(Wt,"LodashWrapper"),S.templateSettings={escape:hE,evaluate:fE,interpolate:Vh,variable:"",imports:{_:S}},S.prototype=uo.prototype,S.prototype.constructor=S,Wt.prototype=$n(uo.prototype),Wt.prototype.constructor=Wt;function ge(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=_e,this.__views__=[]}a(ge,"LazyWrapper");function JS(){var s=new ge(this.__wrapped__);return s.__actions__=wt(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=wt(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=wt(this.__views__),s}a(JS,"lazyClone");function ew(){if(this.__filtered__){var s=new ge(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}a(ew,"lazyReverse");function tw(){var s=this.__wrapped__.value(),l=this.__dir__,h=le(s),m=l<0,v=h?s.length:0,x=fx(0,v,this.__views__),T=x.start,I=x.end,L=I-T,P=m?I:T-1,F=this.__iteratees__,H=F.length,K=0,J=ft(L,this.__takeCount__);if(!h||!m&&v==L&&J==L)return ip(s,this.__actions__);var ie=[];e:for(;L--&&K<J;){P+=l;for(var ue=-1,se=s[P];++ue<H;){var me=F[ue],be=me.iteratee,Ot=me.type,bt=be(se);if(Ot==B)se=bt;else if(!bt){if(Ot==q)continue e;break e}}ie[K++]=se}return ie}a(tw,"lazyValue"),ge.prototype=$n(uo.prototype),ge.prototype.constructor=ge;function hn(s){var l=-1,h=s==null?0:s.length;for(this.clear();++l<h;){var m=s[l];this.set(m[0],m[1])}}a(hn,"Hash");function rw(){this.__data__=$i?$i(null):{},this.size=0}a(rw,"hashClear");function nw(s){var l=this.has(s)&&delete this.__data__[s];return this.size-=l?1:0,l}a(nw,"hashDelete");function iw(s){var l=this.__data__;if($i){var h=l[s];return h===c?n:h}return Ae.call(l,s)?l[s]:n}a(iw,"hashGet");function sw(s){var l=this.__data__;return $i?l[s]!==n:Ae.call(l,s)}a(sw,"hashHas");function ow(s,l){var h=this.__data__;return this.size+=this.has(s)?0:1,h[s]=$i&&l===n?c:l,this}a(ow,"hashSet"),hn.prototype.clear=rw,hn.prototype.delete=nw,hn.prototype.get=iw,hn.prototype.has=sw,hn.prototype.set=ow;function vr(s){var l=-1,h=s==null?0:s.length;for(this.clear();++l<h;){var m=s[l];this.set(m[0],m[1])}}a(vr,"ListCache");function aw(){this.__data__=[],this.size=0}a(aw,"listCacheClear");function lw(s){var l=this.__data__,h=ho(l,s);if(h<0)return!1;var m=l.length-1;return h==m?l.pop():io.call(l,h,1),--this.size,!0}a(lw,"listCacheDelete");function cw(s){var l=this.__data__,h=ho(l,s);return h<0?n:l[h][1]}a(cw,"listCacheGet");function uw(s){return ho(this.__data__,s)>-1}a(uw,"listCacheHas");function dw(s,l){var h=this.__data__,m=ho(h,s);return m<0?(++this.size,h.push([s,l])):h[m][1]=l,this}a(dw,"listCacheSet"),vr.prototype.clear=aw,vr.prototype.delete=lw,vr.prototype.get=cw,vr.prototype.has=uw,vr.prototype.set=dw;function br(s){var l=-1,h=s==null?0:s.length;for(this.clear();++l<h;){var m=s[l];this.set(m[0],m[1])}}a(br,"MapCache");function hw(){this.size=0,this.__data__={hash:new hn,map:new(Fi||vr),string:new hn}}a(hw,"mapCacheClear");function fw(s){var l=Co(this,s).delete(s);return this.size-=l?1:0,l}a(fw,"mapCacheDelete");function pw(s){return Co(this,s).get(s)}a(pw,"mapCacheGet");function mw(s){return Co(this,s).has(s)}a(mw,"mapCacheHas");function gw(s,l){var h=Co(this,s),m=h.size;return h.set(s,l),this.size+=h.size==m?0:1,this}a(gw,"mapCacheSet"),br.prototype.clear=hw,br.prototype.delete=fw,br.prototype.get=pw,br.prototype.has=mw,br.prototype.set=gw;function fn(s){var l=-1,h=s==null?0:s.length;for(this.__data__=new br;++l<h;)this.add(s[l])}a(fn,"SetCache");function yw(s){return this.__data__.set(s,c),this}a(yw,"setCacheAdd");function vw(s){return this.__data__.has(s)}a(vw,"setCacheHas"),fn.prototype.add=fn.prototype.push=yw,fn.prototype.has=vw;function Kt(s){var l=this.__data__=new vr(s);this.size=l.size}a(Kt,"Stack");function bw(){this.__data__=new vr,this.size=0}a(bw,"stackClear");function Ew(s){var l=this.__data__,h=l.delete(s);return this.size=l.size,h}a(Ew,"stackDelete");function Sw(s){return this.__data__.get(s)}a(Sw,"stackGet");function ww(s){return this.__data__.has(s)}a(ww,"stackHas");function xw(s,l){var h=this.__data__;if(h instanceof vr){var m=h.__data__;if(!Fi||m.length<t-1)return m.push([s,l]),this.size=++h.size,this;h=this.__data__=new br(m)}return h.set(s,l),this.size=h.size,this}a(xw,"stackSet"),Kt.prototype.clear=bw,Kt.prototype.delete=Ew,Kt.prototype.get=Sw,Kt.prototype.has=ww,Kt.prototype.set=xw;function kf(s,l){var h=le(s),m=!h&&vn(s),v=!h&&!m&&Kr(s),x=!h&&!m&&!v&&Un(s),T=h||m||v||x,I=T?mc(s.length,_S):[],L=I.length;for(var P in s)(l||Ae.call(s,P))&&!(T&&(P=="length"||v&&(P=="offset"||P=="parent")||x&&(P=="buffer"||P=="byteLength"||P=="byteOffset")||xr(P,L)))&&I.push(P);return I}a(kf,"arrayLikeKeys");function Pf(s){var l=s.length;return l?s[Oc(0,l-1)]:n}a(Pf,"arraySample");function Cw(s,l){return Mo(wt(s),pn(l,0,s.length))}a(Cw,"arraySampleSize");function Mw(s){return Mo(wt(s))}a(Mw,"arrayShuffle");function wc(s,l,h){(h!==n&&!Yt(s[l],h)||h===n&&!(l in s))&&Er(s,l,h)}a(wc,"assignMergeValue");function Bi(s,l,h){var m=s[l];(!(Ae.call(s,l)&&Yt(m,h))||h===n&&!(l in s))&&Er(s,l,h)}a(Bi,"assignValue");function ho(s,l){for(var h=s.length;h--;)if(Yt(s[h][0],l))return h;return-1}a(ho,"assocIndexOf");function Tw(s,l,h,m){return Gr(s,function(v,x,T){l(m,v,h(v),T)}),m}a(Tw,"baseAggregator");function Ff(s,l){return s&&rr(l,at(l),s)}a(Ff,"baseAssign");function Iw(s,l){return s&&rr(l,Ct(l),s)}a(Iw,"baseAssignIn");function Er(s,l,h){l=="__proto__"&&so?so(s,l,{configurable:!0,enumerable:!0,value:h,writable:!0}):s[l]=h}a(Er,"baseAssignValue");function xc(s,l){for(var h=-1,m=l.length,v=O(m),x=s==null;++h<m;)v[h]=x?n:nu(s,l[h]);return v}a(xc,"baseAt");function pn(s,l,h){return s===s&&(h!==n&&(s=s<=h?s:h),l!==n&&(s=s>=l?s:l)),s}a(pn,"baseClamp");function Bt(s,l,h,m,v,x){var T,I=l&f,L=l&p,P=l&g;if(h&&(T=v?h(s,m,v,x):h(s)),T!==n)return T;if(!Ye(s))return s;var F=le(s);if(F){if(T=mx(s),!I)return wt(s,T)}else{var H=pt(s),K=H==yr||H==xe;if(Kr(s))return ap(s,I);if(H==rt||H==st||K&&!v){if(T=L||K?{}:Tp(s),!I)return L?ix(s,Iw(T,s)):nx(s,Ff(T,s))}else{if(!De[H])return v?s:{};T=gx(s,H,I)}}x||(x=new Kt);var J=x.get(s);if(J)return J;x.set(s,T),tm(s)?s.forEach(function(se){T.add(Bt(se,l,h,se,s,x))}):Jp(s)&&s.forEach(function(se,me){T.set(me,Bt(se,l,h,me,s,x))});var ie=P?L?Uc:Vc:L?Ct:at,ue=F?n:ie(s);return Ht(ue||s,function(se,me){ue&&(me=se,se=s[me]),Bi(T,me,Bt(se,l,h,me,s,x))}),T}a(Bt,"baseClone");function Aw(s){var l=at(s);return function(h){return Hf(h,s,l)}}a(Aw,"baseConforms");function Hf(s,l,h){var m=h.length;if(s==null)return!m;for(s=Oe(s);m--;){var v=h[m],x=l[v],T=s[v];if(T===n&&!(v in s)||!x(T))return!1}return!0}a(Hf,"baseConformsTo");function $f(s,l,h){if(typeof s!="function")throw new $t(i);return Ki(function(){s.apply(n,h)},l)}a($f,"baseDelay");function Vi(s,l,h,m){var v=-1,x=Ks,T=!0,I=s.length,L=[],P=l.length;if(!I)return L;h&&(l=Ge(l,Rt(h))),m?(x=cc,T=!1):l.length>=t&&(x=ki,T=!1,l=new fn(l));e:for(;++v<I;){var F=s[v],H=h==null?F:h(F);if(F=m||F!==0?F:0,T&&H===H){for(var K=P;K--;)if(l[K]===H)continue e;L.push(F)}else x(l,H,m)||L.push(F)}return L}a(Vi,"baseDifference");var Gr=hp(tr),Wf=hp(Mc,!0);function Rw(s,l){var h=!0;return Gr(s,function(m,v,x){return h=!!l(m,v,x),h}),h}a(Rw,"baseEvery");function fo(s,l,h){for(var m=-1,v=s.length;++m<v;){var x=s[m],T=l(x);if(T!=null&&(I===n?T===T&&!Nt(T):h(T,I)))var I=T,L=x}return L}a(fo,"baseExtremum");function Lw(s,l,h,m){var v=s.length;for(h=ce(h),h<0&&(h=-h>v?0:v+h),m=m===n||m>v?v:ce(m),m<0&&(m+=v),m=h>m?0:nm(m);h<m;)s[h++]=l;return s}a(Lw,"baseFill");function Bf(s,l){var h=[];return Gr(s,function(m,v,x){l(m,v,x)&&h.push(m)}),h}a(Bf,"baseFilter");function ct(s,l,h,m,v){var x=-1,T=s.length;for(h||(h=vx),v||(v=[]);++x<T;){var I=s[x];l>0&&h(I)?l>1?ct(I,l-1,h,m,v):Wr(v,I):m||(v[v.length]=I)}return v}a(ct,"baseFlatten");var Cc=fp(),Vf=fp(!0);function tr(s,l){return s&&Cc(s,l,at)}a(tr,"baseForOwn");function Mc(s,l){return s&&Vf(s,l,at)}a(Mc,"baseForOwnRight");function po(s,l){return $r(l,function(h){return Cr(s[h])})}a(po,"baseFunctions");function mn(s,l){l=qr(l,s);for(var h=0,m=l.length;s!=null&&h<m;)s=s[nr(l[h++])];return h&&h==m?s:n}a(mn,"baseGet");function Uf(s,l,h){var m=l(s);return le(s)?m:Wr(m,h(s))}a(Uf,"baseGetAllKeys");function yt(s){return s==null?s===n?sE:Ue:dn&&dn in Oe(s)?hx(s):Mx(s)}a(yt,"baseGetTag");function Tc(s,l){return s>l}a(Tc,"baseGt");function Nw(s,l){return s!=null&&Ae.call(s,l)}a(Nw,"baseHas");function Ow(s,l){return s!=null&&l in Oe(s)}a(Ow,"baseHasIn");function _w(s,l,h){return s>=ft(l,h)&&s<it(l,h)}a(_w,"baseInRange");function Ic(s,l,h){for(var m=h?cc:Ks,v=s[0].length,x=s.length,T=x,I=O(x),L=1/0,P=[];T--;){var F=s[T];T&&l&&(F=Ge(F,Rt(l))),L=ft(F.length,L),I[T]=!h&&(l||v>=120&&F.length>=120)?new fn(T&&F):n}F=s[0];var H=-1,K=I[0];e:for(;++H<v&&P.length<L;){var J=F[H],ie=l?l(J):J;if(J=h||J!==0?J:0,!(K?ki(K,ie):m(P,ie,h))){for(T=x;--T;){var ue=I[T];if(!(ue?ki(ue,ie):m(s[T],ie,h)))continue e}K&&K.push(ie),P.push(J)}}return P}a(Ic,"baseIntersection");function Dw(s,l,h,m){return tr(s,function(v,x,T){l(m,h(v),x,T)}),m}a(Dw,"baseInverter");function Ui(s,l,h){l=qr(l,s),s=Lp(s,l);var m=s==null?s:s[nr(Ut(l))];return m==null?n:At(m,s,h)}a(Ui,"baseInvoke");function Gf(s){return Ze(s)&&yt(s)==st}a(Gf,"baseIsArguments");function kw(s){return Ze(s)&&yt(s)==Di}a(kw,"baseIsArrayBuffer");function Pw(s){return Ze(s)&&yt(s)==It}a(Pw,"baseIsDate");function Gi(s,l,h,m,v){return s===l?!0:s==null||l==null||!Ze(s)&&!Ze(l)?s!==s&&l!==l:Fw(s,l,h,m,Gi,v)}a(Gi,"baseIsEqual");function Fw(s,l,h,m,v,x){var T=le(s),I=le(l),L=T?tt:pt(s),P=I?tt:pt(l);L=L==st?rt:L,P=P==st?rt:P;var F=L==rt,H=P==rt,K=L==P;if(K&&Kr(s)){if(!Kr(l))return!1;T=!0,F=!1}if(K&&!F)return x||(x=new Kt),T||Un(s)?xp(s,l,h,m,v,x):ux(s,l,L,h,m,v,x);if(!(h&y)){var J=F&&Ae.call(s,"__wrapped__"),ie=H&&Ae.call(l,"__wrapped__");if(J||ie){var ue=J?s.value():s,se=ie?l.value():l;return x||(x=new Kt),v(ue,se,h,m,x)}}return K?(x||(x=new Kt),dx(s,l,h,m,v,x)):!1}a(Fw,"baseIsEqualDeep");function Hw(s){return Ze(s)&&pt(s)==Ke}a(Hw,"baseIsMap");function Ac(s,l,h,m){var v=h.length,x=v,T=!m;if(s==null)return!x;for(s=Oe(s);v--;){var I=h[v];if(T&&I[2]?I[1]!==s[I[0]]:!(I[0]in s))return!1}for(;++v<x;){I=h[v];var L=I[0],P=s[L],F=I[1];if(T&&I[2]){if(P===n&&!(L in s))return!1}else{var H=new Kt;if(m)var K=m(P,F,L,s,l,H);if(!(K===n?Gi(F,P,y|b,m,H):K))return!1}}return!0}a(Ac,"baseIsMatch");function zf(s){if(!Ye(s)||Ex(s))return!1;var l=Cr(s)?HS:AE;return l.test(yn(s))}a(zf,"baseIsNative");function $w(s){return Ze(s)&&yt(s)==Ni}a($w,"baseIsRegExp");function Ww(s){return Ze(s)&&pt(s)==qt}a(Ww,"baseIsSet");function Bw(s){return Ze(s)&&No(s.length)&&!!He[yt(s)]}a(Bw,"baseIsTypedArray");function qf(s){return typeof s=="function"?s:s==null?Mt:typeof s=="object"?le(s)?Yf(s[0],s[1]):Kf(s):pm(s)}a(qf,"baseIteratee");function Rc(s){if(!ji(s))return GS(s);var l=[];for(var h in Oe(s))Ae.call(s,h)&&h!="constructor"&&l.push(h);return l}a(Rc,"baseKeys");function Vw(s){if(!Ye(s))return Cx(s);var l=ji(s),h=[];for(var m in s)m=="constructor"&&(l||!Ae.call(s,m))||h.push(m);return h}a(Vw,"baseKeysIn");function Lc(s,l){return s<l}a(Lc,"baseLt");function jf(s,l){var h=-1,m=xt(s)?O(s.length):[];return Gr(s,function(v,x,T){m[++h]=l(v,x,T)}),m}a(jf,"baseMap");function Kf(s){var l=zc(s);return l.length==1&&l[0][2]?Ap(l[0][0],l[0][1]):function(h){return h===s||Ac(h,s,l)}}a(Kf,"baseMatches");function Yf(s,l){return jc(s)&&Ip(l)?Ap(nr(s),l):function(h){var m=nu(h,s);return m===n&&m===l?iu(h,s):Gi(l,m,y|b)}}a(Yf,"baseMatchesProperty");function mo(s,l,h,m,v){s!==l&&Cc(l,function(x,T){if(v||(v=new Kt),Ye(x))Uw(s,l,T,h,mo,m,v);else{var I=m?m(Yc(s,T),x,T+"",s,l,v):n;I===n&&(I=x),wc(s,T,I)}},Ct)}a(mo,"baseMerge");function Uw(s,l,h,m,v,x,T){var I=Yc(s,h),L=Yc(l,h),P=T.get(L);if(P){wc(s,h,P);return}var F=x?x(I,L,h+"",s,l,T):n,H=F===n;if(H){var K=le(L),J=!K&&Kr(L),ie=!K&&!J&&Un(L);F=L,K||J||ie?le(I)?F=I:Je(I)?F=wt(I):J?(H=!1,F=ap(L,!0)):ie?(H=!1,F=lp(L,!0)):F=[]:Yi(L)||vn(L)?(F=I,vn(I)?F=im(I):(!Ye(I)||Cr(I))&&(F=Tp(L))):H=!1}H&&(T.set(L,F),v(F,L,m,x,T),T.delete(L)),wc(s,h,F)}a(Uw,"baseMergeDeep");function Xf(s,l){var h=s.length;if(h)return l+=l<0?h:0,xr(l,h)?s[l]:n}a(Xf,"baseNth");function Zf(s,l,h){l.length?l=Ge(l,function(x){return le(x)?function(T){return mn(T,x.length===1?x[0]:x)}:x}):l=[Mt];var m=-1;l=Ge(l,Rt(ne()));var v=jf(s,function(x,T,I){var L=Ge(l,function(P){return P(x)});return{criteria:L,index:++m,value:x}});return gS(v,function(x,T){return rx(x,T,h)})}a(Zf,"baseOrderBy");function Gw(s,l){return Qf(s,l,function(h,m){return iu(s,m)})}a(Gw,"basePick");function Qf(s,l,h){for(var m=-1,v=l.length,x={};++m<v;){var T=l[m],I=mn(s,T);h(I,T)&&zi(x,qr(T,s),I)}return x}a(Qf,"basePickBy");function zw(s){return function(l){return mn(l,s)}}a(zw,"basePropertyDeep");function Nc(s,l,h,m){var v=m?mS:_n,x=-1,T=l.length,I=s;for(s===l&&(l=wt(l)),h&&(I=Ge(s,Rt(h)));++x<T;)for(var L=0,P=l[x],F=h?h(P):P;(L=v(I,F,L,m))>-1;)I!==s&&io.call(I,L,1),io.call(s,L,1);return s}a(Nc,"basePullAll");function Jf(s,l){for(var h=s?l.length:0,m=h-1;h--;){var v=l[h];if(h==m||v!==x){var x=v;xr(v)?io.call(s,v,1):kc(s,v)}}return s}a(Jf,"basePullAt");function Oc(s,l){return s+ao(_f()*(l-s+1))}a(Oc,"baseRandom");function qw(s,l,h,m){for(var v=-1,x=it(oo((l-s)/(h||1)),0),T=O(x);x--;)T[m?x:++v]=s,s+=h;return T}a(qw,"baseRange");function _c(s,l){var h="";if(!s||l<1||l>Y)return h;do l%2&&(h+=s),l=ao(l/2),l&&(s+=s);while(l);return h}a(_c,"baseRepeat");function fe(s,l){return Xc(Rp(s,l,Mt),s+"")}a(fe,"baseRest");function jw(s){return Pf(Gn(s))}a(jw,"baseSample");function Kw(s,l){var h=Gn(s);return Mo(h,pn(l,0,h.length))}a(Kw,"baseSampleSize");function zi(s,l,h,m){if(!Ye(s))return s;l=qr(l,s);for(var v=-1,x=l.length,T=x-1,I=s;I!=null&&++v<x;){var L=nr(l[v]),P=h;if(L==="__proto__"||L==="constructor"||L==="prototype")return s;if(v!=T){var F=I[L];P=m?m(F,L,I):n,P===n&&(P=Ye(F)?F:xr(l[v+1])?[]:{})}Bi(I,L,P),I=I[L]}return s}a(zi,"baseSet");var ep=lo?function(s,l){return lo.set(s,l),s}:Mt,Yw=so?function(s,l){return so(s,"toString",{configurable:!0,enumerable:!1,value:ou(l),writable:!0})}:Mt;function Xw(s){return Mo(Gn(s))}a(Xw,"baseShuffle");function Vt(s,l,h){var m=-1,v=s.length;l<0&&(l=-l>v?0:v+l),h=h>v?v:h,h<0&&(h+=v),v=l>h?0:h-l>>>0,l>>>=0;for(var x=O(v);++m<v;)x[m]=s[m+l];return x}a(Vt,"baseSlice");function Zw(s,l){var h;return Gr(s,function(m,v,x){return h=l(m,v,x),!h}),!!h}a(Zw,"baseSome");function go(s,l,h){var m=0,v=s==null?m:s.length;if(typeof l=="number"&&l===l&&v<=pe){for(;m<v;){var x=m+v>>>1,T=s[x];T!==null&&!Nt(T)&&(h?T<=l:T<l)?m=x+1:v=x}return v}return Dc(s,l,Mt,h)}a(go,"baseSortedIndex");function Dc(s,l,h,m){var v=0,x=s==null?0:s.length;if(x===0)return 0;l=h(l);for(var T=l!==l,I=l===null,L=Nt(l),P=l===n;v<x;){var F=ao((v+x)/2),H=h(s[F]),K=H!==n,J=H===null,ie=H===H,ue=Nt(H);if(T)var se=m||ie;else P?se=ie&&(m||K):I?se=ie&&K&&(m||!J):L?se=ie&&K&&!J&&(m||!ue):J||ue?se=!1:se=m?H<=l:H<l;se?v=F+1:x=F}return ft(x,mr)}a(Dc,"baseSortedIndexBy");function tp(s,l){for(var h=-1,m=s.length,v=0,x=[];++h<m;){var T=s[h],I=l?l(T):T;if(!h||!Yt(I,L)){var L=I;x[v++]=T===0?0:T}}return x}a(tp,"baseSortedUniq");function rp(s){return typeof s=="number"?s:Nt(s)?Fe:+s}a(rp,"baseToNumber");function Lt(s){if(typeof s=="string")return s;if(le(s))return Ge(s,Lt)+"";if(Nt(s))return Df?Df.call(s):"";var l=s+"";return l=="0"&&1/s==-Q?"-0":l}a(Lt,"baseToString");function zr(s,l,h){var m=-1,v=Ks,x=s.length,T=!0,I=[],L=I;if(h)T=!1,v=cc;else if(x>=t){var P=l?null:lx(s);if(P)return Xs(P);T=!1,v=ki,L=new fn}else L=l?[]:I;e:for(;++m<x;){var F=s[m],H=l?l(F):F;if(F=h||F!==0?F:0,T&&H===H){for(var K=L.length;K--;)if(L[K]===H)continue e;l&&L.push(H),I.push(F)}else v(L,H,h)||(L!==I&&L.push(H),I.push(F))}return I}a(zr,"baseUniq");function kc(s,l){return l=qr(l,s),s=Lp(s,l),s==null||delete s[nr(Ut(l))]}a(kc,"baseUnset");function np(s,l,h,m){return zi(s,l,h(mn(s,l)),m)}a(np,"baseUpdate");function yo(s,l,h,m){for(var v=s.length,x=m?v:-1;(m?x--:++x<v)&&l(s[x],x,s););return h?Vt(s,m?0:x,m?x+1:v):Vt(s,m?x+1:0,m?v:x)}a(yo,"baseWhile");function ip(s,l){var h=s;return h instanceof ge&&(h=h.value()),uc(l,function(m,v){return v.func.apply(v.thisArg,Wr([m],v.args))},h)}a(ip,"baseWrapperValue");function Pc(s,l,h){var m=s.length;if(m<2)return m?zr(s[0]):[];for(var v=-1,x=O(m);++v<m;)for(var T=s[v],I=-1;++I<m;)I!=v&&(x[v]=Vi(x[v]||T,s[I],l,h));return zr(ct(x,1),l,h)}a(Pc,"baseXor");function sp(s,l,h){for(var m=-1,v=s.length,x=l.length,T={};++m<v;){var I=m<x?l[m]:n;h(T,s[m],I)}return T}a(sp,"baseZipObject");function Fc(s){return Je(s)?s:[]}a(Fc,"castArrayLikeObject");function Hc(s){return typeof s=="function"?s:Mt}a(Hc,"castFunction");function qr(s,l){return le(s)?s:jc(s,l)?[s]:Dp(Ie(s))}a(qr,"castPath");var Qw=fe;function jr(s,l,h){var m=s.length;return h=h===n?m:h,!l&&h>=m?s:Vt(s,l,h)}a(jr,"castSlice");var op=$S||function(s){return ot.clearTimeout(s)};function ap(s,l){if(l)return s.slice();var h=s.length,m=Af?Af(h):new s.constructor(h);return s.copy(m),m}a(ap,"cloneBuffer");function $c(s){var l=new s.constructor(s.byteLength);return new ro(l).set(new ro(s)),l}a($c,"cloneArrayBuffer");function Jw(s,l){var h=l?$c(s.buffer):s.buffer;return new s.constructor(h,s.byteOffset,s.byteLength)}a(Jw,"cloneDataView");function ex(s){var l=new s.constructor(s.source,Uh.exec(s));return l.lastIndex=s.lastIndex,l}a(ex,"cloneRegExp");function tx(s){return Wi?Oe(Wi.call(s)):{}}a(tx,"cloneSymbol");function lp(s,l){var h=l?$c(s.buffer):s.buffer;return new s.constructor(h,s.byteOffset,s.length)}a(lp,"cloneTypedArray");function cp(s,l){if(s!==l){var h=s!==n,m=s===null,v=s===s,x=Nt(s),T=l!==n,I=l===null,L=l===l,P=Nt(l);if(!I&&!P&&!x&&s>l||x&&T&&L&&!I&&!P||m&&T&&L||!h&&L||!v)return 1;if(!m&&!x&&!P&&s<l||P&&h&&v&&!m&&!x||I&&h&&v||!T&&v||!L)return-1}return 0}a(cp,"compareAscending");function rx(s,l,h){for(var m=-1,v=s.criteria,x=l.criteria,T=v.length,I=h.length;++m<T;){var L=cp(v[m],x[m]);if(L){if(m>=I)return L;var P=h[m];return L*(P=="desc"?-1:1)}}return s.index-l.index}a(rx,"compareMultiple");function up(s,l,h,m){for(var v=-1,x=s.length,T=h.length,I=-1,L=l.length,P=it(x-T,0),F=O(L+P),H=!m;++I<L;)F[I]=l[I];for(;++v<T;)(H||v<x)&&(F[h[v]]=s[v]);for(;P--;)F[I++]=s[v++];return F}a(up,"composeArgs");function dp(s,l,h,m){for(var v=-1,x=s.length,T=-1,I=h.length,L=-1,P=l.length,F=it(x-I,0),H=O(F+P),K=!m;++v<F;)H[v]=s[v];for(var J=v;++L<P;)H[J+L]=l[L];for(;++T<I;)(K||v<x)&&(H[J+h[T]]=s[v++]);return H}a(dp,"composeArgsRight");function wt(s,l){var h=-1,m=s.length;for(l||(l=O(m));++h<m;)l[h]=s[h];return l}a(wt,"copyArray");function rr(s,l,h,m){var v=!h;h||(h={});for(var x=-1,T=l.length;++x<T;){var I=l[x],L=m?m(h[I],s[I],I,h,s):n;L===n&&(L=s[I]),v?Er(h,I,L):Bi(h,I,L)}return h}a(rr,"copyObject");function nx(s,l){return rr(s,qc(s),l)}a(nx,"copySymbols");function ix(s,l){return rr(s,Cp(s),l)}a(ix,"copySymbolsIn");function vo(s,l){return function(h,m){var v=le(h)?cS:Tw,x=l?l():{};return v(h,s,ne(m,2),x)}}a(vo,"createAggregator");function Wn(s){return fe(function(l,h){var m=-1,v=h.length,x=v>1?h[v-1]:n,T=v>2?h[2]:n;for(x=s.length>3&&typeof x=="function"?(v--,x):n,T&&vt(h[0],h[1],T)&&(x=v<3?n:x,v=1),l=Oe(l);++m<v;){var I=h[m];I&&s(l,I,m,x)}return l})}a(Wn,"createAssigner");function hp(s,l){return function(h,m){if(h==null)return h;if(!xt(h))return s(h,m);for(var v=h.length,x=l?v:-1,T=Oe(h);(l?x--:++x<v)&&m(T[x],x,T)!==!1;);return h}}a(hp,"createBaseEach");function fp(s){return function(l,h,m){for(var v=-1,x=Oe(l),T=m(l),I=T.length;I--;){var L=T[s?I:++v];if(h(x[L],L,x)===!1)break}return l}}a(fp,"createBaseFor");function sx(s,l,h){var m=l&E,v=qi(s);function x(){var T=this&&this!==ot&&this instanceof x?v:s;return T.apply(m?h:this,arguments)}return a(x,"wrapper"),x}a(sx,"createBind");function pp(s){return function(l){l=Ie(l);var h=Dn(l)?jt(l):n,m=h?h[0]:l.charAt(0),v=h?jr(h,1).join(""):l.slice(1);return m[s]()+v}}a(pp,"createCaseFirst");function Bn(s){return function(l){return uc(hm(dm(l).replace(YE,"")),s,"")}}a(Bn,"createCompounder");function qi(s){return function(){var l=arguments;switch(l.length){case 0:return new s;case 1:return new s(l[0]);case 2:return new s(l[0],l[1]);case 3:return new s(l[0],l[1],l[2]);case 4:return new s(l[0],l[1],l[2],l[3]);case 5:return new s(l[0],l[1],l[2],l[3],l[4]);case 6:return new s(l[0],l[1],l[2],l[3],l[4],l[5]);case 7:return new s(l[0],l[1],l[2],l[3],l[4],l[5],l[6])}var h=$n(s.prototype),m=s.apply(h,l);return Ye(m)?m:h}}a(qi,"createCtor");function ox(s,l,h){var m=qi(s);function v(){for(var x=arguments.length,T=O(x),I=x,L=Vn(v);I--;)T[I]=arguments[I];var P=x<3&&T[0]!==L&&T[x-1]!==L?[]:Br(T,L);if(x-=P.length,x<h)return bp(s,l,bo,v.placeholder,n,T,P,n,n,h-x);var F=this&&this!==ot&&this instanceof v?m:s;return At(F,this,T)}return a(v,"wrapper"),v}a(ox,"createCurry");function mp(s){return function(l,h,m){var v=Oe(l);if(!xt(l)){var x=ne(h,3);l=at(l),h=a(function(I){return x(v[I],I,v)},"predicate")}var T=s(l,h,m);return T>-1?v[x?l[T]:T]:n}}a(mp,"createFind");function gp(s){return wr(function(l){var h=l.length,m=h,v=Wt.prototype.thru;for(s&&l.reverse();m--;){var x=l[m];if(typeof x!="function")throw new $t(i);if(v&&!T&&xo(x)=="wrapper")var T=new Wt([],!0)}for(m=T?m:h;++m<h;){x=l[m];var I=xo(x),L=I=="wrapper"?Gc(x):n;L&&Kc(L[0])&&L[1]==(z|M|A|G)&&!L[4].length&&L[9]==1?T=T[xo(L[0])].apply(T,L[3]):T=x.length==1&&Kc(x)?T[I]():T.thru(x)}return function(){var P=arguments,F=P[0];if(T&&P.length==1&&le(F))return T.plant(F).value();for(var H=0,K=h?l[H].apply(this,P):F;++H<h;)K=l[H].call(this,K);return K}})}a(gp,"createFlow");function bo(s,l,h,m,v,x,T,I,L,P){var F=l&z,H=l&E,K=l&C,J=l&(M|N),ie=l&ee,ue=K?n:qi(s);function se(){for(var me=arguments.length,be=O(me),Ot=me;Ot--;)be[Ot]=arguments[Ot];if(J)var bt=Vn(se),_t=vS(be,bt);if(m&&(be=up(be,m,v,J)),x&&(be=dp(be,x,T,J)),me-=_t,J&&me<P){var et=Br(be,bt);return bp(s,l,bo,se.placeholder,h,be,et,I,L,P-me)}var Xt=H?h:this,Tr=K?Xt[s]:s;return me=be.length,I?be=Tx(be,I):ie&&me>1&&be.reverse(),F&&L<me&&(be.length=L),this&&this!==ot&&this instanceof se&&(Tr=ue||qi(Tr)),Tr.apply(Xt,be)}return a(se,"wrapper"),se}a(bo,"createHybrid");function yp(s,l){return function(h,m){return Dw(h,s,l(m),{})}}a(yp,"createInverter");function Eo(s,l){return function(h,m){var v;if(h===n&&m===n)return l;if(h!==n&&(v=h),m!==n){if(v===n)return m;typeof h=="string"||typeof m=="string"?(h=Lt(h),m=Lt(m)):(h=rp(h),m=rp(m)),v=s(h,m)}return v}}a(Eo,"createMathOperation");function Wc(s){return wr(function(l){return l=Ge(l,Rt(ne())),fe(function(h){var m=this;return s(l,function(v){return At(v,m,h)})})})}a(Wc,"createOver");function So(s,l){l=l===n?" ":Lt(l);var h=l.length;if(h<2)return h?_c(l,s):l;var m=_c(l,oo(s/kn(l)));return Dn(l)?jr(jt(m),0,s).join(""):m.slice(0,s)}a(So,"createPadding");function ax(s,l,h,m){var v=l&E,x=qi(s);function T(){for(var I=-1,L=arguments.length,P=-1,F=m.length,H=O(F+L),K=this&&this!==ot&&this instanceof T?x:s;++P<F;)H[P]=m[P];for(;L--;)H[P++]=arguments[++I];return At(K,v?h:this,H)}return a(T,"wrapper"),T}a(ax,"createPartial");function vp(s){return function(l,h,m){return m&&typeof m!="number"&&vt(l,h,m)&&(h=m=n),l=Mr(l),h===n?(h=l,l=0):h=Mr(h),m=m===n?l<h?1:-1:Mr(m),qw(l,h,m,s)}}a(vp,"createRange");function wo(s){return function(l,h){return typeof l=="string"&&typeof h=="string"||(l=Gt(l),h=Gt(h)),s(l,h)}}a(wo,"createRelationalOperation");function bp(s,l,h,m,v,x,T,I,L,P){var F=l&M,H=F?T:n,K=F?n:T,J=F?x:n,ie=F?n:x;l|=F?A:_,l&=~(F?_:A),l&w||(l&=~(E|C));var ue=[s,l,v,J,H,ie,K,I,L,P],se=h.apply(n,ue);return Kc(s)&&Np(se,ue),se.placeholder=m,Op(se,s,l)}a(bp,"createRecurry");function Bc(s){var l=nt[s];return function(h,m){if(h=Gt(h),m=m==null?0:ft(ce(m),292),m&&Of(h)){var v=(Ie(h)+"e").split("e"),x=l(v[0]+"e"+(+v[1]+m));return v=(Ie(x)+"e").split("e"),+(v[0]+"e"+(+v[1]-m))}return l(h)}}a(Bc,"createRound");var lx=Fn&&1/Xs(new Fn([,-0]))[1]==Q?function(s){return new Fn(s)}:cu;function Ep(s){return function(l){var h=pt(l);return h==Ke?yc(l):h==qt?MS(l):yS(l,s(l))}}a(Ep,"createToPairs");function Sr(s,l,h,m,v,x,T,I){var L=l&C;if(!L&&typeof s!="function")throw new $t(i);var P=m?m.length:0;if(P||(l&=~(A|_),m=v=n),T=T===n?T:it(ce(T),0),I=I===n?I:ce(I),P-=v?v.length:0,l&_){var F=m,H=v;m=v=n}var K=L?n:Gc(s),J=[s,l,h,m,v,F,H,x,T,I];if(K&&xx(J,K),s=J[0],l=J[1],h=J[2],m=J[3],v=J[4],I=J[9]=J[9]===n?L?0:s.length:it(J[9]-P,0),!I&&l&(M|N)&&(l&=~(M|N)),!l||l==E)var ie=sx(s,l,h);else l==M||l==N?ie=ox(s,l,I):(l==A||l==(E|A))&&!v.length?ie=ax(s,l,h,m):ie=bo.apply(n,J);var ue=K?ep:Np;return Op(ue(ie,J),s,l)}a(Sr,"createWrap");function Sp(s,l,h,m){return s===n||Yt(s,Pn[h])&&!Ae.call(m,h)?l:s}a(Sp,"customDefaultsAssignIn");function wp(s,l,h,m,v,x){return Ye(s)&&Ye(l)&&(x.set(l,s),mo(s,l,n,wp,x),x.delete(l)),s}a(wp,"customDefaultsMerge");function cx(s){return Yi(s)?n:s}a(cx,"customOmitClone");function xp(s,l,h,m,v,x){var T=h&y,I=s.length,L=l.length;if(I!=L&&!(T&&L>I))return!1;var P=x.get(s),F=x.get(l);if(P&&F)return P==l&&F==s;var H=-1,K=!0,J=h&b?new fn:n;for(x.set(s,l),x.set(l,s);++H<I;){var ie=s[H],ue=l[H];if(m)var se=T?m(ue,ie,H,l,s,x):m(ie,ue,H,s,l,x);if(se!==n){if(se)continue;K=!1;break}if(J){if(!dc(l,function(me,be){if(!ki(J,be)&&(ie===me||v(ie,me,h,m,x)))return J.push(be)})){K=!1;break}}else if(!(ie===ue||v(ie,ue,h,m,x))){K=!1;break}}return x.delete(s),x.delete(l),K}a(xp,"equalArrays");function ux(s,l,h,m,v,x,T){switch(h){case Nn:if(s.byteLength!=l.byteLength||s.byteOffset!=l.byteOffset)return!1;s=s.buffer,l=l.buffer;case Di:return!(s.byteLength!=l.byteLength||!x(new ro(s),new ro(l)));case Pt:case It:case Ne:return Yt(+s,+l);case Hr:return s.name==l.name&&s.message==l.message;case Ni:case Oi:return s==l+"";case Ke:var I=yc;case qt:var L=m&y;if(I||(I=Xs),s.size!=l.size&&!L)return!1;var P=T.get(s);if(P)return P==l;m|=b,T.set(s,l);var F=xp(I(s),I(l),m,v,x,T);return T.delete(s),F;case Gs:if(Wi)return Wi.call(s)==Wi.call(l)}return!1}a(ux,"equalByTag");function dx(s,l,h,m,v,x){var T=h&y,I=Vc(s),L=I.length,P=Vc(l),F=P.length;if(L!=F&&!T)return!1;for(var H=L;H--;){var K=I[H];if(!(T?K in l:Ae.call(l,K)))return!1}var J=x.get(s),ie=x.get(l);if(J&&ie)return J==l&&ie==s;var ue=!0;x.set(s,l),x.set(l,s);for(var se=T;++H<L;){K=I[H];var me=s[K],be=l[K];if(m)var Ot=T?m(be,me,K,l,s,x):m(me,be,K,s,l,x);if(!(Ot===n?me===be||v(me,be,h,m,x):Ot)){ue=!1;break}se||(se=K=="constructor")}if(ue&&!se){var bt=s.constructor,_t=l.constructor;bt!=_t&&"constructor"in s&&"constructor"in l&&!(typeof bt=="function"&&bt instanceof bt&&typeof _t=="function"&&_t instanceof _t)&&(ue=!1)}return x.delete(s),x.delete(l),ue}a(dx,"equalObjects");function wr(s){return Xc(Rp(s,n,Hp),s+"")}a(wr,"flatRest");function Vc(s){return Uf(s,at,qc)}a(Vc,"getAllKeys");function Uc(s){return Uf(s,Ct,Cp)}a(Uc,"getAllKeysIn");var Gc=lo?function(s){return lo.get(s)}:cu;function xo(s){for(var l=s.name+"",h=Hn[l],m=Ae.call(Hn,l)?h.length:0;m--;){var v=h[m],x=v.func;if(x==null||x==s)return v.name}return l}a(xo,"getFuncName");function Vn(s){var l=Ae.call(S,"placeholder")?S:s;return l.placeholder}a(Vn,"getHolder");function ne(){var s=S.iteratee||au;return s=s===au?qf:s,arguments.length?s(arguments[0],arguments[1]):s}a(ne,"getIteratee");function Co(s,l){var h=s.__data__;return bx(l)?h[typeof l=="string"?"string":"hash"]:h.map}a(Co,"getMapData");function zc(s){for(var l=at(s),h=l.length;h--;){var m=l[h],v=s[m];l[h]=[m,v,Ip(v)]}return l}a(zc,"getMatchData");function gn(s,l){var h=wS(s,l);return zf(h)?h:n}a(gn,"getNative");function hx(s){var l=Ae.call(s,dn),h=s[dn];try{s[dn]=n;var m=!0}catch{}var v=eo.call(s);return m&&(l?s[dn]=h:delete s[dn]),v}a(hx,"getRawTag");var qc=bc?function(s){return s==null?[]:(s=Oe(s),$r(bc(s),function(l){return Lf.call(s,l)}))}:uu,Cp=bc?function(s){for(var l=[];s;)Wr(l,qc(s)),s=no(s);return l}:uu,pt=yt;(Ec&&pt(new Ec(new ArrayBuffer(1)))!=Nn||Fi&&pt(new Fi)!=Ke||Sc&&pt(Sc.resolve())!=Te||Fn&&pt(new Fn)!=qt||Hi&&pt(new Hi)!=_i)&&(pt=a(function(s){var l=yt(s),h=l==rt?s.constructor:n,m=h?yn(h):"";if(m)switch(m){case KS:return Nn;case YS:return Ke;case XS:return Te;case ZS:return qt;case QS:return _i}return l},"getTag"));function fx(s,l,h){for(var m=-1,v=h.length;++m<v;){var x=h[m],T=x.size;switch(x.type){case"drop":s+=T;break;case"dropRight":l-=T;break;case"take":l=ft(l,s+T);break;case"takeRight":s=it(s,l-T);break}}return{start:s,end:l}}a(fx,"getView");function px(s){var l=s.match(EE);return l?l[1].split(SE):[]}a(px,"getWrapDetails");function Mp(s,l,h){l=qr(l,s);for(var m=-1,v=l.length,x=!1;++m<v;){var T=nr(l[m]);if(!(x=s!=null&&h(s,T)))break;s=s[T]}return x||++m!=v?x:(v=s==null?0:s.length,!!v&&No(v)&&xr(T,v)&&(le(s)||vn(s)))}a(Mp,"hasPath");function mx(s){var l=s.length,h=new s.constructor(l);return l&&typeof s[0]=="string"&&Ae.call(s,"index")&&(h.index=s.index,h.input=s.input),h}a(mx,"initCloneArray");function Tp(s){return typeof s.constructor=="function"&&!ji(s)?$n(no(s)):{}}a(Tp,"initCloneObject");function gx(s,l,h){var m=s.constructor;switch(l){case Di:return $c(s);case Pt:case It:return new m(+s);case Nn:return Jw(s,h);case zl:case ql:case jl:case Kl:case Yl:case Xl:case Zl:case Ql:case Jl:return lp(s,h);case Ke:return new m;case Ne:case Oi:return new m(s);case Ni:return ex(s);case qt:return new m;case Gs:return tx(s)}}a(gx,"initCloneByTag");function yx(s,l){var h=l.length;if(!h)return s;var m=h-1;return l[m]=(h>1?"& ":"")+l[m],l=l.join(h>2?", ":" "),s.replace(bE,`{
/* [wrapped with `+l+`] */
`)}a(yx,"insertWrapDetails");function vx(s){return le(s)||vn(s)||!!(Nf&&s&&s[Nf])}a(vx,"isFlattenable");function xr(s,l){var h=typeof s;return l=l??Y,!!l&&(h=="number"||h!="symbol"&&LE.test(s))&&s>-1&&s%1==0&&s<l}a(xr,"isIndex");function vt(s,l,h){if(!Ye(h))return!1;var m=typeof l;return(m=="number"?xt(h)&&xr(l,h.length):m=="string"&&l in h)?Yt(h[l],s):!1}a(vt,"isIterateeCall");function jc(s,l){if(le(s))return!1;var h=typeof s;return h=="number"||h=="symbol"||h=="boolean"||s==null||Nt(s)?!0:mE.test(s)||!pE.test(s)||l!=null&&s in Oe(l)}a(jc,"isKey");function bx(s){var l=typeof s;return l=="string"||l=="number"||l=="symbol"||l=="boolean"?s!=="__proto__":s===null}a(bx,"isKeyable");function Kc(s){var l=xo(s),h=S[l];if(typeof h!="function"||!(l in ge.prototype))return!1;if(s===h)return!0;var m=Gc(h);return!!m&&s===m[0]}a(Kc,"isLaziable");function Ex(s){return!!If&&If in s}a(Ex,"isMasked");var Sx=Qs?Cr:du;function ji(s){var l=s&&s.constructor,h=typeof l=="function"&&l.prototype||Pn;return s===h}a(ji,"isPrototype");function Ip(s){return s===s&&!Ye(s)}a(Ip,"isStrictComparable");function Ap(s,l){return function(h){return h==null?!1:h[s]===l&&(l!==n||s in Oe(h))}}a(Ap,"matchesStrictComparable");function wx(s){var l=Ro(s,function(m){return h.size===u&&h.clear(),m}),h=l.cache;return l}a(wx,"memoizeCapped");function xx(s,l){var h=s[1],m=l[1],v=h|m,x=v<(E|C|z),T=m==z&&h==M||m==z&&h==G&&s[7].length<=l[8]||m==(z|G)&&l[7].length<=l[8]&&h==M;if(!(x||T))return s;m&E&&(s[2]=l[2],v|=h&E?0:w);var I=l[3];if(I){var L=s[3];s[3]=L?up(L,I,l[4]):I,s[4]=L?Br(s[3],d):l[4]}return I=l[5],I&&(L=s[5],s[5]=L?dp(L,I,l[6]):I,s[6]=L?Br(s[5],d):l[6]),I=l[7],I&&(s[7]=I),m&z&&(s[8]=s[8]==null?l[8]:ft(s[8],l[8])),s[9]==null&&(s[9]=l[9]),s[0]=l[0],s[1]=v,s}a(xx,"mergeData");function Cx(s){var l=[];if(s!=null)for(var h in Oe(s))l.push(h);return l}a(Cx,"nativeKeysIn");function Mx(s){return eo.call(s)}a(Mx,"objectToString");function Rp(s,l,h){return l=it(l===n?s.length-1:l,0),function(){for(var m=arguments,v=-1,x=it(m.length-l,0),T=O(x);++v<x;)T[v]=m[l+v];v=-1;for(var I=O(l+1);++v<l;)I[v]=m[v];return I[l]=h(T),At(s,this,I)}}a(Rp,"overRest");function Lp(s,l){return l.length<2?s:mn(s,Vt(l,0,-1))}a(Lp,"parent");function Tx(s,l){for(var h=s.length,m=ft(l.length,h),v=wt(s);m--;){var x=l[m];s[m]=xr(x,h)?v[x]:n}return s}a(Tx,"reorder");function Yc(s,l){if(!(l==="constructor"&&typeof s[l]=="function")&&l!="__proto__")return s[l]}a(Yc,"safeGet");var Np=_p(ep),Ki=BS||function(s,l){return ot.setTimeout(s,l)},Xc=_p(Yw);function Op(s,l,h){var m=l+"";return Xc(s,yx(m,Ix(px(m),h)))}a(Op,"setWrapToString");function _p(s){var l=0,h=0;return function(){var m=zS(),v=W-(m-h);if(h=m,v>0){if(++l>=oe)return arguments[0]}else l=0;return s.apply(n,arguments)}}a(_p,"shortOut");function Mo(s,l){var h=-1,m=s.length,v=m-1;for(l=l===n?m:l;++h<l;){var x=Oc(h,v),T=s[x];s[x]=s[h],s[h]=T}return s.length=l,s}a(Mo,"shuffleSelf");var Dp=wx(function(s){var l=[];return s.charCodeAt(0)===46&&l.push(""),s.replace(gE,function(h,m,v,x){l.push(v?x.replace(CE,"$1"):m||h)}),l});function nr(s){if(typeof s=="string"||Nt(s))return s;var l=s+"";return l=="0"&&1/s==-Q?"-0":l}a(nr,"toKey");function yn(s){if(s!=null){try{return Js.call(s)}catch{}try{return s+""}catch{}}return""}a(yn,"toSource");function Ix(s,l){return Ht(lt,function(h){var m="_."+h[0];l&h[1]&&!Ks(s,m)&&s.push(m)}),s.sort()}a(Ix,"updateWrapDetails");function kp(s){if(s instanceof ge)return s.clone();var l=new Wt(s.__wrapped__,s.__chain__);return l.__actions__=wt(s.__actions__),l.__index__=s.__index__,l.__values__=s.__values__,l}a(kp,"wrapperClone");function Ax(s,l,h){(h?vt(s,l,h):l===n)?l=1:l=it(ce(l),0);var m=s==null?0:s.length;if(!m||l<1)return[];for(var v=0,x=0,T=O(oo(m/l));v<m;)T[x++]=Vt(s,v,v+=l);return T}a(Ax,"chunk");function Rx(s){for(var l=-1,h=s==null?0:s.length,m=0,v=[];++l<h;){var x=s[l];x&&(v[m++]=x)}return v}a(Rx,"compact");function Lx(){var s=arguments.length;if(!s)return[];for(var l=O(s-1),h=arguments[0],m=s;m--;)l[m-1]=arguments[m];return Wr(le(h)?wt(h):[h],ct(l,1))}a(Lx,"concat");var Nx=fe(function(s,l){return Je(s)?Vi(s,ct(l,1,Je,!0)):[]}),Ox=fe(function(s,l){var h=Ut(l);return Je(h)&&(h=n),Je(s)?Vi(s,ct(l,1,Je,!0),ne(h,2)):[]}),_x=fe(function(s,l){var h=Ut(l);return Je(h)&&(h=n),Je(s)?Vi(s,ct(l,1,Je,!0),n,h):[]});function Dx(s,l,h){var m=s==null?0:s.length;return m?(l=h||l===n?1:ce(l),Vt(s,l<0?0:l,m)):[]}a(Dx,"drop");function kx(s,l,h){var m=s==null?0:s.length;return m?(l=h||l===n?1:ce(l),l=m-l,Vt(s,0,l<0?0:l)):[]}a(kx,"dropRight");function Px(s,l){return s&&s.length?yo(s,ne(l,3),!0,!0):[]}a(Px,"dropRightWhile");function Fx(s,l){return s&&s.length?yo(s,ne(l,3),!0):[]}a(Fx,"dropWhile");function Hx(s,l,h,m){var v=s==null?0:s.length;return v?(h&&typeof h!="number"&&vt(s,l,h)&&(h=0,m=v),Lw(s,l,h,m)):[]}a(Hx,"fill");function Pp(s,l,h){var m=s==null?0:s.length;if(!m)return-1;var v=h==null?0:ce(h);return v<0&&(v=it(m+v,0)),Ys(s,ne(l,3),v)}a(Pp,"findIndex");function Fp(s,l,h){var m=s==null?0:s.length;if(!m)return-1;var v=m-1;return h!==n&&(v=ce(h),v=h<0?it(m+v,0):ft(v,m-1)),Ys(s,ne(l,3),v,!0)}a(Fp,"findLastIndex");function Hp(s){var l=s==null?0:s.length;return l?ct(s,1):[]}a(Hp,"flatten");function $x(s){var l=s==null?0:s.length;return l?ct(s,Q):[]}a($x,"flattenDeep");function Wx(s,l){var h=s==null?0:s.length;return h?(l=l===n?1:ce(l),ct(s,l)):[]}a(Wx,"flattenDepth");function Bx(s){for(var l=-1,h=s==null?0:s.length,m={};++l<h;){var v=s[l];m[v[0]]=v[1]}return m}a(Bx,"fromPairs");function $p(s){return s&&s.length?s[0]:n}a($p,"head");function Vx(s,l,h){var m=s==null?0:s.length;if(!m)return-1;var v=h==null?0:ce(h);return v<0&&(v=it(m+v,0)),_n(s,l,v)}a(Vx,"indexOf");function Ux(s){var l=s==null?0:s.length;return l?Vt(s,0,-1):[]}a(Ux,"initial");var Gx=fe(function(s){var l=Ge(s,Fc);return l.length&&l[0]===s[0]?Ic(l):[]}),zx=fe(function(s){var l=Ut(s),h=Ge(s,Fc);return l===Ut(h)?l=n:h.pop(),h.length&&h[0]===s[0]?Ic(h,ne(l,2)):[]}),qx=fe(function(s){var l=Ut(s),h=Ge(s,Fc);return l=typeof l=="function"?l:n,l&&h.pop(),h.length&&h[0]===s[0]?Ic(h,n,l):[]});function jx(s,l){return s==null?"":US.call(s,l)}a(jx,"join");function Ut(s){var l=s==null?0:s.length;return l?s[l-1]:n}a(Ut,"last");function Kx(s,l,h){var m=s==null?0:s.length;if(!m)return-1;var v=m;return h!==n&&(v=ce(h),v=v<0?it(m+v,0):ft(v,m-1)),l===l?IS(s,l,v):Ys(s,bf,v,!0)}a(Kx,"lastIndexOf");function Yx(s,l){return s&&s.length?Xf(s,ce(l)):n}a(Yx,"nth");var Xx=fe(Wp);function Wp(s,l){return s&&s.length&&l&&l.length?Nc(s,l):s}a(Wp,"pullAll");function Zx(s,l,h){return s&&s.length&&l&&l.length?Nc(s,l,ne(h,2)):s}a(Zx,"pullAllBy");function Qx(s,l,h){return s&&s.length&&l&&l.length?Nc(s,l,n,h):s}a(Qx,"pullAllWith");var Jx=wr(function(s,l){var h=s==null?0:s.length,m=xc(s,l);return Jf(s,Ge(l,function(v){return xr(v,h)?+v:v}).sort(cp)),m});function eC(s,l){var h=[];if(!(s&&s.length))return h;var m=-1,v=[],x=s.length;for(l=ne(l,3);++m<x;){var T=s[m];l(T,m,s)&&(h.push(T),v.push(m))}return Jf(s,v),h}a(eC,"remove");function Zc(s){return s==null?s:jS.call(s)}a(Zc,"reverse");function tC(s,l,h){var m=s==null?0:s.length;return m?(h&&typeof h!="number"&&vt(s,l,h)?(l=0,h=m):(l=l==null?0:ce(l),h=h===n?m:ce(h)),Vt(s,l,h)):[]}a(tC,"slice");function rC(s,l){return go(s,l)}a(rC,"sortedIndex");function nC(s,l,h){return Dc(s,l,ne(h,2))}a(nC,"sortedIndexBy");function iC(s,l){var h=s==null?0:s.length;if(h){var m=go(s,l);if(m<h&&Yt(s[m],l))return m}return-1}a(iC,"sortedIndexOf");function sC(s,l){return go(s,l,!0)}a(sC,"sortedLastIndex");function oC(s,l,h){return Dc(s,l,ne(h,2),!0)}a(oC,"sortedLastIndexBy");function aC(s,l){var h=s==null?0:s.length;if(h){var m=go(s,l,!0)-1;if(Yt(s[m],l))return m}return-1}a(aC,"sortedLastIndexOf");function lC(s){return s&&s.length?tp(s):[]}a(lC,"sortedUniq");function cC(s,l){return s&&s.length?tp(s,ne(l,2)):[]}a(cC,"sortedUniqBy");function uC(s){var l=s==null?0:s.length;return l?Vt(s,1,l):[]}a(uC,"tail");function dC(s,l,h){return s&&s.length?(l=h||l===n?1:ce(l),Vt(s,0,l<0?0:l)):[]}a(dC,"take");function hC(s,l,h){var m=s==null?0:s.length;return m?(l=h||l===n?1:ce(l),l=m-l,Vt(s,l<0?0:l,m)):[]}a(hC,"takeRight");function fC(s,l){return s&&s.length?yo(s,ne(l,3),!1,!0):[]}a(fC,"takeRightWhile");function pC(s,l){return s&&s.length?yo(s,ne(l,3)):[]}a(pC,"takeWhile");var mC=fe(function(s){return zr(ct(s,1,Je,!0))}),gC=fe(function(s){var l=Ut(s);return Je(l)&&(l=n),zr(ct(s,1,Je,!0),ne(l,2))}),yC=fe(function(s){var l=Ut(s);return l=typeof l=="function"?l:n,zr(ct(s,1,Je,!0),n,l)});function vC(s){return s&&s.length?zr(s):[]}a(vC,"uniq");function bC(s,l){return s&&s.length?zr(s,ne(l,2)):[]}a(bC,"uniqBy");function EC(s,l){return l=typeof l=="function"?l:n,s&&s.length?zr(s,n,l):[]}a(EC,"uniqWith");function Qc(s){if(!(s&&s.length))return[];var l=0;return s=$r(s,function(h){if(Je(h))return l=it(h.length,l),!0}),mc(l,function(h){return Ge(s,hc(h))})}a(Qc,"unzip");function Bp(s,l){if(!(s&&s.length))return[];var h=Qc(s);return l==null?h:Ge(h,function(m){return At(l,n,m)})}a(Bp,"unzipWith");var SC=fe(function(s,l){return Je(s)?Vi(s,l):[]}),wC=fe(function(s){return Pc($r(s,Je))}),xC=fe(function(s){var l=Ut(s);return Je(l)&&(l=n),Pc($r(s,Je),ne(l,2))}),CC=fe(function(s){var l=Ut(s);return l=typeof l=="function"?l:n,Pc($r(s,Je),n,l)}),MC=fe(Qc);function TC(s,l){return sp(s||[],l||[],Bi)}a(TC,"zipObject");function IC(s,l){return sp(s||[],l||[],zi)}a(IC,"zipObjectDeep");var AC=fe(function(s){var l=s.length,h=l>1?s[l-1]:n;return h=typeof h=="function"?(s.pop(),h):n,Bp(s,h)});function Vp(s){var l=S(s);return l.__chain__=!0,l}a(Vp,"chain");function RC(s,l){return l(s),s}a(RC,"tap");function To(s,l){return l(s)}a(To,"thru");var LC=wr(function(s){var l=s.length,h=l?s[0]:0,m=this.__wrapped__,v=a(function(x){return xc(x,s)},"interceptor");return l>1||this.__actions__.length||!(m instanceof ge)||!xr(h)?this.thru(v):(m=m.slice(h,+h+(l?1:0)),m.__actions__.push({func:To,args:[v],thisArg:n}),new Wt(m,this.__chain__).thru(function(x){return l&&!x.length&&x.push(n),x}))});function NC(){return Vp(this)}a(NC,"wrapperChain");function OC(){return new Wt(this.value(),this.__chain__)}a(OC,"wrapperCommit");function _C(){this.__values__===n&&(this.__values__=rm(this.value()));var s=this.__index__>=this.__values__.length,l=s?n:this.__values__[this.__index__++];return{done:s,value:l}}a(_C,"wrapperNext");function DC(){return this}a(DC,"wrapperToIterator");function kC(s){for(var l,h=this;h instanceof uo;){var m=kp(h);m.__index__=0,m.__values__=n,l?v.__wrapped__=m:l=m;var v=m;h=h.__wrapped__}return v.__wrapped__=s,l}a(kC,"wrapperPlant");function PC(){var s=this.__wrapped__;if(s instanceof ge){var l=s;return this.__actions__.length&&(l=new ge(this)),l=l.reverse(),l.__actions__.push({func:To,args:[Zc],thisArg:n}),new Wt(l,this.__chain__)}return this.thru(Zc)}a(PC,"wrapperReverse");function FC(){return ip(this.__wrapped__,this.__actions__)}a(FC,"wrapperValue");var HC=vo(function(s,l,h){Ae.call(s,h)?++s[h]:Er(s,h,1)});function $C(s,l,h){var m=le(s)?yf:Rw;return h&&vt(s,l,h)&&(l=n),m(s,ne(l,3))}a($C,"every");function WC(s,l){var h=le(s)?$r:Bf;return h(s,ne(l,3))}a(WC,"filter");var BC=mp(Pp),VC=mp(Fp);function UC(s,l){return ct(Io(s,l),1)}a(UC,"flatMap");function GC(s,l){return ct(Io(s,l),Q)}a(GC,"flatMapDeep");function zC(s,l,h){return h=h===n?1:ce(h),ct(Io(s,l),h)}a(zC,"flatMapDepth");function Up(s,l){var h=le(s)?Ht:Gr;return h(s,ne(l,3))}a(Up,"forEach");function Gp(s,l){var h=le(s)?uS:Wf;return h(s,ne(l,3))}a(Gp,"forEachRight");var qC=vo(function(s,l,h){Ae.call(s,h)?s[h].push(l):Er(s,h,[l])});function jC(s,l,h,m){s=xt(s)?s:Gn(s),h=h&&!m?ce(h):0;var v=s.length;return h<0&&(h=it(v+h,0)),Oo(s)?h<=v&&s.indexOf(l,h)>-1:!!v&&_n(s,l,h)>-1}a(jC,"includes");var KC=fe(function(s,l,h){var m=-1,v=typeof l=="function",x=xt(s)?O(s.length):[];return Gr(s,function(T){x[++m]=v?At(l,T,h):Ui(T,l,h)}),x}),YC=vo(function(s,l,h){Er(s,h,l)});function Io(s,l){var h=le(s)?Ge:jf;return h(s,ne(l,3))}a(Io,"map");function XC(s,l,h,m){return s==null?[]:(le(l)||(l=l==null?[]:[l]),h=m?n:h,le(h)||(h=h==null?[]:[h]),Zf(s,l,h))}a(XC,"orderBy");var ZC=vo(function(s,l,h){s[h?0:1].push(l)},function(){return[[],[]]});function QC(s,l,h){var m=le(s)?uc:Sf,v=arguments.length<3;return m(s,ne(l,4),h,v,Gr)}a(QC,"reduce");function JC(s,l,h){var m=le(s)?dS:Sf,v=arguments.length<3;return m(s,ne(l,4),h,v,Wf)}a(JC,"reduceRight");function eM(s,l){var h=le(s)?$r:Bf;return h(s,Lo(ne(l,3)))}a(eM,"reject");function tM(s){var l=le(s)?Pf:jw;return l(s)}a(tM,"sample");function rM(s,l,h){(h?vt(s,l,h):l===n)?l=1:l=ce(l);var m=le(s)?Cw:Kw;return m(s,l)}a(rM,"sampleSize");function nM(s){var l=le(s)?Mw:Xw;return l(s)}a(nM,"shuffle");function iM(s){if(s==null)return 0;if(xt(s))return Oo(s)?kn(s):s.length;var l=pt(s);return l==Ke||l==qt?s.size:Rc(s).length}a(iM,"size");function sM(s,l,h){var m=le(s)?dc:Zw;return h&&vt(s,l,h)&&(l=n),m(s,ne(l,3))}a(sM,"some");var oM=fe(function(s,l){if(s==null)return[];var h=l.length;return h>1&&vt(s,l[0],l[1])?l=[]:h>2&&vt(l[0],l[1],l[2])&&(l=[l[0]]),Zf(s,ct(l,1),[])}),Ao=WS||function(){return ot.Date.now()};function aM(s,l){if(typeof l!="function")throw new $t(i);return s=ce(s),function(){if(--s<1)return l.apply(this,arguments)}}a(aM,"after");function zp(s,l,h){return l=h?n:l,l=s&&l==null?s.length:l,Sr(s,z,n,n,n,n,l)}a(zp,"ary");function qp(s,l){var h;if(typeof l!="function")throw new $t(i);return s=ce(s),function(){return--s>0&&(h=l.apply(this,arguments)),s<=1&&(l=n),h}}a(qp,"before");var Jc=fe(function(s,l,h){var m=E;if(h.length){var v=Br(h,Vn(Jc));m|=A}return Sr(s,m,l,h,v)}),jp=fe(function(s,l,h){var m=E|C;if(h.length){var v=Br(h,Vn(jp));m|=A}return Sr(l,m,s,h,v)});function Kp(s,l,h){l=h?n:l;var m=Sr(s,M,n,n,n,n,n,l);return m.placeholder=Kp.placeholder,m}a(Kp,"curry");function Yp(s,l,h){l=h?n:l;var m=Sr(s,N,n,n,n,n,n,l);return m.placeholder=Yp.placeholder,m}a(Yp,"curryRight");function Xp(s,l,h){var m,v,x,T,I,L,P=0,F=!1,H=!1,K=!0;if(typeof s!="function")throw new $t(i);l=Gt(l)||0,Ye(h)&&(F=!!h.leading,H="maxWait"in h,x=H?it(Gt(h.maxWait)||0,l):x,K="trailing"in h?!!h.trailing:K);function J(et){var Xt=m,Tr=v;return m=v=n,P=et,T=s.apply(Tr,Xt),T}a(J,"invokeFunc");function ie(et){return P=et,I=Ki(me,l),F?J(et):T}a(ie,"leadingEdge");function ue(et){var Xt=et-L,Tr=et-P,mm=l-Xt;return H?ft(mm,x-Tr):mm}a(ue,"remainingWait");function se(et){var Xt=et-L,Tr=et-P;return L===n||Xt>=l||Xt<0||H&&Tr>=x}a(se,"shouldInvoke");function me(){var et=Ao();if(se(et))return be(et);I=Ki(me,ue(et))}a(me,"timerExpired");function be(et){return I=n,K&&m?J(et):(m=v=n,T)}a(be,"trailingEdge");function Ot(){I!==n&&op(I),P=0,m=L=v=I=n}a(Ot,"cancel");function bt(){return I===n?T:be(Ao())}a(bt,"flush");function _t(){var et=Ao(),Xt=se(et);if(m=arguments,v=this,L=et,Xt){if(I===n)return ie(L);if(H)return op(I),I=Ki(me,l),J(L)}return I===n&&(I=Ki(me,l)),T}return a(_t,"debounced"),_t.cancel=Ot,_t.flush=bt,_t}a(Xp,"debounce");var lM=fe(function(s,l){return $f(s,1,l)}),cM=fe(function(s,l,h){return $f(s,Gt(l)||0,h)});function uM(s){return Sr(s,ee)}a(uM,"flip");function Ro(s,l){if(typeof s!="function"||l!=null&&typeof l!="function")throw new $t(i);var h=a(function(){var m=arguments,v=l?l.apply(this,m):m[0],x=h.cache;if(x.has(v))return x.get(v);var T=s.apply(this,m);return h.cache=x.set(v,T)||x,T},"memoized");return h.cache=new(Ro.Cache||br),h}a(Ro,"memoize"),Ro.Cache=br;function Lo(s){if(typeof s!="function")throw new $t(i);return function(){var l=arguments;switch(l.length){case 0:return!s.call(this);case 1:return!s.call(this,l[0]);case 2:return!s.call(this,l[0],l[1]);case 3:return!s.call(this,l[0],l[1],l[2])}return!s.apply(this,l)}}a(Lo,"negate");function dM(s){return qp(2,s)}a(dM,"once");var hM=Qw(function(s,l){l=l.length==1&&le(l[0])?Ge(l[0],Rt(ne())):Ge(ct(l,1),Rt(ne()));var h=l.length;return fe(function(m){for(var v=-1,x=ft(m.length,h);++v<x;)m[v]=l[v].call(this,m[v]);return At(s,this,m)})}),eu=fe(function(s,l){var h=Br(l,Vn(eu));return Sr(s,A,n,l,h)}),Zp=fe(function(s,l){var h=Br(l,Vn(Zp));return Sr(s,_,n,l,h)}),fM=wr(function(s,l){return Sr(s,G,n,n,n,l)});function pM(s,l){if(typeof s!="function")throw new $t(i);return l=l===n?l:ce(l),fe(s,l)}a(pM,"rest");function mM(s,l){if(typeof s!="function")throw new $t(i);return l=l==null?0:it(ce(l),0),fe(function(h){var m=h[l],v=jr(h,0,l);return m&&Wr(v,m),At(s,this,v)})}a(mM,"spread");function gM(s,l,h){var m=!0,v=!0;if(typeof s!="function")throw new $t(i);return Ye(h)&&(m="leading"in h?!!h.leading:m,v="trailing"in h?!!h.trailing:v),Xp(s,l,{leading:m,maxWait:l,trailing:v})}a(gM,"throttle");function yM(s){return zp(s,1)}a(yM,"unary");function vM(s,l){return eu(Hc(l),s)}a(vM,"wrap");function bM(){if(!arguments.length)return[];var s=arguments[0];return le(s)?s:[s]}a(bM,"castArray");function EM(s){return Bt(s,g)}a(EM,"clone");function SM(s,l){return l=typeof l=="function"?l:n,Bt(s,g,l)}a(SM,"cloneWith");function wM(s){return Bt(s,f|g)}a(wM,"cloneDeep");function xM(s,l){return l=typeof l=="function"?l:n,Bt(s,f|g,l)}a(xM,"cloneDeepWith");function CM(s,l){return l==null||Hf(s,l,at(l))}a(CM,"conformsTo");function Yt(s,l){return s===l||s!==s&&l!==l}a(Yt,"eq");var MM=wo(Tc),TM=wo(function(s,l){return s>=l}),vn=Gf(function(){return arguments}())?Gf:function(s){return Ze(s)&&Ae.call(s,"callee")&&!Lf.call(s,"callee")},le=O.isArray,IM=df?Rt(df):kw;function xt(s){return s!=null&&No(s.length)&&!Cr(s)}a(xt,"isArrayLike");function Je(s){return Ze(s)&&xt(s)}a(Je,"isArrayLikeObject");function AM(s){return s===!0||s===!1||Ze(s)&&yt(s)==Pt}a(AM,"isBoolean");var Kr=VS||du,RM=hf?Rt(hf):Pw;function LM(s){return Ze(s)&&s.nodeType===1&&!Yi(s)}a(LM,"isElement");function NM(s){if(s==null)return!0;if(xt(s)&&(le(s)||typeof s=="string"||typeof s.splice=="function"||Kr(s)||Un(s)||vn(s)))return!s.length;var l=pt(s);if(l==Ke||l==qt)return!s.size;if(ji(s))return!Rc(s).length;for(var h in s)if(Ae.call(s,h))return!1;return!0}a(NM,"isEmpty");function OM(s,l){return Gi(s,l)}a(OM,"isEqual");function _M(s,l,h){h=typeof h=="function"?h:n;var m=h?h(s,l):n;return m===n?Gi(s,l,n,h):!!m}a(_M,"isEqualWith");function tu(s){if(!Ze(s))return!1;var l=yt(s);return l==Hr||l==gr||typeof s.message=="string"&&typeof s.name=="string"&&!Yi(s)}a(tu,"isError");function DM(s){return typeof s=="number"&&Of(s)}a(DM,"isFinite");function Cr(s){if(!Ye(s))return!1;var l=yt(s);return l==yr||l==xe||l==cn||l==Li}a(Cr,"isFunction");function Qp(s){return typeof s=="number"&&s==ce(s)}a(Qp,"isInteger");function No(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=Y}a(No,"isLength");function Ye(s){var l=typeof s;return s!=null&&(l=="object"||l=="function")}a(Ye,"isObject");function Ze(s){return s!=null&&typeof s=="object"}a(Ze,"isObjectLike");var Jp=ff?Rt(ff):Hw;function kM(s,l){return s===l||Ac(s,l,zc(l))}a(kM,"isMatch");function PM(s,l,h){return h=typeof h=="function"?h:n,Ac(s,l,zc(l),h)}a(PM,"isMatchWith");function FM(s){return em(s)&&s!=+s}a(FM,"isNaN");function HM(s){if(Sx(s))throw new ae(r);return zf(s)}a(HM,"isNative");function $M(s){return s===null}a($M,"isNull");function WM(s){return s==null}a(WM,"isNil");function em(s){return typeof s=="number"||Ze(s)&&yt(s)==Ne}a(em,"isNumber");function Yi(s){if(!Ze(s)||yt(s)!=rt)return!1;var l=no(s);if(l===null)return!0;var h=Ae.call(l,"constructor")&&l.constructor;return typeof h=="function"&&h instanceof h&&Js.call(h)==PS}a(Yi,"isPlainObject");var ru=pf?Rt(pf):$w;function BM(s){return Qp(s)&&s>=-Y&&s<=Y}a(BM,"isSafeInteger");var tm=mf?Rt(mf):Ww;function Oo(s){return typeof s=="string"||!le(s)&&Ze(s)&&yt(s)==Oi}a(Oo,"isString");function Nt(s){return typeof s=="symbol"||Ze(s)&&yt(s)==Gs}a(Nt,"isSymbol");var Un=gf?Rt(gf):Bw;function VM(s){return s===n}a(VM,"isUndefined");function UM(s){return Ze(s)&&pt(s)==_i}a(UM,"isWeakMap");function GM(s){return Ze(s)&&yt(s)==oE}a(GM,"isWeakSet");var zM=wo(Lc),qM=wo(function(s,l){return s<=l});function rm(s){if(!s)return[];if(xt(s))return Oo(s)?jt(s):wt(s);if(Pi&&s[Pi])return CS(s[Pi]());var l=pt(s),h=l==Ke?yc:l==qt?Xs:Gn;return h(s)}a(rm,"toArray");function Mr(s){if(!s)return s===0?s:0;if(s=Gt(s),s===Q||s===-Q){var l=s<0?-1:1;return l*we}return s===s?s:0}a(Mr,"toFinite");function ce(s){var l=Mr(s),h=l%1;return l===l?h?l-h:l:0}a(ce,"toInteger");function nm(s){return s?pn(ce(s),0,_e):0}a(nm,"toLength");function Gt(s){if(typeof s=="number")return s;if(Nt(s))return Fe;if(Ye(s)){var l=typeof s.valueOf=="function"?s.valueOf():s;s=Ye(l)?l+"":l}if(typeof s!="string")return s===0?s:+s;s=wf(s);var h=IE.test(s);return h||RE.test(s)?aS(s.slice(2),h?2:8):TE.test(s)?Fe:+s}a(Gt,"toNumber");function im(s){return rr(s,Ct(s))}a(im,"toPlainObject");function jM(s){return s?pn(ce(s),-Y,Y):s===0?s:0}a(jM,"toSafeInteger");function Ie(s){return s==null?"":Lt(s)}a(Ie,"toString");var KM=Wn(function(s,l){if(ji(l)||xt(l)){rr(l,at(l),s);return}for(var h in l)Ae.call(l,h)&&Bi(s,h,l[h])}),sm=Wn(function(s,l){rr(l,Ct(l),s)}),_o=Wn(function(s,l,h,m){rr(l,Ct(l),s,m)}),YM=Wn(function(s,l,h,m){rr(l,at(l),s,m)}),XM=wr(xc);function ZM(s,l){var h=$n(s);return l==null?h:Ff(h,l)}a(ZM,"create");var QM=fe(function(s,l){s=Oe(s);var h=-1,m=l.length,v=m>2?l[2]:n;for(v&&vt(l[0],l[1],v)&&(m=1);++h<m;)for(var x=l[h],T=Ct(x),I=-1,L=T.length;++I<L;){var P=T[I],F=s[P];(F===n||Yt(F,Pn[P])&&!Ae.call(s,P))&&(s[P]=x[P])}return s}),JM=fe(function(s){return s.push(n,wp),At(om,n,s)});function eT(s,l){return vf(s,ne(l,3),tr)}a(eT,"findKey");function tT(s,l){return vf(s,ne(l,3),Mc)}a(tT,"findLastKey");function rT(s,l){return s==null?s:Cc(s,ne(l,3),Ct)}a(rT,"forIn");function nT(s,l){return s==null?s:Vf(s,ne(l,3),Ct)}a(nT,"forInRight");function iT(s,l){return s&&tr(s,ne(l,3))}a(iT,"forOwn");function sT(s,l){return s&&Mc(s,ne(l,3))}a(sT,"forOwnRight");function oT(s){return s==null?[]:po(s,at(s))}a(oT,"functions");function aT(s){return s==null?[]:po(s,Ct(s))}a(aT,"functionsIn");function nu(s,l,h){var m=s==null?n:mn(s,l);return m===n?h:m}a(nu,"get");function lT(s,l){return s!=null&&Mp(s,l,Nw)}a(lT,"has");function iu(s,l){return s!=null&&Mp(s,l,Ow)}a(iu,"hasIn");var cT=yp(function(s,l,h){l!=null&&typeof l.toString!="function"&&(l=eo.call(l)),s[l]=h},ou(Mt)),uT=yp(function(s,l,h){l!=null&&typeof l.toString!="function"&&(l=eo.call(l)),Ae.call(s,l)?s[l].push(h):s[l]=[h]},ne),dT=fe(Ui);function at(s){return xt(s)?kf(s):Rc(s)}a(at,"keys");function Ct(s){return xt(s)?kf(s,!0):Vw(s)}a(Ct,"keysIn");function hT(s,l){var h={};return l=ne(l,3),tr(s,function(m,v,x){Er(h,l(m,v,x),m)}),h}a(hT,"mapKeys");function fT(s,l){var h={};return l=ne(l,3),tr(s,function(m,v,x){Er(h,v,l(m,v,x))}),h}a(fT,"mapValues");var pT=Wn(function(s,l,h){mo(s,l,h)}),om=Wn(function(s,l,h,m){mo(s,l,h,m)}),mT=wr(function(s,l){var h={};if(s==null)return h;var m=!1;l=Ge(l,function(x){return x=qr(x,s),m||(m=x.length>1),x}),rr(s,Uc(s),h),m&&(h=Bt(h,f|p|g,cx));for(var v=l.length;v--;)kc(h,l[v]);return h});function gT(s,l){return am(s,Lo(ne(l)))}a(gT,"omitBy");var yT=wr(function(s,l){return s==null?{}:Gw(s,l)});function am(s,l){if(s==null)return{};var h=Ge(Uc(s),function(m){return[m]});return l=ne(l),Qf(s,h,function(m,v){return l(m,v[0])})}a(am,"pickBy");function vT(s,l,h){l=qr(l,s);var m=-1,v=l.length;for(v||(v=1,s=n);++m<v;){var x=s==null?n:s[nr(l[m])];x===n&&(m=v,x=h),s=Cr(x)?x.call(s):x}return s}a(vT,"result");function bT(s,l,h){return s==null?s:zi(s,l,h)}a(bT,"set");function ET(s,l,h,m){return m=typeof m=="function"?m:n,s==null?s:zi(s,l,h,m)}a(ET,"setWith");var lm=Ep(at),cm=Ep(Ct);function ST(s,l,h){var m=le(s),v=m||Kr(s)||Un(s);if(l=ne(l,4),h==null){var x=s&&s.constructor;v?h=m?new x:[]:Ye(s)?h=Cr(x)?$n(no(s)):{}:h={}}return(v?Ht:tr)(s,function(T,I,L){return l(h,T,I,L)}),h}a(ST,"transform");function wT(s,l){return s==null?!0:kc(s,l)}a(wT,"unset");function xT(s,l,h){return s==null?s:np(s,l,Hc(h))}a(xT,"update");function CT(s,l,h,m){return m=typeof m=="function"?m:n,s==null?s:np(s,l,Hc(h),m)}a(CT,"updateWith");function Gn(s){return s==null?[]:gc(s,at(s))}a(Gn,"values");function MT(s){return s==null?[]:gc(s,Ct(s))}a(MT,"valuesIn");function TT(s,l,h){return h===n&&(h=l,l=n),h!==n&&(h=Gt(h),h=h===h?h:0),l!==n&&(l=Gt(l),l=l===l?l:0),pn(Gt(s),l,h)}a(TT,"clamp");function IT(s,l,h){return l=Mr(l),h===n?(h=l,l=0):h=Mr(h),s=Gt(s),_w(s,l,h)}a(IT,"inRange");function AT(s,l,h){if(h&&typeof h!="boolean"&&vt(s,l,h)&&(l=h=n),h===n&&(typeof l=="boolean"?(h=l,l=n):typeof s=="boolean"&&(h=s,s=n)),s===n&&l===n?(s=0,l=1):(s=Mr(s),l===n?(l=s,s=0):l=Mr(l)),s>l){var m=s;s=l,l=m}if(h||s%1||l%1){var v=_f();return ft(s+v*(l-s+oS("1e-"+((v+"").length-1))),l)}return Oc(s,l)}a(AT,"random");var RT=Bn(function(s,l,h){return l=l.toLowerCase(),s+(h?um(l):l)});function um(s){return su(Ie(s).toLowerCase())}a(um,"capitalize");function dm(s){return s=Ie(s),s&&s.replace(NE,bS).replace(XE,"")}a(dm,"deburr");function LT(s,l,h){s=Ie(s),l=Lt(l);var m=s.length;h=h===n?m:pn(ce(h),0,m);var v=h;return h-=l.length,h>=0&&s.slice(h,v)==l}a(LT,"endsWith");function NT(s){return s=Ie(s),s&&dE.test(s)?s.replace(Bh,ES):s}a(NT,"escape");function OT(s){return s=Ie(s),s&&yE.test(s)?s.replace(ec,"\\$&"):s}a(OT,"escapeRegExp");var _T=Bn(function(s,l,h){return s+(h?"-":"")+l.toLowerCase()}),DT=Bn(function(s,l,h){return s+(h?" ":"")+l.toLowerCase()}),kT=pp("toLowerCase");function PT(s,l,h){s=Ie(s),l=ce(l);var m=l?kn(s):0;if(!l||m>=l)return s;var v=(l-m)/2;return So(ao(v),h)+s+So(oo(v),h)}a(PT,"pad");function FT(s,l,h){s=Ie(s),l=ce(l);var m=l?kn(s):0;return l&&m<l?s+So(l-m,h):s}a(FT,"padEnd");function HT(s,l,h){s=Ie(s),l=ce(l);var m=l?kn(s):0;return l&&m<l?So(l-m,h)+s:s}a(HT,"padStart");function $T(s,l,h){return h||l==null?l=0:l&&(l=+l),qS(Ie(s).replace(tc,""),l||0)}a($T,"parseInt");function WT(s,l,h){return(h?vt(s,l,h):l===n)?l=1:l=ce(l),_c(Ie(s),l)}a(WT,"repeat");function BT(){var s=arguments,l=Ie(s[0]);return s.length<3?l:l.replace(s[1],s[2])}a(BT,"replace");var VT=Bn(function(s,l,h){return s+(h?"_":"")+l.toLowerCase()});function UT(s,l,h){return h&&typeof h!="number"&&vt(s,l,h)&&(l=h=n),h=h===n?_e:h>>>0,h?(s=Ie(s),s&&(typeof l=="string"||l!=null&&!ru(l))&&(l=Lt(l),!l&&Dn(s))?jr(jt(s),0,h):s.split(l,h)):[]}a(UT,"split");var GT=Bn(function(s,l,h){return s+(h?" ":"")+su(l)});function zT(s,l,h){return s=Ie(s),h=h==null?0:pn(ce(h),0,s.length),l=Lt(l),s.slice(h,h+l.length)==l}a(zT,"startsWith");function qT(s,l,h){var m=S.templateSettings;h&&vt(s,l,h)&&(l=n),s=Ie(s),l=_o({},l,m,Sp);var v=_o({},l.imports,m.imports,Sp),x=at(v),T=gc(v,x),I,L,P=0,F=l.interpolate||zs,H="__p += '",K=vc((l.escape||zs).source+"|"+F.source+"|"+(F===Vh?ME:zs).source+"|"+(l.evaluate||zs).source+"|$","g"),J="//# sourceURL="+(Ae.call(l,"sourceURL")?(l.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++tS+"]")+`
`;s.replace(K,function(se,me,be,Ot,bt,_t){return be||(be=Ot),H+=s.slice(P,_t).replace(OE,SS),me&&(I=!0,H+=`' +
__e(`+me+`) +
'`),bt&&(L=!0,H+=`';
`+bt+`;
__p += '`),be&&(H+=`' +
((__t = (`+be+`)) == null ? '' : __t) +
'`),P=_t+se.length,se}),H+=`';
`;var ie=Ae.call(l,"variable")&&l.variable;if(!ie)H=`with (obj) {
`+H+`
}
`;else if(xE.test(ie))throw new ae(o);H=(L?H.replace(aE,""):H).replace(lE,"$1").replace(cE,"$1;"),H="function("+(ie||"obj")+`) {
`+(ie?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(I?", __e = _.escape":"")+(L?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+H+`return __p
}`;var ue=fm(function(){return Me(x,J+"return "+H).apply(n,T)});if(ue.source=H,tu(ue))throw ue;return ue}a(qT,"template");function jT(s){return Ie(s).toLowerCase()}a(jT,"toLower");function KT(s){return Ie(s).toUpperCase()}a(KT,"toUpper");function YT(s,l,h){if(s=Ie(s),s&&(h||l===n))return wf(s);if(!s||!(l=Lt(l)))return s;var m=jt(s),v=jt(l),x=xf(m,v),T=Cf(m,v)+1;return jr(m,x,T).join("")}a(YT,"trim");function XT(s,l,h){if(s=Ie(s),s&&(h||l===n))return s.slice(0,Tf(s)+1);if(!s||!(l=Lt(l)))return s;var m=jt(s),v=Cf(m,jt(l))+1;return jr(m,0,v).join("")}a(XT,"trimEnd");function ZT(s,l,h){if(s=Ie(s),s&&(h||l===n))return s.replace(tc,"");if(!s||!(l=Lt(l)))return s;var m=jt(s),v=xf(m,jt(l));return jr(m,v).join("")}a(ZT,"trimStart");function QT(s,l){var h=V,m=j;if(Ye(l)){var v="separator"in l?l.separator:v;h="length"in l?ce(l.length):h,m="omission"in l?Lt(l.omission):m}s=Ie(s);var x=s.length;if(Dn(s)){var T=jt(s);x=T.length}if(h>=x)return s;var I=h-kn(m);if(I<1)return m;var L=T?jr(T,0,I).join(""):s.slice(0,I);if(v===n)return L+m;if(T&&(I+=L.length-I),ru(v)){if(s.slice(I).search(v)){var P,F=L;for(v.global||(v=vc(v.source,Ie(Uh.exec(v))+"g")),v.lastIndex=0;P=v.exec(F);)var H=P.index;L=L.slice(0,H===n?I:H)}}else if(s.indexOf(Lt(v),I)!=I){var K=L.lastIndexOf(v);K>-1&&(L=L.slice(0,K))}return L+m}a(QT,"truncate");function JT(s){return s=Ie(s),s&&uE.test(s)?s.replace(Wh,AS):s}a(JT,"unescape");var e0=Bn(function(s,l,h){return s+(h?" ":"")+l.toUpperCase()}),su=pp("toUpperCase");function hm(s,l,h){return s=Ie(s),l=h?n:l,l===n?xS(s)?NS(s):pS(s):s.match(l)||[]}a(hm,"words");var fm=fe(function(s,l){try{return At(s,n,l)}catch(h){return tu(h)?h:new ae(h)}}),t0=wr(function(s,l){return Ht(l,function(h){h=nr(h),Er(s,h,Jc(s[h],s))}),s});function r0(s){var l=s==null?0:s.length,h=ne();return s=l?Ge(s,function(m){if(typeof m[1]!="function")throw new $t(i);return[h(m[0]),m[1]]}):[],fe(function(m){for(var v=-1;++v<l;){var x=s[v];if(At(x[0],this,m))return At(x[1],this,m)}})}a(r0,"cond");function n0(s){return Aw(Bt(s,f))}a(n0,"conforms");function ou(s){return function(){return s}}a(ou,"constant");function i0(s,l){return s==null||s!==s?l:s}a(i0,"defaultTo");var s0=gp(),o0=gp(!0);function Mt(s){return s}a(Mt,"identity");function au(s){return qf(typeof s=="function"?s:Bt(s,f))}a(au,"iteratee");function a0(s){return Kf(Bt(s,f))}a(a0,"matches");function l0(s,l){return Yf(s,Bt(l,f))}a(l0,"matchesProperty");var c0=fe(function(s,l){return function(h){return Ui(h,s,l)}}),u0=fe(function(s,l){return function(h){return Ui(s,h,l)}});function lu(s,l,h){var m=at(l),v=po(l,m);h==null&&!(Ye(l)&&(v.length||!m.length))&&(h=l,l=s,s=this,v=po(l,at(l)));var x=!(Ye(h)&&"chain"in h)||!!h.chain,T=Cr(s);return Ht(v,function(I){var L=l[I];s[I]=L,T&&(s.prototype[I]=function(){var P=this.__chain__;if(x||P){var F=s(this.__wrapped__),H=F.__actions__=wt(this.__actions__);return H.push({func:L,args:arguments,thisArg:s}),F.__chain__=P,F}return L.apply(s,Wr([this.value()],arguments))})}),s}a(lu,"mixin");function d0(){return ot._===this&&(ot._=FS),this}a(d0,"noConflict");function cu(){}a(cu,"noop");function h0(s){return s=ce(s),fe(function(l){return Xf(l,s)})}a(h0,"nthArg");var f0=Wc(Ge),p0=Wc(yf),m0=Wc(dc);function pm(s){return jc(s)?hc(nr(s)):zw(s)}a(pm,"property");function g0(s){return function(l){return s==null?n:mn(s,l)}}a(g0,"propertyOf");var y0=vp(),v0=vp(!0);function uu(){return[]}a(uu,"stubArray");function du(){return!1}a(du,"stubFalse");function b0(){return{}}a(b0,"stubObject");function E0(){return""}a(E0,"stubString");function S0(){return!0}a(S0,"stubTrue");function w0(s,l){if(s=ce(s),s<1||s>Y)return[];var h=_e,m=ft(s,_e);l=ne(l),s-=_e;for(var v=mc(m,l);++h<s;)l(h);return v}a(w0,"times");function x0(s){return le(s)?Ge(s,nr):Nt(s)?[s]:wt(Dp(Ie(s)))}a(x0,"toPath");function C0(s){var l=++kS;return Ie(s)+l}a(C0,"uniqueId");var M0=Eo(function(s,l){return s+l},0),T0=Bc("ceil"),I0=Eo(function(s,l){return s/l},1),A0=Bc("floor");function R0(s){return s&&s.length?fo(s,Mt,Tc):n}a(R0,"max");function L0(s,l){return s&&s.length?fo(s,ne(l,2),Tc):n}a(L0,"maxBy");function N0(s){return Ef(s,Mt)}a(N0,"mean");function O0(s,l){return Ef(s,ne(l,2))}a(O0,"meanBy");function _0(s){return s&&s.length?fo(s,Mt,Lc):n}a(_0,"min");function D0(s,l){return s&&s.length?fo(s,ne(l,2),Lc):n}a(D0,"minBy");var k0=Eo(function(s,l){return s*l},1),P0=Bc("round"),F0=Eo(function(s,l){return s-l},0);function H0(s){return s&&s.length?pc(s,Mt):0}a(H0,"sum");function $0(s,l){return s&&s.length?pc(s,ne(l,2)):0}return a($0,"sumBy"),S.after=aM,S.ary=zp,S.assign=KM,S.assignIn=sm,S.assignInWith=_o,S.assignWith=YM,S.at=XM,S.before=qp,S.bind=Jc,S.bindAll=t0,S.bindKey=jp,S.castArray=bM,S.chain=Vp,S.chunk=Ax,S.compact=Rx,S.concat=Lx,S.cond=r0,S.conforms=n0,S.constant=ou,S.countBy=HC,S.create=ZM,S.curry=Kp,S.curryRight=Yp,S.debounce=Xp,S.defaults=QM,S.defaultsDeep=JM,S.defer=lM,S.delay=cM,S.difference=Nx,S.differenceBy=Ox,S.differenceWith=_x,S.drop=Dx,S.dropRight=kx,S.dropRightWhile=Px,S.dropWhile=Fx,S.fill=Hx,S.filter=WC,S.flatMap=UC,S.flatMapDeep=GC,S.flatMapDepth=zC,S.flatten=Hp,S.flattenDeep=$x,S.flattenDepth=Wx,S.flip=uM,S.flow=s0,S.flowRight=o0,S.fromPairs=Bx,S.functions=oT,S.functionsIn=aT,S.groupBy=qC,S.initial=Ux,S.intersection=Gx,S.intersectionBy=zx,S.intersectionWith=qx,S.invert=cT,S.invertBy=uT,S.invokeMap=KC,S.iteratee=au,S.keyBy=YC,S.keys=at,S.keysIn=Ct,S.map=Io,S.mapKeys=hT,S.mapValues=fT,S.matches=a0,S.matchesProperty=l0,S.memoize=Ro,S.merge=pT,S.mergeWith=om,S.method=c0,S.methodOf=u0,S.mixin=lu,S.negate=Lo,S.nthArg=h0,S.omit=mT,S.omitBy=gT,S.once=dM,S.orderBy=XC,S.over=f0,S.overArgs=hM,S.overEvery=p0,S.overSome=m0,S.partial=eu,S.partialRight=Zp,S.partition=ZC,S.pick=yT,S.pickBy=am,S.property=pm,S.propertyOf=g0,S.pull=Xx,S.pullAll=Wp,S.pullAllBy=Zx,S.pullAllWith=Qx,S.pullAt=Jx,S.range=y0,S.rangeRight=v0,S.rearg=fM,S.reject=eM,S.remove=eC,S.rest=pM,S.reverse=Zc,S.sampleSize=rM,S.set=bT,S.setWith=ET,S.shuffle=nM,S.slice=tC,S.sortBy=oM,S.sortedUniq=lC,S.sortedUniqBy=cC,S.split=UT,S.spread=mM,S.tail=uC,S.take=dC,S.takeRight=hC,S.takeRightWhile=fC,S.takeWhile=pC,S.tap=RC,S.throttle=gM,S.thru=To,S.toArray=rm,S.toPairs=lm,S.toPairsIn=cm,S.toPath=x0,S.toPlainObject=im,S.transform=ST,S.unary=yM,S.union=mC,S.unionBy=gC,S.unionWith=yC,S.uniq=vC,S.uniqBy=bC,S.uniqWith=EC,S.unset=wT,S.unzip=Qc,S.unzipWith=Bp,S.update=xT,S.updateWith=CT,S.values=Gn,S.valuesIn=MT,S.without=SC,S.words=hm,S.wrap=vM,S.xor=wC,S.xorBy=xC,S.xorWith=CC,S.zip=MC,S.zipObject=TC,S.zipObjectDeep=IC,S.zipWith=AC,S.entries=lm,S.entriesIn=cm,S.extend=sm,S.extendWith=_o,lu(S,S),S.add=M0,S.attempt=fm,S.camelCase=RT,S.capitalize=um,S.ceil=T0,S.clamp=TT,S.clone=EM,S.cloneDeep=wM,S.cloneDeepWith=xM,S.cloneWith=SM,S.conformsTo=CM,S.deburr=dm,S.defaultTo=i0,S.divide=I0,S.endsWith=LT,S.eq=Yt,S.escape=NT,S.escapeRegExp=OT,S.every=$C,S.find=BC,S.findIndex=Pp,S.findKey=eT,S.findLast=VC,S.findLastIndex=Fp,S.findLastKey=tT,S.floor=A0,S.forEach=Up,S.forEachRight=Gp,S.forIn=rT,S.forInRight=nT,S.forOwn=iT,S.forOwnRight=sT,S.get=nu,S.gt=MM,S.gte=TM,S.has=lT,S.hasIn=iu,S.head=$p,S.identity=Mt,S.includes=jC,S.indexOf=Vx,S.inRange=IT,S.invoke=dT,S.isArguments=vn,S.isArray=le,S.isArrayBuffer=IM,S.isArrayLike=xt,S.isArrayLikeObject=Je,S.isBoolean=AM,S.isBuffer=Kr,S.isDate=RM,S.isElement=LM,S.isEmpty=NM,S.isEqual=OM,S.isEqualWith=_M,S.isError=tu,S.isFinite=DM,S.isFunction=Cr,S.isInteger=Qp,S.isLength=No,S.isMap=Jp,S.isMatch=kM,S.isMatchWith=PM,S.isNaN=FM,S.isNative=HM,S.isNil=WM,S.isNull=$M,S.isNumber=em,S.isObject=Ye,S.isObjectLike=Ze,S.isPlainObject=Yi,S.isRegExp=ru,S.isSafeInteger=BM,S.isSet=tm,S.isString=Oo,S.isSymbol=Nt,S.isTypedArray=Un,S.isUndefined=VM,S.isWeakMap=UM,S.isWeakSet=GM,S.join=jx,S.kebabCase=_T,S.last=Ut,S.lastIndexOf=Kx,S.lowerCase=DT,S.lowerFirst=kT,S.lt=zM,S.lte=qM,S.max=R0,S.maxBy=L0,S.mean=N0,S.meanBy=O0,S.min=_0,S.minBy=D0,S.stubArray=uu,S.stubFalse=du,S.stubObject=b0,S.stubString=E0,S.stubTrue=S0,S.multiply=k0,S.nth=Yx,S.noConflict=d0,S.noop=cu,S.now=Ao,S.pad=PT,S.padEnd=FT,S.padStart=HT,S.parseInt=$T,S.random=AT,S.reduce=QC,S.reduceRight=JC,S.repeat=WT,S.replace=BT,S.result=vT,S.round=P0,S.runInContext=R,S.sample=tM,S.size=iM,S.snakeCase=VT,S.some=sM,S.sortedIndex=rC,S.sortedIndexBy=nC,S.sortedIndexOf=iC,S.sortedLastIndex=sC,S.sortedLastIndexBy=oC,S.sortedLastIndexOf=aC,S.startCase=GT,S.startsWith=zT,S.subtract=F0,S.sum=H0,S.sumBy=$0,S.template=qT,S.times=w0,S.toFinite=Mr,S.toInteger=ce,S.toLength=nm,S.toLower=jT,S.toNumber=Gt,S.toSafeInteger=jM,S.toString=Ie,S.toUpper=KT,S.trim=YT,S.trimEnd=XT,S.trimStart=ZT,S.truncate=QT,S.unescape=JT,S.uniqueId=C0,S.upperCase=e0,S.upperFirst=su,S.each=Up,S.eachRight=Gp,S.first=$p,lu(S,function(){var s={};return tr(S,function(l,h){Ae.call(S.prototype,h)||(s[h]=l)}),s}(),{chain:!1}),S.VERSION=e,Ht(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){S[s].placeholder=S}),Ht(["drop","take"],function(s,l){ge.prototype[s]=function(h){h=h===n?1:it(ce(h),0);var m=this.__filtered__&&!l?new ge(this):this.clone();return m.__filtered__?m.__takeCount__=ft(h,m.__takeCount__):m.__views__.push({size:ft(h,_e),type:s+(m.__dir__<0?"Right":"")}),m},ge.prototype[s+"Right"]=function(h){return this.reverse()[s](h).reverse()}}),Ht(["filter","map","takeWhile"],function(s,l){var h=l+1,m=h==q||h==te;ge.prototype[s]=function(v){var x=this.clone();return x.__iteratees__.push({iteratee:ne(v,3),type:h}),x.__filtered__=x.__filtered__||m,x}}),Ht(["head","last"],function(s,l){var h="take"+(l?"Right":"");ge.prototype[s]=function(){return this[h](1).value()[0]}}),Ht(["initial","tail"],function(s,l){var h="drop"+(l?"":"Right");ge.prototype[s]=function(){return this.__filtered__?new ge(this):this[h](1)}}),ge.prototype.compact=function(){return this.filter(Mt)},ge.prototype.find=function(s){return this.filter(s).head()},ge.prototype.findLast=function(s){return this.reverse().find(s)},ge.prototype.invokeMap=fe(function(s,l){return typeof s=="function"?new ge(this):this.map(function(h){return Ui(h,s,l)})}),ge.prototype.reject=function(s){return this.filter(Lo(ne(s)))},ge.prototype.slice=function(s,l){s=ce(s);var h=this;return h.__filtered__&&(s>0||l<0)?new ge(h):(s<0?h=h.takeRight(-s):s&&(h=h.drop(s)),l!==n&&(l=ce(l),h=l<0?h.dropRight(-l):h.take(l-s)),h)},ge.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},ge.prototype.toArray=function(){return this.take(_e)},tr(ge.prototype,function(s,l){var h=/^(?:filter|find|map|reject)|While$/.test(l),m=/^(?:head|last)$/.test(l),v=S[m?"take"+(l=="last"?"Right":""):l],x=m||/^find/.test(l);v&&(S.prototype[l]=function(){var T=this.__wrapped__,I=m?[1]:arguments,L=T instanceof ge,P=I[0],F=L||le(T),H=a(function(me){var be=v.apply(S,Wr([me],I));return m&&K?be[0]:be},"interceptor");F&&h&&typeof P=="function"&&P.length!=1&&(L=F=!1);var K=this.__chain__,J=!!this.__actions__.length,ie=x&&!K,ue=L&&!J;if(!x&&F){T=ue?T:new ge(this);var se=s.apply(T,I);return se.__actions__.push({func:To,args:[H],thisArg:n}),new Wt(se,K)}return ie&&ue?s.apply(this,I):(se=this.thru(H),ie?m?se.value()[0]:se.value():se)})}),Ht(["pop","push","shift","sort","splice","unshift"],function(s){var l=Zs[s],h=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",m=/^(?:pop|shift)$/.test(s);S.prototype[s]=function(){var v=arguments;if(m&&!this.__chain__){var x=this.value();return l.apply(le(x)?x:[],v)}return this[h](function(T){return l.apply(le(T)?T:[],v)})}}),tr(ge.prototype,function(s,l){var h=S[l];if(h){var m=h.name+"";Ae.call(Hn,m)||(Hn[m]=[]),Hn[m].push({name:l,func:h})}}),Hn[bo(n,C).name]=[{name:"wrapper",func:n}],ge.prototype.clone=JS,ge.prototype.reverse=ew,ge.prototype.value=tw,S.prototype.at=LC,S.prototype.chain=NC,S.prototype.commit=OC,S.prototype.next=_C,S.prototype.plant=kC,S.prototype.reverse=PC,S.prototype.toJSON=S.prototype.valueOf=S.prototype.value=FC,S.prototype.first=S.prototype.head,Pi&&(S.prototype[Pi]=DC),S},"runInContext"),Vr=OS();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(ot._=Vr,define(function(){return Vr})):un?((un.exports=Vr)._=Vr,ac._=Vr):ot._=Vr}).call(jn)});var Mm=Do(En=>{var Fo=Cm();function ts(n){return n.reduce(function(e,t,r,i){return e+t})}a(ts,"sum");function ar(n){if(Fo.isArray(n))return n;if(typeof n=="string")return n.split("");throw Error("Parameter must be a string or array.")}a(ar,"ensureArr");En.jarowinkler=function(n,e,G){n=ar(n),e=ar(e);var r,i;n.length>e.length?(r=n,i=e):(r=e,i=n);var o=G||.7,c=.1,u=Math.floor(Math.max(r.length/2-1,0)),d=[],f=[],p,g,y,b,E=0;for(p=0;p<i.length;p++)for(b=i[p],g=Math.max(p-u,0),y=Math.min(p+u+1,r.length);g<y;g++)if(!f[g]&&b===r[g]){d[p]=g,f[g]=!0,E++;break}var C=[],w=[],M,N,A=0,_=0;for(M=0,N=0;M<i.length;M++)d[M]>-1&&(C[N]=i[M],N++);for(M=0,N=0;M<r.length;M++)f[M]&&(w[N]=r[M],N++);for(p=0;p<C.length;p++)C[p]!==w[p]&&A++;for(p=0;p<i.length&&n[p]===e[p];p++)_++;var z=E,G=A/2;if(z){var ee=(z/n.length+z/e.length+(z-G)/z)/3,V=ee<o?ee:ee+Math.min(c,1/r.length)*_*(1-ee);return V}else return 0};En.levenshtein=function(n,e,t){if(n=ar(n),e=ar(e),n.length===0)return e.length;if(e.length===0)return n.length;var r=t||{d:1,i:1,s:1},i=[],o=[],c=e.length+1,u,d,f,p;for(u=0;u<c;u++)i[u]=u;for(u=0;u<n.length;u++){for(o[0]=u+1,d=0;d<e.length;d++)f=n[u]===e[d]?0:r.s,o[d+1]=Math.min(o[d]+r.d,i[d+1]+r.i,i[d]+f);for(d=0;d<c;d++)i[d]=o[d]}return p=Math.max(n.length,e.length),(p-o[e.length])/p};En.ngram=function(n,e,t){n=ar(n),e=ar(e);var r=n.length,i=e.length,o=t||2,c,u,d,f,p,g,y,b=[],E=[],C=[],w=[],M=[],N=r+1;if(r===0||i===0)return r===i?1:0;if(c=0,r<o||i<o){for(u=0,f=Math.min(r,i);u<f;u++)n[u]===e[u]&&c++;return c/Math.max(r,i)}for(u=0;u<r+o-1;u++)u<o-1?b[u]=0:b[u]=n[u-o+1];for(u=0;u<=r;u++)E[u]=u;for(d=1;d<=i;d++){if(d<o){for(p=0;p<o-d;p++)M[p]=0;for(p=o-d;p<o;p++)M[p]=e[p-(o-d)]}else M=e.slice(d-o,d);for(C[0]=d,u=1;u<=r;u++){for(c=0,g=o,f=0;f<o;f++)b[u-1+f]!==M[f]?c++:b[u-1+f]===0&&g--;y=c/g,C[u]=Math.min(Math.min(C[u-1]+1,E[u]+1),E[u-1]+y)}w=E,E=C,C=w}return 1-E[r]/Math.max(r,i)};En.pearson=function(n,e){var t=[];Object.keys(n).forEach(function(g){e[g]&&t.push(g)});var r=t.length;if(r===0)return 0;var i=ts(t.map(function(g){return n[g]})),o=ts(t.map(function(g){return e[g]})),c=ts(t.map(function(g){return Math.pow(n[g],2)})),u=ts(t.map(function(g){return Math.pow(e[g],2)})),d=ts(t.map(function(g){return n[g]*e[g]})),f=d-i*o/r,p=Math.sqrt((c-Math.pow(i,2)/r)*(u-Math.pow(o,2)/r));return p===0?0:f/p};En.jaccard=function(n,e){return n=ar(n),e=ar(e),Fo.intersection(n,e).length/Fo.union(n,e).length};En.tanimoto=function(n,e){n=ar(n),e=ar(e);var t=Fo.intersection(n,e).length;return t/(n.length+e.length-t)}});var Fm=Do((qo,Su)=>{(function(n,e){typeof qo=="object"&&typeof Su=="object"?Su.exports=e():typeof define=="function"&&define.amd?define([],e):typeof qo=="object"?qo.resq=e():(n.window=n.window||{},n.window.resq=e())})(window,function(){return function(n){var e={};function t(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return a(t,"r"),t.m=n,t.c=e,t.d=function(r,i,o){t.o(r,i)||Object.defineProperty(r,i,{enumerable:!0,get:o})},t.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,i){if(1&i&&(r=t(r)),8&i||4&i&&typeof r=="object"&&r&&r.__esModule)return r;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:r}),2&i&&typeof r!="string")for(var c in r)t.d(o,c,function(u){return r[u]}.bind(null,c));return o},t.n=function(r){var i=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(i,"a",i),i},t.o=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},t.p="",t(t.s=16)}([function(n,e,t){"use strict";t.d(e,"a",function(){return _}),t.d(e,"d",function(){return V}),t.d(e,"b",function(){return j}),t.d(e,"c",function(){return oe});var r=t(1),i=t.n(r),o=t(14),c=t.n(o),u=t(2),d=t.n(u),f=t(15),p=t.n(f);function g(W,q){var B=Object.keys(W);if(Object.getOwnPropertySymbols){var te=Object.getOwnPropertySymbols(W);q&&(te=te.filter(function(Q){return Object.getOwnPropertyDescriptor(W,Q).enumerable})),B.push.apply(B,te)}return B}a(g,"l");var y=Array.isArray,b=Object.keys;function E(W){return typeof W=="function"}a(E,"x");function C(W){return W instanceof HTMLElement||W instanceof Text}a(C,"y");function w(W){return d()(W)==="object"&&!y(W)}a(w,"h");function M(W){if(!W||typeof W=="string")return W;var q=function(B){for(var te=1;te<arguments.length;te++){var Q=arguments[te]!=null?arguments[te]:{};te%2?g(Object(Q),!0).forEach(function(Y){c()(B,Y,Q[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(Q)):g(Object(Q)).forEach(function(Y){Object.defineProperty(B,Y,Object.getOwnPropertyDescriptor(Q,Y))})}return B}({},W);return delete q.children,q}a(M,"b");function N(W,q){var B=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return!(!y(W)||!y(q))&&(B?W.length===q.length&&!W.find(function(te){return!q.includes(te)}):W.some(function(te){return q.includes(te)}))}a(N,"v");function A(){var W=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},B=arguments.length>2&&arguments[2]!==void 0&&arguments[2],te=[];if(!b(W).length)return!0;if(q===null||!b(q).length)return!1;if(B)return p()(W,q);var Q=b(W).filter(function(Y){return b(q).includes(Y)});return Q.forEach(function(Y){w(W[Y])&&w(q[Y])&&(te=te.concat(A(W[Y],q[Y]))),(W[Y]===q[Y]||N(W[Y],q[Y]))&&te.push(q)}),te.length>0&&te.filter(function(Y){return Y}).length===Q.length}a(A,"_");function _(W){var q,B={children:[]};if(!W)return B;B.name=E(q=W.type)?q.displayName||q.name:q,B.props=M(W.memoizedProps),B.state=function(Q){if(Q){var Y=Q.baseState;return Y||Q}}(W.memoizedState);var te=W.child;if(te)for(B.children.push(te);te.sibling;)B.children.push(te.sibling),te=te.sibling;return B.children=B.children.map(function(Q){return _(Q)}),E(W.type)&&function(Q){return Q.children.length>1}(B)?(B.node=function(Q){return Q.children.map(function(Y){return Y.node}).filter(function(Y){return!!Y})}(B),B.isFragment=!0):B.node=function(Q){return C(Q.stateNode)?Q.stateNode:Q.child&&C(Q.child.stateNode)?Q.child.stateNode:null}(W),B}a(_,"m");function z(W){for(;W.length;){var q=W.shift();if(q.node)return q.node;q.children&&Array.isArray(q.children)&&W.push.apply(W,i()(q.children))}}a(z,"g");function G(W,q){for(var B=[];W.length;){var te=W.shift().children;te&&Array.isArray(te)&&te.forEach(function(Q){q(Q)&&(!Q.node&&Array.isArray(Q.children)&&(Q.node=z(Q.children.concat([]))),B.push(Q)),W.push(Q)})}return B}a(G,"O");function ee(W,q){var B=function(te){if(te){var Q=te.split("(");return Q.length===1?te:Q.find(function(Y){return Y.includes(")")}).replace(/\)*/g,"")}}(q);return new RegExp("^"+W.split("*").map(function(te){return te.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}).join(".+")+"$").test(B)}a(ee,"w");function V(W,q){var B=arguments.length>3?arguments[3]:void 0;return W.reduce(function(te,Q){return te.concat(G(te,B&&typeof B=="function"?B:function(Y){return typeof Y.name=="string"?ee(Q,Y.name):Y.name!==null&&d()(Y.name)==="object"&&ee(Q,Y.name.displayName)}))},[q])}a(V,"j");function j(W,q,B){var te=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return E(B)?(console.warn("Functions are not supported as filter matchers"),[]):W.filter(function(Q){return w(B)&&A(B,Q[q],te)||y(B)&&N(B,Q[q],te)||Q[q]===B})}a(j,"M");function oe(W){if(W.hasOwnProperty("_reactRootContainer"))return W._reactRootContainer._internalRoot.current;var q=Object.keys(W).find(function(B){return B.startsWith("__reactInternalInstance")||B.startsWith("__reactFiber")||B.startsWith("__reactContainer")});return q?W[q]:void 0}a(oe,"P")},function(n,e,t){var r=t(17),i=t(18),o=t(19),c=t(20);n.exports=function(u){return r(u)||i(u)||o(u)||c()},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){function t(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?(n.exports=t=a(function(i){return typeof i},"r"),n.exports.default=n.exports,n.exports.__esModule=!0):(n.exports=t=a(function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},"r"),n.exports.default=n.exports,n.exports.__esModule=!0),t(r)}a(t,"r"),n.exports=t,n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){function t(r){return n.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},n.exports.default=n.exports,n.exports.__esModule=!0,t(r)}a(t,"r"),n.exports=t,n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){n.exports=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){function t(r,i){for(var o=0;o<i.length;o++){var c=i[o];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(r,c.key,c)}}a(t,"r"),n.exports=function(r,i,o){return i&&t(r.prototype,i),o&&t(r,o),r},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){function t(r,i){return n.exports=t=Object.setPrototypeOf||function(o,c){return o.__proto__=c,o},n.exports.default=n.exports,n.exports.__esModule=!0,t(r,i)}a(t,"r"),n.exports=t,n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e,t){var r=t(6);n.exports=function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&r(i,o)},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e,t){var r=t(3),i=t(6),o=t(22),c=t(23);function u(d){var f=typeof Map=="function"?new Map:void 0;return n.exports=u=a(function(p){if(p===null||!o(p))return p;if(typeof p!="function")throw new TypeError("Super expression must either be null or a function");if(f!==void 0){if(f.has(p))return f.get(p);f.set(p,g)}function g(){return c(p,arguments,r(this).constructor)}return a(g,"e"),g.prototype=Object.create(p.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),i(g,p)},"c"),n.exports.default=n.exports,n.exports.__esModule=!0,u(d)}a(u,"c"),n.exports=u,n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch{typeof window=="object"&&(t=window)}n.exports=t},function(n,e){n.exports=function(t,r){(r==null||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e,t){"use strict";(function(r){t.d(e,"a",function(){return o});var i=t(0);function o(){var c=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5e3,u=arguments.length>1?arguments[1]:void 0;if(r.isReactLoaded)return Promise.resolve("React already loaded");var d=a(function(){var f=document.createTreeWalker(document);if(u)return document.querySelector(u);for(;f.nextNode();)if(f.currentNode.hasOwnProperty("_reactRootContainer"))return f.currentNode},"o");return new Promise(function(f,p){var g=!1,y=null;a(function b(){var E=d();if(E&&(r.isReactLoaded=!0,r.rootReactElement=Object(i.c)(E),r.rootReactElement))return clearTimeout(y),f();g||setTimeout(b,200)},"e")(),y=setTimeout(function(){g=!0,p("Timed out")},c)})}a(o,"o")}).call(this,t(9))},function(n,e,t){"use strict";t.d(e,"a",function(){return z});var r=t(1),i=t.n(r),o=t(4),c=t.n(o),u=t(5),d=t.n(u),f=t(7),p=t.n(f),g=t(13),y=t.n(g),b=t(3),E=t.n(b),C=t(8),w=t.n(C),M=t(0);function N(G){var ee=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var V,j=E()(G);if(ee){var oe=E()(this).constructor;V=Reflect.construct(j,arguments,oe)}else V=j.apply(this,arguments);return y()(this,V)}}a(N,"v");var A=function(G){p()(V,G);var ee=N(V);function V(j){return c()(this,V),j||(j=[]),ee.call.apply(ee,[this].concat(i()(j)))}return a(V,"r"),d()(V,[{key:"byProps",value:a(function(j){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{exact:!1},W=oe.exact,q=Object(M.b)(this,"props",j,W);return new V(q)},"value")},{key:"byState",value:a(function(j){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{exact:!1},W=oe.exact,q=Object(M.b)(this,"state",j,W);return new V(q)},"value")}]),V}(w()(Array)),_=function(G){p()(V,G);var ee=N(V);function V(j,oe){var W;for(var q in c()(this,V),(W=ee.call(this,j))._nodes=oe,j)W[q]=j[q];return W}return a(V,"r"),d()(V,[{key:"byProps",value:a(function(j){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{exact:!1},W=oe.exact,q=Object(M.b)(this._nodes,"props",j,W)[0];return new V(q,this._nodes)},"value")},{key:"byState",value:a(function(j){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{exact:!1},W=oe.exact,q=Object(M.b)(this._nodes,"state",j,W)[0];return new V(q,this._nodes)},"value")}]),V}(w()(Object)),z=function(){function G(ee,V){c()(this,G),this.selectors=ee.split(" ").filter(function(j){return!!j}).map(function(j){return j.trim()}),this.rootComponent=V,this.tree=Object(M.a)(this.rootComponent)}return a(G,"t"),d()(G,[{key:"find",value:a(function(){return this.nodes=new A(Object(M.d)(this.selectors,this.tree,!0)),new _(this.nodes[0],this.nodes)},"value")},{key:"findAll",value:a(function(){return new A(Object(M.d)(this.selectors,this.tree))},"value")}]),G}()},function(n,e,t){var r=t(2).default,i=t(21);n.exports=function(o,c){return!c||r(c)!=="object"&&typeof c!="function"?i(o):c},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){n.exports=function(t,r,i){return r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e,t){"use strict";var r=Array.isArray,i=Object.keys,o=Object.prototype.hasOwnProperty;n.exports=a(function c(u,d){if(u===d)return!0;if(u&&d&&typeof u=="object"&&typeof d=="object"){var f,p,g,y=r(u),b=r(d);if(y&&b){if((p=u.length)!=d.length)return!1;for(f=p;f--!=0;)if(!c(u[f],d[f]))return!1;return!0}if(y!=b)return!1;var E=u instanceof Date,C=d instanceof Date;if(E!=C)return!1;if(E&&C)return u.getTime()==d.getTime();var w=u instanceof RegExp,M=d instanceof RegExp;if(w!=M)return!1;if(w&&M)return u.toString()==d.toString();var N=i(u);if((p=N.length)!==i(d).length)return!1;for(f=p;f--!=0;)if(!o.call(d,N[f]))return!1;for(f=p;f--!=0;)if(!c(u[g=N[f]],d[g]))return!1;return!0}return u!=u&&d!=d},"t")},function(n,e,t){"use strict";t.r(e),function(r){t.d(e,"resq$",function(){return d}),t.d(e,"resq$$",function(){return f});var i=t(12),o=t(11);t.d(e,"waitToLoadReact",function(){return o.a});var c=t(0);function u(p,g,y){if(!y&&!r.isReactLoaded)throw new Error("Could not find the root element of your application");var b=r.rootReactElement;if(y instanceof HTMLElement&&(b=Object(c.c)(y)),!b)throw new Error("Could not find instance of React in given element");return new i.a(p,b)[g]()}a(u,"i");function d(p,g){return u(p,"find",g)}a(d,"c");function f(p,g){return u(p,"findAll",g)}a(f,"f")}.call(this,t(9))},function(n,e,t){var r=t(10);n.exports=function(i){if(Array.isArray(i))return r(i)},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){n.exports=function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e,t){var r=t(10);n.exports=function(i,o){if(i){if(typeof i=="string")return r(i,o);var c=Object.prototype.toString.call(i).slice(8,-1);return c==="Object"&&i.constructor&&(c=i.constructor.name),c==="Map"||c==="Set"?Array.from(i):c==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c)?r(i,o):void 0}},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){n.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){n.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){n.exports=function(t){return Function.toString.call(t).indexOf("[native code]")!==-1},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e,t){var r=t(6),i=t(24);function o(c,u,d){return i()?(n.exports=o=Reflect.construct,n.exports.default=n.exports,n.exports.__esModule=!0):(n.exports=o=a(function(f,p,g){var y=[null];y.push.apply(y,p);var b=new(Function.bind.apply(f,y));return g&&r(b,g.prototype),b},"u"),n.exports.default=n.exports,n.exports.__esModule=!0),o.apply(null,arguments)}a(o,"u"),n.exports=o,n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){n.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},n.exports.default=n.exports,n.exports.__esModule=!0}])})});function gm(n){if(!n.src)return!0;let e=window.location.origin;try{let t=new URL(n.src).origin;return e!==t}catch{return!1}}a(gm,"isCrossOriginIframe");var de=a((n,e=document,{excludeCrossOriginIframes:t=!1,includeHTML:r=!1}={})=>{let i=[],o=a(u=>{u.querySelectorAll(n).forEach(d=>i.push(d))},"queryElement"),c=a(u=>{o(u);let d=[],f=a(p=>{p.shadowRoot&&d.push(p.shadowRoot),p.childNodes?.forEach(g=>f(g))},"findShadowRoots");f(u),d.forEach(p=>c(p)),u.querySelectorAll("iframe").forEach(p=>{if(!(t&&gm(p)))try{let g=p.contentDocument;g&&c(g)}catch{return}})},"queryNode");return c(e),r&&e instanceof Document&&e.documentElement.matches(n)&&i.push(e.documentElement),i},"querySelectorAllExtended"),bn=a((n,e)=>{if(n.matches(e))return n;let t=n.slot;if(t){let o=n.parentElement;for(;o;){if(o.shadowRoot){let c=o.shadowRoot.querySelector(`slot[name="${t}"]`);if(c)return bn(c,e)}o=o.parentElement}return null}let r=n.closest(e);if(r)return r;let i=n.getRootNode();return i.nodeType===Node.DOCUMENT_FRAGMENT_NODE?bn(i.host,e):null},"closestExtended"),zn=a((n,{flattenShadowRootChildren:e=!1}={})=>{if(!n)return[];let t=Array.from(n.childNodes);if(n.nodeType===Node.ELEMENT_NODE){let r=n;r.shadowRoot&&(t=t.filter(i=>!i.assignedSlot),e?t=t.concat(Array.from(r.shadowRoot.childNodes)):t.push(r.shadowRoot)),r.tagName.toLowerCase()==="slot"&&t.push(...r.assignedNodes())}return t},"childNodesExtended"),ym=a(n=>{let e=Array.from(n.children);return n.shadowRoot&&(e=e.filter(t=>!t.assignedSlot),e.push(...Array.from(n.shadowRoot.children))),n.tagName.toLowerCase()==="slot"&&e.push(...n.assignedElements()),e},"childrenExtended");var ir=a(n=>{let e=n.parentElement;if(e)return e;switch(n.nodeType){case Node.ELEMENT_NODE:let r=n;if(r.assignedSlot)return r.assignedSlot;break;case Node.DOCUMENT_FRAGMENT_NODE:return n.host}let t=n.parentNode;if(t)switch(t.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:return t.host;case Node.DOCUMENT_NODE:if(window.document===t)return null;let i=Array.from(window.document.querySelectorAll("iframe")).find(o=>o.contentDocument===t);if(i)return i}return null},"parentElementExtended");var Zi=a((n,{includeComments:e=!0,includeCDATA:t=!0,trim:r=!0,limitAttributeLength:i=!1}={})=>{if(!n)return"";function o(f){switch(f.nodeType){case Node.ELEMENT_NODE:return d(f);case Node.TEXT_NODE:return f.nodeValue;case Node.CDATA_SECTION_NODE:return t&&f.nodeValue.trim().length>0?`<![CDATA[${f.nodeValue}]]>`:"";case Node.COMMENT_NODE:return e&&f.nodeValue.trim().length>0?`<!--${f.nodeValue}-->`:"";default:return""}}a(o,"serializeNode");function c(f){return Array.from(f.childNodes).map(o).join("")}a(c,"serializeShadowRoot");function u(f){try{let p=f.contentDocument||f.contentWindow.document;return Zi(p.documentElement)}catch{return""}}a(u,"serializeIframe");function d(f){let p=f.tagName.toLowerCase(),g=`<${p}`;return Array.from(f.attributes).forEach(y=>{let b=y.value.slice(0,i?100:void 0);g+=` ${y.name}="${b}"`}),g+=">",f.shadowRoot?g+=c(f.shadowRoot):["script","style","svg"].includes(p)||Array.from(f.childNodes).forEach(y=>{y instanceof Element&&y.tagName.toLowerCase()==="iframe"?g+=u(y):g+=o(y)}),g+=`</${p}>`,g}return a(d,"serializeElementNode"),n.tagName.toLowerCase()==="iframe"?u(n):o(n)},"serializeElement");var Tt=class n{constructor({target:e=document,disabled:t=!1,log:r=!0,name:i,monitorInput:o=!1}){this.ignoreMutationsWithAttributes=["checksum-data-visible","checksum-data-transparently-visible","checksum-data-visible-under-transparent-element","checksum-data-click-offset","checksum-target-node","checksumid","data-scrollable-x","data-scrollable-y","data-scrollable-x-progress","data-scrollable-y-progress","rrwebid"];this.ignoreMutationsWithAttributeRegexPatterns=["checksum-radial-traverse-.+"];this.ignoreElementsWithClasses=["checksum-dom-cache-ignore"];this.inputEnabledSelectors=["input","textarea","select","[contenteditable=true]"].join(",");this.shouldIgnoreMutationRecord=a(e=>{try{if(e.type==="attributes"&&this.ignoreMutationsWithAttributes.includes(e.attributeName)||e.type==="attributes"&&this.ignoreMutationsWithAttributeRegexPatterns.some(r=>new RegExp("^"+r+"$").test(e.attributeName)))return!0;if(e.type==="attributes"&&e.attributeName==="class"){let r=a(i=>i?i.split(" ").filter(o=>![":hover","rrweb-paused"].includes(o)).sort().join(" "):"","standardizeClassName");return r(e.oldValue)===r(e.target.className)}let t=a(r=>this.ignoreElementsWithClasses.some(i=>r.classList.contains(i)),"doesElementHaveIgnoredClass");if(e.type==="childList"&&Array.from(e.addedNodes).every(r=>t(r))&&Array.from(e.removedNodes).every(r=>t(r)))return!0}catch{}return!1},"shouldIgnoreMutationRecord");this.monitoredTextElements=[];this.monitorInputEnabledElement=a(e=>{e.addEventListener("input",t=>{this.invalidate()})},"monitorInputEnabledElement");this.target=e,this.name=i,this.disabled=t,this.logActivity=r,this.monitorInput=o,this.startObserver()}static{a(this,"DOMMutationDependentCache")}static{this.instances={}}static getInstance(e,t){let r=this.makeNameForCache(e,t?.flags);n.instances[r]||(n.instances[r]=new n({...t,name:t?.name??e}),t?.initialValue&&n.instances[r].set(t?.initialValue));let i=n.instances[r];return t?.invalidate&&i.invalidate(),i}static invalidateAll(){Object.values(n.instances).forEach(e=>e.invalidate())}static makeNameForCache(e,t){return`${e}${t?JSON.stringify(t):""}`}startObserver(){this.observer=new MutationObserver(e=>{e.every(this.shouldIgnoreMutationRecord)||(this.invalidate(),this.monitorInput&&e.forEach(t=>{t.addedNodes.forEach(r=>{if(r.nodeType===Node.ELEMENT_NODE&&r.nodeType===Node.ELEMENT_NODE){let i=r;i.matches(this.inputEnabledSelectors)||i.isContentEditable?this.monitorInputEnabledElement(i):Array.from(i.querySelectorAll("*")).filter(o=>o.matches&&o.matches(this.inputEnabledSelectors)||o.isContentEditable).forEach(this.monitorInputEnabledElement)}})}))}),this.observer.observe(this.target,{childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0}),this.monitorInput&&this.startInputMonitoring()}startInputMonitoring(){this.monitoredTextElements=de(this.inputEnabledSelectors),this.monitoredTextElements.forEach(this.monitorInputEnabledElement)}get(){return this.log("get","has cache:",!!this.cache),this.cache}set(e){this.disabled||(this.cache=e)}hasCache(){return this.log("hasCache",!!this.cache),!!this.cache}invalidate(){this.set(void 0)}log(...e){this.logActivity&&console.log(`[DOMMutationDependentCache] ${this.name?`[${this.name}]`:""}:`,...e)}};function ze(n,e,t=!0){try{if(!n.ownerDocument)return!1;let r=n.ownerDocument.defaultView;return r?n instanceof r[e]||n instanceof r.top?.[e]||t&&q0(n,e.toString()):!1}catch{}return!1}a(ze,"isNodeInstanceOf");function q0(n,e){if(typeof n!="object"||n===null)return!1;let t=Object.getPrototypeOf(n);for(;t!==null;){if(t.constructor&&t.constructor.name===e)return!0;t=Object.getPrototypeOf(t)}return!1}a(q0,"isNodeInstanceOfAlt");function qn(n,e){return e??n?.ownerDocument?.defaultView??window}a(qn,"getElementWindow");async function fu(n,e,t){if(!e.length)return[];let r=n.ownerDocument;if(r===document)return[];let i=e.find(c=>c.contentDocument===r);if(!i)return[];let o=await t(i);return[...await fu(i,e,t),o]}a(fu,"getParentFramesSelectors");function vm({rootDocument:n=document,ignoredIframesSelectors:e=[],flags:t={}}={}){let r=a(u=>u.filter(d=>!e.some(f=>d.matches(f))),"makeReturnValue"),i=Tt.getInstance("playwrightElementSelectorGeneratorIframes",{log:!1,flags:t});if(i.hasCache())return r(i.get());let o=n.defaultView,c=de("iframe",o?.document);return i.set(c),r(c)}a(vm,"getIframes");var wm=Xi(ko());var Qi=["button","select","input","textarea","option","a","[role=button]","[role=checkbox]","[role=radio]","[role=link]","[type=button]","[aria-disabled=false]",'[id^="react-select"]',"label[for]","canvas"],Em=["pointer","grab","text","vertical-text","zoom-in","zoom-out","help"],Sm=["onClick","onMouseDown","onKeyDown","onKeyPress","onInput","onSelect","onDoubleClick","onDragStart","onDrag","onDragEnd","onDragOver","onDrop","onToggle","onMouseEnter"],pu=["onclick","onmousedown","onkeydown","onkeypress","oninput","onselect","ondblclick","ondragstart","ondrag","ondragend","ondragover","ondrop","ontoggle","onmouseenter"],sr=[":hover",":focus",":active","\\:hover","\\:focus","\\:active"];var ut=class{static{a(this,"PlaywrightElementSelectorGenerator")}async injectSelectorsAndLocators(e,{testIdSelector:t,searchParentFrames:r=!0}={}){let i=e.map(o=>({container:o,removedAttributes:this.stripNodeAttributes(o.element)}));return i=await Promise.all(i.map(async o=>{let{selector:c,locator:u,parentFramesSelectors:d}=await this.getSelectorAndLocator(o.container.element,{testIdSelector:t,searchParentFrames:r,stripAttributes:!0});return{...o,selector:c,locator:u,parentFramesSelectors:d}})),i=await Promise.all(i.map(async o=>{if(!o.removedAttributes.id&&!o.removedAttributes.originalClasses||(this.restoreNodeAttributes(o.container.element,o.removedAttributes),window.playwright.$(o.selector)!==void 0))return o;let c=await this.getSelectorAndLocator(o.container.element,{testIdSelector:t,searchParentFrames:r,stripAttributes:!1});return console.log(`Selector ${o.selector} is not valid, generated new one: ${c.selector}`),Object.assign(o,c),o})),i.map(o=>{let{container:c,selector:u,locator:d,parentFramesSelectors:f}=o;return{...c,selector:u,locator:d,parentFramesSelectors:f}})}stripNodeAttributes(e){let t=e,r,i;t.id&&(r=t.id,t.removeAttribute("id"));try{if(i=t.getAttribute("class"),i&&typeof i=="string"){let o=i.split(" ").filter(c=>!c.startsWith("css-")&&!c.startsWith("jss-")&&!sr.includes(c)).join(" ");t.setAttribute("class",o)}else i=void 0}catch(o){return console.warn("[playwright selector generator] error with class filtering",o),{}}return{id:r,originalClasses:i}}restoreNodeAttributes(e,t){let r=e,{id:i,originalClasses:o}=t;i&&r.setAttribute("id",i),o&&r.setAttribute("class",o)}getElementWindowPlaywright(e){let t=e.ownerDocument.defaultView;return t?(t!==window&&!t.playwright&&(t.playwright=window.playwright),t.playwright):window.playwright}async safeGetSelectorAndLocator(e,{retriesLeft:t=3}={}){try{try{return window.playwright.generateSelectorAndLocator(e)}catch{return this.getElementWindowPlaywright(e).generateSelectorAndLocator(e)}}catch{return t>0?(await(0,wm.default)(500),this.safeGetSelectorAndLocator(e,{retriesLeft:t-1})):{selector:"",locator:""}}}async getSelectorAndLocator(e,{testIdSelector:t,searchParentFrames:r=!0,stripAttributes:i=!0,ignoredIframesSelectors:o=[],rootDocument:c=document,flags:u={}}={}){try{if(!e)return null;let d=r?await fu(e,vm({rootDocument:c,ignoredIframesSelectors:o,flags:u}),async E=>(await this.getSelectorAndLocator(E,{searchParentFrames:!1})).selector):[],f=e,p=this.getTestAttributeSelector(f,t);if(p)return{selector:p,locator:`locator("${p}")`,parentFramesSelectors:d};let g;i&&(g=this.stripNodeAttributes(e));let{selector:y,locator:b}=await this.safeGetSelectorAndLocator(f);return g&&(this.restoreNodeAttributes(e,g),await this.getElementWindowPlaywright(e).$(y)!==e&&({selector:y,locator:b}=await this.safeGetSelectorAndLocator(f))),{selector:y,locator:b,parentFramesSelectors:d}}catch(d){return console.log("get selector and locator error",e,d),{selector:"",locator:""}}}async findIframeWindowByParentFrameSelectors(e=[]){let t=window.top;try{if(e&&e.length>0)for(let r of e){let i=await t.playwright.$(r);i||(i=await window.playwright.$(r)),i||(i=de(r)[0]),i?t=i.contentWindow:console.warn("Failed to find iframe window by parent frame selectors",r)}}catch(r){console.log("find iframe window by parent frame selectors error",r,e)}return t}async selector(e,t){let r;try{r=await(await this.findIframeWindowByParentFrameSelectors(t)).playwright.$(e)}catch(i){console.log("selector error",e,i)}return r??this.selectFromFirstIframe(e)}getFirstIframeContentWindow(){let e=document.querySelector("iframe");if(!e)return;let t=e.contentWindow;return t.playwright||(t.playwright=window.playwright),t}async selectFromFirstIframe(e){let t=this.getFirstIframeContentWindow();if(t)try{return await t.playwright.$(e)}catch{console.log("selector error",e)}}getTestAttributeSelector(e,t){let r=["data-cy","data-testid","data-test-id","data-test"];for(let o of[t,...r])if(o&&e.getAttribute(o)){let c=`[${o}='${e.getAttribute(o)}']`;if(de(c).length===1)return c;if(de(c).length>1){let d=Array.from(de(c)).indexOf(e);return`${c} >> nth=${d}`}}}escapeBackslash(e){return e.replace(/\\/g,"\\\\")}};var Po=class{constructor(e){this.attributes={};this.classes={};if(typeof e=="object")for(let t in e)this[t]=e[t];else if(typeof e=="string"){let t=JSON.parse(e);for(let r in t)this[r]=t[r]}}static{a(this,"ESRAElementMetadata")}serialize(){return JSON.stringify(this)}};var Ji=(i=>(i[i.Query=0]="Query",i[i.Intersection=1]="Intersection",i[i.Interactables=2]="Interactables",i[i.All=3]="All",i))(Ji||{});var xm=a((n,{tag:e="*"}={})=>de(e).filter(t=>t.innerText?.trim()===n.trim()),"findElementsWithText");function or(n){let e=n.getRootNode();switch(e.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:return j0(n,e);default:return n.innerText}}a(or,"getInnerText");function j0(n,e){let t=n.querySelectorAll("slot");if(!t.length)return n.innerText;let r=n.cloneNode(!0),i=r.querySelectorAll("slot");return t.forEach((o,c)=>{let u=o.assignedNodes();i[c].innerText=u.map(d=>{switch(d.nodeType){case Node.TEXT_NODE:return d.textContent;case Node.ELEMENT_NODE:return d.innerText}}).filter(d=>!!d).join(`
`)}),r.innerText.trim()}a(j0,"extractInnerTextForElementInShadowDOM");var Tm=Xi(Mm());var mu=class{constructor(){this.weightsSum=0;this.config={attributes:{qualification:{globalUniquenessThreshold:.99,tagUniquenessThreshold:.99},decisionWeight:this.makeWeight(2/5)},classes:{qualification:{globalUniquenessThreshold:.99,tagUniquenessThreshold:.99},decisionWeight:this.makeWeight(2/5)},tagName:{decisionWeight:this.makeWeight(3/5)},style:{inlineWeight:.6,computedWeight:.4,decisionWeight:this.makeWeight(2/5)},innerText:{decisionWeight:this.makeWeight(3/5),qualification:{exactMatchMax:20,containsMatchMax:10,maxLength:256,minLength:1},ignoreSimilarityScoreBelow:.6},innerFeatures:{decisionWeight:this.makeWeight(4/5)},visualVicinity:{decisionWeight:this.makeWeight(1/5)},structuralVicinity:{decisionWeight:this.makeWeight(1/5)}}}static{a(this,"ESRASimilarityConfigClass")}makeWeight(e){return this.weightsSum+=e,e}get(){return this.config}weight(e){return e/this.weightsSum}},$e=new mu;var Ho=class{constructor(e){this.qualifiedAttributes=[];this.qualifiedAttributesMap={};this.qualifiedClasses=[];this.unqualifiedClasses=[];this.qualifiedInnerText=void 0;this.visualVicinityComparable=[];this.structuralVicinityComparable=[];this.innerFeaturesComparable=[];this.rank=a(e=>{if(this.isDealBreaker(e))return{score:0,scores:{}};let t=this.tagSimilarity(e),r=this.attributesSimilarity(e),i=this.classSimilarity(e),o=this.styleSimilarity(e),c=this.innerTextSimilarity(e),u=this.innerFeaturesSimilarity(e),d=this.visualVicinitySimilarity(e),f=this.structuralVicinitySimilarity(e),p=this.svgsSimilarity(e),g={tagScore:t,attributesScore:r,classesScore:i,styleScore:o,innerTextScore:c,innerFeaturesScore:u,visualVicinityScore:d,structuralVicinityScore:f,svgsScore:p},y={tagScore:$e.weight($e.get().tagName.decisionWeight)*t,attributesScore:$e.weight($e.get().attributes.decisionWeight)*r,classesScore:$e.weight($e.get().classes.decisionWeight)*i,innerTextScore:$e.weight($e.get().innerText.decisionWeight)*c,innerFeaturesScore:$e.weight($e.get().innerFeatures.decisionWeight)*u,styleScore:$e.weight($e.get().style.decisionWeight)*o,visualVicinityScore:$e.weight($e.get().visualVicinity.decisionWeight)*d,structuralVicinityScore:$e.weight($e.get().structuralVicinity.decisionWeight)*f};return{score:Object.values(y).reduce((E,C)=>E+C,0),scores:g}},"rank");this.targetElementESRAMetadata=e,this.setQualifiedAttributes(),this.setQualifiedClasses(),this.setQualifiedInnerText(),this.setVisualVicinityComparable(),this.setStructuralVicinityComparable(),this.setInnerFeaturesComparable()}static{a(this,"ESRASimilarity")}getQualifiedAttributes(){return this.qualifiedAttributes}getQualifiedClasses(){return this.qualifiedClasses}getQualifiedInnerText(){return this.qualifiedInnerText}setQualifiedAttributes(){let e=this.targetElementESRAMetadata.attributes,{qualifiedAttributes:t,qualifiedAttributesMap:r}=this.makeQualifiedAttributes(e);this.qualifiedAttributes=t,this.qualifiedAttributesMap=r}makeQualifiedAttributes(e,t){let r=Object.keys(e).filter(o=>{switch(t){case"input":if(o==="value")return!1;break}let c=e[o];for(let u in c)u.endsWith("Uniqenuess")&&(c[u.replace("Uniqenuess","Uniqueness")]=c[u]);return c.globalUniqueness>$e.get().attributes.qualification.globalUniquenessThreshold||c.tagUniqueness>$e.get().attributes.qualification.tagUniquenessThreshold}),i=r.reduce((o,c)=>(o[c]=e[c].value,o),{});return{qualifiedAttributes:r,qualifiedAttributesMap:i}}setQualifiedClasses(){this.qualifiedClasses=this.makeQualifiedClasses(this.targetElementESRAMetadata.classes),this.unqualifiedClasses=Object.keys(this.targetElementESRAMetadata.classes).filter(e=>!this.qualifiedClasses.includes(e))}isValidClass(e){return/^[A-Za-z_-][0-9A-Za-z_-]*$/.test(e)}makeQualifiedClasses(e){return Object.keys(e).filter(t=>{let r=e[t];return!this.isValidClass(t)||t.startsWith("jss")||t.startsWith("css-")||t===":hover"?!1:r.globalUniqueness>$e.get().classes.qualification.globalUniquenessThreshold||r.tagUniqueness>$e.get().classes.qualification.tagUniquenessThreshold})}setQualifiedInnerText(){this.qualifiedInnerText=this.makeQualifiedInnerText(this.targetElementESRAMetadata.innerText)}makeQualifiedInnerText(e){return e&&e.content?.length<=$e.get().innerText.qualification.maxLength&&e.content?.length>=$e.get().innerText.qualification.minLength?e:null}makeBasicElementPropertiesComparable(e){return e.reduce((t,r)=>{let i=r.position?`${r.tag}.${r.position.slice(0,2).join(",")}`:r.tag,o=`${i}+${r.relativePosition}`,c=this.makeQualifiedClasses(r.classes).map(p=>`${i}.${p}`),u=[];this.makeQualifiedAttributes(r.attributes).qualifiedAttributes.forEach(p=>{u.push(`${i}[${p}]`),u.push(`${i}[${p}]=${r.attributes[p].value}`)});let d=r.feature?this.makeInnerFeaturesComparable([r.feature],{customTag:i,includeTag:!1,featureTypeWhiteList:[6]}):[],f=[...t,i,o,...c,...u,...d];return r.text&&(f.push(`${i}<>`),f.push(`${i}<${r.text}>`)),r.distance&&(f.push(`${i}->${r.distance}`),f.push(`${i}->[]${this.getDistanceRange(r.distance)}`)),f},[])}getDistanceRange(e){let t=[10,20,30,40,50,60,70,80,90,100];for(let r of t)if(e<r)return r;return t[t.length-1]}setVisualVicinityComparable(){this.visualVicinityComparable=this.makeVisualVicinityComparable(this.targetElementESRAMetadata.visualVicinity)}makeVisualVicinityComparable(e){return this.makeBasicElementPropertiesComparable(e)}setStructuralVicinityComparable(){this.structuralVicinityComparable=this.makeStructuralVicinityComparable(this.targetElementESRAMetadata.structuralVicinity)}makeStructuralVicinityComparable(e){return this.makeBasicElementPropertiesComparable(e)}makeInnerFeaturesComparable(e,{customTag:t=void 0,includeTag:r=!0,featureTypeWhiteList:i=void 0}={}){return e.reduce((o,c)=>{if(i&&!i.includes(c.type)||c.isHidden)return o;let u=t??c.tag,d=r?[...o,u]:o;switch(c.type){case 3:d.push(`${u}[type=${c.buttonType}]`);break;case 4:c.inputType&&d.push(`${u}[type=${c.inputType}]`),c.placeholder&&d.push(`${u}[placeholder=${c.placeholder}]`);break;case 6:c.components.forEach(f=>{let p=[];for(let g in f.attributes)p.push(`[${g}=${f.attributes[g]}]`);d.push(`${u}${p.join("")}`)});break}return"text"in c&&c.text&&(d.push(`${u}<>`),d.push(`${u}<${c.text}>`)),d},[])}setInnerFeaturesComparable(){this.innerFeaturesComparable=this.makeInnerFeaturesComparable(this.targetElementESRAMetadata.innerFeatures)}isDealBreaker(e){if(this.targetElementESRAMetadata.tag==="input"&&e.tag==="input"){let t=a(o=>o.type?o.type.value:"text","getType"),r=t(this.targetElementESRAMetadata.attributes),i=t(e.attributes);if(r!==i)return!0}return!1}tagSimilarity(e){return e.tag===this.targetElementESRAMetadata.tag?1:0}attributesSimilarity(e){let t=a(i=>[...this.keyValueObjectToArray(i),...Object.keys(i)],"makeJaccardParam"),{qualifiedAttributesMap:r}=this.makeQualifiedAttributes(e.attributes);return this.jaccard(t(this.qualifiedAttributesMap),t(r))}indicativeAttributesSimilarity(e){return this.qualifiedAttributesMap.placehoder&&e.attributes.placehoder&&this.qualifiedAttributesMap.placehoder===e.attributes.placehoder.value?1:0}classSimilarity(e){return this.jaccard(this.qualifiedClasses,this.makeQualifiedClasses(e.classes))}innerTextSimilarity(e){if(!this.targetElementESRAMetadata.innerText&&!e.innerText)return 1;let t=this.makeQualifiedInnerText(e.innerText);if(!this.qualifiedInnerText||!t)return 0;if(this.qualifiedInnerText.content===t.content)return 1;Object.values({email:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,url:/^(http|https):\/\/[^ "]+$/}).forEach(o=>{if(o.test(this.qualifiedInnerText.content)&&o.test(t.content))return .5});try{return new Date(this.qualifiedInnerText.content),new Date(t.content),.5}catch{}let i=a(o=>o.replace(/\d/g,"d").replace(/[a-zA-Z]/g,"s"),"template");return i(this.qualifiedInnerText.content)===i(t.content)?.5:0}innerFeaturesSimilarity(e){return this.jaccard(this.innerFeaturesComparable,this.makeInnerFeaturesComparable(e.innerFeatures))}visualVicinitySimilarity(e){return this.jaccard(this.visualVicinityComparable,this.makeVisualVicinityComparable(e.visualVicinity))}structuralVicinitySimilarity(e){return this.jaccard(this.structuralVicinityComparable,this.makeStructuralVicinityComparable(e.structuralVicinity))}styleSimilarity(e){let t=a(o=>[...this.keyValueObjectToArray(o),...Object.keys(o)],"makeJaccardParam"),r=this.jaccard(t(this.targetElementESRAMetadata.style.inline??{}),t(e.style.inline??{})),i=this.jaccard(t(this.targetElementESRAMetadata.style.computed??{}),t(e.style.computed??{}));return r*$e.get().style.inlineWeight+i*$e.get().style.computedWeight}svgsSimilarity(e){return!this.targetElementESRAMetadata.svgs&&!e.svgs||this.targetElementESRAMetadata.svgs&&e.svgs&&JSON.stringify(this.targetElementESRAMetadata.svgs)===JSON.stringify(e.svgs)?1:0}keyValueObjectToArray(e,t="=",r=void 0){let i=a(o=>r?r(e,o):e[o],"getValue");return Object.keys(e).map(o=>`${o}${t}${i(o)}`)}jaccard(e,t){return Array.isArray(e)&&Array.isArray(t)&&!e.length&&!t.length?1:(0,Tm.jaccard)(e,t)}};var Im={examinedAttributes:["class","src","placeholder","href","checked","disabled","contenteditable","draggable","hidden","inputmode","role","title","name","type","readonly","size","required","multiple","min","max","step","maxlength","alt","loop","controls","poster"]};var Kn={attributesToExtract:Im.examinedAttributes,structuralVicinity:{type:"fixed",value:6,useDecayingLimit:!0},visualVicinity:{radius:50,scanStep:10},vicinityFeatureElementsOnly:!0,react:{}};var $o={rect:["width","height"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],line:["x1","y1","x2","y2"],polygon:["points"],polyline:["points"],path:["d"],text:["x","y"]},Yn=class{constructor(e){this.document=e;this.limit=5;this.extractSVG=a(e=>Array.from(e.children).map(t=>{let r=$o[t.tagName.toLowerCase()];if(!r)return null;let i=r.reduce((c,u)=>{let d=t.getAttribute(u);return{...c,[u]:d}},{});return{tagName:t.tagName.toLowerCase(),attributes:i}}).filter(t=>!!t),"extractSVG")}static{a(this,"SVGsExtractor")}extract(e){let t=e.matches("svg")?[e]:e.querySelectorAll("svg");if(!(!t.length||t.length>this.limit))return Array.from(t).map(this.extractSVG)}};function rs(n){if(!n)return!1;let e=n.getBoundingClientRect();return e.top<=window.innerHeight&&e.left<=window.innerWidth&&e.bottom>=0&&e.right>=0}a(rs,"isElementInViewport");function Wo(n,e=!0){let t=window.getComputedStyle(n),r=t.opacity==="0";return{visible:t.visibility!=="hidden"&&t.display!=="none"&&(!e||!r),isTransparent:r}}a(Wo,"isElementVisibleByStyles");function Am(n,e,t=!0,r=!0){let i=n.getBoundingClientRect(),o=e.getBoundingClientRect(),c=i.left<o.right&&i.right>o.left,u=i.top<o.bottom&&i.bottom>o.top;return(!t||c)&&(!r||u)}a(Am,"elementsOverlap");function Rm(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView;if(!t)return null;let r=n.ownerDocument,i={top:0,left:0,right:t.innerWidth||r.documentElement.clientWidth,bottom:t.innerHeight||r.documentElement.clientHeight},o={top:Math.max(e.top,i.top),left:Math.max(e.left,i.left),right:Math.min(e.right,i.right),bottom:Math.min(e.bottom,i.bottom),height:0,width:0};return o.width=o.right-o.left,o.height=o.bottom-o.top,o.width>0&&o.height>0?o:null}a(Rm,"getOverlappingRectangleWithViewport");function yu(n){try{return getComputedStyle(n).position==="fixed"?!0:!n.parentElement||n.parentElement===document.body?!1:yu(n.parentElement)}catch(e){return console.error("isAncestorOrSelfFixed",e),!1}}a(yu,"isAncestorOrSelfFixed");function vu(n){let{top:e}=n.getBoundingClientRect();return e<0?-e:0}a(vu,"getHeightOfCroppedElementAboveViewport");function bu(n){let{bottom:e}=n.getBoundingClientRect(),t=window.innerHeight;return e>t?e-t:0}a(bu,"getHeightsOfCroppedElementBelowViewport");var dt=class{static{a(this,"ScrollHelper")}constructor(e){this.element=e,this.elRect=this.element.getBoundingClientRect()}scrollIntoView({dontScrollIfAlreadyInView:e=!0}={}){if(e&&rs(this.element))return this;if(this.getScrollableParentsPositions(),!this.initialScrollPositions.length)return this;if(this.element.scrollIntoView({block:"center",inline:"center"}),!rs(this.element))for(let t of this.initialScrollPositions){let r=t.element.getBoundingClientRect();if(this.elRect.top<r.top||this.elRect.bottom>r.bottom){let i=this.elRect.top-r.top+t.element.scrollTop;t.element.scrollTop=i}}return this}restore(){this.initialScrollPositions&&this.initialScrollPositions.forEach(({element:e,top:t,left:r})=>{try{e.scroll(r,t)}catch(i){console.warn("[ScrollHelper/restore] couldn't restore initial scroll for",{element:e,top:t,left:r},i)}})}static getScrollData(e){let t=a(u=>{let d=u==="top"?"scrollTop":"scrollLeft",f=e[d];try{if(e[d]=f+1,e[d]!==f||(e[d]=f-1,e[d]!==f))return!0}finally{e[d]=f}return!1},"tryScroll"),i=e.scrollHeight>e.clientHeight&&t("top"),c=e.scrollWidth>e.clientWidth&&t("left");return{canScrollY:i,canScrollX:c,progressY:i?e.scrollTop/(e.scrollHeight-e.clientHeight):void 0,progressX:c?e.scrollLeft/(e.scrollWidth-e.clientWidth):void 0}}static scrollScrollableElement(e,t,r){let i=t==="y",o=i?e.scrollHeight:e.scrollWidth,c=i?e.clientHeight:e.clientWidth,u=i?e.scrollTop:e.scrollLeft,d;switch(r){case"forward":d=u+c;break;case"backwards":d=Math.max(0,u-c);break;case"end":d=o-c;break;case"start":d=0;break;default:if(typeof r=="number"){let f=Math.max(0,Math.min(r,100));d=(o-c)*f/100}else return console.log(`Invalid length parameter: expected "next", "end", "start", or a number, but received ${r}`),{result:!1,error:`Invalid parameter: expected "next", "end", "start", or a number, but received ${r}`};break}if(d=Math.max(0,Math.min(d,o-c)),console.log("ScrollHelper/scrollScrollableElement: new, left, top",d,e.scrollLeft,e.scrollTop),i){if(e.scrollTop===d)return{result:!1,error:"The element is already scrolled to the desired position"};e.scrollTop=d}else{if(e.scrollLeft===d)return{result:!1,error:"The element is already scrolled to the desired position"};e.scrollLeft=d}return{result:!0}}getScrollableParentsPositions(){this.initialScrollPositions=[];let e=ir(this.element);for(;e!=null;)(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)&&this.initialScrollPositions.push({element:e,top:e.scrollTop,left:e.scrollLeft}),e=ir(e)}};function mt(n,e={}){let{markTransparentElementsAsHidden:t=!0,markElementsHiddenByTransparentElementAsVisible:r=!1,scrollIntoView:i=!0,useCache:o=!1}=e;if(o){let y=K0(n,{markTransparentElementsAsHidden:t,markElementsHiddenByTransparentElementAsVisible:r,scrollIntoView:i});if(y)return y}let c,u={isHidden:!0},d=a((y,b=!0)=>(b&&c&&c.restore(),o&&Y0(n,y,{markTransparentElementsAsHidden:t,markElementsHiddenByTransparentElementAsVisible:r}),{...u,...y}),"prepareResult");if(!n)return d({isHidden:!0});n=n.tagName==="OPTION"&&(n.closest("select")||n.closest("datalist"))||n;let{visible:f,isTransparent:p}=Wo(n,t);if(u.isTransparent=p,!f)return d({isHidden:!0});if(X0(n,{scrollIntoView:i}))return d({isHidden:!0});try{let E=function(A){let _=A;for(;_;){if(_.nodeType===11)return[_,_.ownerDocument.defaultView];_=_.parentNode}};var g=E;a(E,"findShadowDocument"),i&&(c=new dt(n).scrollIntoView());let y=Rm(n);if(!y)return d({isHidden:!0});let b=[[y.width/2,y.height/2,!0],[Math.max(y.width*.01,1),Math.max(y.height*.01,1)],[Math.min(y.width*.99,y.width-1),Math.max(y.height*.01,1)],[Math.max(y.width*.01,1),Math.min(y.height*.99,y.height-1)],[Math.min(y.width*.99,y.width-1),Math.min(y.height*.99,y.height-1)]],[C,w]=E(n)??[n.ownerDocument,n.ownerDocument.defaultView],M,N=qn(n);if(N&&n instanceof N.HTMLInputElement&&n.id&&n.type&&["checkbox","radio"].includes(n.type)){let A=de(`label[for="${n.id}"]`,C);A.length&&(M=A[0])}for(let[A,_,z]of b){let G=y.left+A>=0&&y.left+A<=w.innerWidth?y.left+A:A,ee=y.top+_>=0&&y.top+_<=w.innerHeight?y.top+_:_,V=C.elementFromPoint(G,ee);if(V===n)return d({isHidden:!1,clickOffset:z?void 0:{x:A,y:_}});if(!V)continue;if(z===!0&&V.shadowRoot)return d(mt(V,e));let j=V;for(;j;){if(j===n||M&&M===j)return d({isHidden:!1,clickOffset:z?void 0:{x:A,y:_}});j=ir(j)}if(r)try{let oe=C.elementsFromPoint(G,ee);for(let W of oe){if(W===n)return d({isHidden:!1,clickOffset:z?void 0:{x:A,y:_},isBehindTransparentElement:!0});let q=w.getComputedStyle(W),B=W.getBoundingClientRect(),te=n.getBoundingClientRect(),Q=Lm(te,B);if(!(Lm(B,te)&&!Q0(B,te)&&!Nm(q))&&(Nm(q)||Z0(B,y)))break}}catch(oe){console.error("Error while checking transparent elements over interactable",oe)}}return c&&(c.restore(),c=void 0),M?mt(M,e):d({isHidden:!0})}catch(y){throw y}}a(mt,"isElementHidden");var _m=a(n=>{let e=Tt.getInstance("isElementHidden",{log:!1,flags:n}),t=e.get();return t||(t=new Map,e.set(t)),t},"getIsHiddenMapFromCache");function K0(n,e={}){let t=_m(e);return t.has(n)?t.get(n):void 0}a(K0,"getIsElementHiddenFromCache");var Y0=a((n,e,t={})=>{_m(t).set(n,e)},"setIsElemenetHiddenInCache");function X0(n,{scrollIntoView:e=!0}={}){let t=n.parentElement,r=window.getComputedStyle(n);if(r.position==="absolute"||r.position==="fixed")return!1;let i;e&&(i=new dt(n).scrollIntoView());let o=a(u=>(i&&i.restore(),u),"restoreAndReturn"),c=qn(n);if(!c)return o(!1);for(;t;){if(!(t instanceof c.Element))return o(!1);let u=window.getComputedStyle(t);if(u.position==="absolute"||u.position==="fixed")return o(!1);let d=u.overflowX==="hidden",f=u.overflowY==="hidden";if((d||f)&&!Am(t,n,d,f))return o(!0);t=t.parentElement}return o(!1)}a(X0,"isHiddenByOverflow");function Lm(n,e){try{let t=Math.max(0,Math.min(n.right,e.right)-Math.max(n.left,e.left)),r=Math.max(0,Math.min(n.bottom,e.bottom)-Math.max(n.top,e.top)),i=t*r,o=n.width*n.height,c=e.width*e.height,u=Math.min(o,c)*.5;return i>u}catch(t){return console.error("Error while checking large overlap",t),!1}}a(Lm,"isSignificantOverlap");function Nm(n){return!(n.opacity==="0"||n.visibility==="hidden"||/rgba\(\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*0\s*\)/.test(n.backgroundColor))}a(Nm,"isNotTransparent");function Z0(n,e,t=.2){let r=Om(n),i=Om(e),o=r.widthRatio/i.widthRatio,c=r.heightRatio/i.heightRatio;return o>1+t||c>1+t}a(Z0,"isElementSignificantlyLarger");function Om(n){let e={width:window.innerWidth,height:window.innerHeight,top:0,left:0,bottom:window.innerHeight,right:window.innerWidth},t=n.width/e.width,r=n.height/e.height;return{widthRatio:t,heightRatio:r}}a(Om,"getNormalizedElementSize");function Q0(n,e,t=.2){let r=n.width/e.width,i=n.height/e.height,o=n.width-e.width,c=n.height-e.height,u=window.innerWidth,d=window.innerHeight,f=o/u,p=c/d,g=(r-1+(i-1))/2,y=(f+p)/2;return g*y>t}a(Q0,"isSignificantlyLargerNormalized");var Sn=a(n=>mt(n,{useCache:!0}).isHidden,"getIsElementHidden"),Bo=a((n,e)=>{let t=n.tagName.toLowerCase();switch(t){case"img":case"video":case"audio":return{type:0,tag:t,src:n.getAttribute("src"),size:{width:n.clientWidth,height:n.clientHeight},screenSize:{width:window.innerWidth,height:window.innerHeight},isRoot:e,isHidden:Sn(n)};case"svg":return{type:6,tag:t,components:new Yn(document).extract(n)[0],isRoot:e,isHidden:Sn(n)};case"a":return{type:2,tag:t,href:n.getAttribute("href"),text:n.innerText,isRoot:e,isHidden:Sn(n)};case"button":return{type:3,tag:t,text:n.innerText,buttonType:n.getAttribute("type")||"button",isRoot:e,isHidden:Sn(n)};case"input":return{type:4,tag:t,inputType:n.getAttribute("type"),placeholder:n.getAttribute("placeholder"),isRoot:e,isHidden:Sn(n)};case"table":case"form":case"textarea":case"iframe":case"select":return{type:1,tag:t,isRoot:e,isHidden:Sn(n)}}if(n.innerHTML.trim()===n.innerText&&n.innerHTML.length)return{type:5,tag:t,text:J0(n.innerHTML),isRoot:e,isHidden:Sn(n)}},"extractFeatureFromElement"),J0=a(n=>n.length>256?n.substring(0,256)+"...":n,"shortenText");var ns=a(n=>Object.keys(n||{}).reduce((e,t)=>{let r=n[t];return r&&(e[t]=r),e},{}),"sanitizeStaticMetadata"),Dm=a((n,e)=>{let t=ns(n),r=ns(e),i=a(u=>!u||Object.keys(u).length===0,"isEmpty");if(i(t)&&i(r))return!0;if(i(t)||i(r))return!1;let o=Object.keys(t).sort(),c=Object.keys(r).sort();if(o.length!==c.length||!o.every((u,d)=>u===c[d]))return!1;for(let u in t)if(t[u]!==r[u])return!1;return!0},"staticDataMatch"),Vo=a(n=>{let e=ns(n);return!(!e||!Object.keys(e).length)},"hasStaticData");function km(n,e){let t=n.filter(u=>!u.isRoot);t.length>10&&(t=Object.values(t.reduce((u,d)=>{let f=`${d.type}_${d.tag}`;return u[f]?u:{...u,[f]:d}},{})));let r=Math.min(Math.ceil(t.length*e.innerFeatures.mandatoryPercentage),e.innerFeatures.mandatoryMax),o=a(u=>u.reduce((d,f)=>{let p=d.map(g=>[...g,f]).filter(g=>g.length<=r);return d.concat(p)},[[]]),"combinations")(t).filter(u=>u.length===r),c=[];return o.forEach(u=>{let d=[];u.forEach(p=>d.push(Xn(p))),Uo(d).forEach(p=>c.push(p.map(g=>`:has(${g})`).join("")))}),c}a(km,"getInnerFeaturesQueries");function Uo(n){if(!n.length)return[];let e=[],t=n.length-1;function r(i,o){for(let c=0,u=n[o].length;c<u;c++){let d=i.slice(0);d.push(n[o][c]),o===t?e.push(d):r(d,o+1)}}return a(r,"helper"),r([],0),e}a(Uo,"cartesian");function Xn(n){let e=[n.tag];switch(n.type){case 0:n.src&&e.push(`${n.tag}[src="${n.src}"]`);break;case 2:e.push(`${n.tag}[href="${n.href}"]`);break;case 3:break;case 4:e.push(`${n.tag}[type="${n.inputType}"]`),n.placeholder&&e.push(`${n.tag}[placeholder="${n.placeholder}"]`);break}return e}a(Xn,"getFeatureSelector");var Pm=a((n,e,{contains:t=!1,matchWholeWord:r=!1}={})=>(e=e.replaceAll(`
`,"\\A ").replaceAll('"','\\"'),t?r?`[${n}="${e}"],[${n}*="${e} "],[${n}*=" ${e} "],[${n}*=" ${e}"]`:`[${n}*="${e}"]`:`[${n}="${e}"]`),"buildAttributeEqualityQuerySelector"),Eu=a((n,e,{contains:t=!1,matchWholeWord:r=!1}={})=>t?r?n===e||n.startsWith(e)||n.includes(` ${e} `)||n.endsWith(e):n.includes(e):n===e,"checkStringEquality");var Zn=class{constructor(e){this.document=e;this.elementsByQueryCache={}}static{a(this,"AttributesExtractor")}getElementsByQuery(e){return this.elementsByQueryCache[e]||(this.elementsByQueryCache[e]=de(e,this.document)),this.elementsByQueryCache[e]}extract({element:e,setClass:t,setAttribute:r,getElementsInStructuralVicinity:i,getElementsInVisualVicinity:o}){for(let c=0;c<e.attributes.length;++c){let{name:u,value:d}=e.attributes[c];if(Kn.attributesToExtract.includes(u)&&typeof d=="string"){if(u==="class"){d.split(" ").forEach(f=>{f.length&&t(f,this.processAttribute({element:e,getElementsInStructuralVicinity:i,getElementsInVisualVicinity:o},u,f,{contains:!0,matchWholeWord:!0}))});continue}r(u,this.processAttribute({element:e,getElementsInStructuralVicinity:i,getElementsInVisualVicinity:o},u,d))}}}processAttribute({element:e,getElementsInStructuralVicinity:t,getElementsInVisualVicinity:r},i,o,c={}){let u=this.getElementsByQuery("*"),d=Pm(i,o,c),f=this.getElementsByQuery(d),p=this.getElementsByQuery(`${e.tagName.toLowerCase()}`),g=f.filter(w=>w.tagName===e.tagName),y=t?t():[],b=y.filter(w=>w.element.attributes[i]&&Eu(w.element.attributes[i].value,o,c)),E=r?r():[],C=E.filter(w=>w.element.attributes[i]&&Eu(w.element.attributes[i].value,o,c));return{value:o,globalUniqueness:1-f.length/u.length,tagUniqueness:1-g.length/p.length,structuralVicinityUniqueness:t?1-b.length/y.length:void 0,visualVicinityUniqueness:r?1-C.length/E.length:void 0}}};var Go=class{constructor(e){this.el=null;this.serializedElement="";this.attributes={};this.classes={};this.getElementsInStructuralVicinity=a(()=>this.structuralVicinityData.elementsInStructuralVicinity,"getElementsInStructuralVicinity");this.setElementStructuralVicinityData=a(e=>{this.structuralVicinityData=e},"setElementStructuralVicinityData");this.setElementVisualVicinityData=a(e=>{this.visualVicinityData=e},"setElementVisualVicinityData");this.getElementsInVisualVicinity=a(()=>this.visualVicinityData,"getElementsInVisualVicinity");this.setSerializedElement=a(e=>{this.serializedElement=e},"setSerializedElement");this.setAttribute=a((e,t)=>{this.attributes[e]=t},"setAttribute");this.setClass=a((e,t)=>{this.classes[e]=t},"setClass");this.setInnerText=a(e=>{this.innerText=e},"setInnerText");this.setStyle=a(e=>{this.style=e},"setStyle");this.setTag=a(e=>{this.tag=e},"setTag");this.setReact=a(e=>{this.react=e},"setReact");this.setInnerFeatures=a(e=>{this.innerFeatures=e},"setInnerFeatures");this.setPositioning=a(e=>{this.positioning=e},"setPositioning");this.setSVGs=a(e=>{this.svgs=e},"setSVGs");this.el=e,this.attributesExtractor=new Zn(this.el.ownerDocument)}static{a(this,"ESRAElementMetadataBuilder")}serialize(){}getSerializedElement(){return this.serializedElement}get element(){return this.el}getAttributes(){return this.attributes}getClasses(){return this.classes}getStyle(){return this.style}getInlineStyle(){return this.style.inline}getComputedStyle(){return this.style.computed}getTag(){return this.tag}getInnerFeatures(){return this.innerFeatures}getInnerText(){return this.innerText}getSVGs(){return this.svgs}toMetadata(){return{structuralVicinity:this.makeStructuralVicinityMetadata(),visualVicinity:this.makeVisualVicinityMetadata(),serializedElement:this.getSerializedElement(),attributes:this.getAttributes(),classes:this.getClasses(),innerText:this.getInnerText(),tag:this.getTag(),style:this.getStyle(),innerFeatures:this.getInnerFeatures(),staticCandidates:this.extractStaticCandidates(),positioning:this.positioning,svgs:this.getSVGs()}}extractStaticCandidates(){return ns({text:this.extractStaticTextCandidate(),labeled:this.extractLabeled(),labeling:this.extractLabeling(),svgTitle:this.extractSVGTitle()})}makeVicinityMetadata(e,t){return e.reduce((r,i)=>{let{qualified:o,feature:c}=this.isVicinityQualifiedElement(i.element);if(!o)return r;let u={},d={};this.attributesExtractor.extract({element:i.element,setClass:a((p,g)=>u[p]=g,"setClass"),setAttribute:a((p,g)=>d[p]=g,"setAttribute")});let f={tag:i.element.tagName.toLowerCase(),classes:u,attributes:d,text:this.extractTextForMetadata(i.element),feature:c,relativePosition:this.element.compareDocumentPosition(i.element),...t(i)};return r.push(f),r},[])}makeStructuralVicinityMetadata(){return this.makeVicinityMetadata(this.getElementsInStructuralVicinity(),e=>({position:e.position}))}makeVisualVicinityMetadata(){return this.makeVicinityMetadata(this.getElementsInVisualVicinity(),e=>({position:[e.position],distance:e.distance}))}isVicinityQualifiedElement(e){if(e===this.element)return{qualified:!1};if(!Kn.vicinityFeatureElementsOnly)return{qualified:!0};let t=Bo(e);return{qualified:!!t,feature:t}}extractTextForMetadata(e){if(e.innerHTML!==e.innerText)return;let t=e.innerHTML;return t.length>256?t.substring(0,256)+"...":t}extractStaticTextCandidate(){switch(this.tag){case"input":case"textarea":return this.attributes?.placeholder?.value;default:return this.innerText?.content}}extractLabeling(){if(this.element.tagName.toLowerCase()==="label")return or(this.element);let e=bn(this.element,"label");if(e&&this.attributeExists(e.getAttribute("for")))return or(e);try{if(this.element.id&&this.element.id.length&&de(`[aria-labelledby="${this.element.id}"]`).length)return or(this.element)}catch(t){console.error("extractLabeling error",t)}}extractLabeled(){let e=this.element.getAttribute("aria-label");if(this.attributeExists(e))return e;let t=bn(this.element,"label");if(t&&!this.attributeExists(t.getAttribute("for")))return or(t);if(this.element.id&&this.element.id.length)try{let i=de(`label[for=${this.element.id}]`);if(i.length)return or(i[0])}catch{return}let r=this.element.getAttribute("aria-labelledby");if(this.attributeExists(r)){let i=de(r.split(" ").map(o=>`#${o}`).join(","));if(i.length)return or(i[0])}}extractSVGTitle(){try{if(this.element.tagName.toLowerCase()!=="svg")return;let e=this.element.querySelector("title");return e?or(e):void 0}catch(e){console.error("extractSVGTitle error",e)}}attributeExists(e){return e&&e.length>0}};var zo=class{constructor(e,t){this.structuralVicinityData={elementsInStructuralVicinity:[],html:""};this.element=e,this.config=t}static{a(this,"StructuralVicinityExtractor")}getInitialLimit(){switch(this.config.type){case"ratio":return document.querySelectorAll("*").length*this.config.value;case"fixed":return this.config.value}}calculate(){let e=Date.now().toString();return this.structuralVicinityData.html=this.populateStructuralVicinity(this.element,["element"],{runId:e,step:0,limit:this.getInitialLimit()}),this.structuralVicinityData.elementsInStructuralVicinity.forEach(t=>t.element.attributes.removeNamedItem(`checksum-radial-traverse-${e}`)),this.structuralVicinityData}populateStructuralVicinity(e,t,r){let{runId:i,step:o,limit:c}=r;if(!e||o>c||e.attributes[`checksum-radial-traverse-${i}`]!==void 0)return"";this.structuralVicinityData.elementsInStructuralVicinity.push({element:e,position:t}),e.setAttribute(`checksum-radial-traverse-${i}`,o.toString());let f={runId:i,step:o+1,limit:this.config.useDecayingLimit?c-1:c},p=this.populateStructuralVicinity(ir(e),[...t,"parent"],f),g=this.populateStructuralVicinity(e.previousElementSibling,[...t,"left-sibling"],f),y=this.populateStructuralVicinity(e.nextElementSibling,[...t,"right-sibling"],f),b=[];ym(e).map((C,w)=>b.push(this.populateStructuralVicinity(C,[...t,"child"],f)));let E=g+e.outerHTML.replace(e.innerHTML,b.join(""))+y;return p&&!p.includes(e.outerHTML)?p.replace("></",`>${E}</`):p?p.replace(e.outerHTML,E):E}};var is=class{constructor(e,t){this.document=e;this.config=t;this.debug=!1;this.sampleBoxColors={0:"green",1:"orange",2:"red",3:"blue"}}static{a(this,"VisualVicinityExtractor")}calculate(e){let t=[],r=this.config.radius,i=this.config.scanStep,o=e.getBoundingClientRect();for(let c=o.left-r;c<o.left+o.width+r;c+=i)for(let u=o.top-r;u<o.top+o.height+r;u+=i){let d=c+i/2,f=u+i/2;if(this.doesRectContain(o,{left:c,top:u,right:c+i,bottom:u+i})){this.addTrace(d,f,i,3);continue}let p=this.document.elementFromPoint(d,f);if(!p)continue;let g=p.getBoundingClientRect();if(g.width>r*2&&g.height>r*2||this.doesRectContain(g,o)){this.addTrace(d,f,i,2);continue}if(!!t.find(({element:C})=>C===p)){this.addTrace(d,f,i,1);continue}let{position:b,distance:E}=this.getPosition(o,g);t.push({element:p,position:b,distance:E}),this.addTrace(d,f,i,0)}return t}getPosition(e,t){let{x:r,y:i}=this.getCenter(t),{x:o,y:c}=this.getCenter(e),u=a(()=>{let f=r-o,p=i-c;return f<0&&p<0?"top-left":f>0&&p<0?"top-right":f<0&&p>0?"bottom-left":f>0&&p>0?"bottom-right":f===0&&p<0?"top":f===0&&p>0?"bottom":f<0&&p===0?"left":f>0&&p===0?"right":"center"},"calcPosition");return{distance:a(()=>Number(Math.sqrt(Math.pow(o-r,2)+Math.pow(c-i,2)).toFixed(2)),"calcDistance")(),position:u()}}getCenter(e){return{x:e.width/2+e.left,y:e.height/2+e.top}}addTrace(e,t,r,i){if(!this.debug)return;let o=this.document.createElement("xdiv");o.setAttribute("style",`position: absolute; width: ${r}px; height: ${r}px; top: ${t}px; left: ${e}px; background: ${this.sampleBoxColors[i]}; z-index: 999999999999;opacity:0.4`),this.document.getElementsByTagName("body")[0].prepend(o)}doesRectContain(e,t){return t.left>=e.left&&t.right<=e.right&&t.top>=e.top&&t.bottom<=e.bottom}doRectsOverlap(e,t){let r=e.right<t.left,i=e.left>t.right,o=e.top>t.bottom,c=e.top<t.top;return!(r||i||o||c)}};window.vve=new is({radius:50,scanStep:10});var ss=Xi(Fm());window.resq$=ss.resq$;window.resq$$=ss.resq$$;var wu=class{static{a(this,"Provider")}extract(e){let t=this.findParentComponent(e,{ignoreBaseElement:!0});return{component:t,parentComponent:this.findParentComponent(t.node)}}findParentComponent(e,{ignoreBaseElement:t=!1,baseElement:r=void 0}={}){let i=(0,ss.resq$$)("*",e.parentElement).find(o=>o.children.length===1&&o.children[0].node===e);return r=r??e,i&&(t||i.node!==r)?this.parseRESQresult(i):this.findParentComponent(e.parentElement,{baseElement:r,ignoreBaseElement:t})}parseRESQresult(e){if(!e)return;let t=a(r=>{switch(typeof r){case"string":return[r];case"object":return Array.isArray(r)?r.map(t):Object.keys(r)}},"parseState");return{name:e.name,node:e.node,isFragment:e.isFragment,stateTokens:t(e.state),propsNames:Object.keys(e.props),hasChildren:!!e.children.length}}},Hm=new wu;var xu=class{static{a(this,"Provider")}extract(e){return{component:void 0,parentComponent:void 0}}},Wk=new xu;var jo=class{constructor(e,t){this.provider=Hm;this.element=e,this.config=t}static{a(this,"ReactMetadataExtractor")}extract(){return this.provider.extract(this.element)}};var Ko=class{constructor(e){this.document=e;this.tagBaseComputedStyle={}}static{a(this,"StyleExtractor")}extract({element:e,setStyle:t}){let r=e.tagName.toLowerCase();try{if(!this.tagBaseComputedStyle[r]){let i=this.document.createElement(r);this.document.getElementsByTagName("body")[0].prepend(i),this.tagBaseComputedStyle[r]=this.sanitzieStyle(window.getComputedStyle(i)),i.remove()}}catch(i){if(console.error("Failed to extract style for tag",r,i),!this.tagBaseComputedStyle[r])return}t({inline:this.sanitzieStyle(e.style,{acceptEmptyValue:!1}),computed:this.diffComputedStyle(this.tagBaseComputedStyle[r],this.sanitzieStyle(window.getComputedStyle(e)))})}diffComputedStyle(e,t){return a((o,c)=>Object.keys(c).reduce((u,d)=>o[d]===c[d]?u:{...u,[d]:c[d]},{}),"oneWayDiff")(e,t)}sanitzieStyle(e,{acceptEmptyValue:t=!0}={}){return Object.keys(e).reduce((r,i)=>{if(!isNaN(i))return r;let o=e[i];return!t&&!o||(r[i]=o),r},{})}};var Ir=class{constructor(){this.makeFeatureNode=a((e,t=void 0)=>{let r=e.nodeType===Node.ELEMENT_NODE;return{type:e.nodeType,tag:r?e.tagName.toLowerCase():void 0,feature:r?Bo(e,t):void 0,children:[],isRoot:t}},"makeFeatureNode");this.includeRootElements=!0;this.rootElementsTypeExceptions=[5];this.cache=Tt.getInstance("innerFeaturesExtractor",{log:!1})}static{a(this,"InnerFeaturesExtractor")}extract(e){let t=[],r=this.makeFeatureNode(e,!0);return this.walk(e,r,t),t}getMapFromCache(){let e=this.cache.get();return e||(e=new Map,this.cache.set(e)),e}getFeatureNodeFromCache(e){let t=this.getMapFromCache();return t.has(e)?t.get(e):void 0}addFeatureNodeToCache(e,t){let r=this.getMapFromCache();r.set(e,t),this.cache.set(r)}walk(e,t,r){let i=!1;zn(e).forEach(c=>{let u=this.getFeatureNodeFromCache(c)??this.makeFeatureNode(c),d=this.walk(c,u,r);d&&t.children.push(u),i||=d});let o=!!t.feature;return o&&(!t.isRoot||this.shouldIncludeRootNode(t))&&r.push(t.feature),this.addFeatureNodeToCache(e,t),o||i}shouldIncludeRootNode(e){return!(!this.includeRootElements||this.rootElementsTypeExceptions.includes(e.type))}};window.inner_features_extractor=new Ir;var Qn=class{static{a(this,"InnerTextExtractor")}constructor(){}extract(e){return{content:or(e)??void 0}}};var Yo=class{constructor(e){this.document=e}static{a(this,"PositioningExtractor")}extract(e){let{top:t,bottom:r,left:i,right:o}=e.getBoundingClientRect(),c=document.documentElement.scrollHeight,u=document.documentElement.scrollWidth;return{viewport:{size:{height:window.innerHeight,width:window.innerWidth},element:{top:this.normalize(t,window.innerHeight),bottom:this.normalize(r,window.innerHeight),left:this.normalize(i,window.innerWidth),right:this.normalize(o,window.innerWidth)}},document:{size:{height:c,width:u},element:{top:this.normalize(t+window.scrollY,c),bottom:this.normalize(r+window.scrollY,c),left:this.normalize(i+window.scrollX,u),right:this.normalize(o+window.scrollX,u)}}}}normalize(e,t){return e/t}};var Dt=class{constructor(e,t){this.stats={serializeElement:0,populateElementsInStructuralVicinity:0,populateElementsInVisualVicinity:0,extractAttributes:0,extractInnerText:0,extractStyle:0,extractTag:0,extractInnerFeatures:0,extractPositioning:0,extractSVGComponents:0,final:0};this.xmlSerializer=new XMLSerializer,this.document=e,this.config=t??Kn,this.visualVicinityExtractor=new is(this.document,this.config.visualVicinity),this.styleExtractor=new Ko(this.document),this.innerFeaturesExtractor=new Ir,this.innerTextExtractor=new Qn,this.positioningExtractor=new Yo(this.document)}static{a(this,"ESRAElementMetadataExtractor")}isSameDocument(e){return this.document===e}extract(e){let t=new dt(e).scrollIntoView(),r=Date.now(),i=new Go(e);return this.serializeElement(i),this.stats.serializeElement+=Date.now()-r,r=Date.now(),this.populateElementsInStructuralVicinity(i),this.stats.populateElementsInStructuralVicinity+=Date.now()-r,r=Date.now(),this.populateElementsInVisualVicinity(i),this.stats.populateElementsInVisualVicinity+=Date.now()-r,r=Date.now(),this.extractAttributes(i),this.stats.extractAttributes+=Date.now()-r,r=Date.now(),this.extractInnerText(i),this.stats.extractInnerText+=Date.now()-r,r=Date.now(),this.extractStyle(i),this.stats.extractStyle+=Date.now()-r,r=Date.now(),this.extractTag(i),this.stats.extractTag+=Date.now()-r,r=Date.now(),this.extractInnerFeatures(i),this.stats.extractInnerFeatures+=Date.now()-r,r=Date.now(),this.extractPositioning(i),this.stats.extractPositioning+=Date.now()-r,r=Date.now(),this.extractSVGComponents(i),this.stats.extractSVGComponents+=Date.now()-r,r=Date.now(),t.restore(),this.stats.final+=Date.now()-r,i}extractReact({element:e,setReact:t}){t(new jo(e,this.config.react).extract())}extractTag({element:e,setTag:t}){t(e.tagName.toLowerCase())}extractPositioning({element:e,setPositioning:t}){t(this.positioningExtractor.extract(e))}extractSVGComponents({element:e,setSVGs:t}){t(new Yn(this.document).extract(e))}serializeElement({element:e,setSerializedElement:t}){}extractAttributes({element:e,setClass:t,setAttribute:r,getElementsInStructuralVicinity:i,getElementsInVisualVicinity:o}){return new Zn(this.document).extract({element:e,setClass:t,setAttribute:r,getElementsInStructuralVicinity:i,getElementsInVisualVicinity:o})}populateElementsInStructuralVicinity({element:e,setElementStructuralVicinityData:t}){t(new zo(e,this.config.structuralVicinity).calculate())}populateElementsInVisualVicinity({element:e,setElementVisualVicinityData:t}){t(this.visualVicinityExtractor.calculate(e))}extractInnerText({element:e,setInnerText:t}){t(this.innerTextExtractor.extract(e))}extractStyle({element:e,setStyle:t}){return this.styleExtractor.extract({element:e,setStyle:t})}extractInnerFeatures({element:e,setInnerFeatures:t}){t(this.innerFeaturesExtractor.extract(e))}};var Yr=class extends Error{static{a(this,"TimeoutError")}constructor(){super("Timeout")}};var Xr=a(n=>{},"consoleTime"),Zr=a(n=>{},"consoleTimeEnd");var Xo=a((n,e=[])=>{if(!n)return n;let t=window.getComputedStyle(n).cursor,r=a((o,c=()=>!1)=>{let u=o;for(;u;){let d=u.parentElement;if(!d||d.nodeType!==Node.ELEMENT_NODE)return u;if(c(d))break;if(window.getComputedStyle(d).cursor!==t)return u;u=d}},"getClosestElementWithCursor"),i=a(o=>{try{if(o.matches("label[for]")&&!o.matches(Qi.concat(e).filter(c=>!!c&&c!=="label[for]").join(","))){let c=o.getAttribute("for");if(!c)return!1;let u=document.getElementById(c);if(!u)return!1;let d=u.getAttribute("type");return d?u.tagName.toLowerCase()==="input"&&["checkbox","radio"].includes(d):!1}}catch(c){console.error("interactableParentIsValid",o,c)}return!0},"interactableParentIsValid");try{if("isContentEditable"in n&&n.isContentEditable)return n;if("closest"in n){let c=bn(n,Qi.concat(e).filter(u=>!!u).join(","));if(c&&i(c)){if(c===n)return n;let u=r(n,d=>d===c);return u||c}}if(["auto","default","context-menu","help","progress","wait"].includes(t))return n;let o=r(n);return o||n}catch(o){return console.error("getCompoundInteractableRootElement",n,o),n}},"getCompoundInteractableRootElement");var Ar=a((n=document,e={},{allowDisabled:t=!1,useDataVisibleAttributes:r=!0,excludeCrossOriginIframes:i=!1,includeCompoundInnerElements:o=!0}={})=>{let c=Tt.getInstance("getAllInteractableHTMLElements",{target:n,log:!1}),u=Date.now(),d=a(b=>{let E=b.reduce((C,w)=>!t&&w.state.disabled?C:[...C,w.element],[]);return console.log("[getAllInteractableHTMLElements] done, took",Date.now()-u,"ms"),E},"makeResponse");if(c.hasCache())return d(c.get());let f=de("*",n,{excludeCrossOriginIframes:i});Xr("[getAllInteractableHTMLElements] items");let p=f.reduce((b,E)=>{let C="disabled"in E&&!!E.disabled;return E.matches(Qi.concat(e.appSpecificInteractableElementsSelectors||[]).filter(M=>!!M).join(","))||Em.includes(window.getComputedStyle(E).cursor)||E.isContentEditable&&!E.parentElement?.isContentEditable||!e.ignoreEventListenersWhenDeterminingInteractability&&(pu.some(M=>E[M])||tI(E))?[...b,{element:E,disabled:C}]:b},[]);Zr("[getAllInteractableHTMLElements] items"),Xr("[getAllInteractableHTMLElements] getCompoundInteractableRootElement");let g=p.reduce((b,E)=>{let C=Xo(E.element,e.appSpecificInteractableElementsSelectors||[]),w=b.find(M=>M.element===C);return w?!E.disabled&&w.state.disabled&&(w.state.disabled=!1):b.push({element:C,state:{disabled:E.disabled}}),o&&E.element!==C&&eI(E.element)&&b.push({...E,state:{disabled:E.disabled}}),b},[]);Zr("[getAllInteractableHTMLElements] getCompoundInteractableRootElement"),Xr("[getAllInteractableHTMLElements] isElementHidden");let y=g.filter(({element:b})=>{if(r){if(!b)return!1;let E=b.getAttribute("checksum-data-visible");if(E){let C=E==="true",w=b.getAttribute("checksum-data-visible-under-transparent-element")==="true",M=b.getAttribute("checksum-data-transparently-visible")==="true";return C&&!w||M}}return!mt(b,{markTransparentElementsAsHidden:!1}).isHidden});return Zr("[getAllInteractableHTMLElements] isElementHidden"),c.set(y),d(y)},"getAllInteractableHTMLElements"),eI=a(n=>["img","video","audio","a","svg","button"].includes(n.tagName.toLowerCase())?!0:Array.from(n.childNodes).filter(e=>e.nodeType===Node.TEXT_NODE&&e.textContent.trim()).length>0,"hasUniqueFeatures"),tI=a(n=>{if(n._checksum_eventListenerList){let r=n._checksum_eventListenerList;if(pu.some(i=>r[i.slice(2)]))return!0}let e=Object.keys(n).find(r=>r.startsWith("__reactFiber")),t=e?n[e]:void 0;return!t||!t.memoizedProps?!1:Sm.some(r=>t.memoizedProps[r])},"hasFrameworkInteractionListener");var wn=class n{constructor(e,t){this.POSITIONING_SATISFACTORY_SCORE=1;this.targetElementStaticData={};this.qualifiedAttributes=[];this.qualifiedAttributesMap={};this.qualifiedClasses=[];this.candidateQueries=[];this.candidates=[];this.uniqueCandidates=[];this.queryCandidates=[];this.interactableCandidates=[];this.rankedCandidates=[];this.filteredAndSortedRankedCandidates=[];this.finalCandidates=[];this.weightsSum=0;this.config={innerText:{dropIfMoreThanNCandidates:5},innerFeatures:{mandatoryPercentage:.6,mandatoryMax:6},results:{scorePercentile:.75,epsilon:.01}};this.getSelectionResultForCandidate=a(e=>{let t=Tt.getInstance("getElementSelectionResult",{log:!1}),r=t.get();if(r||(r=new Map,t.set(r)),r.has(e))return r.get(e);this.checkTimeout();let i=this.extractMetadata(e),{score:o,scores:c}=this.similarity.rank(i),u={score:o,candidate:e,scores:c,esraMetadata:i};return r.set(e,u),t.set(r),u},"getSelectionResultForCandidate");this.targetElementESRAMetadata=e,this.targetElementStaticData=t||e.staticMetadata,this.similarity=new Ho(this.targetElementESRAMetadata),this.esraMetadataExtractor=new Dt(document)}static{a(this,"ESRASelector")}makeWeight(e){return this.weightsSum+=e,e}getWeight(e){return e/this.weightsSum}extractMetadata(e){return new Po(this.esraMetadataExtractor.extract(e).toMetadata())}getLastSelectionLogs(e=5){if(!this.candidates?.length)return{};let t=new XMLSerializer,r=a((c,u=50)=>c.slice(0,u).map(d=>({score:d.score,metadata:d.metadata,element:t.serializeToString(d.candidate).substring(0,200)})),"printCandidates"),i=this.rankedCandidates[Math.min(this.rankedCandidates.length-1,e)].score,o=a(c=>r(c,e).filter(u=>u.score>=i),"filterByScore");return{candidatesQuery:this.candidateQueries.filter(c=>!!c.length).join(","),totalUniqueCandidates:this.uniqueCandidates.length,topRankingCandidates:r(this.rankedCandidates,e),topRemovedCandidates:{hidden:o(this.removedCandidates.hidden),staticData:o(this.removedCandidates.static)}}}selectByPositioning(){let e=this.targetElementESRAMetadata.positioning;if(window.innerWidth!==e.viewport.size.width||window.innerHeight!==e.viewport.size.height)return;let t=document.elementFromPoint(e.viewport.element.left*window.innerWidth,e.viewport.element.top*window.innerHeight),r=this.extractMetadata(t),{score:i}=this.similarity.rank(r);return i>=this.POSITIONING_SATISFACTORY_SCORE?{candidate:t,score:i,esraMetadata:r}:void 0}collectCandidates(){this.setQualifiedAttributesQueries(),this.setQualifiedClassesQueries(),this.setInnerFeaturesQueries(),this.candidates=[];let e=this.candidateQueries.filter(t=>!!t.length).join(",");this.queryCandidates=[],e.length&&(this.queryCandidates=de(e)),this.interactableCandidates=[],this.elementsFiltering!==0&&(this.interactableCandidates=Ar())}select(){console.log("selecting elements, filtering: ",Ji[this.elementsFiltering]);let e=a(o=>{switch(o){case 0:return this.queryCandidates;case 1:return this.intersectElements(this.queryCandidates,this.interactableCandidates);case 2:return this.interactableCandidates;case 3:return this.queryCandidates.concat(this.interactableCandidates)}},"filterElements");for(;this.candidates=e(this.elementsFiltering),!(this.candidates.length||this.elementsFiltering===3);)console.log(`no candidates found, expanding selection to ${Ji[this.elementsFiltering+1]}`),this.elementsFiltering++;console.log("# of query/interactable/total candidates:",this.queryCandidates.length,this.interactableCandidates.length,this.candidates.length),this.candidates.push(...this.getInnerTextCandidates()),this.candidates.length||this.candidates.push(...this.getTagCandidates()),this.uniqueCandidates=this.candidates.filter((o,c,u)=>u.indexOf(o)===c);let t=n.limitChildren;t?.length&&(t=t.map(o=>({...o,parent:document.querySelector(o.selector)})),this.uniqueCandidates=this.uniqueCandidates.filter(o=>{for(var c of t)if(c.parent&&this.isDescendant(c.parent,o)&&c.limit--<=0)return!1;return!0})),this.checkTimeout(),this.rankedCandidates=this.uniqueCandidates.filter(o=>o instanceof qn(o).HTMLElement||o instanceof qn(o).SVGElement).map(this.getSelectionResultForCandidate).sort((o,c)=>c.score-o.score),this.removedCandidates={hidden:[],static:[]},this.filteredAndSortedRankedCandidates=this.rankedCandidates.filter(o=>{let{isHidden:c,clickOffset:u}=this.isHidden(o.candidate);return c===!0?(this.removedCandidates.hidden.push(o),!1):(u&&(o.clickOffset=u),Vo(this.targetElementStaticData)&&!Dm(this.formatStaticCandidates(o.esraMetadata.staticCandidates),this.targetElementStaticData)?(o.metadata=JSON.stringify(o.esraMetadata.staticCandidates),this.removedCandidates.static.push(o),!1):!0)}),this.checkTimeout(),this.removedCandidates.hidden.slice().reverse().forEach((o,c,u)=>{o.candidate.tagName==="INPUT"&&this.filteredAndSortedRankedCandidates.find(d=>d.score>.1&&d.candidate.contains(o.candidate))&&(this.removedCandidates.hidden.splice(u.length-1-c,1),this.filteredAndSortedRankedCandidates.push(o))}),this.filteredAndSortedRankedCandidates=this.filteredAndSortedRankedCandidates.sort((o,c)=>c.score-o.score);let r=this.filteredAndSortedRankedCandidates.length*(1-this.config.results.scorePercentile);this.finalCandidates=[];let i=null;for(let o=0;o<this.filteredAndSortedRankedCandidates.length;++o){let c=this.filteredAndSortedRankedCandidates[o];if(o>=r&&(!i||i.score-c.score>this.config.results.epsilon))break;i=c,this.finalCandidates.push(c)}return this.finalCandidates}intersectElements(e,t){let r=a((u,{useElementSize:d=!1}={})=>{let f=new Set;return u.forEach(p=>{let g=2,y=p;for(;y&&g-- >0&&(f.add(y),!(d&&Math.abs(y.parentElement.clientWidth-y.clientWidth)>y.clientWidth*.3&&Math.abs(y.parentElement.clientHeight-y.clientHeight)>y.clientHeight*.3));)y=y.parentElement}),f},"normalize"),i=r(e),o=r(t),c=new Set;return i.forEach(u=>{o.has(u)&&c.add(u)}),Array.from(c)}checkTimeout(){if(n.timeout&&Date.now()-this.processStartTime>n.timeout)throw new Yr}selectOne({elementsFiltering:e=1,minSelectionScore:t=.3}={}){try{if(this.elementsFiltering=e,this.processStartTime=Date.now(),this.targetElementESRAMetadata.tag==="html"){let i=document.querySelector("html");return{candidate:i,score:1,esraMetadata:this.extractMetadata(i)}}let r=this.selectByPositioning();if(r)return console.log("Found element by positioning"),r;for(this.collectCandidates();;){let i=this.select();if(!i.length)break;let{score:o}=i[0];if(o<t&&this.elementsFiltering!==3){this.elementsFiltering++,console.log(`Best matching element is below threshold (${o}/${t}), expanding selection to ${Ji[this.elementsFiltering]}`);continue}return i[0]}}catch(r){r instanceof Yr?console.error("ESRA selection timeout"):console.error("ESRA selection error",r)}return{candidate:void 0,score:0,esraMetadata:void 0}}getFinalCandidates(){return this.finalCandidates}setQualifiedAttributesQueries(){this.candidateQueries.push(this.similarity.getQualifiedAttributes().map(e=>`[${e}="${this.targetElementESRAMetadata.attributes[e].value}"]`).join(","))}setQualifiedClassesQueries(e=[]){this.candidateQueries.push(this.similarity.getQualifiedClasses().map(t=>`.${t}`).join(","))}setInnerFeaturesQueries(){let e=km(this.targetElementESRAMetadata.innerFeatures,this.config).map(t=>`*${t}`);this.candidateQueries.push(...e)}getInnerTextCandidates(){let e=this.similarity.getQualifiedInnerText();if(!e)return[];let t=xm(e.content);return t.length>this.config.innerText.dropIfMoreThanNCandidates?[]:t}getTagCandidates(){return de(this.targetElementESRAMetadata.tag)}isDescendant(e,t){return e.contains(t)}formatStaticCandidates(e){let t={};return Object.keys(e).forEach(r=>{t[r]=e[r]}),t}isHidden(e){return mt(e,{useCache:!0})}};var rI=Object.defineProperty,nI=a((n,e,t)=>e in n?rI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,"__defNormalProp"),k=a((n,e,t)=>nI(n,typeof e!="symbol"?e+"":e,t),"__publicField"),$m,iI=Object.defineProperty,sI=a((n,e,t)=>e in n?iI(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,"__defNormalProp$1"),Wm=a((n,e,t)=>sI(n,typeof e!="symbol"?e+"":e,t),"__publicField$1"),he=(n=>(n[n.Document=0]="Document",n[n.DocumentType=1]="DocumentType",n[n.Element=2]="Element",n[n.Text=3]="Text",n[n.CDATA=4]="CDATA",n[n.Comment=5]="Comment",n))(he||{}),Bm={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},Vm={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},Zo={},oI=a(()=>!!globalThis.Zone,"isAngularZonePresent$1");function Wd(n){if(Zo[n])return Zo[n];let e=globalThis[n],t=e.prototype,r=n in Bm?Bm[n]:void 0,i=!!(r&&r.every(u=>{var d,f;return!!((f=(d=Object.getOwnPropertyDescriptor(t,u))==null?void 0:d.get)!=null&&f.toString().includes("[native code]"))})),o=n in Vm?Vm[n]:void 0,c=!!(o&&o.every(u=>{var d;return typeof t[u]=="function"&&((d=t[u])==null?void 0:d.toString().includes("[native code]"))}));if(i&&c&&!oI())return Zo[n]=e.prototype,e.prototype;try{let u=document.createElement("iframe");document.body.appendChild(u);let d=u.contentWindow;if(!d)return e.prototype;let f=d[n].prototype;return document.body.removeChild(u),f?Zo[n]=f:t}catch{return t}}a(Wd,"getUntaintedPrototype$1");var Cu={};function rn(n,e,t){var r;let i=`${n}.${String(t)}`;if(Cu[i])return Cu[i].call(e);let o=Wd(n),c=(r=Object.getOwnPropertyDescriptor(o,t))==null?void 0:r.get;return c?(Cu[i]=c,c.call(e)):e[t]}a(rn,"getUntaintedAccessor$1");var Mu={};function Qg(n,e,t){let r=`${n}.${String(t)}`;if(Mu[r])return Mu[r].bind(e);let o=Wd(n)[t];return typeof o!="function"?e[t]:(Mu[r]=o,o.bind(e))}a(Qg,"getUntaintedMethod$1");function aI(n){return rn("Node",n,"childNodes")}a(aI,"childNodes$1");function lI(n){return rn("Node",n,"parentNode")}a(lI,"parentNode$1");function cI(n){return rn("Node",n,"parentElement")}a(cI,"parentElement$1");function uI(n){return rn("Node",n,"textContent")}a(uI,"textContent$1");function dI(n,e){return Qg("Node",n,"contains")(e)}a(dI,"contains$1");function hI(n){return Qg("Node",n,"getRootNode")()}a(hI,"getRootNode$1");function fI(n){return!n||!("host"in n)?null:rn("ShadowRoot",n,"host")}a(fI,"host$1");function pI(n){return n.styleSheets}a(pI,"styleSheets$1");function mI(n){return!n||!("shadowRoot"in n)?null:rn("Element",n,"shadowRoot")}a(mI,"shadowRoot$1");function gI(n,e){return rn("Element",n,"querySelector")(e)}a(gI,"querySelector$1");function yI(n,e){return rn("Element",n,"querySelectorAll")(e)}a(yI,"querySelectorAll$1");function vI(){return Wd("MutationObserver").constructor}a(vI,"mutationObserverCtor$1");function bI(n,e,t){try{if(!(e in n))return()=>{};let r=n[e],i=t(r);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:r}})),n[e]=i,()=>{n[e]=r}}catch{return()=>{}}}a(bI,"patch$1");var gt={childNodes:aI,parentNode:lI,parentElement:cI,textContent:uI,contains:dI,getRootNode:hI,host:fI,styleSheets:pI,shadowRoot:mI,querySelector:gI,querySelectorAll:yI,mutationObserver:vI,patch:bI};function Bd(n){return n.nodeType===n.ELEMENT_NODE}a(Bd,"isElement");function fs(n){let e=n&&"host"in n&&"mode"in n&&gt.host(n)||null;return!!(e&&"shadowRoot"in e&&gt.shadowRoot(e)===n)}a(fs,"isShadowRoot");function ps(n){return Object.prototype.toString.call(n)==="[object ShadowRoot]"}a(ps,"isNativeShadowDom");function EI(n){return n.includes(" background-clip: text;")&&!n.includes(" -webkit-background-clip: text;")&&(n=n.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),n}a(EI,"fixBrowserCompatibilityIssuesInCSS");function SI(n){let{cssText:e}=n;if(e.split('"').length<3)return e;let t=["@import",`url(${JSON.stringify(n.href)})`];return n.layerName===""?t.push("layer"):n.layerName&&t.push(`layer(${n.layerName})`),n.supportsText&&t.push(`supports(${n.supportsText})`),n.media.length&&t.push(n.media.mediaText),t.join(" ")+";"}a(SI,"escapeImportStatement");function Wu(n){try{let e=n.rules||n.cssRules;if(!e)return null;let t=n.href;!t&&n.ownerNode&&n.ownerNode.ownerDocument&&(t=n.ownerNode.ownerDocument.location.href);let r=Array.from(e,i=>Jg(i,t)).join("");return EI(r)}catch{return null}}a(Wu,"stringifyStylesheet");function Jg(n,e){if(xI(n)){let t;try{t=Wu(n.styleSheet)||SI(n)}catch{t=n.cssText}return n.styleSheet.href?Ra(t,n.styleSheet.href):t}else{let t=n.cssText;return CI(n)&&n.selectorText.includes(":")&&(t=wI(t)),e?Ra(t,e):t}}a(Jg,"stringifyRule");function wI(n){let e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return n.replace(e,"$1\\$2")}a(wI,"fixSafariColons");function xI(n){return"styleSheet"in n}a(xI,"isCSSImportRule");function CI(n){return"selectorText"in n}a(CI,"isCSSStyleRule");var vs=class{static{a(this,"Mirror")}constructor(){Wm(this,"idNodeMap",new Map),Wm(this,"nodeMetaMap",new WeakMap)}getId(e){var t;return e?((t=this.getMeta(e))==null?void 0:t.id)??-1:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){let t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){let r=t.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,t)}replace(e,t){let r=this.getNode(e);if(r){let i=this.nodeMetaMap.get(r);i&&this.nodeMetaMap.set(t,i)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function ey(){return new vs}a(ey,"createMirror$2");function Ia({element:n,maskInputOptions:e,tagName:t,type:r,value:i,maskInputFn:o}){let c=i||"",u=r&&tn(r);return(e[t.toLowerCase()]||u&&e[u])&&(o?c=o(c,n):c="*".repeat(c.length)),c}a(Ia,"maskInputValue");function tn(n){return n.toLowerCase()}a(tn,"toLowerCase");var Um="__rrweb_original__";function MI(n){let e=n.getContext("2d");if(!e)return!0;let t=50;for(let r=0;r<n.width;r+=t)for(let i=0;i<n.height;i+=t){let o=e.getImageData,c=Um in o?o[Um]:o;if(new Uint32Array(c.call(e,r,i,Math.min(t,n.width-r),Math.min(t,n.height-i)).data.buffer).some(d=>d!==0))return!1}return!0}a(MI,"is2DCanvasBlank");function TI(n,e){return!n||!e||n.type!==e.type?!1:n.type===he.Document?n.compatMode===e.compatMode:n.type===he.DocumentType?n.name===e.name&&n.publicId===e.publicId&&n.systemId===e.systemId:n.type===he.Comment||n.type===he.Text||n.type===he.CDATA?n.textContent===e.textContent:n.type===he.Element?n.tagName===e.tagName&&JSON.stringify(n.attributes)===JSON.stringify(e.attributes)&&n.isSVG===e.isSVG&&n.needBlock===e.needBlock:!1}a(TI,"isNodeMetaEqual");function Aa(n){let e=n.type;return n.hasAttribute("data-rr-is-password")?"password":e?tn(e):null}a(Aa,"getInputType");function Vd(n,e){let t;try{t=new URL(n,e??window.location.href)}catch{return null}let r=/\.([0-9a-z]+)(?:$)/i,i=t.pathname.match(r);return i?.[1]??null}a(Vd,"extractFileExtension");function II(n){let e="";return n.indexOf("//")>-1?e=n.split("/").slice(0,3).join("/"):e=n.split("/")[0],e=e.split("?")[0],e}a(II,"extractOrigin");var AI=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,RI=/^(?:[a-z+]+:)?\/\//i,LI=/^www\..*/i,NI=/^(data:)([^,]*),(.*)/i;function Ra(n,e){return(n||"").replace(AI,(t,r,i,o,c,u)=>{let d=i||c||u,f=r||o||"";if(!d)return t;if(RI.test(d)||LI.test(d))return`url(${f}${d}${f})`;if(NI.test(d))return`url(${f}${d}${f})`;if(d[0]==="/")return`url(${f}${II(e)+d}${f})`;let p=e.split("/"),g=d.split("/");p.pop();for(let y of g)y!=="."&&(y===".."?p.pop():p.push(y));return`url(${f}${p.join("/")}${f})`})}a(Ra,"absolutifyURLs");function Qo(n,e=!1){return e?n.replace(/(\/\*[^*]*\*\/)|[\s;]/g,""):n.replace(/(\/\*[^*]*\*\/)|[\s;]/g,"").replace(/0px/g,"0")}a(Qo,"normalizeCssString");function OI(n,e,t=!1){let r=Array.from(e.childNodes),i=[],o=0;if(r.length>1&&n&&typeof n=="string"){let c=Qo(n,t),u=c.length/n.length;for(let d=1;d<r.length;d++)if(r[d].textContent&&typeof r[d].textContent=="string"){let f=Qo(r[d].textContent,t),p=100,g=3;for(;g<f.length&&(f[g].match(/[a-zA-Z0-9]/)||f.indexOf(f.substring(0,g),1)!==-1);g++);for(;g<f.length;g++){let y=f.substring(0,g),b=c.split(y),E=-1;if(b.length===2)E=b[0].length;else if(b.length>2&&b[0]===""&&r[d-1].textContent!=="")E=c.indexOf(y,1);else if(b.length===1){if(y=y.substring(0,y.length-1),b=c.split(y),b.length<=1)return i.push(n),i;g=p+1}else g===f.length-1&&(E=c.indexOf(y));if(b.length>=2&&g>p){let C=r[d-1].textContent;if(C&&typeof C=="string"){let w=Qo(C).length;E=c.indexOf(y,w)}E===-1&&(E=b[0].length)}if(E!==-1){let C=Math.floor(E/u);for(;C>0&&C<n.length;){if(o+=1,o>50*r.length)return i.push(n),i;let w=Qo(n.substring(0,C),t);if(w.length===E){i.push(n.substring(0,C)),n=n.substring(C),c=c.substring(E);break}else w.length<E?C+=Math.max(1,Math.floor((E-w.length)/u)):C-=Math.max(1,Math.floor((w.length-E)*u))}break}}}}return i.push(n),i}a(OI,"splitCssText");function _I(n,e){return OI(n,e).join("/* rr_split */")}a(_I,"markCssSplits");var DI=1,kI=new RegExp("[^a-z0-9-_:]"),bs=-2;function ty(){return DI++}a(ty,"genId");function PI(n){if(n instanceof HTMLFormElement)return"form";let e=tn(n.tagName);return kI.test(e)?"div":e}a(PI,"getValidTagName$1");var Jn,Gm,FI=/^[^ \t\n\r\u000c]+/,HI=/^[, \t\n\r\u000c]+/;function $I(n,e){if(e.trim()==="")return e;let t=0;function r(o){let c,u=o.exec(e.substring(t));return u?(c=u[0],t+=c.length,c):""}a(r,"collectCharacters");let i=[];for(;r(HI),!(t>=e.length);){let o=r(FI);if(o.slice(-1)===",")o=ni(n,o.substring(0,o.length-1)),i.push(o);else{let c="";o=ni(n,o);let u=!1;for(;;){let d=e.charAt(t);if(d===""){i.push((o+c).trim());break}else if(u)d===")"&&(u=!1);else if(d===","){t+=1,i.push((o+c).trim());break}else d==="("&&(u=!0);c+=d,t+=1}}}return i.join(", ")}a($I,"getAbsoluteSrcsetString");var zm=new WeakMap;function ni(n,e){return!e||e.trim()===""?e:Ud(n,e)}a(ni,"absoluteToDoc");function WI(n){return!!(n.tagName==="svg"||n.ownerSVGElement)}a(WI,"isSVGElement");function Ud(n,e){let t=zm.get(n);if(t||(t=n.createElement("a"),zm.set(n,t)),!e)e="";else if(e.startsWith("blob:")||e.startsWith("data:"))return e;return t.setAttribute("href",e),t.href}a(Ud,"getHref");function ry(n,e,t,r){return r&&(t==="src"||t==="href"&&!(e==="use"&&r[0]==="#")||t==="xlink:href"&&r[0]!=="#"||t==="background"&&(e==="table"||e==="td"||e==="th")?ni(n,r):t==="srcset"?$I(n,r):t==="style"?Ra(r,Ud(n)):e==="object"&&t==="data"?ni(n,r):r)}a(ry,"transformAttribute");function ny(n,e,t){return(n==="video"||n==="audio")&&e==="autoplay"}a(ny,"ignoreAttribute");function BI(n,e,t){try{if(typeof e=="string"){if(n.classList.contains(e))return!0}else for(let r=n.classList.length;r--;){let i=n.classList[r];if(e.test(i))return!0}if(t)return n.matches(t)}catch{}return!1}a(BI,"_isBlockedElement");function La(n,e,t){if(!n)return!1;if(n.nodeType!==n.ELEMENT_NODE)return t?La(gt.parentNode(n),e,t):!1;for(let r=n.classList.length;r--;){let i=n.classList[r];if(e.test(i))return!0}return t?La(gt.parentNode(n),e,t):!1}a(La,"classMatchesRegex");function iy(n,e,t,r){let i;if(Bd(n)){if(i=n,!gt.childNodes(i).length)return!1}else{if(gt.parentElement(n)===null)return!1;i=gt.parentElement(n)}try{if(typeof e=="string"){if(r){if(i.closest(`.${e}`))return!0}else if(i.classList.contains(e))return!0}else if(La(i,e,r))return!0;if(t){if(r){if(i.closest(t))return!0}else if(i.matches(t))return!0}}catch{}return!1}a(iy,"needMaskingText");function VI(n,e,t){let r=n.contentWindow;if(!r)return;let i=!1,o;try{o=r.document.readyState}catch{return}if(o!=="complete"){let u=setTimeout(()=>{i||(e(),i=!0)},t);n.addEventListener("load",()=>{clearTimeout(u),i=!0,e()});return}let c="about:blank";if(r.location.href!==c||n.src===c||n.src==="")return setTimeout(e,0),n.addEventListener("load",e);n.addEventListener("load",e)}a(VI,"onceIframeLoaded");function UI(n,e,t){let r=!1,i;try{i=n.sheet}catch{return}if(i)return;let o=setTimeout(()=>{r||(e(),r=!0)},t);n.addEventListener("load",()=>{clearTimeout(o),r=!0,e()})}a(UI,"onceStylesheetLoaded");function GI(n,e){let{doc:t,mirror:r,blockClass:i,blockSelector:o,needsMask:c,inlineStylesheet:u,maskInputOptions:d={},maskTextFn:f,maskInputFn:p,dataURLOptions:g={},inlineImages:y,recordCanvas:b,keepIframeSrcFn:E,newlyAddedElement:C=!1,cssCaptured:w=!1}=e,M=zI(t,r);switch(n.nodeType){case n.DOCUMENT_NODE:return n.compatMode!=="CSS1Compat"?{type:he.Document,childNodes:[],compatMode:n.compatMode}:{type:he.Document,childNodes:[]};case n.DOCUMENT_TYPE_NODE:return{type:he.DocumentType,name:n.name,publicId:n.publicId,systemId:n.systemId,rootId:M};case n.ELEMENT_NODE:return jI(n,{doc:t,blockClass:i,blockSelector:o,inlineStylesheet:u,maskInputOptions:d,maskInputFn:p,dataURLOptions:g,inlineImages:y,recordCanvas:b,keepIframeSrcFn:E,newlyAddedElement:C,rootId:M});case n.TEXT_NODE:return qI(n,{doc:t,needsMask:c,maskTextFn:f,rootId:M,cssCaptured:w});case n.CDATA_SECTION_NODE:return{type:he.CDATA,textContent:"",rootId:M};case n.COMMENT_NODE:return{type:he.Comment,textContent:gt.textContent(n)||"",rootId:M};default:return!1}}a(GI,"serializeNode");function zI(n,e){if(!e.hasNode(n))return;let t=e.getId(n);return t===1?void 0:t}a(zI,"getRootId");function qI(n,e){let{needsMask:t,maskTextFn:r,rootId:i,cssCaptured:o}=e,c=gt.parentNode(n),u=c&&c.tagName,d="",f=u==="STYLE"?!0:void 0,p=u==="SCRIPT"?!0:void 0;return p?d="SCRIPT_PLACEHOLDER":o||(d=gt.textContent(n),f&&d&&(d=Ra(d,Ud(e.doc)))),!f&&!p&&d&&t&&(d=r?r(d,gt.parentElement(n)):d.replace(/[\S]/g,"*")),{type:he.Text,textContent:d||"",rootId:i}}a(qI,"serializeTextNode");function jI(n,e){let{doc:t,blockClass:r,blockSelector:i,inlineStylesheet:o,maskInputOptions:c={},maskInputFn:u,dataURLOptions:d={},inlineImages:f,recordCanvas:p,keepIframeSrcFn:g,newlyAddedElement:y=!1,rootId:b}=e,E=BI(n,r,i),C=PI(n),w={},M=n.attributes.length;for(let A=0;A<M;A++){let _=n.attributes[A];ny(C,_.name,_.value)||(w[_.name]=ry(t,C,tn(_.name),_.value))}if(C==="link"&&o){let A=Array.from(t.styleSheets).find(z=>z.href===n.href),_=null;A&&(_=Wu(A)),_&&(delete w.rel,delete w.href,w._cssText=_)}if(C==="style"&&n.sheet){let A=Wu(n.sheet);A&&(n.childNodes.length>1&&(A=_I(A,n)),w._cssText=A)}if(C==="input"||C==="textarea"||C==="select"){let A=n.value,_=n.checked;w.type!=="radio"&&w.type!=="checkbox"&&w.type!=="submit"&&w.type!=="button"&&A?w.value=Ia({element:n,type:Aa(n),tagName:C,value:A,maskInputOptions:c,maskInputFn:u}):_&&(w.checked=_)}if(C==="option"&&(n.selected&&!c.select?w.selected=!0:delete w.selected),C==="dialog"&&n.open&&(w.rr_open_mode=n.matches("dialog:modal")?"modal":"non-modal"),C==="canvas"&&p){if(n.__context==="2d")MI(n)||(w.rr_dataURL=n.toDataURL(d.type,d.quality));else if(!("__context"in n)){let A=n.toDataURL(d.type,d.quality),_=t.createElement("canvas");_.width=n.width,_.height=n.height;let z=_.toDataURL(d.type,d.quality);A!==z&&(w.rr_dataURL=A)}}if(C==="img"&&f){Jn||(Jn=t.createElement("canvas"),Gm=Jn.getContext("2d"));let A=n,_=A.currentSrc||A.getAttribute("src")||"<unknown-src>",z=A.crossOrigin,G=a(()=>{A.removeEventListener("load",G);try{Jn.width=A.naturalWidth,Jn.height=A.naturalHeight,Gm.drawImage(A,0,0),w.rr_dataURL=Jn.toDataURL(d.type,d.quality)}catch(ee){if(A.crossOrigin!=="anonymous"){A.crossOrigin="anonymous",A.complete&&A.naturalWidth!==0?G():A.addEventListener("load",G);return}else console.warn(`Cannot inline img src=${_}! Error: ${ee}`)}A.crossOrigin==="anonymous"&&(z?w.crossOrigin=z:A.removeAttribute("crossorigin"))},"recordInlineImage");A.complete&&A.naturalWidth!==0?G():A.addEventListener("load",G)}if(C==="audio"||C==="video"){let A=w;A.rr_mediaState=n.paused?"paused":"played",A.rr_mediaCurrentTime=n.currentTime,A.rr_mediaPlaybackRate=n.playbackRate,A.rr_mediaMuted=n.muted,A.rr_mediaLoop=n.loop,A.rr_mediaVolume=n.volume}if(y||(n.scrollLeft&&(w.rr_scrollLeft=n.scrollLeft),n.scrollTop&&(w.rr_scrollTop=n.scrollTop)),E){let{width:A,height:_}=n.getBoundingClientRect();w={class:w.class,rr_width:`${A}px`,rr_height:`${_}px`}}C==="iframe"&&!g(w.src)&&(n.contentDocument||(w.rr_src=w.src),delete w.src);let N;try{customElements.get(C)&&(N=!0)}catch{}return{type:he.Element,tagName:C,attributes:w,childNodes:[],isSVG:WI(n)||void 0,needBlock:E,rootId:b,isCustom:N}}a(jI,"serializeElementNode");function ke(n){return n==null?"":n.toLowerCase()}a(ke,"lowerIfExists");function KI(n,e){if(e.comment&&n.type===he.Comment)return!0;if(n.type===he.Element){if(e.script&&(n.tagName==="script"||n.tagName==="link"&&(n.attributes.rel==="preload"&&n.attributes.as==="script"||n.attributes.rel==="modulepreload")||n.tagName==="link"&&n.attributes.rel==="prefetch"&&typeof n.attributes.href=="string"&&Vd(n.attributes.href)==="js"))return!0;if(e.headFavicon&&(n.tagName==="link"&&n.attributes.rel==="shortcut icon"||n.tagName==="meta"&&(ke(n.attributes.name).match(/^msapplication-tile(image|color)$/)||ke(n.attributes.name)==="application-name"||ke(n.attributes.rel)==="icon"||ke(n.attributes.rel)==="apple-touch-icon"||ke(n.attributes.rel)==="shortcut icon")))return!0;if(n.tagName==="meta"){if(e.headMetaDescKeywords&&ke(n.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(ke(n.attributes.property).match(/^(og|twitter|fb):/)||ke(n.attributes.name).match(/^(og|twitter):/)||ke(n.attributes.name)==="pinterest"))return!0;if(e.headMetaRobots&&(ke(n.attributes.name)==="robots"||ke(n.attributes.name)==="googlebot"||ke(n.attributes.name)==="bingbot"))return!0;if(e.headMetaHttpEquiv&&n.attributes["http-equiv"]!==void 0)return!0;if(e.headMetaAuthorship&&(ke(n.attributes.name)==="author"||ke(n.attributes.name)==="generator"||ke(n.attributes.name)==="framework"||ke(n.attributes.name)==="publisher"||ke(n.attributes.name)==="progid"||ke(n.attributes.property).match(/^article:/)||ke(n.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&(ke(n.attributes.name)==="google-site-verification"||ke(n.attributes.name)==="yandex-verification"||ke(n.attributes.name)==="csrf-token"||ke(n.attributes.name)==="p:domain_verify"||ke(n.attributes.name)==="verify-v1"||ke(n.attributes.name)==="verification"||ke(n.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}a(KI,"slimDOMExcluded");function ii(n,e){let{doc:t,mirror:r,blockClass:i,blockSelector:o,maskTextClass:c,maskTextSelector:u,skipChild:d=!1,inlineStylesheet:f=!0,maskInputOptions:p={},maskTextFn:g,maskInputFn:y,slimDOMOptions:b,dataURLOptions:E={},inlineImages:C=!1,recordCanvas:w=!1,onSerialize:M,onIframeLoad:N,iframeLoadTimeout:A=5e3,onStylesheetLoad:_,stylesheetLoadTimeout:z=5e3,keepIframeSrcFn:G=a(()=>!1,"keepIframeSrcFn"),newlyAddedElement:ee=!1,cssCaptured:V=!1}=e,{needsMask:j}=e,{preserveWhiteSpace:oe=!0}=e;j||(j=iy(n,c,u,j===void 0));let W=GI(n,{doc:t,mirror:r,blockClass:i,blockSelector:o,needsMask:j,inlineStylesheet:f,maskInputOptions:p,maskTextFn:g,maskInputFn:y,dataURLOptions:E,inlineImages:C,recordCanvas:w,keepIframeSrcFn:G,newlyAddedElement:ee,cssCaptured:V});if(!W)return console.warn(n,"not serialized"),null;let q;r.hasNode(n)?q=r.getId(n):KI(W,b)||!oe&&W.type===he.Text&&!W.textContent.replace(/^\s+|\s+$/gm,"").length?q=bs:q=ty();let B=Object.assign(W,{id:q});if(r.add(n,B),q===bs)return null;M&&M(n);let te=!d;if(B.type===he.Element){te=te&&!B.needBlock,delete B.needBlock;let Y=gt.shadowRoot(n);Y&&ps(Y)&&(B.isShadowHost=!0)}if((B.type===he.Document||B.type===he.Element)&&te){b.headWhitespace&&B.type===he.Element&&B.tagName==="head"&&(oe=!1);let Y={doc:t,mirror:r,blockClass:i,blockSelector:o,needsMask:j,maskTextClass:c,maskTextSelector:u,skipChild:d,inlineStylesheet:f,maskInputOptions:p,maskTextFn:g,maskInputFn:y,slimDOMOptions:b,dataURLOptions:E,inlineImages:C,recordCanvas:w,preserveWhiteSpace:oe,onSerialize:M,onIframeLoad:N,iframeLoadTimeout:A,onStylesheetLoad:_,stylesheetLoadTimeout:z,keepIframeSrcFn:G,cssCaptured:!1};if(!(B.type===he.Element&&B.tagName==="textarea"&&B.attributes.value!==void 0)){B.type===he.Element&&B.attributes._cssText!==void 0&&typeof B.attributes._cssText=="string"&&(Y.cssCaptured=!0);for(let Fe of Array.from(gt.childNodes(n))){let _e=ii(Fe,Y);_e&&B.childNodes.push(_e)}}let we=null;if(Bd(n)&&(we=gt.shadowRoot(n)))for(let Fe of Array.from(gt.childNodes(we))){let _e=ii(Fe,Y);_e&&(ps(we)&&(_e.isShadow=!0),B.childNodes.push(_e))}}let Q=gt.parentNode(n);return Q&&fs(Q)&&ps(Q)&&(B.isShadow=!0),B.type===he.Element&&B.tagName==="iframe"&&VI(n,()=>{let Y=n.contentDocument;if(Y&&N){let we=ii(Y,{doc:Y,mirror:r,blockClass:i,blockSelector:o,needsMask:j,maskTextClass:c,maskTextSelector:u,skipChild:!1,inlineStylesheet:f,maskInputOptions:p,maskTextFn:g,maskInputFn:y,slimDOMOptions:b,dataURLOptions:E,inlineImages:C,recordCanvas:w,preserveWhiteSpace:oe,onSerialize:M,onIframeLoad:N,iframeLoadTimeout:A,onStylesheetLoad:_,stylesheetLoadTimeout:z,keepIframeSrcFn:G});we&&N(n,we)}},A),B.type===he.Element&&B.tagName==="link"&&typeof B.attributes.rel=="string"&&(B.attributes.rel==="stylesheet"||B.attributes.rel==="preload"&&typeof B.attributes.href=="string"&&Vd(B.attributes.href)==="css")&&UI(n,()=>{if(_){let Y=ii(n,{doc:t,mirror:r,blockClass:i,blockSelector:o,needsMask:j,maskTextClass:c,maskTextSelector:u,skipChild:!1,inlineStylesheet:f,maskInputOptions:p,maskTextFn:g,maskInputFn:y,slimDOMOptions:b,dataURLOptions:E,inlineImages:C,recordCanvas:w,preserveWhiteSpace:oe,onSerialize:M,onIframeLoad:N,iframeLoadTimeout:A,onStylesheetLoad:_,stylesheetLoadTimeout:z,keepIframeSrcFn:G});Y&&_(n,Y)}},z),B}a(ii,"serializeNodeWithId");function YI(n,e){let{mirror:t=new vs,blockClass:r="rr-block",blockSelector:i=null,maskTextClass:o="rr-mask",maskTextSelector:c=null,inlineStylesheet:u=!0,inlineImages:d=!1,recordCanvas:f=!1,maskAllInputs:p=!1,maskTextFn:g,maskInputFn:y,slimDOM:b=!1,dataURLOptions:E,preserveWhiteSpace:C,onSerialize:w,onIframeLoad:M,iframeLoadTimeout:N,onStylesheetLoad:A,stylesheetLoadTimeout:_,keepIframeSrcFn:z=a(()=>!1,"keepIframeSrcFn")}=e||{};return ii(n,{doc:n,mirror:t,blockClass:r,blockSelector:i,maskTextClass:o,maskTextSelector:c,skipChild:!1,inlineStylesheet:u,maskInputOptions:p===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:p===!1?{password:!0}:p,maskTextFn:g,maskInputFn:y,slimDOMOptions:b===!0||b==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:b==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:b===!1?{}:b,dataURLOptions:E,inlineImages:d,recordCanvas:f,preserveWhiteSpace:C,onSerialize:w,onIframeLoad:M,iframeLoadTimeout:N,onStylesheetLoad:A,stylesheetLoadTimeout:_,keepIframeSrcFn:z,newlyAddedElement:!1})}a(YI,"snapshot");var XI=/(max|min)-device-(width|height)/,qm=new RegExp(XI.source,"g"),ZI={postcssPlugin:"postcss-custom-selectors",prepare(){return{postcssPlugin:"postcss-custom-selectors",AtRule:a(function(n){n.params.match(qm)&&(n.params=n.params.replace(qm,"$1-$2"))},"AtRule")}}},QI={postcssPlugin:"postcss-hover-classes",prepare:a(function(){let n=[];return{Rule:a(function(e){n.indexOf(e)===-1&&(n.push(e),e.selectors.forEach(function(t){t.includes(":hover")&&(e.selector+=`,
`+t.replace(/:hover/g,".\\:hover"))}))},"Rule")}},"prepare")};function JI(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}a(JI,"getDefaultExportFromCjs$1");function e1(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=a(function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)},"a22");t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:a(function(){return n[r]},"get")})}),t}a(e1,"getAugmentedNamespace$1");var Gd={exports:{}},We=String,sy=a(function(){return{isColorSupported:!1,reset:We,bold:We,dim:We,italic:We,underline:We,inverse:We,hidden:We,strikethrough:We,black:We,red:We,green:We,yellow:We,blue:We,magenta:We,cyan:We,white:We,gray:We,bgBlack:We,bgRed:We,bgGreen:We,bgYellow:We,bgBlue:We,bgMagenta:We,bgCyan:We,bgWhite:We}},"create$1");Gd.exports=sy();Gd.exports.createColors=sy;var t1=Gd.exports,r1={},n1=Object.freeze(Object.defineProperty({__proto__:null,default:r1},Symbol.toStringTag,{value:"Module"})),Jt=e1(n1),jm=t1,Km=Jt,Bu=class oy extends Error{static{a(this,"CssSyntaxError")}constructor(e,t,r,i,o,c){super(e),this.name="CssSyntaxError",this.reason=e,o&&(this.file=o),i&&(this.source=i),c&&(this.plugin=c),typeof t<"u"&&typeof r<"u"&&(typeof t=="number"?(this.line=t,this.column=r):(this.line=t.line,this.column=t.column,this.endLine=r.line,this.endColumn=r.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,oy)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;e==null&&(e=jm.isColorSupported),Km&&e&&(t=Km(t));let r=t.split(/\r?\n/),i=Math.max(this.line-3,0),o=Math.min(this.line+2,r.length),c=String(o).length,u,d;if(e){let{bold:f,gray:p,red:g}=jm.createColors(!0);u=a(y=>f(g(y)),"mark"),d=a(y=>p(y),"aside")}else u=d=a(f=>f,"aside");return r.slice(i,o).map((f,p)=>{let g=i+1+p,y=" "+(" "+g).slice(-c)+" | ";if(g===this.line){let b=d(y.replace(/\d/g," "))+f.slice(0,this.column-1).replace(/[^\t]/g," ");return u(">")+d(y)+f+`
 `+b+u("^")}return" "+d(y)+f}).join(`
`)}toString(){let e=this.showSourceCode();return e&&(e=`

`+e+`
`),this.name+": "+this.message+e}},zd=Bu;Bu.default=Bu;var Rs={};Rs.isClean=Symbol("isClean");Rs.my=Symbol("my");var Ym={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function i1(n){return n[0].toUpperCase()+n.slice(1)}a(i1,"capitalize$1");var Vu=class{static{a(this,"Stringifier")}constructor(e){this.builder=e}atrule(e,t){let r="@"+e.name,i=e.params?this.rawValue(e,"params"):"";if(typeof e.raws.afterName<"u"?r+=e.raws.afterName:i&&(r+=" "),e.nodes)this.block(e,r+i);else{let o=(e.raws.between||"")+(t?";":"");this.builder(r+i+o,e)}}beforeAfter(e,t){let r;e.type==="decl"?r=this.raw(e,null,"beforeDecl"):e.type==="comment"?r=this.raw(e,null,"beforeComment"):t==="before"?r=this.raw(e,null,"beforeRule"):r=this.raw(e,null,"beforeClose");let i=e.parent,o=0;for(;i&&i.type!=="root";)o+=1,i=i.parent;if(r.includes(`
`)){let c=this.raw(e,null,"indent");if(c.length)for(let u=0;u<o;u++)r+=c}return r}block(e,t){let r=this.raw(e,"between","beforeOpen");this.builder(t+r+"{",e,"start");let i;e.nodes&&e.nodes.length?(this.body(e),i=this.raw(e,"after")):i=this.raw(e,"after","emptyBody"),i&&this.builder(i),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&e.nodes[t].type==="comment";)t-=1;let r=this.raw(e,"semicolon");for(let i=0;i<e.nodes.length;i++){let o=e.nodes[i],c=this.raw(o,"before");c&&this.builder(c),this.stringify(o,t!==i||r)}}comment(e){let t=this.raw(e,"left","commentLeft"),r=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+r+"*/",e)}decl(e,t){let r=this.raw(e,"between","colon"),i=e.prop+r+this.rawValue(e,"value");e.important&&(i+=e.raws.important||" !important"),t&&(i+=";"),this.builder(i,e)}document(e){this.body(e)}raw(e,t,r){let i;if(r||(r=t),t&&(i=e.raws[t],typeof i<"u"))return i;let o=e.parent;if(r==="before"&&(!o||o.type==="root"&&o.first===e||o&&o.type==="document"))return"";if(!o)return Ym[r];let c=e.root();if(c.rawCache||(c.rawCache={}),typeof c.rawCache[r]<"u")return c.rawCache[r];if(r==="before"||r==="after")return this.beforeAfter(e,r);{let u="raw"+i1(r);this[u]?i=this[u](c,e):c.walk(d=>{if(i=d.raws[t],typeof i<"u")return!1})}return typeof i>"u"&&(i=Ym[r]),c.rawCache[r]=i,i}rawBeforeClose(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length>0&&typeof r.raws.after<"u")return t=r.raws.after,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let r;return e.walkComments(i=>{if(typeof i.raws.before<"u")return r=i.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(t,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeDecl(e,t){let r;return e.walkDecls(i=>{if(typeof i.raws.before<"u")return r=i.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(t,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeOpen(e){let t;return e.walk(r=>{if(r.type!=="decl"&&(t=r.raws.between,typeof t<"u"))return!1}),t}rawBeforeRule(e){let t;return e.walk(r=>{if(r.nodes&&(r.parent!==e||e.first!==r)&&typeof r.raws.before<"u")return t=r.raws.before,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls(r=>{if(typeof r.raws.between<"u")return t=r.raws.between.replace(/[^\s:]/g,""),!1}),t}rawEmptyBody(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length===0&&(t=r.raws.after,typeof t<"u"))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(r=>{let i=r.parent;if(i&&i!==e&&i.parent&&i.parent===e&&typeof r.raws.before<"u"){let o=r.raws.before.split(`
`);return t=o[o.length-1],t=t.replace(/\S/g,""),!1}}),t}rawSemicolon(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length&&r.last.type==="decl"&&(t=r.raws.semicolon,typeof t<"u"))return!1}),t}rawValue(e,t){let r=e[t],i=e.raws[t];return i&&i.value===r?i.raw:r}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}},ay=Vu;Vu.default=Vu;var s1=ay;function Uu(n,e){new s1(e).stringify(n)}a(Uu,"stringify$4$1");var Qa=Uu;Uu.default=Uu;var{isClean:Jo,my:o1}=Rs,a1=zd,l1=ay,c1=Qa;function Gu(n,e){let t=new n.constructor;for(let r in n){if(!Object.prototype.hasOwnProperty.call(n,r)||r==="proxyCache")continue;let i=n[r],o=typeof i;r==="parent"&&o==="object"?e&&(t[r]=e):r==="source"?t[r]=i:Array.isArray(i)?t[r]=i.map(c=>Gu(c,t)):(o==="object"&&i!==null&&(i=Gu(i)),t[r]=i)}return t}a(Gu,"cloneNode$1");var zu=class{static{a(this,"Node2")}constructor(e={}){this.raws={},this[Jo]=!1,this[o1]=!0;for(let t in e)if(t==="nodes"){this.nodes=[];for(let r of e[t])typeof r.clone=="function"?this.append(r.clone()):this.append(r)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=Gu(this);for(let r in e)t[r]=e[r];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:r,start:i}=this.rangeBy(t);return this.source.input.error(e,{column:i.column,line:i.line},{column:r.column,line:r.line},t)}return new a1(e)}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:t==="root"?()=>e.root().toProxy():e[t]},set(e,t,r){return e[t]===r||(e[t]=r,(t==="prop"||t==="value"||t==="name"||t==="params"||t==="important"||t==="text")&&e.markDirty()),!0}}}markDirty(){if(this[Jo]){this[Jo]=!1;let e=this;for(;e=e.parent;)e[Jo]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let r=this.source.start;if(e.index)r=this.positionInside(e.index,t);else if(e.word){t=this.toString();let i=t.indexOf(e.word);i!==-1&&(r=this.positionInside(i,t))}return r}positionInside(e,t){let r=t||this.toString(),i=this.source.start.column,o=this.source.start.line;for(let c=0;c<e;c++)r[c]===`
`?(i=1,o+=1):i+=1;return{column:i,line:o}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},r=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let i=this.toString(),o=i.indexOf(e.word);o!==-1&&(t=this.positionInside(o,i),r=this.positionInside(o+e.word.length,i))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?r={column:e.end.column,line:e.end.line}:typeof e.endIndex=="number"?r=this.positionInside(e.endIndex):e.index&&(r=this.positionInside(e.index+1));return(r.line<t.line||r.line===t.line&&r.column<=t.column)&&(r={column:t.column+1,line:t.line}),{end:r,start:t}}raw(e,t){return new l1().raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,r=!1;for(let i of e)i===this?r=!0:r?(this.parent.insertAfter(t,i),t=i):this.parent.insertBefore(t,i);r||this.remove()}return this}root(){let e=this;for(;e.parent&&e.parent.type!=="document";)e=e.parent;return e}toJSON(e,t){let r={},i=t==null;t=t||new Map;let o=0;for(let c in this){if(!Object.prototype.hasOwnProperty.call(this,c)||c==="parent"||c==="proxyCache")continue;let u=this[c];if(Array.isArray(u))r[c]=u.map(d=>typeof d=="object"&&d.toJSON?d.toJSON(null,t):d);else if(typeof u=="object"&&u.toJSON)r[c]=u.toJSON(null,t);else if(c==="source"){let d=t.get(u.input);d==null&&(d=o,t.set(u.input,o),o++),r[c]={end:u.end,inputId:d,start:u.start}}else r[c]=u}return i&&(r.inputs=[...t.keys()].map(c=>c.toJSON())),r}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=c1){e.stringify&&(e=e.stringify);let t="";return e(this,r=>{t+=r}),t}warn(e,t,r){let i={node:this};for(let o in r)i[o]=r[o];return e.warn(t,i)}get proxyOf(){return this}},Ja=zu;zu.default=zu;var u1=Ja,qu=class extends u1{static{a(this,"Declaration")}constructor(e){e&&typeof e.value<"u"&&typeof e.value!="string"&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}},el=qu;qu.default=qu;var d1="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",h1=a((n,e=21)=>(t=e)=>{let r="",i=t;for(;i--;)r+=n[Math.random()*n.length|0];return r},"customAlphabet$1"),f1=a((n=21)=>{let e="",t=n;for(;t--;)e+=d1[Math.random()*64|0];return e},"nanoid$1$1"),p1={nanoid:f1,customAlphabet:h1},{SourceMapConsumer:Xm,SourceMapGenerator:Zm}=Jt,{existsSync:m1,readFileSync:g1}=Jt,{dirname:Tu,join:y1}=Jt;function v1(n){return Buffer?Buffer.from(n,"base64").toString():window.atob(n)}a(v1,"fromBase64$1");var ju=class{static{a(this,"PreviousMap")}constructor(e,t){if(t.map===!1)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let r=t.map?t.map.prev:void 0,i=this.loadMap(t.from,r);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=Tu(this.mapFile)),i&&(this.text=i)}consumer(){return this.consumerCache||(this.consumerCache=new Xm(this.text)),this.consumerCache}decodeInline(e){let t=/^data:application\/json;charset=utf-?8;base64,/,r=/^data:application\/json;base64,/,i=/^data:application\/json;charset=utf-?8,/,o=/^data:application\/json,/;if(i.test(e)||o.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(t.test(e)||r.test(e))return v1(e.substr(RegExp.lastMatch.length));let c=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+c)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return typeof e!="object"?!1:typeof e.mappings=="string"||typeof e._mappings=="string"||Array.isArray(e.sections)}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let r=e.lastIndexOf(t.pop()),i=e.indexOf("*/",r);r>-1&&i>-1&&(this.annotation=this.getAnnotationURL(e.substring(r,i)))}loadFile(e){if(this.root=Tu(e),m1(e))return this.mapFile=e,g1(e,"utf-8").toString().trim()}loadMap(e,t){if(t===!1)return!1;if(t){if(typeof t=="string")return t;if(typeof t=="function"){let r=t(e);if(r){let i=this.loadFile(r);if(!i)throw new Error("Unable to load previous source map: "+r.toString());return i}}else{if(t instanceof Xm)return Zm.fromSourceMap(t).toString();if(t instanceof Zm)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let r=this.annotation;return e&&(r=y1(Tu(e),r)),this.loadFile(r)}}}startWith(e,t){return e?e.substr(0,t.length)===t:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}},ly=ju;ju.default=ju;var{SourceMapConsumer:b1,SourceMapGenerator:E1}=Jt,{fileURLToPath:Qm,pathToFileURL:ea}=Jt,{isAbsolute:Ku,resolve:Yu}=Jt,{nanoid:S1}=p1,Iu=Jt,Jm=zd,w1=ly,Au=Symbol("fromOffsetCache"),x1=!!(b1&&E1),eg=!!(Yu&&Ku),Na=class{static{a(this,"Input")}constructor(e,t={}){if(e===null||typeof e>"u"||typeof e=="object"&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),this.css[0]==="\uFEFF"||this.css[0]==="\uFFFE"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!eg||/^\w+:\/\//.test(t.from)||Ku(t.from)?this.file=t.from:this.file=Yu(t.from)),eg&&x1){let r=new w1(this.css,t);if(r.text){this.map=r;let i=r.consumer().file;!this.file&&i&&(this.file=this.mapResolve(i))}}this.file||(this.id="<input css "+S1(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,r,i={}){let o,c,u;if(t&&typeof t=="object"){let f=t,p=r;if(typeof f.offset=="number"){let g=this.fromOffset(f.offset);t=g.line,r=g.col}else t=f.line,r=f.column;if(typeof p.offset=="number"){let g=this.fromOffset(p.offset);c=g.line,u=g.col}else c=p.line,u=p.column}else if(!r){let f=this.fromOffset(t);t=f.line,r=f.col}let d=this.origin(t,r,c,u);return d?o=new Jm(e,d.endLine===void 0?d.line:{column:d.column,line:d.line},d.endLine===void 0?d.column:{column:d.endColumn,line:d.endLine},d.source,d.file,i.plugin):o=new Jm(e,c===void 0?t:{column:r,line:t},c===void 0?r:{column:u,line:c},this.css,this.file,i.plugin),o.input={column:r,endColumn:u,endLine:c,line:t,source:this.css},this.file&&(ea&&(o.input.url=ea(this.file).toString()),o.input.file=this.file),o}fromOffset(e){let t,r;if(this[Au])r=this[Au];else{let o=this.css.split(`
`);r=new Array(o.length);let c=0;for(let u=0,d=o.length;u<d;u++)r[u]=c,c+=o[u].length+1;this[Au]=r}t=r[r.length-1];let i=0;if(e>=t)i=r.length-1;else{let o=r.length-2,c;for(;i<o;)if(c=i+(o-i>>1),e<r[c])o=c-1;else if(e>=r[c+1])i=c+1;else{i=c;break}}return{col:e-r[i]+1,line:i+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:Yu(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,r,i){if(!this.map)return!1;let o=this.map.consumer(),c=o.originalPositionFor({column:t,line:e});if(!c.source)return!1;let u;typeof r=="number"&&(u=o.originalPositionFor({column:i,line:r}));let d;Ku(c.source)?d=ea(c.source):d=new URL(c.source,this.map.consumer().sourceRoot||ea(this.map.mapFile));let f={column:c.column,endColumn:u&&u.column,endLine:u&&u.line,line:c.line,url:d.toString()};if(d.protocol==="file:")if(Qm)f.file=Qm(d);else throw new Error("file: protocol is not available in this PostCSS build");let p=o.sourceContentFor(c.source);return p&&(f.source=p),f}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])this[t]!=null&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}},tl=Na;Na.default=Na;Iu&&Iu.registerInput&&Iu.registerInput(Na);var{SourceMapConsumer:cy,SourceMapGenerator:Sa}=Jt,{dirname:wa,relative:uy,resolve:dy,sep:hy}=Jt,{pathToFileURL:tg}=Jt,C1=tl,M1=!!(cy&&Sa),T1=!!(wa&&dy&&uy&&hy),I1=class{static{a(this,"MapGenerator")}constructor(e,t,r,i){this.stringify=e,this.mapOpts=r.map||{},this.root=t,this.opts=r,this.css=i,this.originalCSS=i,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;this.isInline()?e="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?e=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?e=this.mapOpts.annotation(this.opts.to,this.root):e=this.outputFile()+".map";let t=`
`;this.css.includes(`\r
`)&&(t=`\r
`),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t=this.toUrl(this.path(e.file)),r=e.root||wa(e.file),i;this.mapOpts.sourcesContent===!1?(i=new cy(e.text),i.sourcesContent&&(i.sourcesContent=null)):i=e.consumer(),this.map.applySourceMap(i,t,this.toUrl(this.path(r)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],e.type==="comment"&&e.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),T1&&M1&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=Sa.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new Sa({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new Sa({file:this.outputFile(),ignoreInvalidMapping:!0});let e=1,t=1,r="<no source>",i={generated:{column:0,line:0},original:{column:0,line:0},source:""},o,c;this.stringify(this.root,(u,d,f)=>{if(this.css+=u,d&&f!=="end"&&(i.generated.line=e,i.generated.column=t-1,d.source&&d.source.start?(i.source=this.sourcePath(d),i.original.line=d.source.start.line,i.original.column=d.source.start.column-1,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,this.map.addMapping(i))),o=u.match(/\n/g),o?(e+=o.length,c=u.lastIndexOf(`
`),t=u.length-c):t+=u.length,d&&f!=="start"){let p=d.parent||{raws:{}};(!(d.type==="decl"||d.type==="atrule"&&!d.nodes)||d!==p.last||p.raws.semicolon)&&(d.source&&d.source.end?(i.source=this.sourcePath(d),i.original.line=d.source.end.line,i.original.column=d.source.end.column-1,i.generated.line=e,i.generated.column=t-2,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,i.generated.line=e,i.generated.column=t-1,this.map.addMapping(i)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(e=>e.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let e=this.mapOpts.annotation;return typeof e<"u"&&e!==!0?!1:this.previous().length?this.previous().some(t=>t.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(e=>e.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute||e.charCodeAt(0)===60||/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let r=this.opts.to?wa(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(r=wa(dy(r,this.mapOpts.annotation)));let i=uy(r,e);return this.memoizedPaths.set(e,i),i}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new C1(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let r=t.source.input.from;if(r&&!e[r]){e[r]=!0;let i=this.usesFileUrls?this.toFileUrl(r):this.toUrl(this.path(r));this.map.setSourceContent(i,t.source.input.css)}}});else if(this.css){let t=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(t,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(tg){let r=tg(e).toString();return this.memoizedFileURLs.set(e,r),r}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;hy==="\\"&&(e=e.replace(/\\/g,"/"));let r=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,r),r}},fy=I1,A1=Ja,Xu=class extends A1{static{a(this,"Comment")}constructor(e){super(e),this.type="comment"}},rl=Xu;Xu.default=Xu;var{isClean:py,my}=Rs,gy=el,yy=rl,R1=Ja,vy,qd,jd,by;function Ey(n){return n.map(e=>(e.nodes&&(e.nodes=Ey(e.nodes)),delete e.source,e))}a(Ey,"cleanSource$1");function Sy(n){if(n[py]=!1,n.proxyOf.nodes)for(let e of n.proxyOf.nodes)Sy(e)}a(Sy,"markDirtyUp$1");var Nr=class wy extends R1{static{a(this,"Container")}append(...e){for(let t of e){let r=this.normalize(t,this.last);for(let i of r)this.proxyOf.nodes.push(i)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t=this.getIterator(),r,i;for(;this.indexes[t]<this.proxyOf.nodes.length&&(r=this.indexes[t],i=e(this.proxyOf.nodes[r],r),i!==!1);)this.indexes[t]+=1;return delete this.indexes[t],i}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:e[t]?t==="each"||typeof t=="string"&&t.startsWith("walk")?(...r)=>e[t](...r.map(i=>typeof i=="function"?(o,c)=>i(o.toProxy(),c):i)):t==="every"||t==="some"?r=>e[t]((i,...o)=>r(i.toProxy(),...o)):t==="root"?()=>e.root().toProxy():t==="nodes"?e.nodes.map(r=>r.toProxy()):t==="first"||t==="last"?e[t].toProxy():e[t]:e[t]},set(e,t,r){return e[t]===r||(e[t]=r,(t==="name"||t==="params"||t==="selector")&&e.markDirty()),!0}}}index(e){return typeof e=="number"?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let r=this.index(e),i=this.normalize(t,this.proxyOf.nodes[r]).reverse();r=this.index(e);for(let c of i)this.proxyOf.nodes.splice(r+1,0,c);let o;for(let c in this.indexes)o=this.indexes[c],r<o&&(this.indexes[c]=o+i.length);return this.markDirty(),this}insertBefore(e,t){let r=this.index(e),i=r===0?"prepend":!1,o=this.normalize(t,this.proxyOf.nodes[r],i).reverse();r=this.index(e);for(let u of o)this.proxyOf.nodes.splice(r,0,u);let c;for(let u in this.indexes)c=this.indexes[u],r<=c&&(this.indexes[u]=c+o.length);return this.markDirty(),this}normalize(e,t){if(typeof e=="string")e=Ey(vy(e).nodes);else if(typeof e>"u")e=[];else if(Array.isArray(e)){e=e.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type==="root"&&this.type!=="document"){e=e.nodes.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type)e=[e];else if(e.prop){if(typeof e.value>"u")throw new Error("Value field is missed in node creation");typeof e.value!="string"&&(e.value=String(e.value)),e=[new gy(e)]}else if(e.selector)e=[new qd(e)];else if(e.name)e=[new jd(e)];else if(e.text)e=[new yy(e)];else throw new Error("Unknown node type in node creation");return e.map(i=>(i[my]||wy.rebuild(i),i=i.proxyOf,i.parent&&i.parent.removeChild(i),i[py]&&Sy(i),typeof i.raws.before>"u"&&t&&typeof t.raws.before<"u"&&(i.raws.before=t.raws.before.replace(/\S/g,"")),i.parent=this.proxyOf,i))}prepend(...e){e=e.reverse();for(let t of e){let r=this.normalize(t,this.first,"prepend").reverse();for(let i of r)this.proxyOf.nodes.unshift(i);for(let i in this.indexes)this.indexes[i]=this.indexes[i]+r.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);let t;for(let r in this.indexes)t=this.indexes[r],t>=e&&(this.indexes[r]=t-1);return this.markDirty(),this}replaceValues(e,t,r){return r||(r=t,t={}),this.walkDecls(i=>{t.props&&!t.props.includes(i.prop)||t.fast&&!i.value.includes(t.fast)||(i.value=i.value.replace(e,r))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,r)=>{let i;try{i=e(t,r)}catch(o){throw t.addToError(o)}return i!==!1&&t.walk&&(i=t.walk(e)),i})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="atrule"&&e.test(r.name))return t(r,i)}):this.walk((r,i)=>{if(r.type==="atrule"&&r.name===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="atrule")return t(r,i)}))}walkComments(e){return this.walk((t,r)=>{if(t.type==="comment")return e(t,r)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="decl"&&e.test(r.prop))return t(r,i)}):this.walk((r,i)=>{if(r.type==="decl"&&r.prop===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="decl")return t(r,i)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="rule"&&e.test(r.selector))return t(r,i)}):this.walk((r,i)=>{if(r.type==="rule"&&r.selector===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="rule")return t(r,i)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};Nr.registerParse=n=>{vy=n};Nr.registerRule=n=>{qd=n};Nr.registerAtRule=n=>{jd=n};Nr.registerRoot=n=>{by=n};var Mn=Nr;Nr.default=Nr;Nr.rebuild=n=>{n.type==="atrule"?Object.setPrototypeOf(n,jd.prototype):n.type==="rule"?Object.setPrototypeOf(n,qd.prototype):n.type==="decl"?Object.setPrototypeOf(n,gy.prototype):n.type==="comment"?Object.setPrototypeOf(n,yy.prototype):n.type==="root"&&Object.setPrototypeOf(n,by.prototype),n[my]=!0,n.nodes&&n.nodes.forEach(e=>{Nr.rebuild(e)})};var L1=Mn,xy,Cy,Es=class extends L1{static{a(this,"Document2")}constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new xy(new Cy,this,e).stringify()}};Es.registerLazyResult=n=>{xy=n};Es.registerProcessor=n=>{Cy=n};var Kd=Es;Es.default=Es;var Zu=class{static{a(this,"Warning")}constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let r=t.node.rangeBy(t);this.line=r.start.line,this.column=r.start.column,this.endLine=r.end.line,this.endColumn=r.end.column}for(let r in t)this[r]=t[r]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}},My=Zu;Zu.default=Zu;var N1=My,Qu=class{static{a(this,"Result")}constructor(e,t,r){this.processor=e,this.messages=[],this.root=t,this.opts=r,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let r=new N1(e,t);return this.messages.push(r),r}warnings(){return this.messages.filter(e=>e.type==="warning")}get content(){return this.css}},Yd=Qu;Qu.default=Qu;var Ru=39,rg=34,ta=92,ng=47,ra=10,os=32,na=12,ia=9,sa=13,O1=91,_1=93,D1=40,k1=41,P1=123,F1=125,H1=59,$1=42,W1=58,B1=64,oa=/[\t\n\f\r "#'()/;[\\\]{}]/g,aa=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,V1=/.[\r\n"'(/\\]/,ig=/[\da-f]/i,U1=a(function(e,t={}){let r=e.css.valueOf(),i=t.ignoreErrors,o,c,u,d,f,p,g,y,b,E,C=r.length,w=0,M=[],N=[];function A(){return w}a(A,"position");function _(V){throw e.error("Unclosed "+V,w)}a(_,"unclosed");function z(){return N.length===0&&w>=C}a(z,"endOfFile");function G(V){if(N.length)return N.pop();if(w>=C)return;let j=V?V.ignoreUnclosed:!1;switch(o=r.charCodeAt(w),o){case ra:case os:case ia:case sa:case na:{c=w;do c+=1,o=r.charCodeAt(c);while(o===os||o===ra||o===ia||o===sa||o===na);E=["space",r.slice(w,c)],w=c-1;break}case O1:case _1:case P1:case F1:case W1:case H1:case k1:{let oe=String.fromCharCode(o);E=[oe,oe,w];break}case D1:{if(y=M.length?M.pop()[1]:"",b=r.charCodeAt(w+1),y==="url"&&b!==Ru&&b!==rg&&b!==os&&b!==ra&&b!==ia&&b!==na&&b!==sa){c=w;do{if(p=!1,c=r.indexOf(")",c+1),c===-1)if(i||j){c=w;break}else _("bracket");for(g=c;r.charCodeAt(g-1)===ta;)g-=1,p=!p}while(p);E=["brackets",r.slice(w,c+1),w,c],w=c}else c=r.indexOf(")",w+1),d=r.slice(w,c+1),c===-1||V1.test(d)?E=["(","(",w]:(E=["brackets",d,w,c],w=c);break}case Ru:case rg:{u=o===Ru?"'":'"',c=w;do{if(p=!1,c=r.indexOf(u,c+1),c===-1)if(i||j){c=w+1;break}else _("string");for(g=c;r.charCodeAt(g-1)===ta;)g-=1,p=!p}while(p);E=["string",r.slice(w,c+1),w,c],w=c;break}case B1:{oa.lastIndex=w+1,oa.test(r),oa.lastIndex===0?c=r.length-1:c=oa.lastIndex-2,E=["at-word",r.slice(w,c+1),w,c],w=c;break}case ta:{for(c=w,f=!0;r.charCodeAt(c+1)===ta;)c+=1,f=!f;if(o=r.charCodeAt(c+1),f&&o!==ng&&o!==os&&o!==ra&&o!==ia&&o!==sa&&o!==na&&(c+=1,ig.test(r.charAt(c)))){for(;ig.test(r.charAt(c+1));)c+=1;r.charCodeAt(c+1)===os&&(c+=1)}E=["word",r.slice(w,c+1),w,c],w=c;break}default:{o===ng&&r.charCodeAt(w+1)===$1?(c=r.indexOf("*/",w+2)+1,c===0&&(i||j?c=r.length:_("comment")),E=["comment",r.slice(w,c+1),w,c],w=c):(aa.lastIndex=w+1,aa.test(r),aa.lastIndex===0?c=r.length-1:c=aa.lastIndex-2,E=["word",r.slice(w,c+1),w,c],M.push(E),w=c);break}}return w++,E}a(G,"nextToken");function ee(V){N.push(V)}return a(ee,"back"),{back:ee,endOfFile:z,nextToken:G,position:A}},"tokenizer"),Ty=Mn,Oa=class extends Ty{static{a(this,"AtRule")}constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}},Xd=Oa;Oa.default=Oa;Ty.registerAtRule(Oa);var Iy=Mn,Ay,Ry,ai=class extends Iy{static{a(this,"Root")}constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,r){let i=super.normalize(e);if(t){if(r==="prepend")this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let o of i)o.raws.before=t.raws.before}return i}removeChild(e,t){let r=this.index(e);return!t&&r===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(e)}toResult(e={}){return new Ay(new Ry,this,e).stringify()}};ai.registerLazyResult=n=>{Ay=n};ai.registerProcessor=n=>{Ry=n};var Ls=ai;ai.default=ai;Iy.registerRoot(ai);var Ss={comma(n){return Ss.split(n,[","],!0)},space(n){let e=[" ",`
`,"	"];return Ss.split(n,e)},split(n,e,t){let r=[],i="",o=!1,c=0,u=!1,d="",f=!1;for(let p of n)f?f=!1:p==="\\"?f=!0:u?p===d&&(u=!1):p==='"'||p==="'"?(u=!0,d=p):p==="("?c+=1:p===")"?c>0&&(c-=1):c===0&&e.includes(p)&&(o=!0),o?(i!==""&&r.push(i.trim()),i="",o=!1):i+=p;return(t||i!=="")&&r.push(i.trim()),r}},Ly=Ss;Ss.default=Ss;var Ny=Mn,G1=Ly,_a=class extends Ny{static{a(this,"Rule")}constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return G1.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,r=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(r)}},Zd=_a;_a.default=_a;Ny.registerRule(_a);var z1=el,q1=U1,j1=rl,K1=Xd,Y1=Ls,sg=Zd,og={empty:!0,space:!0};function X1(n){for(let e=n.length-1;e>=0;e--){let t=n[e],r=t[3]||t[2];if(r)return r}}a(X1,"findLastWithPosition$1");var Z1=class{static{a(this,"Parser")}constructor(e){this.input=e,this.root=new Y1,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t=new K1;t.name=e[1].slice(1),t.name===""&&this.unnamedAtrule(t,e),this.init(t,e[2]);let r,i,o,c=!1,u=!1,d=[],f=[];for(;!this.tokenizer.endOfFile();){if(e=this.tokenizer.nextToken(),r=e[0],r==="("||r==="["?f.push(r==="("?")":"]"):r==="{"&&f.length>0?f.push("}"):r===f[f.length-1]&&f.pop(),f.length===0)if(r===";"){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}else if(r==="{"){u=!0;break}else if(r==="}"){if(d.length>0){for(o=d.length-1,i=d[o];i&&i[0]==="space";)i=d[--o];i&&(t.source.end=this.getPosition(i[3]||i[2]),t.source.end.offset++)}this.end(e);break}else d.push(e);else d.push(e);if(this.tokenizer.endOfFile()){c=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(d),d.length?(t.raws.afterName=this.spacesAndCommentsFromStart(d),this.raw(t,"params",d),c&&(e=d[d.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),u&&(t.nodes=[],this.current=t)}checkMissedSemicolon(e){let t=this.colon(e);if(t===!1)return;let r=0,i;for(let o=t-1;o>=0&&(i=e[o],!(i[0]!=="space"&&(r+=1,r===2)));o--);throw this.input.error("Missed semicolon",i[0]==="word"?i[3]+1:i[2])}colon(e){let t=0,r,i,o;for(let[c,u]of e.entries()){if(r=u,i=r[0],i==="("&&(t+=1),i===")"&&(t-=1),t===0&&i===":")if(!o)this.doubleColon(r);else{if(o[0]==="word"&&o[1]==="progid")continue;return c}o=r}return!1}comment(e){let t=new j1;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let r=e[1].slice(2,-2);if(/^\s*$/.test(r))t.text="",t.raws.left=r,t.raws.right="";else{let i=r.match(/^(\s*)([^]*\S)(\s*)$/);t.text=i[2],t.raws.left=i[1],t.raws.right=i[3]}}createTokenizer(){this.tokenizer=q1(this.input)}decl(e,t){let r=new z1;this.init(r,e[0][2]);let i=e[e.length-1];for(i[0]===";"&&(this.semicolon=!0,e.pop()),r.source.end=this.getPosition(i[3]||i[2]||X1(e)),r.source.end.offset++;e[0][0]!=="word";)e.length===1&&this.unknownWord(e),r.raws.before+=e.shift()[1];for(r.source.start=this.getPosition(e[0][2]),r.prop="";e.length;){let f=e[0][0];if(f===":"||f==="space"||f==="comment")break;r.prop+=e.shift()[1]}r.raws.between="";let o;for(;e.length;)if(o=e.shift(),o[0]===":"){r.raws.between+=o[1];break}else o[0]==="word"&&/\w/.test(o[1])&&this.unknownWord([o]),r.raws.between+=o[1];(r.prop[0]==="_"||r.prop[0]==="*")&&(r.raws.before+=r.prop[0],r.prop=r.prop.slice(1));let c=[],u;for(;e.length&&(u=e[0][0],!(u!=="space"&&u!=="comment"));)c.push(e.shift());this.precheckMissedSemicolon(e);for(let f=e.length-1;f>=0;f--){if(o=e[f],o[1].toLowerCase()==="!important"){r.important=!0;let p=this.stringFrom(e,f);p=this.spacesFromEnd(e)+p,p!==" !important"&&(r.raws.important=p);break}else if(o[1].toLowerCase()==="important"){let p=e.slice(0),g="";for(let y=f;y>0;y--){let b=p[y][0];if(g.trim().indexOf("!")===0&&b!=="space")break;g=p.pop()[1]+g}g.trim().indexOf("!")===0&&(r.important=!0,r.raws.important=g,e=p)}if(o[0]!=="space"&&o[0]!=="comment")break}e.some(f=>f[0]!=="space"&&f[0]!=="comment")&&(r.raws.between+=c.map(f=>f[1]).join(""),c=[]),this.raw(r,"value",c.concat(e),t),r.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new sg;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&t.type==="rule"&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}other(e){let t=!1,r=null,i=!1,o=null,c=[],u=e[1].startsWith("--"),d=[],f=e;for(;f;){if(r=f[0],d.push(f),r==="("||r==="[")o||(o=f),c.push(r==="("?")":"]");else if(u&&i&&r==="{")o||(o=f),c.push("}");else if(c.length===0)if(r===";")if(i){this.decl(d,u);return}else break;else if(r==="{"){this.rule(d);return}else if(r==="}"){this.tokenizer.back(d.pop()),t=!0;break}else r===":"&&(i=!0);else r===c[c.length-1]&&(c.pop(),c.length===0&&(o=null));f=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),c.length>0&&this.unclosedBracket(o),t&&i){if(!u)for(;d.length&&(f=d[d.length-1][0],!(f!=="space"&&f!=="comment"));)this.tokenizer.back(d.pop());this.decl(d,u)}else this.unknownWord(d)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e);break}this.endFile()}precheckMissedSemicolon(){}raw(e,t,r,i){let o,c,u=r.length,d="",f=!0,p,g;for(let y=0;y<u;y+=1)o=r[y],c=o[0],c==="space"&&y===u-1&&!i?f=!1:c==="comment"?(g=r[y-1]?r[y-1][0]:"empty",p=r[y+1]?r[y+1][0]:"empty",!og[g]&&!og[p]?d.slice(-1)===","?f=!1:d+=o[1]:f=!1):d+=o[1];if(!f){let y=r.reduce((b,E)=>b+E[1],"");e.raws[t]={raw:y,value:d}}e[t]=d}rule(e){e.pop();let t=new sg;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],!(t!=="space"&&t!=="comment"));)r=e.pop()[1]+r;return r}spacesAndCommentsFromStart(e){let t,r="";for(;e.length&&(t=e[0][0],!(t!=="space"&&t!=="comment"));)r+=e.shift()[1];return r}spacesFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],t==="space");)r=e.pop()[1]+r;return r}stringFrom(e,t){let r="";for(let i=t;i<e.length;i++)r+=e[i][1];return e.splice(t,e.length-t),r}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}},Q1=Z1,J1=Mn,eA=Q1,tA=tl;function Da(n,e){let t=new tA(n,e),r=new eA(t);try{r.parse()}catch(i){throw i}return r.root}a(Da,"parse$3$1");var Qd=Da;Da.default=Da;J1.registerParse(Da);var{isClean:lr,my:rA}=Rs,nA=fy,iA=Qa,sA=Mn,oA=Kd;var ag=Yd,aA=Qd,lA=Ls,cA={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},uA={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},dA={Once:!0,postcssPlugin:!0,prepare:!0},li=0;function as(n){return typeof n=="object"&&typeof n.then=="function"}a(as,"isPromise$1");function Oy(n){let e=!1,t=cA[n.type];return n.type==="decl"?e=n.prop.toLowerCase():n.type==="atrule"&&(e=n.name.toLowerCase()),e&&n.append?[t,t+"-"+e,li,t+"Exit",t+"Exit-"+e]:e?[t,t+"-"+e,t+"Exit",t+"Exit-"+e]:n.append?[t,li,t+"Exit"]:[t,t+"Exit"]}a(Oy,"getEvents$1");function lg(n){let e;return n.type==="document"?e=["Document",li,"DocumentExit"]:n.type==="root"?e=["Root",li,"RootExit"]:e=Oy(n),{eventIndex:0,events:e,iterator:0,node:n,visitorIndex:0,visitors:[]}}a(lg,"toStack$1");function Ju(n){return n[lr]=!1,n.nodes&&n.nodes.forEach(e=>Ju(e)),n}a(Ju,"cleanMarks$1");var ed={},ci=class _y{static{a(this,"LazyResult")}constructor(e,t,r){this.stringified=!1,this.processed=!1;let i;if(typeof t=="object"&&t!==null&&(t.type==="root"||t.type==="document"))i=Ju(t);else if(t instanceof _y||t instanceof ag)i=Ju(t.root),t.map&&(typeof r.map>"u"&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=t.map);else{let o=aA;r.syntax&&(o=r.syntax.parse),r.parser&&(o=r.parser),o.parse&&(o=o.parse);try{i=o(t,r)}catch(c){this.processed=!0,this.error=c}i&&!i[rA]&&sA.rebuild(i)}this.result=new ag(e,i,r),this.helpers={...ed,postcss:ed,result:this.result},this.plugins=this.processor.plugins.map(o=>typeof o=="object"&&o.prepare?{...o,...o.prepare(this.result)}:o)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let r=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,e.name==="CssSyntaxError"&&!e.plugin?(e.plugin=r.postcssPlugin,e.setMessage()):r.postcssVersion}catch(i){console&&console.error&&console.error(i)}return e}prepareVisitors(){this.listeners={};let e=a((t,r,i)=>{this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push([t,i])},"add");for(let t of this.plugins)if(typeof t=="object")for(let r in t){if(!uA[r]&&/^[A-Z]/.test(r))throw new Error(`Unknown event ${r} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!dA[r])if(typeof t[r]=="object")for(let i in t[r])i==="*"?e(t,r,t[r][i]):e(t,r+"-"+i.toLowerCase(),t[r][i]);else typeof t[r]=="function"&&e(t,r,t[r])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],r=this.runOnRoot(t);if(as(r))try{await r}catch(i){throw this.handleError(i)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[lr];){e[lr]=!0;let t=[lg(e)];for(;t.length>0;){let r=this.visitTick(t);if(as(r))try{await r}catch(i){let o=t[t.length-1].node;throw this.handleError(i,o)}}}if(this.listeners.OnceExit)for(let[t,r]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if(e.type==="document"){let i=e.nodes.map(o=>r(o,this.helpers));await Promise.all(i)}else await r(e,this.helpers)}catch(i){throw this.handleError(i)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if(typeof e=="object"&&e.Once){if(this.result.root.type==="document"){let t=this.result.root.nodes.map(r=>e.Once(r,this.helpers));return as(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}else if(typeof e=="function")return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=iA;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let i=new nA(t,this.result.root,this.result.opts).generate();return this.result.css=i[0],this.result.map=i[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){let t=this.runOnRoot(e);if(as(t))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[lr];)e[lr]=!0,this.walkSync(e);if(this.listeners.OnceExit)if(e.type==="document")for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[r,i]of e){this.result.lastPlugin=r;let o;try{o=i(t,this.helpers)}catch(c){throw this.handleError(c,t.proxyOf)}if(t.type!=="root"&&t.type!=="document"&&!t.parent)return!0;if(as(o))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:r,visitors:i}=t;if(r.type!=="root"&&r.type!=="document"&&!r.parent){e.pop();return}if(i.length>0&&t.visitorIndex<i.length){let[c,u]=i[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===i.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=c;try{return u(r.toProxy(),this.helpers)}catch(d){throw this.handleError(d,r)}}if(t.iterator!==0){let c=t.iterator,u;for(;u=r.nodes[r.indexes[c]];)if(r.indexes[c]+=1,!u[lr]){u[lr]=!0,e.push(lg(u));return}t.iterator=0,delete r.indexes[c]}let o=t.events;for(;t.eventIndex<o.length;){let c=o[t.eventIndex];if(t.eventIndex+=1,c===li){r.nodes&&r.nodes.length&&(r[lr]=!0,t.iterator=r.getIterator());return}else if(this.listeners[c]){t.visitors=this.listeners[c];return}}e.pop()}walkSync(e){e[lr]=!0;let t=Oy(e);for(let r of t)if(r===li)e.nodes&&e.each(i=>{i[lr]||this.walkSync(i)});else{let i=this.listeners[r];if(i&&this.visitSync(i,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};ci.registerPostcss=n=>{ed=n};var Dy=ci;ci.default=ci;lA.registerLazyResult(ci);oA.registerLazyResult(ci);var hA=fy,fA=Qa;var pA=Qd,mA=Yd,td=class{static{a(this,"NoWorkResult")}constructor(e,t,r){t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=r,this._map=void 0;let i,o=fA;this.result=new mA(this._processor,i,this._opts),this.result.css=t;let c=this;Object.defineProperty(this.result,"root",{get(){return c.root}});let u=new hA(o,i,this._opts,t);if(u.isMap()){let[d,f]=u.generate();d&&(this.result.css=d),f&&(this.result.map=f)}else u.clearAnnotation(),this.result.css=u.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=pA;try{e=t(this._css,this._opts)}catch(r){this.error=r}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}},gA=td;td.default=td;var yA=gA,vA=Dy,bA=Kd,EA=Ls,ws=class{static{a(this,"Processor")}constructor(e=[]){this.version="8.4.38",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let r of e)if(r.postcss===!0?r=r():r.postcss&&(r=r.postcss),typeof r=="object"&&Array.isArray(r.plugins))t=t.concat(r.plugins);else if(typeof r=="object"&&r.postcssPlugin)t.push(r);else if(typeof r=="function")t.push(r);else if(!(typeof r=="object"&&(r.parse||r.stringify)))throw new Error(r+" is not a PostCSS plugin");return t}process(e,t={}){return!this.plugins.length&&!t.parser&&!t.stringifier&&!t.syntax?new yA(this,e,t):new vA(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}},SA=ws;ws.default=ws;EA.registerProcessor(ws);bA.registerProcessor(ws);var wA=el,xA=ly,CA=rl,MA=Xd,TA=tl,IA=Ls,AA=Zd;function xs(n,e){if(Array.isArray(n))return n.map(i=>xs(i));let{inputs:t,...r}=n;if(t){e=[];for(let i of t){let o={...i,__proto__:TA.prototype};o.map&&(o.map={...o.map,__proto__:xA.prototype}),e.push(o)}}if(r.nodes&&(r.nodes=n.nodes.map(i=>xs(i,e))),r.source){let{inputId:i,...o}=r.source;r.source=o,i!=null&&(r.source.input=e[i])}if(r.type==="root")return new IA(r);if(r.type==="decl")return new wA(r);if(r.type==="rule")return new AA(r);if(r.type==="comment")return new CA(r);if(r.type==="atrule")return new MA(r);throw new Error("Unknown node type: "+n.type)}a(xs,"fromJSON$1$1");var RA=xs;xs.default=xs;var LA=zd,ky=el,NA=Dy,OA=Mn,Jd=SA,_A=Qa,DA=RA,Py=Kd,kA=My,Fy=rl,Hy=Xd,PA=Yd,FA=tl,HA=Qd,$A=Ly,$y=Zd,Wy=Ls,WA=Ja;function Re(...n){return n.length===1&&Array.isArray(n[0])&&(n=n[0]),new Jd(n)}a(Re,"postcss$3");Re.plugin=a(function(e,t){let r=!1;function i(...c){console&&console.warn&&!r&&(r=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+`: \u91CC\u9762 postcss.plugin \u88AB\u5F03\u7528. \u8FC1\u79FB\u6307\u5357:
https://www.w3ctech.com/topic/2226`));let u=t(...c);return u.postcssPlugin=e,u.postcssVersion=new Jd().version,u}a(i,"creator");let o;return Object.defineProperty(i,"postcss",{get(){return o||(o=i()),o}}),i.process=function(c,u,d){return Re([i(d)]).process(c,u)},i},"plugin");Re.stringify=_A;Re.parse=HA;Re.fromJSON=DA;Re.list=$A;Re.comment=n=>new Fy(n);Re.atRule=n=>new Hy(n);Re.decl=n=>new ky(n);Re.rule=n=>new $y(n);Re.root=n=>new Wy(n);Re.document=n=>new Py(n);Re.CssSyntaxError=LA;Re.Declaration=ky;Re.Container=OA;Re.Processor=Jd;Re.Document=Py;Re.Comment=Fy;Re.Warning=kA;Re.AtRule=Hy;Re.Result=PA;Re.Input=FA;Re.Rule=$y;Re.Root=Wy;Re.Node=WA;NA.registerPostcss(Re);var BA=Re;Re.default=Re;var Ve=JI(BA);Ve.stringify;Ve.fromJSON;Ve.plugin;Ve.parse;Ve.list;Ve.document;Ve.comment;Ve.atRule;Ve.rule;Ve.decl;Ve.root;Ve.CssSyntaxError;Ve.Declaration;Ve.Container;Ve.Processor;Ve.Document;Ve.Comment;Ve.Warning;Ve.AtRule;Ve.Result;Ve.Input;Ve.Rule;Ve.Root;Ve.Node;var cg={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function VA(n){let e=cg[n.tagName]?cg[n.tagName]:n.tagName;return e==="link"&&n.attributes._cssText&&(e="style"),e}a(VA,"getTagName");function nl(n,e){let t=e?.stylesWithHoverClass.get(n);if(t)return t;let r=n;try{r=Ve([ZI,QI]).process(n).css}catch(i){console.warn("Failed to adapt css for replay",i)}return e?.stylesWithHoverClass.set(n,r),r}a(nl,"adaptCssForReplay");function ug(){return{stylesWithHoverClass:new Map}}a(ug,"createCache");function UA(n,e,t,r){let i=[];for(let d of n.childNodes)d.type===he.Text&&i.push(d);let o=e.split("/* rr_split */");for(;o.length>1&&o.length>i.length;)o.splice(-2,2,o.slice(-2).join(""));let c="";t&&(c=nl(o.join(""),r));let u=0;for(let d=0;d<i.length&&d!==o.length;d++){let f=i[d];if(!t)f.textContent=o[d];else if(d<o.length-1){let p=u,g=o[d+1].length;g=Math.min(g,30);let y=!1;for(;g>2;g--){let b=o[d+1].substring(0,g),E=c.substring(u).indexOf(b);if(y=E!==-1,y){p+=E;break}}y||(p+=o[d].length),f.textContent=c.substring(u,p),u=p}else f.textContent=c.substring(u)}}a(UA,"applyCssSplits");function GA(n,e,t,r){let{doc:i,hackCss:o,cache:c}=r;n.childNodes.length?UA(n,t,o,c):(o&&(t=nl(t,c)),e.appendChild(i.createTextNode(t)))}a(GA,"buildStyleNode");function zA(n,e){var t;let{doc:r,hackCss:i,cache:o}=e;switch(n.type){case he.Document:return r.implementation.createDocument(null,"",null);case he.DocumentType:return r.implementation.createDocumentType(n.name||"html",n.publicId,n.systemId);case he.Element:{let c=VA(n),u;n.isSVG?u=r.createElementNS("http://www.w3.org/2000/svg",c):(n.isCustom&&((t=r.defaultView)!=null&&t.customElements)&&!r.defaultView.customElements.get(n.tagName)&&r.defaultView.customElements.define(n.tagName,class extends r.defaultView.HTMLElement{}),u=r.createElement(c));let d={};for(let f in n.attributes){if(!Object.prototype.hasOwnProperty.call(n.attributes,f))continue;let p=n.attributes[f];if(!(c==="option"&&f==="selected"&&p===!1)&&p!==null){if(p===!0&&(p=""),f.startsWith("rr_")){d[f]=p;continue}if(typeof p=="string"){if(c==="style"&&f==="_cssText"){GA(n,u,p,e);continue}else if(c==="textarea"&&f==="value"){u.appendChild(r.createTextNode(p)),n.childNodes=[];continue}}try{if(n.isSVG&&f==="xlink:href")u.setAttributeNS("http://www.w3.org/1999/xlink",f,p.toString());else if(f==="onload"||f==="onclick"||f.substring(0,7)==="onmouse")u.setAttribute("_"+f,p.toString());else if(c==="meta"&&n.attributes["http-equiv"]==="Content-Security-Policy"&&f==="content"){u.setAttribute("csp-content",p.toString());continue}else c==="link"&&(n.attributes.rel==="preload"&&n.attributes.as==="script"||n.attributes.rel==="modulepreload")||c==="link"&&n.attributes.rel==="prefetch"&&typeof n.attributes.href=="string"&&Vd(n.attributes.href)==="js"||(c==="img"&&n.attributes.srcset&&n.attributes.rr_dataURL?u.setAttribute("rrweb-original-srcset",n.attributes.srcset):u.setAttribute(f,p.toString()))}catch{}}}for(let f in d){let p=d[f];if(c==="canvas"&&f==="rr_dataURL"){let g=r.createElement("img");g.onload=()=>{let y=u.getContext("2d");y&&y.drawImage(g,0,0,g.width,g.height)},g.src=p.toString(),u.RRNodeType&&(u.rr_dataURL=p.toString())}else if(c==="img"&&f==="rr_dataURL"){let g=u;g.currentSrc.startsWith("data:")||(g.setAttribute("rrweb-original-src",n.attributes.src),g.src=p.toString())}if(f==="rr_width")u.style.setProperty("width",p.toString());else if(f==="rr_height")u.style.setProperty("height",p.toString());else if(f==="rr_mediaCurrentTime"&&typeof p=="number")u.currentTime=p;else if(f==="rr_mediaState")switch(p){case"played":u.play().catch(g=>console.warn("media playback error",g));break;case"paused":u.pause();break}else f==="rr_mediaPlaybackRate"&&typeof p=="number"?u.playbackRate=p:f==="rr_mediaMuted"&&typeof p=="boolean"?u.muted=p:f==="rr_mediaLoop"&&typeof p=="boolean"?u.loop=p:f==="rr_mediaVolume"&&typeof p=="number"?u.volume=p:f==="rr_open_mode"&&u.setAttribute("rr_open_mode",p)}if(n.isShadowHost)if(!u.shadowRoot)u.attachShadow({mode:"open"});else for(;u.shadowRoot.firstChild;)u.shadowRoot.removeChild(u.shadowRoot.firstChild);return u}case he.Text:return n.isStyle&&i?r.createTextNode(nl(n.textContent,o)):r.createTextNode(n.textContent);case he.CDATA:return r.createCDATASection(n.textContent);case he.Comment:return r.createComment(n.textContent);default:return null}}a(zA,"buildNode");function ms(n,e){let{doc:t,mirror:r,skipChild:i=!1,hackCss:o=!0,afterAppend:c,cache:u}=e;if(r.has(n.id)){let f=r.getNode(n.id),p=r.getMeta(f);if(TI(p,n))return r.getNode(n.id)}let d=zA(n,{doc:t,hackCss:o,cache:u});if(!d)return null;if(n.rootId&&r.getNode(n.rootId)!==t&&r.replace(n.rootId,t),n.type===he.Document&&(t.close(),t.open(),n.compatMode==="BackCompat"&&n.childNodes&&n.childNodes[0].type!==he.DocumentType&&(n.childNodes[0].type===he.Element&&"xmlns"in n.childNodes[0].attributes&&n.childNodes[0].attributes.xmlns==="http://www.w3.org/1999/xhtml"?t.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'):t.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">')),d=t),r.add(d,n),(n.type===he.Document||n.type===he.Element)&&!i)for(let f of n.childNodes){let p=ms(f,{doc:t,mirror:r,skipChild:!1,hackCss:o,afterAppend:c,cache:u});if(!p){console.warn("Failed to rebuild",f);continue}if(f.isShadow&&Bd(d)&&d.shadowRoot)d.shadowRoot.appendChild(p);else if(n.type===he.Document&&f.type==he.Element){let g=p,y=null;g.childNodes.forEach(b=>{b.nodeName==="BODY"&&(y=b)}),y?(g.removeChild(y),d.appendChild(p),g.appendChild(y)):d.appendChild(p)}else d.appendChild(p);c&&c(p,f.id)}return d}a(ms,"buildNodeWithSN");function qA(n,e){function t(r){e(r)}a(t,"walk");for(let r of n.getIds())n.has(r)&&t(n.getNode(r))}a(qA,"visit");function jA(n,e){let t=e.getMeta(n);if(t?.type!==he.Element)return;let r=n;for(let i in t.attributes){if(!(Object.prototype.hasOwnProperty.call(t.attributes,i)&&i.startsWith("rr_")))continue;let o=t.attributes[i];i==="rr_scrollLeft"&&(r.scrollLeft=o),i==="rr_scrollTop"&&(r.scrollTop=o)}}a(jA,"handleScroll");function KA(n,e){let{doc:t,onVisit:r,hackCss:i=!0,afterAppend:o,cache:c,mirror:u=new vs}=e,d=ms(n,{doc:t,mirror:u,skipChild:!1,hackCss:i,afterAppend:o,cache:c});return qA(u,f=>{r&&r(f),jA(f,u)}),d}a(KA,"rebuild");var YA=Object.defineProperty,XA=a((n,e,t)=>e in n?YA(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,"__defNormalProp2"),Z=a((n,e,t)=>XA(n,typeof e!="symbol"?e+"":e,t),"__publicField2"),ZA=Object.defineProperty,QA=a((n,e,t)=>e in n?ZA(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,"__defNormalProp22"),dg=a((n,e,t)=>QA(n,typeof e!="symbol"?e+"":e,t),"__publicField22"),JA=class{static{a(this,"Mirror2")}constructor(){dg(this,"idNodeMap",new Map),dg(this,"nodeMetaMap",new WeakMap)}getId(e){var t;return e?((t=this.getMeta(e))==null?void 0:t.id)??-1:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){let t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){let r=t.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,t)}replace(e,t){let r=this.getNode(e);if(r){let i=this.nodeMetaMap.get(r);i&&this.nodeMetaMap.set(t,i)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function eR(){return new JA}a(eR,"createMirror$1");function tR(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}a(tR,"getDefaultExportFromCjs");function rR(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=a(function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)},"a22");t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:a(function(){return n[r]},"get")})}),t}a(rR,"getAugmentedNamespace");var eh={exports:{}},Be=String,By=a(function(){return{isColorSupported:!1,reset:Be,bold:Be,dim:Be,italic:Be,underline:Be,inverse:Be,hidden:Be,strikethrough:Be,black:Be,red:Be,green:Be,yellow:Be,blue:Be,magenta:Be,cyan:Be,white:Be,gray:Be,bgBlack:Be,bgRed:Be,bgGreen:Be,bgYellow:Be,bgBlue:Be,bgMagenta:Be,bgCyan:Be,bgWhite:Be}},"create");eh.exports=By();eh.exports.createColors=By;var nR=eh.exports,iR={},sR=Object.freeze(Object.defineProperty({__proto__:null,default:iR},Symbol.toStringTag,{value:"Module"})),er=rR(sR),hg=nR,fg=er,rd=class Vy extends Error{static{a(this,"CssSyntaxError2")}constructor(e,t,r,i,o,c){super(e),this.name="CssSyntaxError",this.reason=e,o&&(this.file=o),i&&(this.source=i),c&&(this.plugin=c),typeof t<"u"&&typeof r<"u"&&(typeof t=="number"?(this.line=t,this.column=r):(this.line=t.line,this.column=t.column,this.endLine=r.line,this.endColumn=r.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,Vy)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;e==null&&(e=hg.isColorSupported),fg&&e&&(t=fg(t));let r=t.split(/\r?\n/),i=Math.max(this.line-3,0),o=Math.min(this.line+2,r.length),c=String(o).length,u,d;if(e){let{bold:f,gray:p,red:g}=hg.createColors(!0);u=a(y=>f(g(y)),"mark"),d=a(y=>p(y),"aside")}else u=d=a(f=>f,"aside");return r.slice(i,o).map((f,p)=>{let g=i+1+p,y=" "+(" "+g).slice(-c)+" | ";if(g===this.line){let b=d(y.replace(/\d/g," "))+f.slice(0,this.column-1).replace(/[^\t]/g," ");return u(">")+d(y)+f+`
 `+b+u("^")}return" "+d(y)+f}).join(`
`)}toString(){let e=this.showSourceCode();return e&&(e=`

`+e+`
`),this.name+": "+this.message+e}},th=rd;rd.default=rd;var Ns={};Ns.isClean=Symbol("isClean");Ns.my=Symbol("my");var pg={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function oR(n){return n[0].toUpperCase()+n.slice(1)}a(oR,"capitalize");var nd=class{static{a(this,"Stringifier2")}constructor(e){this.builder=e}atrule(e,t){let r="@"+e.name,i=e.params?this.rawValue(e,"params"):"";if(typeof e.raws.afterName<"u"?r+=e.raws.afterName:i&&(r+=" "),e.nodes)this.block(e,r+i);else{let o=(e.raws.between||"")+(t?";":"");this.builder(r+i+o,e)}}beforeAfter(e,t){let r;e.type==="decl"?r=this.raw(e,null,"beforeDecl"):e.type==="comment"?r=this.raw(e,null,"beforeComment"):t==="before"?r=this.raw(e,null,"beforeRule"):r=this.raw(e,null,"beforeClose");let i=e.parent,o=0;for(;i&&i.type!=="root";)o+=1,i=i.parent;if(r.includes(`
`)){let c=this.raw(e,null,"indent");if(c.length)for(let u=0;u<o;u++)r+=c}return r}block(e,t){let r=this.raw(e,"between","beforeOpen");this.builder(t+r+"{",e,"start");let i;e.nodes&&e.nodes.length?(this.body(e),i=this.raw(e,"after")):i=this.raw(e,"after","emptyBody"),i&&this.builder(i),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&e.nodes[t].type==="comment";)t-=1;let r=this.raw(e,"semicolon");for(let i=0;i<e.nodes.length;i++){let o=e.nodes[i],c=this.raw(o,"before");c&&this.builder(c),this.stringify(o,t!==i||r)}}comment(e){let t=this.raw(e,"left","commentLeft"),r=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+r+"*/",e)}decl(e,t){let r=this.raw(e,"between","colon"),i=e.prop+r+this.rawValue(e,"value");e.important&&(i+=e.raws.important||" !important"),t&&(i+=";"),this.builder(i,e)}document(e){this.body(e)}raw(e,t,r){let i;if(r||(r=t),t&&(i=e.raws[t],typeof i<"u"))return i;let o=e.parent;if(r==="before"&&(!o||o.type==="root"&&o.first===e||o&&o.type==="document"))return"";if(!o)return pg[r];let c=e.root();if(c.rawCache||(c.rawCache={}),typeof c.rawCache[r]<"u")return c.rawCache[r];if(r==="before"||r==="after")return this.beforeAfter(e,r);{let u="raw"+oR(r);this[u]?i=this[u](c,e):c.walk(d=>{if(i=d.raws[t],typeof i<"u")return!1})}return typeof i>"u"&&(i=pg[r]),c.rawCache[r]=i,i}rawBeforeClose(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length>0&&typeof r.raws.after<"u")return t=r.raws.after,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let r;return e.walkComments(i=>{if(typeof i.raws.before<"u")return r=i.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(t,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeDecl(e,t){let r;return e.walkDecls(i=>{if(typeof i.raws.before<"u")return r=i.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(t,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeOpen(e){let t;return e.walk(r=>{if(r.type!=="decl"&&(t=r.raws.between,typeof t<"u"))return!1}),t}rawBeforeRule(e){let t;return e.walk(r=>{if(r.nodes&&(r.parent!==e||e.first!==r)&&typeof r.raws.before<"u")return t=r.raws.before,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls(r=>{if(typeof r.raws.between<"u")return t=r.raws.between.replace(/[^\s:]/g,""),!1}),t}rawEmptyBody(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length===0&&(t=r.raws.after,typeof t<"u"))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(r=>{let i=r.parent;if(i&&i!==e&&i.parent&&i.parent===e&&typeof r.raws.before<"u"){let o=r.raws.before.split(`
`);return t=o[o.length-1],t=t.replace(/\S/g,""),!1}}),t}rawSemicolon(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length&&r.last.type==="decl"&&(t=r.raws.semicolon,typeof t<"u"))return!1}),t}rawValue(e,t){let r=e[t],i=e.raws[t];return i&&i.value===r?i.raw:r}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}},Uy=nd;nd.default=nd;var aR=Uy;function id(n,e){new aR(e).stringify(n)}a(id,"stringify$4");var il=id;id.default=id;var{isClean:la,my:lR}=Ns,cR=th,uR=Uy,dR=il;function sd(n,e){let t=new n.constructor;for(let r in n){if(!Object.prototype.hasOwnProperty.call(n,r)||r==="proxyCache")continue;let i=n[r],o=typeof i;r==="parent"&&o==="object"?e&&(t[r]=e):r==="source"?t[r]=i:Array.isArray(i)?t[r]=i.map(c=>sd(c,t)):(o==="object"&&i!==null&&(i=sd(i)),t[r]=i)}return t}a(sd,"cloneNode");var od=class{static{a(this,"Node3")}constructor(e={}){this.raws={},this[la]=!1,this[lR]=!0;for(let t in e)if(t==="nodes"){this.nodes=[];for(let r of e[t])typeof r.clone=="function"?this.append(r.clone()):this.append(r)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=sd(this);for(let r in e)t[r]=e[r];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:r,start:i}=this.rangeBy(t);return this.source.input.error(e,{column:i.column,line:i.line},{column:r.column,line:r.line},t)}return new cR(e)}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:t==="root"?()=>e.root().toProxy():e[t]},set(e,t,r){return e[t]===r||(e[t]=r,(t==="prop"||t==="value"||t==="name"||t==="params"||t==="important"||t==="text")&&e.markDirty()),!0}}}markDirty(){if(this[la]){this[la]=!1;let e=this;for(;e=e.parent;)e[la]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let r=this.source.start;if(e.index)r=this.positionInside(e.index,t);else if(e.word){t=this.toString();let i=t.indexOf(e.word);i!==-1&&(r=this.positionInside(i,t))}return r}positionInside(e,t){let r=t||this.toString(),i=this.source.start.column,o=this.source.start.line;for(let c=0;c<e;c++)r[c]===`
`?(i=1,o+=1):i+=1;return{column:i,line:o}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},r=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let i=this.toString(),o=i.indexOf(e.word);o!==-1&&(t=this.positionInside(o,i),r=this.positionInside(o+e.word.length,i))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?r={column:e.end.column,line:e.end.line}:typeof e.endIndex=="number"?r=this.positionInside(e.endIndex):e.index&&(r=this.positionInside(e.index+1));return(r.line<t.line||r.line===t.line&&r.column<=t.column)&&(r={column:t.column+1,line:t.line}),{end:r,start:t}}raw(e,t){return new uR().raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,r=!1;for(let i of e)i===this?r=!0:r?(this.parent.insertAfter(t,i),t=i):this.parent.insertBefore(t,i);r||this.remove()}return this}root(){let e=this;for(;e.parent&&e.parent.type!=="document";)e=e.parent;return e}toJSON(e,t){let r={},i=t==null;t=t||new Map;let o=0;for(let c in this){if(!Object.prototype.hasOwnProperty.call(this,c)||c==="parent"||c==="proxyCache")continue;let u=this[c];if(Array.isArray(u))r[c]=u.map(d=>typeof d=="object"&&d.toJSON?d.toJSON(null,t):d);else if(typeof u=="object"&&u.toJSON)r[c]=u.toJSON(null,t);else if(c==="source"){let d=t.get(u.input);d==null&&(d=o,t.set(u.input,o),o++),r[c]={end:u.end,inputId:d,start:u.start}}else r[c]=u}return i&&(r.inputs=[...t.keys()].map(c=>c.toJSON())),r}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=dR){e.stringify&&(e=e.stringify);let t="";return e(this,r=>{t+=r}),t}warn(e,t,r){let i={node:this};for(let o in r)i[o]=r[o];return e.warn(t,i)}get proxyOf(){return this}},sl=od;od.default=od;var hR=sl,ad=class extends hR{static{a(this,"Declaration2")}constructor(e){e&&typeof e.value<"u"&&typeof e.value!="string"&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}},ol=ad;ad.default=ad;var fR="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",pR=a((n,e=21)=>(t=e)=>{let r="",i=t;for(;i--;)r+=n[Math.random()*n.length|0];return r},"customAlphabet"),mR=a((n=21)=>{let e="",t=n;for(;t--;)e+=fR[Math.random()*64|0];return e},"nanoid$1"),gR={nanoid:mR,customAlphabet:pR},{SourceMapConsumer:mg,SourceMapGenerator:gg}=er,{existsSync:yR,readFileSync:vR}=er,{dirname:Lu,join:bR}=er;function ER(n){return Buffer?Buffer.from(n,"base64").toString():window.atob(n)}a(ER,"fromBase64");var ld=class{static{a(this,"PreviousMap2")}constructor(e,t){if(t.map===!1)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let r=t.map?t.map.prev:void 0,i=this.loadMap(t.from,r);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=Lu(this.mapFile)),i&&(this.text=i)}consumer(){return this.consumerCache||(this.consumerCache=new mg(this.text)),this.consumerCache}decodeInline(e){let t=/^data:application\/json;charset=utf-?8;base64,/,r=/^data:application\/json;base64,/,i=/^data:application\/json;charset=utf-?8,/,o=/^data:application\/json,/;if(i.test(e)||o.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(t.test(e)||r.test(e))return ER(e.substr(RegExp.lastMatch.length));let c=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+c)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return typeof e!="object"?!1:typeof e.mappings=="string"||typeof e._mappings=="string"||Array.isArray(e.sections)}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let r=e.lastIndexOf(t.pop()),i=e.indexOf("*/",r);r>-1&&i>-1&&(this.annotation=this.getAnnotationURL(e.substring(r,i)))}loadFile(e){if(this.root=Lu(e),yR(e))return this.mapFile=e,vR(e,"utf-8").toString().trim()}loadMap(e,t){if(t===!1)return!1;if(t){if(typeof t=="string")return t;if(typeof t=="function"){let r=t(e);if(r){let i=this.loadFile(r);if(!i)throw new Error("Unable to load previous source map: "+r.toString());return i}}else{if(t instanceof mg)return gg.fromSourceMap(t).toString();if(t instanceof gg)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let r=this.annotation;return e&&(r=bR(Lu(e),r)),this.loadFile(r)}}}startWith(e,t){return e?e.substr(0,t.length)===t:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}},Gy=ld;ld.default=ld;var{SourceMapConsumer:SR,SourceMapGenerator:wR}=er,{fileURLToPath:yg,pathToFileURL:ca}=er,{isAbsolute:cd,resolve:ud}=er,{nanoid:xR}=gR,Nu=er,vg=th,CR=Gy,Ou=Symbol("fromOffsetCache"),MR=!!(SR&&wR),bg=!!(ud&&cd),ka=class{static{a(this,"Input2")}constructor(e,t={}){if(e===null||typeof e>"u"||typeof e=="object"&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),this.css[0]==="\uFEFF"||this.css[0]==="\uFFFE"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!bg||/^\w+:\/\//.test(t.from)||cd(t.from)?this.file=t.from:this.file=ud(t.from)),bg&&MR){let r=new CR(this.css,t);if(r.text){this.map=r;let i=r.consumer().file;!this.file&&i&&(this.file=this.mapResolve(i))}}this.file||(this.id="<input css "+xR(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,r,i={}){let o,c,u;if(t&&typeof t=="object"){let f=t,p=r;if(typeof f.offset=="number"){let g=this.fromOffset(f.offset);t=g.line,r=g.col}else t=f.line,r=f.column;if(typeof p.offset=="number"){let g=this.fromOffset(p.offset);c=g.line,u=g.col}else c=p.line,u=p.column}else if(!r){let f=this.fromOffset(t);t=f.line,r=f.col}let d=this.origin(t,r,c,u);return d?o=new vg(e,d.endLine===void 0?d.line:{column:d.column,line:d.line},d.endLine===void 0?d.column:{column:d.endColumn,line:d.endLine},d.source,d.file,i.plugin):o=new vg(e,c===void 0?t:{column:r,line:t},c===void 0?r:{column:u,line:c},this.css,this.file,i.plugin),o.input={column:r,endColumn:u,endLine:c,line:t,source:this.css},this.file&&(ca&&(o.input.url=ca(this.file).toString()),o.input.file=this.file),o}fromOffset(e){let t,r;if(this[Ou])r=this[Ou];else{let o=this.css.split(`
`);r=new Array(o.length);let c=0;for(let u=0,d=o.length;u<d;u++)r[u]=c,c+=o[u].length+1;this[Ou]=r}t=r[r.length-1];let i=0;if(e>=t)i=r.length-1;else{let o=r.length-2,c;for(;i<o;)if(c=i+(o-i>>1),e<r[c])o=c-1;else if(e>=r[c+1])i=c+1;else{i=c;break}}return{col:e-r[i]+1,line:i+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:ud(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,r,i){if(!this.map)return!1;let o=this.map.consumer(),c=o.originalPositionFor({column:t,line:e});if(!c.source)return!1;let u;typeof r=="number"&&(u=o.originalPositionFor({column:i,line:r}));let d;cd(c.source)?d=ca(c.source):d=new URL(c.source,this.map.consumer().sourceRoot||ca(this.map.mapFile));let f={column:c.column,endColumn:u&&u.column,endLine:u&&u.line,line:c.line,url:d.toString()};if(d.protocol==="file:")if(yg)f.file=yg(d);else throw new Error("file: protocol is not available in this PostCSS build");let p=o.sourceContentFor(c.source);return p&&(f.source=p),f}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])this[t]!=null&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}},al=ka;ka.default=ka;Nu&&Nu.registerInput&&Nu.registerInput(ka);var{SourceMapConsumer:zy,SourceMapGenerator:xa}=er,{dirname:Ca,relative:qy,resolve:jy,sep:Ky}=er,{pathToFileURL:Eg}=er,TR=al,IR=!!(zy&&xa),AR=!!(Ca&&jy&&qy&&Ky),RR=class{static{a(this,"MapGenerator2")}constructor(e,t,r,i){this.stringify=e,this.mapOpts=r.map||{},this.root=t,this.opts=r,this.css=i,this.originalCSS=i,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;this.isInline()?e="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?e=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?e=this.mapOpts.annotation(this.opts.to,this.root):e=this.outputFile()+".map";let t=`
`;this.css.includes(`\r
`)&&(t=`\r
`),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t=this.toUrl(this.path(e.file)),r=e.root||Ca(e.file),i;this.mapOpts.sourcesContent===!1?(i=new zy(e.text),i.sourcesContent&&(i.sourcesContent=null)):i=e.consumer(),this.map.applySourceMap(i,t,this.toUrl(this.path(r)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],e.type==="comment"&&e.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),AR&&IR&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=xa.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new xa({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new xa({file:this.outputFile(),ignoreInvalidMapping:!0});let e=1,t=1,r="<no source>",i={generated:{column:0,line:0},original:{column:0,line:0},source:""},o,c;this.stringify(this.root,(u,d,f)=>{if(this.css+=u,d&&f!=="end"&&(i.generated.line=e,i.generated.column=t-1,d.source&&d.source.start?(i.source=this.sourcePath(d),i.original.line=d.source.start.line,i.original.column=d.source.start.column-1,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,this.map.addMapping(i))),o=u.match(/\n/g),o?(e+=o.length,c=u.lastIndexOf(`
`),t=u.length-c):t+=u.length,d&&f!=="start"){let p=d.parent||{raws:{}};(!(d.type==="decl"||d.type==="atrule"&&!d.nodes)||d!==p.last||p.raws.semicolon)&&(d.source&&d.source.end?(i.source=this.sourcePath(d),i.original.line=d.source.end.line,i.original.column=d.source.end.column-1,i.generated.line=e,i.generated.column=t-2,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,i.generated.line=e,i.generated.column=t-1,this.map.addMapping(i)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(e=>e.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let e=this.mapOpts.annotation;return typeof e<"u"&&e!==!0?!1:this.previous().length?this.previous().some(t=>t.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(e=>e.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute||e.charCodeAt(0)===60||/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let r=this.opts.to?Ca(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(r=Ca(jy(r,this.mapOpts.annotation)));let i=qy(r,e);return this.memoizedPaths.set(e,i),i}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new TR(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let r=t.source.input.from;if(r&&!e[r]){e[r]=!0;let i=this.usesFileUrls?this.toFileUrl(r):this.toUrl(this.path(r));this.map.setSourceContent(i,t.source.input.css)}}});else if(this.css){let t=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(t,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(Eg){let r=Eg(e).toString();return this.memoizedFileURLs.set(e,r),r}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;Ky==="\\"&&(e=e.replace(/\\/g,"/"));let r=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,r),r}},Yy=RR,LR=sl,dd=class extends LR{static{a(this,"Comment2")}constructor(e){super(e),this.type="comment"}},ll=dd;dd.default=dd;var{isClean:Xy,my:Zy}=Ns,Qy=ol,Jy=ll,NR=sl,ev,rh,nh,tv;function rv(n){return n.map(e=>(e.nodes&&(e.nodes=rv(e.nodes)),delete e.source,e))}a(rv,"cleanSource");function nv(n){if(n[Xy]=!1,n.proxyOf.nodes)for(let e of n.proxyOf.nodes)nv(e)}a(nv,"markDirtyUp");var Or=class iv extends NR{static{a(this,"Container2")}append(...e){for(let t of e){let r=this.normalize(t,this.last);for(let i of r)this.proxyOf.nodes.push(i)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t=this.getIterator(),r,i;for(;this.indexes[t]<this.proxyOf.nodes.length&&(r=this.indexes[t],i=e(this.proxyOf.nodes[r],r),i!==!1);)this.indexes[t]+=1;return delete this.indexes[t],i}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:e[t]?t==="each"||typeof t=="string"&&t.startsWith("walk")?(...r)=>e[t](...r.map(i=>typeof i=="function"?(o,c)=>i(o.toProxy(),c):i)):t==="every"||t==="some"?r=>e[t]((i,...o)=>r(i.toProxy(),...o)):t==="root"?()=>e.root().toProxy():t==="nodes"?e.nodes.map(r=>r.toProxy()):t==="first"||t==="last"?e[t].toProxy():e[t]:e[t]},set(e,t,r){return e[t]===r||(e[t]=r,(t==="name"||t==="params"||t==="selector")&&e.markDirty()),!0}}}index(e){return typeof e=="number"?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let r=this.index(e),i=this.normalize(t,this.proxyOf.nodes[r]).reverse();r=this.index(e);for(let c of i)this.proxyOf.nodes.splice(r+1,0,c);let o;for(let c in this.indexes)o=this.indexes[c],r<o&&(this.indexes[c]=o+i.length);return this.markDirty(),this}insertBefore(e,t){let r=this.index(e),i=r===0?"prepend":!1,o=this.normalize(t,this.proxyOf.nodes[r],i).reverse();r=this.index(e);for(let u of o)this.proxyOf.nodes.splice(r,0,u);let c;for(let u in this.indexes)c=this.indexes[u],r<=c&&(this.indexes[u]=c+o.length);return this.markDirty(),this}normalize(e,t){if(typeof e=="string")e=rv(ev(e).nodes);else if(typeof e>"u")e=[];else if(Array.isArray(e)){e=e.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type==="root"&&this.type!=="document"){e=e.nodes.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type)e=[e];else if(e.prop){if(typeof e.value>"u")throw new Error("Value field is missed in node creation");typeof e.value!="string"&&(e.value=String(e.value)),e=[new Qy(e)]}else if(e.selector)e=[new rh(e)];else if(e.name)e=[new nh(e)];else if(e.text)e=[new Jy(e)];else throw new Error("Unknown node type in node creation");return e.map(i=>(i[Zy]||iv.rebuild(i),i=i.proxyOf,i.parent&&i.parent.removeChild(i),i[Xy]&&nv(i),typeof i.raws.before>"u"&&t&&typeof t.raws.before<"u"&&(i.raws.before=t.raws.before.replace(/\S/g,"")),i.parent=this.proxyOf,i))}prepend(...e){e=e.reverse();for(let t of e){let r=this.normalize(t,this.first,"prepend").reverse();for(let i of r)this.proxyOf.nodes.unshift(i);for(let i in this.indexes)this.indexes[i]=this.indexes[i]+r.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);let t;for(let r in this.indexes)t=this.indexes[r],t>=e&&(this.indexes[r]=t-1);return this.markDirty(),this}replaceValues(e,t,r){return r||(r=t,t={}),this.walkDecls(i=>{t.props&&!t.props.includes(i.prop)||t.fast&&!i.value.includes(t.fast)||(i.value=i.value.replace(e,r))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,r)=>{let i;try{i=e(t,r)}catch(o){throw t.addToError(o)}return i!==!1&&t.walk&&(i=t.walk(e)),i})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="atrule"&&e.test(r.name))return t(r,i)}):this.walk((r,i)=>{if(r.type==="atrule"&&r.name===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="atrule")return t(r,i)}))}walkComments(e){return this.walk((t,r)=>{if(t.type==="comment")return e(t,r)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="decl"&&e.test(r.prop))return t(r,i)}):this.walk((r,i)=>{if(r.type==="decl"&&r.prop===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="decl")return t(r,i)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="rule"&&e.test(r.selector))return t(r,i)}):this.walk((r,i)=>{if(r.type==="rule"&&r.selector===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="rule")return t(r,i)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};Or.registerParse=n=>{ev=n};Or.registerRule=n=>{rh=n};Or.registerAtRule=n=>{nh=n};Or.registerRoot=n=>{tv=n};var Tn=Or;Or.default=Or;Or.rebuild=n=>{n.type==="atrule"?Object.setPrototypeOf(n,nh.prototype):n.type==="rule"?Object.setPrototypeOf(n,rh.prototype):n.type==="decl"?Object.setPrototypeOf(n,Qy.prototype):n.type==="comment"?Object.setPrototypeOf(n,Jy.prototype):n.type==="root"&&Object.setPrototypeOf(n,tv.prototype),n[Zy]=!0,n.nodes&&n.nodes.forEach(e=>{Or.rebuild(e)})};var OR=Tn,sv,ov,Cs=class extends OR{static{a(this,"Document23")}constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new sv(new ov,this,e).stringify()}};Cs.registerLazyResult=n=>{sv=n};Cs.registerProcessor=n=>{ov=n};var ih=Cs;Cs.default=Cs;var hd=class{static{a(this,"Warning2")}constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let r=t.node.rangeBy(t);this.line=r.start.line,this.column=r.start.column,this.endLine=r.end.line,this.endColumn=r.end.column}for(let r in t)this[r]=t[r]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}},av=hd;hd.default=hd;var _R=av,fd=class{static{a(this,"Result2")}constructor(e,t,r){this.processor=e,this.messages=[],this.root=t,this.opts=r,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let r=new _R(e,t);return this.messages.push(r),r}warnings(){return this.messages.filter(e=>e.type==="warning")}get content(){return this.css}},sh=fd;fd.default=fd;var _u=39,Sg=34,ua=92,wg=47,da=10,ls=32,ha=12,fa=9,pa=13,DR=91,kR=93,PR=40,FR=41,HR=123,$R=125,WR=59,BR=42,VR=58,UR=64,ma=/[\t\n\f\r "#'()/;[\\\]{}]/g,ga=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,GR=/.[\r\n"'(/\\]/,xg=/[\da-f]/i,zR=a(function(e,t={}){let r=e.css.valueOf(),i=t.ignoreErrors,o,c,u,d,f,p,g,y,b,E,C=r.length,w=0,M=[],N=[];function A(){return w}a(A,"position");function _(V){throw e.error("Unclosed "+V,w)}a(_,"unclosed");function z(){return N.length===0&&w>=C}a(z,"endOfFile");function G(V){if(N.length)return N.pop();if(w>=C)return;let j=V?V.ignoreUnclosed:!1;switch(o=r.charCodeAt(w),o){case da:case ls:case fa:case pa:case ha:{c=w;do c+=1,o=r.charCodeAt(c);while(o===ls||o===da||o===fa||o===pa||o===ha);E=["space",r.slice(w,c)],w=c-1;break}case DR:case kR:case HR:case $R:case VR:case WR:case FR:{let oe=String.fromCharCode(o);E=[oe,oe,w];break}case PR:{if(y=M.length?M.pop()[1]:"",b=r.charCodeAt(w+1),y==="url"&&b!==_u&&b!==Sg&&b!==ls&&b!==da&&b!==fa&&b!==ha&&b!==pa){c=w;do{if(p=!1,c=r.indexOf(")",c+1),c===-1)if(i||j){c=w;break}else _("bracket");for(g=c;r.charCodeAt(g-1)===ua;)g-=1,p=!p}while(p);E=["brackets",r.slice(w,c+1),w,c],w=c}else c=r.indexOf(")",w+1),d=r.slice(w,c+1),c===-1||GR.test(d)?E=["(","(",w]:(E=["brackets",d,w,c],w=c);break}case _u:case Sg:{u=o===_u?"'":'"',c=w;do{if(p=!1,c=r.indexOf(u,c+1),c===-1)if(i||j){c=w+1;break}else _("string");for(g=c;r.charCodeAt(g-1)===ua;)g-=1,p=!p}while(p);E=["string",r.slice(w,c+1),w,c],w=c;break}case UR:{ma.lastIndex=w+1,ma.test(r),ma.lastIndex===0?c=r.length-1:c=ma.lastIndex-2,E=["at-word",r.slice(w,c+1),w,c],w=c;break}case ua:{for(c=w,f=!0;r.charCodeAt(c+1)===ua;)c+=1,f=!f;if(o=r.charCodeAt(c+1),f&&o!==wg&&o!==ls&&o!==da&&o!==fa&&o!==pa&&o!==ha&&(c+=1,xg.test(r.charAt(c)))){for(;xg.test(r.charAt(c+1));)c+=1;r.charCodeAt(c+1)===ls&&(c+=1)}E=["word",r.slice(w,c+1),w,c],w=c;break}default:{o===wg&&r.charCodeAt(w+1)===BR?(c=r.indexOf("*/",w+2)+1,c===0&&(i||j?c=r.length:_("comment")),E=["comment",r.slice(w,c+1),w,c],w=c):(ga.lastIndex=w+1,ga.test(r),ga.lastIndex===0?c=r.length-1:c=ga.lastIndex-2,E=["word",r.slice(w,c+1),w,c],M.push(E),w=c);break}}return w++,E}a(G,"nextToken");function ee(V){N.push(V)}return a(ee,"back"),{back:ee,endOfFile:z,nextToken:G,position:A}},"tokenizer2"),lv=Tn,Pa=class extends lv{static{a(this,"AtRule2")}constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}},oh=Pa;Pa.default=Pa;lv.registerAtRule(Pa);var cv=Tn,uv,dv,ui=class extends cv{static{a(this,"Root2")}constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,r){let i=super.normalize(e);if(t){if(r==="prepend")this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let o of i)o.raws.before=t.raws.before}return i}removeChild(e,t){let r=this.index(e);return!t&&r===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(e)}toResult(e={}){return new uv(new dv,this,e).stringify()}};ui.registerLazyResult=n=>{uv=n};ui.registerProcessor=n=>{dv=n};var Os=ui;ui.default=ui;cv.registerRoot(ui);var Ms={comma(n){return Ms.split(n,[","],!0)},space(n){let e=[" ",`
`,"	"];return Ms.split(n,e)},split(n,e,t){let r=[],i="",o=!1,c=0,u=!1,d="",f=!1;for(let p of n)f?f=!1:p==="\\"?f=!0:u?p===d&&(u=!1):p==='"'||p==="'"?(u=!0,d=p):p==="("?c+=1:p===")"?c>0&&(c-=1):c===0&&e.includes(p)&&(o=!0),o?(i!==""&&r.push(i.trim()),i="",o=!1):i+=p;return(t||i!=="")&&r.push(i.trim()),r}},hv=Ms;Ms.default=Ms;var fv=Tn,qR=hv,Fa=class extends fv{static{a(this,"Rule2")}constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return qR.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,r=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(r)}},ah=Fa;Fa.default=Fa;fv.registerRule(Fa);var jR=ol,KR=zR,YR=ll,XR=oh,ZR=Os,Cg=ah,Mg={empty:!0,space:!0};function QR(n){for(let e=n.length-1;e>=0;e--){let t=n[e],r=t[3]||t[2];if(r)return r}}a(QR,"findLastWithPosition");var JR=class{static{a(this,"Parser2")}constructor(e){this.input=e,this.root=new ZR,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t=new XR;t.name=e[1].slice(1),t.name===""&&this.unnamedAtrule(t,e),this.init(t,e[2]);let r,i,o,c=!1,u=!1,d=[],f=[];for(;!this.tokenizer.endOfFile();){if(e=this.tokenizer.nextToken(),r=e[0],r==="("||r==="["?f.push(r==="("?")":"]"):r==="{"&&f.length>0?f.push("}"):r===f[f.length-1]&&f.pop(),f.length===0)if(r===";"){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}else if(r==="{"){u=!0;break}else if(r==="}"){if(d.length>0){for(o=d.length-1,i=d[o];i&&i[0]==="space";)i=d[--o];i&&(t.source.end=this.getPosition(i[3]||i[2]),t.source.end.offset++)}this.end(e);break}else d.push(e);else d.push(e);if(this.tokenizer.endOfFile()){c=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(d),d.length?(t.raws.afterName=this.spacesAndCommentsFromStart(d),this.raw(t,"params",d),c&&(e=d[d.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),u&&(t.nodes=[],this.current=t)}checkMissedSemicolon(e){let t=this.colon(e);if(t===!1)return;let r=0,i;for(let o=t-1;o>=0&&(i=e[o],!(i[0]!=="space"&&(r+=1,r===2)));o--);throw this.input.error("Missed semicolon",i[0]==="word"?i[3]+1:i[2])}colon(e){let t=0,r,i,o;for(let[c,u]of e.entries()){if(r=u,i=r[0],i==="("&&(t+=1),i===")"&&(t-=1),t===0&&i===":")if(!o)this.doubleColon(r);else{if(o[0]==="word"&&o[1]==="progid")continue;return c}o=r}return!1}comment(e){let t=new YR;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let r=e[1].slice(2,-2);if(/^\s*$/.test(r))t.text="",t.raws.left=r,t.raws.right="";else{let i=r.match(/^(\s*)([^]*\S)(\s*)$/);t.text=i[2],t.raws.left=i[1],t.raws.right=i[3]}}createTokenizer(){this.tokenizer=KR(this.input)}decl(e,t){let r=new jR;this.init(r,e[0][2]);let i=e[e.length-1];for(i[0]===";"&&(this.semicolon=!0,e.pop()),r.source.end=this.getPosition(i[3]||i[2]||QR(e)),r.source.end.offset++;e[0][0]!=="word";)e.length===1&&this.unknownWord(e),r.raws.before+=e.shift()[1];for(r.source.start=this.getPosition(e[0][2]),r.prop="";e.length;){let f=e[0][0];if(f===":"||f==="space"||f==="comment")break;r.prop+=e.shift()[1]}r.raws.between="";let o;for(;e.length;)if(o=e.shift(),o[0]===":"){r.raws.between+=o[1];break}else o[0]==="word"&&/\w/.test(o[1])&&this.unknownWord([o]),r.raws.between+=o[1];(r.prop[0]==="_"||r.prop[0]==="*")&&(r.raws.before+=r.prop[0],r.prop=r.prop.slice(1));let c=[],u;for(;e.length&&(u=e[0][0],!(u!=="space"&&u!=="comment"));)c.push(e.shift());this.precheckMissedSemicolon(e);for(let f=e.length-1;f>=0;f--){if(o=e[f],o[1].toLowerCase()==="!important"){r.important=!0;let p=this.stringFrom(e,f);p=this.spacesFromEnd(e)+p,p!==" !important"&&(r.raws.important=p);break}else if(o[1].toLowerCase()==="important"){let p=e.slice(0),g="";for(let y=f;y>0;y--){let b=p[y][0];if(g.trim().indexOf("!")===0&&b!=="space")break;g=p.pop()[1]+g}g.trim().indexOf("!")===0&&(r.important=!0,r.raws.important=g,e=p)}if(o[0]!=="space"&&o[0]!=="comment")break}e.some(f=>f[0]!=="space"&&f[0]!=="comment")&&(r.raws.between+=c.map(f=>f[1]).join(""),c=[]),this.raw(r,"value",c.concat(e),t),r.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new Cg;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&t.type==="rule"&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}other(e){let t=!1,r=null,i=!1,o=null,c=[],u=e[1].startsWith("--"),d=[],f=e;for(;f;){if(r=f[0],d.push(f),r==="("||r==="[")o||(o=f),c.push(r==="("?")":"]");else if(u&&i&&r==="{")o||(o=f),c.push("}");else if(c.length===0)if(r===";")if(i){this.decl(d,u);return}else break;else if(r==="{"){this.rule(d);return}else if(r==="}"){this.tokenizer.back(d.pop()),t=!0;break}else r===":"&&(i=!0);else r===c[c.length-1]&&(c.pop(),c.length===0&&(o=null));f=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),c.length>0&&this.unclosedBracket(o),t&&i){if(!u)for(;d.length&&(f=d[d.length-1][0],!(f!=="space"&&f!=="comment"));)this.tokenizer.back(d.pop());this.decl(d,u)}else this.unknownWord(d)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e);break}this.endFile()}precheckMissedSemicolon(){}raw(e,t,r,i){let o,c,u=r.length,d="",f=!0,p,g;for(let y=0;y<u;y+=1)o=r[y],c=o[0],c==="space"&&y===u-1&&!i?f=!1:c==="comment"?(g=r[y-1]?r[y-1][0]:"empty",p=r[y+1]?r[y+1][0]:"empty",!Mg[g]&&!Mg[p]?d.slice(-1)===","?f=!1:d+=o[1]:f=!1):d+=o[1];if(!f){let y=r.reduce((b,E)=>b+E[1],"");e.raws[t]={raw:y,value:d}}e[t]=d}rule(e){e.pop();let t=new Cg;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],!(t!=="space"&&t!=="comment"));)r=e.pop()[1]+r;return r}spacesAndCommentsFromStart(e){let t,r="";for(;e.length&&(t=e[0][0],!(t!=="space"&&t!=="comment"));)r+=e.shift()[1];return r}spacesFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],t==="space");)r=e.pop()[1]+r;return r}stringFrom(e,t){let r="";for(let i=t;i<e.length;i++)r+=e[i][1];return e.splice(t,e.length-t),r}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}},eL=JR,tL=Tn,rL=eL,nL=al;function Ha(n,e){let t=new nL(n,e),r=new rL(t);try{r.parse()}catch(i){throw i}return r.root}a(Ha,"parse$3");var lh=Ha;Ha.default=Ha;tL.registerParse(Ha);var{isClean:cr,my:iL}=Ns,sL=Yy,oL=il,aL=Tn,lL=ih;var Tg=sh,cL=lh,uL=Os,dL={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},hL={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},fL={Once:!0,postcssPlugin:!0,prepare:!0},di=0;function cs(n){return typeof n=="object"&&typeof n.then=="function"}a(cs,"isPromise");function pv(n){let e=!1,t=dL[n.type];return n.type==="decl"?e=n.prop.toLowerCase():n.type==="atrule"&&(e=n.name.toLowerCase()),e&&n.append?[t,t+"-"+e,di,t+"Exit",t+"Exit-"+e]:e?[t,t+"-"+e,t+"Exit",t+"Exit-"+e]:n.append?[t,di,t+"Exit"]:[t,t+"Exit"]}a(pv,"getEvents");function Ig(n){let e;return n.type==="document"?e=["Document",di,"DocumentExit"]:n.type==="root"?e=["Root",di,"RootExit"]:e=pv(n),{eventIndex:0,events:e,iterator:0,node:n,visitorIndex:0,visitors:[]}}a(Ig,"toStack");function pd(n){return n[cr]=!1,n.nodes&&n.nodes.forEach(e=>pd(e)),n}a(pd,"cleanMarks");var md={},hi=class mv{static{a(this,"LazyResult2")}constructor(e,t,r){this.stringified=!1,this.processed=!1;let i;if(typeof t=="object"&&t!==null&&(t.type==="root"||t.type==="document"))i=pd(t);else if(t instanceof mv||t instanceof Tg)i=pd(t.root),t.map&&(typeof r.map>"u"&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=t.map);else{let o=cL;r.syntax&&(o=r.syntax.parse),r.parser&&(o=r.parser),o.parse&&(o=o.parse);try{i=o(t,r)}catch(c){this.processed=!0,this.error=c}i&&!i[iL]&&aL.rebuild(i)}this.result=new Tg(e,i,r),this.helpers={...md,postcss:md,result:this.result},this.plugins=this.processor.plugins.map(o=>typeof o=="object"&&o.prepare?{...o,...o.prepare(this.result)}:o)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let r=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,e.name==="CssSyntaxError"&&!e.plugin?(e.plugin=r.postcssPlugin,e.setMessage()):r.postcssVersion}catch(i){console&&console.error&&console.error(i)}return e}prepareVisitors(){this.listeners={};let e=a((t,r,i)=>{this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push([t,i])},"add");for(let t of this.plugins)if(typeof t=="object")for(let r in t){if(!hL[r]&&/^[A-Z]/.test(r))throw new Error(`Unknown event ${r} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!fL[r])if(typeof t[r]=="object")for(let i in t[r])i==="*"?e(t,r,t[r][i]):e(t,r+"-"+i.toLowerCase(),t[r][i]);else typeof t[r]=="function"&&e(t,r,t[r])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],r=this.runOnRoot(t);if(cs(r))try{await r}catch(i){throw this.handleError(i)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[cr];){e[cr]=!0;let t=[Ig(e)];for(;t.length>0;){let r=this.visitTick(t);if(cs(r))try{await r}catch(i){let o=t[t.length-1].node;throw this.handleError(i,o)}}}if(this.listeners.OnceExit)for(let[t,r]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if(e.type==="document"){let i=e.nodes.map(o=>r(o,this.helpers));await Promise.all(i)}else await r(e,this.helpers)}catch(i){throw this.handleError(i)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if(typeof e=="object"&&e.Once){if(this.result.root.type==="document"){let t=this.result.root.nodes.map(r=>e.Once(r,this.helpers));return cs(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}else if(typeof e=="function")return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=oL;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let i=new sL(t,this.result.root,this.result.opts).generate();return this.result.css=i[0],this.result.map=i[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){let t=this.runOnRoot(e);if(cs(t))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[cr];)e[cr]=!0,this.walkSync(e);if(this.listeners.OnceExit)if(e.type==="document")for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[r,i]of e){this.result.lastPlugin=r;let o;try{o=i(t,this.helpers)}catch(c){throw this.handleError(c,t.proxyOf)}if(t.type!=="root"&&t.type!=="document"&&!t.parent)return!0;if(cs(o))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:r,visitors:i}=t;if(r.type!=="root"&&r.type!=="document"&&!r.parent){e.pop();return}if(i.length>0&&t.visitorIndex<i.length){let[c,u]=i[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===i.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=c;try{return u(r.toProxy(),this.helpers)}catch(d){throw this.handleError(d,r)}}if(t.iterator!==0){let c=t.iterator,u;for(;u=r.nodes[r.indexes[c]];)if(r.indexes[c]+=1,!u[cr]){u[cr]=!0,e.push(Ig(u));return}t.iterator=0,delete r.indexes[c]}let o=t.events;for(;t.eventIndex<o.length;){let c=o[t.eventIndex];if(t.eventIndex+=1,c===di){r.nodes&&r.nodes.length&&(r[cr]=!0,t.iterator=r.getIterator());return}else if(this.listeners[c]){t.visitors=this.listeners[c];return}}e.pop()}walkSync(e){e[cr]=!0;let t=pv(e);for(let r of t)if(r===di)e.nodes&&e.each(i=>{i[cr]||this.walkSync(i)});else{let i=this.listeners[r];if(i&&this.visitSync(i,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};hi.registerPostcss=n=>{md=n};var gv=hi;hi.default=hi;uL.registerLazyResult(hi);lL.registerLazyResult(hi);var pL=Yy,mL=il;var gL=lh,yL=sh,gd=class{static{a(this,"NoWorkResult2")}constructor(e,t,r){t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=r,this._map=void 0;let i,o=mL;this.result=new yL(this._processor,i,this._opts),this.result.css=t;let c=this;Object.defineProperty(this.result,"root",{get(){return c.root}});let u=new pL(o,i,this._opts,t);if(u.isMap()){let[d,f]=u.generate();d&&(this.result.css=d),f&&(this.result.map=f)}else u.clearAnnotation(),this.result.css=u.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=gL;try{e=t(this._css,this._opts)}catch(r){this.error=r}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}},vL=gd;gd.default=gd;var bL=vL,EL=gv,SL=ih,wL=Os,Ts=class{static{a(this,"Processor2")}constructor(e=[]){this.version="8.4.38",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let r of e)if(r.postcss===!0?r=r():r.postcss&&(r=r.postcss),typeof r=="object"&&Array.isArray(r.plugins))t=t.concat(r.plugins);else if(typeof r=="object"&&r.postcssPlugin)t.push(r);else if(typeof r=="function")t.push(r);else if(!(typeof r=="object"&&(r.parse||r.stringify)))throw new Error(r+" is not a PostCSS plugin");return t}process(e,t={}){return!this.plugins.length&&!t.parser&&!t.stringifier&&!t.syntax?new bL(this,e,t):new EL(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}},xL=Ts;Ts.default=Ts;wL.registerProcessor(Ts);SL.registerProcessor(Ts);var CL=ol,ML=Gy,TL=ll,IL=oh,AL=al,RL=Os,LL=ah;function Is(n,e){if(Array.isArray(n))return n.map(i=>Is(i));let{inputs:t,...r}=n;if(t){e=[];for(let i of t){let o={...i,__proto__:AL.prototype};o.map&&(o.map={...o.map,__proto__:ML.prototype}),e.push(o)}}if(r.nodes&&(r.nodes=n.nodes.map(i=>Is(i,e))),r.source){let{inputId:i,...o}=r.source;r.source=o,i!=null&&(r.source.input=e[i])}if(r.type==="root")return new RL(r);if(r.type==="decl")return new CL(r);if(r.type==="rule")return new LL(r);if(r.type==="comment")return new TL(r);if(r.type==="atrule")return new IL(r);throw new Error("Unknown node type: "+n.type)}a(Is,"fromJSON$1");var NL=Is;Is.default=Is;var OL=th,yv=ol,_L=gv,DL=Tn,ch=xL,kL=il,PL=NL,vv=ih,FL=av,bv=ll,Ev=oh,HL=sh,$L=al,WL=lh,BL=hv,Sv=ah,wv=Os,VL=sl;function Le(...n){return n.length===1&&Array.isArray(n[0])&&(n=n[0]),new ch(n)}a(Le,"postcss");Le.plugin=a(function(e,t){let r=!1;function i(...c){console&&console.warn&&!r&&(r=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+`: \u91CC\u9762 postcss.plugin \u88AB\u5F03\u7528. \u8FC1\u79FB\u6307\u5357:
https://www.w3ctech.com/topic/2226`));let u=t(...c);return u.postcssPlugin=e,u.postcssVersion=new ch().version,u}a(i,"creator");let o;return Object.defineProperty(i,"postcss",{get(){return o||(o=i()),o}}),i.process=function(c,u,d){return Le([i(d)]).process(c,u)},i},"plugin2");Le.stringify=kL;Le.parse=WL;Le.fromJSON=PL;Le.list=BL;Le.comment=n=>new bv(n);Le.atRule=n=>new Ev(n);Le.decl=n=>new yv(n);Le.rule=n=>new Sv(n);Le.root=n=>new wv(n);Le.document=n=>new vv(n);Le.CssSyntaxError=OL;Le.Declaration=yv;Le.Container=DL;Le.Processor=ch;Le.Document=vv;Le.Comment=bv;Le.Warning=FL;Le.AtRule=Ev;Le.Result=HL;Le.Input=$L;Le.Rule=Sv;Le.Root=wv;Le.Node=VL;_L.registerPostcss(Le);var UL=Le;Le.default=Le;var qe=tR(UL);qe.stringify;qe.fromJSON;qe.plugin;qe.parse;qe.list;qe.document;qe.comment;qe.atRule;qe.rule;qe.decl;qe.root;qe.CssSyntaxError;qe.Declaration;qe.Container;qe.Processor;qe.Document;qe.Comment;qe.Warning;qe.AtRule;qe.Result;qe.Input;qe.Rule;qe.Root;qe.Node;var Ee=(n=>(n[n.Document=0]="Document",n[n.DocumentType=1]="DocumentType",n[n.Element=2]="Element",n[n.Text=3]="Text",n[n.CDATA=4]="CDATA",n[n.Comment=5]="Comment",n))(Ee||{});function GL(n){let e={},t=/;(?![^(]*\))/g,r=/:(.+)/,i=/\/\*.*?\*\//g;return n.replace(i,"").split(t).forEach(function(o){if(o){let c=o.split(r);c.length>1&&(e[yd(c[0].trim())]=c[1].trim())}}),e}a(GL,"parseCSSText");function Ag(n){let e=[];for(let t in n){let r=n[t];if(typeof r!="string")continue;let i=KL(t);e.push(`${i}: ${r};`)}return e.join(" ")}a(Ag,"toCSSText");var zL=/-([a-z])/g,qL=/^--[a-zA-Z0-9-]+$/,yd=a(n=>qL.test(n)?n:n.replace(zL,(e,t)=>t?t.toUpperCase():""),"camelize"),jL=/\B([A-Z])/g,KL=a(n=>n.replace(jL,"-$1").toLowerCase(),"hyphenate"),Qt=class n{static{a(this,"BaseRRNode")}constructor(...e){Z(this,"parentElement",null),Z(this,"parentNode",null),Z(this,"ownerDocument"),Z(this,"firstChild",null),Z(this,"lastChild",null),Z(this,"previousSibling",null),Z(this,"nextSibling",null),Z(this,"ELEMENT_NODE",1),Z(this,"TEXT_NODE",3),Z(this,"nodeType"),Z(this,"nodeName"),Z(this,"RRNodeType")}get childNodes(){let e=[],t=this.firstChild;for(;t;)e.push(t),t=t.nextSibling;return e}contains(e){if(e instanceof n){if(e.ownerDocument!==this.ownerDocument)return!1;if(e===this)return!0}else return!1;for(;e.parentNode;){if(e.parentNode===this)return!0;e=e.parentNode}return!1}appendChild(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(e,t){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}},vd=class n extends Qt{static{a(this,"BaseRRDocument")}constructor(...e){super(e),Z(this,"nodeType",9),Z(this,"nodeName","#document"),Z(this,"compatMode","CSS1Compat"),Z(this,"RRNodeType",Ee.Document),Z(this,"textContent",null),this.ownerDocument=this}get documentElement(){return this.childNodes.find(e=>e.RRNodeType===Ee.Element&&e.tagName==="HTML")||null}get body(){var e;return((e=this.documentElement)==null?void 0:e.childNodes.find(t=>t.RRNodeType===Ee.Element&&t.tagName==="BODY"))||null}get head(){var e;return((e=this.documentElement)==null?void 0:e.childNodes.find(t=>t.RRNodeType===Ee.Element&&t.tagName==="HEAD"))||null}get implementation(){return this}get firstElementChild(){return this.documentElement}appendChild(e){let t=e.RRNodeType;if((t===Ee.Element||t===Ee.DocumentType)&&this.childNodes.some(i=>i.RRNodeType===t))throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': Only one ${t===Ee.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);let r=uh(this,e);return r.parentElement=null,r}insertBefore(e,t){let r=e.RRNodeType;if((r===Ee.Element||r===Ee.DocumentType)&&this.childNodes.some(o=>o.RRNodeType===r))throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': Only one ${r===Ee.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);let i=xv(this,e,t);return i.parentElement=null,i}removeChild(e){return Cv(this,e)}open(){this.firstChild=null,this.lastChild=null}close(){}write(e){let t;if(e==='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'?t="-//W3C//DTD XHTML 1.0 Transitional//EN":e==='<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">'&&(t="-//W3C//DTD HTML 4.0 Transitional//EN"),t){let r=this.createDocumentType("html",t,"");this.open(),this.appendChild(r)}}createDocument(e,t,r){return new n}createDocumentType(e,t,r){let i=new $a(e,t,r);return i.ownerDocument=this,i}createElement(e){let t=new fi(e);return t.ownerDocument=this,t}createElementNS(e,t){return this.createElement(t)}createTextNode(e){let t=new Wa(e);return t.ownerDocument=this,t}createComment(e){let t=new Ba(e);return t.ownerDocument=this,t}createCDATASection(e){let t=new Va(e);return t.ownerDocument=this,t}toString(){return"RRDocument"}},$a=class extends Qt{static{a(this,"BaseRRDocumentType")}constructor(e,t,r){super(),Z(this,"nodeType",10),Z(this,"RRNodeType",Ee.DocumentType),Z(this,"name"),Z(this,"publicId"),Z(this,"systemId"),Z(this,"textContent",null),this.name=e,this.publicId=t,this.systemId=r,this.nodeName=e}toString(){return"RRDocumentType"}},fi=class extends Qt{static{a(this,"BaseRRElement")}constructor(e){super(),Z(this,"nodeType",1),Z(this,"RRNodeType",Ee.Element),Z(this,"tagName"),Z(this,"attributes",{}),Z(this,"shadowRoot",null),Z(this,"scrollLeft"),Z(this,"scrollTop"),this.tagName=e.toUpperCase(),this.nodeName=e.toUpperCase()}get textContent(){let e="";return this.childNodes.forEach(t=>e+=t.textContent),e}set textContent(e){this.firstChild=null,this.lastChild=null,this.appendChild(this.ownerDocument.createTextNode(e))}get classList(){return new Sd(this.attributes.class,e=>{this.attributes.class=e})}get id(){return this.attributes.id||""}get className(){return this.attributes.class||""}get style(){let e=this.attributes.style?GL(this.attributes.style):{},t=/\B([A-Z])/g;return e.setProperty=(r,i,o)=>{if(t.test(r))return;let c=yd(r);i?e[c]=i:delete e[c],o==="important"&&(e[c]+=" !important"),this.attributes.style=Ag(e)},e.removeProperty=r=>{if(t.test(r))return"";let i=yd(r),o=e[i]||"";return delete e[i],this.attributes.style=Ag(e),o},e}getAttribute(e){return this.attributes[e]===void 0?null:this.attributes[e]}setAttribute(e,t){this.attributes[e]=t}setAttributeNS(e,t,r){this.setAttribute(t,r)}removeAttribute(e){delete this.attributes[e]}appendChild(e){return uh(this,e)}insertBefore(e,t){return xv(this,e,t)}removeChild(e){return Cv(this,e)}attachShadow(e){let t=this.ownerDocument.createElement("SHADOWROOT");return this.shadowRoot=t,t}dispatchEvent(e){return!0}toString(){let e="";for(let t in this.attributes)e+=`${t}="${this.attributes[t]}" `;return`${this.tagName} ${e}`}},bd=class extends fi{static{a(this,"BaseRRMediaElement")}constructor(){super(...arguments),Z(this,"currentTime"),Z(this,"volume"),Z(this,"paused"),Z(this,"muted"),Z(this,"playbackRate"),Z(this,"loop")}attachShadow(e){throw new Error("RRDomException: Failed to execute 'attachShadow' on 'RRElement': This RRElement does not support attachShadow")}play(){this.paused=!1}pause(){this.paused=!0}},Ed=class extends fi{static{a(this,"BaseRRDialogElement")}constructor(){super(...arguments),Z(this,"tagName","DIALOG"),Z(this,"nodeName","DIALOG")}get isModal(){return this.getAttribute("rr_open_mode")==="modal"}get open(){return this.getAttribute("open")!==null}close(){this.removeAttribute("open"),this.removeAttribute("rr_open_mode")}show(){this.setAttribute("open",""),this.setAttribute("rr_open_mode","non-modal")}showModal(){this.setAttribute("open",""),this.setAttribute("rr_open_mode","modal")}},Wa=class extends Qt{static{a(this,"BaseRRText")}constructor(e){super(),Z(this,"nodeType",3),Z(this,"nodeName","#text"),Z(this,"RRNodeType",Ee.Text),Z(this,"data"),this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRText text=${JSON.stringify(this.data)}`}},Ba=class extends Qt{static{a(this,"BaseRRComment")}constructor(e){super(),Z(this,"nodeType",8),Z(this,"nodeName","#comment"),Z(this,"RRNodeType",Ee.Comment),Z(this,"data"),this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRComment text=${JSON.stringify(this.data)}`}},Va=class extends Qt{static{a(this,"BaseRRCDATASection")}constructor(e){super(),Z(this,"nodeName","#cdata-section"),Z(this,"nodeType",4),Z(this,"RRNodeType",Ee.CDATA),Z(this,"data"),this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRCDATASection data=${JSON.stringify(this.data)}`}},Sd=class{static{a(this,"ClassList")}constructor(e,t){if(Z(this,"onChange"),Z(this,"classes",[]),Z(this,"add",(...r)=>{for(let i of r){let o=String(i);this.classes.indexOf(o)>=0||this.classes.push(o)}this.onChange&&this.onChange(this.classes.join(" "))}),Z(this,"remove",(...r)=>{this.classes=this.classes.filter(i=>r.indexOf(i)===-1),this.onChange&&this.onChange(this.classes.join(" "))}),e){let r=e.trim().split(/\s+/);this.classes.push(...r)}this.onChange=t}};function uh(n,e){return e.parentNode&&e.parentNode.removeChild(e),n.lastChild?(n.lastChild.nextSibling=e,e.previousSibling=n.lastChild):(n.firstChild=e,e.previousSibling=null),n.lastChild=e,e.nextSibling=null,e.parentNode=n,e.parentElement=n,e.ownerDocument=n.ownerDocument,e}a(uh,"appendChild");function xv(n,e,t){if(!t)return uh(n,e);if(t.parentNode!==n)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return e===t||(e.parentNode&&e.parentNode.removeChild(e),e.previousSibling=t.previousSibling,t.previousSibling=e,e.nextSibling=t,e.previousSibling?e.previousSibling.nextSibling=e:n.firstChild=e,e.parentElement=n,e.parentNode=n,e.ownerDocument=n.ownerDocument),e}a(xv,"insertBefore");function Cv(n,e){if(e.parentNode!==n)throw new Error("Failed to execute 'removeChild' on 'RRNode': The RRNode to be removed is not a child of this RRNode.");return e.previousSibling?e.previousSibling.nextSibling=e.nextSibling:n.firstChild=e.nextSibling,e.nextSibling?e.nextSibling.previousSibling=e.previousSibling:n.lastChild=e.previousSibling,e.previousSibling=null,e.nextSibling=null,e.parentElement=null,e.parentNode=null,e}a(Cv,"removeChild");var kt=(n=>(n[n.PLACEHOLDER=0]="PLACEHOLDER",n[n.ELEMENT_NODE=1]="ELEMENT_NODE",n[n.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",n[n.TEXT_NODE=3]="TEXT_NODE",n[n.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",n[n.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",n[n.ENTITY_NODE=6]="ENTITY_NODE",n[n.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",n[n.COMMENT_NODE=8]="COMMENT_NODE",n[n.DOCUMENT_NODE=9]="DOCUMENT_NODE",n[n.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",n[n.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE",n))(kt||{}),wd={svg:"http://www.w3.org/2000/svg","xlink:href":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/xmlns/"},YL={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"},ur=null;function Ua(n,e,t,r=e.mirror||e.ownerDocument.mirror){n=XL(n,e,t,r),Mv(n,e,t,r),ZL(n,e,t)}a(Ua,"diff");function XL(n,e,t,r){var i;if(t.afterAppend&&!ur&&(ur=new WeakSet,setTimeout(()=>{ur=null},0)),!dh(n,e)){let o=Ga(e,t.mirror,r);(i=n.parentNode)==null||i.replaceChild(o,n),n=o}switch(e.RRNodeType){case Ee.Document:{if(!ei(n,e,t.mirror,r)){let o=r.getMeta(e);o&&(t.mirror.removeNodeFromMap(n),n.close(),n.open(),t.mirror.add(n,o),ur?.add(n))}break}case Ee.Element:{let o=n,c=e;switch(c.tagName){case"IFRAME":{let u=n.contentDocument;if(!u)break;Ua(u,e.contentDocument,t,r);break}}c.shadowRoot&&(o.shadowRoot||o.attachShadow({mode:"open"}),Mv(o.shadowRoot,c.shadowRoot,t,r)),QL(o,c,r);break}}return n}a(XL,"diffBeforeUpdatingChildren");function ZL(n,e,t){var r;switch(e.RRNodeType){case Ee.Document:{let i=e.scrollData;i&&t.applyScroll(i,!0);break}case Ee.Element:{let i=n,o=e;switch(o.scrollData&&t.applyScroll(o.scrollData,!0),o.inputData&&t.applyInput(o.inputData),o.tagName){case"AUDIO":case"VIDEO":{let c=n,u=o;u.paused!==void 0&&(u.paused?c.pause():c.play()),u.muted!==void 0&&(c.muted=u.muted),u.volume!==void 0&&(c.volume=u.volume),u.currentTime!==void 0&&(c.currentTime=u.currentTime),u.playbackRate!==void 0&&(c.playbackRate=u.playbackRate),u.loop!==void 0&&(c.loop=u.loop);break}case"CANVAS":{let c=e;if(c.rr_dataURL!==null){let u=document.createElement("img");u.onload=()=>{let d=i.getContext("2d");d&&d.drawImage(u,0,0,u.width,u.height)},u.src=c.rr_dataURL}c.canvasMutations.forEach(u=>t.applyCanvas(u.event,u.mutation,n));break}case"STYLE":{let c=i.sheet;c&&e.rules.forEach(u=>t.applyStyleSheetMutation(u,c));break}case"DIALOG":{let c=i,u=o,d=c.open,f=c.matches("dialog:modal"),p=u.open,g=u.isModal,y=f!==g,b=d!==p;if((y||d&&b)&&c.close(),p&&(b||y))try{g?c.showModal():c.show()}catch(E){console.warn(E)}break}}break}case Ee.Text:case Ee.Comment:case Ee.CDATA:{n.textContent!==e.data&&(n.textContent=e.data);break}}ur?.has(n)&&(ur.delete(n),(r=t.afterAppend)==null||r.call(t,n,t.mirror.getId(n)))}a(ZL,"diffAfterUpdatingChildren");function QL(n,e,t){let r=n.attributes,i=e.attributes;for(let o in i){let c=i[o],u=t.getMeta(e);if(u?.isSVG&&wd[o])n.setAttributeNS(wd[o],o,c);else if(e.tagName==="CANVAS"&&o==="rr_dataURL"){let d=document.createElement("img");d.src=c,d.onload=()=>{let f=n.getContext("2d");f&&f.drawImage(d,0,0,d.width,d.height)}}else{if(e.tagName==="IFRAME"&&o==="srcdoc")continue;try{n.setAttribute(o,c)}catch(d){console.warn(d)}}}for(let{name:o}of Array.from(r))o in i||n.removeAttribute(o);e.scrollLeft&&(n.scrollLeft=e.scrollLeft),e.scrollTop&&(n.scrollTop=e.scrollTop)}a(QL,"diffProps");function Mv(n,e,t,r){let i=Array.from(n.childNodes),o=e.childNodes;if(i.length===0&&o.length===0)return;let c=0,u=i.length-1,d=0,f=o.length-1,p=i[c],g=i[u],y=o[d],b=o[f],E,C;for(;c<=u&&d<=f;)if(p===void 0)p=i[++c];else if(g===void 0)g=i[--u];else if(ei(p,y,t.mirror,r))p=i[++c],y=o[++d];else if(ei(g,b,t.mirror,r))g=i[--u],b=o[--f];else if(ei(p,b,t.mirror,r)){try{n.insertBefore(p,g.nextSibling)}catch(N){console.warn(N)}p=i[++c],b=o[--f]}else if(ei(g,y,t.mirror,r)){try{n.insertBefore(g,p)}catch(N){console.warn(N)}g=i[--u],y=o[++d]}else{if(!E){E={};for(let A=c;A<=u;A++){let _=i[A];_&&t.mirror.hasNode(_)&&(E[t.mirror.getId(_)]=A)}}C=E[r.getId(y)];let N=i[C];if(C!==void 0&&N&&ei(N,y,t.mirror,r)){try{n.insertBefore(N,p)}catch(A){console.warn(A)}i[C]=void 0}else{let A=Ga(y,t.mirror,r);n.nodeName==="#document"&&p&&(A.nodeType===A.DOCUMENT_TYPE_NODE&&p.nodeType===p.DOCUMENT_TYPE_NODE||A.nodeType===A.ELEMENT_NODE&&p.nodeType===p.ELEMENT_NODE)&&(n.removeChild(p),t.mirror.removeNodeFromMap(p),p=i[++c]);try{n.insertBefore(A,p||null)}catch(_){console.warn(_)}}y=o[++d]}if(c>u){let N=o[f+1],A=null;for(N&&(A=t.mirror.getNode(r.getId(N)));d<=f;++d){let _=Ga(o[d],t.mirror,r);try{n.insertBefore(_,A)}catch(z){console.warn(z)}}}else if(d>f)for(;c<=u;c++){let N=i[c];if(!(!N||N.parentNode!==n))try{n.removeChild(N),t.mirror.removeNodeFromMap(N)}catch(A){console.warn(A)}}let w=n.firstChild,M=e.firstChild;for(;w!==null&&M!==null;)Ua(w,M,t,r),w=w.nextSibling,M=M.nextSibling}a(Mv,"diffChildren");function Ga(n,e,t){let r=t.getId(n),i=t.getMeta(n),o=null;if(r>-1&&(o=e.getNode(r)),o!==null&&dh(o,n))return o;switch(n.RRNodeType){case Ee.Document:o=new Document;break;case Ee.DocumentType:o=document.implementation.createDocumentType(n.name,n.publicId,n.systemId);break;case Ee.Element:{let c=n.tagName.toLowerCase();c=YL[c]||c,i&&"isSVG"in i&&i?.isSVG?o=document.createElementNS(wd.svg,c):o=document.createElement(n.tagName);break}case Ee.Text:o=document.createTextNode(n.data);break;case Ee.Comment:o=document.createComment(n.data);break;case Ee.CDATA:o=document.createCDATASection(n.data);break}i&&e.add(o,{...i});try{ur?.add(o)}catch{}return o}a(Ga,"createOrGetNode");function dh(n,e){return n.nodeType!==e.nodeType?!1:n.nodeType!==n.ELEMENT_NODE||n.tagName.toUpperCase()===e.tagName}a(dh,"sameNodeType");function ei(n,e,t,r){let i=t.getId(n),o=r.getId(e);return i===-1||i!==o?!1:dh(n,e)}a(ei,"nodeMatching");var pi=class n extends vd{static{a(this,"RRDocument")}constructor(e){super(),Z(this,"UNSERIALIZED_STARTING_ID",-2),Z(this,"_unserializedId",this.UNSERIALIZED_STARTING_ID),Z(this,"mirror",sN()),Z(this,"scrollData",null),e&&(this.mirror=e)}get unserializedId(){return this._unserializedId--}createDocument(e,t,r){return new n}createDocumentType(e,t,r){let i=new JL(e,t,r);return i.ownerDocument=this,i}createElement(e){let t=e.toUpperCase(),r;switch(t){case"AUDIO":case"VIDEO":r=new xd(t);break;case"IFRAME":r=new Id(t,this.mirror);break;case"CANVAS":r=new Md(t);break;case"STYLE":r=new Td(t);break;case"DIALOG":r=new Cd(t);break;default:r=new mi(t);break}return r.ownerDocument=this,r}createComment(e){let t=new tN(e);return t.ownerDocument=this,t}createCDATASection(e){let t=new rN(e);return t.ownerDocument=this,t}createTextNode(e){let t=new eN(e);return t.ownerDocument=this,t}destroyTree(){this.firstChild=null,this.lastChild=null,this.mirror.reset()}open(){super.open(),this._unserializedId=this.UNSERIALIZED_STARTING_ID}},JL=$a,mi=class extends fi{static{a(this,"RRElement")}constructor(){super(...arguments),Z(this,"inputData",null),Z(this,"scrollData",null)}},xd=class extends bd{static{a(this,"RRMediaElement")}},Cd=class extends Ed{static{a(this,"RRDialogElement")}},Md=class extends mi{static{a(this,"RRCanvasElement")}constructor(){super(...arguments),Z(this,"rr_dataURL",null),Z(this,"canvasMutations",[])}getContext(){return null}},Td=class extends mi{static{a(this,"RRStyleElement")}constructor(){super(...arguments),Z(this,"rules",[])}},Id=class extends mi{static{a(this,"RRIFrameElement")}constructor(e,t){super(e),Z(this,"contentDocument",new pi),this.contentDocument.mirror=t}},eN=Wa,tN=Ba,rN=Va;function nN(n){return n instanceof HTMLFormElement?"FORM":n.tagName.toUpperCase()}a(nN,"getValidTagName");function Tv(n,e,t,r){let i;switch(n.nodeType){case kt.DOCUMENT_NODE:r&&r.nodeName==="IFRAME"?i=r.contentDocument:(i=e,i.compatMode=n.compatMode);break;case kt.DOCUMENT_TYPE_NODE:{let c=n;i=e.createDocumentType(c.name,c.publicId,c.systemId);break}case kt.ELEMENT_NODE:{let c=n,u=nN(c);i=e.createElement(u);let d=i;for(let{name:f,value:p}of Array.from(c.attributes))d.attributes[f]=p;c.scrollLeft&&(d.scrollLeft=c.scrollLeft),c.scrollTop&&(d.scrollTop=c.scrollTop);break}case kt.TEXT_NODE:i=e.createTextNode(n.textContent||"");break;case kt.CDATA_SECTION_NODE:i=e.createCDATASection(n.data);break;case kt.COMMENT_NODE:i=e.createComment(n.textContent||"");break;case kt.DOCUMENT_FRAGMENT_NODE:i=r.attachShadow({mode:"open"});break;default:return null}let o=t.getMeta(n);return e instanceof pi&&(o||(o=Iv(i,e.unserializedId),t.add(n,o)),e.mirror.add(i,{...o})),i}a(Tv,"buildFromNode");function iN(n,e=eR(),t=new pi){function r(i,o){let c=Tv(i,t,e,o);if(c!==null)if(o?.nodeName!=="IFRAME"&&i.nodeType!==kt.DOCUMENT_FRAGMENT_NODE&&(o?.appendChild(c),c.parentNode=o,c.parentElement=o),i.nodeName==="IFRAME"){let u=i.contentDocument;u&&r(u,c)}else(i.nodeType===kt.DOCUMENT_NODE||i.nodeType===kt.ELEMENT_NODE||i.nodeType===kt.DOCUMENT_FRAGMENT_NODE)&&(i.nodeType===kt.ELEMENT_NODE&&i.shadowRoot&&r(i.shadowRoot,c),i.childNodes.forEach(u=>r(u,c)))}return a(r,"walk2"),r(n,null),t}a(iN,"buildFromDom");function sN(){return new Ad}a(sN,"createMirror");var Ad=class{static{a(this,"Mirror22")}constructor(){Z(this,"idNodeMap",new Map),Z(this,"nodeMetaMap",new WeakMap)}getId(e){var t;return e?((t=this.getMeta(e))==null?void 0:t.id)??-1:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){let t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){let r=t.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,t)}replace(e,t){let r=this.getNode(e);if(r){let i=this.nodeMetaMap.get(r);i&&this.nodeMetaMap.set(t,i)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function Iv(n,e){switch(n.RRNodeType){case Ee.Document:return{id:e,type:n.RRNodeType,childNodes:[]};case Ee.DocumentType:{let t=n;return{id:e,type:n.RRNodeType,name:t.name,publicId:t.publicId,systemId:t.systemId}}case Ee.Element:return{id:e,type:n.RRNodeType,tagName:n.tagName.toLowerCase(),attributes:{},childNodes:[]};case Ee.Text:return{id:e,type:n.RRNodeType,textContent:n.textContent||""};case Ee.Comment:return{id:e,type:n.RRNodeType,textContent:n.textContent||""};case Ee.CDATA:return{id:e,type:n.RRNodeType,textContent:""}}}a(Iv,"getDefaultSN");var Rg={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},Lg={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},ya={},oN=a(()=>!!globalThis.Zone,"isAngularZonePresent");function hh(n){if(ya[n])return ya[n];let e=globalThis[n],t=e.prototype,r=n in Rg?Rg[n]:void 0,i=!!(r&&r.every(u=>{var d,f;return!!((f=(d=Object.getOwnPropertyDescriptor(t,u))==null?void 0:d.get)!=null&&f.toString().includes("[native code]"))})),o=n in Lg?Lg[n]:void 0,c=!!(o&&o.every(u=>{var d;return typeof t[u]=="function"&&((d=t[u])==null?void 0:d.toString().includes("[native code]"))}));if(i&&c&&!oN())return ya[n]=e.prototype,e.prototype;try{let u=document.createElement("iframe");document.body.appendChild(u);let d=u.contentWindow;if(!d)return e.prototype;let f=d[n].prototype;return document.body.removeChild(u),f?ya[n]=f:t}catch{return t}}a(hh,"getUntaintedPrototype");var Du={};function nn(n,e,t){var r;let i=`${n}.${String(t)}`;if(Du[i])return Du[i].call(e);let o=hh(n),c=(r=Object.getOwnPropertyDescriptor(o,t))==null?void 0:r.get;return c?(Du[i]=c,c.call(e)):e[t]}a(nn,"getUntaintedAccessor");var ku={};function Av(n,e,t){let r=`${n}.${String(t)}`;if(ku[r])return ku[r].bind(e);let o=hh(n)[t];return typeof o!="function"?e[t]:(ku[r]=o,o.bind(e))}a(Av,"getUntaintedMethod");function aN(n){return nn("Node",n,"childNodes")}a(aN,"childNodes");function lN(n){return nn("Node",n,"parentNode")}a(lN,"parentNode");function cN(n){return nn("Node",n,"parentElement")}a(cN,"parentElement");function uN(n){return nn("Node",n,"textContent")}a(uN,"textContent");function dN(n,e){return Av("Node",n,"contains")(e)}a(dN,"contains");function hN(n){return Av("Node",n,"getRootNode")()}a(hN,"getRootNode");function fN(n){return!n||!("host"in n)?null:nn("ShadowRoot",n,"host")}a(fN,"host");function pN(n){return n.styleSheets}a(pN,"styleSheets");function mN(n){return!n||!("shadowRoot"in n)?null:nn("Element",n,"shadowRoot")}a(mN,"shadowRoot");function gN(n,e){return nn("Element",n,"querySelector")(e)}a(gN,"querySelector");function yN(n,e){return nn("Element",n,"querySelectorAll")(e)}a(yN,"querySelectorAll");function Rv(){return hh("MutationObserver").constructor}a(Rv,"mutationObserverCtor");function In(n,e,t){try{if(!(e in n))return()=>{};let r=n[e],i=t(r);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:r}})),n[e]=i,()=>{n[e]=r}}catch{return()=>{}}}a(In,"patch");var ve={childNodes:aN,parentNode:lN,parentElement:cN,textContent:uN,contains:dN,getRootNode:hN,host:fN,styleSheets:pN,shadowRoot:mN,querySelector:gN,querySelectorAll:yN,mutationObserver:Rv,patch:In};function Et(n,e,t=document){let r={capture:!0,passive:!0};return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e,r)}a(Et,"on");var ti=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,Ng={map:{},getId(){return console.error(ti),-1},getNode(){return console.error(ti),null},removeNodeFromMap(){console.error(ti)},has(){return console.error(ti),!1},reset(){console.error(ti)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(Ng=new Proxy(Ng,{get(n,e,t){return e==="map"&&console.error(ti),Reflect.get(n,e,t)}}));function As(n,e,t={}){let r=null,i=0;return function(...o){let c=Date.now();!i&&t.leading===!1&&(i=c);let u=e-(c-i),d=this;u<=0||u>e?(r&&(clearTimeout(r),r=null),i=c,n.apply(d,o)):!r&&t.trailing!==!1&&(r=setTimeout(()=>{i=t.leading===!1?0:Date.now(),r=null,n.apply(d,o)},u))}}a(As,"throttle");function cl(n,e,t,r,i=window){let o=i.Object.getOwnPropertyDescriptor(n,e);return i.Object.defineProperty(n,e,r?t:{set(c){setTimeout(()=>{t.set.call(this,c)},0),o&&o.set&&o.set.call(this,c)}}),()=>cl(n,e,o||{},!0)}a(cl,"hookSetter");var za=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(za=a(()=>new Date().getTime(),"nowTimestamp"));function Lv(n){var e,t,r,i;let o=n.document;return{left:o.scrollingElement?o.scrollingElement.scrollLeft:n.pageXOffset!==void 0?n.pageXOffset:o.documentElement.scrollLeft||o?.body&&((e=ve.parentElement(o.body))==null?void 0:e.scrollLeft)||((t=o?.body)==null?void 0:t.scrollLeft)||0,top:o.scrollingElement?o.scrollingElement.scrollTop:n.pageYOffset!==void 0?n.pageYOffset:o?.documentElement.scrollTop||o?.body&&((r=ve.parentElement(o.body))==null?void 0:r.scrollTop)||((i=o?.body)==null?void 0:i.scrollTop)||0}}a(Lv,"getWindowScroll");function Nv(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}a(Nv,"getWindowHeight");function Ov(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}a(Ov,"getWindowWidth");function _v(n){return n?n.nodeType===n.ELEMENT_NODE?n:ve.parentElement(n):null}a(_v,"closestElementOfNode");function St(n,e,t,r){if(!n)return!1;let i=_v(n);if(!i)return!1;try{if(typeof e=="string"){if(i.classList.contains(e)||r&&i.closest("."+e)!==null)return!0}else if(La(i,e,r))return!0}catch{}return!!(t&&(i.matches(t)||r&&i.closest(t)!==null))}a(St,"isBlocked");function vN(n,e){return e.getId(n)!==-1}a(vN,"isSerialized");function Pu(n,e,t){return n.tagName==="TITLE"&&t.headTitleMutations?!0:e.getId(n)===bs}a(Pu,"isIgnored");function Dv(n,e){if(fs(n))return!1;let t=e.getId(n);if(!e.has(t))return!0;let r=ve.parentNode(n);return r&&r.nodeType===n.DOCUMENT_NODE?!1:r?Dv(r,e):!0}a(Dv,"isAncestorRemoved");function Rd(n){return!!n.changedTouches}a(Rd,"legacy_isTouchEvent");function kv(n=window){"NodeList"in n&&!n.NodeList.prototype.forEach&&(n.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in n&&!n.DOMTokenList.prototype.forEach&&(n.DOMTokenList.prototype.forEach=Array.prototype.forEach)}a(kv,"polyfill$1");function bN(n){let e={},t=a((i,o)=>{let c={value:i,parent:o,children:[]};return e[i.node.id]=c,c},"putIntoMap"),r=[];for(let i of n){let{nextId:o,parentId:c}=i;if(o&&o in e){let u=e[o];if(u.parent){let d=u.parent.children.indexOf(u);u.parent.children.splice(d,0,t(i,u.parent))}else{let d=r.indexOf(u);r.splice(d,0,t(i,null))}continue}if(c in e){let u=e[c];u.children.push(t(i,u));continue}r.push(t(i,null))}return r}a(bN,"queueToResolveTrees");function Pv(n,e){e(n.value);for(let t=n.children.length-1;t>=0;t--)Pv(n.children[t],e)}a(Pv,"iterateResolveTree");function gs(n,e){return!!(n.nodeName==="IFRAME"&&e.getMeta(n))}a(gs,"isSerializedIframe");function Fv(n,e){return!!(n.nodeName==="LINK"&&n.nodeType===n.ELEMENT_NODE&&n.getAttribute&&n.getAttribute("rel")==="stylesheet"&&e.getMeta(n))}a(Fv,"isSerializedStylesheet");function Hv(n,e){var t,r;let i=(r=(t=n.ownerDocument)==null?void 0:t.defaultView)==null?void 0:r.frameElement;if(!i||i===e)return{x:0,y:0,relativeScale:1,absoluteScale:1};let o=i.getBoundingClientRect(),c=Hv(i,e),u=o.height/i.clientHeight;return{x:o.x*c.relativeScale+c.x,y:o.y*c.relativeScale+c.y,relativeScale:u,absoluteScale:c.absoluteScale*u}}a(Hv,"getBaseDimension");function xn(n){return n?n instanceof Qt&&"shadowRoot"in n?!!n.shadowRoot:!!ve.shadowRoot(n):!1}a(xn,"hasShadowRoot");function ds(n,e){let t=n[e[0]];return e.length===1?t:ds(t.cssRules[e[1]].cssRules,e.slice(2))}a(ds,"getNestedRule");function Og(n){let e=[...n],t=e.pop();return{positions:e,index:t}}a(Og,"getPositionsAndIndex");function EN(n){let e=new Set,t=[];for(let r=n.length;r--;){let i=n[r];e.has(i.id)||(t.push(i),e.add(i.id))}return t}a(EN,"uniqueTextMutations");var qa=class{static{a(this,"StyleSheetMirror")}constructor(){k(this,"id",1),k(this,"styleIDMap",new WeakMap),k(this,"idStyleMap",new Map)}getId(e){return this.styleIDMap.get(e)??-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let r;return t===void 0?r=this.id++:r=t,this.styleIDMap.set(e,r),this.idStyleMap.set(r,e),r}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}};function $v(n){var e;let t=null;return"getRootNode"in n&&((e=ve.getRootNode(n))==null?void 0:e.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&ve.host(ve.getRootNode(n))&&(t=ve.host(ve.getRootNode(n))),t}a($v,"getShadowHost");function SN(n){let e=n,t;for(;t=$v(e);)e=t;return e}a(SN,"getRootShadowHost");function wN(n){let e=n.ownerDocument;if(!e)return!1;let t=SN(n);return ve.contains(e,t)}a(wN,"shadowHostInDom");function Wv(n){let e=n.ownerDocument;return e?ve.contains(e,n)||wN(n):!1}a(Wv,"inDom");var U=(n=>(n[n.DomContentLoaded=0]="DomContentLoaded",n[n.Load=1]="Load",n[n.FullSnapshot=2]="FullSnapshot",n[n.IncrementalSnapshot=3]="IncrementalSnapshot",n[n.Meta=4]="Meta",n[n.Custom=5]="Custom",n[n.Plugin=6]="Plugin",n))(U||{}),$=(n=>(n[n.Mutation=0]="Mutation",n[n.MouseMove=1]="MouseMove",n[n.MouseInteraction=2]="MouseInteraction",n[n.Scroll=3]="Scroll",n[n.ViewportResize=4]="ViewportResize",n[n.Input=5]="Input",n[n.TouchMove=6]="TouchMove",n[n.MediaInteraction=7]="MediaInteraction",n[n.StyleSheetRule=8]="StyleSheetRule",n[n.CanvasMutation=9]="CanvasMutation",n[n.Font=10]="Font",n[n.Log=11]="Log",n[n.Drag=12]="Drag",n[n.StyleDeclaration=13]="StyleDeclaration",n[n.Selection=14]="Selection",n[n.AdoptedStyleSheet=15]="AdoptedStyleSheet",n[n.CustomElement=16]="CustomElement",n))($||{}),re=(n=>(n[n.MouseUp=0]="MouseUp",n[n.MouseDown=1]="MouseDown",n[n.Click=2]="Click",n[n.ContextMenu=3]="ContextMenu",n[n.DblClick=4]="DblClick",n[n.Focus=5]="Focus",n[n.Blur=6]="Blur",n[n.TouchStart=7]="TouchStart",n[n.TouchMove_Departed=8]="TouchMove_Departed",n[n.TouchEnd=9]="TouchEnd",n[n.TouchCancel=10]="TouchCancel",n))(re||{}),Rr=(n=>(n[n.Mouse=0]="Mouse",n[n.Pen=1]="Pen",n[n.Touch=2]="Touch",n))(Rr||{}),_r=(n=>(n[n["2D"]=0]="2D",n[n.WebGL=1]="WebGL",n[n.WebGL2=2]="WebGL2",n))(_r||{}),Jr=(n=>(n[n.Play=0]="Play",n[n.Pause=1]="Pause",n[n.Seeked=2]="Seeked",n[n.VolumeChange=3]="VolumeChange",n[n.RateChange=4]="RateChange",n))(Jr||{}),ye=(n=>(n.Start="start",n.Pause="pause",n.Resume="resume",n.Resize="resize",n.Finish="finish",n.FullsnapshotRebuilded="fullsnapshot-rebuilded",n.LoadStylesheetStart="load-stylesheet-start",n.LoadStylesheetEnd="load-stylesheet-end",n.SkipStart="skip-start",n.SkipEnd="skip-end",n.MouseInteraction="mouse-interaction",n.EventCast="event-cast",n.CustomEvent="custom-event",n.Flush="flush",n.StateChange="state-change",n.PlayBack="play-back",n.Destroy="destroy",n))(ye||{}),Lr=(n=>(n[n.Document=0]="Document",n[n.DocumentType=1]="DocumentType",n[n.Element=2]="Element",n[n.Text=3]="Text",n[n.CDATA=4]="CDATA",n[n.Comment=5]="Comment",n))(Lr||{});function _g(n){return"__ln"in n}a(_g,"isNodeInLinkedList");var Ld=class{static{a(this,"DoubleLinkedList")}constructor(){k(this,"length",0),k(this,"head",null),k(this,"tail",null)}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let r=0;r<e;r++)t=t?.next||null;return t}addNode(e){let t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&_g(e.previousSibling)){let r=e.previousSibling.__ln.next;t.next=r,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,r&&(r.previous=t)}else if(e.nextSibling&&_g(e.nextSibling)&&e.nextSibling.__ln.previous){let r=e.nextSibling.__ln.previous;t.previous=r,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,r&&(r.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;t.next===null&&(this.tail=t),this.length++}removeNode(e){let t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}},Dg=a((n,e)=>`${n}@${e}`,"moveKey"),Nd=class{static{a(this,"MutationBuffer")}constructor(){k(this,"frozen",!1),k(this,"locked",!1),k(this,"texts",[]),k(this,"attributes",[]),k(this,"attributeMap",new WeakMap),k(this,"removes",[]),k(this,"mapRemoves",[]),k(this,"movedMap",{}),k(this,"addedSet",new Set),k(this,"movedSet",new Set),k(this,"droppedSet",new Set),k(this,"removesSubTreeCache",new Set),k(this,"mutationCb"),k(this,"blockClass"),k(this,"blockSelector"),k(this,"maskTextClass"),k(this,"maskTextSelector"),k(this,"inlineStylesheet"),k(this,"maskInputOptions"),k(this,"maskTextFn"),k(this,"maskInputFn"),k(this,"keepIframeSrcFn"),k(this,"recordCanvas"),k(this,"inlineImages"),k(this,"slimDOMOptions"),k(this,"dataURLOptions"),k(this,"doc"),k(this,"mirror"),k(this,"iframeManager"),k(this,"stylesheetManager"),k(this,"shadowDomManager"),k(this,"canvasManager"),k(this,"processedNodeManager"),k(this,"unattachedDoc"),k(this,"processMutations",e=>{e.forEach(this.processMutation),this.emit()}),k(this,"emit",()=>{if(this.frozen||this.locked)return;let e=[],t=new Set,r=new Ld,i=a(d=>{let f=d,p=bs;for(;p===bs;)f=f&&f.nextSibling,p=f&&this.mirror.getId(f);return p},"getNextId"),o=a(d=>{let f=ve.parentNode(d);if(!f||!Wv(d))return;let p=!1;if(d.nodeType===Node.TEXT_NODE){let E=f.tagName;if(E==="TEXTAREA")return;E==="STYLE"&&this.addedSet.has(f)&&(p=!0)}let g=fs(f)?this.mirror.getId($v(d)):this.mirror.getId(f),y=i(d);if(g===-1||y===-1)return r.addNode(d);let b=ii(d,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:a(E=>{gs(E,this.mirror)&&this.iframeManager.addIframe(E),Fv(E,this.mirror)&&this.stylesheetManager.trackLinkElement(E),xn(d)&&this.shadowDomManager.addShadowRoot(ve.shadowRoot(d),this.doc)},"onSerialize"),onIframeLoad:a((E,C)=>{this.iframeManager.attachIframe(E,C),this.shadowDomManager.observeAttachShadow(E)},"onIframeLoad"),onStylesheetLoad:a((E,C)=>{this.stylesheetManager.attachLinkElement(E,C)},"onStylesheetLoad"),cssCaptured:p});b&&(e.push({parentId:g,nextId:y,node:b}),t.add(b.id))},"pushAdd");for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(let d of this.movedSet)kg(this.removesSubTreeCache,d,this.mirror)&&!this.movedSet.has(ve.parentNode(d))||o(d);for(let d of this.addedSet)!Pg(this.droppedSet,d)&&!kg(this.removesSubTreeCache,d,this.mirror)||Pg(this.movedSet,d)?o(d):this.droppedSet.add(d);let c=null;for(;r.length;){let d=null;if(c){let f=this.mirror.getId(ve.parentNode(c.value)),p=i(c.value);f!==-1&&p!==-1&&(d=c)}if(!d){let f=r.tail;for(;f;){let p=f;if(f=f.previous,p){let g=this.mirror.getId(ve.parentNode(p.value));if(i(p.value)===-1)continue;if(g!==-1){d=p;break}else{let b=p.value,E=ve.parentNode(b);if(E&&E.nodeType===Node.DOCUMENT_FRAGMENT_NODE){let C=ve.host(E);if(this.mirror.getId(C)!==-1){d=p;break}}}}}}if(!d){for(;r.head;)r.removeNode(r.head.value);break}c=d.previous,r.removeNode(d.value),o(d.value)}let u={texts:this.texts.map(d=>{let f=d.node,p=ve.parentNode(f);return p&&p.tagName==="TEXTAREA"&&this.genTextAreaValueMutation(p),{id:this.mirror.getId(f),value:d.value}}).filter(d=>!t.has(d.id)).filter(d=>this.mirror.has(d.id)),attributes:this.attributes.map(d=>{let{attributes:f}=d;if(typeof f.style=="string"){let p=JSON.stringify(d.styleDiff),g=JSON.stringify(d._unchangedStyles);p.length<f.style.length&&(p+g).split("var(").length===f.style.split("var(").length&&(f.style=d.styleDiff)}return{id:this.mirror.getId(d.node),attributes:f}}).filter(d=>!t.has(d.id)).filter(d=>this.mirror.has(d.id)),removes:this.removes,adds:e};!u.texts.length&&!u.attributes.length&&!u.removes.length&&!u.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.removesSubTreeCache=new Set,this.movedMap={},this.mutationCb(u))}),k(this,"genTextAreaValueMutation",e=>{let t=this.attributeMap.get(e);t||(t={node:e,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(t),this.attributeMap.set(e,t));let r=Array.from(ve.childNodes(e),i=>ve.textContent(i)||"").join("");t.attributes.value=Ia({element:e,maskInputOptions:this.maskInputOptions,tagName:e.tagName,type:Aa(e),value:r,maskInputFn:this.maskInputFn})}),k(this,"processMutation",e=>{if(!Pu(e.target,this.mirror,this.slimDOMOptions))switch(e.type){case"characterData":{let t=ve.textContent(e.target);!St(e.target,this.blockClass,this.blockSelector,!1)&&t!==e.oldValue&&this.texts.push({value:iy(e.target,this.maskTextClass,this.maskTextSelector,!0)&&t?this.maskTextFn?this.maskTextFn(t,_v(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{let t=e.target,r=e.attributeName,i=e.target.getAttribute(r);if(r==="value"){let c=Aa(t);i=Ia({element:t,maskInputOptions:this.maskInputOptions,tagName:t.tagName,type:c,value:i,maskInputFn:this.maskInputFn})}if(St(e.target,this.blockClass,this.blockSelector,!1)||i===e.oldValue)return;let o=this.attributeMap.get(e.target);if(t.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(i))if(!t.contentDocument)r="rr_src";else return;if(o||(o={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(e.target,o)),r==="type"&&t.tagName==="INPUT"&&(e.oldValue||"").toLowerCase()==="password"&&t.setAttribute("data-rr-is-password","true"),!ny(t.tagName,r))if(o.attributes[r]=ry(this.doc,tn(t.tagName),tn(r),i),r==="style"){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}let c=this.unattachedDoc.createElement("span");e.oldValue&&c.setAttribute("style",e.oldValue);for(let u of Array.from(t.style)){let d=t.style.getPropertyValue(u),f=t.style.getPropertyPriority(u);d!==c.style.getPropertyValue(u)||f!==c.style.getPropertyPriority(u)?f===""?o.styleDiff[u]=d:o.styleDiff[u]=[d,f]:o._unchangedStyles[u]=[d,f]}for(let u of Array.from(c.style))t.style.getPropertyValue(u)===""&&(o.styleDiff[u]=!1)}else r==="open"&&t.tagName==="DIALOG"&&(t.matches("dialog:modal")?o.attributes.rr_open_mode="modal":o.attributes.rr_open_mode="non-modal");break}case"childList":{if(St(e.target,this.blockClass,this.blockSelector,!0))return;if(e.target.tagName==="TEXTAREA"){this.genTextAreaValueMutation(e.target);return}e.addedNodes.forEach(t=>this.genAdds(t,e.target)),e.removedNodes.forEach(t=>{let r=this.mirror.getId(t),i=fs(e.target)?this.mirror.getId(ve.host(e.target)):this.mirror.getId(e.target);St(e.target,this.blockClass,this.blockSelector,!1)||Pu(t,this.mirror,this.slimDOMOptions)||!vN(t,this.mirror)||(this.addedSet.has(t)?(Od(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&r===-1||Dv(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[Dg(r,i)]?Od(this.movedSet,t):(this.removes.push({parentId:i,id:r,isShadow:fs(e.target)&&ps(e.target)?!0:void 0}),xN(t,this.removesSubTreeCache))),this.mapRemoves.push(t))});break}}}),k(this,"genAdds",(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!(this.addedSet.has(e)||this.movedSet.has(e))){if(this.mirror.hasNode(e)){if(Pu(e,this.mirror,this.slimDOMOptions))return;this.movedSet.add(e);let r=null;t&&this.mirror.hasNode(t)&&(r=this.mirror.getId(t)),r&&r!==-1&&(this.movedMap[Dg(this.mirror.getId(e),r)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);St(e,this.blockClass,this.blockSelector,!1)||(ve.childNodes(e).forEach(r=>this.genAdds(r)),xn(e)&&ve.childNodes(ve.shadowRoot(e)).forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,e)}))}})}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(t=>{this[t]=e[t]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}};function Od(n,e){n.delete(e),ve.childNodes(e).forEach(t=>Od(n,t))}a(Od,"deepDelete");function xN(n,e){let t=[n];for(;t.length;){let r=t.pop();e.has(r)||(e.add(r),ve.childNodes(r).forEach(i=>t.push(i)))}}a(xN,"processRemoves");function kg(n,e,t){return n.size===0?!1:CN(n,e)}a(kg,"isParentRemoved");function CN(n,e,t){let r=ve.parentNode(e);return r?n.has(r):!1}a(CN,"_isParentRemoved");function Pg(n,e){return n.size===0?!1:Bv(n,e)}a(Pg,"isAncestorInSet");function Bv(n,e){let t=ve.parentNode(e);return t?n.has(t)?!0:Bv(n,t):!1}a(Bv,"_isAncestorInSet");var ys;function MN(n){ys=n}a(MN,"registerErrorHandler");function TN(){ys=void 0}a(TN,"unregisterErrorHandler");var Se=a(n=>ys?a((...t)=>{try{return n(...t)}catch(r){if(ys&&ys(r)===!0)return;throw r}},"rrwebWrapped"):n,"callbackWrapper"),Cn=[];function _s(n){try{if("composedPath"in n){let e=n.composedPath();if(e.length)return e[0]}else if("path"in n&&n.path.length)return n.path[0]}catch{}return n&&n.target}a(_s,"getEventTarget");function Vv(n,e){let t=new Nd;Cn.push(t),t.init(n);let r=new(Rv())(Se(t.processMutations.bind(t)));return r.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),r}a(Vv,"initMutationObserver");function IN({mousemoveCb:n,sampling:e,doc:t,mirror:r}){if(e.mousemove===!1)return()=>{};let i=typeof e.mousemove=="number"?e.mousemove:50,o=typeof e.mousemoveCallback=="number"?e.mousemoveCallback:500,c=[],u,d=As(Se(g=>{let y=Date.now()-u;n(c.map(b=>(b.timeOffset-=y,b)),g),c=[],u=null}),o),f=Se(As(Se(g=>{let y=_s(g),{clientX:b,clientY:E}=Rd(g)?g.changedTouches[0]:g;u||(u=za()),c.push({x:b,y:E,id:r.getId(y),timeOffset:za()-u}),d(typeof DragEvent<"u"&&g instanceof DragEvent?$.Drag:g instanceof MouseEvent?$.MouseMove:$.TouchMove)}),i,{trailing:!1})),p=[Et("mousemove",f,t),Et("touchmove",f,t),Et("drag",f,t)];return Se(()=>{p.forEach(g=>g())})}a(IN,"initMoveObserver");function AN({mouseInteractionCb:n,doc:e,mirror:t,blockClass:r,blockSelector:i,sampling:o}){if(o.mouseInteraction===!1)return()=>{};let c=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,u=[],d=null,f=a(p=>g=>{let y=_s(g);if(St(y,r,i,!0))return;let b=null,E=p;if("pointerType"in g){switch(g.pointerType){case"mouse":b=Rr.Mouse;break;case"touch":b=Rr.Touch;break;case"pen":b=Rr.Pen;break}b===Rr.Touch?re[p]===re.MouseDown?E="TouchStart":re[p]===re.MouseUp&&(E="TouchEnd"):Rr.Pen}else Rd(g)&&(b=Rr.Touch);b!==null?(d=b,(E.startsWith("Touch")&&b===Rr.Touch||E.startsWith("Mouse")&&b===Rr.Mouse)&&(b=null)):re[p]===re.Click&&(b=d,d=null);let C=Rd(g)?g.changedTouches[0]:g;if(!C)return;let w=t.getId(y),{clientX:M,clientY:N}=C;Se(n)({type:re[E],id:w,x:M,y:N,...b!==null&&{pointerType:b}})},"getHandler");return Object.keys(re).filter(p=>Number.isNaN(Number(p))&&!p.endsWith("_Departed")&&c[p]!==!1).forEach(p=>{let g=tn(p),y=f(p);if(window.PointerEvent)switch(re[p]){case re.MouseDown:case re.MouseUp:g=g.replace("mouse","pointer");break;case re.TouchStart:case re.TouchEnd:return}u.push(Et(g,y,e))}),Se(()=>{u.forEach(p=>p())})}a(AN,"initMouseInteractionObserver");function Uv({scrollCb:n,doc:e,mirror:t,blockClass:r,blockSelector:i,sampling:o}){let c=Se(As(Se(u=>{let d=_s(u);if(!d||St(d,r,i,!0))return;let f=t.getId(d);if(d===e&&e.defaultView){let p=Lv(e.defaultView);n({id:f,x:p.left,y:p.top})}else n({id:f,x:d.scrollLeft,y:d.scrollTop})}),o.scroll||100));return Et("scroll",c,e)}a(Uv,"initScrollObserver");function RN({viewportResizeCb:n},{win:e}){let t=-1,r=-1,i=Se(As(Se(()=>{let o=Nv(),c=Ov();(t!==o||r!==c)&&(n({width:Number(c),height:Number(o)}),t=o,r=c)}),200));return Et("resize",i,e)}a(RN,"initViewportResizeObserver");var LN=["INPUT","TEXTAREA","SELECT"],Fg=new WeakMap;function NN({inputCb:n,doc:e,mirror:t,blockClass:r,blockSelector:i,ignoreClass:o,ignoreSelector:c,maskInputOptions:u,maskInputFn:d,sampling:f,userTriggeredOnInput:p}){function g(N){let A=_s(N),_=N.isTrusted,z=A&&A.tagName;if(A&&z==="OPTION"&&(A=ve.parentElement(A)),!A||!z||LN.indexOf(z)<0||St(A,r,i,!0)||A.classList.contains(o)||c&&A.matches(c))return;let G=A.value,ee=!1,V=Aa(A)||"";V==="radio"||V==="checkbox"?ee=A.checked:(u[z.toLowerCase()]||u[V])&&(G=Ia({element:A,maskInputOptions:u,tagName:z,type:V,value:G,maskInputFn:d})),y(A,p?{text:G,isChecked:ee,userTriggered:_}:{text:G,isChecked:ee});let j=A.name;V==="radio"&&j&&ee&&e.querySelectorAll(`input[type="radio"][name="${j}"]`).forEach(oe=>{if(oe!==A){let W=oe.value;y(oe,p?{text:W,isChecked:!ee,userTriggered:!1}:{text:W,isChecked:!ee})}})}a(g,"eventHandler");function y(N,A){let _=Fg.get(N);if(!_||_.text!==A.text||_.isChecked!==A.isChecked){Fg.set(N,A);let z=t.getId(N);Se(n)({...A,id:z})}}a(y,"cbWithDedup");let E=(f.input==="last"?["change"]:["input","change"]).map(N=>Et(N,Se(g),e)),C=e.defaultView;if(!C)return()=>{E.forEach(N=>N())};let w=C.Object.getOwnPropertyDescriptor(C.HTMLInputElement.prototype,"value"),M=[[C.HTMLInputElement.prototype,"value"],[C.HTMLInputElement.prototype,"checked"],[C.HTMLSelectElement.prototype,"value"],[C.HTMLTextAreaElement.prototype,"value"],[C.HTMLSelectElement.prototype,"selectedIndex"],[C.HTMLOptionElement.prototype,"selected"]];return w&&w.set&&E.push(...M.map(N=>cl(N[0],N[1],{set(){Se(g)({target:this,isTrusted:!1})}},!1,C))),Se(()=>{E.forEach(N=>N())})}a(NN,"initInputObserver");function ja(n){let e=[];function t(r,i){if(va("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||va("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||va("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||va("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){let c=Array.from(r.parentRule.cssRules).indexOf(r);i.unshift(c)}else if(r.parentStyleSheet){let c=Array.from(r.parentStyleSheet.cssRules).indexOf(r);i.unshift(c)}return i}return a(t,"recurse"),t(n,e)}a(ja,"getNestedCSSRulePositions");function Qr(n,e,t){let r,i;return n?(n.ownerNode?r=e.getId(n.ownerNode):i=t.getId(n),{styleId:i,id:r}):{}}a(Qr,"getIdAndStyleId");function ON({styleSheetRuleCb:n,mirror:e,stylesheetManager:t},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};let i=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(i,{apply:Se((p,g,y)=>{let[b,E]=y,{id:C,styleId:w}=Qr(g,e,t.styleMirror);return(C&&C!==-1||w&&w!==-1)&&n({id:C,styleId:w,adds:[{rule:b,index:E}]}),p.apply(g,y)})}),r.CSSStyleSheet.prototype.addRule=function(p,g,y=this.cssRules.length){let b=`${p} { ${g} }`;return r.CSSStyleSheet.prototype.insertRule.apply(this,[b,y])};let o=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(o,{apply:Se((p,g,y)=>{let[b]=y,{id:E,styleId:C}=Qr(g,e,t.styleMirror);return(E&&E!==-1||C&&C!==-1)&&n({id:E,styleId:C,removes:[{index:b}]}),p.apply(g,y)})}),r.CSSStyleSheet.prototype.removeRule=function(p){return r.CSSStyleSheet.prototype.deleteRule.apply(this,[p])};let c;r.CSSStyleSheet.prototype.replace&&(c=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(c,{apply:Se((p,g,y)=>{let[b]=y,{id:E,styleId:C}=Qr(g,e,t.styleMirror);return(E&&E!==-1||C&&C!==-1)&&n({id:E,styleId:C,replace:b}),p.apply(g,y)})}));let u;r.CSSStyleSheet.prototype.replaceSync&&(u=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(u,{apply:Se((p,g,y)=>{let[b]=y,{id:E,styleId:C}=Qr(g,e,t.styleMirror);return(E&&E!==-1||C&&C!==-1)&&n({id:E,styleId:C,replaceSync:b}),p.apply(g,y)})}));let d={};ba("CSSGroupingRule")?d.CSSGroupingRule=r.CSSGroupingRule:(ba("CSSMediaRule")&&(d.CSSMediaRule=r.CSSMediaRule),ba("CSSConditionRule")&&(d.CSSConditionRule=r.CSSConditionRule),ba("CSSSupportsRule")&&(d.CSSSupportsRule=r.CSSSupportsRule));let f={};return Object.entries(d).forEach(([p,g])=>{f[p]={insertRule:g.prototype.insertRule,deleteRule:g.prototype.deleteRule},g.prototype.insertRule=new Proxy(f[p].insertRule,{apply:Se((y,b,E)=>{let[C,w]=E,{id:M,styleId:N}=Qr(b.parentStyleSheet,e,t.styleMirror);return(M&&M!==-1||N&&N!==-1)&&n({id:M,styleId:N,adds:[{rule:C,index:[...ja(b),w||0]}]}),y.apply(b,E)})}),g.prototype.deleteRule=new Proxy(f[p].deleteRule,{apply:Se((y,b,E)=>{let[C]=E,{id:w,styleId:M}=Qr(b.parentStyleSheet,e,t.styleMirror);return(w&&w!==-1||M&&M!==-1)&&n({id:w,styleId:M,removes:[{index:[...ja(b),C]}]}),y.apply(b,E)})})}),Se(()=>{r.CSSStyleSheet.prototype.insertRule=i,r.CSSStyleSheet.prototype.deleteRule=o,c&&(r.CSSStyleSheet.prototype.replace=c),u&&(r.CSSStyleSheet.prototype.replaceSync=u),Object.entries(d).forEach(([p,g])=>{g.prototype.insertRule=f[p].insertRule,g.prototype.deleteRule=f[p].deleteRule})})}a(ON,"initStyleSheetObserver");function Gv({mirror:n,stylesheetManager:e},t){var r,i,o;let c=null;t.nodeName==="#document"?c=n.getId(t):c=n.getId(ve.host(t));let u=t.nodeName==="#document"?(r=t.defaultView)==null?void 0:r.Document:(o=(i=t.ownerDocument)==null?void 0:i.defaultView)==null?void 0:o.ShadowRoot,d=u?.prototype?Object.getOwnPropertyDescriptor(u?.prototype,"adoptedStyleSheets"):void 0;return c===null||c===-1||!u||!d?()=>{}:(Object.defineProperty(t,"adoptedStyleSheets",{configurable:d.configurable,enumerable:d.enumerable,get(){var f;return(f=d.get)==null?void 0:f.call(this)},set(f){var p;let g=(p=d.set)==null?void 0:p.call(this,f);if(c!==null&&c!==-1)try{e.adoptStyleSheets(f,c)}catch{}return g}}),Se(()=>{Object.defineProperty(t,"adoptedStyleSheets",{configurable:d.configurable,enumerable:d.enumerable,get:d.get,set:d.set})}))}a(Gv,"initAdoptedStyleSheetObserver");function _N({styleDeclarationCb:n,mirror:e,ignoreCSSAttributes:t,stylesheetManager:r},{win:i}){let o=i.CSSStyleDeclaration.prototype.setProperty;i.CSSStyleDeclaration.prototype.setProperty=new Proxy(o,{apply:Se((u,d,f)=>{var p;let[g,y,b]=f;if(t.has(g))return o.apply(d,[g,y,b]);let{id:E,styleId:C}=Qr((p=d.parentRule)==null?void 0:p.parentStyleSheet,e,r.styleMirror);return(E&&E!==-1||C&&C!==-1)&&n({id:E,styleId:C,set:{property:g,value:y,priority:b},index:ja(d.parentRule)}),u.apply(d,f)})});let c=i.CSSStyleDeclaration.prototype.removeProperty;return i.CSSStyleDeclaration.prototype.removeProperty=new Proxy(c,{apply:Se((u,d,f)=>{var p;let[g]=f;if(t.has(g))return c.apply(d,[g]);let{id:y,styleId:b}=Qr((p=d.parentRule)==null?void 0:p.parentStyleSheet,e,r.styleMirror);return(y&&y!==-1||b&&b!==-1)&&n({id:y,styleId:b,remove:{property:g},index:ja(d.parentRule)}),u.apply(d,f)})}),Se(()=>{i.CSSStyleDeclaration.prototype.setProperty=o,i.CSSStyleDeclaration.prototype.removeProperty=c})}a(_N,"initStyleDeclarationObserver");function DN({mediaInteractionCb:n,blockClass:e,blockSelector:t,mirror:r,sampling:i,doc:o}){let c=Se(d=>As(Se(f=>{let p=_s(f);if(!p||St(p,e,t,!0))return;let{currentTime:g,volume:y,muted:b,playbackRate:E,loop:C}=p;n({type:d,id:r.getId(p),currentTime:g,volume:y,muted:b,playbackRate:E,loop:C})}),i.media||500)),u=[Et("play",c(Jr.Play),o),Et("pause",c(Jr.Pause),o),Et("seeked",c(Jr.Seeked),o),Et("volumechange",c(Jr.VolumeChange),o),Et("ratechange",c(Jr.RateChange),o)];return Se(()=>{u.forEach(d=>d())})}a(DN,"initMediaInteractionObserver");function kN({fontCb:n,doc:e}){let t=e.defaultView;if(!t)return()=>{};let r=[],i=new WeakMap,o=t.FontFace;t.FontFace=a(function(d,f,p){let g=new o(d,f,p);return i.set(g,{family:d,buffer:typeof f!="string",descriptors:p,fontSource:typeof f=="string"?f:JSON.stringify(Array.from(new Uint8Array(f)))}),g},"FontFace2");let c=In(e.fonts,"add",function(u){return function(d){return setTimeout(Se(()=>{let f=i.get(d);f&&(n(f),i.delete(d))}),0),u.apply(this,[d])}});return r.push(()=>{t.FontFace=o}),r.push(c),Se(()=>{r.forEach(u=>u())})}a(kN,"initFontObserver");function PN(n){let{doc:e,mirror:t,blockClass:r,blockSelector:i,selectionCb:o}=n,c=!0,u=Se(()=>{let d=e.getSelection();if(!d||c&&d?.isCollapsed)return;c=d.isCollapsed||!1;let f=[],p=d.rangeCount||0;for(let g=0;g<p;g++){let y=d.getRangeAt(g),{startContainer:b,startOffset:E,endContainer:C,endOffset:w}=y;St(b,r,i,!0)||St(C,r,i,!0)||f.push({start:t.getId(b),startOffset:E,end:t.getId(C),endOffset:w})}o({ranges:f})});return u(),Et("selectionchange",u)}a(PN,"initSelectionObserver");function FN({doc:n,customElementCb:e}){let t=n.defaultView;return!t||!t.customElements?()=>{}:In(t.customElements,"define",function(i){return function(o,c,u){try{e({define:{name:o}})}catch{console.warn(`Custom element callback failed for ${o}`)}return i.apply(this,[o,c,u])}})}a(FN,"initCustomElementObserver");function HN(n,e){let{mutationCb:t,mousemoveCb:r,mouseInteractionCb:i,scrollCb:o,viewportResizeCb:c,inputCb:u,mediaInteractionCb:d,styleSheetRuleCb:f,styleDeclarationCb:p,canvasMutationCb:g,fontCb:y,selectionCb:b,customElementCb:E}=n;n.mutationCb=(...C)=>{e.mutation&&e.mutation(...C),t(...C)},n.mousemoveCb=(...C)=>{e.mousemove&&e.mousemove(...C),r(...C)},n.mouseInteractionCb=(...C)=>{e.mouseInteraction&&e.mouseInteraction(...C),i(...C)},n.scrollCb=(...C)=>{e.scroll&&e.scroll(...C),o(...C)},n.viewportResizeCb=(...C)=>{e.viewportResize&&e.viewportResize(...C),c(...C)},n.inputCb=(...C)=>{e.input&&e.input(...C),u(...C)},n.mediaInteractionCb=(...C)=>{e.mediaInteaction&&e.mediaInteaction(...C),d(...C)},n.styleSheetRuleCb=(...C)=>{e.styleSheetRule&&e.styleSheetRule(...C),f(...C)},n.styleDeclarationCb=(...C)=>{e.styleDeclaration&&e.styleDeclaration(...C),p(...C)},n.canvasMutationCb=(...C)=>{e.canvasMutation&&e.canvasMutation(...C),g(...C)},n.fontCb=(...C)=>{e.font&&e.font(...C),y(...C)},n.selectionCb=(...C)=>{e.selection&&e.selection(...C),b(...C)},n.customElementCb=(...C)=>{e.customElement&&e.customElement(...C),E(...C)}}a(HN,"mergeHooks");function $N(n,e={}){let t=n.doc.defaultView;if(!t)return()=>{};HN(n,e);let r;n.recordDOM&&(r=Vv(n,n.doc));let i=IN(n),o=AN(n),c=Uv(n),u=RN(n,{win:t}),d=NN(n),f=DN(n),p=a(()=>{},"styleSheetObserver"),g=a(()=>{},"adoptedStyleSheetObserver"),y=a(()=>{},"styleDeclarationObserver"),b=a(()=>{},"fontObserver");n.recordDOM&&(p=ON(n,{win:t}),g=Gv(n,n.doc),y=_N(n,{win:t}),n.collectFonts&&(b=kN(n)));let E=PN(n),C=FN(n),w=[];for(let M of n.plugins)w.push(M.observer(M.callback,t,M.options));return Se(()=>{Cn.forEach(M=>M.reset()),r?.disconnect(),i(),o(),c(),u(),d(),f(),p(),g(),y(),b(),E(),C(),w.forEach(M=>M())})}a($N,"initObservers");function va(n){return typeof window[n]<"u"}a(va,"hasNestedCSSRule");function ba(n){return!!(typeof window[n]<"u"&&window[n].prototype&&"insertRule"in window[n].prototype&&"deleteRule"in window[n].prototype)}a(ba,"canMonkeyPatchNestedCSSRule");var Ka=class{static{a(this,"CrossOriginIframeMirror")}constructor(e){k(this,"iframeIdToRemoteIdMap",new WeakMap),k(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=e}getId(e,t,r,i){let o=r||this.getIdToRemoteIdMap(e),c=i||this.getRemoteIdToIdMap(e),u=o.get(t);return u||(u=this.generateIdFn(),o.set(t,u),c.set(u,t)),u}getIds(e,t){let r=this.getIdToRemoteIdMap(e),i=this.getRemoteIdToIdMap(e);return t.map(o=>this.getId(e,o,r,i))}getRemoteId(e,t,r){let i=r||this.getRemoteIdToIdMap(e);if(typeof t!="number")return t;let o=i.get(t);return o||-1}getRemoteIds(e,t){let r=this.getRemoteIdToIdMap(e);return t.map(i=>this.getRemoteId(e,i,r))}reset(e){if(!e){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}},_d=class{static{a(this,"IframeManager")}constructor(e){k(this,"iframes",new WeakMap),k(this,"crossOriginIframeMap",new WeakMap),k(this,"crossOriginIframeMirror",new Ka(ty)),k(this,"crossOriginIframeStyleMirror"),k(this,"crossOriginIframeRootIdMap",new WeakMap),k(this,"mirror"),k(this,"mutationCb"),k(this,"wrappedEmit"),k(this,"loadListener"),k(this,"stylesheetManager"),k(this,"recordCrossOriginIframes"),this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new Ka(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var r,i;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&((r=e.contentWindow)==null||r.addEventListener("message",this.handleMessage.bind(this))),(i=this.loadListener)==null||i.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){let t=e;if(t.data.type!=="rrweb"||t.origin!==t.data.origin||!e.source)return;let i=this.crossOriginIframeMap.get(e.source);if(!i)return;let o=this.transformCrossOriginEvent(i,t.data.event);o&&this.wrappedEmit(o,t.data.isCheckout)}transformCrossOriginEvent(e,t){var r;switch(t.type){case U.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);let i=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,i),this.patchRootIdOnNode(t.data.node,i),{timestamp:t.timestamp,type:U.IncrementalSnapshot,data:{source:$.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case U.Meta:case U.Load:case U.DomContentLoaded:return!1;case U.Plugin:return t;case U.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case U.IncrementalSnapshot:switch(t.data.source){case $.Mutation:return t.data.adds.forEach(i=>{this.replaceIds(i,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(i.node,e);let o=this.crossOriginIframeRootIdMap.get(e);o&&this.patchRootIdOnNode(i.node,o)}),t.data.removes.forEach(i=>{this.replaceIds(i,e,["parentId","id"])}),t.data.attributes.forEach(i=>{this.replaceIds(i,e,["id"])}),t.data.texts.forEach(i=>{this.replaceIds(i,e,["id"])}),t;case $.Drag:case $.TouchMove:case $.MouseMove:return t.data.positions.forEach(i=>{this.replaceIds(i,e,["id"])}),t;case $.ViewportResize:return!1;case $.MediaInteraction:case $.MouseInteraction:case $.Scroll:case $.CanvasMutation:case $.Input:return this.replaceIds(t.data,e,["id"]),t;case $.StyleSheetRule:case $.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case $.Font:return t;case $.Selection:return t.data.ranges.forEach(i=>{this.replaceIds(i,e,["start","end"])}),t;case $.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),(r=t.data.styles)==null||r.forEach(i=>{this.replaceStyleIds(i,e,["styleId"])}),t}}return!1}replace(e,t,r,i){for(let o of i)!Array.isArray(t[o])&&typeof t[o]!="number"||(Array.isArray(t[o])?t[o]=e.getIds(r,t[o]):t[o]=e.getId(r,t[o]));return t}replaceIds(e,t,r){return this.replace(this.crossOriginIframeMirror,e,t,r)}replaceStyleIds(e,t,r){return this.replace(this.crossOriginIframeStyleMirror,e,t,r)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(r=>{this.replaceIdOnNode(r,t)})}patchRootIdOnNode(e,t){e.type!==Lr.Document&&!e.rootId&&(e.rootId=t),"childNodes"in e&&e.childNodes.forEach(r=>{this.patchRootIdOnNode(r,t)})}},Dd=class{static{a(this,"ShadowDomManager")}constructor(e){k(this,"shadowDoms",new WeakSet),k(this,"mutationCb"),k(this,"scrollCb"),k(this,"bypassOptions"),k(this,"mirror"),k(this,"restoreHandlers",[]),this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!ps(e)||this.shadowDoms.has(e))return;this.shadowDoms.add(e);let r=Vv({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(Uv({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),setTimeout(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(ve.host(e))),this.restoreHandlers.push(Gv({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){!e.contentWindow||!e.contentDocument||this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){let r=this;this.restoreHandlers.push(In(e.prototype,"attachShadow",function(i){return function(o){let c=i.call(this,o),u=ve.shadowRoot(this);return u&&Wv(this)&&r.addShadowRoot(u,t),c}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}},si="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",hs=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(us=0;us<si.length;us++)hs[si.charCodeAt(us)]=us;var us,WN=a(function(n){var e=new Uint8Array(n),t,r=e.length,i="";for(t=0;t<r;t+=3)i+=si[e[t]>>2],i+=si[(e[t]&3)<<4|e[t+1]>>4],i+=si[(e[t+1]&15)<<2|e[t+2]>>6],i+=si[e[t+2]&63];return r%3===2?i=i.substring(0,i.length-1)+"=":r%3===1&&(i=i.substring(0,i.length-2)+"=="),i},"encode"),BN=a(function(n){var e=n.length*.75,t=n.length,r,i=0,o,c,u,d;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var f=new ArrayBuffer(e),p=new Uint8Array(f);for(r=0;r<t;r+=4)o=hs[n.charCodeAt(r)],c=hs[n.charCodeAt(r+1)],u=hs[n.charCodeAt(r+2)],d=hs[n.charCodeAt(r+3)],p[i++]=o<<2|c>>4,p[i++]=(c&15)<<4|u>>2,p[i++]=(u&3)<<6|d&63;return f},"decode"),Hg=new Map;function VN(n,e){let t=Hg.get(n);return t||(t=new Map,Hg.set(n,t)),t.has(e)||t.set(e,[]),t.get(e)}a(VN,"variableListFor$1");var zv=a((n,e,t)=>{if(!n||!(jv(n,e)||typeof n=="object"))return;let r=n.constructor.name,i=VN(t,r),o=i.indexOf(n);return o===-1&&(o=i.length,i.push(n)),o},"saveWebGLVar");function Ma(n,e,t){if(n instanceof Array)return n.map(r=>Ma(r,e,t));if(n===null)return n;if(n instanceof Float32Array||n instanceof Float64Array||n instanceof Int32Array||n instanceof Uint32Array||n instanceof Uint8Array||n instanceof Uint16Array||n instanceof Int16Array||n instanceof Int8Array||n instanceof Uint8ClampedArray)return{rr_type:n.constructor.name,args:[Object.values(n)]};if(n instanceof ArrayBuffer){let r=n.constructor.name,i=WN(n);return{rr_type:r,base64:i}}else{if(n instanceof DataView)return{rr_type:n.constructor.name,args:[Ma(n.buffer,e,t),n.byteOffset,n.byteLength]};if(n instanceof HTMLImageElement){let r=n.constructor.name,{src:i}=n;return{rr_type:r,src:i}}else if(n instanceof HTMLCanvasElement){let r="HTMLImageElement",i=n.toDataURL();return{rr_type:r,src:i}}else{if(n instanceof ImageData)return{rr_type:n.constructor.name,args:[Ma(n.data,e,t),n.width,n.height]};if(jv(n,e)||typeof n=="object"){let r=n.constructor.name,i=zv(n,e,t);return{rr_type:r,index:i}}}}return n}a(Ma,"serializeArg");var qv=a((n,e,t)=>n.map(r=>Ma(r,e,t)),"serializeArgs"),jv=a((n,e)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(i=>typeof e[i]=="function").find(i=>n instanceof e[i]),"isInstanceOfWebGLObject");function UN(n,e,t,r){let i=[],o=Object.getOwnPropertyNames(e.CanvasRenderingContext2D.prototype);for(let c of o)try{if(typeof e.CanvasRenderingContext2D.prototype[c]!="function")continue;let u=In(e.CanvasRenderingContext2D.prototype,c,function(d){return function(...f){return St(this.canvas,t,r,!0)||setTimeout(()=>{let p=qv(f,e,this);n(this.canvas,{type:_r["2D"],property:c,args:p})},0),d.apply(this,f)}});i.push(u)}catch{let u=cl(e.CanvasRenderingContext2D.prototype,c,{set(d){n(this.canvas,{type:_r["2D"],property:c,args:[d],setter:!0})}});i.push(u)}return()=>{i.forEach(c=>c())}}a(UN,"initCanvas2DMutationObserver");function GN(n){return n==="experimental-webgl"?"webgl":n}a(GN,"getNormalizedContextName");function $g(n,e,t,r){let i=[];try{let o=In(n.HTMLCanvasElement.prototype,"getContext",function(c){return function(u,...d){if(!St(this,e,t,!0)){let f=GN(u);if("__context"in this||(this.__context=f),r&&["webgl","webgl2"].includes(f))if(d[0]&&typeof d[0]=="object"){let p=d[0];p.preserveDrawingBuffer||(p.preserveDrawingBuffer=!0)}else d.splice(0,1,{preserveDrawingBuffer:!0})}return c.apply(this,[u,...d])}});i.push(o)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach(o=>o())}}a($g,"initCanvasContextObserver");function Wg(n,e,t,r,i,o){let c=[],u=Object.getOwnPropertyNames(n);for(let d of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(d))try{if(typeof n[d]!="function")continue;let f=In(n,d,function(p){return function(...g){let y=p.apply(this,g);if(zv(y,o,this),"tagName"in this.canvas&&!St(this.canvas,r,i,!0)){let b=qv(g,o,this),E={type:e,property:d,args:b};t(this.canvas,E)}return y}});c.push(f)}catch{let f=cl(n,d,{set(p){t(this.canvas,{type:e,property:d,args:[p],setter:!0})}});c.push(f)}return c}a(Wg,"patchGLPrototype");function zN(n,e,t,r){let i=[];return i.push(...Wg(e.WebGLRenderingContext.prototype,_r.WebGL,n,t,r,e)),typeof e.WebGL2RenderingContext<"u"&&i.push(...Wg(e.WebGL2RenderingContext.prototype,_r.WebGL2,n,t,r,e)),()=>{i.forEach(o=>o())}}a(zN,"initCanvasWebGLMutationObserver");var Kv="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",qN=a(n=>Uint8Array.from(atob(n),e=>e.charCodeAt(0)),"decodeBase64"),Bg=typeof window<"u"&&window.Blob&&new Blob([qN(Kv)],{type:"text/javascript;charset=utf-8"});function jN(n){let e;try{if(e=Bg&&(window.URL||window.webkitURL).createObjectURL(Bg),!e)throw"";let t=new Worker(e,{name:n?.name});return t.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(e)}),t}catch{return new Worker("data:text/javascript;base64,"+Kv,{name:n?.name})}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}a(jN,"WorkerWrapper");var kd=class{static{a(this,"CanvasManager")}constructor(e){k(this,"pendingCanvasMutations",new Map),k(this,"rafStamps",{latestId:0,invokeId:null}),k(this,"mirror"),k(this,"mutationCb"),k(this,"resetObservers"),k(this,"frozen",!1),k(this,"locked",!1),k(this,"processMutation",(d,f)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(d)||this.pendingCanvasMutations.set(d,[]),this.pendingCanvasMutations.get(d).push(f)});let{sampling:t="all",win:r,blockClass:i,blockSelector:o,recordCanvas:c,dataURLOptions:u}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,c&&t==="all"&&this.initCanvasMutationObserver(r,i,o),c&&typeof t=="number"&&this.initCanvasFPSObserver(t,r,i,o,{dataURLOptions:u})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(e,t,r,i,o){let c=$g(t,r,i,!0),u=new Map,d=new jN;d.onmessage=E=>{let{id:C}=E.data;if(u.set(C,!1),!("base64"in E.data))return;let{base64:w,type:M,width:N,height:A}=E.data;this.mutationCb({id:C,type:_r["2D"],commands:[{property:"clearRect",args:[0,0,N,A]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:w}],type:M}]},0,0]}]})};let f=1e3/e,p=0,g,y=a(()=>{let E=[];return t.document.querySelectorAll("canvas").forEach(C=>{St(C,r,i,!0)||E.push(C)}),E},"getCanvas"),b=a(E=>{if(p&&E-p<f){g=requestAnimationFrame(b);return}p=E,y().forEach(async C=>{var w;let M=this.mirror.getId(C);if(u.get(M)||C.width===0||C.height===0)return;if(u.set(M,!0),["webgl","webgl2"].includes(C.__context)){let A=C.getContext(C.__context);((w=A?.getContextAttributes())==null?void 0:w.preserveDrawingBuffer)===!1&&A.clear(A.COLOR_BUFFER_BIT)}let N=await createImageBitmap(C);d.postMessage({id:M,bitmap:N,width:C.width,height:C.height,dataURLOptions:o.dataURLOptions},[N])}),g=requestAnimationFrame(b)},"takeCanvasSnapshots");g=requestAnimationFrame(b),this.resetObservers=()=>{c(),cancelAnimationFrame(g)}}initCanvasMutationObserver(e,t,r){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();let i=$g(e,t,r,!1),o=UN(this.processMutation.bind(this),e,t,r),c=zN(this.processMutation.bind(this),e,t,r);this.resetObservers=()=>{i(),o(),c()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){let e=a(t=>{this.rafStamps.latestId=t,requestAnimationFrame(e)},"setLatestRAFTimestamp");requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((e,t)=>{let r=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,r)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;let r=this.pendingCanvasMutations.get(e);if(!r||t===-1)return;let i=r.map(c=>{let{type:u,...d}=c;return d}),{type:o}=r[0];this.mutationCb({id:t,type:o,commands:i}),this.pendingCanvasMutations.delete(e)}},Pd=class{static{a(this,"StylesheetManager")}constructor(e){k(this,"trackedLinkElements",new WeakSet),k(this,"mutationCb"),k(this,"adoptedStyleSheetCb"),k(this,"styleMirror",new qa),this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(e.length===0)return;let r={id:t,styleIds:[]},i=[];for(let o of e){let c;this.styleMirror.has(o)?c=this.styleMirror.getId(o):(c=this.styleMirror.add(o),i.push({styleId:c,rules:Array.from(o.rules||CSSRule,(u,d)=>({rule:Jg(u,o.href),index:d}))})),r.styleIds.push(c)}i.length>0&&(r.styles=i),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}},Fd=class{static{a(this,"ProcessedNodeManager")}constructor(){k(this,"nodeMap",new WeakMap),k(this,"active",!1)}inOtherBuffer(e,t){let r=this.nodeMap.get(e);return r&&Array.from(r).some(i=>i!==t)}add(e,t){this.active||(this.active=!0,requestAnimationFrame(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}destroy(){}},Qe,Ta,Fu,Ya=!1;try{if(Array.from([1],n=>n*2)[0]!==2){let n=document.createElement("iframe");document.body.appendChild(n),Array.from=(($m=n.contentWindow)==null?void 0:$m.Array.from)||Array.from,document.body.removeChild(n)}}catch(n){console.debug("Unable to override Array.from",n)}var Zt=ey();function zt(n={}){let{emit:e,checkoutEveryNms:t,checkoutEveryNth:r,blockClass:i="rr-block",blockSelector:o=null,ignoreClass:c="rr-ignore",ignoreSelector:u=null,maskTextClass:d="rr-mask",maskTextSelector:f=null,inlineStylesheet:p=!0,maskAllInputs:g,maskInputOptions:y,slimDOMOptions:b,maskInputFn:E,maskTextFn:C,hooks:w,packFn:M,sampling:N={},dataURLOptions:A={},mousemoveWait:_,recordDOM:z=!0,recordCanvas:G=!1,recordCrossOriginIframes:ee=!1,recordAfter:V=n.recordAfter==="DOMContentLoaded"?n.recordAfter:"load",userTriggeredOnInput:j=!1,collectFonts:oe=!1,inlineImages:W=!1,plugins:q,keepIframeSrcFn:B=a(()=>!1,"keepIframeSrcFn"),ignoreCSSAttributes:te=new Set([]),errorHandler:Q}=n;MN(Q);let Y=ee?window.parent===window:!0,we=!1;if(!Y)try{window.parent.document&&(we=!1)}catch{we=!0}if(Y&&!e)throw new Error("emit function is required");if(!Y&&!we)return()=>{};_!==void 0&&N.mousemove===void 0&&(N.mousemove=_),Zt.reset();let Fe=g===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:y!==void 0?y:{password:!0},_e=b===!0||b==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:b==="all",headMetaDescKeywords:b==="all",headTitleMutations:b==="all"}:b||{};kv();let mr,pe=0,lt=a(xe=>{for(let Ke of q||[])Ke.eventProcessor&&(xe=Ke.eventProcessor(xe));return M&&!we&&(xe=M(xe)),xe},"eventProcessor");Qe=a((xe,Ke)=>{var Ne;let Ue=xe;if(Ue.timestamp=za(),(Ne=Cn[0])!=null&&Ne.isFrozen()&&Ue.type!==U.FullSnapshot&&!(Ue.type===U.IncrementalSnapshot&&Ue.data.source===$.Mutation)&&Cn.forEach(rt=>rt.unfreeze()),Y)e?.(lt(Ue),Ke);else if(we){let rt={type:"rrweb",event:lt(Ue),origin:window.location.origin,isCheckout:Ke};window.parent.postMessage(rt,"*")}if(Ue.type===U.FullSnapshot)mr=Ue,pe=0;else if(Ue.type===U.IncrementalSnapshot){if(Ue.data.source===$.Mutation&&Ue.data.isAttachIframe)return;pe++;let rt=r&&pe>=r,Te=t&&Ue.timestamp-mr.timestamp>t;(rt||Te)&&Ta(!0)}},"wrappedEmit");let st=a(xe=>{Qe({type:U.IncrementalSnapshot,data:{source:$.Mutation,...xe}})},"wrappedMutationEmit"),tt=a(xe=>Qe({type:U.IncrementalSnapshot,data:{source:$.Scroll,...xe}}),"wrappedScrollEmit"),cn=a(xe=>Qe({type:U.IncrementalSnapshot,data:{source:$.CanvasMutation,...xe}}),"wrappedCanvasMutationEmit"),Pt=a(xe=>Qe({type:U.IncrementalSnapshot,data:{source:$.AdoptedStyleSheet,...xe}}),"wrappedAdoptedStyleSheetEmit"),It=new Pd({mutationCb:st,adoptedStyleSheetCb:Pt}),gr=new _d({mirror:Zt,mutationCb:st,stylesheetManager:It,recordCrossOriginIframes:ee,wrappedEmit:Qe});for(let xe of q||[])xe.getMirror&&xe.getMirror({nodeMirror:Zt,crossOriginIframeMirror:gr.crossOriginIframeMirror,crossOriginIframeStyleMirror:gr.crossOriginIframeStyleMirror});let Hr=new Fd;Fu=new kd({recordCanvas:G,mutationCb:cn,win:window,blockClass:i,blockSelector:o,mirror:Zt,sampling:N.canvas,dataURLOptions:A});let yr=new Dd({mutationCb:st,scrollCb:tt,bypassOptions:{blockClass:i,blockSelector:o,maskTextClass:d,maskTextSelector:f,inlineStylesheet:p,maskInputOptions:Fe,dataURLOptions:A,maskTextFn:C,maskInputFn:E,recordCanvas:G,inlineImages:W,sampling:N,slimDOMOptions:_e,iframeManager:gr,stylesheetManager:It,canvasManager:Fu,keepIframeSrcFn:B,processedNodeManager:Hr},mirror:Zt});Ta=a((xe=!1)=>{if(!z)return;Qe({type:U.Meta,data:{href:window.location.href,width:Ov(),height:Nv()}},xe),It.reset(),yr.init(),Cn.forEach(Ne=>Ne.lock());let Ke=YI(document,{mirror:Zt,blockClass:i,blockSelector:o,maskTextClass:d,maskTextSelector:f,inlineStylesheet:p,maskAllInputs:Fe,maskTextFn:C,maskInputFn:E,slimDOM:_e,dataURLOptions:A,recordCanvas:G,inlineImages:W,onSerialize:a(Ne=>{gs(Ne,Zt)&&gr.addIframe(Ne),Fv(Ne,Zt)&&It.trackLinkElement(Ne),xn(Ne)&&yr.addShadowRoot(ve.shadowRoot(Ne),document)},"onSerialize"),onIframeLoad:a((Ne,Ue)=>{gr.attachIframe(Ne,Ue),yr.observeAttachShadow(Ne)},"onIframeLoad"),onStylesheetLoad:a((Ne,Ue)=>{It.attachLinkElement(Ne,Ue)},"onStylesheetLoad"),keepIframeSrcFn:B});if(!Ke)return console.warn("Failed to snapshot the document");Qe({type:U.FullSnapshot,data:{node:Ke,initialOffset:Lv(window)}},xe),Cn.forEach(Ne=>Ne.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&It.adoptStyleSheets(document.adoptedStyleSheets,Zt.getId(document))},"takeFullSnapshot$1");try{let xe=[],Ke=a(Ue=>{var rt;return Se($N)({mutationCb:st,mousemoveCb:a((Te,Li)=>Qe({type:U.IncrementalSnapshot,data:{source:Li,positions:Te}}),"mousemoveCb"),mouseInteractionCb:a(Te=>Qe({type:U.IncrementalSnapshot,data:{source:$.MouseInteraction,...Te}}),"mouseInteractionCb"),scrollCb:tt,viewportResizeCb:a(Te=>Qe({type:U.IncrementalSnapshot,data:{source:$.ViewportResize,...Te}}),"viewportResizeCb"),inputCb:a(Te=>Qe({type:U.IncrementalSnapshot,data:{source:$.Input,...Te}}),"inputCb"),mediaInteractionCb:a(Te=>Qe({type:U.IncrementalSnapshot,data:{source:$.MediaInteraction,...Te}}),"mediaInteractionCb"),styleSheetRuleCb:a(Te=>Qe({type:U.IncrementalSnapshot,data:{source:$.StyleSheetRule,...Te}}),"styleSheetRuleCb"),styleDeclarationCb:a(Te=>Qe({type:U.IncrementalSnapshot,data:{source:$.StyleDeclaration,...Te}}),"styleDeclarationCb"),canvasMutationCb:cn,fontCb:a(Te=>Qe({type:U.IncrementalSnapshot,data:{source:$.Font,...Te}}),"fontCb"),selectionCb:a(Te=>{Qe({type:U.IncrementalSnapshot,data:{source:$.Selection,...Te}})},"selectionCb"),customElementCb:a(Te=>{Qe({type:U.IncrementalSnapshot,data:{source:$.CustomElement,...Te}})},"customElementCb"),blockClass:i,ignoreClass:c,ignoreSelector:u,maskTextClass:d,maskTextSelector:f,maskInputOptions:Fe,inlineStylesheet:p,sampling:N,recordDOM:z,recordCanvas:G,inlineImages:W,userTriggeredOnInput:j,collectFonts:oe,doc:Ue,maskInputFn:E,maskTextFn:C,keepIframeSrcFn:B,blockSelector:o,slimDOMOptions:_e,dataURLOptions:A,mirror:Zt,iframeManager:gr,stylesheetManager:It,shadowDomManager:yr,processedNodeManager:Hr,canvasManager:Fu,ignoreCSSAttributes:te,plugins:((rt=q?.filter(Te=>Te.observer))==null?void 0:rt.map(Te=>({observer:Te.observer,options:Te.options,callback:a(Li=>Qe({type:U.Plugin,data:{plugin:Te.name,payload:Li}}),"callback")})))||[]},w)},"observe");gr.addLoadListener(Ue=>{try{xe.push(Ke(Ue.contentDocument))}catch(rt){console.warn(rt)}});let Ne=a(()=>{Ta(),xe.push(Ke(document)),Ya=!0},"init");return document.readyState==="interactive"||document.readyState==="complete"?Ne():(xe.push(Et("DOMContentLoaded",()=>{Qe({type:U.DomContentLoaded,data:{}}),V==="DOMContentLoaded"&&Ne()})),xe.push(Et("load",()=>{Qe({type:U.Load,data:{}}),V==="load"&&Ne()},window))),()=>{xe.forEach(Ue=>Ue()),Hr.destroy(),Ya=!1,TN()}}catch(xe){console.warn(xe)}}a(zt,"record");zt.addCustomEvent=(n,e)=>{if(!Ya)throw new Error("please add custom event after start recording");Qe({type:U.Custom,data:{tag:n,payload:e}})};zt.freezePage=()=>{Cn.forEach(n=>n.freeze())};zt.takeFullSnapshot=n=>{if(!Ya)throw new Error("please take full snapshot after start recording");Ta(n)};zt.mirror=Zt;function Yv(n){return{all:n=n||new Map,on:a(function(e,t){var r=n.get(e);r?r.push(t):n.set(e,[t])},"on"),off:a(function(e,t){var r=n.get(e);r&&(t?r.splice(r.indexOf(t)>>>0,1):n.set(e,[]))},"off"),emit:a(function(e,t){var r=n.get(e);r&&r.slice().map(function(i){i(t)}),(r=n.get("*"))&&r.slice().map(function(i){i(e,t)})},"emit")}}a(Yv,"mitt$1");var KN=Object.freeze(Object.defineProperty({__proto__:null,default:Yv},Symbol.toStringTag,{value:"Module"}));function YN(n=window,e=document){if("scrollBehavior"in e.documentElement.style&&n.__forceSmoothScrollPolyfill__!==!0)return;let t=n.HTMLElement||n.Element,r=468,i={scroll:n.scroll||n.scrollTo,scrollBy:n.scrollBy,elementScroll:t.prototype.scroll||d,scrollIntoView:t.prototype.scrollIntoView},o=n.performance&&n.performance.now?n.performance.now.bind(n.performance):Date.now;function c(M){let N=["MSIE ","Trident/","Edge/"];return new RegExp(N.join("|")).test(M)}a(c,"isMicrosoftBrowser");let u=c(n.navigator.userAgent)?1:0;function d(M,N){this.scrollLeft=M,this.scrollTop=N}a(d,"scrollElement");function f(M){return .5*(1-Math.cos(Math.PI*M))}a(f,"ease");function p(M){if(M===null||typeof M!="object"||M.behavior===void 0||M.behavior==="auto"||M.behavior==="instant")return!0;if(typeof M=="object"&&M.behavior==="smooth")return!1;throw new TypeError("behavior member of ScrollOptions "+M.behavior+" is not a valid value for enumeration ScrollBehavior.")}a(p,"shouldBailOut");function g(M,N){if(N==="Y")return M.clientHeight+u<M.scrollHeight;if(N==="X")return M.clientWidth+u<M.scrollWidth}a(g,"hasScrollableSpace");function y(M,N){let A=n.getComputedStyle(M,null)["overflow"+N];return A==="auto"||A==="scroll"}a(y,"canOverflow");function b(M){let N=g(M,"Y")&&y(M,"Y"),A=g(M,"X")&&y(M,"X");return N||A}a(b,"isScrollable");function E(M){for(;M!==e.body&&b(M)===!1;)M=M.parentNode||M.host;return M}a(E,"findScrollableParent");function C(M){let N=o(),A,_,z,G=(N-M.startTime)/r;G=G>1?1:G,A=f(G),_=M.startX+(M.x-M.startX)*A,z=M.startY+(M.y-M.startY)*A,M.method.call(M.scrollable,_,z),(_!==M.x||z!==M.y)&&n.requestAnimationFrame(C.bind(n,M))}a(C,"step");function w(M,N,A){let _,z,G,ee,V=o();M===e.body?(_=n,z=n.scrollX||n.pageXOffset,G=n.scrollY||n.pageYOffset,ee=i.scroll):(_=M,z=M.scrollLeft,G=M.scrollTop,ee=d),C({scrollable:_,method:ee,startTime:V,startX:z,startY:G,x:N,y:A})}a(w,"smoothScroll"),n.scroll=n.scrollTo=function(){if(arguments[0]!==void 0){if(p(arguments[0])===!0){i.scroll.call(n,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:n.scrollX||n.pageXOffset,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:n.scrollY||n.pageYOffset);return}w.call(n,e.body,arguments[0].left!==void 0?~~arguments[0].left:n.scrollX||n.pageXOffset,arguments[0].top!==void 0?~~arguments[0].top:n.scrollY||n.pageYOffset)}},n.scrollBy=function(){if(arguments[0]!==void 0){if(p(arguments[0])){i.scrollBy.call(n,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:0,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:0);return}w.call(n,e.body,~~arguments[0].left+(n.scrollX||n.pageXOffset),~~arguments[0].top+(n.scrollY||n.pageYOffset))}},t.prototype.scroll=t.prototype.scrollTo=function(){if(arguments[0]===void 0)return;if(p(arguments[0])===!0){if(typeof arguments[0]=="number"&&arguments[1]===void 0)throw new SyntaxError("Value could not be converted");i.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left:typeof arguments[0]!="object"?~~arguments[0]:this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top:arguments[1]!==void 0?~~arguments[1]:this.scrollTop);return}let M=arguments[0].left,N=arguments[0].top;w.call(this,this,typeof M>"u"?this.scrollLeft:~~M,typeof N>"u"?this.scrollTop:~~N)},t.prototype.scrollBy=function(){if(arguments[0]!==void 0){if(p(arguments[0])===!0){i.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop);return}this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior})}},t.prototype.scrollIntoView=function(){if(p(arguments[0])===!0){i.scrollIntoView.call(this,arguments[0]===void 0?!0:arguments[0]);return}let M=E(this),N=M.getBoundingClientRect(),A=this.getBoundingClientRect();M!==e.body?(w.call(this,M,M.scrollLeft+A.left-N.left,M.scrollTop+A.top-N.top),n.getComputedStyle(M).position!=="fixed"&&n.scrollBy({left:N.left,top:N.top,behavior:"smooth"})):n.scrollBy({left:A.left,top:A.top,behavior:"smooth"})}}a(YN,"polyfill");var Hd=class{static{a(this,"Timer")}constructor(e=[],t){k(this,"timeOffset",0),k(this,"speed"),k(this,"actions"),k(this,"raf",null),k(this,"lastTimestamp"),this.actions=e,this.speed=t.speed}addAction(e){let t=this.raf===!0;if(!this.actions.length||this.actions[this.actions.length-1].delay<=e.delay)this.actions.push(e);else{let r=this.findActionIndex(e);this.actions.splice(r,0,e)}t&&(this.raf=requestAnimationFrame(this.rafCheck.bind(this)))}start(){this.timeOffset=0,this.lastTimestamp=performance.now(),this.raf=requestAnimationFrame(this.rafCheck.bind(this))}rafCheck(){let e=performance.now();for(this.timeOffset+=(e-this.lastTimestamp)*this.speed,this.lastTimestamp=e;this.actions.length;){let t=this.actions[0];if(this.timeOffset>=t.delay)this.actions.shift(),t.doAction();else break}this.actions.length>0?this.raf=requestAnimationFrame(this.rafCheck.bind(this)):this.raf=!0}clear(){this.raf&&(this.raf!==!0&&cancelAnimationFrame(this.raf),this.raf=null),this.actions.length=0}setSpeed(e){this.speed=e}isActive(){return this.raf!==null}findActionIndex(e){let t=0,r=this.actions.length-1;for(;t<=r;){let i=Math.floor((t+r)/2);if(this.actions[i].delay<e.delay)t=i+1;else if(this.actions[i].delay>e.delay)r=i-1;else return i+1}return t}};function Vg(n,e){if(n.type===U.IncrementalSnapshot&&n.data.source===$.MouseMove&&n.data.positions&&n.data.positions.length){let t=n.data.positions[0].timeOffset,r=n.timestamp+t;return n.delay=r-e,r-e}return n.delay=n.timestamp-e,n.delay}a(Vg,"addDelay");function Ug(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r,i,o=t.call(n),c=[];try{for(;(e===void 0||e-- >0)&&!(r=o.next()).done;)c.push(r.value)}catch(u){i={error:u}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(i)throw i.error}}return c}a(Ug,"t");var oi;(function(n){n[n.NotStarted=0]="NotStarted",n[n.Running=1]="Running",n[n.Stopped=2]="Stopped"})(oi||(oi={}));var Xv={type:"xstate.init"};function Hu(n){return n===void 0?[]:[].concat(n)}a(Hu,"r");function ri(n){return{type:"xstate.assign",assignment:n}}a(ri,"o");function Gg(n,e){return typeof(n=typeof n=="string"&&e&&e[n]?e[n]:n)=="string"?{type:n}:typeof n=="function"?{type:n.name,exec:n}:n}a(Gg,"i");function Xa(n){return function(e){return n===e}}a(Xa,"a");function Zv(n){return typeof n=="string"?{type:n}:n}a(Zv,"u");function zg(n,e){return{value:n,context:e,actions:[],changed:!1,matches:Xa(n)}}a(zg,"c");function qg(n,e,t){var r=e,i=!1;return[n.filter(function(o){if(o.type==="xstate.assign"){i=!0;var c=Object.assign({},r);return typeof o.assignment=="function"?c=o.assignment(r,t):Object.keys(o.assignment).forEach(function(u){c[u]=typeof o.assignment[u]=="function"?o.assignment[u](r,t):o.assignment[u]}),r=c,!1}return!0}),r,i]}a(qg,"f");function Qv(n,e){e===void 0&&(e={});var t=Ug(qg(Hu(n.states[n.initial].entry).map(function(c){return Gg(c,e.actions)}),n.context,Xv),2),r=t[0],i=t[1],o={config:n,_options:e,initialState:{value:n.initial,actions:r,context:i,matches:Xa(n.initial)},transition:a(function(c,u){var d,f,p=typeof c=="string"?{value:c,context:n.context}:c,g=p.value,y=p.context,b=Zv(u),E=n.states[g];if(E.on){var C=Hu(E.on[b.type]);try{for(var w=function(we){var Fe=typeof Symbol=="function"&&Symbol.iterator,_e=Fe&&we[Fe],mr=0;if(_e)return _e.call(we);if(we&&typeof we.length=="number")return{next:a(function(){return we&&mr>=we.length&&(we=void 0),{value:we&&we[mr++],done:!we}},"next")};throw new TypeError(Fe?"Object is not iterable.":"Symbol.iterator is not defined.")}(C),M=w.next();!M.done;M=w.next()){var N=M.value;if(N===void 0)return zg(g,y);var A=typeof N=="string"?{target:N}:N,_=A.target,z=A.actions,G=z===void 0?[]:z,ee=A.cond,V=ee===void 0?function(){return!0}:ee,j=_===void 0,oe=_??g,W=n.states[oe];if(V(y,b)){var q=Ug(qg((j?Hu(G):[].concat(E.exit,G,W.entry).filter(function(we){return we})).map(function(we){return Gg(we,o._options.actions)}),y,b),3),B=q[0],te=q[1],Q=q[2],Y=_??g;return{value:Y,context:te,actions:B,changed:_!==g||B.length>0||Q,matches:Xa(Y)}}}}catch(we){d={error:we}}finally{try{M&&!M.done&&(f=w.return)&&f.call(w)}finally{if(d)throw d.error}}}return zg(g,y)},"transition")};return o}a(Qv,"s");var jg=a(function(n,e){return n.actions.forEach(function(t){var r=t.exec;return r&&r(n.context,e)})},"l");function Jv(n){var e=n.initialState,t=oi.NotStarted,r=new Set,i={_machine:n,send:a(function(o){t===oi.Running&&(e=n.transition(e,o),jg(e,Zv(o)),r.forEach(function(c){return c(e)}))},"send"),subscribe:a(function(o){return r.add(o),o(e),{unsubscribe:a(function(){return r.delete(o)},"unsubscribe")}},"subscribe"),start:a(function(o){if(o){var c=typeof o=="object"?o:{context:n.config.context,value:o};e={value:c.value,actions:[],context:c.context,matches:Xa(c.value)}}return t=oi.Running,jg(e,Xv),i},"start"),stop:a(function(){return t=oi.Stopped,r.clear(),i},"stop"),get state(){return e},get status(){return t}};return i}a(Jv,"v");function XN(n,e){for(let t=n.length-1;t>=0;t--){let r=n[t];if(r.type===U.Meta&&r.timestamp<=e)return n.slice(t)}return n}a(XN,"discardPriorSnapshots");function ZN(n,{getCastFn:e,applyEventsSynchronously:t,emitter:r}){let i=Qv({id:"player",context:n,initial:"paused",states:{playing:{on:{PAUSE:{target:"paused",actions:["pause"]},CAST_EVENT:{target:"playing",actions:"castEvent"},END:{target:"paused",actions:["resetLastPlayedEvent","pause"]},ADD_EVENT:{target:"playing",actions:["addEvent"]}}},paused:{on:{PLAY:{target:"playing",actions:["recordTimeOffset","play"]},CAST_EVENT:{target:"paused",actions:"castEvent"},TO_LIVE:{target:"live",actions:["startLive"]},ADD_EVENT:{target:"paused",actions:["addEvent"]}}},live:{on:{ADD_EVENT:{target:"live",actions:["addEvent"]},CAST_EVENT:{target:"live",actions:["castEvent"]}}}}},{actions:{castEvent:ri({lastPlayedEvent:a((o,c)=>c.type==="CAST_EVENT"?c.payload.event:o.lastPlayedEvent,"lastPlayedEvent")}),recordTimeOffset:ri((o,c)=>{let u=o.timeOffset;return"payload"in c&&"timeOffset"in c.payload&&(u=c.payload.timeOffset),{...o,timeOffset:u,baselineTime:o.events[0].timestamp+u}}),play(o){var c;let{timer:u,events:d,baselineTime:f,lastPlayedEvent:p}=o;u.clear();for(let E of d)Vg(E,f);let g=XN(d,f),y=p?.timestamp;p?.type===U.IncrementalSnapshot&&p.data.source===$.MouseMove&&(y=p.timestamp+((c=p.data.positions[0])==null?void 0:c.timeOffset)),f<(y||0)&&r.emit(ye.PlayBack);let b=new Array;for(let E of g)if(!(y&&y<f&&(E.timestamp<=y||E===p)))if(E.timestamp<f)b.push(E);else{let C=e(E,!1);u.addAction({doAction:a(()=>{C()},"doAction"),delay:E.delay})}t(b),r.emit(ye.Flush),u.start()},pause(o){o.timer.clear()},resetLastPlayedEvent:ri(o=>({...o,lastPlayedEvent:null})),startLive:ri({baselineTime:a((o,c)=>(o.timer.start(),c.type==="TO_LIVE"&&c.payload.baselineTime?c.payload.baselineTime:Date.now()),"baselineTime")}),addEvent:ri((o,c)=>{let{baselineTime:u,timer:d,events:f}=o;if(c.type==="ADD_EVENT"){let{event:p}=c.payload;Vg(p,u);let g=f.length-1;if(!f[g]||f[g].timestamp<=p.timestamp)f.push(p);else{let E=-1,C=0;for(;C<=g;){let w=Math.floor((C+g)/2);f[w].timestamp<=p.timestamp?C=w+1:g=w-1}E===-1&&(E=C),f.splice(E,0,p)}let y=p.timestamp<u,b=e(p,y);y?b():d.isActive()&&d.addAction({doAction:a(()=>{b()},"doAction"),delay:p.delay})}return{...o,events:f}})}});return Jv(i)}a(ZN,"createPlayerService");function QN(n){let e=Qv({id:"speed",context:n,initial:"normal",states:{normal:{on:{FAST_FORWARD:{target:"skipping",actions:["recordSpeed","setSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}},skipping:{on:{BACK_TO_NORMAL:{target:"normal",actions:["restoreSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}}}},{actions:{setSpeed:a((t,r)=>{"payload"in r&&t.timer.setSpeed(r.payload.speed)},"setSpeed"),recordSpeed:ri({normalSpeed:a(t=>t.timer.speed,"normalSpeed")}),restoreSpeed:a(t=>{t.timer.setSpeed(t.normalSpeed)},"restoreSpeed")}});return Jv(e)}a(QN,"createSpeedService");var JN=a(n=>[`.${n} { background: currentColor }`,"noscript { display: none !important; }"],"rules"),Kg=new Map;function eb(n,e){let t=Kg.get(n);return t||(t=new Map,Kg.set(n,t)),t.has(e)||t.set(e,[]),t.get(e)}a(eb,"variableListFor");function en(n,e,t){return async r=>{if(r&&typeof r=="object"&&"rr_type"in r)if(t&&(t.isUnchanged=!1),r.rr_type==="ImageBitmap"&&"args"in r){let i=await en(n,e,t)(r.args);return await createImageBitmap.apply(null,i)}else if("index"in r){if(t||e===null)return r;let{rr_type:i,index:o}=r;return eb(e,i)[o]}else if("args"in r){let{rr_type:i,args:o}=r,c=window[i];return new c(...await Promise.all(o.map(en(n,e,t))))}else{if("base64"in r)return BN(r.base64);if("src"in r){let i=n.get(r.src);if(i)return i;{let o=new Image;return o.src=r.src,n.set(r.src,o),o}}else if("data"in r&&r.rr_type==="Blob"){let i=await Promise.all(r.data.map(en(n,e,t)));return new Blob(i,{type:r.type})}}else if(Array.isArray(r))return await Promise.all(r.map(en(n,e,t)));return r}}a(en,"deserializeArg");function eO(n,e){try{return e===_r.WebGL?n.getContext("webgl")||n.getContext("experimental-webgl"):n.getContext("webgl2")}catch{return null}}a(eO,"getContext");var tO=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject"];function rO(n,e){if(!e?.constructor)return;let{name:t}=e.constructor;if(!tO.includes(t))return;let r=eb(n,t);r.includes(e)||r.push(e)}a(rO,"saveToWebGLVarMap");async function nO({mutation:n,target:e,type:t,imageMap:r,errorHandler:i}){try{let o=eO(e,t);if(!o)return;if(n.setter){o[n.property]=n.args[0];return}let c=o[n.property],u=await Promise.all(n.args.map(en(r,o))),d=c.apply(o,u);rO(o,d);let f=!1}catch(o){i(n,o)}}a(nO,"webglMutation");async function iO({event:n,mutations:e,target:t,imageMap:r,errorHandler:i}){let o=t.getContext("2d");if(!o){i(e[0],new Error("Canvas context is null"));return}let c=e.map(async d=>Promise.all(d.args.map(en(r,o))));(await Promise.all(c)).forEach((d,f)=>{let p=e[f];try{if(p.setter){o[p.property]=p.args[0];return}let g=o[p.property];p.property==="drawImage"&&typeof p.args[0]=="string"?(r.get(n),g.apply(o,p.args)):g.apply(o,d)}catch(g){i(p,g)}})}a(iO,"canvasMutation$1");async function Yg({event:n,mutation:e,target:t,imageMap:r,canvasEventMap:i,errorHandler:o}){try{let c=i.get(n)||e,u="commands"in c?c.commands:[c];if([_r.WebGL,_r.WebGL2].includes(e.type)){for(let d=0;d<u.length;d++){let f=u[d];await nO({mutation:f,type:e.type,target:t,imageMap:r,errorHandler:o})}return}await iO({event:n,mutations:u,target:t,imageMap:r,errorHandler:o})}catch(c){o(e,c)}}a(Yg,"canvasMutation");var $d=class{static{a(this,"MediaManager")}constructor(e){k(this,"mediaMap",new Map),k(this,"warn"),k(this,"service"),k(this,"speedService"),k(this,"emitter"),k(this,"getCurrentTime"),k(this,"metadataCallbackMap",new Map),this.warn=e.warn,this.service=e.service,this.speedService=e.speedService,this.emitter=e.emitter,this.getCurrentTime=e.getCurrentTime,this.emitter.on(ye.Start,this.start.bind(this)),this.emitter.on(ye.SkipStart,this.start.bind(this)),this.emitter.on(ye.Pause,this.pause.bind(this)),this.emitter.on(ye.Finish,this.pause.bind(this)),this.speedService.subscribe(()=>{this.syncAllMediaElements()})}syncAllMediaElements(e={pause:!1}){this.mediaMap.forEach((t,r)=>{this.syncTargetWithState(r),e.pause&&r.pause()})}start(){this.syncAllMediaElements()}pause(){this.syncAllMediaElements({pause:!0})}seekTo({time:e,target:t,mediaState:r}){if(r.isPlaying){let o=(e-r.lastInteractionTimeOffset)/1e3*r.playbackRate,c="duration"in t&&t.duration;if(Number.isNaN(c)){this.waitForMetadata(t);return}let u=r.currentTimeAtLastInteraction+o;t.loop&&c!==!1&&(u=u%c),t.currentTime=u}else t.pause(),t.currentTime=r.currentTimeAtLastInteraction}waitForMetadata(e){if(this.metadataCallbackMap.has(e)||!("addEventListener"in e))return;let t=a(()=>{this.metadataCallbackMap.delete(e);let r=this.mediaMap.get(e);r&&this.seekTo({time:this.getCurrentTime(),target:e,mediaState:r})},"onLoadedMetadata");this.metadataCallbackMap.set(e,t),e.addEventListener("loadedmetadata",t,{once:!0})}getMediaStateFromMutation({target:e,timeOffset:t,mutation:r}){let i=this.mediaMap.get(e),{type:o,playbackRate:c,currentTime:u,muted:d,volume:f,loop:p}=r;return{isPlaying:o===Jr.Play||o!==Jr.Pause&&(i?.isPlaying||e.getAttribute("autoplay")!==null),currentTimeAtLastInteraction:u??i?.currentTimeAtLastInteraction??0,lastInteractionTimeOffset:t,playbackRate:c??i?.playbackRate??1,volume:f??i?.volume??1,muted:d??i?.muted??e.getAttribute("muted")===null,loop:p??i?.loop??e.getAttribute("loop")===null}}syncTargetWithState(e){let t=this.mediaMap.get(e);if(!t)return;let{muted:r,loop:i,volume:o,isPlaying:c}=t,u=this.service.state.matches("paused"),d=t.playbackRate*this.speedService.state.context.timer.speed;try{this.seekTo({time:this.getCurrentTime(),target:e,mediaState:t}),e.volume!==o&&(e.volume=o),e.muted=r,e.loop=i,e.playbackRate!==d&&(e.playbackRate=d),c&&!u?e.play():e.pause()}catch(f){this.warn(`Failed to replay media interactions: ${f.message||f}`)}}addMediaElements(e,t,r){if(!["AUDIO","VIDEO"].includes(e.nodeName))return;let i=e,o=r.getMeta(i);if(!o||!("attributes"in o))return;let c=this.service.state.matches("paused"),u=o.attributes,d=!1;u.rr_mediaState?d=u.rr_mediaState==="played":d=i.getAttribute("autoplay")!==null,d&&c&&i.pause();let f=1;typeof u.rr_mediaPlaybackRate=="number"&&(f=u.rr_mediaPlaybackRate);let p=!1;typeof u.rr_mediaMuted=="boolean"?p=u.rr_mediaMuted:p=i.getAttribute("muted")!==null;let g=!1;typeof u.rr_mediaLoop=="boolean"?g=u.rr_mediaLoop:g=i.getAttribute("loop")!==null;let y=1;typeof u.rr_mediaVolume=="number"&&(y=u.rr_mediaVolume);let b=0;typeof u.rr_mediaCurrentTime=="number"&&(b=u.rr_mediaCurrentTime),this.mediaMap.set(i,{isPlaying:d,currentTimeAtLastInteraction:b,lastInteractionTimeOffset:t,playbackRate:f,volume:y,muted:p,loop:g}),this.syncTargetWithState(i)}mediaMutation({target:e,timeOffset:t,mutation:r}){this.mediaMap.set(e,this.getMediaStateFromMutation({target:e,timeOffset:t,mutation:r})),this.syncTargetWithState(e)}isSupportedMediaElement(e){return["AUDIO","VIDEO"].includes(e.nodeName)}reset(){this.mediaMap.clear()}};function Ea(n,e){if(n.nodeName!=="DIALOG"||n instanceof Qt)return;let t=n,r=t.open,i=r&&t.matches("dialog:modal"),o=t.getAttribute("rr_open_mode"),c=typeof e?.attributes.open=="string"||typeof t.getAttribute("open")=="string",u=o==="modal";if(!(r&&!(i&&o==="non-modal"||!i&&u))){if(!t.isConnected){console.warn("dialog is not attached to the dom",t);return}r&&t.close(),c&&(u?t.showModal():t.show())}}a(Ea,"applyDialogToTopLevel");function sO(n,e){if(n.nodeName!=="DIALOG"||n instanceof Qt)return;let t=n;if(!t.isConnected){console.warn("dialog is not attached to the dom",t);return}e.attributes.open===null&&(t.removeAttribute("open"),t.removeAttribute("rr_open_mode"))}a(sO,"removeDialogFromTopLevel");var oO=5*1e3,aO=Yv||KN,Xg="[replayer]",$u={duration:500,lineCap:"round",lineWidth:3,strokeStyle:"red"};function Zg(n){return n.type==U.IncrementalSnapshot&&(n.data.source==$.TouchMove||n.data.source==$.MouseInteraction&&n.data.type==re.TouchStart)}a(Zg,"indicatesTouchDevice");var Za=class{static{a(this,"Replayer")}constructor(e,t){if(k(this,"wrapper"),k(this,"iframe"),k(this,"service"),k(this,"speedService"),k(this,"config"),k(this,"usingVirtualDom",!1),k(this,"virtualDom",new pi),k(this,"mouse"),k(this,"mouseTail",null),k(this,"tailPositions",[]),k(this,"emitter",aO()),k(this,"nextUserInteractionEvent"),k(this,"legacy_missingNodeRetryMap",{}),k(this,"cache",ug()),k(this,"imageMap",new Map),k(this,"canvasEventMap",new Map),k(this,"mirror",ey()),k(this,"styleMirror",new qa),k(this,"mediaManager"),k(this,"firstFullSnapshot",null),k(this,"newDocumentQueue",[]),k(this,"mousePos",null),k(this,"touchActive",null),k(this,"lastMouseDownEvent",null),k(this,"lastHoveredRootNode"),k(this,"lastSelectionData",null),k(this,"constructedStyleMutations",[]),k(this,"adoptedStyleSheets",[]),k(this,"handleResize",u=>{this.iframe.style.display="inherit";for(let d of[this.mouseTail,this.iframe])d&&(d.setAttribute("width",String(u.width)),d.setAttribute("height",String(u.height)))}),k(this,"applyEventsSynchronously",u=>{for(let d of u){switch(d.type){case U.DomContentLoaded:case U.Load:case U.Custom:continue;case U.FullSnapshot:case U.Meta:case U.Plugin:case U.IncrementalSnapshot:break}this.getCastFn(d,!0)()}}),k(this,"getCastFn",(u,d=!1)=>{let f;switch(u.type){case U.DomContentLoaded:case U.Load:break;case U.Custom:f=a(()=>{this.emitter.emit(ye.CustomEvent,u)},"castFn");break;case U.Meta:f=a(()=>this.emitter.emit(ye.Resize,{width:u.data.width,height:u.data.height}),"castFn");break;case U.FullSnapshot:f=a(()=>{var g;if(this.firstFullSnapshot){if(this.firstFullSnapshot===u){this.firstFullSnapshot=!0;return}}else this.firstFullSnapshot=!0;this.mediaManager.reset(),this.styleMirror.reset(),this.rebuildFullSnapshot(u,d),(g=this.iframe.contentWindow)==null||g.scrollTo(u.data.initialOffset)},"castFn");break;case U.IncrementalSnapshot:f=a(()=>{if(this.applyIncremental(u,d),!d&&(u===this.nextUserInteractionEvent&&(this.nextUserInteractionEvent=null,this.backToNormal()),this.config.skipInactive&&!this.nextUserInteractionEvent)){for(let g of this.service.state.context.events)if(!(g.timestamp<=u.timestamp)&&this.isUserInteraction(g)){g.delay-u.delay>this.config.inactivePeriodThreshold*this.speedService.state.context.timer.speed&&(this.nextUserInteractionEvent=g);break}if(this.nextUserInteractionEvent){let g=this.nextUserInteractionEvent.delay-u.delay,y={speed:Math.min(Math.round(g/oO),this.config.maxSpeed)};this.speedService.send({type:"FAST_FORWARD",payload:y}),this.emitter.emit(ye.SkipStart,y)}}},"castFn");break}return a(()=>{f&&f();for(let y of this.config.plugins||[])y.handler&&y.handler(u,d,{replayer:this});this.service.send({type:"CAST_EVENT",payload:{event:u}});let g=this.service.state.context.events.length-1;if(!this.config.liveMode&&u===this.service.state.context.events[g]){let y=a(()=>{g<this.service.state.context.events.length-1||(this.backToNormal(),this.service.send("END"),this.emitter.emit(ye.Finish))},"finish"),b=50;u.type===U.IncrementalSnapshot&&u.data.source===$.MouseMove&&u.data.positions.length&&(b+=Math.max(0,-u.data.positions[0].timeOffset)),setTimeout(y,b)}this.emitter.emit(ye.EventCast,u)},"wrappedCastFn")}),!t?.liveMode&&e.length<2)throw new Error("Replayer need at least 2 events.");let r={speed:1,maxSpeed:360,root:document.body,loadTimeout:0,skipInactive:!1,inactivePeriodThreshold:10*1e3,showWarning:!0,showDebug:!1,blockClass:"rr-block",liveMode:!1,insertStyleRules:[],triggerFocus:!0,UNSAFE_replayCanvas:!1,pauseAnimation:!0,mouseTail:$u,useVirtualDom:!0,logger:console};this.config=Object.assign({},r,t),this.handleResize=this.handleResize.bind(this),this.getCastFn=this.getCastFn.bind(this),this.applyEventsSynchronously=this.applyEventsSynchronously.bind(this),this.emitter.on(ye.Resize,this.handleResize),this.setupDom();for(let u of this.config.plugins||[])u.getMirror&&u.getMirror({nodeMirror:this.mirror});this.emitter.on(ye.Flush,()=>{if(this.usingVirtualDom){let u={mirror:this.mirror,applyCanvas:a((d,f,p)=>{Yg({event:d,mutation:f,target:p,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})},"applyCanvas"),applyInput:this.applyInput.bind(this),applyScroll:this.applyScroll.bind(this),applyStyleSheetMutation:a((d,f)=>{d.source===$.StyleSheetRule?this.applyStyleSheetRule(d,f):d.source===$.StyleDeclaration&&this.applyStyleDeclaration(d,f)},"applyStyleSheetMutation"),afterAppend:a((d,f)=>{for(let p of this.config.plugins||[])p.onBuild&&p.onBuild(d,{id:f,replayer:this})},"afterAppend")};if(this.iframe.contentDocument)try{Ua(this.iframe.contentDocument,this.virtualDom,u,this.virtualDom.mirror)}catch(d){console.warn(d)}if(this.virtualDom.destroyTree(),this.usingVirtualDom=!1,Object.keys(this.legacy_missingNodeRetryMap).length)for(let d in this.legacy_missingNodeRetryMap)try{let f=this.legacy_missingNodeRetryMap[d],p=Ga(f.node,this.mirror,this.virtualDom.mirror);Ua(p,f.node,u,this.virtualDom.mirror),f.node=p}catch(f){this.warn(f)}this.constructedStyleMutations.forEach(d=>{this.applyStyleSheetMutation(d)}),this.constructedStyleMutations=[],this.adoptedStyleSheets.forEach(d=>{this.applyAdoptedStyleSheet(d)}),this.adoptedStyleSheets=[]}if(this.mousePos&&(this.moveAndHover(this.mousePos.x,this.mousePos.y,this.mousePos.id,!0,this.mousePos.debugData),this.mousePos=null),this.touchActive===!0?this.mouse.classList.add("touch-active"):this.touchActive===!1&&this.mouse.classList.remove("touch-active"),this.touchActive=null,this.lastMouseDownEvent){let[u,d]=this.lastMouseDownEvent;u.dispatchEvent(d)}this.lastMouseDownEvent=null,this.lastSelectionData&&(this.applySelection(this.lastSelectionData),this.lastSelectionData=null)}),this.emitter.on(ye.PlayBack,()=>{this.firstFullSnapshot=null,this.mirror.reset(),this.styleMirror.reset(),this.mediaManager.reset()});let i=new Hd([],{speed:this.config.speed});this.service=ZN({events:e.map(u=>t&&t.unpackFn?t.unpackFn(u):u).sort((u,d)=>u.timestamp-d.timestamp),timer:i,timeOffset:0,baselineTime:0,lastPlayedEvent:null},{getCastFn:this.getCastFn,applyEventsSynchronously:this.applyEventsSynchronously,emitter:this.emitter}),this.service.start(),this.service.subscribe(u=>{this.emitter.emit(ye.StateChange,{player:u})}),this.speedService=QN({normalSpeed:-1,timer:i}),this.speedService.start(),this.speedService.subscribe(u=>{this.emitter.emit(ye.StateChange,{speed:u})}),this.mediaManager=new $d({warn:this.warn.bind(this),service:this.service,speedService:this.speedService,emitter:this.emitter,getCurrentTime:this.getCurrentTime.bind(this)});let o=this.service.state.context.events.find(u=>u.type===U.Meta),c=this.service.state.context.events.find(u=>u.type===U.FullSnapshot);if(o){let{width:u,height:d}=o.data;setTimeout(()=>{this.emitter.emit(ye.Resize,{width:u,height:d})},0)}c&&setTimeout(()=>{var u;this.firstFullSnapshot||(this.firstFullSnapshot=c,this.rebuildFullSnapshot(c),(u=this.iframe.contentWindow)==null||u.scrollTo(c.data.initialOffset))},1),this.service.state.context.events.find(Zg)&&this.mouse.classList.add("touch-device")}get timer(){return this.service.state.context.timer}on(e,t){return this.emitter.on(e,t),this}off(e,t){return this.emitter.off(e,t),this}setConfig(e){Object.keys(e).forEach(t=>{e[t],this.config[t]=e[t]}),this.config.skipInactive||this.backToNormal(),typeof e.speed<"u"&&this.speedService.send({type:"SET_SPEED",payload:{speed:e.speed}}),typeof e.mouseTail<"u"&&(e.mouseTail===!1?this.mouseTail&&(this.mouseTail.style.display="none"):(this.mouseTail||(this.mouseTail=document.createElement("canvas"),this.mouseTail.width=Number.parseFloat(this.iframe.width),this.mouseTail.height=Number.parseFloat(this.iframe.height),this.mouseTail.classList.add("replayer-mouse-tail"),this.wrapper.insertBefore(this.mouseTail,this.iframe)),this.mouseTail.style.display="inherit"))}getMetaData(){let e=this.service.state.context.events[0],t=this.service.state.context.events[this.service.state.context.events.length-1];return{startTime:e.timestamp,endTime:t.timestamp,totalTime:t.timestamp-e.timestamp}}getCurrentTime(){return this.timer.timeOffset+this.getTimeOffset()}getTimeOffset(){let{baselineTime:e,events:t}=this.service.state.context;return e-t[0].timestamp}getMirror(){return this.mirror}play(e=0){var t,r;this.service.state.matches("paused")?this.service.send({type:"PLAY",payload:{timeOffset:e}}):(this.service.send({type:"PAUSE"}),this.service.send({type:"PLAY",payload:{timeOffset:e}})),(r=(t=this.iframe.contentDocument)==null?void 0:t.getElementsByTagName("html")[0])==null||r.classList.remove("rrweb-paused"),this.emitter.emit(ye.Start)}pause(e){var t,r;e===void 0&&this.service.state.matches("playing")&&this.service.send({type:"PAUSE"}),typeof e=="number"&&(this.play(e),this.service.send({type:"PAUSE"})),(r=(t=this.iframe.contentDocument)==null?void 0:t.getElementsByTagName("html")[0])==null||r.classList.add("rrweb-paused"),this.emitter.emit(ye.Pause)}resume(e=0){this.warn("The 'resume' was deprecated in 1.0. Please use 'play' method which has the same interface."),this.play(e),this.emitter.emit(ye.Resume)}destroy(){this.pause(),this.mirror.reset(),this.styleMirror.reset(),this.mediaManager.reset(),this.config.root.removeChild(this.wrapper),this.emitter.emit(ye.Destroy)}startLive(e){this.service.send({type:"TO_LIVE",payload:{baselineTime:e}})}addEvent(e){let t=this.config.unpackFn?this.config.unpackFn(e):e;Zg(t)&&this.mouse.classList.add("touch-device"),Promise.resolve().then(()=>this.service.send({type:"ADD_EVENT",payload:{event:t}}))}enableInteract(){this.iframe.setAttribute("scrolling","auto"),this.iframe.style.pointerEvents="auto"}disableInteract(){this.iframe.setAttribute("scrolling","no"),this.iframe.style.pointerEvents="none"}resetCache(){this.cache=ug()}setupDom(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("replayer-wrapper"),this.config.root.appendChild(this.wrapper),this.mouse=document.createElement("div"),this.mouse.classList.add("replayer-mouse"),this.wrapper.appendChild(this.mouse),this.config.mouseTail!==!1&&(this.mouseTail=document.createElement("canvas"),this.mouseTail.classList.add("replayer-mouse-tail"),this.mouseTail.style.display="inherit",this.wrapper.appendChild(this.mouseTail)),this.iframe=document.createElement("iframe");let e=["allow-same-origin"];this.config.UNSAFE_replayCanvas&&e.push("allow-scripts"),this.iframe.style.display="none",this.iframe.setAttribute("sandbox",e.join(" ")),this.disableInteract(),this.wrapper.appendChild(this.iframe),this.iframe.contentWindow&&this.iframe.contentDocument&&(YN(this.iframe.contentWindow,this.iframe.contentDocument),kv(this.iframe.contentWindow))}rebuildFullSnapshot(e,t=!1){if(!this.iframe.contentDocument)return this.warn("Looks like your replayer has been destroyed.");Object.keys(this.legacy_missingNodeRetryMap).length&&this.warn("Found unresolved missing node map",this.legacy_missingNodeRetryMap),this.legacy_missingNodeRetryMap={};let r=[],i=new Set,o=a((d,f)=>{if(d.nodeName==="DIALOG"&&i.add(d),this.collectIframeAndAttachDocument(r,d),this.mediaManager.isSupportedMediaElement(d)){let{events:p}=this.service.state.context;this.mediaManager.addMediaElements(d,e.timestamp-p[0].timestamp,this.mirror)}for(let p of this.config.plugins||[])p.onBuild&&p.onBuild(d,{id:f,replayer:this})},"afterAppend");this.usingVirtualDom&&(this.virtualDom.destroyTree(),this.usingVirtualDom=!1),this.mirror.reset(),KA(e.data.node,{doc:this.iframe.contentDocument,afterAppend:o,cache:this.cache,mirror:this.mirror}),o(this.iframe.contentDocument,e.data.node.id);for(let{mutationInQueue:d,builtNode:f}of r)this.attachDocumentToIframe(d,f),this.newDocumentQueue=this.newDocumentQueue.filter(p=>p!==d);let{documentElement:c,head:u}=this.iframe.contentDocument;this.insertStyleRules(c,u),i.forEach(d=>Ea(d)),this.service.state.matches("playing")||this.iframe.contentDocument.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(ye.FullsnapshotRebuilded,e),t||this.waitForStylesheetLoad(),this.config.UNSAFE_replayCanvas&&this.preloadAllImages()}insertStyleRules(e,t){var r;let i=JN(this.config.blockClass).concat(this.config.insertStyleRules);if(this.config.pauseAnimation&&i.push("html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }"),!!i.length)if(this.usingVirtualDom){let o=this.virtualDom.createElement("style");this.virtualDom.mirror.add(o,Iv(o,this.virtualDom.unserializedId)),e.insertBefore(o,t),o.rules.push({source:$.StyleSheetRule,adds:i.map((c,u)=>({rule:c,index:u}))})}else{let o=document.createElement("style");e.insertBefore(o,t);for(let c=0;c<i.length;c++)(r=o.sheet)==null||r.insertRule(i[c],c)}}attachDocumentToIframe(e,t){let r=this.usingVirtualDom?this.virtualDom.mirror:this.mirror,i=[],o=new Set,c=a((u,d)=>{u.nodeName==="DIALOG"&&o.add(u),this.collectIframeAndAttachDocument(i,u);let f=r.getMeta(u);if(f?.type===Lr.Element&&f?.tagName.toUpperCase()==="HTML"){let{documentElement:p,head:g}=t.contentDocument;this.insertStyleRules(p,g)}if(!this.usingVirtualDom)for(let p of this.config.plugins||[])p.onBuild&&p.onBuild(u,{id:d,replayer:this})},"afterAppend");ms(e.node,{doc:t.contentDocument,mirror:r,hackCss:!0,skipChild:!1,afterAppend:c,cache:this.cache}),c(t.contentDocument,e.node.id);for(let{mutationInQueue:u,builtNode:d}of i)this.attachDocumentToIframe(u,d),this.newDocumentQueue=this.newDocumentQueue.filter(f=>f!==u);o.forEach(u=>Ea(u))}collectIframeAndAttachDocument(e,t){if(gs(t,this.mirror)){let r=this.newDocumentQueue.find(i=>i.parentId===this.mirror.getId(t));r&&e.push({mutationInQueue:r,builtNode:t})}}waitForStylesheetLoad(){var e;let t=(e=this.iframe.contentDocument)==null?void 0:e.head;if(t){let r=new Set,i,o=this.service.state,c=a(()=>{o=this.service.state},"stateHandler");this.emitter.on(ye.Start,c),this.emitter.on(ye.Pause,c);let u=a(()=>{this.emitter.off(ye.Start,c),this.emitter.off(ye.Pause,c)},"unsubscribe");t.querySelectorAll('link[rel="stylesheet"]').forEach(d=>{d.sheet||(r.add(d),d.addEventListener("load",()=>{r.delete(d),r.size===0&&i!==-1&&(o.matches("playing")&&this.play(this.getCurrentTime()),this.emitter.emit(ye.LoadStylesheetEnd),i&&clearTimeout(i),u())}))}),r.size>0&&(this.service.send({type:"PAUSE"}),this.emitter.emit(ye.LoadStylesheetStart),i=setTimeout(()=>{o.matches("playing")&&this.play(this.getCurrentTime()),i=-1,u()},this.config.loadTimeout))}}async preloadAllImages(){let e=[];for(let t of this.service.state.context.events)t.type===U.IncrementalSnapshot&&t.data.source===$.CanvasMutation&&(e.push(this.deserializeAndPreloadCanvasEvents(t.data,t)),("commands"in t.data?t.data.commands:[t.data]).forEach(i=>{this.preloadImages(i,t)}));return Promise.all(e)}preloadImages(e,t){if(e.property==="drawImage"&&typeof e.args[0]=="string"&&!this.imageMap.has(t)){let r=document.createElement("canvas"),i=r.getContext("2d"),o=i?.createImageData(r.width,r.height);i?.putImageData(o,0,0)}}async deserializeAndPreloadCanvasEvents(e,t){if(!this.canvasEventMap.has(t)){let r={isUnchanged:!0};if("commands"in e){let i=await Promise.all(e.commands.map(async o=>{let c=await Promise.all(o.args.map(en(this.imageMap,null,r)));return{...o,args:c}}));r.isUnchanged===!1&&this.canvasEventMap.set(t,{...e,commands:i})}else{let i=await Promise.all(e.args.map(en(this.imageMap,null,r)));r.isUnchanged===!1&&this.canvasEventMap.set(t,{...e,args:i})}}}applyIncremental(e,t){var r,i,o;let{data:c}=e;switch(c.source){case $.Mutation:{try{this.applyMutation(c,t)}catch(u){this.warn(`Exception in mutation ${u.message||u}`,c)}break}case $.Drag:case $.TouchMove:case $.MouseMove:if(t){let u=c.positions[c.positions.length-1];this.mousePos={x:u.x,y:u.y,id:u.id,debugData:c}}else c.positions.forEach(u=>{let d={doAction:a(()=>{this.moveAndHover(u.x,u.y,u.id,t,c)},"doAction"),delay:u.timeOffset+e.timestamp-this.service.state.context.baselineTime};this.timer.addAction(d)}),this.timer.addAction({doAction(){},delay:e.delay-((r=c.positions[0])==null?void 0:r.timeOffset)});break;case $.MouseInteraction:{if(c.id===-1)break;let u=new Event(tn(re[c.type])),d=this.mirror.getNode(c.id);if(!d)return this.debugNodeNotFound(c,c.id);this.emitter.emit(ye.MouseInteraction,{type:c.type,target:d});let{triggerFocus:f}=this.config;switch(c.type){case re.Blur:"blur"in d&&d.blur();break;case re.Focus:f&&d.focus&&d.focus({preventScroll:!0});break;case re.Click:case re.TouchStart:case re.TouchEnd:case re.MouseDown:case re.MouseUp:t?(c.type===re.TouchStart?this.touchActive=!0:c.type===re.TouchEnd&&(this.touchActive=!1),c.type===re.MouseDown?this.lastMouseDownEvent=[d,u]:c.type===re.MouseUp&&(this.lastMouseDownEvent=null),this.mousePos={x:c.x||0,y:c.y||0,id:c.id,debugData:c}):(c.type===re.TouchStart&&(this.tailPositions.length=0),this.moveAndHover(c.x||0,c.y||0,c.id,t,c),c.type===re.Click?(this.mouse.classList.remove("active"),this.mouse.offsetWidth,this.mouse.classList.add("active")):c.type===re.TouchStart?(this.mouse.offsetWidth,this.mouse.classList.add("touch-active")):c.type===re.TouchEnd?this.mouse.classList.remove("touch-active"):d.dispatchEvent(u));break;case re.TouchCancel:t?this.touchActive=!1:this.mouse.classList.remove("touch-active");break;default:d.dispatchEvent(u)}break}case $.Scroll:{if(c.id===-1)break;if(this.usingVirtualDom){let u=this.virtualDom.mirror.getNode(c.id);if(!u)return this.debugNodeNotFound(c,c.id);u.scrollData=c;break}this.applyScroll(c,t);break}case $.ViewportResize:this.emitter.emit(ye.Resize,{width:c.width,height:c.height});break;case $.Input:{if(c.id===-1)break;if(this.usingVirtualDom){let u=this.virtualDom.mirror.getNode(c.id);if(!u)return this.debugNodeNotFound(c,c.id);u.inputData=c;break}this.applyInput(c);break}case $.MediaInteraction:{let u=this.usingVirtualDom?this.virtualDom.mirror.getNode(c.id):this.mirror.getNode(c.id);if(!u)return this.debugNodeNotFound(c,c.id);let d=u,{events:f}=this.service.state.context;this.mediaManager.mediaMutation({target:d,timeOffset:e.timestamp-f[0].timestamp,mutation:c});break}case $.StyleSheetRule:case $.StyleDeclaration:{this.usingVirtualDom?c.styleId?this.constructedStyleMutations.push(c):c.id&&((i=this.virtualDom.mirror.getNode(c.id))==null||i.rules.push(c)):this.applyStyleSheetMutation(c);break}case $.CanvasMutation:{if(!this.config.UNSAFE_replayCanvas)return;if(this.usingVirtualDom){let u=this.virtualDom.mirror.getNode(c.id);if(!u)return this.debugNodeNotFound(c,c.id);u.canvasMutations.push({event:e,mutation:c})}else{let u=this.mirror.getNode(c.id);if(!u)return this.debugNodeNotFound(c,c.id);Yg({event:e,mutation:c,target:u,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})}break}case $.Font:{try{let u=new FontFace(c.family,c.buffer?new Uint8Array(JSON.parse(c.fontSource)):c.fontSource,c.descriptors);(o=this.iframe.contentDocument)==null||o.fonts.add(u)}catch(u){this.warn(u)}break}case $.Selection:{if(t){this.lastSelectionData=c;break}this.applySelection(c);break}case $.AdoptedStyleSheet:{this.usingVirtualDom?this.adoptedStyleSheets.push(c):this.applyAdoptedStyleSheet(c);break}}}applyMutation(e,t){if(this.config.useVirtualDom&&!this.usingVirtualDom&&t&&(this.usingVirtualDom=!0,iN(this.iframe.contentDocument,this.mirror,this.virtualDom),Object.keys(this.legacy_missingNodeRetryMap).length))for(let f in this.legacy_missingNodeRetryMap)try{let p=this.legacy_missingNodeRetryMap[f],g=Tv(p.node,this.virtualDom,this.mirror);g&&(p.node=g)}catch(p){this.warn(p)}let r=this.usingVirtualDom?this.virtualDom.mirror:this.mirror;e.removes=e.removes.filter(f=>r.getNode(f.id)?!0:(this.warnNodeNotFound(e,f.id),!1)),e.removes.forEach(f=>{var p;let g=r.getNode(f.id);if(!g)return;let y=r.getNode(f.parentId);if(!y)return this.warnNodeNotFound(e,f.parentId);if(f.isShadow&&xn(y)&&(y=y.shadowRoot),r.removeNodeFromMap(g),y)try{y.removeChild(g),this.usingVirtualDom&&g.nodeName==="#text"&&y.nodeName==="STYLE"&&((p=y.rules)==null?void 0:p.length)>0&&(y.rules=[])}catch(b){if(b instanceof DOMException)this.warn("parent could not remove child in mutation",y,g,e);else throw b}});let i={...this.legacy_missingNodeRetryMap},o=[],c=a(f=>{let p=null;return f.nextId&&(p=r.getNode(f.nextId)),f.nextId!==null&&f.nextId!==void 0&&f.nextId!==-1&&!p},"nextNotInDOM"),u=a(f=>{var p,g;if(!this.iframe.contentDocument)return this.warn("Looks like your replayer has been destroyed.");let y=r.getNode(f.parentId);if(!y)return f.node.type===Lr.Document?this.newDocumentQueue.push(f):o.push(f);f.node.isShadow&&(xn(y)||y.attachShadow({mode:"open"}),y=y.shadowRoot);let b=null,E=null;if(f.previousId&&(b=r.getNode(f.previousId)),f.nextId&&(E=r.getNode(f.nextId)),c(f))return o.push(f);if(f.node.rootId&&!r.getNode(f.node.rootId))return;let C=f.node.rootId?r.getNode(f.node.rootId):this.usingVirtualDom?this.virtualDom:this.iframe.contentDocument;if(gs(y,r)){this.attachDocumentToIframe(f,y);return}let w=a((A,_)=>{if(!this.usingVirtualDom){Ea(A);for(let z of this.config.plugins||[])z.onBuild&&z.onBuild(A,{id:_,replayer:this})}},"afterAppend"),M=ms(f.node,{doc:C,mirror:r,skipChild:!0,hackCss:!0,cache:this.cache,afterAppend:w});if(f.previousId===-1||f.nextId===-1){i[f.node.id]={node:M,mutation:f};return}let N=r.getMeta(y);if(N&&N.type===Lr.Element&&f.node.type===Lr.Text){let A=Array.isArray(y.childNodes)?y.childNodes:Array.from(y.childNodes);if(N.tagName==="textarea")for(let _ of A)_.nodeType===y.TEXT_NODE&&y.removeChild(_);else if(N.tagName==="style"&&A.length===1)for(let _ of A)_.nodeType===y.TEXT_NODE&&!r.hasNode(_)&&(M.textContent=_.textContent,y.removeChild(_))}else if(N?.type===Lr.Document){let A=y;f.node.type===Lr.DocumentType&&((p=A.childNodes[0])==null?void 0:p.nodeType)===Node.DOCUMENT_TYPE_NODE&&A.removeChild(A.childNodes[0]),M.nodeName==="HTML"&&A.documentElement&&A.removeChild(A.documentElement)}if(b&&b.nextSibling&&b.nextSibling.parentNode?y.insertBefore(M,b.nextSibling):E&&E.parentNode?y.contains(E)?y.insertBefore(M,E):y.insertBefore(M,null):y.appendChild(M),w(M,f.node.id),this.usingVirtualDom&&M.nodeName==="#text"&&y.nodeName==="STYLE"&&((g=y.rules)==null?void 0:g.length)>0&&(y.rules=[]),gs(M,this.mirror)){let A=this.mirror.getId(M),_=this.newDocumentQueue.find(z=>z.parentId===A);_&&(this.attachDocumentToIframe(_,M),this.newDocumentQueue=this.newDocumentQueue.filter(z=>z!==_))}(f.previousId||f.nextId)&&this.legacy_resolveMissingNode(i,y,M,f)},"appendNode");e.adds.forEach(f=>{u(f)});let d=Date.now();for(;o.length;){let f=bN(o);if(o.length=0,Date.now()-d>500){this.warn("Timeout in the loop, please check the resolve tree data:",f);break}for(let p of f)r.getNode(p.value.parentId)?Pv(p,y=>{u(y)}):this.debug("Drop resolve tree since there is no parent for the root node.",p)}Object.keys(i).length&&Object.assign(this.legacy_missingNodeRetryMap,i),EN(e.texts).forEach(f=>{var p;let g=r.getNode(f.id);if(!g)return e.removes.find(b=>b.id===f.id)?void 0:this.warnNodeNotFound(e,f.id);let y=g.parentElement;if(f.value&&y&&y.tagName==="STYLE"?g.textContent=nl(f.value,this.cache):g.textContent=f.value,this.usingVirtualDom){let b=g.parentNode;((p=b?.rules)==null?void 0:p.length)>0&&(b.rules=[])}}),e.attributes.forEach(f=>{var p;let g=r.getNode(f.id);if(!g)return e.removes.find(y=>y.id===f.id)?void 0:this.warnNodeNotFound(e,f.id);for(let y in f.attributes)if(typeof y=="string"){let b=f.attributes[y];if(b===null)g.removeAttribute(y),y==="open"&&sO(g,f);else if(typeof b=="string")try{if(y==="_cssText"&&(g.nodeName==="LINK"||g.nodeName==="STYLE"))try{let E=r.getMeta(g),C=ms({...E,attributes:{...E.attributes,...f.attributes}},{doc:g.ownerDocument,mirror:r,skipChild:!0,hackCss:!0,cache:this.cache});Object.assign(E.attributes,f.attributes);let w=g.nextSibling,M=g.parentNode;if(C&&M){M.removeChild(g),M.insertBefore(C,w),r.replace(f.id,C);break}}catch{}if(y==="value"&&g.nodeName==="TEXTAREA"){let E=g;E.childNodes.forEach(w=>E.removeChild(w));let C=(p=g.ownerDocument)==null?void 0:p.createTextNode(b);C&&E.appendChild(C)}else g.setAttribute(y,b);y==="rr_open_mode"&&g.nodeName==="DIALOG"&&Ea(g,f)}catch(E){this.warn("An error occurred may due to the checkout feature.",E)}else if(y==="style"){let E=b,C=g;for(let w in E)if(E[w]===!1)C.style.removeProperty(w);else if(E[w]instanceof Array){let M=E[w];C.style.setProperty(w,M[0],M[1])}else{let M=E[w];C.style.setProperty(w,M)}}}})}applyScroll(e,t){var r,i;let o=this.mirror.getNode(e.id);if(!o)return this.debugNodeNotFound(e,e.id);let c=this.mirror.getMeta(o);if(o===this.iframe.contentDocument)(r=this.iframe.contentWindow)==null||r.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"});else if(c?.type===Lr.Document)(i=o.defaultView)==null||i.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"});else try{o.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"})}catch{}}applyInput(e){let t=this.mirror.getNode(e.id);if(!t)return this.debugNodeNotFound(e,e.id);try{t.checked=e.isChecked,t.value=e.text}catch{}}applySelection(e){try{let t=new Set,r=e.ranges.map(({start:i,startOffset:o,end:c,endOffset:u})=>{let d=this.mirror.getNode(i),f=this.mirror.getNode(c);if(!d||!f)return;let p=new Range;p.setStart(d,o),p.setEnd(f,u);let g=d.ownerDocument,y=g?.getSelection();return y&&t.add(y),{range:p,selection:y}});t.forEach(i=>i.removeAllRanges()),r.forEach(i=>{var o;return i&&((o=i.selection)==null?void 0:o.addRange(i.range))})}catch{}}applyStyleSheetMutation(e){var t;let r=null;e.styleId?r=this.styleMirror.getStyle(e.styleId):e.id&&(r=((t=this.mirror.getNode(e.id))==null?void 0:t.sheet)||null),r&&(e.source===$.StyleSheetRule?this.applyStyleSheetRule(e,r):e.source===$.StyleDeclaration&&this.applyStyleDeclaration(e,r))}applyStyleSheetRule(e,t){var r,i,o,c;if((r=e.adds)==null||r.forEach(({rule:u,index:d})=>{try{if(Array.isArray(d)){let{positions:f,index:p}=Og(d);ds(t.cssRules,f).insertRule(u,p)}else{let f=d===void 0?void 0:Math.min(d,t.cssRules.length);t?.insertRule(u,f)}}catch{}}),(i=e.removes)==null||i.forEach(({index:u})=>{try{if(Array.isArray(u)){let{positions:d,index:f}=Og(u);ds(t.cssRules,d).deleteRule(f||0)}else t?.deleteRule(u)}catch{}}),e.replace)try{(o=t.replace)==null||o.call(t,e.replace)}catch{}if(e.replaceSync)try{(c=t.replaceSync)==null||c.call(t,e.replaceSync)}catch{}}applyStyleDeclaration(e,t){e.set&&ds(t.rules,e.index).style.setProperty(e.set.property,e.set.value,e.set.priority),e.remove&&ds(t.rules,e.index).style.removeProperty(e.remove.property)}applyAdoptedStyleSheet(e){var t;let r=this.mirror.getNode(e.id);if(!r)return;(t=e.styles)==null||t.forEach(u=>{var d;let f=null,p=null;if(xn(r)?p=((d=r.ownerDocument)==null?void 0:d.defaultView)||null:r.nodeName==="#document"&&(p=r.defaultView),!!p)try{f=new p.CSSStyleSheet,this.styleMirror.add(f,u.styleId),this.applyStyleSheetRule({source:$.StyleSheetRule,adds:u.rules},f)}catch{}});let i=10,o=0,c=a((u,d)=>{let f=d.map(p=>this.styleMirror.getStyle(p)).filter(p=>p!==null);xn(u)?u.shadowRoot.adoptedStyleSheets=f:u.nodeName==="#document"&&(u.adoptedStyleSheets=f),f.length!==d.length&&o<i&&(setTimeout(()=>c(u,d),0+100*o),o++)},"adoptStyleSheets");c(r,e.styleIds)}legacy_resolveMissingNode(e,t,r,i){let{previousId:o,nextId:c}=i,u=o&&e[o],d=c&&e[c];if(u){let{node:f,mutation:p}=u;t.insertBefore(f,r),delete e[p.node.id],delete this.legacy_missingNodeRetryMap[p.node.id],(p.previousId||p.nextId)&&this.legacy_resolveMissingNode(e,t,f,p)}if(d){let{node:f,mutation:p}=d;t.insertBefore(f,r.nextSibling),delete e[p.node.id],delete this.legacy_missingNodeRetryMap[p.node.id],(p.previousId||p.nextId)&&this.legacy_resolveMissingNode(e,t,f,p)}}moveAndHover(e,t,r,i,o){let c=this.mirror.getNode(r);if(!c)return this.debugNodeNotFound(o,r);let u=Hv(c,this.iframe),d=e*u.absoluteScale+u.x,f=t*u.absoluteScale+u.y;this.mouse.style.left=`${d}px`,this.mouse.style.top=`${f}px`,i||this.drawMouseTail({x:d,y:f}),this.hoverElements(c)}drawMouseTail(e){if(!this.mouseTail)return;let{lineCap:t,lineWidth:r,strokeStyle:i,duration:o}=this.config.mouseTail===!0?$u:Object.assign({},$u,this.config.mouseTail),c=a(()=>{if(!this.mouseTail)return;let u=this.mouseTail.getContext("2d");!u||!this.tailPositions.length||(u.clearRect(0,0,this.mouseTail.width,this.mouseTail.height),u.beginPath(),u.lineWidth=r,u.lineCap=t,u.strokeStyle=i,u.moveTo(this.tailPositions[0].x,this.tailPositions[0].y),this.tailPositions.forEach(d=>u.lineTo(d.x,d.y)),u.stroke())},"draw");this.tailPositions.push(e),c(),setTimeout(()=>{this.tailPositions=this.tailPositions.filter(u=>u!==e),c()},o/this.speedService.state.context.timer.speed)}hoverElements(e){var t;(t=this.lastHoveredRootNode||this.iframe.contentDocument)==null||t.querySelectorAll(".\\:hover").forEach(i=>{i.classList.remove(":hover")}),this.lastHoveredRootNode=e.getRootNode();let r=e;for(;r;)r.classList&&r.classList.add(":hover"),r=r.parentElement}isUserInteraction(e){return e.type!==U.IncrementalSnapshot?!1:e.data.source>$.Mutation&&e.data.source<=$.Input}backToNormal(){this.nextUserInteractionEvent=null,!this.speedService.state.matches("normal")&&(this.speedService.send({type:"BACK_TO_NORMAL"}),this.emitter.emit(ye.SkipEnd,{speed:this.speedService.state.context.normalSpeed}))}warnNodeNotFound(e,t){this.warn(`Node with id '${t}' not found. `,e)}warnCanvasMutationFailed(e,t){this.warn("Has error on canvas update",t,"canvas mutation:",e)}debugNodeNotFound(e,t){this.debug(`Node with id '${t}' not found. `,e)}warn(...e){this.config.showWarning&&this.config.logger.warn(Xg,...e)}debug(...e){this.config.showDebug&&this.config.logger.log(Xg,...e)}},{addCustomEvent:WF}=zt,{freezePage:BF}=zt,{takeFullSnapshot:VF}=zt;var rb=a(n=>{let e=a(o=>o&&(o instanceof HTMLInputElement&&/|text|email|number|password|search|tel|url/.test(o.type||"")||o instanceof HTMLTextAreaElement)?!(o.disabled||o.readOnly):!1,"isEditableInputOrTextArea"),t=a((o,c)=>{n({key:o,eventTarget:c})},"sendKeyEvent"),r=a(o=>(o.ctrlKey?"ctrl ":"")+(o.altKey?"alt ":"")+(o.shiftKey?"shift ":"")+(o.metaKey?"meta ":"")+o.key,"formatKeyProperties"),i=a(o=>{try{if(e(o.target))return;t(r(o),o.target)}catch{}},"onKeyUp");window.addEventListener("keyup",o=>{i(o)})},"startKeyboardObserver");var ul=class n{constructor(e=document,t){this.target=e;this.onEvent=t;this.monitoredTextElements=[];this.inputEnabledSelectors=["[contenteditable=true]"].join(",");this.iframeObservers=[];this.monitorInputEnabledElement=a(e=>{e.addEventListener("input",t=>{this.onEvent({text:t.target?.innerText,eventTarget:t.target})})},"monitorInputEnabledElement")}static{a(this,"ContendEditableObserver")}startObserver(){this.startIframesObserver(),this.observer=new MutationObserver(e=>{e.forEach(t=>{t.addedNodes.forEach(r=>{if(r.nodeType===Node.ELEMENT_NODE&&r.nodeType===Node.ELEMENT_NODE){let i=r;i.matches(this.inputEnabledSelectors)||i.isContentEditable?this.monitorInputEnabledElement(i):Array.from(de("*",i)).filter(o=>o.matches&&o.matches(this.inputEnabledSelectors)||o.isContentEditable).forEach(this.monitorInputEnabledElement)}})})}),this.observer.observe(this.target,{childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0}),this.startInputMonitoring()}startIframesObserver(){setInterval(()=>{de("iframe",this.target).forEach(t=>{if(this.iframeObservers.find(c=>c.iframe===t))return;let r=a(c=>{if(c.iframe.contentWindow)try{c.observer=new n(c.iframe.contentWindow.document,this.onEvent),c.observer.startObserver()}catch{}},"observeIframe"),i=t,o={iframe:i,observer:null};this.iframeObservers.push(o),i.contentWindow?r(o):i.addEventListener("load",()=>{r(o)})})},500)}startInputMonitoring(){this.monitoredTextElements=de(this.inputEnabledSelectors,this.target),this.monitoredTextElements.forEach(this.monitorInputEnabledElement)}};var dl=class{constructor(e){this.onEvent=e;this.onURLChange=a(()=>{setTimeout(()=>{let e=window.location.href;if(e!==this.currentURL){this.currentURL=e;try{this.onEvent({url:e})}catch{}}})},"onURLChange")}static{a(this,"URLObserver")}start(){window.addEventListener("popstate",r=>{this.onURLChange()}),window.addEventListener("locationchange",r=>{this.onURLChange()}),window.addEventListener("hashchange",r=>{this.onURLChange()});let e=window.history.pushState;window.history.pushState=(...r)=>(this.onURLChange(),e.apply(window.history,r));let t=window.history.replaceState;window.history.replaceState=(...r)=>(this.onURLChange(),t.apply(window.history,r))}};var sn={defaultMerge:Symbol("deepmerge-ts: default merge"),skip:Symbol("deepmerge-ts: skip")},JF={defaultMerge:sn.defaultMerge};function lO(n,e){return e}a(lO,"defaultMetaDataUpdater");function cO(n,e){return n.filter(t=>t!==void 0)}a(cO,"defaultFilterValues");var nb;(function(n){n[n.NOT=0]="NOT",n[n.RECORD=1]="RECORD",n[n.ARRAY=2]="ARRAY",n[n.SET=3]="SET",n[n.MAP=4]="MAP",n[n.OTHER=5]="OTHER"})(nb||(nb={}));function ib(n){return typeof n!="object"||n===null?0:Array.isArray(n)?2:hO(n)?1:n instanceof Set?3:n instanceof Map?4:5}a(ib,"getObjectType");function uO(n){let e=new Set;for(let t of n)for(let r of[...Object.keys(t),...Object.getOwnPropertySymbols(t)])e.add(r);return e}a(uO,"getKeys");function dO(n,e){return typeof n=="object"&&Object.prototype.propertyIsEnumerable.call(n,e)}a(dO,"objectHasProperty");function ob(n){let e=0,t=n[0]?.[Symbol.iterator]();return{[Symbol.iterator](){return{next(){do{if(t===void 0)return{done:!0,value:void 0};let r=t.next();if(r.done===!0){e+=1,t=n[e]?.[Symbol.iterator]();continue}return{done:!1,value:r.value}}while(!0)}}}}}a(ob,"getIterableOfIterables");var sb=["[object Object]","[object Module]"];function hO(n){if(!sb.includes(Object.prototype.toString.call(n)))return!1;let{constructor:e}=n;if(e===void 0)return!0;let t=e.prototype;return!(t===null||typeof t!="object"||!sb.includes(Object.prototype.toString.call(t))||!t.hasOwnProperty("isPrototypeOf"))}a(hO,"isRecord");function fO(n,e,t){let r={};for(let i of uO(n)){let o=[];for(let d of n)dO(d,i)&&o.push(d[i]);if(o.length===0)continue;let c=e.metaDataUpdater(t,{key:i,parents:n}),u=lb(o,e,c);u!==sn.skip&&(i==="__proto__"?Object.defineProperty(r,i,{value:u,configurable:!0,enumerable:!0,writable:!0}):r[i]=u)}return r}a(fO,"mergeRecords$1");function pO(n){return n.flat()}a(pO,"mergeArrays$1");function mO(n){return new Set(ob(n))}a(mO,"mergeSets$1");function gO(n){return new Map(ob(n))}a(gO,"mergeMaps$1");function yO(n){return n.at(-1)}a(yO,"mergeOthers$1");var hl={mergeRecords:fO,mergeArrays:pO,mergeSets:mO,mergeMaps:gO,mergeOthers:yO};function ab(...n){return vO({})(...n)}a(ab,"deepmerge");function vO(n,e){let t=bO(n,r);function r(...i){return lb(i,t,e)}return a(r,"customizedDeepmerge"),r}a(vO,"deepmergeCustom");function bO(n,e){return{defaultMergeFunctions:hl,mergeFunctions:{...hl,...Object.fromEntries(Object.entries(n).filter(([t,r])=>Object.hasOwn(hl,t)).map(([t,r])=>r===!1?[t,hl.mergeOthers]:[t,r]))},metaDataUpdater:n.metaDataUpdater??lO,deepmerge:e,useImplicitDefaultMerging:n.enableImplicitDefaultMerging??!1,filterValues:n.filterValues===!1?void 0:n.filterValues??cO,actions:sn}}a(bO,"getUtils");function lb(n,e,t){let r=e.filterValues?.(n,t)??n;if(r.length===0)return;if(r.length===1)return fh(r,e,t);let i=ib(r[0]);if(i!==0&&i!==5){for(let o=1;o<r.length;o++)if(ib(r[o])!==i)return fh(r,e,t)}switch(i){case 1:return EO(r,e,t);case 2:return SO(r,e,t);case 3:return wO(r,e,t);case 4:return xO(r,e,t);default:return fh(r,e,t)}}a(lb,"mergeUnknowns");function EO(n,e,t){let r=e.mergeFunctions.mergeRecords(n,e,t);return r===sn.defaultMerge||e.useImplicitDefaultMerging&&r===void 0&&e.mergeFunctions.mergeRecords!==e.defaultMergeFunctions.mergeRecords?e.defaultMergeFunctions.mergeRecords(n,e,t):r}a(EO,"mergeRecords");function SO(n,e,t){let r=e.mergeFunctions.mergeArrays(n,e,t);return r===sn.defaultMerge||e.useImplicitDefaultMerging&&r===void 0&&e.mergeFunctions.mergeArrays!==e.defaultMergeFunctions.mergeArrays?e.defaultMergeFunctions.mergeArrays(n):r}a(SO,"mergeArrays");function wO(n,e,t){let r=e.mergeFunctions.mergeSets(n,e,t);return r===sn.defaultMerge||e.useImplicitDefaultMerging&&r===void 0&&e.mergeFunctions.mergeSets!==e.defaultMergeFunctions.mergeSets?e.defaultMergeFunctions.mergeSets(n):r}a(wO,"mergeSets");function xO(n,e,t){let r=e.mergeFunctions.mergeMaps(n,e,t);return r===sn.defaultMerge||e.useImplicitDefaultMerging&&r===void 0&&e.mergeFunctions.mergeMaps!==e.defaultMergeFunctions.mergeMaps?e.defaultMergeFunctions.mergeMaps(n):r}a(xO,"mergeMaps");function fh(n,e,t){let r=e.mergeFunctions.mergeOthers(n,e,t);return r===sn.defaultMerge||e.useImplicitDefaultMerging&&r===void 0&&e.mergeFunctions.mergeOthers!==e.defaultMergeFunctions.mergeOthers?e.defaultMergeFunctions.mergeOthers(n):r}a(fh,"mergeOthers");var CO={sampling:{mousemove:!1},userTriggeredOnInput:!0,maskInputOptions:{password:!1}},fl=class{constructor(e,t={}){this.eventHandler=e;this.options=t;this.logNativeMutationObserver=!1;this.stopRRWebRecording=a(()=>{},"stopRRWebRecording");this.start=a(()=>{console.log("starting with options",this.options),this.stopRRWebRecording=zt({...this.options,emit:this.eventHandler}),this.logNativeMutationObserver&&this.selfObserve(),this.startURLObserver(),this.startKeyboardObserver(),this.startContentEditableObserver()},"start");this.stop=a(()=>{this.stopRRWebRecording()},"stop");this.startURLObserver=a(()=>{this.urlObserver=new dl(({url:e})=>{let t={url:e};this.addCustomEvent("url-change",t)}),this.urlObserver.start()},"startURLObserver");this.startContentEditableObserver=a(()=>{this.contentEditableObserver=new ul(document,({text:e,eventTarget:t})=>{let r={text:e,id:this.tryGetMetaFromEventTarget(t)?.id};this.addCustomEvent("contenteditable-input",r)}),this.contentEditableObserver.startObserver()},"startContentEditableObserver");this.startKeyboardObserver=a(()=>{rb(({key:e,eventTarget:t})=>{let r={key:e,id:this.tryGetMetaFromEventTarget(t)?.id};this.addCustomEvent("key-stroke",r)})},"startKeyboardObserver");this.addCustomEvent=a((e,t)=>{zt.addCustomEvent(e,t)},"addCustomEvent");this.tryGetMetaFromEventTarget=a(e=>{try{return this.getMeta(e)}catch{}},"tryGetMetaFromEventTarget");this.selfObserve=a(()=>{let e=document.getElementsByTagName("body"),t={attributes:!0,childList:!0,subtree:!0},r=a((o,c)=>{for(let u of o)u.type==="childList"?console.log("A child node has been added or removed.",u):u.type==="attributes"&&console.log(`The ${u.attributeName} attribute was modified.`,u)},"callback");new MutationObserver(r).observe(e[0],t)},"selfObserve");this.getNodeById=a(e=>zt.mirror.getNode(e),"getNodeById");this.getMeta=a(e=>zt.mirror.getMeta(e),"getMeta");this.eventHandler=e,this.options=ab(CO,t)}static{a(this,"SessionRecorder")}};var cb=["aria-label","aria-labelledby","label","title","alt"];var ub=[{selector:'path[d="M17.5 13V15.6667C17.5 16.0203 17.3361 16.3594 17.0444 16.6095C16.7527 16.8595 16.357 17 15.9444 17H5.05556C4.643 17 4.24733 16.8595 3.95561 16.6095C3.66389 16.3594 3.5 16.0203 3.5 15.6667V13"] + path[d="M14.6673 6.92057L10.5007 2.75391L6.33398 6.92057"] + path[d="M10.5 2.75391V12.7539"]',description:"export button"},{selector:'path[d="M16.0893 13.1868C16.6838 12.7754 17.1321 12.1858 17.3697 11.503C17.6072 10.8202 17.6216 10.0796 17.4107 9.38816C17.1999 8.69667 16.7748 8.09007 16.1968 7.65594C15.6187 7.2218 14.9177 6.9826 14.1948 6.97285H12.8308C12.6017 6.20011 12.1996 5.48973 11.6549 4.89565C11.1102 4.30157 10.4374 3.83943 9.68735 3.54431C8.93734 3.24918 8.12995 3.12885 7.32648 3.19244C6.52301 3.25603 5.7446 3.50187 5.05036 3.9113C4.35612 4.32072 3.7643 4.88297 3.31985 5.55533C2.8754 6.22769 2.59001 6.99248 2.48535 7.79164C2.38068 8.59079 2.4595 9.40329 2.71582 10.1674C2.97214 10.9316 3.39921 11.6272 3.96461 12.2016"] + path[d="M10.0273 10.0039V16.8241"] + path[d="M13.0585 13.0351L10.0273 10.0039L6.99609 13.0351"]',description:"import button"},{selector:'path[d="M20.4696 21.5303C20.7625 21.8232 21.2373 21.8232 21.5302 21.5303C21.8231 21.2374 21.8231 20.7626 21.5302 20.4697L20.4696 21.5303ZM17.1802 16.1197C16.8873 15.8268 16.4125 15.8268 16.1196 16.1197C15.8267 16.4126 15.8267 16.8874 16.1196 17.1803L17.1802 16.1197ZM18.25 11C18.25 15.0041 15.0041 18.25 11 18.25V19.75C15.8325 19.75 19.75 15.8325 19.75 11H18.25ZM11 18.25C6.99594 18.25 3.75 15.0041 3.75 11H2.25C2.25 15.8325 6.16751 19.75 11 19.75V18.25ZM3.75 11C3.75 6.99594 6.99594 3.75 11 3.75V2.25C6.16751 2.25 2.25 6.16751 2.25 11H3.75ZM11 3.75C15.0041 3.75 18.25 6.99594 18.25 11H19.75C19.75 6.16751 15.8325 2.25 11 2.25V3.75ZM21.5302 20.4697L17.1802 16.1197L16.1196 17.1803L20.4696 21.5303L21.5302 20.4697Z"]',description:"search"},{selector:'path[d="M3.75 10H16.875"] + path[d="M8.125 5L3.125 10L8.125 15"]',description:"back"},{selector:'path[d="M3.33301 8H12.6663"] + path[d="M8 3.33331L12.6667 7.99998L8 12.6666"]',description:"forward"},{selector:'path[d="M10 4.16667V15.8333"] + path[d="M4.16699 10H15.8337"]',description:"new or Add button"},{selector:'path[d="M10 10.75C10.4142 10.75 10.75 10.4142 10.75 10C10.75 9.58579 10.4142 9.25 10 9.25C9.58579 9.25 9.25 9.58579 9.25 10C9.25 10.4142 9.58579 10.75 10 10.75Z"] + path[d="M15.833 10.75C16.2472 10.75 16.583 10.4142 16.583 10C16.583 9.58579 16.2472 9.25 15.833 9.25C15.4188 9.25 15.083 9.58579 15.083 10C15.083 10.4142 15.4188 10.75 15.833 10.75Z"] + path[d="M4.16699 10.75C4.58121 10.75 4.91699 10.4142 4.91699 10C4.91699 9.58579 4.58121 9.25 4.16699 9.25C3.75278 9.25 3.41699 9.58579 3.41699 10C3.41699 10.4142 3.75278 10.75 4.16699 10.75Z"]',description:"open menu"},{selector:'path[d="M10 4.16667V15.8333"] + path[d="M4.16699 10H15.8337"]',description:"add filter"},{selector:'path[d="M15 5L5 15"] + path[d="M5 5L15 15"]',description:"close or remove"},{selector:'path[d="M4 6L8 10L12 6"]',description:"open or close dropdown"},{selector:'path[d="M10 17.5C14.1421 17.5 17.5 14.1421 17.5 10C17.5 5.85786 14.1421 2.5 10 2.5C5.85786 2.5 2.5 5.85786 2.5 10C2.5 14.1421 5.85786 17.5 10 17.5Z"] + path[d="M12.5 7.5L7.5 12.5"] + path[d="M7.5 7.5L12.5 12.5"]',description:"clear input"},{selector:'path[d="M3.33301 5.49054H4.81449H16.6663"] + path[d="M7.14286 5.49999V3.99999C7.14286 3.60216 7.29337 3.22063 7.56128 2.93932C7.82919 2.65802 8.19255 2.49998 8.57143 2.49998H11.4286C11.8075 2.49998 12.1708 2.65802 12.4387 2.93932C12.7066 3.22063 12.8571 3.60216 12.8571 3.99999V5.49999M15 5.49999V16C15 16.3978 14.8495 16.7793 14.5816 17.0607C14.3137 17.342 13.9503 17.5 13.5714 17.5H6.42857C6.04969 17.5 5.68633 17.342 5.41842 17.0607C5.15051 16.7793 5 16.3978 5 16V5.49999H15Z"] + path[d="M8.33203 9.23726V13.4039"] + path[d="M11.666 9.23726V13.4039"]',description:"delete"},{selector:'path[d="M13.3334 4L6.00008 11.3333L2.66675 8"]',description:"checked"},{selector:'path[d="M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"]',description:"downward-pointing arrow"},{selector:'path[d="M18.0893 3.08926C18.4147 2.76382 18.4147 2.23618 18.0893 1.91074C17.7638 1.58531 17.2362 1.58531 16.9107 1.91074L18.0893 3.08926ZM9.41074 9.41074L8.82149 10L10 11.1785L10.5893 10.5893L9.41074 9.41074ZM16.9107 1.91074L9.41074 9.41074L10.5893 10.5893L18.0893 3.08926L16.9107 1.91074Z"] + path[d="M17.5 2.5L12.25 17.5L9.25 10.75L2.5 7.75L17.5 2.5Z"]',description:"send"}];var MO=5*60*1e3,pl=class{constructor(){this.flashingTextElements=[]}static{a(this,"FlashingElementsDetector")}start(){this.stop(),this.flashingTextElements=[],this.observer=new MutationObserver(e=>{e.forEach(t=>{t.addedNodes.length>0&&t.addedNodes.forEach(r=>{r instanceof HTMLElement&&this.includeElement(r)&&setTimeout(()=>{this.flashingTextElements.push(this.processTextElements(r))},1e3)})})}),this.observer.observe(document.body,{childList:!0,subtree:!0}),this.monitoringPeriodTimeout=setTimeout(()=>{this.stop()},MO)}stop(){this.monitoringPeriodTimeout&&(clearTimeout(this.monitoringPeriodTimeout),this.monitoringPeriodTimeout=null),this.observer&&(this.observer.disconnect(),this.observer=null)}get(){let e=this.flashingTextElements.map(r=>r.filter(i=>!i.isConnected||mt(i.parentElement).isHidden)).filter(r=>r.length).map(r=>`<span>${r.map(i=>i.textContent).join("</span><span>")}</span>`),t=new Set(e);return Array.from(t)}stopAndGet(){return this.stop(),this.get()}includeElement(e){return!(e.getElementsByTagName("*").length>50||e.outerHTML.length>5e3)}processTextElements(e){let t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null),r,i=[];for(;r=t.nextNode();)mt(r.parentNode).isHidden||i.push(r);return i}};var yi=class{static{a(this,"AlphaNumericCounter")}constructor(e){this.counter=e??"0"}increment(){let e=this.counter.length-1;for(;e>=0;){let t=this.counter[e];if(t==="9"){this.counter=this.replaceAt(this.counter,e,"a");return}else if(t==="z"){if(this.counter=this.replaceAt(this.counter,e,"0"),e===0){this.counter="1"+this.counter;return}e--}else{this.counter=this.replaceAt(this.counter,e,String.fromCharCode(t.charCodeAt(0)+1));return}}}get(){return this.counter}incrementAndGet(){return this.increment(),this.get()}getAndIncrement(){let e=this.get();return this.increment(),e}replaceAt(e,t,r){return e.substr(0,t)+r+e.substr(t+r.length)}static compare(e,t){let r=e.length,i=t.length;if(r!==i)return r-i;for(let o=0;o<r;o++){let c=e.charCodeAt(o),u=t.charCodeAt(o);if(c!==u)return c-u}return 0}};var Ds="checksum-ignore",gl="checksum-get-more-items",db=20,TO=.7,ml,hb,IO=0,fb=a((n,{forceIncludeAttribute:e,forceIncludeFileInput:t,forceIncludeElements:r,limit:i})=>{n.excludedElements?.forEach(b=>{b.removeAttribute(Ds)}),n.excludedElements=new Set;let o=n.element,c=i??Math.min(Math.ceil(o.children.length*.5),o.children.length-db),u=a(b=>e&&(b.hasAttribute(e)||Array.from(b.querySelectorAll(`[${e}]`)).length>0)||t&&b.tagName.toLowerCase()==="input"&&b.type==="file"?!0:r.includes(b),"isForceIncluded"),d=a(b=>{let E=0;if(n.elementsToKeep.includes(b))return E;let C=ph(b);C.length>=n.attributes.length&&E++;let w=C.filter(A=>n.attributes.includes(A)).length;w===n.attributes.length?E+=3:w>0&&E++;let N=mh(b).filter(A=>n.classes.includes(A)).length;return N===n.classes.length?E+=2:N>0&&E++,E},"scoreElement"),f=Array.from(o.children).filter(b=>b.tagName===n.tagName&&!u(b)).map(b=>({element:b,score:d(b)})).sort((b,E)=>E.score-b.score),{inViewportElements:p,outOfViewportElements:g}=f.reduce((b,E)=>{let{element:C}=E;return rs(ze(C,"Element")?C:C?.parentElement)?b.inViewportElements.push(C):b.outOfViewportElements.push(C),b},{inViewportElements:[],outOfViewportElements:[]}),y=a(b=>{for(let E of b)if(n.excludedElements.add(E),n.excludedElements.size===c)return!0},"excludeElements");return y(g)||y(p),AO(n),Array.from(n.excludedElements)},"viewportReducer");function AO(n){let{excludedElements:e,element:t}=n;e.forEach(r=>{r.setAttribute(Ds,"")}),t._getmoreitemsid||(t._getmoreitemsid="gm"+IO++),n.id=t._getmoreitemsid,t.setAttribute(gl,n.id)}a(AO,"markTemplateElements");function ph(n){return Array.from(n.attributes).filter(e=>!e.name.startsWith("checksum")).map(e=>e.name.replace(/[0-9]/g,""))}a(ph,"mapAttributes");function mh(n){return n.className?.split(" ").filter(e=>e)??[]}a(mh,"getElementClasses");function dr(n=document.body,{nodeRepetitionsThreshold:e=db}={}){try{return console.time("bettertemplatize"),ml=new Set,pb(n,e),console.timeEnd("bettertemplatize"),console.log("[bettertemplatize] templates found:",Array.from(ml)),Array.from(ml)}catch(t){return console.error("[bettertemplatize] failed during template processing:",t.message),[]}}a(dr,"bettertemplatize");function pb(n,e){Array.from(n.children).forEach(t=>{if(t instanceof SVGElement)return;let r=t.children.length;if(r>=e){let i=Array.from(t.children),o=Math.ceil(r*TO);for(let c=0;c<r;c++){let u=0,d=i.slice(0,c);for(let f=c+1;f<r&&u+r-f>=o;f++)try{if(mb(i[c],i[f])){if(u++,u>=o){ml.add({element:t,...hb,elementsToKeep:d});return}}else d.push(i[f])}catch{return}}}pb(t,e)})}a(pb,"traverse");var RO=.8,LO=.5,NO=.8,OO=5;function mb(n,e,t=1){let r,i,o=a(C=>(C&&(hb={attributes:r,classes:i,tagName:n.nodeName}),C),"response");if(n.nodeType!==e.nodeType)return o(!1);if(n instanceof SVGElement&&e instanceof SVGElement||n.nodeType===Node.TEXT_NODE)return o(!0);if(n.nodeType!==Node.ELEMENT_NODE)return o(!1);let c=n,u=e;if(c.tagName.toLowerCase()!==u.tagName.toLowerCase())return o(!1);let d=ph(c),f=ph(u);if(r=d.filter(C=>f.includes(C)),r.length/Math.max(d.length,f.length)<RO)return o(!1);let p=mh(c),g=mh(u);if(i=p.filter(C=>g.includes(C)),i.length/Math.max(p.length,g.length)<LO)return o(!1);if(t>=OO)return o(!0);if(c.shadowRoot&&!u.shadowRoot||!c.shadowRoot&&u.shadowRoot)return o(!1);let y=Array.from(c.shadowRoot?c.shadowRoot.children:c.children),b=Array.from(u.shadowRoot?u.shadowRoot.children:u.children);if(y.length===0&&b.length===0)return o(!0);let E=0;for(let C=0;C<Math.min(y.length,b.length);C++)mb(y[C],b[C],t+1)&&E++;return E/Math.max(y.length,b.length)<NO?o(!1):o(!0)}a(mb,"areSimilar");var gb=16e3;var _O=!0,gh={markTransparentElementsAsHidden:!1,markElementsHiddenByTransparentElementAsVisible:!0},vi=class{constructor(){this.checksumIdToRRwebIdMap={};this.flashingElementsDetector=new pl;this.forceIncludeElements=[];this.preMapReducedHTMLSelectors=!1;this.useRrwebIdsAsChecksumIds=!1;this.excludedNodes=0;this.reducePercentage=50;this.scrollableElements={};this.defaultReduceHTMLOptions={checkElementInstanceType:!0,extraAllowedAttributes:[],initialChecksumId:void 0,forceIncludeFileInput:!1,forceIncludeAttribute:void 0,invalidateCache:!1,svgIntegration:"aria-label",includeFlashingElements:!0,onForceIncludeElement:a(()=>{},"onForceIncludeElement"),limitNodeRepetitions:50,stopFlashingElementsDetection:!1,assignChecksumIdsToAllElements:!0,assignRrwebIdsToAllElements:!0,fromTimeMachine:!1}}static{a(this,"HTMLReducer")}preprocessDocument(e=document){Xr("[preprocessDocument] querySelectorAllExtended");let t=de("*",e,{includeHTML:!0});Zr("[preprocessDocument] querySelectorAllExtended"),Xr("[preprocessDocument] isElementHidden");for(let r of t){if(this.shouldIgnoreElement(r))continue;let i=mt(r,gh);r.setAttribute("checksum-data-visible",!i.isHidden&&!i.isTransparent?"true":"false"),!i.isHidden&&i.isTransparent&&r.setAttribute("checksum-data-transparently-visible","true"),i.isBehindTransparentElement&&r.setAttribute("checksum-data-visible-under-transparent-element","true"),i.clickOffset&&r.setAttribute("checksum-data-click-offset",`${i.clickOffset.x};${i.clickOffset.y}`),this.markScrollableElement(r)}Zr("[preprocessDocument] isElementHidden")}markScrollableElement(e){let{canScrollX:t,canScrollY:r,progressX:i,progressY:o}=dt.getScrollData(e);if(t&&(e.setAttribute("data-scrollable-x","true"),e.setAttribute("data-scrollable-x-progress",i.toString())),r&&(e.setAttribute("data-scrollable-y","true"),e.setAttribute("data-scrollable-y-progress",o.toString())),t||r)try{let{id:c}=this.getSessionMirror().getMeta(e);c&&(this.scrollableElements[c]={x:t?i:void 0,y:r?o:void 0})}catch(c){console.error("[markScrollableElement] Error getting rrwebId and updating scrollable elements",e,c)}}setSessionRecorder(e){this.sessionRecorder=e}markInteractableElements(e,t=document,{forceIncludeAttribute:r,forceIncludeFileInput:i}={}){Xr("[markInteractableElements]"),this.interactableElements=[];let o=Ar(t,e,{allowDisabled:!0,excludeCrossOriginIframes:!1}),c=a((f,p)=>(f._checksumid||(f._checksumid=p??this.checksumIdCounter.getAndIncrement()),f.setAttribute("checksumid",f._checksumid),f.setAttribute("checksuminteractable","true"),f._checksumid),"setChecksumIdForElement"),u=a((f,p=!1,g)=>{if(this.shouldIgnoreElement(f))return;let y=f.getAttribute("checksum-data-click-offset")?.split(";"),b=y&&{x:parseInt(y[0]),y:parseInt(y[1])},E=c(f,g);this.interactableElements.push({checksumId:E,element:f,forced:p,clickOffset:b})},"handleInteractableElement");o.forEach(f=>u(f));let d=a(f=>{de(f,t,{includeHTML:!0}).forEach(p=>u(p,!0))},"forceIncludeSelector");r&&d(`[${r}]`),i&&d("input[type='file']"),this.forceIncludeElements.filter(({element:f})=>f?.isConnected).forEach(({element:f,checksumid:p})=>u(f,!0,p)),console.log(`Marked ${this.interactableElements.length} interactable elements`),Zr("[markInteractableElements]")}truthyFilter(e){return!!e}shouldIgnoreElement(e){return e.hasAttribute(Ds)}getSessionMirror(e=!1){return e?window.checksum.timeMachine.sessionReplayer:this.sessionRecorder}generateSimplifiedDom(e,t,{extraAllowedAttributes:r=[],checkElementInstanceType:i=!0,forceIncludeAttribute:o=void 0,forceIncludeFileInput:c=!1,svgIntegration:u="aria-label",onForceIncludeElement:d=void 0,contentWindow:f=window,assignChecksumIdsToAllElements:p=!0,assignRrwebIdsToAllElements:g=!0,fromTimeMachine:y=!1}={}){if(!e)return null;let b=a((pe,lt=pe)=>{if(pe._originalNode=lt,!ze(pe,"Element")||!ze(lt,"Element"))return pe;let st=pe,tt=lt;if(p&&!tt.hasAttribute("checksumid")&&(tt._checksumid||(tt._checksumid=this.checksumIdCounter.getAndIncrement()),st.setAttribute("checksumid",tt._checksumid),this.nonInteractableElementsFromSimplifiedDom.push({checksumId:tt._checksumid,element:tt})),g){let cn=this.getSessionMirror(y);if(cn){let Pt=cn.getMeta(tt)?.id?.toString();Pt&&(st.setAttribute("rrwebid",Pt),this.useRrwebIdsAsChecksumIds&&(st.setAttribute("checksumid",Pt),st._checksumid=Pt))}}return this.checksumIdToRRwebIdMap[tt._checksumid]=parseInt(tt._rrwebid),pe},"processSimplifiedDOMNode"),E=a((pe,lt=e)=>b(document.createTextNode(pe),lt),"createTextNode"),C=a((pe,lt=e)=>b(document.createElement(pe),lt),"createElementNode");if(e.nodeType===Node.ELEMENT_NODE){let pe=e;if(pe.tagName.toLowerCase()==="head"||this.shouldIgnoreElement(pe))return null}if(e.nodeType===Node.TEXT_NODE)return!e.parentElement||e.parentElement.getAttribute("checksum-data-visible")==="false"&&!e.parentElement.hasAttribute("checksumid")||e.parentElement.tagName.toLowerCase()==="body"?null:e.textContent?.trim()?E(e.textContent+" "):null;if(e.nodeType!==Node.ELEMENT_NODE||i&&!(ze(e,"HTMLElement")||ze(e,"SVGElement")))return null;let w=e,M=w.tagName.toLowerCase()==="iframe"&&w.contentDocument,N=zn(M?w.contentDocument.documentElement:w,{flattenShadowRootChildren:!0});t.esraSelectionRules?.limitChildren?.forEach(pe=>{w.matches(pe.selector)&&N.length>pe.limit&&N.splice(pe.limit)});let A=N.map(pe=>this.generateSimplifiedDom(pe,t,{extraAllowedAttributes:r,checkElementInstanceType:i,forceIncludeAttribute:o,forceIncludeFileInput:c,svgIntegration:u,onForceIncludeElement:d,contentWindow:M?w.contentWindow:f,assignChecksumIdsToAllElements:p,assignRrwebIdsToAllElements:g,fromTimeMachine:y})).filter(this.truthyFilter),_=w.getAttribute("checksum-data-visible")!=="false",z=w.hasAttribute("checksumid"),G=w.hasAttribute("role"),{customDescription:ee,customDescriptionTarget:V}=this.getElementCustomDescription(w,{enableSVGCustomDescription:!!u}),j=!!ee,oe=w.hasAttribute("aria-label")||w.hasAttribute("name")||w.hasAttribute("alt"),W=w.hasAttribute(gl)||this.forceIncludeElements.map(pe=>pe.element).includes(w)||!!o&&w.hasAttribute(o)||c&&w.tagName.toLowerCase()==="input"&&w.getAttribute("type")==="file",q=["form","button","input","textarea","a","table","th","tr","td","section","nav","header","footer","main","article","aside","li","ul","select","option","datalist"],B=z||_&&(G||oe||j||w.matches(q.join(",")));if(!(B||W)){if(!A.length)return null;if(A.length===1&&!ze(A[0],"Text"))return A[0]}!B&&W&&d?.(w);let Q=a(()=>{if(j)switch(V){case"svg":switch(u){case"aria-label":let lt=C("svg");return lt.setAttribute("aria-label",ee),{simplifiedNode:lt,appendChildren:!1};case"text":if(w.hasAttribute("checksumid")){let tt=C("div");return tt.innerText=ee,{simplifiedNode:tt,appendChildren:!1}}return{simplifiedNode:E(` [${ee}] `),appendChildren:!1}}}let pe=w.tagName.toLowerCase()==="body"&&w.ownerDocument!==document?"div":w.tagName;return{simplifiedNode:C(pe)}},"makeSimplifiedNode"),{simplifiedNode:Y,appendChildren:we=!0}=Q();if(!ze(Y,"Element"))return Y;let Fe=Y,_e=["aria-.+","data-name","name","type","placeholder","content","value","role","icon","title","checksumid","checksuminteractable","checksum-get-more-items","checked","disabled","selected","label","required","inputmode","min","max","step","minlength","maxlength","alt","hidden","draggable","ondrop","ondragover","contenteditable","href","(data-)?test(-)?id"].concat(r),mr=w.attributes;for(let pe of mr)for(let lt of _e)new RegExp("^"+lt+"$").test(pe.name)&&Fe.setAttribute(pe.name,pe.value??!0);if(w.isContentEditable?Fe.setAttribute("contenteditable","true"):!["TEXTAREA","INPUT","SELECT"].includes(w.tagName)&&window.getComputedStyle(w).cursor==="text"&&Fe.setAttribute("contenteditable","cursor-text"),ze(w,"HTMLInputElement")&&w.getAttribute("type")==="checkbox")w.checked&&Fe.setAttribute("checked","true");else if(ze(w,"HTMLInputElement")||ze(w,"HTMLSelectElement"))Fe.setAttribute("value",w.value);else if(ze(w,"HTMLTextAreaElement")&&!w.childNodes.length&&w.value){let pe=E(w.value);Fe.appendChild(pe)}return we&&A.forEach(pe=>Fe.appendChild(pe)),Fe}getElementCustomDescription(e,{enableSVGCustomDescription:t=!0}={}){return(ze(e,"SVGElement")||e.tagName.toLowerCase()==="svg")&&t?{customDescriptionTarget:"svg",customDescription:this.getSVGDescriptionForElement(e)}:{}}getSVGDescriptionForElement(e){let t=this.findSvgElementDescriptionFromBank(e);if(t)return t;let r=e.querySelector("title");if(r)return r.textContent}findSvgElementDescriptionFromBank(e){return this.getSvgBank().find(t=>e.matches(`svg:has(${t.selector})`))?.description}getSvgBank(){return ub}restoreDom(e=document){de("*",e).forEach(r=>{r.removeAttribute("checksum-data-visible"),r.removeAttribute("checksum-data-transparently-visible"),r.removeAttribute("checksum-data-visible-under-transparent-element"),r.removeAttribute("checksumid"),r.removeAttribute("checksuminteractable"),r.removeAttribute("checksum-data-click-offset"),r.removeAttribute(Ds),r.removeAttribute(gl),r.removeAttribute("data-scrollable-x"),r.removeAttribute("data-scrollable-y"),r.removeAttribute("data-scrollable-x-progress"),r.removeAttribute("data-scrollable-y-progress"),r.removeAttribute("rrwebid")})}removeAttribute(e){de("*",document).forEach(r=>{r.removeAttribute(e)})}async mapAndStoreSelectors(){let e={},t=new ut;for(let{checksumId:r,element:i,clickOffset:o,selector:c,locator:u,parentFramesSelectors:d}of await t.injectSelectorsAndLocators(this.interactableElementsFromSimplifiedDom)){if(!c){console.warn("Unable to get selector for element",i);continue}let f=i;e[r]={element:f,selector:c,locator:u,clickOffset:o,parentFramesSelectors:d,innerText:f.innerText,rrwebId:this.checksumIdToRRwebIdMap[r]}}return e}shouldFurtherReduce(e){return e?e.outerHTML.length>gb:!0}async reduce(e=document,t,r={}){console.time("reduceHTML");let{initialChecksumId:i,forceIncludeAttribute:o,forceIncludeFileInput:c,invalidateCache:u,includeFlashingElements:d,limitNodeRepetitions:f,stopFlashingElementsDetection:p}=this.lastReduceHTMLOptions={...this.defaultReduceHTMLOptions,...r},g=Tt.getInstance("reduce",{target:e,monitorInput:!0,invalidate:u,log:!1});if(g.hasCache())return g.get();let y=d?this.flashingElementsDetector.get():void 0;p&&this.flashingElementsDetector.stop(),this.nodeRepetitionsThreshold=f,this.reducePercentage=50,this.templateNodes=void 0,this.excludedNodes=0,this.scrollableElements={};let b=a(M=>fb(M,{forceIncludeAttribute:o,forceIncludeFileInput:c,forceIncludeElements:this.forceIncludeElements.map(N=>N.element),limit:Math.min(Math.ceil(M.element.children.length*(this.reducePercentage/100)),M.element.children.length-6)}),"templateReducer");console.log("Running pre-templatize"),this.templatize(b),console.log("Preprocessing document..."),this.preprocessDocument(e);let E;for((i||!this.checksumIdCounter)&&(this.checksumIdCounter=new yi(i??"0")),console.log("Marking interactable elements..."),this.markInteractableElements(t,e,{forceIncludeAttribute:o,forceIncludeFileInput:c});;){if(console.log("Generating simplified DOM..."),this.nonInteractableElementsFromSimplifiedDom=[],E=this.generateSimplifiedDom(e.documentElement,t,this.lastReduceHTMLOptions),!E)throw new Error("Unable to get simplified DOM");if(this.shouldFurtherReduce(E)){if(console.log(`Will further reduce (${E.outerHTML.length})...`),!this.templatize(b)){console.log(`Exceeded maximum html reduction, stopping (html size: ${E.outerHTML.length})`);break}}else break}console.log("Simplified DOM generated, length:",E.outerHTML.length);let C=new Set(Array.from(E.querySelectorAll("[checksumid]")).map(M=>M.getAttribute("checksumid")));this.interactableElementsFromSimplifiedDom=this.interactableElements.filter(M=>C.has(M.checksumId)),console.log(`Found ${this.interactableElementsFromSimplifiedDom.length} interactable elements in simplified DOM vs ${this.interactableElements.length} in original DOM`),console.log("Restoring DOM..."),this.restoreDom(e),this.preMapReducedHTMLSelectors=_O?!1:!!t.preMapReducedHTMLSelectors,this.preMapReducedHTMLSelectors?(console.log("Mapping selectors..."),this.selectors=await this.mapAndStoreSelectors(),console.log("Done mapping selectors")):this.selectors={},this.elementsInSimplifiedDomByChecksumId=[...this.interactableElementsFromSimplifiedDom,...this.nonInteractableElementsFromSimplifiedDom].reduce((M,N)=>(M[N.checksumId]=N,M),{});let w={reducedDomHTMLElement:E,reducedHTML:E.outerHTML,currentChecksumId:this.checksumIdCounter.get(),flashingHTML:y,scrollableElements:this.scrollableElements};return g.set(w),console.timeEnd("reduceHTML"),w}templatize(e){let t=this.excludedNodes,r=a(()=>Array.from(this.templateNodes).reduce((i,o)=>i+e(o).length,0),"calcExculdedNodes");if(!this.templateNodes)this.templateNodes=dr(document.body,{nodeRepetitionsThreshold:this.nodeRepetitionsThreshold}),this.excludedNodes=r();else do{if(this.reducePercentage<98)this.reducePercentage=Math.min(this.reducePercentage+20,98),console.log("Increasing reduce percentage to",this.reducePercentage);else{if(this.nodeRepetitionsThreshold<=20)return!1;this.reducePercentage=50,this.nodeRepetitionsThreshold-=10,console.log("Reducing node repetitions threshold to",this.nodeRepetitionsThreshold),this.templateNodes=dr(document.body,{nodeRepetitionsThreshold:this.nodeRepetitionsThreshold})}this.excludedNodes=r()}while(t===this.excludedNodes);return console.log(`[templatize] ${this.excludedNodes} elements marked to ignore for ${this.templateNodes.length} templates`),!0}getMoreElementsFromTemplate(e,t){try{let r=this.templateNodes.find(f=>f.id===e);if(!r)throw new Error("Template not found");let{element:i,excludedElements:o}=r;console.log("Preprocessing template node..."),this.preprocessDocument(i),console.log("Marking template interactable elements..."),this.markInteractableElements(t,i,this.lastReduceHTMLOptions);let c=[],u=a(()=>c.map(f=>f.outerHTML).join(""),"getElementsHTML"),d=o.values();for(;u().length<gb*.5;){let f=d.next().value;if(!f)break;let p=Array.from(f.querySelectorAll("[checksumid]")).concat(f._checksumid?[f]:[]);this.interactableElements.filter(g=>p.includes(g.element)).forEach(g=>{this.elementsInSimplifiedDomByChecksumId[g.element._checksumid]=g}),c.push(this.generateSimplifiedDom(f,t,this.lastReduceHTMLOptions)),o.delete(f)}return this.restoreDom(i),{items:u(),hasMoreItems:o.size>0}}catch(r){console.error("[getMoreElementsFromTemplate] error",r);return}}async getSelectorForChecksumId(e,{forceGenerate:t=!1}={}){let r=a(f=>({selector:e,element:f?f.element:null,locator:"",parentFramesSelectors:[],invalid:!0,rrwebId:this.checksumIdToRRwebIdMap[e],clickOffset:f?.clickOffset,innerText:f?f.element.innerText:""}),"makeDefaultResult"),i=new ut,o=this.elementsInSimplifiedDomByChecksumId[e];if(!o||!o.element.isConnected)return this.preMapReducedHTMLSelectors&&this.selectors[e]?this.selectors[e]:r(o);let{selector:c,locator:u,parentFramesSelectors:d}=await i.getSelectorAndLocator(o.element);return{...r(o),selector:c,locator:u,parentFramesSelectors:d,invalid:!1}}getElementForChecksumId(e){return this.elementsInSimplifiedDomByChecksumId[e]?.element}hasInnerTextByChecksumId(e,{maxLength:t=void 0,minLength:r=void 0}={}){if(!this.preMapReducedHTMLSelectors){let o=this.elementsInSimplifiedDomByChecksumId[e]?.element?.innerText;return!(!o||r&&o.length<r||t&&o.length>t)}return!!this.selectors[e]?.innerText}getInteractableElements(){return this.interactableElements}getInteractableElementsInReducedHTML(){return this.interactableElementsFromSimplifiedDom}startFlashingElementsDetection(){return this.flashingElementsDetector.start()}addForceIncludeElement(e){this.forceIncludeElements.push(e),e.element._checksumid=e.checksumid}};function vb(n){return n._debugSource?.fileName?n._debugSource?.fileName:""}a(vb,"getComponentpath");function yb(n,e){if(n==="Unknown"||typeof n!="string"||n[0]!==n[0].toUpperCase()||e.type.$$typeof===Symbol.for("react.context")||e.type.$$typeof===Symbol.for("react.forward_ref")||e.type.$$typeof===Symbol.for("react.memo")||e.type.$$typeof===Symbol.for("react.profiler")||e.type.$$typeof===Symbol.for("react.suspense"))return!1;let t=vb(e);return!(/.*\/node_modules\//.test(t)||n===t||/^(?!.*src).*$/.test(t))}a(yb,"isComponentAllowed");function yh(n,e={}){if(!n)return["",{}];let t=n.type,r=t?t.name||t:"Unknown",i="";if(yb(r,n)){i+=`<${r}>`;let o=vb(n);e[r]=o}if(n.child){let[o,c]=yh(n.child,e);i+=o,e={...e,...c}}if(yb(r,n)&&(i+=`</${r}>`),n.sibling){let[o,c]=yh(n.sibling,e);i+=o,e={...e,...c}}return[i,e]}a(yh,"traverseReactTree");function bb(n){let e=n._reactRootContainer?._internalRoot.current;return e||console.log("No react tree in element",n),yh(e)}a(bb,"getReactTree");var DO=!0,yl=class{constructor(){this.esraExtractors=[];this.playwrightSelector=new ut;this.defaultModulesState={extractReducedHtmlAndSelector:!1,inspectInteractableElements:!1,extractEsraMetadata:!0,extractPlaywrightSelector:!0};this.previousTargetNodeForReducedHTML=void 0;this.currentReducedHTMLChecksumIdAllocationCount="0";this.htmlReducer=new vi}static{a(this,"SessionDigesterSelector")}async getSelector(e,{extractPlaywrightSelector:t=!0,extractEsraMetadata:r=this.defaultModulesState.extractEsraMetadata,extractReducedHtmlAndSelector:i=this.defaultModulesState.extractReducedHtmlAndSelector,inspectInteractableElements:o=this.defaultModulesState.inspectInteractableElements}={}){if(!e)return null;let c={};if(r){console.log("extracting ESRA metadata...");let u=this.getESRAExtractor(e).extract(e);c.esraMetadata=u.toMetadata(),console.log("ESRA metadata extraction complete")}if(t){console.log("extracting playwright selector...");let{selector:u,locator:d,parentFramesSelectors:f}=await this.playwrightSelector.getSelectorAndLocator(e);c.playwrightSelector=u,c.playwrightLocator=d,c.playwrightParentFramesSelectors=f,console.log("Playwright selector extraction complete")}return i&&(console.log("extracting reduced HTML..."),c.reducedHTML=await this.getReducedHTMLAndTargetNodeSelector(e),console.log("Reduced HTML extraction complete")),o&&(console.log("extracting element inspection..."),c.interactionFoundOnInspection=await this.isElementInteractable(e),console.log("Element inspection extraction complete")),console.log("[SessionDigesterSelector] complete",c),c}async selector(e){return this.playwrightSelector.selector(e)}setAppRules(e){this.appSpecificRules=e}setOptions({defaultExtractReducedHtmlAndSelector:e,defaultInspectInteractableElements:t,defaultExtractEsraMetadata:r}){this.defaultModulesState.extractReducedHtmlAndSelector=e,this.defaultModulesState.inspectInteractableElements=t,this.defaultModulesState.extractEsraMetadata=r}async getReducedHTMLAndTargetNodeSelector(e){let t="checksum-target-node";e.setAttribute(t,"true");let r=this.previousTargetNodeForReducedHTML&&this.previousTargetNodeForReducedHTML!==e;this.previousTargetNodeForReducedHTML=e;let i=!1,o=a(g=>{g.hasAttribute(t)&&(i=!0)},"onForceIncludeElement"),{reducedDomHTMLElement:c,reducedHTML:u,currentChecksumId:d}=await this.htmlReducer.reduce(e.ownerDocument,{...this.appSpecificRules,preMapReducedHTMLSelectors:!1},{initialChecksumId:this.currentReducedHTMLChecksumIdAllocationCount,extraAllowedAttributes:[t],checkElementInstanceType:!1,forceIncludeAttribute:DO?t:void 0,invalidateCache:r,onForceIncludeElement:o});e.removeAttribute(t),this.currentReducedHTMLChecksumIdAllocationCount=d;let f=c.matches(`[${t}=true]`)?c:c.querySelector(`[${t}=true]`),p=f?f.getAttribute("checksumid"):void 0;return{html:u,selector:p,targetForceIncluded:i}}getESRAExtractor(e){let t=this.esraExtractors.find(i=>i.isSameDocument(e.ownerDocument));if(t)return t;let r=new Dt(e.ownerDocument);return this.esraExtractors.push(r),r}async isElementInteractable(e){let t=this.htmlReducer.getInteractableElements();return t&&t.length?t.some(i=>i.element===e&&!i.forced):(await Ar(e.ownerDocument,this.appSpecificRules)).includes(e)}};var bi=class n{static{a(this,"FrontendLogger")}static{this.overriddenMethods=["log","warn","error"]}static{this.original={}}static removePrefix(){this.overriddenMethods.forEach(e=>{n.original[e]&&(console[e]=n.original[e])})}static setPrefix(e){this.overriddenMethods.forEach(t=>{n.original[t]||(n.original[t]=console[t]),console[t]=(...r)=>{r.unshift(e),n.original[t].apply(console,r)}})}};var vl=class{constructor(e=i=>i.map(o=>o.target),t={childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0},r={collectElement:!0}){this.filterElements=e;this.observeOptions=t;this.options=r;this.mutationEventListeners=[]}static{a(this,"MutationDetector")}addEventListener(e,t){this.mutationEventListeners.push({selector:e,listener:t})}startListening(){this.elements=[],this.observer=new MutationObserver(e=>{this.options.collectElement&&(this.elements=[...this.elements,...this.filterElements(e)]),this.mutationEventListeners.length&&e.forEach(t=>{t.addedNodes.forEach(r=>{if(r.nodeType!==Node.ELEMENT_NODE)return;let i=r;this.mutationEventListeners.forEach(o=>{i.matches(o.selector)?o.listener(i):i.querySelectorAll(o.selector).forEach(c=>{o.listener(c)})})})})}),this.observer.observe(document.body,this.observeOptions)}stopListening(){return this.observer.disconnect(),this.elements}};function Eb(n){let e=n.filter(r=>r.addedNodes.length>0).reduce((r,i)=>[...r,...i.addedNodes],[]),t=n.filter(r=>r.type==="attributes"&&r.attributeName==="style"&&r.target instanceof HTMLElement&&/display\s*:\s*none/.test(r.oldValue)&&Wo(r.target).visible).map(r=>r.target);return[...e,...t]}a(Eb,"poppingElementsFilter");var Ei;function Sb(n){Ei=!1;let e=wb(n);return Ei?e:null}a(Sb,"getElementCaptionKey");var wb=a(n=>{let e=a(o=>{if(!(o.tagName.toLowerCase()in $o))return o.tagName.toLowerCase();let c=$o[o.tagName.toLowerCase()].map(u=>`${u}:${o.getAttribute(u)}`).join(",");return c?(Ei=!0,`SVG:${c}`):o.tagName.toLowerCase()},"getSVGKey"),t=a(o=>{Ei=!0;let c=r(o);return`IMG:${o.src}`+(c!==o.tagName.toLowerCase()?`(${c})`:"")},"getIMGKey"),r=a(o=>{let c=window.getComputedStyle(o).backgroundImage;if(c&&c!=="none"){let u=c.match(/url\("(.+)"\)/);if(u)return Ei=!0,`BGIMG:${o.tagName.toLowerCase()+u[1]}`}for(let u of["::before","::after"]){let d=window.getComputedStyle(o,u).content.replace(/['"]/g,""),f=window.getComputedStyle(o,u).fontFamily;if(d!=="none"&&d!==""){Ei=!0;let p=d.charCodeAt(0).toString(16).padStart(4,"0");return`FONT:${o.tagName.toLowerCase()+f+p}`}}return o.tagName.toLowerCase()},"getElementKey");if(!n||n.nodeType===Node.TEXT_NODE||!n.tagName)return;let i=n instanceof SVGElement?e(n):n instanceof HTMLImageElement?t(n):r(n);if(n.childNodes.length>0){let o=Array.from(n.childNodes).map(wb).filter(Boolean).join("+");o&&o.length>0&&(i+="("+o+")")}return i},"walk");function kO(n,e){let t=new Set;for(;n;)t.add(n),n=n.parentNode;for(;e;){if(t.has(e))return e;e=e.parentNode}return null}a(kO,"findCommonAncestor");function vh(n,e){let t=kO(n,e),r=0,i;if(!t)return 99999;for(i=n;i&&i!==t;)r++,i=i.parentNode;for(i=e;i&&i!==t;)r++,i=i.parentNode;return r}a(vh,"distanceBetweenNodes");var bh=class{constructor(){this.lastHighlights=[]}static{a(this,"ElementHighlighter")}clearHighlights(){this.lastHighlights.length&&(this.lastHighlights.forEach(e=>e.remove()),this.lastHighlights=[])}highlightElement(e,{highlightStyle:t={},textStyle:r={},mousePosition:i,text:o,textType:c="static",textPosition:u="overlap",textWidthType:d="rect",clear:f=!0,shouldFlipHighlightTextOutsideViewport:p=!0,pointerEvents:g,classNames:y=[],renderDocument:b,scroll:E=!1}={}){if(f&&this.clearHighlights(),!e)return;let C={left:0,top:0,right:0,bottom:0},w=1,M=1;if(b!==e.ownerDocument){let j=e.ownerDocument.defaultView?.frameElement;for(;j&&j.contentDocument!==b;){let oe=j.getBoundingClientRect(),W=this.getScaleFromStyles(j);w*=W.scaleX,M*=W.scaleY,C.left+=oe.left,C.top+=oe.top,j=j.ownerDocument.defaultView?.frameElement}}let N=b??e.ownerDocument,A=yu(e),_=e.getBoundingClientRect(),z={top:_.top*M+C.top,left:_.left*w+C.left};if(!A){let j=N.defaultView?.scrollX||0,oe=N.defaultView?.scrollY||0;z.left+=j,z.top+=oe}let G=N.createElement("div");if(G.style.outline="2px dashed rgba(255,0,0,.75)",G.style.position=A?"fixed":"absolute",G.style.left=z.left+"px",G.style.top=z.top+"px",G.style.width=_.width*w+"px",G.style.height=_.height*M+"px",G.style.pointerEvents=g??"none",G.style.zIndex="2147483647",G.className=["checksum-dom-cache-ignore",...y].join(" "),this.mergeStyle(G,t),i){let j=N.createElement("div");if(j.style.position="absolute",j.style.left=+i.x-16+"px",j.style.top=+i.y-16+"px",j.style.color="#004DFF",j.className=["checksum-dom-cache-ignore","mouse-cross",...y].join(" "),j.style.zIndex="2147483648",!N.head.querySelector("style[role=mouse-location]")){var ee=N.head.appendChild(N.createElement("style"));ee.setAttribute("role","mouse-location"),ee.innerHTML=".mouse-cross:before, .mouse-cross:after {position: absolute;left: 15px;content: ' ';height: 33px;width: 3px;background-color: #004DFF;}.mouse-cross:before {transform: rotate(0deg);}.mouse-cross:after {transform: rotate(-90deg);}"}N.body.appendChild(j),this.lastHighlights.push(j)}let V=N.createElement("div");o&&(V.className=["checksum-dom-cache-ignore",...y].join(" "),V.innerText=o,V.style.fontSize="12px",V.style.width=d==="rect"?`${_.width}px`:"auto",V.style.background="#000000a1",V.style.color="white",V.style.padding="5px",V.style.position="absolute",V.style.pointerEvents="none",V.style.userSelect="none",u==="above"?V.style.bottom=`${_.height}px`:u==="below"&&(V.style.top=`${_.height}px`),this.mergeStyle(V,r),G.appendChild(V),G.style.pointerEvents=g??"none",c==="hover"&&(V.style.display="none",G.addEventListener("mouseover",()=>{V.style.display="block"}),G.addEventListener("mouseout",()=>{V.style.display="none"}))),N.body.appendChild(G),u==="above"&&vu(V)>0?(V.style.bottom="initial",V.style.top=`${_.height}px`):u==="below"&&bu(V)>0&&(V.style.top="initial",V.style.bottom=`${_.height}px`),this.lastHighlights.push(G),p&&this.flipHighlightTextPositionOutsideViewport(V,u,_.height),E&&new dt(e).scrollIntoView()}getScaleFromStyles(e){let t=window.getComputedStyle(e),r=t.transform;if(r.startsWith("matrix")){let i=parseFloat(r.split(",")[0].replace("matrix(",""))||1,o=parseFloat(r.split(",")[3])||1;return{scaleX:i,scaleY:o}}else if(t.scale){let i=parseFloat(t.scale)||1,o=parseFloat(t.scale)||1;return{scaleX:i,scaleY:o}}return{scaleX:1,scaleY:1}}mergeStyle(e,t){for(let r in t)e.style[r]=t[r]}flipHighlightTextPositionOutsideViewport(e,t,r){t==="above"&&vu(e)>0?(e.style.bottom="initial",e.style.top=`${r}px`):t==="below"&&bu(e)>0&&(e.style.top="initial",e.style.bottom=`${r}px`)}},Dr=new bh;function bl(n,e){return typeof n!="string"?xb(n):`${JSON.stringify(n)}${e?"s":"i"}`}a(bl,"escapeForTextSelector");function El(n,e=!1){return typeof n!="string"?xb(n):`"${n.replace(/\\/g,"\\\\").replace(/["]/g,'\\"')}"${e?"s":"i"}`}a(El,"escapeForAttributeSelector");function xb(n){return n.unicode||n.unicodeSets?String(n):String(n).replace(/(^|[^\\])(\\\\)*(["'`])/g,"$1$2\\$3").replace(/>>/g,"\\>\\>")}a(xb,"escapeRegexForSelector");var PO=10,wi=PO/2;var FO=100,HO=120,$O=140,WO=160,BO=180,VO=200;var u$=FO+wi,d$=HO+wi,h$=$O+wi,f$=WO+wi,p$=BO+wi,m$=VO+wi;function Si(n){let e={full:"",immediate:[]};if(!UO(n)){let t="";if(n instanceof HTMLInputElement&&(n.type==="submit"||n.type==="button"))e={full:n.value,immediate:[n.value]};else{for(let r=n.firstChild;r;r=r.nextSibling)r.nodeType===Node.TEXT_NODE?(e.full+=r.nodeValue||"",t+=r.nodeValue||""):(t&&e.immediate.push(t),t="",r.nodeType===Node.ELEMENT_NODE&&(e.full+=Si(r).full));t&&e.immediate.push(t),n.shadowRoot&&(e.full+=Si(n.shadowRoot).full)}}return e}a(Si,"elementText");function Sl(n){return n.replace(/\u200b/g,"").trim().replace(/\s+/g," ")}a(Sl,"normalizeWhiteSpace");function UO(n){let e=n.ownerDocument;return n.nodeName==="SCRIPT"||n.nodeName==="NOSCRIPT"||n.nodeName==="STYLE"||e.head&&e.head.contains(n)}a(UO,"shouldSkipForTextMatching");function ks(n){return n.trim().replace(/([!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~])/g,"\\$1")}a(ks,"escapeSelector");function kr(n){let e=n.ownerDocument.defaultView;return e!==window&&!e.playwright&&(e.playwright=window.playwright),e.playwright}a(kr,"getElementWindowPlaywright");var wl=["role","aria-label","aria-labelledby","aria-checked","checked","placeholder","title","alt","id","data-testid","data-test-id","data-test","class","id","style","href","src","path","type"];function xi(n){return typeof n=="object"&&n!==null&&n.nodeType===Node.ELEMENT_NODE}a(xi,"isElement");var An={NONE:"",DESCENDANT:" ",CHILD:" > "},Pe={id:"id",class:"class",tag:"tag",attribute:"attribute",nthchild:"nthchild",nthoftype:"nthoftype"};function Cb(n,e){return Object.values(n).includes(e)}a(Cb,"isEnumValue");var GO="CssSelectorGenerator";function Ci(n="unknown problem",...e){console.warn(`${GO}: ${n}`,...e)}a(Ci,"showWarning");var zO={selectors:[Pe.id,Pe.class,Pe.tag,Pe.attribute],includeTag:!1,whitelist:[],blacklist:[],combineWithinSelector:!0,combineBetweenSelectors:!0,root:null,maxCombinations:Number.POSITIVE_INFINITY,maxCandidates:Number.POSITIVE_INFINITY};function qO(n){return Array.isArray(n)?n.filter(e=>Cb(Pe,e)):[]}a(qO,"sanitizeSelectorTypes");function Eh(n){return n instanceof RegExp}a(Eh,"isRegExp");function jO(n){return["string","function"].includes(typeof n)||Eh(n)}a(jO,"isCssSelectorMatch");function Mb(n){return Array.isArray(n)?n.filter(jO):[]}a(Mb,"sanitizeCssSelectorMatchList");function KO(n){return n instanceof Node}a(KO,"isNode");function Tb(n){let e=[Node.DOCUMENT_NODE,Node.DOCUMENT_FRAGMENT_NODE,Node.ELEMENT_NODE];return KO(n)&&e.includes(n.nodeType)}a(Tb,"isParentNode");function Sh(n,e){if(Tb(n))return n.contains(e)||Ci("element root mismatch","Provided root does not contain the element. This will most likely result in producing a fallback selector using element's real root node. If you plan to use the selector using provided root (e.g. `root.querySelector`), it will not work as intended."),n;let t=e.getRootNode({composed:!1});return Tb(t)?(t!==document&&Ci("shadow root inferred","You did not provide a root and the element is a child of Shadow DOM. This will produce a selector using ShadowRoot as a root. If you plan to use the selector using document as a root (e.g. `document.querySelector`), it will not work as intended."),t):Ps(e)}a(Sh,"sanitizeRoot");function Ib(n){return typeof n=="number"?n:Number.POSITIVE_INFINITY}a(Ib,"sanitizeMaxNumber");function Ab(n,e={}){let t=Object.assign(Object.assign({},zO),e);return{selectors:qO(t.selectors),whitelist:Mb(t.whitelist),blacklist:Mb(t.blacklist),root:Sh(t.root,n),combineWithinSelector:!!t.combineWithinSelector,combineBetweenSelectors:!!t.combineBetweenSelectors,includeTag:!!t.includeTag,maxCombinations:Ib(t.maxCombinations),maxCandidates:Ib(t.maxCandidates)}}a(Ab,"sanitizeOptions");function hr(n=[]){let[e=[],...t]=n;return t.length===0?e:t.reduce((r,i)=>r.filter(o=>i.includes(o)),e)}a(hr,"getIntersection");function xl(n){return[].concat(...n)}a(xl,"flattenArray");function YO(n){return n.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".+")}a(YO,"wildcardToRegExp");function Fs(n){let e=n.map(t=>{if(Eh(t))return r=>t.test(r);if(typeof t=="function")return r=>{let i=t(r);return typeof i!="boolean"?(Ci("pattern matcher function invalid","Provided pattern matching function does not return boolean. It's result will be ignored.",t),!1):i};if(typeof t=="string"){let r=new RegExp("^"+YO(t)+"$");return i=>r.test(i)}return Ci("pattern matcher invalid","Pattern matching only accepts strings, regular expressions and/or functions. This item is invalid and will be ignored.",t),()=>!1});return t=>e.some(r=>r(t))}a(Fs,"createPatternMatcher");function Mi(n,e,t){let r=Array.from(Sh(t,n[0]).querySelectorAll(e));return r.length===n.length&&n.every(i=>r.includes(i))}a(Mi,"testSelector");function wh(n,e){e=e??Ps(n);let t=[],r=n;for(;xi(r)&&r!==e;)t.push(r),r=r.parentElement;return t}a(wh,"getElementParents");function Rb(n,e){return hr(n.map(t=>wh(t,e)))}a(Rb,"getParents");function Ps(n){return n.ownerDocument.querySelector(":root")}a(Ps,"getRootNode");var Cl=", ",Lb=new RegExp(["^$","\\s"].join("|")),Nb=new RegExp(["^$"].join("|")),Ml=[Pe.nthoftype,Pe.tag,Pe.id,Pe.class,Pe.attribute,Pe.nthchild];var XO=Fs(["class","id","ng-*"]);function ZO({name:n}){return`[${n}]`}a(ZO,"attributeNodeToSimplifiedSelector");function QO({name:n,value:e}){return`[${n}='${e}']`}a(QO,"attributeNodeToSelector");function JO({nodeName:n,nodeValue:e},t){let r=t.tagName.toLowerCase();return["input","option"].includes(r)&&n==="value"||n==="src"&&e?.startsWith("data:")?!1:!XO(n)}a(JO,"isValidAttributeNode");function e_({nodeName:n,nodeValue:e}){return{name:Pr(n),value:Pr(e??void 0)}}a(e_,"sanitizeAttributeData");function xh(n){let e=Array.from(n.attributes).filter(t=>JO(t,n)).map(e_);return[...e.map(ZO),...e.map(QO)]}a(xh,"getElementAttributeSelectors");function Ob(n){let e=n.map(xh);return hr(e)}a(Ob,"getAttributeSelectors");function Ch(n){var e;return((e=n.getAttribute("class"))!==null&&e!==void 0?e:"").trim().split(/\s+/).filter(t=>!Nb.test(t)).map(t=>`.${Pr(t)}`)}a(Ch,"getElementClassSelectors");function _b(n){let e=n.map(Ch);return hr(e)}a(_b,"getClassSelectors");function Mh(n){var e;let t=(e=n.getAttribute("id"))!==null&&e!==void 0?e:"",r=`#${Pr(t)}`,i=n.getRootNode({composed:!1});return!Lb.test(t)&&Mi([n],r,i)?[r]:[]}a(Mh,"getElementIdSelectors");function Db(n){return n.length===0||n.length>1?[]:Mh(n[0])}a(Db,"getIdSelector");function Th(n){let e=n.parentNode;if(e){let r=Array.from(e.childNodes).filter(xi).indexOf(n);if(r>-1)return[`:nth-child(${String(r+1)})`]}return[]}a(Th,"getElementNthChildSelector");function kb(n){return hr(n.map(Th))}a(kb,"getNthChildSelector");function Ih(n){return[Pr(n.tagName.toLowerCase())]}a(Ih,"getElementTagSelectors");function Tl(n){let e=[...new Set(xl(n.map(Ih)))];return e.length===0||e.length>1?[]:[e[0]]}a(Tl,"getTagSelector");function Ah(n){let e=Tl([n])[0],t=n.parentElement;if(t){let i=Array.from(t.children).filter(o=>o.tagName.toLowerCase()===e).indexOf(n);if(i>-1)return[`${e}:nth-of-type(${String(i+1)})`]}return[]}a(Ah,"getElementNthOfTypeSelector");function Pb(n){return hr(n.map(Ah))}a(Pb,"getNthOfTypeSelector");function*t_(n=[],{maxResults:e=Number.POSITIVE_INFINITY}={}){let t=0,r=Rh(1);for(;r.length<=n.length&&t<e;)t+=1,yield r.map(o=>n[o]),r=r_(r,n.length-1)}a(t_,"powerSetGenerator");function Lh(n=[],{maxResults:e=Number.POSITIVE_INFINITY}={}){return Array.from(t_(n,{maxResults:e}))}a(Lh,"getPowerSet");function r_(n=[],e=0){let t=n.length;if(t===0)return[];let r=[...n];r[t-1]+=1;for(let i=t-1;i>=0;i--)if(r[i]>e){if(i===0)return Rh(t+1);r[i-1]++,r[i]=r[i-1]+1}return r[t-1]>e?Rh(t+1):r}a(r_,"bumpOffsets");function Rh(n=1){return Array.from(Array(n).keys())}a(Rh,"generateOffsets");function Fb(n={}){let e=[];return Object.entries(n).forEach(([t,r])=>{e=r.flatMap(i=>e.length===0?[{[t]:i}]:e.map(o=>Object.assign(Object.assign({},o),{[t]:i})))}),e}a(Fb,"getCartesianProduct");var n_="3a".toUpperCase(),i_=/[ !"#$%&'()\[\]{|}<>*+,./;=?@^`~\\]/;function Pr(n=""){return CSS?CSS.escape(n):s_(n)}a(Pr,"sanitizeSelectorItem");function s_(n=""){return n.split("").map(e=>e===":"?`\\${n_} `:i_.test(e)?`\\${e}`:escape(e).replace(/%/g,"\\")).join("")}a(s_,"legacySanitizeSelectorItem");var o_={tag:Tl,id:Db,class:_b,attribute:Ob,nthchild:kb,nthoftype:Pb},a_={tag:Ih,id:Mh,class:Ch,attribute:xh,nthchild:Th,nthoftype:Ah};function Hb(n,e){return a_[e](n)}a(Hb,"getElementSelectorsByType");function l_(n,e){let t=o_[e];return t(n)}a(l_,"getSelectorsByType");function c_(n=[],e,t){return n.filter(r=>t(r)||!e(r))}a(c_,"filterSelectors");function u_(n=[],e){return n.sort((t,r)=>{let i=e(t),o=e(r);return i&&!o?-1:!i&&o?1:0})}a(u_,"orderSelectors");function d_(n,e,t){let r=h_(n,t),i=g_(r,t),o=xl(i);return[...new Set(o)]}a(d_,"getAllSelectors");function h_(n,e){let{blacklist:t,whitelist:r,combineWithinSelector:i,maxCombinations:o}=e,c=Fs(t),u=Fs(r),d=a((f,p)=>{let g=l_(n,p),y=c_(g,c,u),b=u_(y,u);return f[p]=i?Lh(b,{maxResults:o}):b.map(E=>[E]),f},"reducer");return f_(e).reduce(d,{})}a(h_,"getSelectorsList");function f_(n){let{selectors:e,includeTag:t}=n,r=[...e];return t&&!r.includes("tag")&&r.push("tag"),r}a(f_,"getSelectorsToGet");function p_(n){return n.includes(Pe.tag)||n.includes(Pe.nthoftype)?[...n]:[...n,Pe.tag]}a(p_,"addTagTypeIfNeeded");function m_(n){let{selectors:e,combineBetweenSelectors:t,includeTag:r,maxCandidates:i}=n,o=t?Lh(e,{maxResults:i}):e.map(c=>[c]);return r?o.map(p_):o}a(m_,"combineSelectorTypes");function g_(n,e){return m_(e).map(t=>y_(t,n)).filter(t=>t.length>0)}a(g_,"getTypeCombinations");function y_(n,e){let t={};return n.forEach(i=>{let o=e[i];o&&o.length>0&&(t[i]=o)}),Fb(t).map(b_)}a(y_,"constructSelectors");function v_(n,e){return e[n]?e[n].join(""):""}a(v_,"constructSelectorType");function b_(n={}){let e=[...Ml];return n[Pe.tag]&&n[Pe.nthoftype]&&e.splice(e.indexOf(Pe.tag),1),e.map(t=>v_(t,n)).join("")}a(b_,"constructSelector");function E_(n,e){return[...n.map(t=>e+An.DESCENDANT+t),...n.map(t=>e+An.CHILD+t)]}a(E_,"generateCandidateCombinations");function S_(n,e){return e===""?n:E_(n,e)}a(S_,"generateCandidates");function w_(n,e,t="",r){let i=d_(n,e,r),o=S_(i,t);for(let c of o)if(Mi(n,c,e))return c;return null}a(w_,"getSelectorWithinRoot");function $b(n,e,t="",r){if(n.length===0)return null;let i=[n.length>1?n:[],...Rb(n,e).map(o=>[o])];for(let o of i){let c=w_(o,e,t,r);if(c)return{foundElements:o,selector:c}}return null}a($b,"getClosestIdentifiableParent");function Wb(n){(n instanceof NodeList||n instanceof HTMLCollection)&&(n=Array.from(n));let e=(Array.isArray(n)?n:[n]).filter(xi);return[...new Set(e)]}a(Wb,"sanitizeSelectorNeedle");function x_(n){return{value:n,include:!1}}a(x_,"createElementSelectorData");function Bb(n,e,t=An.NONE){let r={};return e.forEach(i=>{Reflect.set(r,i,Hb(n,i).map(x_))}),{element:n,operator:t,selectors:r}}a(Bb,"createElementData");function Vb({selectors:n,operator:e}){let t=[...Ml];n[Pe.tag]&&n[Pe.nthoftype]&&(t=t.filter(i=>i!==Pe.tag));let r="";return t.forEach(i=>{var o;((o=n[i])!==null&&o!==void 0?o:[]).forEach(({value:u,include:d})=>{d&&(r+=u)})}),e+r}a(Vb,"constructElementSelector");function C_(n){return[":root",...wh(n).reverse().map(r=>{let i=Bb(r,[Pe.nthchild],An.CHILD);return i.selectors.nthchild.forEach(o=>{o.include=!0}),i}).map(Vb)].join("")}a(C_,"getElementFallbackSelector");function Ub(n){return n.map(C_).join(Cl)}a(Ub,"getFallbackSelector");function Nh(n,e={}){var t;let r=Wb(n),i=Ab(r[0],e),o=(t=i.root)!==null&&t!==void 0?t:Ps(r[0]),c="",u=o;function d(){return $b(r,u,c,i)}a(d,"updateIdentifiableParent");let f=d();for(;f;){let{foundElements:p,selector:g}=f;if(Mi(r,g,o))return g;u=p[0],c=g,f=d()}return r.length>1?r.map(p=>Nh(p,i)).join(Cl):Ub(r)}a(Nh,"getCssSelector");var Hs=a(n=>new Promise(e=>setTimeout(e,n)),"awaitSleep"),zb=a(async(n,e=1e3,t)=>{if(e===null)return n;let r="guard-timed-out",i=a(async()=>(await Hs(e+1e3),r),"guard"),o=await Promise.race([n,i()]);if(typeof o=="string"&&o===r)throw typeof t=="function"?new Error(t()):new Error(t??"guardReturnTimedOut");return o},"guardReturn");var M_=!1,an=class n{constructor(e){this.locators=[];this.elements=[];this.locators=e}static{a(this,"LocatorChain")}hasDuplicateFilters(){let e=this.locators.map(t=>t.options?.hasText).filter(t=>t);return e.length!==new Set(e).size}cloneAndAddCandidate(e){return new n([e,...this.locators.slice()])}toLocatorCandidate(){return{selector:this.getSelector(),locator:this.getLocator()}}getSelector(){return this.locators.map(e=>e.selector).join(" >> ")}getLocator(){return this.locators.map(e=>e.locator).join(".")}},ln=class n{constructor(e=document){this.rootNode=e;this.MAX_TESTING_SELECTORS=50;this.MAX_SINGLE_ELEMENT_SELECTORS=5;this.MAX_PROCESSING_TIME=15e3;this.MAX_MULTICANDIDATE_PROCESSING=5}static{a(this,"PlaywrightCustomLocatorGenerator")}async generate(e,t=[],r={}){let{isPartOfListItem:i,isForContextElement:o,useTextContent:c,addCSSSelectorGenerator:u,expandCSSKeyElements:d,bruteForceMode:f}={isPartOfListItem:!1,isForContextElement:!1,useTextContent:!0,addCSSSelectorGenerator:!0,expandCSSKeyElements:!0,bruteForceMode:!1,...r};if(ze(e,"HTMLOptionElement")&&e.closest("select"))return this.generate(e.closest("select"),t,{isPartOfListItem:i});this.targetElement=e,this.startTimestamp=Date.now();let p=[];for(t=t.filter(y=>Array.from(document.querySelectorAll(y.selector)).includes(y.element)),d&&this.expandCSSKeyFeatures(e,t);e&&e!==this.rootNode;){await Hs(0);let y=this.getAllLocators(e,t,{useTextContent:c,bruteForceMode:f}),b=[],E=a(async C=>{if(!C.hasDuplicateFilters())try{await Hs(0);let{elements:w}=this.getLocatorBase(e).locator(C.getSelector());w?.some(M=>M===this.targetElement)&&(C.elements=w.filter(M=>on(M)||M.constructor.name===this.targetElement.constructor.name),b.push(C))}catch(w){console.log(w,C.getSelector())}},"testCandidate");if(p.length)for(let C of y)for(let w of p)await E(w.cloneAndAddCandidate(C));else for(let C of y)await E(new an([C]));if(b.length===0&&p.length===0){let C=e.tagName.toLowerCase();p.push(new an([{selector:C,locator:this.getSelectorLocator(C),elements:this.getLocatorBase(e).locator(e.tagName.toLowerCase()).elements.filter(w=>on(w))}]))}if(p.push(...b),o)return p.map(C=>C.toLocatorCandidate());if(p.length>this.MAX_TESTING_SELECTORS||p.filter(C=>C.elements.length===1).length>this.MAX_SINGLE_ELEMENT_SELECTORS||this.checkTimeout(!1))break;e=e.parentElement}if(i){let y=this.filterListItemsSelectors(p);if(y?.length)return y.map(b=>({...b.toLocatorCandidate(),isListSelector:!0}))}let g=[];try{for(let y of p)this.checkTimeout(),g.push(...y.elements.length===1?[y]:await this.reduceMultiCandidates(y))}catch(y){y instanceof Yr&&console.warn("[PlaywrightCustomLocatorGenerator] Timeout error")}if(!g?.length&&(console.log("no single element selector found"),!d))return this.generate(e,t,{isPartOfListItem:i,isForContextElement:o,useTextContent:c,addCSSSelectorGenerator:!0,expandCSSKeyElements:!0});if(u){let y=await this.addCSSSelectorGenerator();y&&g.unshift(y)}if(this.rootNode===document&&c){let{selector:y,locator:b}=await new ut().getSelectorAndLocator(this.targetElement);g.unshift(new an([{selector:y,locator:b}]))}return g=g.concat(await this.addOptionalParentSelector(c,u,d)),Array.from(new Map(g.map(y=>[y.toLocatorCandidate().selector,y.toLocatorCandidate()])).values())}testSelector(e,t,r,i=!0){let o=kr(t).selector(t),c=this.getLocatorBase(t).locator(o);console.log("Locator result",c);let u=a(f=>i&&(f.elements.length!==1||t!==f.element)?!1:!!f.elements.includes(t),"testResult");if(!u(c))return{valid:!1};let d={};if(r?.locatorWithVars?.length)try{let p=new Function(`{ return function(element) { ${r.variablesCode}; return this.getLocatorBase(element).locator(\`${r.locatorWithVars}\`); } }`)().call(this,t);if(console.log("Locator with vars result",p),!u(p))return{valid:!1};d={selectorWithVars:o,locatorWithVars:r.locatorWithVars}}catch(f){return console.error("Error testing selector with variables",f.message),{valid:!1}}return{valid:!0,selector:o,locator:e,...d}}async addCSSSelectorGenerator(){try{let e=this.rootNode===document?{}:{root:this.rootNode},t=await zb(new Promise(r=>{let i=Nh(this.targetElement,e);r(i)}),2e3);if(t.length<50)return new an([{selector:t,locator:`locator('${t}')`}])}catch(e){console.error("Error getting CSS selector",e)}}async addOptionalParentSelector(e,t,r){try{let i=kr(this.targetElement),o=i.locator(i.selector(this.targetElement)).element;if(o!==this.targetElement&&o?.contains(this.targetElement))return(await this.generate(o,[],{isPartOfListItem:!1,isForContextElement:!1,useTextContent:e,addCSSSelectorGenerator:t,expandCSSKeyElements:r})).map(({selector:c,locator:u})=>new an([{selector:c,locator:u}]))}finally{return[]}}expandCSSKeyFeatures(e,t,r=4){try{let i=[];for(;e&&e!==this.rootNode&&i.length<r&&e!==document.documentElement;)Array.from(e.attributes).filter(({name:c,value:u})=>u.length<30&&!wl.includes(c)).forEach(c=>{try{if(i.length>r-1)return;let u=`[${c.name}${c.value?`="${c.value}"`:""}]`;try{if(!e.parentElement||e.parentElement.querySelectorAll(u).length>1)return}catch{console.warn(`Error checking selector - ${u}, continuing`);return}if(!t.some(d=>d.selector.includes(u))&&this.getLocatorBase(e).locator(u).element===e){let d={element:e,selector:u};t.push(d),i.push(d)}}catch(u){console.warn("Error processing css key feature",{name:c.name,value:c.value},u)}}),e=e.parentElement;i.length}catch(i){console.error("Error extracting CSS key features",i)}}async generateArbitraryItemListSelector(e,t=[]){console.log("generateArbitraryItemListSelector",e);try{let r=dr(document.body,{nodeRepetitionsThreshold:5});if(!r?.length)throw new Error("No templates found in the page");let i=r.find(y=>y.element.contains(e));if(!i)throw new Error("No template found for target element");console.log("Found template for target element",i);let o=await new n().generate(i.element,t,{isPartOfListItem:!1,isForContextElement:!1,useTextContent:!1});console.log("baseCustomSelectors",o);let c=o[0].selector,u=this.getSelectorLocator(c,i.element);console.log("Randomly selected baseSelector",c);let d=a(()=>{let y=[],b=new Rn,E=e;for(;E&&E!==i.element;){let C="",w=!1,M=!1,N=!1;for(;!C.length;)C=b.getSelectorPart(E,{useClasses:M,useId:w,useTag:N}),w?(M=!0,N=!0):w=!0;y.push({selector:C,element:E}),E=E.parentElement}return y},"getCSSFeatures"),f=d();console.log("cssFeatures",f);let p=(await new n(i.element).generate(e,d(),{isPartOfListItem:!0,isForContextElement:!1,useTextContent:!1})).map(y=>({...y,elements:[]})),g=p.filter(y=>(y.elements=this.getLocatorBase(e).locator(c).locator(y.selector).elements,y.elements.length>Math.ceil(i.element.children.length*.7)));return console.log("elementSelectors",p),g.map(({selector:y,locator:b})=>({selector:`${c} >> ${y}`,locator:`${u}.${b}`}))}catch(r){console.error("[findGenericItemListSelector] error",r)}}filterListItemsSelectors(e){try{let t=dr(document.body,{nodeRepetitionsThreshold:5});if(!t?.length)throw new Error("No templates found in the page");return e.filter(r=>{if(r.elements.length<2)return!1;let i=new Rn().getSmallestCommonRoot(r.elements);return!(!t.some(o=>o.element===i)||Array.from(i.children).some(o=>{r.elements.filter(c=>o.contains(c)).length>1}))})}catch(t){console.error("[filterListItemsSelectors] error",t.message)}}getLocatorBase(e){let t=kr(e);return this.rootNode===document||this.rootNode.nodeType===9?t:t.locator(t.selector(this.rootNode))}getSelectorLocator(e,t){return kr(t??this.targetElement).asLocator("javascript",e)}async reduceMultiCandidates(e){await Hs(0);let{elements:t}=e,r=e.getSelector().split(" >> "),i=[],o=this.getLocatorBase(this.targetElement),c=a(p=>{try{return i.push(new an([{selector:p,locator:this.getSelectorLocator(p)}])),i.length>=this.MAX_MULTICANDIDATE_PROCESSING}catch(g){return console.error(g),!1}},"addCandidateWithSelector"),u=a(p=>e.getSelector()+(r[r.length-1]===this.targetElement.tagName.toLowerCase()?p:` >> internal:and=${T_(this.targetElement.tagName.toLowerCase()+p)}`),"addCSSFilterToLocator"),d=a(p=>o.locator(p).elements.length===1?c(p):!1,"addIfSingularAndCheckLimit");if(t.length<5){let p=t.indexOf(this.targetElement);p!==-1&&c(e.getSelector()+` >> nth=${p}`)}let f=this.targetElement.parentElement;if(t.every(p=>p.parentElement===f&&p.tagName===this.targetElement.tagName)){let p=Array.from(f.children).indexOf(this.targetElement);if(p!==-1){let g=u(`:nth-child(${p+1})`);d(g)&&c(g)}}for(let p of Array.from(this.targetElement.classList).filter(g=>!sr.includes(g))){let g=u(`.${ks(p)}`);try{if(d(g))return i}catch(y){console.error(y)}}for(let p of Array.from(this.targetElement.attributes).filter(g=>!wl.includes(g.name))){let g=u(`[${p.name}`+(p.value?`="${p.value}"]`:"]"));try{if(d(g))return i}catch(y){console.error(y)}}return i}getAllLocators(e,t,r={}){r={exact:!0,useTextContent:!0,...r};let i=[this.getByRoleLocator(e,r),r.useTextContent?this.getByTextLocator(e,r):null,this.getByLabelLocator(e,r),this.getByPlaceholderLocator(e,r),this.getByTitleLocator(e,r),this.getByAltLocator(e,r),this.getTestIdLocator(e,r),...e===this.targetElement?[this.getInnerFeaturesLocator(e)]:[],...t.filter(o=>o.element===e).map(o=>({selector:o.selector,locator:this.getSelectorLocator(o.selector)}))].filter(o=>o);return!i.length&&r.bruteForceMode?i.concat(this.findUniqueCSSLocatorForElement(e)):i}findUniqueCSSLocatorForElement(e,t=5){let r=[],i=a(o=>(r.push([{selector:o,locator:`locator('${o}')`}]),r.length>=t),"addCandidate");for(let o of Array.from(e.attributes).filter(({name:c,value:u})=>u.length<30&&!wl.includes(c)))try{let c=`[${o.name}${o.value?`="${o.value}"`:""}]`;if(e.ownerDocument.querySelectorAll(c).length===1&&i(c))return r}catch{}for(let o of Array.from(e.classList).filter(c=>!sr.includes(c)))try{let c=`.${ks(o)}`;if(e.ownerDocument.querySelectorAll(c).length===1&&i(c))return r}catch{}return r}getInnerFeaturesLocator(e){let t=e.tagName.toLowerCase();if(!on(e)||["html","body","div"].includes(t))return;let r=new Ir().extract(e).filter(o=>!o.isRoot).slice(0,4).map(o=>Xn(o).pop());if(r.length<2)return;let i=t+r.map(o=>`:has(${o})`).join("");return{selector:i,locator:this.getSelectorLocator(i)}}getByRoleLocator(e,t={}){try{if(!on(e))throw new Error("Provided element is not an HTMLElement");let r={},i={button:"button",input:a(b=>b.type==="checkbox"?"checkbox":b.type==="radio"?"radio":"textbox","input"),select:"listbox",a:"link",h1:"heading",h2:"heading",h3:"heading",h4:"heading",h5:"heading",h6:"heading",li:"listitem",option:"option",textarea:"textbox",table:"table",tr:"row",th:"columnheader",td:"cell",img:"img"},o=e.tagName.toLowerCase(),c=e.getAttribute("role")||(i[o]instanceof Function?i[o](e):i[o]);if(!c)return;let u=[];if(c==="heading"&&!e.hasAttribute("aria-level")){let b=parseInt(o.charAt(1),10);u.push(["level",String(b)])}(c==="checkbox"||c==="radio")&&u.push(["checked",String(e.getAttribute("aria-checked")??e.getAttribute("checked")??"false")]);let d=a(()=>{let b=a(A=>this.limitTextLength(this.normalize(A),t.exact),"normalize"),E={text:"",exact:!1},C=e.getAttribute("aria-label")??e.getAttribute("aria-labelledby")??e.getAttribute("title");if(C)return b(C);let w=Si(e),M=Sl(w.full);if(!M?.length)return E;let N=b(M);return r.hasText=N.text,N},"getAccessibleName"),{text:f,exact:p}=d();f&&f.length>0&&f.length<30&&u.push(["name",El(f,p)]);let g=a(()=>{let b=`internal:role=${c}${u.map(([E,C])=>`[${E}=${C}]`).join("")}`;return{locator:this.getSelectorLocator(b),selector:b,options:r}},"getSelection"),y=g();if(f?.length&&p&&!this.getLocatorBase(e).locator(y.selector).elements.includes(e)){let b=u.find(E=>E[0]==="name");b&&(b[1]=El(f,!1),y=g())}return y}catch(r){console.error("Error getting role locator",r.message)}}getByTextLocator(e,t={}){try{if(!on(e))return;let r=Sl(Si(e).full);if(!r?.length||r.length>100)return;let i={};if(Array.from(e.children).filter(u=>on(u)).some(u=>Sl(Si(u).full)===r)){i.hasText=r;let u=`${e.tagName.toLowerCase()} >> internal:has-text=${bl(r,!1)}`;return{selector:u,locator:this.getSelectorLocator(u),options:i}}let o=a(u=>{let f="internal:text="+bl(r,u);return{selector:f,locator:this.getSelectorLocator(f),options:i}},"getSelection"),c=o(t.exact);return t.exact&&!this.getLocatorBase(e).locator(c.selector).elements.includes(e)&&(c=o(!1)),c}catch{}}getByLabelLocator(e,t={}){try{if(!on(e)||!["input","textarea","select"].includes(e.tagName.toLowerCase()))return;let r=a(u=>({selector:`internal:label=${bl(u,t.exact)}`,locator:`getByLabel('${u}')`}),"respond"),i=e.getAttribute("aria-label");if(i)return r(i);let o=e.getAttribute("aria-labelledby");if(o){let u=document.getElementById(o);if(u){let d=u.innerText.trim();if(d)return r(d)}}let c=e.getAttribute("id");if(c){let u=document.querySelector(`label[for="${c}"]`);if(u){let d=u.innerText.trim();if(d)return r(d)}}}catch{}}getByPlaceholderLocator(e,t={}){if(["input","textarea"].includes(e.tagName?.toLowerCase()))return this.getByAttributeLocator(e,"placeholder",t)}getByTitleLocator(e,t={}){return this.getByAttributeLocator(e,"title",t)}getByAltLocator(e,t={}){return this.getByAttributeLocator(e,"alt",t)}getTestIdLocator(e,t={}){for(let r of["data-testid","data-test-id","data-test"])if(e.getAttribute(r))return this.getByAttributeLocator(e,r,{...t,locatorName:"getByTestId"})}getByAttributeLocator(e,t,r={}){try{if(!on(e))return;let i=e.getAttribute(t);if(i)return{selector:`internal:attr=[${t}=${El(i,r.exact)}]`,locator:(r.locatorName??`getBy${t.charAt(0).toUpperCase()+t.slice(1)}`)+`('${i}')`}}catch{}}normalize(e){return e.replace(/\n/g,"").replace(/[ \t]+/g," ").trim()}limitTextLength(e,t=!0,r=30){for(;e?.length>30&&e.length<100&&e.includes(" ");)e=e.split(" ").slice(0,-1).join(" "),t=!1;return{text:e,exact:t}}checkTimeout(e=!0){if(M_)return!1;if(this.MAX_PROCESSING_TIME&&Date.now()-this.startTimestamp>this.MAX_PROCESSING_TIME){if(e)throw new Yr;return!0}}};function T_(n,e=!1){return`"${n.replace(/\\/g,"\\\\").replace(/["]/g,'\\"')}"`}a(T_,"escapeForAndLocator");function on(n){return ze(n,"HTMLElement")}a(on,"isInstanceOfHTMLElement");function qb(n=document,e){try{let r=function(c){let u=c.nodeName.toLowerCase(),d=!1;if(["name","label","aria-label","data-testid","role"].forEach(f=>{c.hasAttribute(f)&&(u+=`[@${f}="${c.getAttribute(f)}"]`,d=!0)}),!d){let f=1,p=c.previousSibling;for(;p;)p.nodeType===Node.ELEMENT_NODE&&p.nodeName===c.nodeName&&f++,p=p.previousSibling;f>1&&(u+=`[${f}]`)}return u};var t=r;if(a(r,"getNodeIdentifier"),!n||!e||!n.contains(e))throw new Error("Child is not a descendant of the given element.");let i=[],o=e;for(;o!==n;)o.nodeType===Node.ELEMENT_NODE&&i.unshift(r(o)),o=o.parentElement;return i.join("/")}catch(r){console.error("Failed to get relative xpath",r);return}}a(qb,"getRelativeXPath");function jb(n,e){return[new XPathEvaluator().evaluate(e,n,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue].filter(i=>i instanceof HTMLElement)}a(jb,"findElementsByXPath");var Rn=class{constructor(e){this.htmlReducer=e;this.BASE_MAX_COMPONENTS_FOR_SELECTOR_COMBINATION=13;this.MAX_SELECTORS_PER_CONTEXT_ELEMENT=10;this.innerFeaturesExtractor=new Ir;this.innerTextExtractor=new Qn}static{a(this,"CompoundSelector")}filter(e,{isPartOfListItem:t=!1}={}){e.forEach(u=>{u.element=this.htmlReducer.getElementForChecksumId(u.selection.checksumid)});let r=e.splice(e.findIndex(u=>u.isTarget),1)[0],i=e.filter(u=>!!u.element&&!u.element.contains(r.element)&&!r.element.contains(u.element)&&!e.some(d=>d!==u&&(d.element===u.element||d.element.contains(u.element)))).concat(r);if(console.log(`filtered context elements, ${e.length+1} > ${i.length}`),!t)return i;let o=dr(document.body,{nodeRepetitionsThreshold:4});if(!o?.length)return[];let c=o.find(u=>u.element.contains(r.element));return c?(console.log("Found template for target element",c),i.filter(u=>c.element.contains(u.element))):[]}async generate(e,{isPartOfListItem:t=!1}={}){let r=e.filter(c=>c.isTarget)[0];if(e=this.filter(e,{isPartOfListItem:t}),e.length<2)throw new Error("Not enough elements found for the given checksum ids");if(!r?.element)throw new Error("Target element not found");let i=this.getSmallestCommonRoot(e.map(c=>c.element));if(!i)throw new Error("No common root found for the given elements");return this.extractFeaturesMetadata(e),{targetSelection:{xpath:qb(i,r.element),cssSelectors:this.generateAllContextualSelectors(i,r.element).filter(c=>c&&c.trim().length>0),playwrightSelectors:await new ln(i).generate(r.element,[],{addCSSSelectorGenerator:!1,expandCSSKeyElements:!1}),featuresMetadata:r.featuresMetadata},contextElements:e}}async select(e,t){e.forEach(o=>{if(o.find(c=>!c||!c.isConnected))throw new Error("One or more context elements are not connected to the DOM")});let r=a((o,c)=>{try{return o.selector(c)}catch{let d=c.ownerDocument.defaultView.parent?.document?.defaultView?.playwright;if(d)try{return d.selector(c)}catch{return}return}},"getElementSelector"),i=this.getSmallestCommonParents(e).map(this.calculateElementSize).sort((o,c)=>o.size-c.size).map(o=>o.element);return t?i.map(o=>{let c=kr(o),{element:u}=c.locator(r(c,o)).locator(t);return u?r(c,u):null}).filter(o=>o):i.map(o=>{let c=kr(o);if(!c){console.warn("Failed getting playwright for element",o);return}return r(c,o)}).filter(o=>o)}async selectFromMetadata(e){let{contextElements:t}=e;t.forEach(i=>this.getSelectorCandidatesForContextElement(i));let r=Uo(t.map(i=>i.candidatesSelectors.map((o,c)=>c)));for(let i of r){t.forEach((c,u)=>c.selector=c.candidatesSelectors[i[u]]);let o=this.getSmallestCommonParentsFromMetadata(t).map(this.calculateElementSize).sort((c,u)=>c.size-u.size).map(c=>c.element);for(let c of o){let u=this.generateTargetSelectotionHistogram(c,e.targetSelection);if(u.size>0)return Array.from(u.keys()).slice(0,20).map(f=>kr(f).generateSelectorAndLocator(f))}}}generateTargetSelectotionHistogram(e,t){let r=new Map,i=a(o=>{o.filter(c=>c instanceof HTMLElement).forEach(c=>{r.set(c,(r.get(c)||0)+1)})},"addElementstoHistogram");if(t.xpath)try{i(jb(e,t.xpath))}catch{}return t.cssSelectors.forEach(o=>{try{i(de(o,e))}catch{}}),new Map([...r.entries()].sort((o,c)=>c[1]-o[1]))}calculateElementSize(e){let t=e.getBoundingClientRect();return{element:e,size:t.width*t.height}}buildSelectorForContextElement(e,{useTag:t=!0,useInnerFeatures:r=!0,useClasses:i=!0,useAttributes:o=!0}){let c=t?e.featuresMetadata.tag:"";i&&e.featuresMetadata.classes.length&&(c+="."+e.featuresMetadata.classes.map(u=>u.trim().replace(/([!\"#$%&'()*+,./:;<=>?@[\\\]^`{|}~])/g,"\\$1")).join(".")),o&&(c+=Object.entries(e.featuresMetadata.attributes).map(([u,d])=>`[${u}="${d}"]`).join("")),r&&(c+=e.featuresMetadata.innerFeatures.filter(u=>!u.isRoot).map(u=>`:has(${Xn(u)})`).join("")),e.selector=c}getSelectorCandidatesForContextElement(e){let t=this.buildSelectorsCombination(e.featuresMetadata);e.candidatesSelectors=[];for(let r=0;r<t.length&&e.candidatesSelectors.length<this.MAX_SELECTORS_PER_CONTEXT_ELEMENT;r++)document.querySelector(t[r])&&e.candidatesSelectors.push(t[r])}buildSelectorsCombination(e){let t=this.BASE_MAX_COMPONENTS_FOR_SELECTOR_COMBINATION,r=a(y=>{let b=[[]];for(let E=0;E<y.length;E++){let C=b.length;for(let w=0;w<C;w++)b.push(b[w].concat(y[E]))}return b},"getCombinations"),i=a(y=>y.trim().replace(/([!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~])/g,"\\$1"),"escapeSelector"),o=e.tag,c=e.innerFeatures.filter(y=>!y.isRoot).map(y=>`:has(${Xn(y)})`).slice(0,4),u=e.classes.map(y=>`.${i(y)}`),d=Object.entries(e.attributes).map(([y,b])=>`[${y}="${i(b)}"]`),f=a(()=>c.length+1+u.length+d.length>t,"exceedsMaxLength");for(;f()&&(u.pop(),!!f());)d.pop();let p=r([...u,...d,...c]),g=p.map(y=>[o,...y]);return p.push(...g),p.map(y=>y.join("")).filter(y=>y).sort((y,b)=>b.length-y.length)}extractFeaturesMetadata(e){e.forEach(t=>{t.featuresMetadata={id:t.element.getAttribute("id")??void 0,tag:t.element.tagName.toLowerCase(),innerText:this.innerTextExtractor.extract(t.element),innerFeatures:this.innerFeaturesExtractor.extract(t.element),classes:Array.from(t.element.classList).filter(r=>!sr.includes(r))||[],attributes:Array.from(t.element.attributes).reduce((r,i)=>(["class","style","id"].includes(i.name)||(r[i.name]=i.value),r),{})}})}generateAllContextualSelectors(e,t){let r=[],i=[!0,!1];for(let c of i)for(let u of i)for(let d of i)r.push({useId:c,useClasses:u,useTag:d});let o=r.map(c=>this.createContextualSelector(e,t,c)).filter(c=>c).filter(c=>{try{let u=de(c,e);return u.length===1&&u[0]===t}catch{return!1}});return[...new Set(o)]}createContextualSelector(e,t,{useId:r=!1,useClasses:i=!0,useTag:o=!0}){if(!e||!t)return null;let c=[],u=t;for(;u&&u!==e;)c.unshift(this.getSelectorPart(u,{useId:r,useClasses:i,useTag:o})),u=u.parentElement;return u?c.join(" ").trim():null}getSelectorPart(e,{useId:t=!1,useClasses:r=!0,useTag:i=!0}){if(t&&e.id&&e.id.match(/^\D/))return`#${e.id}`;let o=i?e.tagName.toLowerCase():"";if(r&&e.className){let c=e.className.trim().split(/\s+/).filter(u=>!sr.includes(u)).map(ks).join(".");c.length>0&&(o+="."+c)}return["name","label","aria-label","data-testid","role"].forEach(c=>{e.hasAttribute(c)&&(o+=`[${c}="${e.getAttribute(c)}"]`)}),o.trim()}getSmallestCommonRoot(e){let t=a(i=>{let o=[];for(;i;)o.push(i),i=i.parentElement;return o},"getAncestors"),r=t(e[0]);for(let i=1;i<e.length;i++){let o=t(e[i]);r=r.filter(c=>o.includes(c))}return r.length>0?r[0]:null}getSmallestCommonParentsFromMetadata(e){let t=e.map(r=>{try{let i=de(r.selector);return r.selection.type==="content"?i.filter(o=>o.textContent===r.selection.value):i}catch{return[]}});return t.some(r=>r.length===0)?[]:this.getSmallestCommonParents(t)}getSmallestCommonParents(e){let t=new Set;Uo(e).forEach(o=>{let c=this.getSmallestCommonRoot(o);c&&t.add(c)});let i=Array.from(t);return i.filter(o=>!i.some(c=>o!==c&&o.contains(c)))}};var Il=class{constructor(){this.MAX_SNIPPET_SIZE=12e3;this.MAX_LIONTAIL_SIZE=6e3;this.MAX_ATTRIBUTE_SIZE=100}static{a(this,"ParentChainReducer")}async reduce(e,t={useLionTail:!0,useChecksumIds:!0}){if(console.log("[ParentChainReducer] will reduce",e),!ze(e,"HTMLElement")&&!ze(e,"SVGElement"))throw new Error("Element is not an HTMLElement");return{reducedHTML:this.getAncestorsHTMLSnippet(e,t)}}getElementForChecksumId(e){return this.elementsInSimplifiedDomByChecksumId[e]}getAncestorsHTMLSnippet(e,{useLionTail:t=!0,useChecksumIds:r=!0}={}){this.elementsInSimplifiedDomByChecksumId={};let i=this.MAX_LIONTAIL_SIZE,o=this.MAX_ATTRIBUTE_SIZE,c=[],u=e;e.setAttribute("checksum-selected","true");try{for(;u;)c.push(u),u.parentNode&&u.parentNode instanceof ShadowRoot?u=u.parentNode.host:u=u.parentElement;c.reverse();let d=a(y=>{for(let b=y.attributes.length-1;b>=0;b--){let E=y.attributes[b];E.name.length+E.value.length>o&&y.removeAttribute(E.name)}return y},"normalizeNode"),f,p=new yi;do{f=c[0].cloneNode(!1);let y=f,b=Zi(f);for(let E=1;E<c.length;E++){if(t){let w=Zi(c[E]).length;if(w<=i&&b.length+w<=this.MAX_SNIPPET_SIZE){let M=this.deepCloneNode(c[E],r?p:void 0);y.appendChild(M);break}}let C=d(c[E].cloneNode(c[E]===e));if(r){let w=p.getAndIncrement();C.setAttribute("checksumid",w),this.elementsInSimplifiedDomByChecksumId[w]=c[E]}y.appendChild(C),y=C}i=Math.max(i-10,0),o=Math.max(o-10,0)}while(f.outerHTML.length>this.MAX_SNIPPET_SIZE&&o>0);return this.filterNodeClasses(f),Zi(f,{limitAttributeLength:!0})}catch(d){console.error("Error while getting ancestors HTML snippet",d)}finally{e.removeAttribute("checksum-selected")}}deepCloneNode(e,t){let r=e.cloneNode(!1),i=[e],o=[r];for(;i.length;){let c=i.shift(),u=o.shift();for(let d=0;d<c.childNodes.length;d++){let f=c.childNodes[d],p=f.cloneNode(!1);if(u.appendChild(p),t&&ze(f,"HTMLElement")){let g=t.getAndIncrement();p.setAttribute("checksumid",g),this.elementsInSimplifiedDomByChecksumId[g]=f}i.push(f),o.push(p)}}return r}filterNodeClasses(e){let t=a(r=>{if("classList"in r){let i=r,o=i.classList;for(let c=0;c<o.length;c++){let u=o[c];sr.includes(u)&&i.classList.remove(u)}for(let c=0;c<i.children.length;c++)t(i.children[c])}},"filterClasses");t(e)}};var Al=class{static{a(this,"FilesObserver")}constructor(e){this.fileInputsWithListeners=new Set,this.filesMap={},this.observer=null,this.sessionMirror=e}async getFilesByRrwebId(e){let t=this.filesMap[e]??[];try{let r=await Promise.all(t.map(async i=>({data:await I_(i),fileName:i.name})));return this.filesMap[e]=[],r}catch{console.log("Error while parsing files to base 64")}}init(){console.log("Starting observation..."),console.log(this.sessionMirror),this.observeDOMChanges(),window.addEventListener("unload",this.cleanup.bind(this))}handleFileChange(e){console.log("handleFileChange",this.sessionMirror);let t=e.target,r=Array.from(t.files||[]),i=this.sessionMirror.getMeta(t);this.filesMap[i.id]=r,console.log(`Files updated for ID: ${i.id}`,r)}addFileInputListeners(e){e.forEach(t=>{this.fileInputsWithListeners.has(t)||(t.addEventListener("change",this.handleFileChange.bind(this)),this.fileInputsWithListeners.add(t))})}observeDOMChanges(){let e=window.document,t=e.querySelectorAll('input[type="file"]');this.addFileInputListeners(t);let r=a(()=>{this.observer=new MutationObserver(o=>{o.forEach(c=>{if(c.type==="childList"){let u=c.target.querySelectorAll('input[type="file"]');this.addFileInputListeners(u)}})}),this.observer.observe(e.body,{childList:!0,subtree:!0})},"onBodyReady"),i=new MutationObserver(function(){e.body&&(i.disconnect(),r())});i.observe(e.documentElement,{childList:!0,subtree:!0})}cleanup(){console.log("Cleaning up files observer..."),this.observer&&this.observer.disconnect(),this.fileInputsWithListeners.forEach(e=>{e.removeEventListener("change",this.handleFileChange)}),this.fileInputsWithListeners.clear(),this.filesMap={}}},I_=a(n=>new Promise((e,t)=>{let r=new FileReader;r.onloadend=()=>{r.result?e(r.result.toString()):t(new Error("File reading failed"))},r.onerror=()=>{t(new Error("File reading failed"))},r.readAsDataURL(n)}),"convertFileToBase64");var Rl=class{constructor(e){this.sessionRecorder=e}static{a(this,"NativeDialogObserver")}init(){this.overrideDialog("alert"),this.overrideDialog("confirm"),this.overrideDialog("prompt")}overrideDialog(e){let t=window[e].bind(window);window[e]=r=>{let i=t(r),o=this.determineDialogAction(i,e);return this.sessionRecorder.addCustomEvent("native-dialog-event",{dialogType:e,dialogMessage:r,dialogResult:i,dialogAction:o}),i}}determineDialogAction(e,t){if(t==="alert")return"native_accept";if(t==="confirm")return e?"native_accept":"native_dismiss";if(t==="prompt")return e?"native_accept":"native_dismiss"}};var Ti=class n{constructor({rootDocument:e=document,getRenderDocument:t=a(u=>{},"getRenderDocument"),defaultView:r,topLevelInspector:i,rootDocumentForSelectorGenerator:o,eventName:c}={}){this.wasHoveredElementSelected=!1;this.selected=[];this.singleSelection=!0;this.subDocumentInspector=null;this.listening=!1;this.locatorCache=Oh.getInstance();this.onMouseOut=a(e=>{Dr.clearHighlights()},"onMouseOut");this.onMouseOver=a(async e=>{let t=e.composedPath()[0];if("getRootNode"in t){let i=t.getRootNode();if(i!==this.rootDocument){this.handleSubDocument(i,this.defaultView);return}}if(ze(t,"HTMLIFrameElement")){this.handleSubDocument(t.contentDocument,t.contentDocument.defaultView);return}if(this.subDocumentInspector&&this.stopSubDocumentInspector(!0),!ze(t,"HTMLElement"))return;let r=t;if(!(r===this.hoveredElement||r.matches(".element-inspector-ignore"))){Dr.clearHighlights(),this.hoveredElement&&this.hoveredElement.removeEventListener("click",this.onClick,{capture:!0});try{let{locator:i,selector:o,parentFramesSelectors:c,locatorRrwebId:u}=await this.getInspectedElementSelection(r,this.rootDocumentForSelectorGenerator);if(Dr.highlightElement(r,{text:i.replace("frameLocator('iframe').",""),textPosition:"below",textWidthType:"auto",pointerEvents:"none",classNames:["element-inspector-ignore"],renderDocument:this.getRenderDocument(this.defaultView)}),u){let d=window.checksum.timeMachine.sessionReplayer.getNodeById(u);d&&Dr.highlightElement(d,{clear:!1,pointerEvents:"none",classNames:["element-inspector-ignore"],renderDocument:this.getRenderDocument(this.defaultView)})}this.hoveredElement=r,this.hoveredElementSelection={locator:i,selector:o,parentFramesSelectors:c},this.wasHoveredElementSelected=!1,t.addEventListener("click",this.onClick,{capture:!0})}catch(i){console.error("Error inspecting element",i.message)}}},"onMouseOver");this.onClick=a(async e=>{e.stopPropagation(),e.preventDefault(),!this.wasHoveredElementSelected&&(this.wasHoveredElementSelected=!0,this.selected.push(this.hoveredElementSelection),this.singleSelection&&(this.topLevelInspector?this.topLevelInspector.stop():this.stop()),window.parent.postMessage({type:this.eventName,data:this.selected.at(this.selected.length-1)},"*"))},"onClick");this.handleSubDocument=a((e,t)=>{if(this.subDocumentInspector){if(this.subDocumentInspector.rootDocument===e)return!0;this.stopSubDocumentInspector(!0)}return this.subDocumentInspector=new n({rootDocument:e,defaultView:t,topLevelInspector:this.topLevelInspector??this,getRenderDocument:this.getRenderDocument,eventName:this.eventName}),this.subDocumentInspector.start({singleSelection:this.singleSelection,timestamp:this.currentTimestamp}),!0},"handleSubDocument");this.stopSubDocumentInspector=a(e=>{this.subDocumentInspector&&(this.subDocumentInspector.stop(e),this.subDocumentInspector=null)},"stopSubDocumentInspector");this.rootDocument=e,this.topLevelInspector=i,this.getRenderDocument=t,this.eventName=c,this.defaultView=r??this.getDefaultView(),this.playwrightElementSelectorGenerator=new ut,this.rootDocumentForSelectorGenerator=o??this.getDefaultView().document}static{a(this,"ElementInspector")}getDefaultView(){let t=document.querySelector(".replayer-wrapper > iframe")?.contentDocument||null;return!t&&this.rootDocument.nodeType===Node.DOCUMENT_NODE&&(t=this.rootDocument),t||(t=document),t.defaultView}start({singleSelection:e,timestamp:t}={singleSelection:!0}){this.singleSelection=e,this.locatorCache.setTimestamp(t),this.currentTimestamp=t,this.stop(),this.cleanSelection(),this.rootDocument.addEventListener("mouseover",this.onMouseOver),this.rootDocument.addEventListener("mouseout",this.onMouseOut),this.listening=!0}stop(e=!1){this.listening&&(this.listening=!1,this.subDocumentInspector&&this.stopSubDocumentInspector(e),Dr.clearHighlights(),this.hoveredElement&&this.hoveredElement.removeEventListener("click",this.onClick,{capture:!0}),this.currentTimestamp=void 0,this.hoveredElement=null,this.wasHoveredElementSelected=!1,this.rootDocument.removeEventListener("mouseover",this.onMouseOver),e&&this.cleanSelection())}cleanSelection(){this.subDocumentInspector&&this.subDocumentInspector.cleanSelection(),this.selected=[]}consumeSelections(){if(this.subDocumentInspector)return this.subDocumentInspector.consumeSelections();let e=this.selected;return this.cleanSelection(),e}async getInspectedElementSelection(e,t){let r=this.locatorCache.getCachedLocatorForElement(e);if(!r){let{locator:i,selector:o,parentFramesSelectors:c}=await this.playwrightElementSelectorGenerator.getSelectorAndLocator(e,{rootDocument:t,ignoredIframesSelectors:[".replayer-wrapper > iframe"]}).catch(f=>({locator:"",selector:"",parentFramesSelectors:[]})),u=await this.playwrightElementSelectorGenerator.selector(o,c).catch(()=>e),d=u!==e?Kb(u):void 0;r={locator:i,selector:o,parentFramesSelectors:c,locatorRrwebId:d},this.locatorCache.setCachedLocatorForElement(e,r)}return r}},Oh=class n{constructor(){this.locatorCache=new Map}static{a(this,"InspectedElementCache")}static getInstance(){return n.instance||(n.instance=new n),n.instance}setTimestamp(e){this.currentTimestamp=e}getCachedLocatorForElement(e){try{return this.currentTimestamp?this.locatorCache.get(this.getKeyForElement(e)):void 0}catch{return}}setCachedLocatorForElement(e,t){this.currentTimestamp&&this.locatorCache.set(this.getKeyForElement(e),t)}getKeyForElement(e){let t=Kb(e);if(!t)throw new Error("Can't find rrwebId for element");return`${t}_${this.currentTimestamp}`}};function Kb(n){return window.checksum.timeMachine.sessionReplayer.getMeta(n)?.id}a(Kb,"getNodeRrwebId");var _h=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function Dh(n,e,t,r){n.addEventListener?n.addEventListener(e,t,r):n.attachEvent&&n.attachEvent("on".concat(e),t)}a(Dh,"addEvent");function $s(n,e,t,r){n.removeEventListener?n.removeEventListener(e,t,r):n.detachEvent&&n.detachEvent("on".concat(e),t)}a($s,"removeEvent");function Zb(n,e){let t=e.slice(0,e.length-1);for(let r=0;r<t.length;r++)t[r]=n[t[r].toLowerCase()];return t}a(Zb,"getMods");function Qb(n){typeof n!="string"&&(n=""),n=n.replace(/\s/g,"");let e=n.split(","),t=e.lastIndexOf("");for(;t>=0;)e[t-1]+=",",e.splice(t,1),t=e.lastIndexOf("");return e}a(Qb,"getKeys");function A_(n,e){let t=n.length>=e.length?n:e,r=n.length>=e.length?e:n,i=!0;for(let o=0;o<t.length;o++)r.indexOf(t[o])===-1&&(i=!1);return i}a(A_,"compareArray");var Bs={backspace:8,"\u232B":8,tab:9,clear:12,enter:13,"\u21A9":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21EA":20,",":188,".":190,"/":191,"`":192,"-":_h?173:189,"=":_h?61:187,";":_h?59:186,"'":222,"[":219,"]":221,"\\":220},pr={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},Nl={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},ht={16:!1,18:!1,17:!1,91:!1},Xe={};for(let n=1;n<20;n++)Bs["f".concat(n)]=111+n;var je=[],Ws=null,Jb="all",Fr=new Map,Us=a(n=>Bs[n.toLowerCase()]||pr[n.toLowerCase()]||n.toUpperCase().charCodeAt(0),"code"),R_=a(n=>Object.keys(Bs).find(e=>Bs[e]===n),"getKey"),L_=a(n=>Object.keys(pr).find(e=>pr[e]===n),"getModifier");function eE(n){Jb=n||"all"}a(eE,"setScope");function Vs(){return Jb||"all"}a(Vs,"getScope");function N_(){return je.slice(0)}a(N_,"getPressedKeyCodes");function O_(){return je.map(n=>R_(n)||L_(n)||String.fromCharCode(n))}a(O_,"getPressedKeyString");function __(){let n=[];return Object.keys(Xe).forEach(e=>{Xe[e].forEach(t=>{let{key:r,scope:i,mods:o,shortcut:c}=t;n.push({scope:i,shortcut:c,mods:o,keys:r.split("+").map(u=>Us(u))})})}),n}a(__,"getAllKeyCodes");function D_(n){let e=n.target||n.srcElement,{tagName:t}=e,r=!0,i=t==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(e.type);return(e.isContentEditable||(i||t==="TEXTAREA"||t==="SELECT")&&!e.readOnly)&&(r=!1),r}a(D_,"filter");function k_(n){return typeof n=="string"&&(n=Us(n)),je.indexOf(n)!==-1}a(k_,"isPressed");function P_(n,e){let t,r;n||(n=Vs());for(let i in Xe)if(Object.prototype.hasOwnProperty.call(Xe,i))for(t=Xe[i],r=0;r<t.length;)t[r].scope===n?t.splice(r,1).forEach(c=>{let{element:u}=c;return Ph(u)}):r++;Vs()===n&&eE(e||"all")}a(P_,"deleteScope");function F_(n){let e=n.keyCode||n.which||n.charCode,t=je.indexOf(e);if(t>=0&&je.splice(t,1),n.key&&n.key.toLowerCase()==="meta"&&je.splice(0,je.length),(e===93||e===224)&&(e=91),e in ht){ht[e]=!1;for(let r in pr)pr[r]===e&&(fr[r]=!1)}}a(F_,"clearModifier");function tE(n){if(typeof n>"u")Object.keys(Xe).forEach(i=>{Array.isArray(Xe[i])&&Xe[i].forEach(o=>Ll(o)),delete Xe[i]}),Ph(null);else if(Array.isArray(n))n.forEach(i=>{i.key&&Ll(i)});else if(typeof n=="object")n.key&&Ll(n);else if(typeof n=="string"){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];let[i,o]=t;typeof i=="function"&&(o=i,i=""),Ll({key:n,scope:i,method:o,splitKey:"+"})}}a(tE,"unbind");var Ll=a(n=>{let{key:e,scope:t,method:r,splitKey:i="+"}=n;Qb(e).forEach(c=>{let u=c.split(i),d=u.length,f=u[d-1],p=f==="*"?"*":Us(f);if(!Xe[p])return;t||(t=Vs());let g=d>1?Zb(pr,u):[],y=[];Xe[p]=Xe[p].filter(b=>{let C=(r?b.method===r:!0)&&b.scope===t&&A_(b.mods,g);return C&&y.push(b.element),!C}),y.forEach(b=>Ph(b))})},"eachUnbind");function Yb(n,e,t,r){if(e.element!==r)return;let i;if(e.scope===t||e.scope==="all"){i=e.mods.length>0;for(let o in ht)Object.prototype.hasOwnProperty.call(ht,o)&&(!ht[o]&&e.mods.indexOf(+o)>-1||ht[o]&&e.mods.indexOf(+o)===-1)&&(i=!1);(e.mods.length===0&&!ht[16]&&!ht[18]&&!ht[17]&&!ht[91]||i||e.shortcut==="*")&&(e.keys=[],e.keys=e.keys.concat(je),e.method(n,e)===!1&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation&&n.stopPropagation(),n.cancelBubble&&(n.cancelBubble=!0)))}}a(Yb,"eventHandler");function Xb(n,e){let t=Xe["*"],r=n.keyCode||n.which||n.charCode;if(!fr.filter.call(this,n))return;if((r===93||r===224)&&(r=91),je.indexOf(r)===-1&&r!==229&&je.push(r),["metaKey","ctrlKey","altKey","shiftKey"].forEach(u=>{let d=Nl[u];n[u]&&je.indexOf(d)===-1?je.push(d):!n[u]&&je.indexOf(d)>-1?je.splice(je.indexOf(d),1):u==="metaKey"&&n[u]&&(je=je.filter(f=>f in Nl||f===r))}),r in ht){ht[r]=!0;for(let u in pr)pr[u]===r&&(fr[u]=!0);if(!t)return}for(let u in ht)Object.prototype.hasOwnProperty.call(ht,u)&&(ht[u]=n[Nl[u]]);n.getModifierState&&!(n.altKey&&!n.ctrlKey)&&n.getModifierState("AltGraph")&&(je.indexOf(17)===-1&&je.push(17),je.indexOf(18)===-1&&je.push(18),ht[17]=!0,ht[18]=!0);let i=Vs();if(t)for(let u=0;u<t.length;u++)t[u].scope===i&&(n.type==="keydown"&&t[u].keydown||n.type==="keyup"&&t[u].keyup)&&Yb(n,t[u],i,e);if(!(r in Xe))return;let o=Xe[r],c=o.length;for(let u=0;u<c;u++)if((n.type==="keydown"&&o[u].keydown||n.type==="keyup"&&o[u].keyup)&&o[u].key){let d=o[u],{splitKey:f}=d,p=d.key.split(f),g=[];for(let y=0;y<p.length;y++)g.push(Us(p[y]));g.sort().join("")===je.sort().join("")&&Yb(n,d,i,e)}}a(Xb,"dispatch");function fr(n,e,t){je=[];let r=Qb(n),i=[],o="all",c=document,u=0,d=!1,f=!0,p="+",g=!1,y=!1;for(t===void 0&&typeof e=="function"&&(t=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(o=e.scope),e.element&&(c=e.element),e.keyup&&(d=e.keyup),e.keydown!==void 0&&(f=e.keydown),e.capture!==void 0&&(g=e.capture),typeof e.splitKey=="string"&&(p=e.splitKey),e.single===!0&&(y=!0)),typeof e=="string"&&(o=e),y&&tE(n,o);u<r.length;u++)n=r[u].split(p),i=[],n.length>1&&(i=Zb(pr,n)),n=n[n.length-1],n=n==="*"?"*":Us(n),n in Xe||(Xe[n]=[]),Xe[n].push({keyup:d,keydown:f,scope:o,mods:i,shortcut:r[u],method:t,key:r[u],splitKey:p,element:c});if(typeof c<"u"&&window){if(!Fr.has(c)){let b=a(function(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return Xb(C,c)},"keydownListener"),E=a(function(){let C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;Xb(C,c),F_(C)},"keyupListenr");Fr.set(c,{keydownListener:b,keyupListenr:E,capture:g}),Dh(c,"keydown",b,g),Dh(c,"keyup",E,g)}if(!Ws){let b=a(()=>{je=[]},"listener");Ws={listener:b,capture:g},Dh(window,"focus",b,g)}}}a(fr,"hotkeys");function H_(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(Xe).forEach(t=>{Xe[t].filter(i=>i.scope===e&&i.shortcut===n).forEach(i=>{i&&i.method&&i.method()})})}a(H_,"trigger");function Ph(n){let e=Object.values(Xe).flat();if(e.findIndex(r=>{let{element:i}=r;return i===n})<0){let{keydownListener:r,keyupListenr:i,capture:o}=Fr.get(n)||{};r&&i&&($s(n,"keyup",i,o),$s(n,"keydown",r,o),Fr.delete(n))}if((e.length<=0||Fr.size<=0)&&(Object.keys(Fr).forEach(i=>{let{keydownListener:o,keyupListenr:c,capture:u}=Fr.get(i)||{};o&&c&&($s(i,"keyup",c,u),$s(i,"keydown",o,u),Fr.delete(i))}),Fr.clear(),Object.keys(Xe).forEach(i=>delete Xe[i]),Ws)){let{listener:i,capture:o}=Ws;$s(window,"focus",i,o),Ws=null}}a(Ph,"removeKeyEvent");var kh={getPressedKeyString:O_,setScope:eE,getScope:Vs,deleteScope:P_,getPressedKeyCodes:N_,getAllKeyCodes:__,isPressed:k_,filter:D_,trigger:H_,unbind:tE,keyMap:Bs,modifier:pr,modifierMap:Nl};for(let n in kh)Object.prototype.hasOwnProperty.call(kh,n)&&(fr[n]=kh[n]);if(typeof window<"u"){let n=window.hotkeys;fr.noConflict=e=>(e&&window.hotkeys===fr&&(window.hotkeys=n),fr),window.hotkeys=fr}var Ii=class{constructor(){this.boundShortcuts=[]}static{a(this,"KeybindingsManager")}addKeybinding(e){let t=e.key.toLowerCase();if(this.boundShortcuts.includes(t))return;this.boundShortcuts.push(t),fr(t,{capture:!0,keydown:!0},i=>{i.preventDefault(),e.callback(i)})}};var Ol=class{constructor(e){this.keybindingsManager=new Ii;this.createHandler=a(e=>({handlerFunc:a(t=>{try{e.handlerFunc(t)}finally{this.stopObserver()}},"handlerFunc"),handlerType:e.handlerType}),"createHandler");this.toHaveTextHandler=a(()=>e=>{let t=e?.data?.data,r=window.prompt(`Please enter the expected text for the element:
${t.locator}`);r!==null&&this.sessionRecorder.addCustomEvent("assertion",{matcher:`toHaveText("${r}")`,locator:t.locator})},"toHaveTextHandler");this.toBeVisibleHandler=a(()=>e=>{let t=e?.data?.data;this.sessionRecorder.addCustomEvent("assertion",{matcher:"toBeVisible()",locator:t.locator})},"toBeVisibleHandler");this.sessionRecorder=e}static{a(this,"AssertionsObserver")}init(){this.keybindingsManager.addKeybinding({key:"ctrl+\u2318+a",callback:a(()=>this.toggleObserver({handlerFunc:this.toHaveTextHandler(),handlerType:"toHaveText"}),"callback")}),this.keybindingsManager.addKeybinding({key:"ctrl+\u2318+s",callback:a(()=>this.toggleObserver({handlerFunc:this.toBeVisibleHandler(),handlerType:"toBeVisible"}),"callback")}),this.keybindingsManager.addKeybinding({key:"esc",callback:a(e=>{this.activeHandler&&(e.stopPropagation(),this.cleanUpHandler())},"callback")})}toggleObserver(e){if(this.activeHandler){this.cleanUpHandler();return}let t=this.createHandler(e);this.activeHandler=t,this.startObserver(),window.addEventListener("message",t.handlerFunc,{once:!0})}cleanUpHandler(){this.activeHandler&&(window.removeEventListener("message",this.activeHandler.handlerFunc),this.stopObserver(),this.activeHandler=null)}isInspectorActive(){return!!this.elementInspector}enableEventsFilter(){this.sessionRecorder.addCustomEvent("filter",{filter:{only:[{type:U.Custom,tag:"assertion"}],exclude:[]}})}disableEventsFilter(){this.sessionRecorder.addCustomEvent("filter",{filter:{only:[],exclude:[]}})}startObserver(){this.elementInspector=new Ti({rootDocument:window.document}),this.elementInspector.start(),this.enableEventsFilter()}stopObserver(){this.isInspectorActive()&&(this.elementInspector.stop(),this.elementInspector=null,this.disableEventsFilter(),this.cleanUpHandler())}};var _l=class{constructor(e){this.keybindingsManager=new Ii;this.lastMousePosition={x:0,y:0};this.sessionRecorder=e,this.listenForMouseMove()}static{a(this,"ActionsObserver")}init(){this.keybindingsManager.addKeybinding({key:"ctrl+\u2318+h",callback:a(async()=>{try{await this.handleImmediateHover()}catch(e){console.error("[ActionsObserver] calling handleImmediateHover:",e)}},"callback")})}listenForMouseMove(){try{document.addEventListener("mousemove",e=>{try{this.lastMousePosition.x=e.clientX,this.lastMousePosition.y=e.clientY}catch(t){console.error("[ActionsObserver] mousemove event listener error:",t)}})}catch(e){console.error("[ActionsObserver] listenForMouseMove error:",e)}}async handleImmediateHover(){let e=document.elementFromPoint(this.lastMousePosition.x,this.lastMousePosition.y);if(!e)return;let t=new ut,{locator:r}=await t.getSelectorAndLocator(e);r&&(this.sessionRecorder.addCustomEvent("hover",{locator:r}),this.highlightElement(e))}highlightElement(e){let t=e;if(!t.style)return;let r=t.style.backgroundColor,i=t.style.transition;t.style.transition="background-color 0.3s ease",t.style.backgroundColor="rgba(255, 255, 0, 0.3)",setTimeout(()=>{t.style.backgroundColor=r,t.style.transition=i},500)}cleanUpHandler(){this.activeHandler&&(window.removeEventListener("message",this.activeHandler.handlerFunc),this.stopObserver(),this.activeHandler=null)}isInspectorActive(){return!!this.elementInspector}stopObserver(){this.isInspectorActive()&&(this.elementInspector.stop(),this.elementInspector=null,this.cleanUpHandler())}};var $_="$checksum",Dl=class{constructor(){this.testIdCounter=0;this.initialized=!1;bi.setPrefix($_),this.elementSelector=new ut,this.htmlReducer=new vi,this.parentChainReducer=new Il,this.compoundSelector=new Rn(this.htmlReducer)}static{a(this,"ChecksumTestGenerator")}getCompoundSelector(){return this.compoundSelector}betterTemplatizr(e){return dr(e)}async buildCustomPlaywrightSelectors(e,t=[],r={},i=document){typeof e=="string"&&(e=this.htmlReducer.getElementForChecksumId(e));let o=t.map(c=>({...c,element:this.parentChainReducer.getElementForChecksumId(c.checksumId)})).filter(({element:c})=>!!c);return await new ln(i).generate(e,o,{isPartOfListItem:!1,isForContextElement:!1,addCSSSelectorGenerator:!0,expandCSSKeyElements:!0,...r})}async buildArbitraryListItem(e){return typeof e=="string"&&(e=this.htmlReducer.getElementForChecksumId(e)),new ln().generateArbitraryItemListSelector(e)}testElementSelector(e,t,r,i=!0){let o=typeof t=="string"?this.htmlReducer.getElementForChecksumId(t):t;return o?new ln().testSelector(e,o,r,i):(console.error("Element not found",t),{valid:!1,error:"Element not found"})}async getParentChainHTML(e,t=!0,r=!0){return typeof e=="string"&&(e=this.htmlReducer.getElementForChecksumId(e)),(await this.parentChainReducer.reduce(e,{useLionTail:t,useChecksumIds:r})).reducedHTML}init(e,t={},{sessionRecorder:r=!0,filesObserver:i=!1,assertionsObserver:o=!1,actionsObserver:c=!1,nativeDialogObserver:u=!1}={}){this.appSpecificRules=e,this.config=t,!this.initialized&&(this.initialized=!0,r&&(this.sessionMirror=new fl((d,f)=>{d.isCheckout=f,window.checksumSendBroadcastMessage?.("rrweb",[d]),this.lastRrwebEventTimestamp=d.timestamp},t.recordOptions)),i&&(this.filesObserver=new Al(this.sessionMirror),this.filesObserver.init()),o&&(this.assertionsObserver=new Ol(this.sessionMirror),this.assertionsObserver.init()),c&&(this.actionsObserver=new _l(this.sessionMirror),this.actionsObserver.init()),u&&(this.nativeDialogObserver=new Rl(this.sessionMirror),this.nativeDialogObserver.init()),this.sessionMirror&&(this.sessionMirror.start(),this.htmlReducer.setSessionRecorder(this.sessionMirror)),wn.limitChildren=this.appSpecificRules?.esraSelectionRules?.limitChildren??[],wn.timeout=this.config.esraTimeout,this.config.showFrontendLogs?bi.removePrefix():this.config.logPrefix?.length&&bi.setPrefix(this.config.logPrefix))}getElementSelector(){return this.elementSelector}getLastSelectionLogs(){return this.currentESRASelector?this.currentESRASelector.getLastSelectionLogs():{}}getBestMatchingElementSimilarityScore(e){return this.currentESRASelector=new wn(e),this.currentESRASelector.selectOne().score}async extractESRAMetadata(e){return new Dt(document).extract(e).toMetadata()}async select(e,t){return await this.elementSelector.selector(e,t)}async getSelectionDataForSelector(e,t){try{let r=await this.elementSelector.selector(e,t);if(!r)return console.warn("could not find element for selector: "+e),null;let{locator:i}=await this.elementSelector.getSelectorAndLocator(r,{testIdSelector:this.appSpecificRules?.esraSelectionRules?.testIdSelector}),o=await this.extractESRAMetadata(r);return{generatedLocator:i,esraMetadata:o,selector:e,parentFramesSelectors:t}}catch(r){console.log("getMetadataForSelector exception",r);return}}async getMatchingElementSelectionData(e,{minSelectionScore:t,cachedSelector:r,staticMetadata:i}={minSelectionScore:.3},o=!1){try{let c,u,d;if(r&&(console.log("Trying to locate using cached selector",r),c=await this.elementSelector.selector(r)),!c){console.log("Trying to locate using ESRA",e),Vo(i)&&console.log("and static data",i),this.currentESRASelector=new wn(e,i);let p=this.currentESRASelector.selectOne({minSelectionScore:t});p.score>=t?(c=p.candidate,u=p.score,d=p.clickOffset):console.log("Best matching element was below threshold",p)}if(console.log(c?[`Located with score ${u}`,c]:"Element not located"),!c)return;o&&new dt(c).scrollIntoView(),this.highlightElement(c);let f=await this.makeMatchingElementSelectionData(c,u);return d&&(f.clickOffset=d),f}catch(c){console.log("getMatchingElementSelectionData exception",c);return}}getAllInteractableElementsForLastSelectQuery(){let e=this.currentESRASelector.getFinalCandidates();return Promise.all(e.map(async t=>({esraMetadata:t.esraMetadata,selectionData:await this.makeMatchingElementSelectionData(t.candidate,t.score)})))}async getInteractableElementsRaw(){return Ar()}async getInteractableElements(){let e=Ar(),t=new Dt(document);return Promise.all(e.map(async r=>{let i=t.extract(r).toMetadata(),o=await this.makeMatchingElementSelectionData(r);return{esraMetadata:i,selectionData:o}}))}getCurrentESRASelector(){return this.currentESRASelector}startFlashingElementsDetection(){return this.htmlReducer.startFlashingElementsDetection()}async reduceHTML(e={},t={},r=document){let i=await this.htmlReducer.reduce(r,{...this.appSpecificRules,...e},t);if(this.lastRrwebEventTimestamp&&(i.lastRRwebEvent={timestamp:this.lastRrwebEventTimestamp}),t.extractESRAForInterpretationRequiredElements){console.log("Extracting ESRA for interpretation required elements...");let o=this.htmlReducer.getInteractableElementsInReducedHTML();i.elementsForNodeInterpretation=o.reduce((c,{checksumId:u,element:d})=>{if(!(d instanceof HTMLElement)||d.innerText?.trim().length)return c;let p=new Dt(document).extract(d).toMetadata();return[...c,{checksumId:u,esraMetadata:p}]},[]),console.log("Done with ESRA extraction for interpretation required elements")}return i}getMoreItemsForTemplate(e,t={}){return this.htmlReducer.getMoreElementsFromTemplate(e,{...this.appSpecificRules,...t})}displayInterpretationForElements(e){this.clearHighlights(),this.htmlReducer.getInteractableElements().forEach(({checksumId:r,element:i})=>{let o=e[r];if(o){if(!i.isConnected){console.log(`Element ${r} is not connected to the DOM, skipping display`);return}this.highlightElement(i,{text:o,textType:"hover",clear:!1,textStyle:{width:"120px"}})}})}async overlayInteractableElementsWithChecksumId({reduceBeforeRender:e=!1,mode:t="full",textPosition:r=t==="tag"?"above":void 0,shouldFlipHighlightTextOutsideViewport:i=!0,scrollIntoView:o=!1,checksumId:c}={}){this.clearHighlights(),e&&await this.reduceHTML();let u=a((f,p,g)=>{if(!p.isConnected){console.log(`Element ${f} is not connected to the DOM, skipping display`);return}let{width:y,height:b}=p.getBoundingClientRect();if(y<=0||b<=0)return;function E(N){switch(t){case"tag":return{background:N,width:"initial",left:"-2px",border:`3px dashed ${N}`,"font-weight":"bold"};case"full":return{background:"black",height:"100%"}}}a(E,"getTextStyleByMode");function C(N){let A=["red","gold","green","steelBlue","orange","hotPink","darkViolet","brown"];return N?A[N%A.length]:"red"}a(C,"getColor");let w=C(g);function M(){switch(t){case"tag":return{outline:`3px dashed ${w}`};case"full":return{outline:"none"};case"selected":return{outline:"6px dashed red",opacity:"0.7"}}}a(M,"getHighlightStyle"),this.highlightElement(p,{text:f,clear:!1,highlightStyle:M(),...r?{textPosition:r}:{},textStyle:E(w),shouldFlipHighlightTextOutsideViewport:i})},"overlayElement");if(t==="selected"&&c){let f=await this.getElementForChecksumId(c);u(null,f,0);return}this.htmlReducer.getInteractableElementsInReducedHTML().filter(f=>!mt(f.element,{...gh,scrollIntoView:o}).isHidden).forEach(({checksumId:f,element:p},g)=>{u(f,p,g)})}async getElementForChecksumId(e){return this.htmlReducer.getElementForChecksumId(e)}async getSelectorForChecksumId(e){let t=await this.htmlReducer.getSelectorForChecksumId(e),{element:r,innerText:i,...o}=t;return o}hasInnerTextByChecksumId(e){return this.htmlReducer.hasInnerTextByChecksumId(e)}async getSelectorByPosition(e,t){let r=document.elementFromPoint(e,t),{selector:i,locator:o,parentFramesSelectors:c}=await this.elementSelector.getSelectorAndLocator(r);return{selector:i,locator:o,parentFramesSelectors:c}}isInput(e){let t=de(e);if(t.length)return["input","textarea"].includes(t[0].tagName.toLowerCase())}querySelectorExtended(e){return de(e)}getReactTree(e){return bb(e)}isHidden(e,t){return mt(e,t)}showGrid(){this.removeGrid();let e=document.createElement("style");e.id="checksum_grid_style",e.innerHTML=`
                  .checksum_grid {
                        background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAJ1JREFUaEPtksEJgDAUxX73H1oRxAECkSrppacXaNI1M8f84Kz7Idf95XP0kM3yVWSzIFORikgG+lqSWIytCFYnDSsiicXYimB10rAikliMrQhWJw0rIonF2IpgddKwIpJYjK0IVicNKyKJxdiKYHXSsCKSWIytCFYnDSsiicXYimB10rAikliMrQhWJw0rIonF2IpgddLwKSLx38Oej8ZiASoSUGMAAAAASUVORK5CYII=");
                        background-repeat: repeat;
                        background-size: 20px;
                        background-position: 0px 0px;
                        position: absolute;
                        top: 0;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        height: 100%;
                        z-index: 1000;
                  }
`,document.body.prepend(e);let t=document.createElement("div");t.classList.add("checksum_grid"),document.body.prepend(t)}removeGrid(){let e=document.querySelector("#checksum_grid_style");e&&e.remove();let t=document.querySelector(".checksum_grid");t&&t.remove()}clearHighlights(){Dr.clearHighlights()}highlightElement(e,t={}){this.config.skipElementHighlighting||Dr.highlightElement(e,t)}async getInspectedElementSelectionResultByRRwebId(e,t={ignoredIframesSelectors:[],fromTimeMachine:!1}){let i=await(t.fromTimeMachine?window.checksum.timeMachine.sessionReplayer:this.sessionMirror).getNodeById(e);if(i)return await this.elementSelector.getSelectorAndLocator(i,{ignoredIframesSelectors:t.ignoredIframesSelectors})}getNodeSelector(e){return new yl().getSelector(e)}startListeningForHTMLChanges(){this.mutationDetector&&this.mutationDetector.stopListening(),this.mutationDetector=new vl(Eb),this.mutationDetector.startListening()}stopListeningForHTMLChanges(e){let t=this.mutationDetector.stopListening();switch(e){default:return t.map(r=>(r.innerText??r.textContent)?.trim())}}scrollScrollableElement(e,t,r){let i=this.sessionMirror.getNodeById(e);return!i||!(i instanceof Element)?{result:!1,error:"Element not found"}:dt.scrollScrollableElement(i,t,r)}extractViewportHTML(){let e=document.documentElement,t={},r=a(c=>{let d=a(()=>c instanceof Element?c:ir(c),"getElement")();if(!d)return!1;let f=d.getBoundingClientRect();return f.top<window.innerHeight&&f.bottom>0&&f.left<window.innerWidth&&f.right>0},"isInViewport"),i=a(c=>{let u=r(c),d=[];if(zn(c).forEach(p=>{let g=i(p);g&&d.push(g)}),!u&&d.length===0)return null;let f=c.cloneNode(!1);if(c instanceof Element){let{canScrollX:p,canScrollY:g,progressX:y,progressY:b}=dt.getScrollData(c),E=f,C=p||g,w={};p&&(E.setAttribute("data-scrollable-x","true"),E.setAttribute("data-scrollable-x-progress",y.toString()),w.x=y),g&&(E.setAttribute("data-scrollable-y","true"),E.setAttribute("data-scrollable-y-progress",b.toString()),w.y=b);let M=null;try{let{id:N}=this.sessionMirror.getMeta(c);N&&(E.setAttribute("rrwebId",N.toString()),M=N)}catch(N){console.error("Error adding rrwebId",c,N)}M&&C&&(t[M]=w)}return d.forEach(p=>{f.appendChild(p)}),f},"copyVisibleElements");return{html:i(e).outerHTML,scrollableElements:t}}async generateLocatorByRrwebId(e){let t=await this.sessionMirror.getNodeById(e);if(!t)return;let{locator:r}=await this.elementSelector.getSelectorAndLocator(t);return r}async scrollElementIntoView(e){return e?(new dt(e).scrollIntoView(),!0):!1}async scrollElementIntoViewByChecksumId(e){let t=await this.getElementForChecksumId(e);return this.scrollElementIntoView(t)}async scrollElementIntoViewByRrwebId(e){let t=await this.sessionMirror.getNodeById(e);return this.scrollElementIntoView(t)}async scrollIntoViewAndHighlight(e){let t=await this.elementSelector.selector(e);t&&(t.scrollIntoView(),this.highlightElement(t))}async recordScrollPosition(e){let t=await this.getElementForChecksumId(e);if(!t)return;let r=new dt(t);r.getScrollableParentsPositions(),t._checksumScrollHelper=r}async restoreScrollPosition(e){let t=await this.getElementForChecksumId(e);!t||!("_checksumScrollHelper"in t)||(t._checksumScrollHelper.restore(),delete t._checksumScrollHelper)}async getElementCaptioningKeyForChecksumId(e){let t=this.htmlReducer.getElementForChecksumId(e);if(!t){console.warn(`Element with checksumId ${e} not found`);return}return Sb(t)}determineClosestNode(e,t,r){return vh(e,r)-vh(t,r)}addForceIncludeElement(e,t){this.htmlReducer.addForceIncludeElement({element:e,checksumid:t})}shouldCaptionElement(e,{recursive:t}={recursive:!0}){let r=this.htmlReducer.getElementForChecksumId(e);if(!r)return!1;let i=cb,o=a(f=>{let p=f.parentElement;if(!p||p.nodeType!==Node.ELEMENT_NODE)return!1;let{width:g,height:y}=p.getBoundingClientRect(),{width:b,height:E}=f.getBoundingClientRect();return Math.abs(g-b)<15&&Math.abs(y-E)<15},"shouldCheckParent"),c=!1,u=r,d=a(()=>(c?u=u?.parentElement:c=!0,u),"getNextParent");for(;;){let f=d();if(i.some(p=>f.getAttribute(p))||f.querySelectorAll("[checksuminteractable]").length>0||i.filter(p=>f.querySelectorAll(`[${p}]`)).length===1)return!1;if(!t||!o(f))break}return!0}async makeMatchingElementSelectionData(e,t,r){try{let i=this.setAndGetTestId(e),o=this.getVisibleParent(e),c=this.setAndGetTestId(o),u=this.getElementAtCenterOfElement(e),d=this.setAndGetTestId(u),f={element:i,visibleElement:c===i?void 0:c,atPointElement:d===i||d===c?void 0:d},p=await this.elementSelector.getSelectorAndLocator(e,{testIdSelector:this.appSpecificRules?.esraSelectionRules?.testIdSelector}),g=await this.elementSelector.getSelectorAndLocator(u,{testIdSelector:this.appSpecificRules?.esraSelectionRules?.testIdSelector}),y=await this.elementSelector.getSelectorAndLocator(o,{testIdSelector:this.appSpecificRules?.esraSelectionRules?.testIdSelector}),b={element:p?.selector,visibleElement:y?.selector,atPointElement:g?.selector},E={element:p?.parentFramesSelectors,visibleElement:y?.parentFramesSelectors,atPointElement:g?.parentFramesSelectors},C=a(_=>({tag:_.tagName.toLowerCase()}),"makeElementData"),w={element:C(e),visibleElement:f.visibleElement?C(o):void 0,atPointElement:f.atPointElement?C(u):void 0},M=a(async _=>_===e&&r?r:new Dt(document).extract(_).toMetadata(),"makeESRAMetadata"),N={element:await M(e),visibleElement:f.visibleElement?await M(o):void 0,atPointElement:f.atPointElement?await M(u):void 0},A=p?.locator;return{testIds:f,selectors:b,parentFramesSelectors:E,elementData:w,score:t,esraMetadata:N,generatedLocator:A}}catch(i){return console.log("[makeMatchingElementSelectionData] exception",i),{testIds:{element:void 0},selectors:{element:void 0},parentFramesSelectors:{element:void 0},elementData:{element:void 0},esraMetadata:{element:void 0},generatedLocator:void 0}}}getElementAtCenterOfElement(e){let{x:t,y:r}=e.getBoundingClientRect(),i=e.ownerDocument.elementFromPoint(t,r);return i instanceof HTMLElement?i:void 0}setAndGetTestId(e){if(!e)return;let t=e.getAttribute("data-checksum-testid");if(t)return t;let r=(this.testIdCounter++).toString();return e.setAttribute("data-checksum-testid",r),r}getVisibleParent(e){return!(e instanceof HTMLElement)||e.offsetParent!==null?e:this.getVisibleParent(ir(e))}};var Ai=class{static{a(this,"EventHandlersBase")}setSessionReplayer(e){}skipEvents(e){}preCastEvent(e){}async preEvent(e){}postEvent(e,t){return t}handleMeta(e,t){}handleViewportResize(e){}handleMutation(e,t){}handleInput(e,t){}handleClick(e,t){}handleDblClick(e,t){}handleMouseDown(e,t){}handleMouseUp(e,t){}handleMouseMove(e,t){}handleFocus(e,t){}handleBlur(e,t){}handleContentEditableInput(e,t){}handleKeyStroke(e,t){}handleURLChange(e,t){}handleNativeDialog(e,t){}handleRecordAssertion(e,t){}handleRecordHover(e,t){}};var kl=class{constructor({eventHandlers:e}){this.filter={only:[],exclude:[]};this.preCastEvent=a(async e=>this.handlers.preCastEvent(e),"preCastEvent");this.processEvent=a(async(e,t=!0)=>{await this.handlers.preEvent(e);let r=t?await this.handleEvent(e):void 0,i=await this.handlers.postEvent(e,r);return this.handlers.controlledReturn?this.handlers.getReturnValue():i},"processEvent");this.skipEvents=a(async e=>this.handlers.skipEvents(e),"skipEvents");this.shouldProcess=a(e=>{let{only:t,exclude:r}=this.filter,i=a(o=>e.type===U.Custom&&e.data.tag==="filter"?!0:o.type!==e.type?!1:e.type===U.Custom?o.tag===e.data.tag:e.type===U.IncrementalSnapshot?e.data.source===o.source:!0,"matchFilter");return!(t.length>0&&!t.some(i)||r.length>0&&r.some(i))},"shouldProcess");this.handlers=e}static{a(this,"EventProcessor")}setHandlers(e){this.handlers=e}async handleEvent(e){if(this.shouldProcess(e))switch(e.type){case U.Meta:return this.handlers.handleMeta(e.data,e);case U.IncrementalSnapshot:switch(e.data.source){case $.ViewportResize:return this.handlers.handleViewportResize(e.data,e);case $.Mutation:return this.handlers.handleMutation(e.data,e);case $.Input:return this.handlers.handleInput(e.data,e);case $.MouseInteraction:return this.handleMouseInteraction(e.data,e);case $.MouseMove:return this.handlers.handleMouseMove(e.data,e);default:break}break;case U.Custom:switch(e.data.tag){case"contenteditable-input":return this.handlers.handleContentEditableInput(e.data.payload,e);case"key-stroke":return this.handlers.handleKeyStroke(e.data.payload,e);case"url-change":return this.handlers.handleURLChange(e.data.payload,e);case"native-dialog-event":return this.handlers.handleNativeDialog(e.data.payload,e);case"assertion":return this.handlers.handleRecordAssertion(e.data.payload,e);case"hover":return this.handlers.handleRecordHover(e.data.payload,e);case"filter":this.handleFilterEvent(e.data.payload)}break;default:break}}async handleMouseInteraction(e,t){switch(e.type){case re.Click:return this.handlers.handleClick(e,t);case re.DblClick:return this.handlers.handleDblClick(e,t);case re.MouseDown:return this.handlers.handleMouseDown(e,t);case re.MouseUp:return this.handlers.handleMouseUp(e,t);case re.Focus:return this.handlers.handleFocus(e,t);case re.Blur:return this.handlers.handleBlur(e,t);default:break}}handleFilterEvent(e){this.filter.exclude=e.filter.exclude,this.filter.only=e.filter.only}};var $h=Xi(ko());var Pl=class{constructor(){this._replayingState="Paused";this.listeners=[]}static{a(this,"ReplayerListenersManager")}set replayingState(e){this._replayingState=e,this.notifyListeners()}addListener(e){this.listeners.push(e)}removeListener(e){this.listeners=this.listeners.filter(t=>t!==e)}async wrapWithLoadingState(e,t="Paused"){return this.replayingState="Processing",new Promise((r,i)=>{requestAnimationFrame(()=>{setTimeout(()=>{e().then(o=>{r(o)}).catch(o=>{i(o)}).finally(()=>{this.replayingState=t})},0)})})}notifyListeners(){this.listeners.forEach(e=>e(this._replayingState))}};var B_={[U.DomContentLoaded]:"DomContentLoaded",[U.Load]:"Load",[U.FullSnapshot]:"FullSnapshot",[U.IncrementalSnapshot]:"IncrementalSnapshot",[U.Meta]:"Meta",[U.Custom]:"Custom",[U.Plugin]:"Plugin"},V_={[$.Mutation]:"Mutation",[$.MouseMove]:"MouseMove",[$.MouseInteraction]:"MouseInteraction",[$.Scroll]:"Scroll",[$.ViewportResize]:"ViewportResize",[$.Input]:"Input",[$.TouchMove]:"TouchMove",[$.MediaInteraction]:"MediaInteraction",[$.StyleSheetRule]:"StyleSheetRule",[$.CanvasMutation]:"CanvasMutation",[$.Font]:"Font",[$.Log]:"Log",[$.Drag]:"Drag",[$.StyleDeclaration]:"StyleDeclaration"},U_={[re.MouseUp]:"MouseUp",[re.MouseDown]:"MouseDown",[re.Click]:"Click",[re.ContextMenu]:"ContextMenu",[re.DblClick]:"DblClick",[re.Focus]:"Focus",[re.Blur]:"Blur",[re.TouchStart]:"TouchStart",[re.TouchMove_Departed]:"TouchMove_Departed",[re.TouchEnd]:"TouchEnd"},Fh=a(n=>({...n,type:B_[n.type],data:{...n.data,source:n.type===U.IncrementalSnapshot?V_[n.data.source]??n.data.source:n.data.source,type:n.data.source===$.MouseInteraction?U_[n.data.type]:n.data.type}}),"stringifyEvent"),Ln=a((n,{includeBlur:e=!0,includeFocus:t=!0}={})=>{switch(n.type){case U.Meta:return!1;case U.IncrementalSnapshot:switch(n.data.source){case $.Input:return n.data.userTriggered;case $.MouseInteraction:return!(!e&&n.data.type===re.Blur||!t&&n.data.type===re.Focus);case $.MouseMove:case $.Drag:case $.Selection:return!0;default:return!1}case U.Custom:switch(n.data.tag){case"contenteditable-input":case"hover":return!0;default:return!1}default:return!1}},"isActionEvent");var rE=a(n=>{n.querySelectorAll("a, button, input").forEach(e=>{e.addEventListener("click",t=>t.preventDefault()),e.addEventListener("keydown",t=>t.preventDefault())})},"disableInteractiveElements");var Hh=class{static{a(this,"Logger")}static formatMessage(e,t){let{level:r,message:i,timestamp:o,data:c}=e,u=`[${o}] [${r.toUpperCase()}]`;return t&&(u+=` [${t}]`),u+=` ${i}`,c?`${u}
Data: ${JSON.stringify(c)}`:u}static getCallerInfo(){let r=(new Error().stack?.split(`
`)||[])[4];if(r){let i=r.match(/at\s+.+\s+\((.+):(\d+):(\d+)\)/)||r.match(/at\s+(.+):(\d+):(\d+)/);if(i){let[,o,c]=i;return`${o.split("/").pop()||o}:${c}`}}return"unknown"}static log(e,t,r){let i={level:e,message:t,timestamp:new Date().toISOString(),data:r},o=this.getCallerInfo(),c=this.formatMessage(i,o);switch(e){case"error":console.error(c);break;case"warn":console.warn(c);break;case"debug":console.debug(c);break;default:console.log(c)}}static info(e,t){this.log("info",e,t)}static warn(e,t){this.log("warn",e,t)}static error(e,t){this.log("error",e,t)}static debug(e,t){this.log("debug",e,t)}},Ce=Hh;var G_=!0,Ri=class{constructor(e={}){this.interactionEventsTimestamps=[];this.initialEventsBuffer=[];this.config={enableInteract:!1};this.eventSubscribers={};this.newRRWebSeekMode=!1;this.timer=null;this.animationFrameStepHandler={wait:a(e=>requestAnimationFrame(e),"wait"),cancel:a(e=>cancelAnimationFrame(e),"cancel")};this.timeoutStepHandler={wait:a(e=>setTimeout(e,10),"wait"),cancel:a(e=>clearTimeout(e),"cancel")};this.stop=a(()=>{Ce.info("Stopping replayer");try{this.replayer&&this.replayer.destroy()}catch(e){Ce.error("Error destroying replayer",e)}},"stop");this.getNodeById=a(e=>(Ce.debug("Getting node by ID",{id:e}),this.replayer.getMirror().getNode(e)),"getNodeById");this.getMeta=a(e=>(Ce.debug("Getting node metadata"),this.replayer?.getMirror()?.getMeta(e)),"getMeta");this.getLastInteractionEventTimestamp=a(e=>{let t=this.interactionEventsTimestamps.sort((r,i)=>r-i).reverse().find(r=>r<=e);return Ce.debug("Getting last interaction event timestamp",{inputTimestamp:e,lastTimestamp:t}),t},"getLastInteractionEventTimestamp");Ce.info("Initializing SessionReplayer",{config:e}),this.config={...this.config,...e},this.replayerListenersManager=new Pl,window.addEventListener("message",async t=>{try{let{data:r}=t;r.type==="setNewRRWebSeekMode"&&this.setNewRRWebSeekMode(r.payload)}catch{}})}static{a(this,"SessionReplayer")}makeReplayerConfig(){let e={mouseTail:!1,pauseAnimation:!1,speed:360,triggerFocus:!0,UNSAFE_replayCanvas:!0,liveMode:!0,showDebug:!1,skipInactive:!0,useVirtualDom:!1};return this.config.root&&(e.root=this.config.root),Ce.debug("Creating replayer configuration",{playerConfig:e}),e}makeReplayer(e=[],{baselineTime:t=Date.now()}={}){if(Ce.info("Creating replayer instance",{eventsCount:e.length,baselineTime:t,config:this.config}),this.replayer=new Za(e,this.makeReplayerConfig()),this.config.enableInteract?(Ce.debug("Enabling interact mode"),this.replayer.enableInteract()):(Ce.debug("Disabling interact mode"),this.replayer?.disableInteract()),this.config.onlyLive?(Ce.info("Starting live mode",{baselineTime:t}),this.replayer.startLive(t)):(Ce.info("Starting playback"),this.replayer.play()),G_&&(Ce.debug("Setting up debug mode"),this.setupDebugMode()),Object.values(ye).forEach(r=>{this.replayer.on(r,i=>{this.notifySubscribers(r,i)})}),this.disableInteractiveElements(),this.newRRWebSeekMode){let r=this.getReplayerContext().timer;this.timerAddAction=r.addAction.bind(r),r.addAction=i=>(i.delay=0,this.timerAddAction(i))}}isConnected(){let e=!!this.replayer;return Ce.debug("Checking replayer connection status",{connected:e}),e}subscribeTo(e,t,r){Ce.info("Subscribing to events",{id:e,events:t}),t.forEach(i=>{this.eventSubscribers[i]||(this.eventSubscribers[i]={}),this.eventSubscribers[i][e]=r})}unsubscribeFrom(e){Ce.info("Unsubscribing from events",{id:e}),Object.keys(this.eventSubscribers).forEach(t=>{this.eventSubscribers[t][e]&&delete this.eventSubscribers[t][e]})}notifySubscribers(e,t){Object.values(this.eventSubscribers[e]??{}).forEach(r=>{try{r(t)}catch(i){Ce.error("Error in event cast subscriber",{eventType:e,error:i})}})}setNewRRWebSeekMode(e){this.newRRWebSeekMode=e}getFirstEventTimestamp(){let e=this.replayer.getMetaData().startTime;return Ce.debug("Getting first event timestamp",{timestamp:e}),e}getLastEventTimestamp(){let e=this.replayer.getMetaData().endTime;return Ce.debug("Getting last event timestamp",{timestamp:e}),e}getCurrentTimestamp(){try{let e=this.replayer.getCurrentTime()+this.getFirstEventTimestamp();return Ce.debug("Getting current timestamp",{timestamp:e}),e}catch(e){return Ce.error("Error getting current timestamp",e),0}}getIframeDocument(){return Ce.debug("Getting iframe document"),this.replayer.iframe.contentDocument}start(e,t=[]){}async fastForward(e){if(Ce.info("Fast forwarding events",{eventsCount:e.length}),!this.replayer)if(this.config.onlyLive)Ce.info("Creating live replayer",{baselineTime:e[0].timestamp}),this.makeReplayer([],{baselineTime:e[0].timestamp});else if(this.initialEventsBuffer.push(...e),Ce.debug("Buffering initial events",{bufferSize:this.initialEventsBuffer.length}),this.initialEventsBuffer.length>=2)this.makeReplayer(this.initialEventsBuffer);else return;let t=0,r=new Promise(i=>{this.subscribeTo("fastForward",[ye.EventCast],o=>{t++,t===e.length&&(this.unsubscribeFrom("fastForward"),i())})});for(let i of e)i.type===U.FullSnapshot&&(Ce.debug("Updating last snapshot"),this.lastSnapshot=i),this.replayer.addEvent(i),Ln(i,{includeBlur:!1,includeFocus:!1})&&this.interactionEventsTimestamps.push(i.timestamp);return r}monitorTime(e,t,r=this.animationFrameStepHandler){let i=a(()=>{this.timer&&(r.cancel(this.timer),this.timer=null)},"stopTimer");i();let o=a(()=>{let c=this.replayer.getCurrentTime();if(e&&c>=e){t(),i();return}else console.log(`[SessionReplayer] monitoring time, current: ${c}; target: ${e}...`);let u=this.replayer.getMetaData();c<u.totalTime&&(this.timer=r.wait(o))},"update");this.timer=r.wait(o)}async seek(e,t=!0){return Ce.info("Seeking to timestamp",{timestamp:e,pause:t}),new Promise(r=>{if(this.newRRWebSeekMode)this.subscribeTo("seek",[ye.EventCast],i=>{if(i.timestamp>=e){if(this.unsubscribeFrom("seek"),t){this.replayer.pause(),requestAnimationFrame(()=>{this.getReplayerContext().timer.clear(),r()});return}r()}}),this.replayer.play();else{let i=e-this.getFirstEventTimestamp();this.monitorTime(i,()=>{t&&this.replayer.pause(),r()}),this.replayer.play(i)}})}async goLive(){let e=this.getLastEventTimestamp();Ce.info("Going live",{lastTimestamp:e}),await this.replayerListenersManager.wrapWithLoadingState(async()=>{await this.seek(e,!1),await(0,$h.default)(1e3)})}async goBack(e,{sleepAfter:t=100,beforeTimestamp:r=!1,includeAllMatchingTimestamps:i=!1}={}){Ce.info("Going back to timestamp",{timestamp:e,sleepAfter:t,beforeTimestamp:r,includeAllMatchingTimestamps:i}),await this.replayerListenersManager.wrapWithLoadingState(async()=>{await this.seek(e,!0),t&&await(0,$h.default)(t)})}getReplayerContext(){return this.replayer.service.state.context}setupDebugMode(){Ce.debug("Setting up debug mode"),window.__chkreplayer={events:a(()=>this.getReplayerContext().events,"events"),stringifyEvents:a(()=>this.getReplayerContext().events.map(Fh),"stringifyEvents"),stringifyActionEvents:a(()=>this.getReplayerContext().events.filter(e=>Ln(e)).map(Fh),"stringifyActionEvents"),back:a(e=>this.goBack(e),"back"),live:a(()=>this.goLive(),"live"),currentTime:a(()=>this.replayer.getCurrentTime(),"currentTime"),getReplayer:a(()=>this.replayer,"getReplayer"),getThis:a(()=>this,"getThis")}}disableInteractiveElements(){Ce.debug("Disabling interactive elements");let e=this.replayer.iframe.contentDocument||this.replayer.iframe.contentWindow.document;new MutationObserver(()=>rE(e)).observe(e,{childList:!0,subtree:!0})}};var Fl=class{static{a(this,"Streamer")}constructor(e={}){this.sessionReplayer=new Ri(e),this.eventProcessor=new kl({eventHandlers:new Ai})}setEventHandlers(e){e.setSessionReplayer(this.sessionReplayer),this.eventHandlers=e,this.eventProcessor.setHandlers(this.eventHandlers)}start(e){this.sessionReplayer.start(e)}async handleEvent(e){return await this.eventProcessor.preCastEvent(e),await this.sessionReplayer.fastForward([e]),await this.eventProcessor.processEvent(e)}handleEvents(e){return this.skipEvents(e)}async skipEvents(e){await this.eventProcessor.skipEvents(e),await this.sessionReplayer.fastForward(e)}stop(){this.sessionReplayer.stop()}};var Hl=class{constructor(e){this.timeMachine=e;this.seekbarMin=Date.now();this.seekbarMax=Date.now();this.listeningToTimeMachine=!1}static{a(this,"TimeMachineSeeker")}open(){let e=document.getElementById("time-machine-seekbar");e&&e.remove(),this.seekbarMax=Date.now(),console.log("Creating seekbar with min/max timestamp",this.seekbarMin,this.seekbarMax),console.log("Current timestamp",this.timeMachine.getCurrentTimestamp());let t=0,r=1,i=.001,o=document.createElement("div");o.id="time-machine-seekbar",o.style.position="absolute",o.style.width="90%",o.style.bottom="0",o.style.background="white",o.style.opacity="0.75",o.style.display="flex",o.style.justifyContent="center",o.style.alignItems="center",o.style.padding="10px",o.style.margin="0 20px",o.style.gap="10px";let c=document.createElement("input");c.type="range",c.min=t.toString(),c.max=r.toString(),c.step=i.toString(),c.value=c.max,c.style.flexGrow="1";let u=document.createElement("span");u.textContent=this.formatTimestamp(this.seekbarMax);let d=document.createElement("button");d.textContent="Refresh",d.addEventListener("click",()=>{this.open()}),o.appendChild(c),o.appendChild(u),o.appendChild(d),c.addEventListener("input",()=>{let f=parseFloat(c.value),p=this.getTimestamp(f);console.log("Seeking to timestamp",p),u.textContent=this.formatTimestamp(p),this.timeMachine.goBack(p)}),document.body.appendChild(o),this.addTMListeners()}getTimestamp(e){let t=Math.round(this.seekbarMin+e*(this.seekbarMax-this.seekbarMin));return t>this.seekbarMax?this.seekbarMax:t<this.seekbarMin?this.seekbarMin:t}formatTimestamp(e){let t=Math.max(0,Math.floor((e-this.seekbarMin)/1e3)),r=Math.floor(t/60),i=t%60;return`${String(r).padStart(2,"0")}:${String(i).padStart(2,"0")}`}addTMListeners(){this.listeningToTimeMachine||(this.listeningToTimeMachine=!0,this.timeMachine.sessionReplayer.replayerListenersManager?.addListener(e=>{e==="Processing"?this.showTimeMachineLoading():this.hideTimeMachineLoading()}))}showTimeMachineLoading(){let e=document.createElement("div");e.id="time-machine-loading",e.style.position="absolute",e.style.width="100%",e.style.height="100%",e.style.top="0",e.style.left="0",e.style.background="black",e.style.opacity="0.65",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center";let t=document.createElement("div");t.style.color="white",t.style.fontSize="20px",t.style.cursor="pointer",t.textContent="Loading (if stuck, click here)...",t.addEventListener("click",()=>{this.hideTimeMachineLoading()}),e.appendChild(t),document.body.appendChild(e)}hideTimeMachineLoading(){let e=document.getElementById("time-machine-loading");e&&e.remove()}};var $l=class extends Fl{constructor(){super({enableInteract:!0});this.shouldHandleEvents=!0;this.name="timeMachine"}static{a(this,"TimeMachine")}setEventHandlers(t,r=!0){this.shouldHandleEvents=r,super.setEventHandlers(t)}async handleEvents(t){try{t=t.filter(r=>r.timestamp>=(this.lastSeenTimestamp?this.lastSeenTimestamp:0)),t.length&&(this.lastSeenTimestamp=t[t.length-1].timestamp);for(let r of t)await this.eventProcessor.processEvent(r,this.shouldHandleEvents),await this.skipEvents([r])}catch(r){console.error(r)}}setShouldHandleEvents(t){this.shouldHandleEvents=t}async goBack(t,r={}){return t?this.sessionReplayer.goBack(t):this.goLive()}getElementByRRwebId(t){return this.sessionReplayer.getNodeById(t)}goLive(){return this.sessionReplayer.goLive()}getCurrentTimestamp(){return this.sessionReplayer.getCurrentTimestamp()}getFirstEventTimestamp(){return this.sessionReplayer.getFirstEventTimestamp()}setNewRRWebSeekMode(t){this.sessionReplayer.setNewRRWebSeekMode(t)}subscribeToEventCast(t,r,i){this.sessionReplayer.subscribeTo(t,r,i)}isConnected(){return this.sessionReplayer.isConnected()}unsubscribeFromEventCast(t){this.sessionReplayer.unsubscribeFrom(t)}openSeekbar(){this.seeker||(this.seeker=new Hl(this)),this.seeker.open()}};var nE=a(({locator:n,parentFramesSelectors:e=[]})=>e.reverse().reduce((t,r)=>`frameLocator('${r}').${t}`,n),"getNestedFramesSelection");var iE=Xi(ko());var Wl=class{constructor(){this.esraExtractors=[];this.playwrightSelector=new ut}static{a(this,"TimeMachineElementSelection")}async getSelector(e,{extractPlaywrightSelector:t=!0,extractEsraMetadata:r=!0,rootDocument:i=document}={}){if(!e)return null;let o={};if(r)try{console.log("extracting ESRA metadata...");let c=this.getESRAExtractor(e).extract(e);o.esraMetadata=c.toMetadata(),console.log("ESRA metadata extraction complete")}catch(c){console.error("Failed to extract ESRA metadata",c)}if(t){let{selector:c,locator:u,parentFramesSelectors:d}=await this.playwrightSelector.getSelectorAndLocator(e,{ignoredIframesSelectors:[".replayer-wrapper > iframe"],rootDocument:i,flags:{originFlag:"timemachine"}});o.playwrightSelector=c,o.playwrightLocator=u,o.playwrightParentFramesSelectors=d}return o}getESRAExtractor(e){let t=e.ownerDocument;if(!t)throw console.warn("Node does not have an owner document",e),new Error("Node does not have an owner document");let r=this.esraExtractors.find(o=>o.isSameDocument(t));if(r)return r;let i=new Dt(t);return this.esraExtractors.push(i),i}};var Bl=class n{static{a(this,"SequenceMatcher")}findSequence(e,t,r){for(let i=0;i<=e.length-t.length;i++){let o=this.findMatch(i,e,t,r);if(o!==null)return o}return null}findMatch(e,t,r,i){let o={},c=[];for(let u=0;u<r.length;u++){let d=t[e+u],f=r[u];if(!this.matchItem(f,d,o,i??d))return null;c.push(d)}return{items:c,token_values:o}}matchItem(e,t,r,i){if(Array.isArray(e)&&Array.isArray(t))return this.matchArray(e,t,r,i);if(typeof e=="object"&&e!==null&&typeof t=="object"&&t!==null){for(let o in e){let c=e[o],u=t[o];if(typeof c=="string"&&c.startsWith("$")){if(r[c]===void 0)r[c]={value:u,item:i};else if(r[c].value!==u)return!1}else if(typeof c=="object"&&c!==null){if(!this.matchItem(c,u,r,i))return!1}else if(c!==u)return!1}return!0}else return e===t}matchArray(e,t,r,i){for(let o=0;o<=t.length-e.length;o++){let c=t.slice(o,o+e.length),u=this.findSequence(c,e,i);if(u){for(let d in u.token_values)if(r[d]===void 0)r[d]={value:u.token_values[d].value,item:i};else if(r[d].value!==u.token_values[d].value)return!1;return!0}}return!1}runExample(){let e=[{x:"banana",id:"1gf3",class:"fruit",index:"3",details:{a:1,b:2,nested:{key:"value1"}},arr:[{a:3,b:2},{a:1,b:2}]},{y:"apple",id:"4gs2",class:"fruit",parentIndex:"3",index:"7",details:{a:1,b:2,nested:{key:"value1"}}}],t=[{class:"$1",index:"$2",details:{a:1,b:"$3",nested:{key:"$4"}},arr:[{a:1,b:"$5"}]},{class:"$1",parentIndex:"$2",details:{a:1,b:"$3",nested:{key:"$4"}}}],i=new n().findSequence(e,t);console.log(i)}};var z_=!1,Vl=class extends Ai{constructor(t){super();this.onStep=t;this.events=[];this.previousEvent=null;this.steps=[];this.lastInteractionEventIndex=0;this.sequences=[];this.sequenceMatcher=new Bl;this.inputFilter=void 0;this.clickFilter=void 0;this.releasePendingInputAction=a(()=>{this.log("releasePendingInputAction",this.inputFilter),clearTimeout(this.inputFilter.timeout),this.addStep({step:this.inputFilter.action,type:"action"}),this.inputFilter=void 0},"releasePendingInputAction");this.lastMouseDown=void 0;this.hasUndefinedFocus=!1;this.releasePendingClickActions=a((t=!0)=>{this.log("releasePendingClickActions",Date.now(),{addInteractions:t},this.clickFilter),this.clickFilter&&clearTimeout(this.clickFilter.timeout),t&&this.clickFilter.actions.forEach(r=>this.addStep({step:r,type:"action"})),this.clickFilter=void 0},"releasePendingClickActions");this.dragAndDropSequence={events:[{type:U.IncrementalSnapshot,data:{source:$.MouseInteraction,type:re.MouseDown}},{type:U.IncrementalSnapshot,data:{source:$.Mutation,adds:[{parentId:"$dropzoneId",node:{id:"$draggableId"}}],removes:[{id:"$draggableId"}]}}],handler:a(async({token_values:{$dropzoneId:t,$draggableId:r},items:i})=>{let o=r.value,{selector:c}=await this.getNodeAndSelector(o,{timestamp:r.item.timestamp,revert:!1});if(!c)return;let u=t.value,{selector:d}=await this.getNodeAndSelector(u,{timestamp:t.item.timestamp});if(d)return console.log("Drag and drop",c.playwrightLocator,d.playwrightLocator),[this.makePageAction("drag_and_drop",i[0],c,{dropTarget:{selector:d.playwrightSelector,locator:d.playwrightLocator,parentFramesSelectors:d.playwrightParentFramesSelectors,esraMetadata:d.esraMetadata,rrwebId:u}})]},"handler")};this.maxNumberOfGetNodeRetries=3;this.elementSelector=new Wl,this.buildSequences()}static{a(this,"VisualTestGenerationTimeMachineEventHandlers")}log(...t){z_&&console.log(...t)}setSessionReplayer(){let t=window.parent.document.createElement("div");t.classList.add("live-tm"),t.style.display="none",window.parent.document.body.appendChild(t),this.sessionReplayer=new Ri({enableInteract:!1,root:t,onlyLive:!0}),this.sessionReplayer.start({firstEventTimestamp:Date.now()})}getSteps(t=0){return this.steps.slice(t)}async preEvent(t){this.inputFilter&&Ln(t)&&!this.isConsecutiveInputEvent(t)&&this.releasePendingInputAction(),this.clickFilter&&Ln(t)&&await this.isConsecutiveCheckboxInputEvent(t)&&this.releasePendingClickActions(!1),this.clickFilter&&Ln(t)&&!this.isConsecutiveMouseInteractionEvent(t)&&this.releasePendingClickActions(),this.events.push(t)}async postEvent(t,r,i=!0){this.sessionReplayer.fastForward([t]),this.previousEvent=t}async handleInput(t,r,i=!1){if(this.inputFilter){this.inputFilter.action.fillValue=t.text,this.inputFilter.timeout=this.setInputWaitTimeout();return}if(!t.userTriggered)return;let{node:o,selector:c}=await this.getNodeAndSelector(t.id);if(!o||!c)return;let u=this.makePageAction(this.getInputEventCode(o,t),r,c);if(u.rrwebId=t.id,u.eventCode==="input"){u.timestamp=this.previousEvent?.timestamp??r.timestamp,u.fillValue=t.text,this.inputFilter={action:u,nodeId:t.id,contenteditable:i,timeout:this.setInputWaitTimeout()};return}u.eventCode==="selectoption"&&(u.fillValue=t.text),u.eventCode==="upload_files"&&(u.files=[],u.files.push(t.text.split("\\").pop())),this.addStep({step:u,type:"action"})}isConsecutiveInputEvent(t){return this.inputFilter?this.inputFilter.contenteditable?t.type===U.Custom&&t.data.tag==="contenteditable-input"&&t.data.payload.id===this.inputFilter.nodeId:t.type===U.IncrementalSnapshot&&t.data.source===$.Input&&t.data.id===this.inputFilter.nodeId&&!!t.data.userTriggered:!1}setInputWaitTimeout(){return this.inputFilter?.timeout&&clearTimeout(this.inputFilter.timeout),setTimeout(this.releasePendingInputAction,1e3)}handleContentEditableInput(t,r){this.handleInput({userTriggered:!0,id:t.id,text:t.text,isChecked:!1,source:$.Input},r,!0)}handleNativeDialog(t,r){try{let{dialogAction:i,dialogType:o,dialogResult:c,dialogMessage:u}=t,d={dialogResult:c,dialogType:o,dialogMessage:u},f=this.makePageAction(i,r,{},{nativeDialog:d});this.addStep({step:f,type:"action"})}catch(i){console.error("handleNativeDialog",i)}}handleRecordAssertion(t,r){this.addStep({step:this.makeAssertion(t,r),type:"assertion"})}handleRecordHover(t,r){try{let i=this.makePageAction("hover",r,{playwrightLocator:t.locator});this.addStep({step:i,type:"action"})}catch(i){console.error("handleRecordHover",i)}}handleKeyStroke(t,r){}async handleMouseDown(t,r){let{selector:i}=await this.getNodeAndSelector(t.id);this.lastMouseDown={selector:i,data:t,event:r}}handleFocus(t,r){this.hasUndefinedFocus=t.id===-1}async handleClick(t,r){try{if(t.x===void 0||t.y===void 0)return;if(this.lastMouseDown&&this.lastMouseDown.data.id!==t.id&&this.hasUndefinedFocus){let c=this.makePageAction("click",this.lastMouseDown.event,this.lastMouseDown.selector);this.addStep({step:c,type:"action"});return}let{selector:i}=await this.getNodeAndSelector(t.id);if(!i)return;let o=this.makePageAction("click",r,i);if(this.log("handleClick",Date.now(),o),this.clickFilter){this.log("handleClick","adding to filter"),this.clickFilter.actions.push(o);return}this.clickFilter={actions:[o],nodeId:t.id,timeout:this.setClickWaitTimeout()}}finally{this.hasUndefinedFocus=!1,this.lastMouseDown=void 0}}isConsecutiveMouseInteractionEvent(t){return this.clickFilter?t.type===U.IncrementalSnapshot&&t.data.source===$.MouseInteraction&&t.data.id===this.clickFilter.nodeId:!1}async isConsecutiveCheckboxInputEvent(t){if(!this.clickFilter)return!1;let r=a(async i=>{let{node:o}=await this.getNodeAndSelector(this.clickFilter.nodeId);return["check","uncheck"].includes(this.getInputEventCode(o,i))},"isCheckboxInput");return t.type===U.IncrementalSnapshot&&t.data.source===$.Input&&t.data.userTriggered&&t.data.id===this.clickFilter.nodeId&&await r(t.data)}setClickWaitTimeout(){return this.clickFilter?.timeout&&clearTimeout(this.clickFilter.timeout),this.log("setClickWaitTimeout",Date.now()),setTimeout(this.releasePendingClickActions,600)}async handleDblClick(t,r){if(t.x===void 0||t.y===void 0)return;let{selector:i}=await this.getNodeAndSelector(t.id),o=this.makePageAction("double_click",r,i);this.log("handleDblClick",o),this.addStep({step:o,type:"action"}),this.releasePendingClickActions(!1)}buildSequences(){this.sequences.push(this.dragAndDropSequence)}async performSequenceSearch(){let t=this.events.slice(this.lastInteractionEventIndex);for(let r of this.sequences){let i=this.sequenceMatcher.findSequence(t,r.events);if(i){let o=await r.handler(i);o&&o.forEach(c=>this.addStep({step:c,type:"action"}))}}await this.sessionReplayer.goLive()}addStep(t){t.type==="action"&&!t.step.id&&(t.step.id=Date.now().toString()),this.steps.push(t),this.lastInteractionEventIndex=this.events.length,this.log("addStep",t),this.onStep?.(t)}makeAssertion(t,r){return{matcher:t.matcher,locator:t.locator,thought:t.thought,timestamp:r.timestamp,id:t?.id||Date.now().toString()}}makePageAction(t,r,i,o={}){return console.log("making action with ts",r.timestamp,Date.now()-r.timestamp),{eventCode:t,selector:i.playwrightSelector,locator:nE({locator:i.playwrightLocator,parentFramesSelectors:i.playwrightParentFramesSelectors}),esraMetadata:i.esraMetadata,pageId:void 0,timestamp:r.timestamp,id:o?.id||Date.now().toString(),rrwebId:r.data?.id,...o,parentFramesSelectors:[]}}async getNodeById(t,{retriesLeft:r=this.maxNumberOfGetNodeRetries,useCompoundInteractableDetection:i=!0}={}){if(!r)return console.error("no node"),null;let o=this.sessionReplayer.getNodeById(t);return o?i?Xo(o,[]):o:(await(0,iE.default)(100*(this.maxNumberOfGetNodeRetries-r+1)),this.getNodeById(t,{retriesLeft:r-1,useCompoundInteractableDetection:i}))}getInputEventCode(t,r){if(t.tagName.toLowerCase()==="select")return"selectoption";switch(t.getAttribute("type")){case"file":return"upload_files";case"checkbox":case"radio":return r.isChecked?"check":"uncheck";case"text":default:return"input"}}async getNodeAndSelector(t,{timestamp:r,revert:i=!0}={}){r&&await this.sessionReplayer.goBack(r);let o=await this.getNodeById(t);if(!o)return{};let c=await this.elementSelector.getSelector(o,{extractEsraMetadata:!1,rootDocument:this.sessionReplayer.getIframeDocument()});return c?(r&&i&&await this.sessionReplayer.goLive(),{node:o,selector:c}):{node:o}}};var Ul=class{constructor(e){this.timeMachine=e;this.sendRecordedSteps=!1;this.onNewRecordedStep=a(e=>{this.sendRecordedSteps&&window.parent.postMessage({type:"new-recorded-step",data:[e]})},"onNewRecordedStep");this.eventHandlers=new Vl(this.onNewRecordedStep)}static{a(this,"VisualTestGenerator")}init(){this.timeMachine.setEventHandlers(this.eventHandlers,!0)}setSendRecordedSteps(e){this.sendRecordedSteps=e}startInspector({singleSelection:e=!0,rootDocument:t,timestamp:r,eventName:i}){this.stopInspector();let o=a(c=>c.top.document.querySelector("iframe.time-machine-iframe").contentDocument,"getRenderDocument");this.elementInspector=new Ti({rootDocument:t??this.getRRwebReplayerDocument(),getRenderDocument:o,rootDocumentForSelectorGenerator:this.getRRwebReplayerDocument(),eventName:i}),this.elementInspector.start({singleSelection:e,timestamp:r})}getRRwebReplayerDocument(){return document.querySelector(".replayer-wrapper > iframe").contentDocument}stopInspector(){this.elementInspector?.stop()}consumeSelections(){return this.elementInspector.consumeSelections()}};(function(){let n=Element.prototype.addEventListener;Element.prototype.addEventListener=function(e,t,r){n.call(this,e,t,r),this._checksum_eventListenerList||(this._checksum_eventListenerList={}),this._checksum_eventListenerList[e]||(this._checksum_eventListenerList[e]=[]),this._checksum_eventListenerList[e].push(t)}})();var Gl=class{static{a(this,"MockAutoHealAgent")}static{this.initialize=a(function(...e){return Promise.resolve()},"initialize")}static{this.success=a(function(){return Promise.resolve()},"success")}static{this.error=a(function(...e){return Promise.resolve()},"error")}static{this.breakpoint=a(function(){return Promise.resolve()},"breakpoint")}static{this.pushEval=a(function(...e){},"pushEval")}static{this.popEval=a(function(){},"popEval")}static{this.log=a(function(...e){},"log")}static{this.getLogs=a(function(){return[]},"getLogs")}};if(!window.checksum){let n=new Dl,e=new $l,t=new Ul(e);window.checksum={testGenerator:n,timeMachine:e,visualTestGenerator:t},window.AutoHealAgent=Gl}})();
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

rrweb/dist/rrweb.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
