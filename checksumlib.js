(()=>{var UR=Object.create;var la=Object.defineProperty;var GR=Object.getOwnPropertyDescriptor;var zR=Object.getOwnPropertyNames;var jR=Object.getPrototypeOf,qR=Object.prototype.hasOwnProperty;var l=(n,e)=>la(n,"name",{value:e,configurable:!0});var ca=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),YR=(n,e)=>{for(var t in e)la(n,t,{get:e[t],enumerable:!0})},KR=(n,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of zR(e))!qR.call(n,i)&&i!==t&&la(n,i,{get:()=>e[i],enumerable:!(r=GR(e,i))||r.enumerable});return n};var hs=(n,e,t)=>(t=n!=null?UR(jR(n)):{},KR(e||!n||!n.__esModule?la(t,"default",{value:n,enumerable:!0}):t,n));var ua=ca((vB,ry)=>{ry.exports=n=>new Promise(e=>setTimeout(e,n))});var ay=ca((ii,gs)=>{(function(){var n,e="4.17.21",t=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",i="Expected a function",o="Invalid `variable` option passed into `_.template`",a="__lodash_hash_undefined__",u=500,f="__lodash_placeholder__",h=1,p=2,g=4,y=1,w=2,S=1,E=2,v=4,M=8,A=16,T=32,N=64,U=128,G=256,Q=512,W=30,z="...",re=800,B=16,q=1,k=2,ee=3,X=1/0,Y=9007199254740991,he=17976931348623157e292,Ae=NaN,xe=4294967295,Cr=xe-1,ge=xe>>>1,dt=[["ary",U],["bind",S],["bindKey",E],["curry",M],["curryRight",A],["flip",Q],["partial",T],["partialRight",N],["rearg",G]],ut="[object Arguments]",ot="[object Array]",yn="[object AsyncFunction]",Wt="[object Boolean]",_t="[object Date]",xr="[object DOMException]",zr="[object Error]",Mr="[object Function]",Me="[object GeneratorFunction]",Qe="[object Map]",ke="[object Number]",Ye="[object Null]",at="[object Object]",Ie="[object Promise]",ji="[object Proxy]",qi="[object RegExp]",Zt="[object Set]",Yi="[object String]",vo="[object Symbol]",lC="[object Undefined]",Ki="[object WeakMap]",cC="[object WeakSet]",Xi="[object ArrayBuffer]",Vn="[object DataView]",qc="[object Float32Array]",Yc="[object Float64Array]",Kc="[object Int8Array]",Xc="[object Int16Array]",Zc="[object Int32Array]",Jc="[object Uint8Array]",Qc="[object Uint8ClampedArray]",eu="[object Uint16Array]",tu="[object Uint32Array]",uC=/\b__p \+= '';/g,fC=/\b(__p \+=) '' \+/g,hC=/(__e\(.*?\)|\b__t\)) \+\n'';/g,xp=/&(?:amp|lt|gt|quot|#39);/g,Mp=/[&<>"']/g,dC=RegExp(xp.source),pC=RegExp(Mp.source),mC=/<%-([\s\S]+?)%>/g,gC=/<%([\s\S]+?)%>/g,Tp=/<%=([\s\S]+?)%>/g,yC=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,bC=/^\w*$/,vC=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ru=/[\\^$.*+?()[\]{}|]/g,wC=RegExp(ru.source),nu=/^\s+/,SC=/\s/,EC=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,CC=/\{\n\/\* \[wrapped with (.+)\] \*/,xC=/,? & /,MC=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,TC=/[()=,{}\[\]\/\s]/,IC=/\\(\\)?/g,RC=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ip=/\w*$/,AC=/^[-+]0x[0-9a-f]+$/i,OC=/^0b[01]+$/i,LC=/^\[object .+?Constructor\]$/,NC=/^0o[0-7]+$/i,_C=/^(?:0|[1-9]\d*)$/,DC=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,wo=/($^)/,kC=/['\n\r\u2028\u2029\\]/g,So="\\ud800-\\udfff",PC="\\u0300-\\u036f",FC="\\ufe20-\\ufe2f",$C="\\u20d0-\\u20ff",Rp=PC+FC+$C,Ap="\\u2700-\\u27bf",Op="a-z\\xdf-\\xf6\\xf8-\\xff",HC="\\xac\\xb1\\xd7\\xf7",BC="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",WC="\\u2000-\\u206f",VC=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Lp="A-Z\\xc0-\\xd6\\xd8-\\xde",Np="\\ufe0e\\ufe0f",_p=HC+BC+WC+VC,iu="['\u2019]",UC="["+So+"]",Dp="["+_p+"]",Eo="["+Rp+"]",kp="\\d+",GC="["+Ap+"]",Pp="["+Op+"]",Fp="[^"+So+_p+kp+Ap+Op+Lp+"]",su="\\ud83c[\\udffb-\\udfff]",zC="(?:"+Eo+"|"+su+")",$p="[^"+So+"]",ou="(?:\\ud83c[\\udde6-\\uddff]){2}",au="[\\ud800-\\udbff][\\udc00-\\udfff]",Un="["+Lp+"]",Hp="\\u200d",Bp="(?:"+Pp+"|"+Fp+")",jC="(?:"+Un+"|"+Fp+")",Wp="(?:"+iu+"(?:d|ll|m|re|s|t|ve))?",Vp="(?:"+iu+"(?:D|LL|M|RE|S|T|VE))?",Up=zC+"?",Gp="["+Np+"]?",qC="(?:"+Hp+"(?:"+[$p,ou,au].join("|")+")"+Gp+Up+")*",YC="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",KC="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",zp=Gp+Up+qC,XC="(?:"+[GC,ou,au].join("|")+")"+zp,ZC="(?:"+[$p+Eo+"?",Eo,ou,au,UC].join("|")+")",JC=RegExp(iu,"g"),QC=RegExp(Eo,"g"),lu=RegExp(su+"(?="+su+")|"+ZC+zp,"g"),ex=RegExp([Un+"?"+Pp+"+"+Wp+"(?="+[Dp,Un,"$"].join("|")+")",jC+"+"+Vp+"(?="+[Dp,Un+Bp,"$"].join("|")+")",Un+"?"+Bp+"+"+Wp,Un+"+"+Vp,KC,YC,kp,XC].join("|"),"g"),tx=RegExp("["+Hp+So+Rp+Np+"]"),rx=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,nx=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],ix=-1,We={};We[qc]=We[Yc]=We[Kc]=We[Xc]=We[Zc]=We[Jc]=We[Qc]=We[eu]=We[tu]=!0,We[ut]=We[ot]=We[Xi]=We[Wt]=We[Vn]=We[_t]=We[zr]=We[Mr]=We[Qe]=We[ke]=We[at]=We[qi]=We[Zt]=We[Yi]=We[Ki]=!1;var Fe={};Fe[ut]=Fe[ot]=Fe[Xi]=Fe[Vn]=Fe[Wt]=Fe[_t]=Fe[qc]=Fe[Yc]=Fe[Kc]=Fe[Xc]=Fe[Zc]=Fe[Qe]=Fe[ke]=Fe[at]=Fe[qi]=Fe[Zt]=Fe[Yi]=Fe[vo]=Fe[Jc]=Fe[Qc]=Fe[eu]=Fe[tu]=!0,Fe[zr]=Fe[Mr]=Fe[Ki]=!1;var sx={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},ox={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ax={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},lx={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},cx=parseFloat,ux=parseInt,jp=typeof global=="object"&&global&&global.Object===Object&&global,fx=typeof self=="object"&&self&&self.Object===Object&&self,ft=jp||fx||Function("return this")(),cu=typeof ii=="object"&&ii&&!ii.nodeType&&ii,bn=cu&&typeof gs=="object"&&gs&&!gs.nodeType&&gs,qp=bn&&bn.exports===cu,uu=qp&&jp.process,Vt=function(){try{var O=bn&&bn.require&&bn.require("util").types;return O||uu&&uu.binding&&uu.binding("util")}catch{}}(),Yp=Vt&&Vt.isArrayBuffer,Kp=Vt&&Vt.isDate,Xp=Vt&&Vt.isMap,Zp=Vt&&Vt.isRegExp,Jp=Vt&&Vt.isSet,Qp=Vt&&Vt.isTypedArray;function Dt(O,D,_){switch(_.length){case 0:return O.call(D);case 1:return O.call(D,_[0]);case 2:return O.call(D,_[0],_[1]);case 3:return O.call(D,_[0],_[1],_[2])}return O.apply(D,_)}l(Dt,"apply");function hx(O,D,_,Z){for(var ae=-1,Te=O==null?0:O.length;++ae<Te;){var lt=O[ae];D(Z,lt,_(lt),O)}return Z}l(hx,"arrayAggregator");function Ut(O,D){for(var _=-1,Z=O==null?0:O.length;++_<Z&&D(O[_],_,O)!==!1;);return O}l(Ut,"arrayEach");function dx(O,D){for(var _=O==null?0:O.length;_--&&D(O[_],_,O)!==!1;);return O}l(dx,"arrayEachRight");function em(O,D){for(var _=-1,Z=O==null?0:O.length;++_<Z;)if(!D(O[_],_,O))return!1;return!0}l(em,"arrayEvery");function jr(O,D){for(var _=-1,Z=O==null?0:O.length,ae=0,Te=[];++_<Z;){var lt=O[_];D(lt,_,O)&&(Te[ae++]=lt)}return Te}l(jr,"arrayFilter");function Co(O,D){var _=O==null?0:O.length;return!!_&&Gn(O,D,0)>-1}l(Co,"arrayIncludes");function fu(O,D,_){for(var Z=-1,ae=O==null?0:O.length;++Z<ae;)if(_(D,O[Z]))return!0;return!1}l(fu,"arrayIncludesWith");function Ke(O,D){for(var _=-1,Z=O==null?0:O.length,ae=Array(Z);++_<Z;)ae[_]=D(O[_],_,O);return ae}l(Ke,"arrayMap");function qr(O,D){for(var _=-1,Z=D.length,ae=O.length;++_<Z;)O[ae+_]=D[_];return O}l(qr,"arrayPush");function hu(O,D,_,Z){var ae=-1,Te=O==null?0:O.length;for(Z&&Te&&(_=O[++ae]);++ae<Te;)_=D(_,O[ae],ae,O);return _}l(hu,"arrayReduce");function px(O,D,_,Z){var ae=O==null?0:O.length;for(Z&&ae&&(_=O[--ae]);ae--;)_=D(_,O[ae],ae,O);return _}l(px,"arrayReduceRight");function du(O,D){for(var _=-1,Z=O==null?0:O.length;++_<Z;)if(D(O[_],_,O))return!0;return!1}l(du,"arraySome");var mx=pu("length");function gx(O){return O.split("")}l(gx,"asciiToArray");function yx(O){return O.match(MC)||[]}l(yx,"asciiWords");function tm(O,D,_){var Z;return _(O,function(ae,Te,lt){if(D(ae,Te,lt))return Z=Te,!1}),Z}l(tm,"baseFindKey");function xo(O,D,_,Z){for(var ae=O.length,Te=_+(Z?1:-1);Z?Te--:++Te<ae;)if(D(O[Te],Te,O))return Te;return-1}l(xo,"baseFindIndex");function Gn(O,D,_){return D===D?Ax(O,D,_):xo(O,rm,_)}l(Gn,"baseIndexOf");function bx(O,D,_,Z){for(var ae=_-1,Te=O.length;++ae<Te;)if(Z(O[ae],D))return ae;return-1}l(bx,"baseIndexOfWith");function rm(O){return O!==O}l(rm,"baseIsNaN");function nm(O,D){var _=O==null?0:O.length;return _?gu(O,D)/_:Ae}l(nm,"baseMean");function pu(O){return function(D){return D==null?n:D[O]}}l(pu,"baseProperty");function mu(O){return function(D){return O==null?n:O[D]}}l(mu,"basePropertyOf");function im(O,D,_,Z,ae){return ae(O,function(Te,lt,Pe){_=Z?(Z=!1,Te):D(_,Te,lt,Pe)}),_}l(im,"baseReduce");function vx(O,D){var _=O.length;for(O.sort(D);_--;)O[_]=O[_].value;return O}l(vx,"baseSortBy");function gu(O,D){for(var _,Z=-1,ae=O.length;++Z<ae;){var Te=D(O[Z]);Te!==n&&(_=_===n?Te:_+Te)}return _}l(gu,"baseSum");function yu(O,D){for(var _=-1,Z=Array(O);++_<O;)Z[_]=D(_);return Z}l(yu,"baseTimes");function wx(O,D){return Ke(D,function(_){return[_,O[_]]})}l(wx,"baseToPairs");function sm(O){return O&&O.slice(0,cm(O)+1).replace(nu,"")}l(sm,"baseTrim");function kt(O){return function(D){return O(D)}}l(kt,"baseUnary");function bu(O,D){return Ke(D,function(_){return O[_]})}l(bu,"baseValues");function Zi(O,D){return O.has(D)}l(Zi,"cacheHas");function om(O,D){for(var _=-1,Z=O.length;++_<Z&&Gn(D,O[_],0)>-1;);return _}l(om,"charsStartIndex");function am(O,D){for(var _=O.length;_--&&Gn(D,O[_],0)>-1;);return _}l(am,"charsEndIndex");function Sx(O,D){for(var _=O.length,Z=0;_--;)O[_]===D&&++Z;return Z}l(Sx,"countHolders");var Ex=mu(sx),Cx=mu(ox);function xx(O){return"\\"+lx[O]}l(xx,"escapeStringChar");function Mx(O,D){return O==null?n:O[D]}l(Mx,"getValue");function zn(O){return tx.test(O)}l(zn,"hasUnicode");function Tx(O){return rx.test(O)}l(Tx,"hasUnicodeWord");function Ix(O){for(var D,_=[];!(D=O.next()).done;)_.push(D.value);return _}l(Ix,"iteratorToArray");function vu(O){var D=-1,_=Array(O.size);return O.forEach(function(Z,ae){_[++D]=[ae,Z]}),_}l(vu,"mapToArray");function lm(O,D){return function(_){return O(D(_))}}l(lm,"overArg");function Yr(O,D){for(var _=-1,Z=O.length,ae=0,Te=[];++_<Z;){var lt=O[_];(lt===D||lt===f)&&(O[_]=f,Te[ae++]=_)}return Te}l(Yr,"replaceHolders");function Mo(O){var D=-1,_=Array(O.size);return O.forEach(function(Z){_[++D]=Z}),_}l(Mo,"setToArray");function Rx(O){var D=-1,_=Array(O.size);return O.forEach(function(Z){_[++D]=[Z,Z]}),_}l(Rx,"setToPairs");function Ax(O,D,_){for(var Z=_-1,ae=O.length;++Z<ae;)if(O[Z]===D)return Z;return-1}l(Ax,"strictIndexOf");function Ox(O,D,_){for(var Z=_+1;Z--;)if(O[Z]===D)return Z;return Z}l(Ox,"strictLastIndexOf");function jn(O){return zn(O)?Nx(O):mx(O)}l(jn,"stringSize");function Jt(O){return zn(O)?_x(O):gx(O)}l(Jt,"stringToArray");function cm(O){for(var D=O.length;D--&&SC.test(O.charAt(D)););return D}l(cm,"trimmedEndIndex");var Lx=mu(ax);function Nx(O){for(var D=lu.lastIndex=0;lu.test(O);)++D;return D}l(Nx,"unicodeSize");function _x(O){return O.match(lu)||[]}l(_x,"unicodeToArray");function Dx(O){return O.match(ex)||[]}l(Dx,"unicodeWords");var kx=l(function O(D){D=D==null?ft:Kr.defaults(ft.Object(),D,Kr.pick(ft,nx));var _=D.Array,Z=D.Date,ae=D.Error,Te=D.Function,lt=D.Math,Pe=D.Object,wu=D.RegExp,Px=D.String,Gt=D.TypeError,To=_.prototype,Fx=Te.prototype,qn=Pe.prototype,Io=D["__core-js_shared__"],Ro=Fx.toString,Oe=qn.hasOwnProperty,$x=0,um=function(){var s=/[^.]+$/.exec(Io&&Io.keys&&Io.keys.IE_PROTO||"");return s?"Symbol(src)_1."+s:""}(),Ao=qn.toString,Hx=Ro.call(Pe),Bx=ft._,Wx=wu("^"+Ro.call(Oe).replace(ru,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Oo=qp?D.Buffer:n,Xr=D.Symbol,Lo=D.Uint8Array,fm=Oo?Oo.allocUnsafe:n,No=lm(Pe.getPrototypeOf,Pe),hm=Pe.create,dm=qn.propertyIsEnumerable,_o=To.splice,pm=Xr?Xr.isConcatSpreadable:n,Ji=Xr?Xr.iterator:n,vn=Xr?Xr.toStringTag:n,Do=function(){try{var s=xn(Pe,"defineProperty");return s({},"",{}),s}catch{}}(),Vx=D.clearTimeout!==ft.clearTimeout&&D.clearTimeout,Ux=Z&&Z.now!==ft.Date.now&&Z.now,Gx=D.setTimeout!==ft.setTimeout&&D.setTimeout,ko=lt.ceil,Po=lt.floor,Su=Pe.getOwnPropertySymbols,zx=Oo?Oo.isBuffer:n,mm=D.isFinite,jx=To.join,qx=lm(Pe.keys,Pe),ct=lt.max,yt=lt.min,Yx=Z.now,Kx=D.parseInt,gm=lt.random,Xx=To.reverse,Eu=xn(D,"DataView"),Qi=xn(D,"Map"),Cu=xn(D,"Promise"),Yn=xn(D,"Set"),es=xn(D,"WeakMap"),ts=xn(Pe,"create"),Fo=es&&new es,Kn={},Zx=Mn(Eu),Jx=Mn(Qi),Qx=Mn(Cu),eM=Mn(Yn),tM=Mn(es),$o=Xr?Xr.prototype:n,rs=$o?$o.valueOf:n,ym=$o?$o.toString:n;function C(s){if(rt(s)&&!ce(s)&&!(s instanceof be)){if(s instanceof zt)return s;if(Oe.call(s,"__wrapped__"))return bg(s)}return new zt(s)}l(C,"lodash");var Xn=function(){function s(){}return l(s,"object"),function(c){if(!et(c))return{};if(hm)return hm(c);s.prototype=c;var d=new s;return s.prototype=n,d}}();function Ho(){}l(Ho,"baseLodash");function zt(s,c){this.__wrapped__=s,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=n}l(zt,"LodashWrapper"),C.templateSettings={escape:mC,evaluate:gC,interpolate:Tp,variable:"",imports:{_:C}},C.prototype=Ho.prototype,C.prototype.constructor=C,zt.prototype=Xn(Ho.prototype),zt.prototype.constructor=zt;function be(s){this.__wrapped__=s,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=xe,this.__views__=[]}l(be,"LazyWrapper");function rM(){var s=new be(this.__wrapped__);return s.__actions__=Rt(this.__actions__),s.__dir__=this.__dir__,s.__filtered__=this.__filtered__,s.__iteratees__=Rt(this.__iteratees__),s.__takeCount__=this.__takeCount__,s.__views__=Rt(this.__views__),s}l(rM,"lazyClone");function nM(){if(this.__filtered__){var s=new be(this);s.__dir__=-1,s.__filtered__=!0}else s=this.clone(),s.__dir__*=-1;return s}l(nM,"lazyReverse");function iM(){var s=this.__wrapped__.value(),c=this.__dir__,d=ce(s),m=c<0,b=d?s.length:0,x=g0(0,b,this.__views__),I=x.start,R=x.end,L=R-I,F=m?R:I-1,$=this.__iteratees__,H=$.length,K=0,te=yt(L,this.__takeCount__);if(!d||!m&&b==L&&te==L)return Wm(s,this.__actions__);var se=[];e:for(;L--&&K<te;){F+=c;for(var de=-1,oe=s[F];++de<H;){var ye=$[de],Se=ye.iteratee,$t=ye.type,xt=Se(oe);if($t==k)oe=xt;else if(!xt){if($t==q)continue e;break e}}se[K++]=oe}return se}l(iM,"lazyValue"),be.prototype=Xn(Ho.prototype),be.prototype.constructor=be;function wn(s){var c=-1,d=s==null?0:s.length;for(this.clear();++c<d;){var m=s[c];this.set(m[0],m[1])}}l(wn,"Hash");function sM(){this.__data__=ts?ts(null):{},this.size=0}l(sM,"hashClear");function oM(s){var c=this.has(s)&&delete this.__data__[s];return this.size-=c?1:0,c}l(oM,"hashDelete");function aM(s){var c=this.__data__;if(ts){var d=c[s];return d===a?n:d}return Oe.call(c,s)?c[s]:n}l(aM,"hashGet");function lM(s){var c=this.__data__;return ts?c[s]!==n:Oe.call(c,s)}l(lM,"hashHas");function cM(s,c){var d=this.__data__;return this.size+=this.has(s)?0:1,d[s]=ts&&c===n?a:c,this}l(cM,"hashSet"),wn.prototype.clear=sM,wn.prototype.delete=oM,wn.prototype.get=aM,wn.prototype.has=lM,wn.prototype.set=cM;function Tr(s){var c=-1,d=s==null?0:s.length;for(this.clear();++c<d;){var m=s[c];this.set(m[0],m[1])}}l(Tr,"ListCache");function uM(){this.__data__=[],this.size=0}l(uM,"listCacheClear");function fM(s){var c=this.__data__,d=Bo(c,s);if(d<0)return!1;var m=c.length-1;return d==m?c.pop():_o.call(c,d,1),--this.size,!0}l(fM,"listCacheDelete");function hM(s){var c=this.__data__,d=Bo(c,s);return d<0?n:c[d][1]}l(hM,"listCacheGet");function dM(s){return Bo(this.__data__,s)>-1}l(dM,"listCacheHas");function pM(s,c){var d=this.__data__,m=Bo(d,s);return m<0?(++this.size,d.push([s,c])):d[m][1]=c,this}l(pM,"listCacheSet"),Tr.prototype.clear=uM,Tr.prototype.delete=fM,Tr.prototype.get=hM,Tr.prototype.has=dM,Tr.prototype.set=pM;function Ir(s){var c=-1,d=s==null?0:s.length;for(this.clear();++c<d;){var m=s[c];this.set(m[0],m[1])}}l(Ir,"MapCache");function mM(){this.size=0,this.__data__={hash:new wn,map:new(Qi||Tr),string:new wn}}l(mM,"mapCacheClear");function gM(s){var c=Jo(this,s).delete(s);return this.size-=c?1:0,c}l(gM,"mapCacheDelete");function yM(s){return Jo(this,s).get(s)}l(yM,"mapCacheGet");function bM(s){return Jo(this,s).has(s)}l(bM,"mapCacheHas");function vM(s,c){var d=Jo(this,s),m=d.size;return d.set(s,c),this.size+=d.size==m?0:1,this}l(vM,"mapCacheSet"),Ir.prototype.clear=mM,Ir.prototype.delete=gM,Ir.prototype.get=yM,Ir.prototype.has=bM,Ir.prototype.set=vM;function Sn(s){var c=-1,d=s==null?0:s.length;for(this.__data__=new Ir;++c<d;)this.add(s[c])}l(Sn,"SetCache");function wM(s){return this.__data__.set(s,a),this}l(wM,"setCacheAdd");function SM(s){return this.__data__.has(s)}l(SM,"setCacheHas"),Sn.prototype.add=Sn.prototype.push=wM,Sn.prototype.has=SM;function Qt(s){var c=this.__data__=new Tr(s);this.size=c.size}l(Qt,"Stack");function EM(){this.__data__=new Tr,this.size=0}l(EM,"stackClear");function CM(s){var c=this.__data__,d=c.delete(s);return this.size=c.size,d}l(CM,"stackDelete");function xM(s){return this.__data__.get(s)}l(xM,"stackGet");function MM(s){return this.__data__.has(s)}l(MM,"stackHas");function TM(s,c){var d=this.__data__;if(d instanceof Tr){var m=d.__data__;if(!Qi||m.length<t-1)return m.push([s,c]),this.size=++d.size,this;d=this.__data__=new Ir(m)}return d.set(s,c),this.size=d.size,this}l(TM,"stackSet"),Qt.prototype.clear=EM,Qt.prototype.delete=CM,Qt.prototype.get=xM,Qt.prototype.has=MM,Qt.prototype.set=TM;function bm(s,c){var d=ce(s),m=!d&&Tn(s),b=!d&&!m&&tn(s),x=!d&&!m&&!b&&ei(s),I=d||m||b||x,R=I?yu(s.length,Px):[],L=R.length;for(var F in s)(c||Oe.call(s,F))&&!(I&&(F=="length"||b&&(F=="offset"||F=="parent")||x&&(F=="buffer"||F=="byteLength"||F=="byteOffset")||Lr(F,L)))&&R.push(F);return R}l(bm,"arrayLikeKeys");function vm(s){var c=s.length;return c?s[Du(0,c-1)]:n}l(vm,"arraySample");function IM(s,c){return Qo(Rt(s),En(c,0,s.length))}l(IM,"arraySampleSize");function RM(s){return Qo(Rt(s))}l(RM,"arrayShuffle");function xu(s,c,d){(d!==n&&!er(s[c],d)||d===n&&!(c in s))&&Rr(s,c,d)}l(xu,"assignMergeValue");function ns(s,c,d){var m=s[c];(!(Oe.call(s,c)&&er(m,d))||d===n&&!(c in s))&&Rr(s,c,d)}l(ns,"assignValue");function Bo(s,c){for(var d=s.length;d--;)if(er(s[d][0],c))return d;return-1}l(Bo,"assocIndexOf");function AM(s,c,d,m){return Zr(s,function(b,x,I){c(m,b,d(b),I)}),m}l(AM,"baseAggregator");function wm(s,c){return s&&cr(c,ht(c),s)}l(wm,"baseAssign");function OM(s,c){return s&&cr(c,Ot(c),s)}l(OM,"baseAssignIn");function Rr(s,c,d){c=="__proto__"&&Do?Do(s,c,{configurable:!0,enumerable:!0,value:d,writable:!0}):s[c]=d}l(Rr,"baseAssignValue");function Mu(s,c){for(var d=-1,m=c.length,b=_(m),x=s==null;++d<m;)b[d]=x?n:of(s,c[d]);return b}l(Mu,"baseAt");function En(s,c,d){return s===s&&(d!==n&&(s=s<=d?s:d),c!==n&&(s=s>=c?s:c)),s}l(En,"baseClamp");function jt(s,c,d,m,b,x){var I,R=c&h,L=c&p,F=c&g;if(d&&(I=b?d(s,m,b,x):d(s)),I!==n)return I;if(!et(s))return s;var $=ce(s);if($){if(I=b0(s),!R)return Rt(s,I)}else{var H=bt(s),K=H==Mr||H==Me;if(tn(s))return Gm(s,R);if(H==at||H==ut||K&&!b){if(I=L||K?{}:cg(s),!R)return L?a0(s,OM(I,s)):o0(s,wm(I,s))}else{if(!Fe[H])return b?s:{};I=v0(s,H,R)}}x||(x=new Qt);var te=x.get(s);if(te)return te;x.set(s,I),$g(s)?s.forEach(function(oe){I.add(jt(oe,c,d,oe,s,x))}):Pg(s)&&s.forEach(function(oe,ye){I.set(ye,jt(oe,c,d,ye,s,x))});var se=F?L?zu:Gu:L?Ot:ht,de=$?n:se(s);return Ut(de||s,function(oe,ye){de&&(ye=oe,oe=s[ye]),ns(I,ye,jt(oe,c,d,ye,s,x))}),I}l(jt,"baseClone");function LM(s){var c=ht(s);return function(d){return Sm(d,s,c)}}l(LM,"baseConforms");function Sm(s,c,d){var m=d.length;if(s==null)return!m;for(s=Pe(s);m--;){var b=d[m],x=c[b],I=s[b];if(I===n&&!(b in s)||!x(I))return!1}return!0}l(Sm,"baseConformsTo");function Em(s,c,d){if(typeof s!="function")throw new Gt(i);return us(function(){s.apply(n,d)},c)}l(Em,"baseDelay");function is(s,c,d,m){var b=-1,x=Co,I=!0,R=s.length,L=[],F=c.length;if(!R)return L;d&&(c=Ke(c,kt(d))),m?(x=fu,I=!1):c.length>=t&&(x=Zi,I=!1,c=new Sn(c));e:for(;++b<R;){var $=s[b],H=d==null?$:d($);if($=m||$!==0?$:0,I&&H===H){for(var K=F;K--;)if(c[K]===H)continue e;L.push($)}else x(c,H,m)||L.push($)}return L}l(is,"baseDifference");var Zr=Km(lr),Cm=Km(Iu,!0);function NM(s,c){var d=!0;return Zr(s,function(m,b,x){return d=!!c(m,b,x),d}),d}l(NM,"baseEvery");function Wo(s,c,d){for(var m=-1,b=s.length;++m<b;){var x=s[m],I=c(x);if(I!=null&&(R===n?I===I&&!Ft(I):d(I,R)))var R=I,L=x}return L}l(Wo,"baseExtremum");function _M(s,c,d,m){var b=s.length;for(d=fe(d),d<0&&(d=-d>b?0:b+d),m=m===n||m>b?b:fe(m),m<0&&(m+=b),m=d>m?0:Bg(m);d<m;)s[d++]=c;return s}l(_M,"baseFill");function xm(s,c){var d=[];return Zr(s,function(m,b,x){c(m,b,x)&&d.push(m)}),d}l(xm,"baseFilter");function pt(s,c,d,m,b){var x=-1,I=s.length;for(d||(d=S0),b||(b=[]);++x<I;){var R=s[x];c>0&&d(R)?c>1?pt(R,c-1,d,m,b):qr(b,R):m||(b[b.length]=R)}return b}l(pt,"baseFlatten");var Tu=Xm(),Mm=Xm(!0);function lr(s,c){return s&&Tu(s,c,ht)}l(lr,"baseForOwn");function Iu(s,c){return s&&Mm(s,c,ht)}l(Iu,"baseForOwnRight");function Vo(s,c){return jr(c,function(d){return Nr(s[d])})}l(Vo,"baseFunctions");function Cn(s,c){c=Qr(c,s);for(var d=0,m=c.length;s!=null&&d<m;)s=s[ur(c[d++])];return d&&d==m?s:n}l(Cn,"baseGet");function Tm(s,c,d){var m=c(s);return ce(s)?m:qr(m,d(s))}l(Tm,"baseGetAllKeys");function Et(s){return s==null?s===n?lC:Ye:vn&&vn in Pe(s)?m0(s):R0(s)}l(Et,"baseGetTag");function Ru(s,c){return s>c}l(Ru,"baseGt");function DM(s,c){return s!=null&&Oe.call(s,c)}l(DM,"baseHas");function kM(s,c){return s!=null&&c in Pe(s)}l(kM,"baseHasIn");function PM(s,c,d){return s>=yt(c,d)&&s<ct(c,d)}l(PM,"baseInRange");function Au(s,c,d){for(var m=d?fu:Co,b=s[0].length,x=s.length,I=x,R=_(x),L=1/0,F=[];I--;){var $=s[I];I&&c&&($=Ke($,kt(c))),L=yt($.length,L),R[I]=!d&&(c||b>=120&&$.length>=120)?new Sn(I&&$):n}$=s[0];var H=-1,K=R[0];e:for(;++H<b&&F.length<L;){var te=$[H],se=c?c(te):te;if(te=d||te!==0?te:0,!(K?Zi(K,se):m(F,se,d))){for(I=x;--I;){var de=R[I];if(!(de?Zi(de,se):m(s[I],se,d)))continue e}K&&K.push(se),F.push(te)}}return F}l(Au,"baseIntersection");function FM(s,c,d,m){return lr(s,function(b,x,I){c(m,d(b),x,I)}),m}l(FM,"baseInverter");function ss(s,c,d){c=Qr(c,s),s=dg(s,c);var m=s==null?s:s[ur(Yt(c))];return m==null?n:Dt(m,s,d)}l(ss,"baseInvoke");function Im(s){return rt(s)&&Et(s)==ut}l(Im,"baseIsArguments");function $M(s){return rt(s)&&Et(s)==Xi}l($M,"baseIsArrayBuffer");function HM(s){return rt(s)&&Et(s)==_t}l(HM,"baseIsDate");function os(s,c,d,m,b){return s===c?!0:s==null||c==null||!rt(s)&&!rt(c)?s!==s&&c!==c:BM(s,c,d,m,os,b)}l(os,"baseIsEqual");function BM(s,c,d,m,b,x){var I=ce(s),R=ce(c),L=I?ot:bt(s),F=R?ot:bt(c);L=L==ut?at:L,F=F==ut?at:F;var $=L==at,H=F==at,K=L==F;if(K&&tn(s)){if(!tn(c))return!1;I=!0,$=!1}if(K&&!$)return x||(x=new Qt),I||ei(s)?og(s,c,d,m,b,x):d0(s,c,L,d,m,b,x);if(!(d&y)){var te=$&&Oe.call(s,"__wrapped__"),se=H&&Oe.call(c,"__wrapped__");if(te||se){var de=te?s.value():s,oe=se?c.value():c;return x||(x=new Qt),b(de,oe,d,m,x)}}return K?(x||(x=new Qt),p0(s,c,d,m,b,x)):!1}l(BM,"baseIsEqualDeep");function WM(s){return rt(s)&&bt(s)==Qe}l(WM,"baseIsMap");function Ou(s,c,d,m){var b=d.length,x=b,I=!m;if(s==null)return!x;for(s=Pe(s);b--;){var R=d[b];if(I&&R[2]?R[1]!==s[R[0]]:!(R[0]in s))return!1}for(;++b<x;){R=d[b];var L=R[0],F=s[L],$=R[1];if(I&&R[2]){if(F===n&&!(L in s))return!1}else{var H=new Qt;if(m)var K=m(F,$,L,s,c,H);if(!(K===n?os($,F,y|w,m,H):K))return!1}}return!0}l(Ou,"baseIsMatch");function Rm(s){if(!et(s)||C0(s))return!1;var c=Nr(s)?Wx:LC;return c.test(Mn(s))}l(Rm,"baseIsNative");function VM(s){return rt(s)&&Et(s)==qi}l(VM,"baseIsRegExp");function UM(s){return rt(s)&&bt(s)==Zt}l(UM,"baseIsSet");function GM(s){return rt(s)&&sa(s.length)&&!!We[Et(s)]}l(GM,"baseIsTypedArray");function Am(s){return typeof s=="function"?s:s==null?Lt:typeof s=="object"?ce(s)?Nm(s[0],s[1]):Lm(s):Zg(s)}l(Am,"baseIteratee");function Lu(s){if(!cs(s))return qx(s);var c=[];for(var d in Pe(s))Oe.call(s,d)&&d!="constructor"&&c.push(d);return c}l(Lu,"baseKeys");function zM(s){if(!et(s))return I0(s);var c=cs(s),d=[];for(var m in s)m=="constructor"&&(c||!Oe.call(s,m))||d.push(m);return d}l(zM,"baseKeysIn");function Nu(s,c){return s<c}l(Nu,"baseLt");function Om(s,c){var d=-1,m=At(s)?_(s.length):[];return Zr(s,function(b,x,I){m[++d]=c(b,x,I)}),m}l(Om,"baseMap");function Lm(s){var c=qu(s);return c.length==1&&c[0][2]?fg(c[0][0],c[0][1]):function(d){return d===s||Ou(d,s,c)}}l(Lm,"baseMatches");function Nm(s,c){return Ku(s)&&ug(c)?fg(ur(s),c):function(d){var m=of(d,s);return m===n&&m===c?af(d,s):os(c,m,y|w)}}l(Nm,"baseMatchesProperty");function Uo(s,c,d,m,b){s!==c&&Tu(c,function(x,I){if(b||(b=new Qt),et(x))jM(s,c,I,d,Uo,m,b);else{var R=m?m(Zu(s,I),x,I+"",s,c,b):n;R===n&&(R=x),xu(s,I,R)}},Ot)}l(Uo,"baseMerge");function jM(s,c,d,m,b,x,I){var R=Zu(s,d),L=Zu(c,d),F=I.get(L);if(F){xu(s,d,F);return}var $=x?x(R,L,d+"",s,c,I):n,H=$===n;if(H){var K=ce(L),te=!K&&tn(L),se=!K&&!te&&ei(L);$=L,K||te||se?ce(R)?$=R:it(R)?$=Rt(R):te?(H=!1,$=Gm(L,!0)):se?(H=!1,$=zm(L,!0)):$=[]:fs(L)||Tn(L)?($=R,Tn(R)?$=Wg(R):(!et(R)||Nr(R))&&($=cg(L))):H=!1}H&&(I.set(L,$),b($,L,m,x,I),I.delete(L)),xu(s,d,$)}l(jM,"baseMergeDeep");function _m(s,c){var d=s.length;if(d)return c+=c<0?d:0,Lr(c,d)?s[c]:n}l(_m,"baseNth");function Dm(s,c,d){c.length?c=Ke(c,function(x){return ce(x)?function(I){return Cn(I,x.length===1?x[0]:x)}:x}):c=[Lt];var m=-1;c=Ke(c,kt(ie()));var b=Om(s,function(x,I,R){var L=Ke(c,function(F){return F(x)});return{criteria:L,index:++m,value:x}});return vx(b,function(x,I){return s0(x,I,d)})}l(Dm,"baseOrderBy");function qM(s,c){return km(s,c,function(d,m){return af(s,m)})}l(qM,"basePick");function km(s,c,d){for(var m=-1,b=c.length,x={};++m<b;){var I=c[m],R=Cn(s,I);d(R,I)&&as(x,Qr(I,s),R)}return x}l(km,"basePickBy");function YM(s){return function(c){return Cn(c,s)}}l(YM,"basePropertyDeep");function _u(s,c,d,m){var b=m?bx:Gn,x=-1,I=c.length,R=s;for(s===c&&(c=Rt(c)),d&&(R=Ke(s,kt(d)));++x<I;)for(var L=0,F=c[x],$=d?d(F):F;(L=b(R,$,L,m))>-1;)R!==s&&_o.call(R,L,1),_o.call(s,L,1);return s}l(_u,"basePullAll");function Pm(s,c){for(var d=s?c.length:0,m=d-1;d--;){var b=c[d];if(d==m||b!==x){var x=b;Lr(b)?_o.call(s,b,1):Fu(s,b)}}return s}l(Pm,"basePullAt");function Du(s,c){return s+Po(gm()*(c-s+1))}l(Du,"baseRandom");function KM(s,c,d,m){for(var b=-1,x=ct(ko((c-s)/(d||1)),0),I=_(x);x--;)I[m?x:++b]=s,s+=d;return I}l(KM,"baseRange");function ku(s,c){var d="";if(!s||c<1||c>Y)return d;do c%2&&(d+=s),c=Po(c/2),c&&(s+=s);while(c);return d}l(ku,"baseRepeat");function me(s,c){return Ju(hg(s,c,Lt),s+"")}l(me,"baseRest");function XM(s){return vm(ti(s))}l(XM,"baseSample");function ZM(s,c){var d=ti(s);return Qo(d,En(c,0,d.length))}l(ZM,"baseSampleSize");function as(s,c,d,m){if(!et(s))return s;c=Qr(c,s);for(var b=-1,x=c.length,I=x-1,R=s;R!=null&&++b<x;){var L=ur(c[b]),F=d;if(L==="__proto__"||L==="constructor"||L==="prototype")return s;if(b!=I){var $=R[L];F=m?m($,L,R):n,F===n&&(F=et($)?$:Lr(c[b+1])?[]:{})}ns(R,L,F),R=R[L]}return s}l(as,"baseSet");var Fm=Fo?function(s,c){return Fo.set(s,c),s}:Lt,JM=Do?function(s,c){return Do(s,"toString",{configurable:!0,enumerable:!1,value:cf(c),writable:!0})}:Lt;function QM(s){return Qo(ti(s))}l(QM,"baseShuffle");function qt(s,c,d){var m=-1,b=s.length;c<0&&(c=-c>b?0:b+c),d=d>b?b:d,d<0&&(d+=b),b=c>d?0:d-c>>>0,c>>>=0;for(var x=_(b);++m<b;)x[m]=s[m+c];return x}l(qt,"baseSlice");function e0(s,c){var d;return Zr(s,function(m,b,x){return d=c(m,b,x),!d}),!!d}l(e0,"baseSome");function Go(s,c,d){var m=0,b=s==null?m:s.length;if(typeof c=="number"&&c===c&&b<=ge){for(;m<b;){var x=m+b>>>1,I=s[x];I!==null&&!Ft(I)&&(d?I<=c:I<c)?m=x+1:b=x}return b}return Pu(s,c,Lt,d)}l(Go,"baseSortedIndex");function Pu(s,c,d,m){var b=0,x=s==null?0:s.length;if(x===0)return 0;c=d(c);for(var I=c!==c,R=c===null,L=Ft(c),F=c===n;b<x;){var $=Po((b+x)/2),H=d(s[$]),K=H!==n,te=H===null,se=H===H,de=Ft(H);if(I)var oe=m||se;else F?oe=se&&(m||K):R?oe=se&&K&&(m||!te):L?oe=se&&K&&!te&&(m||!de):te||de?oe=!1:oe=m?H<=c:H<c;oe?b=$+1:x=$}return yt(x,Cr)}l(Pu,"baseSortedIndexBy");function $m(s,c){for(var d=-1,m=s.length,b=0,x=[];++d<m;){var I=s[d],R=c?c(I):I;if(!d||!er(R,L)){var L=R;x[b++]=I===0?0:I}}return x}l($m,"baseSortedUniq");function Hm(s){return typeof s=="number"?s:Ft(s)?Ae:+s}l(Hm,"baseToNumber");function Pt(s){if(typeof s=="string")return s;if(ce(s))return Ke(s,Pt)+"";if(Ft(s))return ym?ym.call(s):"";var c=s+"";return c=="0"&&1/s==-X?"-0":c}l(Pt,"baseToString");function Jr(s,c,d){var m=-1,b=Co,x=s.length,I=!0,R=[],L=R;if(d)I=!1,b=fu;else if(x>=t){var F=c?null:f0(s);if(F)return Mo(F);I=!1,b=Zi,L=new Sn}else L=c?[]:R;e:for(;++m<x;){var $=s[m],H=c?c($):$;if($=d||$!==0?$:0,I&&H===H){for(var K=L.length;K--;)if(L[K]===H)continue e;c&&L.push(H),R.push($)}else b(L,H,d)||(L!==R&&L.push(H),R.push($))}return R}l(Jr,"baseUniq");function Fu(s,c){return c=Qr(c,s),s=dg(s,c),s==null||delete s[ur(Yt(c))]}l(Fu,"baseUnset");function Bm(s,c,d,m){return as(s,c,d(Cn(s,c)),m)}l(Bm,"baseUpdate");function zo(s,c,d,m){for(var b=s.length,x=m?b:-1;(m?x--:++x<b)&&c(s[x],x,s););return d?qt(s,m?0:x,m?x+1:b):qt(s,m?x+1:0,m?b:x)}l(zo,"baseWhile");function Wm(s,c){var d=s;return d instanceof be&&(d=d.value()),hu(c,function(m,b){return b.func.apply(b.thisArg,qr([m],b.args))},d)}l(Wm,"baseWrapperValue");function $u(s,c,d){var m=s.length;if(m<2)return m?Jr(s[0]):[];for(var b=-1,x=_(m);++b<m;)for(var I=s[b],R=-1;++R<m;)R!=b&&(x[b]=is(x[b]||I,s[R],c,d));return Jr(pt(x,1),c,d)}l($u,"baseXor");function Vm(s,c,d){for(var m=-1,b=s.length,x=c.length,I={};++m<b;){var R=m<x?c[m]:n;d(I,s[m],R)}return I}l(Vm,"baseZipObject");function Hu(s){return it(s)?s:[]}l(Hu,"castArrayLikeObject");function Bu(s){return typeof s=="function"?s:Lt}l(Bu,"castFunction");function Qr(s,c){return ce(s)?s:Ku(s,c)?[s]:yg(Re(s))}l(Qr,"castPath");var t0=me;function en(s,c,d){var m=s.length;return d=d===n?m:d,!c&&d>=m?s:qt(s,c,d)}l(en,"castSlice");var Um=Vx||function(s){return ft.clearTimeout(s)};function Gm(s,c){if(c)return s.slice();var d=s.length,m=fm?fm(d):new s.constructor(d);return s.copy(m),m}l(Gm,"cloneBuffer");function Wu(s){var c=new s.constructor(s.byteLength);return new Lo(c).set(new Lo(s)),c}l(Wu,"cloneArrayBuffer");function r0(s,c){var d=c?Wu(s.buffer):s.buffer;return new s.constructor(d,s.byteOffset,s.byteLength)}l(r0,"cloneDataView");function n0(s){var c=new s.constructor(s.source,Ip.exec(s));return c.lastIndex=s.lastIndex,c}l(n0,"cloneRegExp");function i0(s){return rs?Pe(rs.call(s)):{}}l(i0,"cloneSymbol");function zm(s,c){var d=c?Wu(s.buffer):s.buffer;return new s.constructor(d,s.byteOffset,s.length)}l(zm,"cloneTypedArray");function jm(s,c){if(s!==c){var d=s!==n,m=s===null,b=s===s,x=Ft(s),I=c!==n,R=c===null,L=c===c,F=Ft(c);if(!R&&!F&&!x&&s>c||x&&I&&L&&!R&&!F||m&&I&&L||!d&&L||!b)return 1;if(!m&&!x&&!F&&s<c||F&&d&&b&&!m&&!x||R&&d&&b||!I&&b||!L)return-1}return 0}l(jm,"compareAscending");function s0(s,c,d){for(var m=-1,b=s.criteria,x=c.criteria,I=b.length,R=d.length;++m<I;){var L=jm(b[m],x[m]);if(L){if(m>=R)return L;var F=d[m];return L*(F=="desc"?-1:1)}}return s.index-c.index}l(s0,"compareMultiple");function qm(s,c,d,m){for(var b=-1,x=s.length,I=d.length,R=-1,L=c.length,F=ct(x-I,0),$=_(L+F),H=!m;++R<L;)$[R]=c[R];for(;++b<I;)(H||b<x)&&($[d[b]]=s[b]);for(;F--;)$[R++]=s[b++];return $}l(qm,"composeArgs");function Ym(s,c,d,m){for(var b=-1,x=s.length,I=-1,R=d.length,L=-1,F=c.length,$=ct(x-R,0),H=_($+F),K=!m;++b<$;)H[b]=s[b];for(var te=b;++L<F;)H[te+L]=c[L];for(;++I<R;)(K||b<x)&&(H[te+d[I]]=s[b++]);return H}l(Ym,"composeArgsRight");function Rt(s,c){var d=-1,m=s.length;for(c||(c=_(m));++d<m;)c[d]=s[d];return c}l(Rt,"copyArray");function cr(s,c,d,m){var b=!d;d||(d={});for(var x=-1,I=c.length;++x<I;){var R=c[x],L=m?m(d[R],s[R],R,d,s):n;L===n&&(L=s[R]),b?Rr(d,R,L):ns(d,R,L)}return d}l(cr,"copyObject");function o0(s,c){return cr(s,Yu(s),c)}l(o0,"copySymbols");function a0(s,c){return cr(s,ag(s),c)}l(a0,"copySymbolsIn");function jo(s,c){return function(d,m){var b=ce(d)?hx:AM,x=c?c():{};return b(d,s,ie(m,2),x)}}l(jo,"createAggregator");function Zn(s){return me(function(c,d){var m=-1,b=d.length,x=b>1?d[b-1]:n,I=b>2?d[2]:n;for(x=s.length>3&&typeof x=="function"?(b--,x):n,I&&Ct(d[0],d[1],I)&&(x=b<3?n:x,b=1),c=Pe(c);++m<b;){var R=d[m];R&&s(c,R,m,x)}return c})}l(Zn,"createAssigner");function Km(s,c){return function(d,m){if(d==null)return d;if(!At(d))return s(d,m);for(var b=d.length,x=c?b:-1,I=Pe(d);(c?x--:++x<b)&&m(I[x],x,I)!==!1;);return d}}l(Km,"createBaseEach");function Xm(s){return function(c,d,m){for(var b=-1,x=Pe(c),I=m(c),R=I.length;R--;){var L=I[s?R:++b];if(d(x[L],L,x)===!1)break}return c}}l(Xm,"createBaseFor");function l0(s,c,d){var m=c&S,b=ls(s);function x(){var I=this&&this!==ft&&this instanceof x?b:s;return I.apply(m?d:this,arguments)}return l(x,"wrapper"),x}l(l0,"createBind");function Zm(s){return function(c){c=Re(c);var d=zn(c)?Jt(c):n,m=d?d[0]:c.charAt(0),b=d?en(d,1).join(""):c.slice(1);return m[s]()+b}}l(Zm,"createCaseFirst");function Jn(s){return function(c){return hu(Kg(Yg(c).replace(JC,"")),s,"")}}l(Jn,"createCompounder");function ls(s){return function(){var c=arguments;switch(c.length){case 0:return new s;case 1:return new s(c[0]);case 2:return new s(c[0],c[1]);case 3:return new s(c[0],c[1],c[2]);case 4:return new s(c[0],c[1],c[2],c[3]);case 5:return new s(c[0],c[1],c[2],c[3],c[4]);case 6:return new s(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new s(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var d=Xn(s.prototype),m=s.apply(d,c);return et(m)?m:d}}l(ls,"createCtor");function c0(s,c,d){var m=ls(s);function b(){for(var x=arguments.length,I=_(x),R=x,L=Qn(b);R--;)I[R]=arguments[R];var F=x<3&&I[0]!==L&&I[x-1]!==L?[]:Yr(I,L);if(x-=F.length,x<d)return rg(s,c,qo,b.placeholder,n,I,F,n,n,d-x);var $=this&&this!==ft&&this instanceof b?m:s;return Dt($,this,I)}return l(b,"wrapper"),b}l(c0,"createCurry");function Jm(s){return function(c,d,m){var b=Pe(c);if(!At(c)){var x=ie(d,3);c=ht(c),d=l(function(R){return x(b[R],R,b)},"predicate")}var I=s(c,d,m);return I>-1?b[x?c[I]:I]:n}}l(Jm,"createFind");function Qm(s){return Or(function(c){var d=c.length,m=d,b=zt.prototype.thru;for(s&&c.reverse();m--;){var x=c[m];if(typeof x!="function")throw new Gt(i);if(b&&!I&&Zo(x)=="wrapper")var I=new zt([],!0)}for(m=I?m:d;++m<d;){x=c[m];var R=Zo(x),L=R=="wrapper"?ju(x):n;L&&Xu(L[0])&&L[1]==(U|M|T|G)&&!L[4].length&&L[9]==1?I=I[Zo(L[0])].apply(I,L[3]):I=x.length==1&&Xu(x)?I[R]():I.thru(x)}return function(){var F=arguments,$=F[0];if(I&&F.length==1&&ce($))return I.plant($).value();for(var H=0,K=d?c[H].apply(this,F):$;++H<d;)K=c[H].call(this,K);return K}})}l(Qm,"createFlow");function qo(s,c,d,m,b,x,I,R,L,F){var $=c&U,H=c&S,K=c&E,te=c&(M|A),se=c&Q,de=K?n:ls(s);function oe(){for(var ye=arguments.length,Se=_(ye),$t=ye;$t--;)Se[$t]=arguments[$t];if(te)var xt=Qn(oe),Ht=Sx(Se,xt);if(m&&(Se=qm(Se,m,b,te)),x&&(Se=Ym(Se,x,I,te)),ye-=Ht,te&&ye<F){var st=Yr(Se,xt);return rg(s,c,qo,oe.placeholder,d,Se,st,R,L,F-ye)}var tr=H?d:this,Dr=K?tr[s]:s;return ye=Se.length,R?Se=A0(Se,R):se&&ye>1&&Se.reverse(),$&&L<ye&&(Se.length=L),this&&this!==ft&&this instanceof oe&&(Dr=de||ls(Dr)),Dr.apply(tr,Se)}return l(oe,"wrapper"),oe}l(qo,"createHybrid");function eg(s,c){return function(d,m){return FM(d,s,c(m),{})}}l(eg,"createInverter");function Yo(s,c){return function(d,m){var b;if(d===n&&m===n)return c;if(d!==n&&(b=d),m!==n){if(b===n)return m;typeof d=="string"||typeof m=="string"?(d=Pt(d),m=Pt(m)):(d=Hm(d),m=Hm(m)),b=s(d,m)}return b}}l(Yo,"createMathOperation");function Vu(s){return Or(function(c){return c=Ke(c,kt(ie())),me(function(d){var m=this;return s(c,function(b){return Dt(b,m,d)})})})}l(Vu,"createOver");function Ko(s,c){c=c===n?" ":Pt(c);var d=c.length;if(d<2)return d?ku(c,s):c;var m=ku(c,ko(s/jn(c)));return zn(c)?en(Jt(m),0,s).join(""):m.slice(0,s)}l(Ko,"createPadding");function u0(s,c,d,m){var b=c&S,x=ls(s);function I(){for(var R=-1,L=arguments.length,F=-1,$=m.length,H=_($+L),K=this&&this!==ft&&this instanceof I?x:s;++F<$;)H[F]=m[F];for(;L--;)H[F++]=arguments[++R];return Dt(K,b?d:this,H)}return l(I,"wrapper"),I}l(u0,"createPartial");function tg(s){return function(c,d,m){return m&&typeof m!="number"&&Ct(c,d,m)&&(d=m=n),c=_r(c),d===n?(d=c,c=0):d=_r(d),m=m===n?c<d?1:-1:_r(m),KM(c,d,m,s)}}l(tg,"createRange");function Xo(s){return function(c,d){return typeof c=="string"&&typeof d=="string"||(c=Kt(c),d=Kt(d)),s(c,d)}}l(Xo,"createRelationalOperation");function rg(s,c,d,m,b,x,I,R,L,F){var $=c&M,H=$?I:n,K=$?n:I,te=$?x:n,se=$?n:x;c|=$?T:N,c&=~($?N:T),c&v||(c&=~(S|E));var de=[s,c,b,te,H,se,K,R,L,F],oe=d.apply(n,de);return Xu(s)&&pg(oe,de),oe.placeholder=m,mg(oe,s,c)}l(rg,"createRecurry");function Uu(s){var c=lt[s];return function(d,m){if(d=Kt(d),m=m==null?0:yt(fe(m),292),m&&mm(d)){var b=(Re(d)+"e").split("e"),x=c(b[0]+"e"+(+b[1]+m));return b=(Re(x)+"e").split("e"),+(b[0]+"e"+(+b[1]-m))}return c(d)}}l(Uu,"createRound");var f0=Yn&&1/Mo(new Yn([,-0]))[1]==X?function(s){return new Yn(s)}:hf;function ng(s){return function(c){var d=bt(c);return d==Qe?vu(c):d==Zt?Rx(c):wx(c,s(c))}}l(ng,"createToPairs");function Ar(s,c,d,m,b,x,I,R){var L=c&E;if(!L&&typeof s!="function")throw new Gt(i);var F=m?m.length:0;if(F||(c&=~(T|N),m=b=n),I=I===n?I:ct(fe(I),0),R=R===n?R:fe(R),F-=b?b.length:0,c&N){var $=m,H=b;m=b=n}var K=L?n:ju(s),te=[s,c,d,m,b,$,H,x,I,R];if(K&&T0(te,K),s=te[0],c=te[1],d=te[2],m=te[3],b=te[4],R=te[9]=te[9]===n?L?0:s.length:ct(te[9]-F,0),!R&&c&(M|A)&&(c&=~(M|A)),!c||c==S)var se=l0(s,c,d);else c==M||c==A?se=c0(s,c,R):(c==T||c==(S|T))&&!b.length?se=u0(s,c,d,m):se=qo.apply(n,te);var de=K?Fm:pg;return mg(de(se,te),s,c)}l(Ar,"createWrap");function ig(s,c,d,m){return s===n||er(s,qn[d])&&!Oe.call(m,d)?c:s}l(ig,"customDefaultsAssignIn");function sg(s,c,d,m,b,x){return et(s)&&et(c)&&(x.set(c,s),Uo(s,c,n,sg,x),x.delete(c)),s}l(sg,"customDefaultsMerge");function h0(s){return fs(s)?n:s}l(h0,"customOmitClone");function og(s,c,d,m,b,x){var I=d&y,R=s.length,L=c.length;if(R!=L&&!(I&&L>R))return!1;var F=x.get(s),$=x.get(c);if(F&&$)return F==c&&$==s;var H=-1,K=!0,te=d&w?new Sn:n;for(x.set(s,c),x.set(c,s);++H<R;){var se=s[H],de=c[H];if(m)var oe=I?m(de,se,H,c,s,x):m(se,de,H,s,c,x);if(oe!==n){if(oe)continue;K=!1;break}if(te){if(!du(c,function(ye,Se){if(!Zi(te,Se)&&(se===ye||b(se,ye,d,m,x)))return te.push(Se)})){K=!1;break}}else if(!(se===de||b(se,de,d,m,x))){K=!1;break}}return x.delete(s),x.delete(c),K}l(og,"equalArrays");function d0(s,c,d,m,b,x,I){switch(d){case Vn:if(s.byteLength!=c.byteLength||s.byteOffset!=c.byteOffset)return!1;s=s.buffer,c=c.buffer;case Xi:return!(s.byteLength!=c.byteLength||!x(new Lo(s),new Lo(c)));case Wt:case _t:case ke:return er(+s,+c);case zr:return s.name==c.name&&s.message==c.message;case qi:case Yi:return s==c+"";case Qe:var R=vu;case Zt:var L=m&y;if(R||(R=Mo),s.size!=c.size&&!L)return!1;var F=I.get(s);if(F)return F==c;m|=w,I.set(s,c);var $=og(R(s),R(c),m,b,x,I);return I.delete(s),$;case vo:if(rs)return rs.call(s)==rs.call(c)}return!1}l(d0,"equalByTag");function p0(s,c,d,m,b,x){var I=d&y,R=Gu(s),L=R.length,F=Gu(c),$=F.length;if(L!=$&&!I)return!1;for(var H=L;H--;){var K=R[H];if(!(I?K in c:Oe.call(c,K)))return!1}var te=x.get(s),se=x.get(c);if(te&&se)return te==c&&se==s;var de=!0;x.set(s,c),x.set(c,s);for(var oe=I;++H<L;){K=R[H];var ye=s[K],Se=c[K];if(m)var $t=I?m(Se,ye,K,c,s,x):m(ye,Se,K,s,c,x);if(!($t===n?ye===Se||b(ye,Se,d,m,x):$t)){de=!1;break}oe||(oe=K=="constructor")}if(de&&!oe){var xt=s.constructor,Ht=c.constructor;xt!=Ht&&"constructor"in s&&"constructor"in c&&!(typeof xt=="function"&&xt instanceof xt&&typeof Ht=="function"&&Ht instanceof Ht)&&(de=!1)}return x.delete(s),x.delete(c),de}l(p0,"equalObjects");function Or(s){return Ju(hg(s,n,Sg),s+"")}l(Or,"flatRest");function Gu(s){return Tm(s,ht,Yu)}l(Gu,"getAllKeys");function zu(s){return Tm(s,Ot,ag)}l(zu,"getAllKeysIn");var ju=Fo?function(s){return Fo.get(s)}:hf;function Zo(s){for(var c=s.name+"",d=Kn[c],m=Oe.call(Kn,c)?d.length:0;m--;){var b=d[m],x=b.func;if(x==null||x==s)return b.name}return c}l(Zo,"getFuncName");function Qn(s){var c=Oe.call(C,"placeholder")?C:s;return c.placeholder}l(Qn,"getHolder");function ie(){var s=C.iteratee||uf;return s=s===uf?Am:s,arguments.length?s(arguments[0],arguments[1]):s}l(ie,"getIteratee");function Jo(s,c){var d=s.__data__;return E0(c)?d[typeof c=="string"?"string":"hash"]:d.map}l(Jo,"getMapData");function qu(s){for(var c=ht(s),d=c.length;d--;){var m=c[d],b=s[m];c[d]=[m,b,ug(b)]}return c}l(qu,"getMatchData");function xn(s,c){var d=Mx(s,c);return Rm(d)?d:n}l(xn,"getNative");function m0(s){var c=Oe.call(s,vn),d=s[vn];try{s[vn]=n;var m=!0}catch{}var b=Ao.call(s);return m&&(c?s[vn]=d:delete s[vn]),b}l(m0,"getRawTag");var Yu=Su?function(s){return s==null?[]:(s=Pe(s),jr(Su(s),function(c){return dm.call(s,c)}))}:df,ag=Su?function(s){for(var c=[];s;)qr(c,Yu(s)),s=No(s);return c}:df,bt=Et;(Eu&&bt(new Eu(new ArrayBuffer(1)))!=Vn||Qi&&bt(new Qi)!=Qe||Cu&&bt(Cu.resolve())!=Ie||Yn&&bt(new Yn)!=Zt||es&&bt(new es)!=Ki)&&(bt=l(function(s){var c=Et(s),d=c==at?s.constructor:n,m=d?Mn(d):"";if(m)switch(m){case Zx:return Vn;case Jx:return Qe;case Qx:return Ie;case eM:return Zt;case tM:return Ki}return c},"getTag"));function g0(s,c,d){for(var m=-1,b=d.length;++m<b;){var x=d[m],I=x.size;switch(x.type){case"drop":s+=I;break;case"dropRight":c-=I;break;case"take":c=yt(c,s+I);break;case"takeRight":s=ct(s,c-I);break}}return{start:s,end:c}}l(g0,"getView");function y0(s){var c=s.match(CC);return c?c[1].split(xC):[]}l(y0,"getWrapDetails");function lg(s,c,d){c=Qr(c,s);for(var m=-1,b=c.length,x=!1;++m<b;){var I=ur(c[m]);if(!(x=s!=null&&d(s,I)))break;s=s[I]}return x||++m!=b?x:(b=s==null?0:s.length,!!b&&sa(b)&&Lr(I,b)&&(ce(s)||Tn(s)))}l(lg,"hasPath");function b0(s){var c=s.length,d=new s.constructor(c);return c&&typeof s[0]=="string"&&Oe.call(s,"index")&&(d.index=s.index,d.input=s.input),d}l(b0,"initCloneArray");function cg(s){return typeof s.constructor=="function"&&!cs(s)?Xn(No(s)):{}}l(cg,"initCloneObject");function v0(s,c,d){var m=s.constructor;switch(c){case Xi:return Wu(s);case Wt:case _t:return new m(+s);case Vn:return r0(s,d);case qc:case Yc:case Kc:case Xc:case Zc:case Jc:case Qc:case eu:case tu:return zm(s,d);case Qe:return new m;case ke:case Yi:return new m(s);case qi:return n0(s);case Zt:return new m;case vo:return i0(s)}}l(v0,"initCloneByTag");function w0(s,c){var d=c.length;if(!d)return s;var m=d-1;return c[m]=(d>1?"& ":"")+c[m],c=c.join(d>2?", ":" "),s.replace(EC,`{
/* [wrapped with `+c+`] */
`)}l(w0,"insertWrapDetails");function S0(s){return ce(s)||Tn(s)||!!(pm&&s&&s[pm])}l(S0,"isFlattenable");function Lr(s,c){var d=typeof s;return c=c??Y,!!c&&(d=="number"||d!="symbol"&&_C.test(s))&&s>-1&&s%1==0&&s<c}l(Lr,"isIndex");function Ct(s,c,d){if(!et(d))return!1;var m=typeof c;return(m=="number"?At(d)&&Lr(c,d.length):m=="string"&&c in d)?er(d[c],s):!1}l(Ct,"isIterateeCall");function Ku(s,c){if(ce(s))return!1;var d=typeof s;return d=="number"||d=="symbol"||d=="boolean"||s==null||Ft(s)?!0:bC.test(s)||!yC.test(s)||c!=null&&s in Pe(c)}l(Ku,"isKey");function E0(s){var c=typeof s;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?s!=="__proto__":s===null}l(E0,"isKeyable");function Xu(s){var c=Zo(s),d=C[c];if(typeof d!="function"||!(c in be.prototype))return!1;if(s===d)return!0;var m=ju(d);return!!m&&s===m[0]}l(Xu,"isLaziable");function C0(s){return!!um&&um in s}l(C0,"isMasked");var x0=Io?Nr:pf;function cs(s){var c=s&&s.constructor,d=typeof c=="function"&&c.prototype||qn;return s===d}l(cs,"isPrototype");function ug(s){return s===s&&!et(s)}l(ug,"isStrictComparable");function fg(s,c){return function(d){return d==null?!1:d[s]===c&&(c!==n||s in Pe(d))}}l(fg,"matchesStrictComparable");function M0(s){var c=na(s,function(m){return d.size===u&&d.clear(),m}),d=c.cache;return c}l(M0,"memoizeCapped");function T0(s,c){var d=s[1],m=c[1],b=d|m,x=b<(S|E|U),I=m==U&&d==M||m==U&&d==G&&s[7].length<=c[8]||m==(U|G)&&c[7].length<=c[8]&&d==M;if(!(x||I))return s;m&S&&(s[2]=c[2],b|=d&S?0:v);var R=c[3];if(R){var L=s[3];s[3]=L?qm(L,R,c[4]):R,s[4]=L?Yr(s[3],f):c[4]}return R=c[5],R&&(L=s[5],s[5]=L?Ym(L,R,c[6]):R,s[6]=L?Yr(s[5],f):c[6]),R=c[7],R&&(s[7]=R),m&U&&(s[8]=s[8]==null?c[8]:yt(s[8],c[8])),s[9]==null&&(s[9]=c[9]),s[0]=c[0],s[1]=b,s}l(T0,"mergeData");function I0(s){var c=[];if(s!=null)for(var d in Pe(s))c.push(d);return c}l(I0,"nativeKeysIn");function R0(s){return Ao.call(s)}l(R0,"objectToString");function hg(s,c,d){return c=ct(c===n?s.length-1:c,0),function(){for(var m=arguments,b=-1,x=ct(m.length-c,0),I=_(x);++b<x;)I[b]=m[c+b];b=-1;for(var R=_(c+1);++b<c;)R[b]=m[b];return R[c]=d(I),Dt(s,this,R)}}l(hg,"overRest");function dg(s,c){return c.length<2?s:Cn(s,qt(c,0,-1))}l(dg,"parent");function A0(s,c){for(var d=s.length,m=yt(c.length,d),b=Rt(s);m--;){var x=c[m];s[m]=Lr(x,d)?b[x]:n}return s}l(A0,"reorder");function Zu(s,c){if(!(c==="constructor"&&typeof s[c]=="function")&&c!="__proto__")return s[c]}l(Zu,"safeGet");var pg=gg(Fm),us=Gx||function(s,c){return ft.setTimeout(s,c)},Ju=gg(JM);function mg(s,c,d){var m=c+"";return Ju(s,w0(m,O0(y0(m),d)))}l(mg,"setWrapToString");function gg(s){var c=0,d=0;return function(){var m=Yx(),b=B-(m-d);if(d=m,b>0){if(++c>=re)return arguments[0]}else c=0;return s.apply(n,arguments)}}l(gg,"shortOut");function Qo(s,c){var d=-1,m=s.length,b=m-1;for(c=c===n?m:c;++d<c;){var x=Du(d,b),I=s[x];s[x]=s[d],s[d]=I}return s.length=c,s}l(Qo,"shuffleSelf");var yg=M0(function(s){var c=[];return s.charCodeAt(0)===46&&c.push(""),s.replace(vC,function(d,m,b,x){c.push(b?x.replace(IC,"$1"):m||d)}),c});function ur(s){if(typeof s=="string"||Ft(s))return s;var c=s+"";return c=="0"&&1/s==-X?"-0":c}l(ur,"toKey");function Mn(s){if(s!=null){try{return Ro.call(s)}catch{}try{return s+""}catch{}}return""}l(Mn,"toSource");function O0(s,c){return Ut(dt,function(d){var m="_."+d[0];c&d[1]&&!Co(s,m)&&s.push(m)}),s.sort()}l(O0,"updateWrapDetails");function bg(s){if(s instanceof be)return s.clone();var c=new zt(s.__wrapped__,s.__chain__);return c.__actions__=Rt(s.__actions__),c.__index__=s.__index__,c.__values__=s.__values__,c}l(bg,"wrapperClone");function L0(s,c,d){(d?Ct(s,c,d):c===n)?c=1:c=ct(fe(c),0);var m=s==null?0:s.length;if(!m||c<1)return[];for(var b=0,x=0,I=_(ko(m/c));b<m;)I[x++]=qt(s,b,b+=c);return I}l(L0,"chunk");function N0(s){for(var c=-1,d=s==null?0:s.length,m=0,b=[];++c<d;){var x=s[c];x&&(b[m++]=x)}return b}l(N0,"compact");function _0(){var s=arguments.length;if(!s)return[];for(var c=_(s-1),d=arguments[0],m=s;m--;)c[m-1]=arguments[m];return qr(ce(d)?Rt(d):[d],pt(c,1))}l(_0,"concat");var D0=me(function(s,c){return it(s)?is(s,pt(c,1,it,!0)):[]}),k0=me(function(s,c){var d=Yt(c);return it(d)&&(d=n),it(s)?is(s,pt(c,1,it,!0),ie(d,2)):[]}),P0=me(function(s,c){var d=Yt(c);return it(d)&&(d=n),it(s)?is(s,pt(c,1,it,!0),n,d):[]});function F0(s,c,d){var m=s==null?0:s.length;return m?(c=d||c===n?1:fe(c),qt(s,c<0?0:c,m)):[]}l(F0,"drop");function $0(s,c,d){var m=s==null?0:s.length;return m?(c=d||c===n?1:fe(c),c=m-c,qt(s,0,c<0?0:c)):[]}l($0,"dropRight");function H0(s,c){return s&&s.length?zo(s,ie(c,3),!0,!0):[]}l(H0,"dropRightWhile");function B0(s,c){return s&&s.length?zo(s,ie(c,3),!0):[]}l(B0,"dropWhile");function W0(s,c,d,m){var b=s==null?0:s.length;return b?(d&&typeof d!="number"&&Ct(s,c,d)&&(d=0,m=b),_M(s,c,d,m)):[]}l(W0,"fill");function vg(s,c,d){var m=s==null?0:s.length;if(!m)return-1;var b=d==null?0:fe(d);return b<0&&(b=ct(m+b,0)),xo(s,ie(c,3),b)}l(vg,"findIndex");function wg(s,c,d){var m=s==null?0:s.length;if(!m)return-1;var b=m-1;return d!==n&&(b=fe(d),b=d<0?ct(m+b,0):yt(b,m-1)),xo(s,ie(c,3),b,!0)}l(wg,"findLastIndex");function Sg(s){var c=s==null?0:s.length;return c?pt(s,1):[]}l(Sg,"flatten");function V0(s){var c=s==null?0:s.length;return c?pt(s,X):[]}l(V0,"flattenDeep");function U0(s,c){var d=s==null?0:s.length;return d?(c=c===n?1:fe(c),pt(s,c)):[]}l(U0,"flattenDepth");function G0(s){for(var c=-1,d=s==null?0:s.length,m={};++c<d;){var b=s[c];m[b[0]]=b[1]}return m}l(G0,"fromPairs");function Eg(s){return s&&s.length?s[0]:n}l(Eg,"head");function z0(s,c,d){var m=s==null?0:s.length;if(!m)return-1;var b=d==null?0:fe(d);return b<0&&(b=ct(m+b,0)),Gn(s,c,b)}l(z0,"indexOf");function j0(s){var c=s==null?0:s.length;return c?qt(s,0,-1):[]}l(j0,"initial");var q0=me(function(s){var c=Ke(s,Hu);return c.length&&c[0]===s[0]?Au(c):[]}),Y0=me(function(s){var c=Yt(s),d=Ke(s,Hu);return c===Yt(d)?c=n:d.pop(),d.length&&d[0]===s[0]?Au(d,ie(c,2)):[]}),K0=me(function(s){var c=Yt(s),d=Ke(s,Hu);return c=typeof c=="function"?c:n,c&&d.pop(),d.length&&d[0]===s[0]?Au(d,n,c):[]});function X0(s,c){return s==null?"":jx.call(s,c)}l(X0,"join");function Yt(s){var c=s==null?0:s.length;return c?s[c-1]:n}l(Yt,"last");function Z0(s,c,d){var m=s==null?0:s.length;if(!m)return-1;var b=m;return d!==n&&(b=fe(d),b=b<0?ct(m+b,0):yt(b,m-1)),c===c?Ox(s,c,b):xo(s,rm,b,!0)}l(Z0,"lastIndexOf");function J0(s,c){return s&&s.length?_m(s,fe(c)):n}l(J0,"nth");var Q0=me(Cg);function Cg(s,c){return s&&s.length&&c&&c.length?_u(s,c):s}l(Cg,"pullAll");function e1(s,c,d){return s&&s.length&&c&&c.length?_u(s,c,ie(d,2)):s}l(e1,"pullAllBy");function t1(s,c,d){return s&&s.length&&c&&c.length?_u(s,c,n,d):s}l(t1,"pullAllWith");var r1=Or(function(s,c){var d=s==null?0:s.length,m=Mu(s,c);return Pm(s,Ke(c,function(b){return Lr(b,d)?+b:b}).sort(jm)),m});function n1(s,c){var d=[];if(!(s&&s.length))return d;var m=-1,b=[],x=s.length;for(c=ie(c,3);++m<x;){var I=s[m];c(I,m,s)&&(d.push(I),b.push(m))}return Pm(s,b),d}l(n1,"remove");function Qu(s){return s==null?s:Xx.call(s)}l(Qu,"reverse");function i1(s,c,d){var m=s==null?0:s.length;return m?(d&&typeof d!="number"&&Ct(s,c,d)?(c=0,d=m):(c=c==null?0:fe(c),d=d===n?m:fe(d)),qt(s,c,d)):[]}l(i1,"slice");function s1(s,c){return Go(s,c)}l(s1,"sortedIndex");function o1(s,c,d){return Pu(s,c,ie(d,2))}l(o1,"sortedIndexBy");function a1(s,c){var d=s==null?0:s.length;if(d){var m=Go(s,c);if(m<d&&er(s[m],c))return m}return-1}l(a1,"sortedIndexOf");function l1(s,c){return Go(s,c,!0)}l(l1,"sortedLastIndex");function c1(s,c,d){return Pu(s,c,ie(d,2),!0)}l(c1,"sortedLastIndexBy");function u1(s,c){var d=s==null?0:s.length;if(d){var m=Go(s,c,!0)-1;if(er(s[m],c))return m}return-1}l(u1,"sortedLastIndexOf");function f1(s){return s&&s.length?$m(s):[]}l(f1,"sortedUniq");function h1(s,c){return s&&s.length?$m(s,ie(c,2)):[]}l(h1,"sortedUniqBy");function d1(s){var c=s==null?0:s.length;return c?qt(s,1,c):[]}l(d1,"tail");function p1(s,c,d){return s&&s.length?(c=d||c===n?1:fe(c),qt(s,0,c<0?0:c)):[]}l(p1,"take");function m1(s,c,d){var m=s==null?0:s.length;return m?(c=d||c===n?1:fe(c),c=m-c,qt(s,c<0?0:c,m)):[]}l(m1,"takeRight");function g1(s,c){return s&&s.length?zo(s,ie(c,3),!1,!0):[]}l(g1,"takeRightWhile");function y1(s,c){return s&&s.length?zo(s,ie(c,3)):[]}l(y1,"takeWhile");var b1=me(function(s){return Jr(pt(s,1,it,!0))}),v1=me(function(s){var c=Yt(s);return it(c)&&(c=n),Jr(pt(s,1,it,!0),ie(c,2))}),w1=me(function(s){var c=Yt(s);return c=typeof c=="function"?c:n,Jr(pt(s,1,it,!0),n,c)});function S1(s){return s&&s.length?Jr(s):[]}l(S1,"uniq");function E1(s,c){return s&&s.length?Jr(s,ie(c,2)):[]}l(E1,"uniqBy");function C1(s,c){return c=typeof c=="function"?c:n,s&&s.length?Jr(s,n,c):[]}l(C1,"uniqWith");function ef(s){if(!(s&&s.length))return[];var c=0;return s=jr(s,function(d){if(it(d))return c=ct(d.length,c),!0}),yu(c,function(d){return Ke(s,pu(d))})}l(ef,"unzip");function xg(s,c){if(!(s&&s.length))return[];var d=ef(s);return c==null?d:Ke(d,function(m){return Dt(c,n,m)})}l(xg,"unzipWith");var x1=me(function(s,c){return it(s)?is(s,c):[]}),M1=me(function(s){return $u(jr(s,it))}),T1=me(function(s){var c=Yt(s);return it(c)&&(c=n),$u(jr(s,it),ie(c,2))}),I1=me(function(s){var c=Yt(s);return c=typeof c=="function"?c:n,$u(jr(s,it),n,c)}),R1=me(ef);function A1(s,c){return Vm(s||[],c||[],ns)}l(A1,"zipObject");function O1(s,c){return Vm(s||[],c||[],as)}l(O1,"zipObjectDeep");var L1=me(function(s){var c=s.length,d=c>1?s[c-1]:n;return d=typeof d=="function"?(s.pop(),d):n,xg(s,d)});function Mg(s){var c=C(s);return c.__chain__=!0,c}l(Mg,"chain");function N1(s,c){return c(s),s}l(N1,"tap");function ea(s,c){return c(s)}l(ea,"thru");var _1=Or(function(s){var c=s.length,d=c?s[0]:0,m=this.__wrapped__,b=l(function(x){return Mu(x,s)},"interceptor");return c>1||this.__actions__.length||!(m instanceof be)||!Lr(d)?this.thru(b):(m=m.slice(d,+d+(c?1:0)),m.__actions__.push({func:ea,args:[b],thisArg:n}),new zt(m,this.__chain__).thru(function(x){return c&&!x.length&&x.push(n),x}))});function D1(){return Mg(this)}l(D1,"wrapperChain");function k1(){return new zt(this.value(),this.__chain__)}l(k1,"wrapperCommit");function P1(){this.__values__===n&&(this.__values__=Hg(this.value()));var s=this.__index__>=this.__values__.length,c=s?n:this.__values__[this.__index__++];return{done:s,value:c}}l(P1,"wrapperNext");function F1(){return this}l(F1,"wrapperToIterator");function $1(s){for(var c,d=this;d instanceof Ho;){var m=bg(d);m.__index__=0,m.__values__=n,c?b.__wrapped__=m:c=m;var b=m;d=d.__wrapped__}return b.__wrapped__=s,c}l($1,"wrapperPlant");function H1(){var s=this.__wrapped__;if(s instanceof be){var c=s;return this.__actions__.length&&(c=new be(this)),c=c.reverse(),c.__actions__.push({func:ea,args:[Qu],thisArg:n}),new zt(c,this.__chain__)}return this.thru(Qu)}l(H1,"wrapperReverse");function B1(){return Wm(this.__wrapped__,this.__actions__)}l(B1,"wrapperValue");var W1=jo(function(s,c,d){Oe.call(s,d)?++s[d]:Rr(s,d,1)});function V1(s,c,d){var m=ce(s)?em:NM;return d&&Ct(s,c,d)&&(c=n),m(s,ie(c,3))}l(V1,"every");function U1(s,c){var d=ce(s)?jr:xm;return d(s,ie(c,3))}l(U1,"filter");var G1=Jm(vg),z1=Jm(wg);function j1(s,c){return pt(ta(s,c),1)}l(j1,"flatMap");function q1(s,c){return pt(ta(s,c),X)}l(q1,"flatMapDeep");function Y1(s,c,d){return d=d===n?1:fe(d),pt(ta(s,c),d)}l(Y1,"flatMapDepth");function Tg(s,c){var d=ce(s)?Ut:Zr;return d(s,ie(c,3))}l(Tg,"forEach");function Ig(s,c){var d=ce(s)?dx:Cm;return d(s,ie(c,3))}l(Ig,"forEachRight");var K1=jo(function(s,c,d){Oe.call(s,d)?s[d].push(c):Rr(s,d,[c])});function X1(s,c,d,m){s=At(s)?s:ti(s),d=d&&!m?fe(d):0;var b=s.length;return d<0&&(d=ct(b+d,0)),oa(s)?d<=b&&s.indexOf(c,d)>-1:!!b&&Gn(s,c,d)>-1}l(X1,"includes");var Z1=me(function(s,c,d){var m=-1,b=typeof c=="function",x=At(s)?_(s.length):[];return Zr(s,function(I){x[++m]=b?Dt(c,I,d):ss(I,c,d)}),x}),J1=jo(function(s,c,d){Rr(s,d,c)});function ta(s,c){var d=ce(s)?Ke:Om;return d(s,ie(c,3))}l(ta,"map");function Q1(s,c,d,m){return s==null?[]:(ce(c)||(c=c==null?[]:[c]),d=m?n:d,ce(d)||(d=d==null?[]:[d]),Dm(s,c,d))}l(Q1,"orderBy");var eT=jo(function(s,c,d){s[d?0:1].push(c)},function(){return[[],[]]});function tT(s,c,d){var m=ce(s)?hu:im,b=arguments.length<3;return m(s,ie(c,4),d,b,Zr)}l(tT,"reduce");function rT(s,c,d){var m=ce(s)?px:im,b=arguments.length<3;return m(s,ie(c,4),d,b,Cm)}l(rT,"reduceRight");function nT(s,c){var d=ce(s)?jr:xm;return d(s,ia(ie(c,3)))}l(nT,"reject");function iT(s){var c=ce(s)?vm:XM;return c(s)}l(iT,"sample");function sT(s,c,d){(d?Ct(s,c,d):c===n)?c=1:c=fe(c);var m=ce(s)?IM:ZM;return m(s,c)}l(sT,"sampleSize");function oT(s){var c=ce(s)?RM:QM;return c(s)}l(oT,"shuffle");function aT(s){if(s==null)return 0;if(At(s))return oa(s)?jn(s):s.length;var c=bt(s);return c==Qe||c==Zt?s.size:Lu(s).length}l(aT,"size");function lT(s,c,d){var m=ce(s)?du:e0;return d&&Ct(s,c,d)&&(c=n),m(s,ie(c,3))}l(lT,"some");var cT=me(function(s,c){if(s==null)return[];var d=c.length;return d>1&&Ct(s,c[0],c[1])?c=[]:d>2&&Ct(c[0],c[1],c[2])&&(c=[c[0]]),Dm(s,pt(c,1),[])}),ra=Ux||function(){return ft.Date.now()};function uT(s,c){if(typeof c!="function")throw new Gt(i);return s=fe(s),function(){if(--s<1)return c.apply(this,arguments)}}l(uT,"after");function Rg(s,c,d){return c=d?n:c,c=s&&c==null?s.length:c,Ar(s,U,n,n,n,n,c)}l(Rg,"ary");function Ag(s,c){var d;if(typeof c!="function")throw new Gt(i);return s=fe(s),function(){return--s>0&&(d=c.apply(this,arguments)),s<=1&&(c=n),d}}l(Ag,"before");var tf=me(function(s,c,d){var m=S;if(d.length){var b=Yr(d,Qn(tf));m|=T}return Ar(s,m,c,d,b)}),Og=me(function(s,c,d){var m=S|E;if(d.length){var b=Yr(d,Qn(Og));m|=T}return Ar(c,m,s,d,b)});function Lg(s,c,d){c=d?n:c;var m=Ar(s,M,n,n,n,n,n,c);return m.placeholder=Lg.placeholder,m}l(Lg,"curry");function Ng(s,c,d){c=d?n:c;var m=Ar(s,A,n,n,n,n,n,c);return m.placeholder=Ng.placeholder,m}l(Ng,"curryRight");function _g(s,c,d){var m,b,x,I,R,L,F=0,$=!1,H=!1,K=!0;if(typeof s!="function")throw new Gt(i);c=Kt(c)||0,et(d)&&($=!!d.leading,H="maxWait"in d,x=H?ct(Kt(d.maxWait)||0,c):x,K="trailing"in d?!!d.trailing:K);function te(st){var tr=m,Dr=b;return m=b=n,F=st,I=s.apply(Dr,tr),I}l(te,"invokeFunc");function se(st){return F=st,R=us(ye,c),$?te(st):I}l(se,"leadingEdge");function de(st){var tr=st-L,Dr=st-F,Jg=c-tr;return H?yt(Jg,x-Dr):Jg}l(de,"remainingWait");function oe(st){var tr=st-L,Dr=st-F;return L===n||tr>=c||tr<0||H&&Dr>=x}l(oe,"shouldInvoke");function ye(){var st=ra();if(oe(st))return Se(st);R=us(ye,de(st))}l(ye,"timerExpired");function Se(st){return R=n,K&&m?te(st):(m=b=n,I)}l(Se,"trailingEdge");function $t(){R!==n&&Um(R),F=0,m=L=b=R=n}l($t,"cancel");function xt(){return R===n?I:Se(ra())}l(xt,"flush");function Ht(){var st=ra(),tr=oe(st);if(m=arguments,b=this,L=st,tr){if(R===n)return se(L);if(H)return Um(R),R=us(ye,c),te(L)}return R===n&&(R=us(ye,c)),I}return l(Ht,"debounced"),Ht.cancel=$t,Ht.flush=xt,Ht}l(_g,"debounce");var fT=me(function(s,c){return Em(s,1,c)}),hT=me(function(s,c,d){return Em(s,Kt(c)||0,d)});function dT(s){return Ar(s,Q)}l(dT,"flip");function na(s,c){if(typeof s!="function"||c!=null&&typeof c!="function")throw new Gt(i);var d=l(function(){var m=arguments,b=c?c.apply(this,m):m[0],x=d.cache;if(x.has(b))return x.get(b);var I=s.apply(this,m);return d.cache=x.set(b,I)||x,I},"memoized");return d.cache=new(na.Cache||Ir),d}l(na,"memoize"),na.Cache=Ir;function ia(s){if(typeof s!="function")throw new Gt(i);return function(){var c=arguments;switch(c.length){case 0:return!s.call(this);case 1:return!s.call(this,c[0]);case 2:return!s.call(this,c[0],c[1]);case 3:return!s.call(this,c[0],c[1],c[2])}return!s.apply(this,c)}}l(ia,"negate");function pT(s){return Ag(2,s)}l(pT,"once");var mT=t0(function(s,c){c=c.length==1&&ce(c[0])?Ke(c[0],kt(ie())):Ke(pt(c,1),kt(ie()));var d=c.length;return me(function(m){for(var b=-1,x=yt(m.length,d);++b<x;)m[b]=c[b].call(this,m[b]);return Dt(s,this,m)})}),rf=me(function(s,c){var d=Yr(c,Qn(rf));return Ar(s,T,n,c,d)}),Dg=me(function(s,c){var d=Yr(c,Qn(Dg));return Ar(s,N,n,c,d)}),gT=Or(function(s,c){return Ar(s,G,n,n,n,c)});function yT(s,c){if(typeof s!="function")throw new Gt(i);return c=c===n?c:fe(c),me(s,c)}l(yT,"rest");function bT(s,c){if(typeof s!="function")throw new Gt(i);return c=c==null?0:ct(fe(c),0),me(function(d){var m=d[c],b=en(d,0,c);return m&&qr(b,m),Dt(s,this,b)})}l(bT,"spread");function vT(s,c,d){var m=!0,b=!0;if(typeof s!="function")throw new Gt(i);return et(d)&&(m="leading"in d?!!d.leading:m,b="trailing"in d?!!d.trailing:b),_g(s,c,{leading:m,maxWait:c,trailing:b})}l(vT,"throttle");function wT(s){return Rg(s,1)}l(wT,"unary");function ST(s,c){return rf(Bu(c),s)}l(ST,"wrap");function ET(){if(!arguments.length)return[];var s=arguments[0];return ce(s)?s:[s]}l(ET,"castArray");function CT(s){return jt(s,g)}l(CT,"clone");function xT(s,c){return c=typeof c=="function"?c:n,jt(s,g,c)}l(xT,"cloneWith");function MT(s){return jt(s,h|g)}l(MT,"cloneDeep");function TT(s,c){return c=typeof c=="function"?c:n,jt(s,h|g,c)}l(TT,"cloneDeepWith");function IT(s,c){return c==null||Sm(s,c,ht(c))}l(IT,"conformsTo");function er(s,c){return s===c||s!==s&&c!==c}l(er,"eq");var RT=Xo(Ru),AT=Xo(function(s,c){return s>=c}),Tn=Im(function(){return arguments}())?Im:function(s){return rt(s)&&Oe.call(s,"callee")&&!dm.call(s,"callee")},ce=_.isArray,OT=Yp?kt(Yp):$M;function At(s){return s!=null&&sa(s.length)&&!Nr(s)}l(At,"isArrayLike");function it(s){return rt(s)&&At(s)}l(it,"isArrayLikeObject");function LT(s){return s===!0||s===!1||rt(s)&&Et(s)==Wt}l(LT,"isBoolean");var tn=zx||pf,NT=Kp?kt(Kp):HM;function _T(s){return rt(s)&&s.nodeType===1&&!fs(s)}l(_T,"isElement");function DT(s){if(s==null)return!0;if(At(s)&&(ce(s)||typeof s=="string"||typeof s.splice=="function"||tn(s)||ei(s)||Tn(s)))return!s.length;var c=bt(s);if(c==Qe||c==Zt)return!s.size;if(cs(s))return!Lu(s).length;for(var d in s)if(Oe.call(s,d))return!1;return!0}l(DT,"isEmpty");function kT(s,c){return os(s,c)}l(kT,"isEqual");function PT(s,c,d){d=typeof d=="function"?d:n;var m=d?d(s,c):n;return m===n?os(s,c,n,d):!!m}l(PT,"isEqualWith");function nf(s){if(!rt(s))return!1;var c=Et(s);return c==zr||c==xr||typeof s.message=="string"&&typeof s.name=="string"&&!fs(s)}l(nf,"isError");function FT(s){return typeof s=="number"&&mm(s)}l(FT,"isFinite");function Nr(s){if(!et(s))return!1;var c=Et(s);return c==Mr||c==Me||c==yn||c==ji}l(Nr,"isFunction");function kg(s){return typeof s=="number"&&s==fe(s)}l(kg,"isInteger");function sa(s){return typeof s=="number"&&s>-1&&s%1==0&&s<=Y}l(sa,"isLength");function et(s){var c=typeof s;return s!=null&&(c=="object"||c=="function")}l(et,"isObject");function rt(s){return s!=null&&typeof s=="object"}l(rt,"isObjectLike");var Pg=Xp?kt(Xp):WM;function $T(s,c){return s===c||Ou(s,c,qu(c))}l($T,"isMatch");function HT(s,c,d){return d=typeof d=="function"?d:n,Ou(s,c,qu(c),d)}l(HT,"isMatchWith");function BT(s){return Fg(s)&&s!=+s}l(BT,"isNaN");function WT(s){if(x0(s))throw new ae(r);return Rm(s)}l(WT,"isNative");function VT(s){return s===null}l(VT,"isNull");function UT(s){return s==null}l(UT,"isNil");function Fg(s){return typeof s=="number"||rt(s)&&Et(s)==ke}l(Fg,"isNumber");function fs(s){if(!rt(s)||Et(s)!=at)return!1;var c=No(s);if(c===null)return!0;var d=Oe.call(c,"constructor")&&c.constructor;return typeof d=="function"&&d instanceof d&&Ro.call(d)==Hx}l(fs,"isPlainObject");var sf=Zp?kt(Zp):VM;function GT(s){return kg(s)&&s>=-Y&&s<=Y}l(GT,"isSafeInteger");var $g=Jp?kt(Jp):UM;function oa(s){return typeof s=="string"||!ce(s)&&rt(s)&&Et(s)==Yi}l(oa,"isString");function Ft(s){return typeof s=="symbol"||rt(s)&&Et(s)==vo}l(Ft,"isSymbol");var ei=Qp?kt(Qp):GM;function zT(s){return s===n}l(zT,"isUndefined");function jT(s){return rt(s)&&bt(s)==Ki}l(jT,"isWeakMap");function qT(s){return rt(s)&&Et(s)==cC}l(qT,"isWeakSet");var YT=Xo(Nu),KT=Xo(function(s,c){return s<=c});function Hg(s){if(!s)return[];if(At(s))return oa(s)?Jt(s):Rt(s);if(Ji&&s[Ji])return Ix(s[Ji]());var c=bt(s),d=c==Qe?vu:c==Zt?Mo:ti;return d(s)}l(Hg,"toArray");function _r(s){if(!s)return s===0?s:0;if(s=Kt(s),s===X||s===-X){var c=s<0?-1:1;return c*he}return s===s?s:0}l(_r,"toFinite");function fe(s){var c=_r(s),d=c%1;return c===c?d?c-d:c:0}l(fe,"toInteger");function Bg(s){return s?En(fe(s),0,xe):0}l(Bg,"toLength");function Kt(s){if(typeof s=="number")return s;if(Ft(s))return Ae;if(et(s)){var c=typeof s.valueOf=="function"?s.valueOf():s;s=et(c)?c+"":c}if(typeof s!="string")return s===0?s:+s;s=sm(s);var d=OC.test(s);return d||NC.test(s)?ux(s.slice(2),d?2:8):AC.test(s)?Ae:+s}l(Kt,"toNumber");function Wg(s){return cr(s,Ot(s))}l(Wg,"toPlainObject");function XT(s){return s?En(fe(s),-Y,Y):s===0?s:0}l(XT,"toSafeInteger");function Re(s){return s==null?"":Pt(s)}l(Re,"toString");var ZT=Zn(function(s,c){if(cs(c)||At(c)){cr(c,ht(c),s);return}for(var d in c)Oe.call(c,d)&&ns(s,d,c[d])}),Vg=Zn(function(s,c){cr(c,Ot(c),s)}),aa=Zn(function(s,c,d,m){cr(c,Ot(c),s,m)}),JT=Zn(function(s,c,d,m){cr(c,ht(c),s,m)}),QT=Or(Mu);function eI(s,c){var d=Xn(s);return c==null?d:wm(d,c)}l(eI,"create");var tI=me(function(s,c){s=Pe(s);var d=-1,m=c.length,b=m>2?c[2]:n;for(b&&Ct(c[0],c[1],b)&&(m=1);++d<m;)for(var x=c[d],I=Ot(x),R=-1,L=I.length;++R<L;){var F=I[R],$=s[F];($===n||er($,qn[F])&&!Oe.call(s,F))&&(s[F]=x[F])}return s}),rI=me(function(s){return s.push(n,sg),Dt(Ug,n,s)});function nI(s,c){return tm(s,ie(c,3),lr)}l(nI,"findKey");function iI(s,c){return tm(s,ie(c,3),Iu)}l(iI,"findLastKey");function sI(s,c){return s==null?s:Tu(s,ie(c,3),Ot)}l(sI,"forIn");function oI(s,c){return s==null?s:Mm(s,ie(c,3),Ot)}l(oI,"forInRight");function aI(s,c){return s&&lr(s,ie(c,3))}l(aI,"forOwn");function lI(s,c){return s&&Iu(s,ie(c,3))}l(lI,"forOwnRight");function cI(s){return s==null?[]:Vo(s,ht(s))}l(cI,"functions");function uI(s){return s==null?[]:Vo(s,Ot(s))}l(uI,"functionsIn");function of(s,c,d){var m=s==null?n:Cn(s,c);return m===n?d:m}l(of,"get");function fI(s,c){return s!=null&&lg(s,c,DM)}l(fI,"has");function af(s,c){return s!=null&&lg(s,c,kM)}l(af,"hasIn");var hI=eg(function(s,c,d){c!=null&&typeof c.toString!="function"&&(c=Ao.call(c)),s[c]=d},cf(Lt)),dI=eg(function(s,c,d){c!=null&&typeof c.toString!="function"&&(c=Ao.call(c)),Oe.call(s,c)?s[c].push(d):s[c]=[d]},ie),pI=me(ss);function ht(s){return At(s)?bm(s):Lu(s)}l(ht,"keys");function Ot(s){return At(s)?bm(s,!0):zM(s)}l(Ot,"keysIn");function mI(s,c){var d={};return c=ie(c,3),lr(s,function(m,b,x){Rr(d,c(m,b,x),m)}),d}l(mI,"mapKeys");function gI(s,c){var d={};return c=ie(c,3),lr(s,function(m,b,x){Rr(d,b,c(m,b,x))}),d}l(gI,"mapValues");var yI=Zn(function(s,c,d){Uo(s,c,d)}),Ug=Zn(function(s,c,d,m){Uo(s,c,d,m)}),bI=Or(function(s,c){var d={};if(s==null)return d;var m=!1;c=Ke(c,function(x){return x=Qr(x,s),m||(m=x.length>1),x}),cr(s,zu(s),d),m&&(d=jt(d,h|p|g,h0));for(var b=c.length;b--;)Fu(d,c[b]);return d});function vI(s,c){return Gg(s,ia(ie(c)))}l(vI,"omitBy");var wI=Or(function(s,c){return s==null?{}:qM(s,c)});function Gg(s,c){if(s==null)return{};var d=Ke(zu(s),function(m){return[m]});return c=ie(c),km(s,d,function(m,b){return c(m,b[0])})}l(Gg,"pickBy");function SI(s,c,d){c=Qr(c,s);var m=-1,b=c.length;for(b||(b=1,s=n);++m<b;){var x=s==null?n:s[ur(c[m])];x===n&&(m=b,x=d),s=Nr(x)?x.call(s):x}return s}l(SI,"result");function EI(s,c,d){return s==null?s:as(s,c,d)}l(EI,"set");function CI(s,c,d,m){return m=typeof m=="function"?m:n,s==null?s:as(s,c,d,m)}l(CI,"setWith");var zg=ng(ht),jg=ng(Ot);function xI(s,c,d){var m=ce(s),b=m||tn(s)||ei(s);if(c=ie(c,4),d==null){var x=s&&s.constructor;b?d=m?new x:[]:et(s)?d=Nr(x)?Xn(No(s)):{}:d={}}return(b?Ut:lr)(s,function(I,R,L){return c(d,I,R,L)}),d}l(xI,"transform");function MI(s,c){return s==null?!0:Fu(s,c)}l(MI,"unset");function TI(s,c,d){return s==null?s:Bm(s,c,Bu(d))}l(TI,"update");function II(s,c,d,m){return m=typeof m=="function"?m:n,s==null?s:Bm(s,c,Bu(d),m)}l(II,"updateWith");function ti(s){return s==null?[]:bu(s,ht(s))}l(ti,"values");function RI(s){return s==null?[]:bu(s,Ot(s))}l(RI,"valuesIn");function AI(s,c,d){return d===n&&(d=c,c=n),d!==n&&(d=Kt(d),d=d===d?d:0),c!==n&&(c=Kt(c),c=c===c?c:0),En(Kt(s),c,d)}l(AI,"clamp");function OI(s,c,d){return c=_r(c),d===n?(d=c,c=0):d=_r(d),s=Kt(s),PM(s,c,d)}l(OI,"inRange");function LI(s,c,d){if(d&&typeof d!="boolean"&&Ct(s,c,d)&&(c=d=n),d===n&&(typeof c=="boolean"?(d=c,c=n):typeof s=="boolean"&&(d=s,s=n)),s===n&&c===n?(s=0,c=1):(s=_r(s),c===n?(c=s,s=0):c=_r(c)),s>c){var m=s;s=c,c=m}if(d||s%1||c%1){var b=gm();return yt(s+b*(c-s+cx("1e-"+((b+"").length-1))),c)}return Du(s,c)}l(LI,"random");var NI=Jn(function(s,c,d){return c=c.toLowerCase(),s+(d?qg(c):c)});function qg(s){return lf(Re(s).toLowerCase())}l(qg,"capitalize");function Yg(s){return s=Re(s),s&&s.replace(DC,Ex).replace(QC,"")}l(Yg,"deburr");function _I(s,c,d){s=Re(s),c=Pt(c);var m=s.length;d=d===n?m:En(fe(d),0,m);var b=d;return d-=c.length,d>=0&&s.slice(d,b)==c}l(_I,"endsWith");function DI(s){return s=Re(s),s&&pC.test(s)?s.replace(Mp,Cx):s}l(DI,"escape");function kI(s){return s=Re(s),s&&wC.test(s)?s.replace(ru,"\\$&"):s}l(kI,"escapeRegExp");var PI=Jn(function(s,c,d){return s+(d?"-":"")+c.toLowerCase()}),FI=Jn(function(s,c,d){return s+(d?" ":"")+c.toLowerCase()}),$I=Zm("toLowerCase");function HI(s,c,d){s=Re(s),c=fe(c);var m=c?jn(s):0;if(!c||m>=c)return s;var b=(c-m)/2;return Ko(Po(b),d)+s+Ko(ko(b),d)}l(HI,"pad");function BI(s,c,d){s=Re(s),c=fe(c);var m=c?jn(s):0;return c&&m<c?s+Ko(c-m,d):s}l(BI,"padEnd");function WI(s,c,d){s=Re(s),c=fe(c);var m=c?jn(s):0;return c&&m<c?Ko(c-m,d)+s:s}l(WI,"padStart");function VI(s,c,d){return d||c==null?c=0:c&&(c=+c),Kx(Re(s).replace(nu,""),c||0)}l(VI,"parseInt");function UI(s,c,d){return(d?Ct(s,c,d):c===n)?c=1:c=fe(c),ku(Re(s),c)}l(UI,"repeat");function GI(){var s=arguments,c=Re(s[0]);return s.length<3?c:c.replace(s[1],s[2])}l(GI,"replace");var zI=Jn(function(s,c,d){return s+(d?"_":"")+c.toLowerCase()});function jI(s,c,d){return d&&typeof d!="number"&&Ct(s,c,d)&&(c=d=n),d=d===n?xe:d>>>0,d?(s=Re(s),s&&(typeof c=="string"||c!=null&&!sf(c))&&(c=Pt(c),!c&&zn(s))?en(Jt(s),0,d):s.split(c,d)):[]}l(jI,"split");var qI=Jn(function(s,c,d){return s+(d?" ":"")+lf(c)});function YI(s,c,d){return s=Re(s),d=d==null?0:En(fe(d),0,s.length),c=Pt(c),s.slice(d,d+c.length)==c}l(YI,"startsWith");function KI(s,c,d){var m=C.templateSettings;d&&Ct(s,c,d)&&(c=n),s=Re(s),c=aa({},c,m,ig);var b=aa({},c.imports,m.imports,ig),x=ht(b),I=bu(b,x),R,L,F=0,$=c.interpolate||wo,H="__p += '",K=wu((c.escape||wo).source+"|"+$.source+"|"+($===Tp?RC:wo).source+"|"+(c.evaluate||wo).source+"|$","g"),te="//# sourceURL="+(Oe.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++ix+"]")+`
`;s.replace(K,function(oe,ye,Se,$t,xt,Ht){return Se||(Se=$t),H+=s.slice(F,Ht).replace(kC,xx),ye&&(R=!0,H+=`' +
__e(`+ye+`) +
'`),xt&&(L=!0,H+=`';
`+xt+`;
__p += '`),Se&&(H+=`' +
((__t = (`+Se+`)) == null ? '' : __t) +
'`),F=Ht+oe.length,oe}),H+=`';
`;var se=Oe.call(c,"variable")&&c.variable;if(!se)H=`with (obj) {
`+H+`
}
`;else if(TC.test(se))throw new ae(o);H=(L?H.replace(uC,""):H).replace(fC,"$1").replace(hC,"$1;"),H="function("+(se||"obj")+`) {
`+(se?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(L?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+H+`return __p
}`;var de=Xg(function(){return Te(x,te+"return "+H).apply(n,I)});if(de.source=H,nf(de))throw de;return de}l(KI,"template");function XI(s){return Re(s).toLowerCase()}l(XI,"toLower");function ZI(s){return Re(s).toUpperCase()}l(ZI,"toUpper");function JI(s,c,d){if(s=Re(s),s&&(d||c===n))return sm(s);if(!s||!(c=Pt(c)))return s;var m=Jt(s),b=Jt(c),x=om(m,b),I=am(m,b)+1;return en(m,x,I).join("")}l(JI,"trim");function QI(s,c,d){if(s=Re(s),s&&(d||c===n))return s.slice(0,cm(s)+1);if(!s||!(c=Pt(c)))return s;var m=Jt(s),b=am(m,Jt(c))+1;return en(m,0,b).join("")}l(QI,"trimEnd");function eR(s,c,d){if(s=Re(s),s&&(d||c===n))return s.replace(nu,"");if(!s||!(c=Pt(c)))return s;var m=Jt(s),b=om(m,Jt(c));return en(m,b).join("")}l(eR,"trimStart");function tR(s,c){var d=W,m=z;if(et(c)){var b="separator"in c?c.separator:b;d="length"in c?fe(c.length):d,m="omission"in c?Pt(c.omission):m}s=Re(s);var x=s.length;if(zn(s)){var I=Jt(s);x=I.length}if(d>=x)return s;var R=d-jn(m);if(R<1)return m;var L=I?en(I,0,R).join(""):s.slice(0,R);if(b===n)return L+m;if(I&&(R+=L.length-R),sf(b)){if(s.slice(R).search(b)){var F,$=L;for(b.global||(b=wu(b.source,Re(Ip.exec(b))+"g")),b.lastIndex=0;F=b.exec($);)var H=F.index;L=L.slice(0,H===n?R:H)}}else if(s.indexOf(Pt(b),R)!=R){var K=L.lastIndexOf(b);K>-1&&(L=L.slice(0,K))}return L+m}l(tR,"truncate");function rR(s){return s=Re(s),s&&dC.test(s)?s.replace(xp,Lx):s}l(rR,"unescape");var nR=Jn(function(s,c,d){return s+(d?" ":"")+c.toUpperCase()}),lf=Zm("toUpperCase");function Kg(s,c,d){return s=Re(s),c=d?n:c,c===n?Tx(s)?Dx(s):yx(s):s.match(c)||[]}l(Kg,"words");var Xg=me(function(s,c){try{return Dt(s,n,c)}catch(d){return nf(d)?d:new ae(d)}}),iR=Or(function(s,c){return Ut(c,function(d){d=ur(d),Rr(s,d,tf(s[d],s))}),s});function sR(s){var c=s==null?0:s.length,d=ie();return s=c?Ke(s,function(m){if(typeof m[1]!="function")throw new Gt(i);return[d(m[0]),m[1]]}):[],me(function(m){for(var b=-1;++b<c;){var x=s[b];if(Dt(x[0],this,m))return Dt(x[1],this,m)}})}l(sR,"cond");function oR(s){return LM(jt(s,h))}l(oR,"conforms");function cf(s){return function(){return s}}l(cf,"constant");function aR(s,c){return s==null||s!==s?c:s}l(aR,"defaultTo");var lR=Qm(),cR=Qm(!0);function Lt(s){return s}l(Lt,"identity");function uf(s){return Am(typeof s=="function"?s:jt(s,h))}l(uf,"iteratee");function uR(s){return Lm(jt(s,h))}l(uR,"matches");function fR(s,c){return Nm(s,jt(c,h))}l(fR,"matchesProperty");var hR=me(function(s,c){return function(d){return ss(d,s,c)}}),dR=me(function(s,c){return function(d){return ss(s,d,c)}});function ff(s,c,d){var m=ht(c),b=Vo(c,m);d==null&&!(et(c)&&(b.length||!m.length))&&(d=c,c=s,s=this,b=Vo(c,ht(c)));var x=!(et(d)&&"chain"in d)||!!d.chain,I=Nr(s);return Ut(b,function(R){var L=c[R];s[R]=L,I&&(s.prototype[R]=function(){var F=this.__chain__;if(x||F){var $=s(this.__wrapped__),H=$.__actions__=Rt(this.__actions__);return H.push({func:L,args:arguments,thisArg:s}),$.__chain__=F,$}return L.apply(s,qr([this.value()],arguments))})}),s}l(ff,"mixin");function pR(){return ft._===this&&(ft._=Bx),this}l(pR,"noConflict");function hf(){}l(hf,"noop");function mR(s){return s=fe(s),me(function(c){return _m(c,s)})}l(mR,"nthArg");var gR=Vu(Ke),yR=Vu(em),bR=Vu(du);function Zg(s){return Ku(s)?pu(ur(s)):YM(s)}l(Zg,"property");function vR(s){return function(c){return s==null?n:Cn(s,c)}}l(vR,"propertyOf");var wR=tg(),SR=tg(!0);function df(){return[]}l(df,"stubArray");function pf(){return!1}l(pf,"stubFalse");function ER(){return{}}l(ER,"stubObject");function CR(){return""}l(CR,"stubString");function xR(){return!0}l(xR,"stubTrue");function MR(s,c){if(s=fe(s),s<1||s>Y)return[];var d=xe,m=yt(s,xe);c=ie(c),s-=xe;for(var b=yu(m,c);++d<s;)c(d);return b}l(MR,"times");function TR(s){return ce(s)?Ke(s,ur):Ft(s)?[s]:Rt(yg(Re(s)))}l(TR,"toPath");function IR(s){var c=++$x;return Re(s)+c}l(IR,"uniqueId");var RR=Yo(function(s,c){return s+c},0),AR=Uu("ceil"),OR=Yo(function(s,c){return s/c},1),LR=Uu("floor");function NR(s){return s&&s.length?Wo(s,Lt,Ru):n}l(NR,"max");function _R(s,c){return s&&s.length?Wo(s,ie(c,2),Ru):n}l(_R,"maxBy");function DR(s){return nm(s,Lt)}l(DR,"mean");function kR(s,c){return nm(s,ie(c,2))}l(kR,"meanBy");function PR(s){return s&&s.length?Wo(s,Lt,Nu):n}l(PR,"min");function FR(s,c){return s&&s.length?Wo(s,ie(c,2),Nu):n}l(FR,"minBy");var $R=Yo(function(s,c){return s*c},1),HR=Uu("round"),BR=Yo(function(s,c){return s-c},0);function WR(s){return s&&s.length?gu(s,Lt):0}l(WR,"sum");function VR(s,c){return s&&s.length?gu(s,ie(c,2)):0}return l(VR,"sumBy"),C.after=uT,C.ary=Rg,C.assign=ZT,C.assignIn=Vg,C.assignInWith=aa,C.assignWith=JT,C.at=QT,C.before=Ag,C.bind=tf,C.bindAll=iR,C.bindKey=Og,C.castArray=ET,C.chain=Mg,C.chunk=L0,C.compact=N0,C.concat=_0,C.cond=sR,C.conforms=oR,C.constant=cf,C.countBy=W1,C.create=eI,C.curry=Lg,C.curryRight=Ng,C.debounce=_g,C.defaults=tI,C.defaultsDeep=rI,C.defer=fT,C.delay=hT,C.difference=D0,C.differenceBy=k0,C.differenceWith=P0,C.drop=F0,C.dropRight=$0,C.dropRightWhile=H0,C.dropWhile=B0,C.fill=W0,C.filter=U1,C.flatMap=j1,C.flatMapDeep=q1,C.flatMapDepth=Y1,C.flatten=Sg,C.flattenDeep=V0,C.flattenDepth=U0,C.flip=dT,C.flow=lR,C.flowRight=cR,C.fromPairs=G0,C.functions=cI,C.functionsIn=uI,C.groupBy=K1,C.initial=j0,C.intersection=q0,C.intersectionBy=Y0,C.intersectionWith=K0,C.invert=hI,C.invertBy=dI,C.invokeMap=Z1,C.iteratee=uf,C.keyBy=J1,C.keys=ht,C.keysIn=Ot,C.map=ta,C.mapKeys=mI,C.mapValues=gI,C.matches=uR,C.matchesProperty=fR,C.memoize=na,C.merge=yI,C.mergeWith=Ug,C.method=hR,C.methodOf=dR,C.mixin=ff,C.negate=ia,C.nthArg=mR,C.omit=bI,C.omitBy=vI,C.once=pT,C.orderBy=Q1,C.over=gR,C.overArgs=mT,C.overEvery=yR,C.overSome=bR,C.partial=rf,C.partialRight=Dg,C.partition=eT,C.pick=wI,C.pickBy=Gg,C.property=Zg,C.propertyOf=vR,C.pull=Q0,C.pullAll=Cg,C.pullAllBy=e1,C.pullAllWith=t1,C.pullAt=r1,C.range=wR,C.rangeRight=SR,C.rearg=gT,C.reject=nT,C.remove=n1,C.rest=yT,C.reverse=Qu,C.sampleSize=sT,C.set=EI,C.setWith=CI,C.shuffle=oT,C.slice=i1,C.sortBy=cT,C.sortedUniq=f1,C.sortedUniqBy=h1,C.split=jI,C.spread=bT,C.tail=d1,C.take=p1,C.takeRight=m1,C.takeRightWhile=g1,C.takeWhile=y1,C.tap=N1,C.throttle=vT,C.thru=ea,C.toArray=Hg,C.toPairs=zg,C.toPairsIn=jg,C.toPath=TR,C.toPlainObject=Wg,C.transform=xI,C.unary=wT,C.union=b1,C.unionBy=v1,C.unionWith=w1,C.uniq=S1,C.uniqBy=E1,C.uniqWith=C1,C.unset=MI,C.unzip=ef,C.unzipWith=xg,C.update=TI,C.updateWith=II,C.values=ti,C.valuesIn=RI,C.without=x1,C.words=Kg,C.wrap=ST,C.xor=M1,C.xorBy=T1,C.xorWith=I1,C.zip=R1,C.zipObject=A1,C.zipObjectDeep=O1,C.zipWith=L1,C.entries=zg,C.entriesIn=jg,C.extend=Vg,C.extendWith=aa,ff(C,C),C.add=RR,C.attempt=Xg,C.camelCase=NI,C.capitalize=qg,C.ceil=AR,C.clamp=AI,C.clone=CT,C.cloneDeep=MT,C.cloneDeepWith=TT,C.cloneWith=xT,C.conformsTo=IT,C.deburr=Yg,C.defaultTo=aR,C.divide=OR,C.endsWith=_I,C.eq=er,C.escape=DI,C.escapeRegExp=kI,C.every=V1,C.find=G1,C.findIndex=vg,C.findKey=nI,C.findLast=z1,C.findLastIndex=wg,C.findLastKey=iI,C.floor=LR,C.forEach=Tg,C.forEachRight=Ig,C.forIn=sI,C.forInRight=oI,C.forOwn=aI,C.forOwnRight=lI,C.get=of,C.gt=RT,C.gte=AT,C.has=fI,C.hasIn=af,C.head=Eg,C.identity=Lt,C.includes=X1,C.indexOf=z0,C.inRange=OI,C.invoke=pI,C.isArguments=Tn,C.isArray=ce,C.isArrayBuffer=OT,C.isArrayLike=At,C.isArrayLikeObject=it,C.isBoolean=LT,C.isBuffer=tn,C.isDate=NT,C.isElement=_T,C.isEmpty=DT,C.isEqual=kT,C.isEqualWith=PT,C.isError=nf,C.isFinite=FT,C.isFunction=Nr,C.isInteger=kg,C.isLength=sa,C.isMap=Pg,C.isMatch=$T,C.isMatchWith=HT,C.isNaN=BT,C.isNative=WT,C.isNil=UT,C.isNull=VT,C.isNumber=Fg,C.isObject=et,C.isObjectLike=rt,C.isPlainObject=fs,C.isRegExp=sf,C.isSafeInteger=GT,C.isSet=$g,C.isString=oa,C.isSymbol=Ft,C.isTypedArray=ei,C.isUndefined=zT,C.isWeakMap=jT,C.isWeakSet=qT,C.join=X0,C.kebabCase=PI,C.last=Yt,C.lastIndexOf=Z0,C.lowerCase=FI,C.lowerFirst=$I,C.lt=YT,C.lte=KT,C.max=NR,C.maxBy=_R,C.mean=DR,C.meanBy=kR,C.min=PR,C.minBy=FR,C.stubArray=df,C.stubFalse=pf,C.stubObject=ER,C.stubString=CR,C.stubTrue=xR,C.multiply=$R,C.nth=J0,C.noConflict=pR,C.noop=hf,C.now=ra,C.pad=HI,C.padEnd=BI,C.padStart=WI,C.parseInt=VI,C.random=LI,C.reduce=tT,C.reduceRight=rT,C.repeat=UI,C.replace=GI,C.result=SI,C.round=HR,C.runInContext=O,C.sample=iT,C.size=aT,C.snakeCase=zI,C.some=lT,C.sortedIndex=s1,C.sortedIndexBy=o1,C.sortedIndexOf=a1,C.sortedLastIndex=l1,C.sortedLastIndexBy=c1,C.sortedLastIndexOf=u1,C.startCase=qI,C.startsWith=YI,C.subtract=BR,C.sum=WR,C.sumBy=VR,C.template=KI,C.times=MR,C.toFinite=_r,C.toInteger=fe,C.toLength=Bg,C.toLower=XI,C.toNumber=Kt,C.toSafeInteger=XT,C.toString=Re,C.toUpper=ZI,C.trim=JI,C.trimEnd=QI,C.trimStart=eR,C.truncate=tR,C.unescape=rR,C.uniqueId=IR,C.upperCase=nR,C.upperFirst=lf,C.each=Tg,C.eachRight=Ig,C.first=Eg,ff(C,function(){var s={};return lr(C,function(c,d){Oe.call(C.prototype,d)||(s[d]=c)}),s}(),{chain:!1}),C.VERSION=e,Ut(["bind","bindKey","curry","curryRight","partial","partialRight"],function(s){C[s].placeholder=C}),Ut(["drop","take"],function(s,c){be.prototype[s]=function(d){d=d===n?1:ct(fe(d),0);var m=this.__filtered__&&!c?new be(this):this.clone();return m.__filtered__?m.__takeCount__=yt(d,m.__takeCount__):m.__views__.push({size:yt(d,xe),type:s+(m.__dir__<0?"Right":"")}),m},be.prototype[s+"Right"]=function(d){return this.reverse()[s](d).reverse()}}),Ut(["filter","map","takeWhile"],function(s,c){var d=c+1,m=d==q||d==ee;be.prototype[s]=function(b){var x=this.clone();return x.__iteratees__.push({iteratee:ie(b,3),type:d}),x.__filtered__=x.__filtered__||m,x}}),Ut(["head","last"],function(s,c){var d="take"+(c?"Right":"");be.prototype[s]=function(){return this[d](1).value()[0]}}),Ut(["initial","tail"],function(s,c){var d="drop"+(c?"":"Right");be.prototype[s]=function(){return this.__filtered__?new be(this):this[d](1)}}),be.prototype.compact=function(){return this.filter(Lt)},be.prototype.find=function(s){return this.filter(s).head()},be.prototype.findLast=function(s){return this.reverse().find(s)},be.prototype.invokeMap=me(function(s,c){return typeof s=="function"?new be(this):this.map(function(d){return ss(d,s,c)})}),be.prototype.reject=function(s){return this.filter(ia(ie(s)))},be.prototype.slice=function(s,c){s=fe(s);var d=this;return d.__filtered__&&(s>0||c<0)?new be(d):(s<0?d=d.takeRight(-s):s&&(d=d.drop(s)),c!==n&&(c=fe(c),d=c<0?d.dropRight(-c):d.take(c-s)),d)},be.prototype.takeRightWhile=function(s){return this.reverse().takeWhile(s).reverse()},be.prototype.toArray=function(){return this.take(xe)},lr(be.prototype,function(s,c){var d=/^(?:filter|find|map|reject)|While$/.test(c),m=/^(?:head|last)$/.test(c),b=C[m?"take"+(c=="last"?"Right":""):c],x=m||/^find/.test(c);b&&(C.prototype[c]=function(){var I=this.__wrapped__,R=m?[1]:arguments,L=I instanceof be,F=R[0],$=L||ce(I),H=l(function(ye){var Se=b.apply(C,qr([ye],R));return m&&K?Se[0]:Se},"interceptor");$&&d&&typeof F=="function"&&F.length!=1&&(L=$=!1);var K=this.__chain__,te=!!this.__actions__.length,se=x&&!K,de=L&&!te;if(!x&&$){I=de?I:new be(this);var oe=s.apply(I,R);return oe.__actions__.push({func:ea,args:[H],thisArg:n}),new zt(oe,K)}return se&&de?s.apply(this,R):(oe=this.thru(H),se?m?oe.value()[0]:oe.value():oe)})}),Ut(["pop","push","shift","sort","splice","unshift"],function(s){var c=To[s],d=/^(?:push|sort|unshift)$/.test(s)?"tap":"thru",m=/^(?:pop|shift)$/.test(s);C.prototype[s]=function(){var b=arguments;if(m&&!this.__chain__){var x=this.value();return c.apply(ce(x)?x:[],b)}return this[d](function(I){return c.apply(ce(I)?I:[],b)})}}),lr(be.prototype,function(s,c){var d=C[c];if(d){var m=d.name+"";Oe.call(Kn,m)||(Kn[m]=[]),Kn[m].push({name:c,func:d})}}),Kn[qo(n,E).name]=[{name:"wrapper",func:n}],be.prototype.clone=rM,be.prototype.reverse=nM,be.prototype.value=iM,C.prototype.at=_1,C.prototype.chain=D1,C.prototype.commit=k1,C.prototype.next=P1,C.prototype.plant=$1,C.prototype.reverse=H1,C.prototype.toJSON=C.prototype.valueOf=C.prototype.value=B1,C.prototype.first=C.prototype.head,Ji&&(C.prototype[Ji]=F1),C},"runInContext"),Kr=kx();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(ft._=Kr,define(function(){return Kr})):bn?((bn.exports=Kr)._=Kr,cu._=Kr):ft._=Kr}).call(ii)});var ly=ca(Rn=>{var ha=ay();function ys(n){return n.reduce(function(e,t,r,i){return e+t})}l(ys,"sum");function pr(n){if(ha.isArray(n))return n;if(typeof n=="string")return n.split("");throw Error("Parameter must be a string or array.")}l(pr,"ensureArr");Rn.jarowinkler=function(n,e,G){n=pr(n),e=pr(e);var r,i;n.length>e.length?(r=n,i=e):(r=e,i=n);var o=G||.7,a=.1,u=Math.floor(Math.max(r.length/2-1,0)),f=[],h=[],p,g,y,w,S=0;for(p=0;p<i.length;p++)for(w=i[p],g=Math.max(p-u,0),y=Math.min(p+u+1,r.length);g<y;g++)if(!h[g]&&w===r[g]){f[p]=g,h[g]=!0,S++;break}var E=[],v=[],M,A,T=0,N=0;for(M=0,A=0;M<i.length;M++)f[M]>-1&&(E[A]=i[M],A++);for(M=0,A=0;M<r.length;M++)h[M]&&(v[A]=r[M],A++);for(p=0;p<E.length;p++)E[p]!==v[p]&&T++;for(p=0;p<i.length&&n[p]===e[p];p++)N++;var U=S,G=T/2;if(U){var Q=(U/n.length+U/e.length+(U-G)/U)/3,W=Q<o?Q:Q+Math.min(a,1/r.length)*N*(1-Q);return W}else return 0};Rn.levenshtein=function(n,e,t){if(n=pr(n),e=pr(e),n.length===0)return e.length;if(e.length===0)return n.length;var r=t||{d:1,i:1,s:1},i=[],o=[],a=e.length+1,u,f,h,p;for(u=0;u<a;u++)i[u]=u;for(u=0;u<n.length;u++){for(o[0]=u+1,f=0;f<e.length;f++)h=n[u]===e[f]?0:r.s,o[f+1]=Math.min(o[f]+r.d,i[f+1]+r.i,i[f]+h);for(f=0;f<a;f++)i[f]=o[f]}return p=Math.max(n.length,e.length),(p-o[e.length])/p};Rn.ngram=function(n,e,t){n=pr(n),e=pr(e);var r=n.length,i=e.length,o=t||2,a,u,f,h,p,g,y,w=[],S=[],E=[],v=[],M=[],A=r+1;if(r===0||i===0)return r===i?1:0;if(a=0,r<o||i<o){for(u=0,h=Math.min(r,i);u<h;u++)n[u]===e[u]&&a++;return a/Math.max(r,i)}for(u=0;u<r+o-1;u++)u<o-1?w[u]=0:w[u]=n[u-o+1];for(u=0;u<=r;u++)S[u]=u;for(f=1;f<=i;f++){if(f<o){for(p=0;p<o-f;p++)M[p]=0;for(p=o-f;p<o;p++)M[p]=e[p-(o-f)]}else M=e.slice(f-o,f);for(E[0]=f,u=1;u<=r;u++){for(a=0,g=o,h=0;h<o;h++)w[u-1+h]!==M[h]?a++:w[u-1+h]===0&&g--;y=a/g,E[u]=Math.min(Math.min(E[u-1]+1,S[u]+1),S[u-1]+y)}v=S,S=E,E=v}return 1-S[r]/Math.max(r,i)};Rn.pearson=function(n,e){var t=[];Object.keys(n).forEach(function(g){e[g]&&t.push(g)});var r=t.length;if(r===0)return 0;var i=ys(t.map(function(g){return n[g]})),o=ys(t.map(function(g){return e[g]})),a=ys(t.map(function(g){return Math.pow(n[g],2)})),u=ys(t.map(function(g){return Math.pow(e[g],2)})),f=ys(t.map(function(g){return n[g]*e[g]})),h=f-i*o/r,p=Math.sqrt((a-Math.pow(i,2)/r)*(u-Math.pow(o,2)/r));return p===0?0:h/p};Rn.jaccard=function(n,e){return n=pr(n),e=pr(e),ha.intersection(n,e).length/ha.union(n,e).length};Rn.tanimoto=function(n,e){n=pr(n),e=pr(e);var t=ha.intersection(n,e).length;return t/(n.length+e.length-t)}});var wy=ca((wa,Cf)=>{(function(n,e){typeof wa=="object"&&typeof Cf=="object"?Cf.exports=e():typeof define=="function"&&define.amd?define([],e):typeof wa=="object"?wa.resq=e():(n.window=n.window||{},n.window.resq=e())})(window,function(){return function(n){var e={};function t(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return n[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}return l(t,"r"),t.m=n,t.c=e,t.d=function(r,i,o){t.o(r,i)||Object.defineProperty(r,i,{enumerable:!0,get:o})},t.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},t.t=function(r,i){if(1&i&&(r=t(r)),8&i||4&i&&typeof r=="object"&&r&&r.__esModule)return r;var o=Object.create(null);if(t.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:r}),2&i&&typeof r!="string")for(var a in r)t.d(o,a,function(u){return r[u]}.bind(null,a));return o},t.n=function(r){var i=r&&r.__esModule?function(){return r.default}:function(){return r};return t.d(i,"a",i),i},t.o=function(r,i){return Object.prototype.hasOwnProperty.call(r,i)},t.p="",t(t.s=16)}([function(n,e,t){"use strict";t.d(e,"a",function(){return N}),t.d(e,"d",function(){return W}),t.d(e,"b",function(){return z}),t.d(e,"c",function(){return re});var r=t(1),i=t.n(r),o=t(14),a=t.n(o),u=t(2),f=t.n(u),h=t(15),p=t.n(h);function g(B,q){var k=Object.keys(B);if(Object.getOwnPropertySymbols){var ee=Object.getOwnPropertySymbols(B);q&&(ee=ee.filter(function(X){return Object.getOwnPropertyDescriptor(B,X).enumerable})),k.push.apply(k,ee)}return k}l(g,"l");var y=Array.isArray,w=Object.keys;function S(B){return typeof B=="function"}l(S,"x");function E(B){return B instanceof HTMLElement||B instanceof Text}l(E,"y");function v(B){return f()(B)==="object"&&!y(B)}l(v,"h");function M(B){if(!B||typeof B=="string")return B;var q=function(k){for(var ee=1;ee<arguments.length;ee++){var X=arguments[ee]!=null?arguments[ee]:{};ee%2?g(Object(X),!0).forEach(function(Y){a()(k,Y,X[Y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(X)):g(Object(X)).forEach(function(Y){Object.defineProperty(k,Y,Object.getOwnPropertyDescriptor(X,Y))})}return k}({},B);return delete q.children,q}l(M,"b");function A(B,q){var k=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return!(!y(B)||!y(q))&&(k?B.length===q.length&&!B.find(function(ee){return!q.includes(ee)}):B.some(function(ee){return q.includes(ee)}))}l(A,"v");function T(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},k=arguments.length>2&&arguments[2]!==void 0&&arguments[2],ee=[];if(!w(B).length)return!0;if(q===null||!w(q).length)return!1;if(k)return p()(B,q);var X=w(B).filter(function(Y){return w(q).includes(Y)});return X.forEach(function(Y){v(B[Y])&&v(q[Y])&&(ee=ee.concat(T(B[Y],q[Y]))),(B[Y]===q[Y]||A(B[Y],q[Y]))&&ee.push(q)}),ee.length>0&&ee.filter(function(Y){return Y}).length===X.length}l(T,"_");function N(B){var q,k={children:[]};if(!B)return k;k.name=S(q=B.type)?q.displayName||q.name:q,k.props=M(B.memoizedProps),k.state=function(X){if(X){var Y=X.baseState;return Y||X}}(B.memoizedState);var ee=B.child;if(ee)for(k.children.push(ee);ee.sibling;)k.children.push(ee.sibling),ee=ee.sibling;return k.children=k.children.map(function(X){return N(X)}),S(B.type)&&function(X){return X.children.length>1}(k)?(k.node=function(X){return X.children.map(function(Y){return Y.node}).filter(function(Y){return!!Y})}(k),k.isFragment=!0):k.node=function(X){return E(X.stateNode)?X.stateNode:X.child&&E(X.child.stateNode)?X.child.stateNode:null}(B),k}l(N,"m");function U(B){for(;B.length;){var q=B.shift();if(q.node)return q.node;q.children&&Array.isArray(q.children)&&B.push.apply(B,i()(q.children))}}l(U,"g");function G(B,q){for(var k=[];B.length;){var ee=B.shift().children;ee&&Array.isArray(ee)&&ee.forEach(function(X){q(X)&&(!X.node&&Array.isArray(X.children)&&(X.node=U(X.children.concat([]))),k.push(X)),B.push(X)})}return k}l(G,"O");function Q(B,q){var k=function(ee){if(ee){var X=ee.split("(");return X.length===1?ee:X.find(function(Y){return Y.includes(")")}).replace(/\)*/g,"")}}(q);return new RegExp("^"+B.split("*").map(function(ee){return ee.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}).join(".+")+"$").test(k)}l(Q,"w");function W(B,q){var k=arguments.length>3?arguments[3]:void 0;return B.reduce(function(ee,X){return ee.concat(G(ee,k&&typeof k=="function"?k:function(Y){return typeof Y.name=="string"?Q(X,Y.name):Y.name!==null&&f()(Y.name)==="object"&&Q(X,Y.name.displayName)}))},[q])}l(W,"j");function z(B,q,k){var ee=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return S(k)?(console.warn("Functions are not supported as filter matchers"),[]):B.filter(function(X){return v(k)&&T(k,X[q],ee)||y(k)&&A(k,X[q],ee)||X[q]===k})}l(z,"M");function re(B){if(B.hasOwnProperty("_reactRootContainer"))return B._reactRootContainer._internalRoot.current;var q=Object.keys(B).find(function(k){return k.startsWith("__reactInternalInstance")||k.startsWith("__reactFiber")||k.startsWith("__reactContainer")});return q?B[q]:void 0}l(re,"P")},function(n,e,t){var r=t(17),i=t(18),o=t(19),a=t(20);n.exports=function(u){return r(u)||i(u)||o(u)||a()},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){function t(r){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?(n.exports=t=l(function(i){return typeof i},"r"),n.exports.default=n.exports,n.exports.__esModule=!0):(n.exports=t=l(function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},"r"),n.exports.default=n.exports,n.exports.__esModule=!0),t(r)}l(t,"r"),n.exports=t,n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){function t(r){return n.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(i){return i.__proto__||Object.getPrototypeOf(i)},n.exports.default=n.exports,n.exports.__esModule=!0,t(r)}l(t,"r"),n.exports=t,n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){n.exports=function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){function t(r,i){for(var o=0;o<i.length;o++){var a=i[o];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(r,a.key,a)}}l(t,"r"),n.exports=function(r,i,o){return i&&t(r.prototype,i),o&&t(r,o),r},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){function t(r,i){return n.exports=t=Object.setPrototypeOf||function(o,a){return o.__proto__=a,o},n.exports.default=n.exports,n.exports.__esModule=!0,t(r,i)}l(t,"r"),n.exports=t,n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e,t){var r=t(6);n.exports=function(i,o){if(typeof o!="function"&&o!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(o&&o.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),o&&r(i,o)},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e,t){var r=t(3),i=t(6),o=t(22),a=t(23);function u(f){var h=typeof Map=="function"?new Map:void 0;return n.exports=u=l(function(p){if(p===null||!o(p))return p;if(typeof p!="function")throw new TypeError("Super expression must either be null or a function");if(h!==void 0){if(h.has(p))return h.get(p);h.set(p,g)}function g(){return a(p,arguments,r(this).constructor)}return l(g,"e"),g.prototype=Object.create(p.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),i(g,p)},"c"),n.exports.default=n.exports,n.exports.__esModule=!0,u(f)}l(u,"c"),n.exports=u,n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch{typeof window=="object"&&(t=window)}n.exports=t},function(n,e){n.exports=function(t,r){(r==null||r>t.length)&&(r=t.length);for(var i=0,o=new Array(r);i<r;i++)o[i]=t[i];return o},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e,t){"use strict";(function(r){t.d(e,"a",function(){return o});var i=t(0);function o(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5e3,u=arguments.length>1?arguments[1]:void 0;if(r.isReactLoaded)return Promise.resolve("React already loaded");var f=l(function(){var h=document.createTreeWalker(document);if(u)return document.querySelector(u);for(;h.nextNode();)if(h.currentNode.hasOwnProperty("_reactRootContainer"))return h.currentNode},"o");return new Promise(function(h,p){var g=!1,y=null;l(function w(){var S=f();if(S&&(r.isReactLoaded=!0,r.rootReactElement=Object(i.c)(S),r.rootReactElement))return clearTimeout(y),h();g||setTimeout(w,200)},"e")(),y=setTimeout(function(){g=!0,p("Timed out")},a)})}l(o,"o")}).call(this,t(9))},function(n,e,t){"use strict";t.d(e,"a",function(){return U});var r=t(1),i=t.n(r),o=t(4),a=t.n(o),u=t(5),f=t.n(u),h=t(7),p=t.n(h),g=t(13),y=t.n(g),w=t(3),S=t.n(w),E=t(8),v=t.n(E),M=t(0);function A(G){var Q=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var W,z=S()(G);if(Q){var re=S()(this).constructor;W=Reflect.construct(z,arguments,re)}else W=z.apply(this,arguments);return y()(this,W)}}l(A,"v");var T=function(G){p()(W,G);var Q=A(W);function W(z){return a()(this,W),z||(z=[]),Q.call.apply(Q,[this].concat(i()(z)))}return l(W,"r"),f()(W,[{key:"byProps",value:l(function(z){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{exact:!1},B=re.exact,q=Object(M.b)(this,"props",z,B);return new W(q)},"value")},{key:"byState",value:l(function(z){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{exact:!1},B=re.exact,q=Object(M.b)(this,"state",z,B);return new W(q)},"value")}]),W}(v()(Array)),N=function(G){p()(W,G);var Q=A(W);function W(z,re){var B;for(var q in a()(this,W),(B=Q.call(this,z))._nodes=re,z)B[q]=z[q];return B}return l(W,"r"),f()(W,[{key:"byProps",value:l(function(z){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{exact:!1},B=re.exact,q=Object(M.b)(this._nodes,"props",z,B)[0];return new W(q,this._nodes)},"value")},{key:"byState",value:l(function(z){var re=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{exact:!1},B=re.exact,q=Object(M.b)(this._nodes,"state",z,B)[0];return new W(q,this._nodes)},"value")}]),W}(v()(Object)),U=function(){function G(Q,W){a()(this,G),this.selectors=Q.split(" ").filter(function(z){return!!z}).map(function(z){return z.trim()}),this.rootComponent=W,this.tree=Object(M.a)(this.rootComponent)}return l(G,"t"),f()(G,[{key:"find",value:l(function(){return this.nodes=new T(Object(M.d)(this.selectors,this.tree,!0)),new N(this.nodes[0],this.nodes)},"value")},{key:"findAll",value:l(function(){return new T(Object(M.d)(this.selectors,this.tree))},"value")}]),G}()},function(n,e,t){var r=t(2).default,i=t(21);n.exports=function(o,a){return!a||r(a)!=="object"&&typeof a!="function"?i(o):a},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){n.exports=function(t,r,i){return r in t?Object.defineProperty(t,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[r]=i,t},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e,t){"use strict";var r=Array.isArray,i=Object.keys,o=Object.prototype.hasOwnProperty;n.exports=l(function a(u,f){if(u===f)return!0;if(u&&f&&typeof u=="object"&&typeof f=="object"){var h,p,g,y=r(u),w=r(f);if(y&&w){if((p=u.length)!=f.length)return!1;for(h=p;h--!=0;)if(!a(u[h],f[h]))return!1;return!0}if(y!=w)return!1;var S=u instanceof Date,E=f instanceof Date;if(S!=E)return!1;if(S&&E)return u.getTime()==f.getTime();var v=u instanceof RegExp,M=f instanceof RegExp;if(v!=M)return!1;if(v&&M)return u.toString()==f.toString();var A=i(u);if((p=A.length)!==i(f).length)return!1;for(h=p;h--!=0;)if(!o.call(f,A[h]))return!1;for(h=p;h--!=0;)if(!a(u[g=A[h]],f[g]))return!1;return!0}return u!=u&&f!=f},"t")},function(n,e,t){"use strict";t.r(e),function(r){t.d(e,"resq$",function(){return f}),t.d(e,"resq$$",function(){return h});var i=t(12),o=t(11);t.d(e,"waitToLoadReact",function(){return o.a});var a=t(0);function u(p,g,y){if(!y&&!r.isReactLoaded)throw new Error("Could not find the root element of your application");var w=r.rootReactElement;if(y instanceof HTMLElement&&(w=Object(a.c)(y)),!w)throw new Error("Could not find instance of React in given element");return new i.a(p,w)[g]()}l(u,"i");function f(p,g){return u(p,"find",g)}l(f,"c");function h(p,g){return u(p,"findAll",g)}l(h,"f")}.call(this,t(9))},function(n,e,t){var r=t(10);n.exports=function(i){if(Array.isArray(i))return r(i)},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){n.exports=function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e,t){var r=t(10);n.exports=function(i,o){if(i){if(typeof i=="string")return r(i,o);var a=Object.prototype.toString.call(i).slice(8,-1);return a==="Object"&&i.constructor&&(a=i.constructor.name),a==="Map"||a==="Set"?Array.from(i):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(i,o):void 0}},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){n.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){n.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){n.exports=function(t){return Function.toString.call(t).indexOf("[native code]")!==-1},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e,t){var r=t(6),i=t(24);function o(a,u,f){return i()?(n.exports=o=Reflect.construct,n.exports.default=n.exports,n.exports.__esModule=!0):(n.exports=o=l(function(h,p,g){var y=[null];y.push.apply(y,p);var w=new(Function.bind.apply(h,y));return g&&r(w,g.prototype),w},"u"),n.exports.default=n.exports,n.exports.__esModule=!0),o.apply(null,arguments)}l(o,"u"),n.exports=o,n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){n.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},n.exports.default=n.exports,n.exports.__esModule=!0}])})});function Qg(n){if(!n.src)return!0;let e=window.location.origin;try{let t=new URL(n.src).origin;return e!==t}catch{return!1}}l(Qg,"isCrossOriginIframe");var pe=l((n,e=document,{excludeCrossOriginIframes:t=!1,includeHTML:r=!1}={})=>{let i=[],o=l(u=>{u.querySelectorAll(n).forEach(f=>i.push(f))},"queryElement"),a=l(u=>{o(u);let f=[],h=l(p=>{p.shadowRoot&&f.push(p.shadowRoot),p.childNodes?.forEach(g=>h(g))},"findShadowRoots");h(u),f.forEach(p=>a(p)),u.querySelectorAll("iframe").forEach(p=>{if(!(t&&Qg(p)))try{let g=p.contentDocument;g&&a(g)}catch{return}})},"queryNode");return a(e),r&&e instanceof Document&&e.documentElement.matches(n)&&i.push(e.documentElement),i},"querySelectorAllExtended"),In=l((n,e)=>{if(n.matches(e))return n;let t=n.slot;if(t){let o=n.parentElement;for(;o;){if(o.shadowRoot){let a=o.shadowRoot.querySelector(`slot[name="${t}"]`);if(a)return In(a,e)}o=o.parentElement}return null}let r=n.closest(e);if(r)return r;let i=n.getRootNode();return i.nodeType===Node.DOCUMENT_FRAGMENT_NODE?In(i.host,e):null},"closestExtended"),ri=l((n,{flattenShadowRootChildren:e=!1}={})=>{if(!n)return[];let t=Array.from(n.childNodes);if(n.nodeType===Node.ELEMENT_NODE){let r=n;r.shadowRoot&&(t=t.filter(i=>!i.assignedSlot),e?t=t.concat(Array.from(r.shadowRoot.childNodes)):t.push(r.shadowRoot)),r.tagName.toLowerCase()==="slot"&&t.push(...r.assignedNodes())}return t},"childNodesExtended"),ey=l(n=>{let e=Array.from(n.children);return n.shadowRoot&&(e=e.filter(t=>!t.assignedSlot),e.push(...Array.from(n.shadowRoot.children))),n.tagName.toLowerCase()==="slot"&&e.push(...n.assignedElements()),e},"childrenExtended");var fr=l(n=>{let e=n.parentElement;if(e)return e;switch(n.nodeType){case Node.ELEMENT_NODE:let r=n;if(r.assignedSlot)return r.assignedSlot;break;case Node.DOCUMENT_FRAGMENT_NODE:return n.host}let t=n.parentNode;if(t)switch(t.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:return t.host;case Node.DOCUMENT_NODE:if(window.document===t)return null;let i=Array.from(window.document.querySelectorAll("iframe")).find(o=>o.contentDocument===t);if(i)return i}return null},"parentElementExtended");var ds=l((n,{includeComments:e=!0,includeCDATA:t=!0,trim:r=!0,limitAttributeLength:i=!1}={})=>{if(!n)return"";function o(h){switch(h.nodeType){case Node.ELEMENT_NODE:return f(h);case Node.TEXT_NODE:return h.nodeValue;case Node.CDATA_SECTION_NODE:return t&&h.nodeValue.trim().length>0?`<![CDATA[${h.nodeValue}]]>`:"";case Node.COMMENT_NODE:return e&&h.nodeValue.trim().length>0?`<!--${h.nodeValue}-->`:"";default:return""}}l(o,"serializeNode");function a(h){return Array.from(h.childNodes).map(o).join("")}l(a,"serializeShadowRoot");function u(h){try{let p=h.contentDocument||h.contentWindow.document;return ds(p.documentElement)}catch{return""}}l(u,"serializeIframe");function f(h){let p=h.tagName.toLowerCase(),g=`<${p}`;return Array.from(h.attributes).forEach(y=>{let w=y.value.slice(0,i?100:void 0);g+=` ${y.name}="${w}"`}),g+=">",h.shadowRoot?g+=a(h.shadowRoot):["script","style","svg"].includes(p)||Array.from(h.childNodes).forEach(y=>{y instanceof Element&&y.tagName.toLowerCase()==="iframe"?g+=u(y):g+=o(y)}),g+=`</${p}>`,g}return l(f,"serializeElementNode"),n.tagName.toLowerCase()==="iframe"?u(n):o(n)},"serializeElement");var Nt=class n{constructor({target:e=document,disabled:t=!1,log:r=!0,name:i,monitorInput:o=!1}){this.ignoreMutationsWithAttributes=["checksum-data-visible","checksum-data-transparently-visible","checksum-data-visible-under-transparent-element","checksum-data-click-offset","checksum-target-node","checksumid","data-scrollable-x","data-scrollable-y","data-scrollable-x-progress","data-scrollable-y-progress","rrwebid"];this.ignoreMutationsWithAttributeRegexPatterns=["checksum-radial-traverse-.+"];this.ignoreElementsWithClasses=["checksum-dom-cache-ignore"];this.inputEnabledSelectors=["input","textarea","select","[contenteditable=true]"].join(",");this.shouldIgnoreMutationRecord=l(e=>{try{if(e.type==="attributes"&&this.ignoreMutationsWithAttributes.includes(e.attributeName)||e.type==="attributes"&&this.ignoreMutationsWithAttributeRegexPatterns.some(r=>new RegExp("^"+r+"$").test(e.attributeName)))return!0;if(e.type==="attributes"&&e.attributeName==="class"){let r=l(i=>i?i.split(" ").filter(o=>![":hover","rrweb-paused"].includes(o)).sort().join(" "):"","standardizeClassName");return r(e.oldValue)===r(e.target.className)}let t=l(r=>this.ignoreElementsWithClasses.some(i=>r.classList.contains(i)),"doesElementHaveIgnoredClass");if(e.type==="childList"&&Array.from(e.addedNodes).every(r=>t(r))&&Array.from(e.removedNodes).every(r=>t(r)))return!0}catch{}return!1},"shouldIgnoreMutationRecord");this.monitoredTextElements=[];this.monitorInputEnabledElement=l(e=>{e.addEventListener("input",t=>{this.invalidate()})},"monitorInputEnabledElement");this.target=e,this.name=i,this.disabled=t,this.logActivity=r,this.monitorInput=o,this.startObserver()}static{l(this,"DOMMutationDependentCache")}static{this.instances={}}static getInstance(e,t){let r=this.makeNameForCache(e,t?.flags);n.instances[r]||(n.instances[r]=new n({...t,name:t?.name??e}),t?.initialValue&&n.instances[r].set(t?.initialValue));let i=n.instances[r];return t?.invalidate&&i.invalidate(),i}static invalidateAll(){Object.values(n.instances).forEach(e=>e.invalidate())}static makeNameForCache(e,t){return`${e}${t?JSON.stringify(t):""}`}startObserver(){this.observer=new MutationObserver(e=>{e.every(this.shouldIgnoreMutationRecord)||(this.invalidate(),this.monitorInput&&e.forEach(t=>{t.addedNodes.forEach(r=>{if(r.nodeType===Node.ELEMENT_NODE&&r.nodeType===Node.ELEMENT_NODE){let i=r;i.matches(this.inputEnabledSelectors)||i.isContentEditable?this.monitorInputEnabledElement(i):Array.from(i.querySelectorAll("*")).filter(o=>o.matches&&o.matches(this.inputEnabledSelectors)||o.isContentEditable).forEach(this.monitorInputEnabledElement)}})}))}),this.observer.observe(this.target,{childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0}),this.monitorInput&&this.startInputMonitoring()}startInputMonitoring(){this.monitoredTextElements=pe(this.inputEnabledSelectors),this.monitoredTextElements.forEach(this.monitorInputEnabledElement)}get(){return this.log("get","has cache:",!!this.cache),this.cache}set(e){this.disabled||(this.cache=e)}hasCache(){return this.log("hasCache",!!this.cache),!!this.cache}invalidate(){this.set(void 0)}log(...e){this.logActivity&&console.log(`[DOMMutationDependentCache] ${this.name?`[${this.name}]`:""}:`,...e)}};function Xe(n,e,t=!0){try{if(!n.ownerDocument)return!1;let r=n.ownerDocument.defaultView;return r?n instanceof r[e]||n instanceof r.top?.[e]||t&&XR(n,e.toString()):!1}catch{}return!1}l(Xe,"isNodeInstanceOf");function XR(n,e){if(typeof n!="object"||n===null)return!1;let t=Object.getPrototypeOf(n);for(;t!==null;){if(t.constructor&&t.constructor.name===e)return!0;t=Object.getPrototypeOf(t)}return!1}l(XR,"isNodeInstanceOfAlt");function ni(n,e){return e??n?.ownerDocument?.defaultView??window}l(ni,"getElementWindow");async function mf(n,e,t){if(!e.length)return[];let r=n.ownerDocument;if(r===document)return[];let i=e.find(a=>a.contentDocument===r);if(!i)return[];let o=await t(i);return[...await mf(i,e,t),o]}l(mf,"getParentFramesSelectors");function ty({rootDocument:n=document,ignoredIframesSelectors:e=[],flags:t={}}={}){let r=l(u=>u.filter(f=>!e.some(h=>f.matches(h))),"makeReturnValue"),i=Nt.getInstance("playwrightElementSelectorGeneratorIframes",{log:!1,flags:t});if(i.hasCache())return r(i.get());let o=n.defaultView,a=pe("iframe",o?.document);return i.set(a),r(a)}l(ty,"getIframes");var sy=hs(ua());var ps=["button","select","input","textarea","option","a","[role=button]","[role=checkbox]","[role=radio]","[role=link]","[type=button]","[aria-disabled=false]",'[id^="react-select"]',"label[for]","canvas"],ny=["pointer","grab","text","vertical-text","zoom-in","zoom-out","help"],iy=["onClick","onMouseDown","onKeyDown","onKeyPress","onInput","onSelect","onDoubleClick","onDragStart","onDrag","onDragEnd","onDragOver","onDrop","onToggle","onMouseEnter"],gf=["onclick","onmousedown","onkeydown","onkeypress","oninput","onselect","ondblclick","ondragstart","ondrag","ondragend","ondragover","ondrop","ontoggle","onmouseenter"],hr=[":hover",":focus",":active","\\:hover","\\:focus","\\:active"];var Mt=class{static{l(this,"PlaywrightElementSelectorGenerator")}async injectSelectorsAndLocators(e,{testIdSelector:t,searchParentFrames:r=!0}={}){let i=e.map(o=>({container:o,removedAttributes:this.stripNodeAttributes(o.element)}));return i=await Promise.all(i.map(async o=>{let{selector:a,locator:u,parentFramesSelectors:f}=await this.getSelectorAndLocator(o.container.element,{testIdSelector:t,searchParentFrames:r,stripAttributes:!0});return{...o,selector:a,locator:u,parentFramesSelectors:f}})),i=await Promise.all(i.map(async o=>{if(!o.removedAttributes.id&&!o.removedAttributes.originalClasses||(this.restoreNodeAttributes(o.container.element,o.removedAttributes),window.playwright.$(o.selector)!==void 0))return o;let a=await this.getSelectorAndLocator(o.container.element,{testIdSelector:t,searchParentFrames:r,stripAttributes:!1});return console.log(`Selector ${o.selector} is not valid, generated new one: ${a.selector}`),Object.assign(o,a),o})),i.map(o=>{let{container:a,selector:u,locator:f,parentFramesSelectors:h}=o;return{...a,selector:u,locator:f,parentFramesSelectors:h}})}stripNodeAttributes(e){let t=e,r,i;t.id&&(r=t.id,t.removeAttribute("id"));try{if(i=t.getAttribute("class"),i&&typeof i=="string"){let o=i.split(" ").filter(a=>!a.startsWith("css-")&&!a.startsWith("jss-")&&!hr.includes(a)).join(" ");t.setAttribute("class",o)}else i=void 0}catch(o){return console.warn("[playwright selector generator] error with class filtering",o),{}}return{id:r,originalClasses:i}}restoreNodeAttributes(e,t){let r=e,{id:i,originalClasses:o}=t;i&&r.setAttribute("id",i),o&&r.setAttribute("class",o)}getElementWindowPlaywright(e){let t=e.ownerDocument.defaultView;return t?(t!==window&&!t.playwright&&(t.playwright=window.playwright),t.playwright):window.playwright}async safeGetSelectorAndLocator(e,{retriesLeft:t=3}={}){try{try{return window.playwright.generateSelectorAndLocator(e)}catch{return this.getElementWindowPlaywright(e).generateSelectorAndLocator(e)}}catch{return t>0?(await(0,sy.default)(500),this.safeGetSelectorAndLocator(e,{retriesLeft:t-1})):{selector:"",locator:""}}}async getSelectorAndLocator(e,{testIdSelector:t,searchParentFrames:r=!0,stripAttributes:i=!0,ignoredIframesSelectors:o=[],rootDocument:a=document,flags:u={}}={}){try{if(!e)return null;let f=r?await mf(e,ty({rootDocument:a,ignoredIframesSelectors:o,flags:u}),async S=>(await this.getSelectorAndLocator(S,{searchParentFrames:!1})).selector):[],h=e,p=this.getTestAttributeSelector(h,t);if(p)return{selector:p,locator:`locator("${p}")`,parentFramesSelectors:f};let g;i&&(g=this.stripNodeAttributes(e));let{selector:y,locator:w}=await this.safeGetSelectorAndLocator(h);return g&&(this.restoreNodeAttributes(e,g),await this.getElementWindowPlaywright(e).$(y)!==e&&({selector:y,locator:w}=await this.safeGetSelectorAndLocator(h))),{selector:y,locator:w,parentFramesSelectors:f}}catch(f){return console.log("get selector and locator error",e,f),{selector:"",locator:""}}}async findIframeWindowByParentFrameSelectors(e=[]){let t=window.top;try{if(e&&e.length>0)for(let r of e){let i=await t.playwright.$(r);i||(i=await window.playwright.$(r)),i||(i=pe(r)[0]),i?t=i.contentWindow:console.warn("Failed to find iframe window by parent frame selectors",r)}}catch(r){console.log("find iframe window by parent frame selectors error",r,e)}return t}async selector(e,t){let r;try{r=await((await this.findIframeWindowByParentFrameSelectors(t)).playwright??window.playwright).$(e)}catch(i){console.log("selector error",e,i)}return r??this.selectFromFirstIframe(e)}getFirstIframeContentWindow(){let e=document.querySelector("iframe");if(!e)return;let t=e.contentWindow;return t.playwright||(t.playwright=window.playwright),t}async selectFromFirstIframe(e){let t=this.getFirstIframeContentWindow();if(t)try{return await t.playwright.$(e)}catch{console.log("selector error",e)}}getTestAttributeSelector(e,t){let r=["data-cy","data-testid","data-test-id","data-test"];for(let o of[t,...r])if(o&&e.getAttribute(o)){let a=`[${o}='${e.getAttribute(o)}']`;if(pe(a).length===1)return a;if(pe(a).length>1){let f=Array.from(pe(a)).indexOf(e);return`${a} >> nth=${f}`}}}escapeBackslash(e){return e.replace(/\\/g,"\\\\")}};var fa=class{constructor(e){this.attributes={};this.classes={};if(typeof e=="object")for(let t in e)this[t]=e[t];else if(typeof e=="string"){let t=JSON.parse(e);for(let r in t)this[r]=t[r]}}static{l(this,"ESRAElementMetadata")}serialize(){return JSON.stringify(this)}};var ms=(i=>(i[i.Query=0]="Query",i[i.Intersection=1]="Intersection",i[i.Interactables=2]="Interactables",i[i.All=3]="All",i))(ms||{});var oy=l((n,{tag:e="*"}={})=>pe(e).filter(t=>t.innerText?.trim()===n.trim()),"findElementsWithText");function dr(n){let e=n.getRootNode();switch(e.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:return ZR(n,e);default:return n.innerText}}l(dr,"getInnerText");function ZR(n,e){let t=n.querySelectorAll("slot");if(!t.length)return n.innerText;let r=n.cloneNode(!0),i=r.querySelectorAll("slot");return t.forEach((o,a)=>{let u=o.assignedNodes();i[a].innerText=u.map(f=>{switch(f.nodeType){case Node.TEXT_NODE:return f.textContent;case Node.ELEMENT_NODE:return f.innerText}}).filter(f=>!!f).join(`
`)}),r.innerText.trim()}l(ZR,"extractInnerTextForElementInShadowDOM");var cy=hs(ly());var yf=class{constructor(){this.weightsSum=0;this.config={attributes:{qualification:{globalUniquenessThreshold:.99,tagUniquenessThreshold:.99},decisionWeight:this.makeWeight(2/5)},classes:{qualification:{globalUniquenessThreshold:.99,tagUniquenessThreshold:.99},decisionWeight:this.makeWeight(2/5)},tagName:{decisionWeight:this.makeWeight(3/5)},style:{inlineWeight:.6,computedWeight:.4,decisionWeight:this.makeWeight(2/5)},innerText:{decisionWeight:this.makeWeight(3/5),qualification:{exactMatchMax:20,containsMatchMax:10,maxLength:256,minLength:1},ignoreSimilarityScoreBelow:.6},innerFeatures:{decisionWeight:this.makeWeight(4/5)},visualVicinity:{decisionWeight:this.makeWeight(1/5)},structuralVicinity:{decisionWeight:this.makeWeight(1/5)}}}static{l(this,"ESRASimilarityConfigClass")}makeWeight(e){return this.weightsSum+=e,e}get(){return this.config}weight(e){return e/this.weightsSum}},Ve=new yf;var da=class{constructor(e){this.qualifiedAttributes=[];this.qualifiedAttributesMap={};this.qualifiedClasses=[];this.unqualifiedClasses=[];this.qualifiedInnerText=void 0;this.visualVicinityComparable=[];this.structuralVicinityComparable=[];this.innerFeaturesComparable=[];this.rank=l(e=>{if(this.isDealBreaker(e))return{score:0,scores:{}};let t=this.tagSimilarity(e),r=this.attributesSimilarity(e),i=this.classSimilarity(e),o=this.styleSimilarity(e),a=this.innerTextSimilarity(e),u=this.innerFeaturesSimilarity(e),f=this.visualVicinitySimilarity(e),h=this.structuralVicinitySimilarity(e),p=this.svgsSimilarity(e),g={tagScore:t,attributesScore:r,classesScore:i,styleScore:o,innerTextScore:a,innerFeaturesScore:u,visualVicinityScore:f,structuralVicinityScore:h,svgsScore:p},y={tagScore:Ve.weight(Ve.get().tagName.decisionWeight)*t,attributesScore:Ve.weight(Ve.get().attributes.decisionWeight)*r,classesScore:Ve.weight(Ve.get().classes.decisionWeight)*i,innerTextScore:Ve.weight(Ve.get().innerText.decisionWeight)*a,innerFeaturesScore:Ve.weight(Ve.get().innerFeatures.decisionWeight)*u,styleScore:Ve.weight(Ve.get().style.decisionWeight)*o,visualVicinityScore:Ve.weight(Ve.get().visualVicinity.decisionWeight)*f,structuralVicinityScore:Ve.weight(Ve.get().structuralVicinity.decisionWeight)*h};return{score:Object.values(y).reduce((S,E)=>S+E,0),scores:g}},"rank");this.targetElementESRAMetadata=e,this.setQualifiedAttributes(),this.setQualifiedClasses(),this.setQualifiedInnerText(),this.setVisualVicinityComparable(),this.setStructuralVicinityComparable(),this.setInnerFeaturesComparable()}static{l(this,"ESRASimilarity")}getQualifiedAttributes(){return this.qualifiedAttributes}getQualifiedClasses(){return this.qualifiedClasses}getQualifiedInnerText(){return this.qualifiedInnerText}setQualifiedAttributes(){let e=this.targetElementESRAMetadata.attributes,{qualifiedAttributes:t,qualifiedAttributesMap:r}=this.makeQualifiedAttributes(e);this.qualifiedAttributes=t,this.qualifiedAttributesMap=r}makeQualifiedAttributes(e,t){let r=Object.keys(e).filter(o=>{switch(t){case"input":if(o==="value")return!1;break}let a=e[o];for(let u in a)u.endsWith("Uniqenuess")&&(a[u.replace("Uniqenuess","Uniqueness")]=a[u]);return a.globalUniqueness>Ve.get().attributes.qualification.globalUniquenessThreshold||a.tagUniqueness>Ve.get().attributes.qualification.tagUniquenessThreshold}),i=r.reduce((o,a)=>(o[a]=e[a].value,o),{});return{qualifiedAttributes:r,qualifiedAttributesMap:i}}setQualifiedClasses(){this.qualifiedClasses=this.makeQualifiedClasses(this.targetElementESRAMetadata.classes),this.unqualifiedClasses=Object.keys(this.targetElementESRAMetadata.classes).filter(e=>!this.qualifiedClasses.includes(e))}isValidClass(e){return/^[A-Za-z_-][0-9A-Za-z_-]*$/.test(e)}makeQualifiedClasses(e){return Object.keys(e).filter(t=>{let r=e[t];return!this.isValidClass(t)||t.startsWith("jss")||t.startsWith("css-")||t===":hover"?!1:r.globalUniqueness>Ve.get().classes.qualification.globalUniquenessThreshold||r.tagUniqueness>Ve.get().classes.qualification.tagUniquenessThreshold})}setQualifiedInnerText(){this.qualifiedInnerText=this.makeQualifiedInnerText(this.targetElementESRAMetadata.innerText)}makeQualifiedInnerText(e){return e&&e.content?.length<=Ve.get().innerText.qualification.maxLength&&e.content?.length>=Ve.get().innerText.qualification.minLength?e:null}makeBasicElementPropertiesComparable(e){return e.reduce((t,r)=>{let i=r.position?`${r.tag}.${r.position.slice(0,2).join(",")}`:r.tag,o=`${i}+${r.relativePosition}`,a=this.makeQualifiedClasses(r.classes).map(p=>`${i}.${p}`),u=[];this.makeQualifiedAttributes(r.attributes).qualifiedAttributes.forEach(p=>{u.push(`${i}[${p}]`),u.push(`${i}[${p}]=${r.attributes[p].value}`)});let f=r.feature?this.makeInnerFeaturesComparable([r.feature],{customTag:i,includeTag:!1,featureTypeWhiteList:[6]}):[],h=[...t,i,o,...a,...u,...f];return r.text&&(h.push(`${i}<>`),h.push(`${i}<${r.text}>`)),r.distance&&(h.push(`${i}->${r.distance}`),h.push(`${i}->[]${this.getDistanceRange(r.distance)}`)),h},[])}getDistanceRange(e){let t=[10,20,30,40,50,60,70,80,90,100];for(let r of t)if(e<r)return r;return t[t.length-1]}setVisualVicinityComparable(){this.visualVicinityComparable=this.makeVisualVicinityComparable(this.targetElementESRAMetadata.visualVicinity)}makeVisualVicinityComparable(e){return this.makeBasicElementPropertiesComparable(e)}setStructuralVicinityComparable(){this.structuralVicinityComparable=this.makeStructuralVicinityComparable(this.targetElementESRAMetadata.structuralVicinity)}makeStructuralVicinityComparable(e){return this.makeBasicElementPropertiesComparable(e)}makeInnerFeaturesComparable(e,{customTag:t=void 0,includeTag:r=!0,featureTypeWhiteList:i=void 0}={}){return e.reduce((o,a)=>{if(i&&!i.includes(a.type)||a.isHidden)return o;let u=t??a.tag,f=r?[...o,u]:o;switch(a.type){case 3:f.push(`${u}[type=${a.buttonType}]`);break;case 4:a.inputType&&f.push(`${u}[type=${a.inputType}]`),a.placeholder&&f.push(`${u}[placeholder=${a.placeholder}]`);break;case 6:a.components.forEach(h=>{let p=[];for(let g in h.attributes)p.push(`[${g}=${h.attributes[g]}]`);f.push(`${u}${p.join("")}`)});break}return"text"in a&&a.text&&(f.push(`${u}<>`),f.push(`${u}<${a.text}>`)),f},[])}setInnerFeaturesComparable(){this.innerFeaturesComparable=this.makeInnerFeaturesComparable(this.targetElementESRAMetadata.innerFeatures)}isDealBreaker(e){if(this.targetElementESRAMetadata.tag==="input"&&e.tag==="input"){let t=l(o=>o.type?o.type.value:"text","getType"),r=t(this.targetElementESRAMetadata.attributes),i=t(e.attributes);if(r!==i)return!0}return!1}tagSimilarity(e){return e.tag===this.targetElementESRAMetadata.tag?1:0}attributesSimilarity(e){let t=l(i=>[...this.keyValueObjectToArray(i),...Object.keys(i)],"makeJaccardParam"),{qualifiedAttributesMap:r}=this.makeQualifiedAttributes(e.attributes);return this.jaccard(t(this.qualifiedAttributesMap),t(r))}indicativeAttributesSimilarity(e){return this.qualifiedAttributesMap.placehoder&&e.attributes.placehoder&&this.qualifiedAttributesMap.placehoder===e.attributes.placehoder.value?1:0}classSimilarity(e){return this.jaccard(this.qualifiedClasses,this.makeQualifiedClasses(e.classes))}innerTextSimilarity(e){if(!this.targetElementESRAMetadata.innerText&&!e.innerText)return 1;let t=this.makeQualifiedInnerText(e.innerText);if(!this.qualifiedInnerText||!t)return 0;if(this.qualifiedInnerText.content===t.content)return 1;Object.values({email:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,url:/^(http|https):\/\/[^ "]+$/}).forEach(o=>{if(o.test(this.qualifiedInnerText.content)&&o.test(t.content))return .5});try{return new Date(this.qualifiedInnerText.content),new Date(t.content),.5}catch{}let i=l(o=>o.replace(/\d/g,"d").replace(/[a-zA-Z]/g,"s"),"template");return i(this.qualifiedInnerText.content)===i(t.content)?.5:0}innerFeaturesSimilarity(e){return this.jaccard(this.innerFeaturesComparable,this.makeInnerFeaturesComparable(e.innerFeatures))}visualVicinitySimilarity(e){return this.jaccard(this.visualVicinityComparable,this.makeVisualVicinityComparable(e.visualVicinity))}structuralVicinitySimilarity(e){return this.jaccard(this.structuralVicinityComparable,this.makeStructuralVicinityComparable(e.structuralVicinity))}styleSimilarity(e){let t=l(o=>[...this.keyValueObjectToArray(o),...Object.keys(o)],"makeJaccardParam"),r=this.jaccard(t(this.targetElementESRAMetadata.style.inline??{}),t(e.style.inline??{})),i=this.jaccard(t(this.targetElementESRAMetadata.style.computed??{}),t(e.style.computed??{}));return r*Ve.get().style.inlineWeight+i*Ve.get().style.computedWeight}svgsSimilarity(e){return!this.targetElementESRAMetadata.svgs&&!e.svgs||this.targetElementESRAMetadata.svgs&&e.svgs&&JSON.stringify(this.targetElementESRAMetadata.svgs)===JSON.stringify(e.svgs)?1:0}keyValueObjectToArray(e,t="=",r=void 0){let i=l(o=>r?r(e,o):e[o],"getValue");return Object.keys(e).map(o=>`${o}${t}${i(o)}`)}jaccard(e,t){return Array.isArray(e)&&Array.isArray(t)&&!e.length&&!t.length?1:(0,cy.jaccard)(e,t)}};var uy={examinedAttributes:["class","src","placeholder","href","checked","disabled","contenteditable","draggable","hidden","inputmode","role","title","name","type","readonly","size","required","multiple","min","max","step","maxlength","alt","loop","controls","poster"]};var si={attributesToExtract:uy.examinedAttributes,structuralVicinity:{type:"fixed",value:6,useDecayingLimit:!0},visualVicinity:{radius:50,scanStep:10},vicinityFeatureElementsOnly:!0,react:{}};var JR={rect:["width","height"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],line:["x1","y1","x2","y2"],polygon:["points"],polyline:["points"],path:["d"],text:["x","y"]},oi=class{constructor(e){this.document=e;this.limit=5;this.extractSVG=l(e=>Array.from(e.children).map(t=>{let r=JR[t.tagName.toLowerCase()];if(!r)return null;let i=r.reduce((a,u)=>{let f=t.getAttribute(u);return{...a,[u]:f}},{});return{tagName:t.tagName.toLowerCase(),attributes:i}}).filter(t=>!!t),"extractSVG")}static{l(this,"SVGsExtractor")}extract(e){let t=e.matches("svg")?[e]:e.querySelectorAll("svg");if(!(!t.length||t.length>this.limit))return Array.from(t).map(this.extractSVG)}};function bs(n){if(!n)return!1;let e=n.getBoundingClientRect();return e.top<=window.innerHeight&&e.left<=window.innerWidth&&e.bottom>=0&&e.right>=0}l(bs,"isElementInViewport");function pa(n,e=!0){let t=window.getComputedStyle(n),r=t.opacity==="0";return{visible:t.visibility!=="hidden"&&t.display!=="none"&&(!e||!r),isTransparent:r}}l(pa,"isElementVisibleByStyles");function fy(n,e,t=!0,r=!0){let i=n.getBoundingClientRect(),o=e.getBoundingClientRect(),a=i.left<o.right&&i.right>o.left,u=i.top<o.bottom&&i.bottom>o.top;return(!t||a)&&(!r||u)}l(fy,"elementsOverlap");function hy(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView;if(!t)return null;let r=n.ownerDocument,i={top:0,left:0,right:t.innerWidth||r.documentElement.clientWidth,bottom:t.innerHeight||r.documentElement.clientHeight},o={top:Math.max(e.top,i.top),left:Math.max(e.left,i.left),right:Math.min(e.right,i.right),bottom:Math.min(e.bottom,i.bottom),height:0,width:0};return o.width=o.right-o.left,o.height=o.bottom-o.top,o.width>0&&o.height>0?o:null}l(hy,"getOverlappingRectangleWithViewport");function vf(n){try{return getComputedStyle(n).position==="fixed"?!0:!n.parentElement||n.parentElement===document.body?!1:vf(n.parentElement)}catch(e){return console.error("isAncestorOrSelfFixed",e),!1}}l(vf,"isAncestorOrSelfFixed");function wf(n){let{top:e}=n.getBoundingClientRect();return e<0?-e:0}l(wf,"getHeightOfCroppedElementAboveViewport");function Sf(n){let{bottom:e}=n.getBoundingClientRect(),t=window.innerHeight;return e>t?e-t:0}l(Sf,"getHeightsOfCroppedElementBelowViewport");var mt=class{static{l(this,"ScrollHelper")}constructor(e){this.element=e,this.elRect=this.element.getBoundingClientRect()}scrollIntoView({dontScrollIfAlreadyInView:e=!0}={}){if(e&&bs(this.element))return this;if(this.getScrollableParentsPositions(),!this.initialScrollPositions.length)return this;if(this.element.scrollIntoView({block:"center",inline:"center"}),!bs(this.element))for(let t of this.initialScrollPositions){let r=t.element.getBoundingClientRect();if(this.elRect.top<r.top||this.elRect.bottom>r.bottom){let i=this.elRect.top-r.top+t.element.scrollTop;t.element.scrollTop=i}}return this}restore(){this.initialScrollPositions&&this.initialScrollPositions.forEach(({element:e,top:t,left:r})=>{try{e.scroll(r,t)}catch(i){console.warn("[ScrollHelper/restore] couldn't restore initial scroll for",{element:e,top:t,left:r},i)}})}static getScrollData(e){let t=l(u=>{let f=u==="top"?"scrollTop":"scrollLeft",h=e[f];try{if(e[f]=h+1,e[f]!==h||(e[f]=h-1,e[f]!==h))return!0}finally{e[f]=h}return!1},"tryScroll"),i=e.scrollHeight>e.clientHeight&&t("top"),a=e.scrollWidth>e.clientWidth&&t("left");return{canScrollY:i,canScrollX:a,progressY:i?e.scrollTop/(e.scrollHeight-e.clientHeight):void 0,progressX:a?e.scrollLeft/(e.scrollWidth-e.clientWidth):void 0}}static scrollScrollableElement(e,t,r){let i=t==="y",o=i?e.scrollHeight:e.scrollWidth,a=i?e.clientHeight:e.clientWidth,u=i?e.scrollTop:e.scrollLeft,f;switch(r){case"forward":f=u+a;break;case"backwards":f=Math.max(0,u-a);break;case"end":f=o-a;break;case"start":f=0;break;default:if(typeof r=="number"){let h=Math.max(0,Math.min(r,100));f=(o-a)*h/100}else return console.log(`Invalid length parameter: expected "next", "end", "start", or a number, but received ${r}`),{result:!1,error:`Invalid parameter: expected "next", "end", "start", or a number, but received ${r}`};break}if(f=Math.max(0,Math.min(f,o-a)),console.log("ScrollHelper/scrollScrollableElement: new, left, top",f,e.scrollLeft,e.scrollTop),i){if(e.scrollTop===f)return{result:!1,error:"The element is already scrolled to the desired position"};e.scrollTop=f}else{if(e.scrollLeft===f)return{result:!1,error:"The element is already scrolled to the desired position"};e.scrollLeft=f}return{result:!0}}getScrollableParentsPositions(){this.initialScrollPositions=[];let e=fr(this.element);for(;e!=null;)(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)&&this.initialScrollPositions.push({element:e,top:e.scrollTop,left:e.scrollLeft}),e=fr(e)}};function vt(n,e={}){let{markTransparentElementsAsHidden:t=!0,markElementsHiddenByTransparentElementAsVisible:r=!1,scrollIntoView:i=!0,useCache:o=!1}=e;if(o){let y=QR(n,{markTransparentElementsAsHidden:t,markElementsHiddenByTransparentElementAsVisible:r,scrollIntoView:i});if(y)return y}let a,u={isHidden:!0},f=l((y,w=!0)=>(w&&a&&a.restore(),o&&eA(n,y,{markTransparentElementsAsHidden:t,markElementsHiddenByTransparentElementAsVisible:r}),{...u,...y}),"prepareResult");if(!n)return f({isHidden:!0});n=n.tagName==="OPTION"&&(n.closest("select")||n.closest("datalist"))||n;let{visible:h,isTransparent:p}=pa(n,t);if(u.isTransparent=p,!h)return f({isHidden:!0});if(tA(n,{scrollIntoView:i}))return f({isHidden:!0});try{let S=function(T){let N=T;for(;N;){if(N.nodeType===11)return[N,N.ownerDocument.defaultView];N=N.parentNode}};var g=S;l(S,"findShadowDocument"),i&&(a=new mt(n).scrollIntoView());let y=hy(n);if(!y)return f({isHidden:!0});let w=[[y.width/2,y.height/2,!0],[Math.max(y.width*.01,1),Math.max(y.height*.01,1)],[Math.min(y.width*.99,y.width-1),Math.max(y.height*.01,1)],[Math.max(y.width*.01,1),Math.min(y.height*.99,y.height-1)],[Math.min(y.width*.99,y.width-1),Math.min(y.height*.99,y.height-1)]],[E,v]=S(n)??[n.ownerDocument,n.ownerDocument.defaultView],M,A=ni(n);if(A&&n instanceof A.HTMLInputElement&&n.id&&n.type&&["checkbox","radio"].includes(n.type)){let T=pe(`label[for="${n.id}"]`,E);T.length&&(M=T[0])}for(let[T,N,U]of w){let G=y.left+T>=0&&y.left+T<=v.innerWidth?y.left+T:T,Q=y.top+N>=0&&y.top+N<=v.innerHeight?y.top+N:N,W=E.elementFromPoint(G,Q);if(W===n)return f({isHidden:!1,clickOffset:U?void 0:{x:T,y:N}});if(!W)continue;if(U===!0&&W.shadowRoot)return f(vt(W,e));let z=W;for(;z;){if(z===n||M&&M===z)return f({isHidden:!1,clickOffset:U?void 0:{x:T,y:N}});z=fr(z)}if(r)try{let re=E.elementsFromPoint(G,Q);for(let B of re){if(B===n)return f({isHidden:!1,clickOffset:U?void 0:{x:T,y:N},isBehindTransparentElement:!0});let q=v.getComputedStyle(B),k=B.getBoundingClientRect(),ee=n.getBoundingClientRect(),X=dy(ee,k);if(!(dy(k,ee)&&!nA(k,ee)&&!py(q))&&(py(q)||rA(k,y)))break}}catch(re){console.error("Error while checking transparent elements over interactable",re)}}return a&&(a.restore(),a=void 0),M?vt(M,e):f({isHidden:!0})}catch(y){throw y}}l(vt,"isElementHidden");var gy=l(n=>{let e=Nt.getInstance("isElementHidden",{log:!1,flags:n}),t=e.get();return t||(t=new Map,e.set(t)),t},"getIsHiddenMapFromCache");function QR(n,e={}){let t=gy(e);return t.has(n)?t.get(n):void 0}l(QR,"getIsElementHiddenFromCache");var eA=l((n,e,t={})=>{gy(t).set(n,e)},"setIsElemenetHiddenInCache");function tA(n,{scrollIntoView:e=!0}={}){let t=n.parentElement,r=window.getComputedStyle(n);if(r.position==="absolute"||r.position==="fixed")return!1;let i;e&&(i=new mt(n).scrollIntoView());let o=l(u=>(i&&i.restore(),u),"restoreAndReturn"),a=ni(n);if(!a)return o(!1);for(;t;){if(!(t instanceof a.Element))return o(!1);let u=window.getComputedStyle(t);if(u.position==="absolute"||u.position==="fixed")return o(!1);let f=u.overflowX==="hidden",h=u.overflowY==="hidden";if((f||h)&&!fy(t,n,f,h))return o(!0);t=t.parentElement}return o(!1)}l(tA,"isHiddenByOverflow");function dy(n,e){try{let t=Math.max(0,Math.min(n.right,e.right)-Math.max(n.left,e.left)),r=Math.max(0,Math.min(n.bottom,e.bottom)-Math.max(n.top,e.top)),i=t*r,o=n.width*n.height,a=e.width*e.height,u=Math.min(o,a)*.5;return i>u}catch(t){return console.error("Error while checking large overlap",t),!1}}l(dy,"isSignificantOverlap");function py(n){return!(n.opacity==="0"||n.visibility==="hidden"||/rgba\(\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*0\s*\)/.test(n.backgroundColor))}l(py,"isNotTransparent");function rA(n,e,t=.2){let r=my(n),i=my(e),o=r.widthRatio/i.widthRatio,a=r.heightRatio/i.heightRatio;return o>1+t||a>1+t}l(rA,"isElementSignificantlyLarger");function my(n){let e={width:window.innerWidth,height:window.innerHeight,top:0,left:0,bottom:window.innerHeight,right:window.innerWidth},t=n.width/e.width,r=n.height/e.height;return{widthRatio:t,heightRatio:r}}l(my,"getNormalizedElementSize");function nA(n,e,t=.2){let r=n.width/e.width,i=n.height/e.height,o=n.width-e.width,a=n.height-e.height,u=window.innerWidth,f=window.innerHeight,h=o/u,p=a/f,g=(r-1+(i-1))/2,y=(h+p)/2;return g*y>t}l(nA,"isSignificantlyLargerNormalized");var An=l(n=>vt(n,{useCache:!0}).isHidden,"getIsElementHidden"),ma=l((n,e)=>{let t=n.tagName.toLowerCase();switch(t){case"img":case"video":case"audio":return{type:0,tag:t,src:n.getAttribute("src"),size:{width:n.clientWidth,height:n.clientHeight},screenSize:{width:window.innerWidth,height:window.innerHeight},isRoot:e,isHidden:An(n)};case"svg":return{type:6,tag:t,components:new oi(document).extract(n)[0],isRoot:e,isHidden:An(n)};case"a":return{type:2,tag:t,href:n.getAttribute("href"),text:n.innerText,isRoot:e,isHidden:An(n)};case"button":return{type:3,tag:t,text:n.innerText,buttonType:n.getAttribute("type")||"button",isRoot:e,isHidden:An(n)};case"input":return{type:4,tag:t,inputType:n.getAttribute("type"),placeholder:n.getAttribute("placeholder"),isRoot:e,isHidden:An(n)};case"table":case"form":case"textarea":case"iframe":case"select":return{type:1,tag:t,isRoot:e,isHidden:An(n)}}if(n.innerHTML.trim()===n.innerText&&n.innerHTML.length)return{type:5,tag:t,text:iA(n.innerHTML),isRoot:e,isHidden:An(n)}},"extractFeatureFromElement"),iA=l(n=>n.length>256?n.substring(0,256)+"...":n,"shortenText");var vs=l(n=>Object.keys(n||{}).reduce((e,t)=>{let r=n[t];return r&&(e[t]=r),e},{}),"sanitizeStaticMetadata"),yy=l((n,e)=>{let t=vs(n),r=vs(e),i=l(u=>!u||Object.keys(u).length===0,"isEmpty");if(i(t)&&i(r))return!0;if(i(t)||i(r))return!1;let o=Object.keys(t).sort(),a=Object.keys(r).sort();if(o.length!==a.length||!o.every((u,f)=>u===a[f]))return!1;for(let u in t)if(t[u]!==r[u])return!1;return!0},"staticDataMatch"),ga=l(n=>{let e=vs(n);return!(!e||!Object.keys(e).length)},"hasStaticData");function by(n,e){let t=n.filter(u=>!u.isRoot);t.length>10&&(t=Object.values(t.reduce((u,f)=>{let h=`${f.type}_${f.tag}`;return u[h]?u:{...u,[h]:f}},{})));let r=Math.min(Math.ceil(t.length*e.innerFeatures.mandatoryPercentage),e.innerFeatures.mandatoryMax),o=l(u=>u.reduce((f,h)=>{let p=f.map(g=>[...g,h]).filter(g=>g.length<=r);return f.concat(p)},[[]]),"combinations")(t).filter(u=>u.length===r),a=[];return o.forEach(u=>{let f=[];u.forEach(p=>f.push(ai(p))),ya(f).forEach(p=>a.push(p.map(g=>`:has(${g})`).join("")))}),a}l(by,"getInnerFeaturesQueries");function ya(n){if(!n.length)return[];let e=[],t=n.length-1;function r(i,o){for(let a=0,u=n[o].length;a<u;a++){let f=i.slice(0);f.push(n[o][a]),o===t?e.push(f):r(f,o+1)}}return l(r,"helper"),r([],0),e}l(ya,"cartesian");function ai(n){let e=[n.tag];switch(n.type){case 0:n.src&&e.push(`${n.tag}[src="${n.src}"]`);break;case 2:e.push(`${n.tag}[href="${n.href}"]`);break;case 3:break;case 4:e.push(`${n.tag}[type="${n.inputType}"]`),n.placeholder&&e.push(`${n.tag}[placeholder="${n.placeholder}"]`);break}return e}l(ai,"getFeatureSelector");var vy=l((n,e,{contains:t=!1,matchWholeWord:r=!1}={})=>(e=e.replaceAll(`
`,"\\A ").replaceAll('"','\\"'),t?r?`[${n}="${e}"],[${n}*="${e} "],[${n}*=" ${e} "],[${n}*=" ${e}"]`:`[${n}*="${e}"]`:`[${n}="${e}"]`),"buildAttributeEqualityQuerySelector"),Ef=l((n,e,{contains:t=!1,matchWholeWord:r=!1}={})=>t?r?n===e||n.startsWith(e)||n.includes(` ${e} `)||n.endsWith(e):n.includes(e):n===e,"checkStringEquality");var li=class{constructor(e){this.document=e;this.elementsByQueryCache={}}static{l(this,"AttributesExtractor")}getElementsByQuery(e){return this.elementsByQueryCache[e]||(this.elementsByQueryCache[e]=pe(e,this.document)),this.elementsByQueryCache[e]}extract({element:e,setClass:t,setAttribute:r,getElementsInStructuralVicinity:i,getElementsInVisualVicinity:o}){for(let a=0;a<e.attributes.length;++a){let{name:u,value:f}=e.attributes[a];if(si.attributesToExtract.includes(u)&&typeof f=="string"){if(u==="class"){f.split(" ").forEach(h=>{h.length&&t(h,this.processAttribute({element:e,getElementsInStructuralVicinity:i,getElementsInVisualVicinity:o},u,h,{contains:!0,matchWholeWord:!0}))});continue}r(u,this.processAttribute({element:e,getElementsInStructuralVicinity:i,getElementsInVisualVicinity:o},u,f))}}}processAttribute({element:e,getElementsInStructuralVicinity:t,getElementsInVisualVicinity:r},i,o,a={}){let u=this.getElementsByQuery("*"),f=vy(i,o,a),h=this.getElementsByQuery(f),p=this.getElementsByQuery(`${e.tagName.toLowerCase()}`),g=h.filter(v=>v.tagName===e.tagName),y=t?t():[],w=y.filter(v=>v.element.attributes[i]&&Ef(v.element.attributes[i].value,o,a)),S=r?r():[],E=S.filter(v=>v.element.attributes[i]&&Ef(v.element.attributes[i].value,o,a));return{value:o,globalUniqueness:1-h.length/u.length,tagUniqueness:1-g.length/p.length,structuralVicinityUniqueness:t?1-w.length/y.length:void 0,visualVicinityUniqueness:r?1-E.length/S.length:void 0}}};var ba=class{constructor(e){this.el=null;this.serializedElement="";this.attributes={};this.classes={};this.getElementsInStructuralVicinity=l(()=>this.structuralVicinityData.elementsInStructuralVicinity,"getElementsInStructuralVicinity");this.setElementStructuralVicinityData=l(e=>{this.structuralVicinityData=e},"setElementStructuralVicinityData");this.setElementVisualVicinityData=l(e=>{this.visualVicinityData=e},"setElementVisualVicinityData");this.getElementsInVisualVicinity=l(()=>this.visualVicinityData,"getElementsInVisualVicinity");this.setSerializedElement=l(e=>{this.serializedElement=e},"setSerializedElement");this.setAttribute=l((e,t)=>{this.attributes[e]=t},"setAttribute");this.setClass=l((e,t)=>{this.classes[e]=t},"setClass");this.setInnerText=l(e=>{this.innerText=e},"setInnerText");this.setStyle=l(e=>{this.style=e},"setStyle");this.setTag=l(e=>{this.tag=e},"setTag");this.setReact=l(e=>{this.react=e},"setReact");this.setInnerFeatures=l(e=>{this.innerFeatures=e},"setInnerFeatures");this.setPositioning=l(e=>{this.positioning=e},"setPositioning");this.setSVGs=l(e=>{this.svgs=e},"setSVGs");this.el=e,this.attributesExtractor=new li(this.el.ownerDocument)}static{l(this,"ESRAElementMetadataBuilder")}serialize(){}getSerializedElement(){return this.serializedElement}get element(){return this.el}getAttributes(){return this.attributes}getClasses(){return this.classes}getStyle(){return this.style}getInlineStyle(){return this.style.inline}getComputedStyle(){return this.style.computed}getTag(){return this.tag}getInnerFeatures(){return this.innerFeatures}getInnerText(){return this.innerText}getSVGs(){return this.svgs}toMetadata(){return{structuralVicinity:this.makeStructuralVicinityMetadata(),visualVicinity:this.makeVisualVicinityMetadata(),serializedElement:this.getSerializedElement(),attributes:this.getAttributes(),classes:this.getClasses(),innerText:this.getInnerText(),tag:this.getTag(),style:this.getStyle(),innerFeatures:this.getInnerFeatures(),staticCandidates:this.extractStaticCandidates(),positioning:this.positioning,svgs:this.getSVGs()}}extractStaticCandidates(){return vs({text:this.extractStaticTextCandidate(),labeled:this.extractLabeled(),labeling:this.extractLabeling(),svgTitle:this.extractSVGTitle()})}makeVicinityMetadata(e,t){return e.reduce((r,i)=>{let{qualified:o,feature:a}=this.isVicinityQualifiedElement(i.element);if(!o)return r;let u={},f={};this.attributesExtractor.extract({element:i.element,setClass:l((p,g)=>u[p]=g,"setClass"),setAttribute:l((p,g)=>f[p]=g,"setAttribute")});let h={tag:i.element.tagName.toLowerCase(),classes:u,attributes:f,text:this.extractTextForMetadata(i.element),feature:a,relativePosition:this.element.compareDocumentPosition(i.element),...t(i)};return r.push(h),r},[])}makeStructuralVicinityMetadata(){return this.makeVicinityMetadata(this.getElementsInStructuralVicinity(),e=>({position:e.position}))}makeVisualVicinityMetadata(){return this.makeVicinityMetadata(this.getElementsInVisualVicinity(),e=>({position:[e.position],distance:e.distance}))}isVicinityQualifiedElement(e){if(e===this.element)return{qualified:!1};if(!si.vicinityFeatureElementsOnly)return{qualified:!0};let t=ma(e);return{qualified:!!t,feature:t}}extractTextForMetadata(e){if(e.innerHTML!==e.innerText)return;let t=e.innerHTML;return t.length>256?t.substring(0,256)+"...":t}extractStaticTextCandidate(){switch(this.tag){case"input":case"textarea":return this.attributes?.placeholder?.value;default:return this.innerText?.content}}extractLabeling(){if(this.element.tagName.toLowerCase()==="label")return dr(this.element);let e=In(this.element,"label");if(e&&this.attributeExists(e.getAttribute("for")))return dr(e);try{if(this.element.id&&this.element.id.length&&pe(`[aria-labelledby="${this.element.id}"]`).length)return dr(this.element)}catch(t){console.error("extractLabeling error",t)}}extractLabeled(){let e=this.element.getAttribute("aria-label");if(this.attributeExists(e))return e;let t=In(this.element,"label");if(t&&!this.attributeExists(t.getAttribute("for")))return dr(t);if(this.element.id&&this.element.id.length)try{let i=pe(`label[for=${this.element.id}]`);if(i.length)return dr(i[0])}catch{return}let r=this.element.getAttribute("aria-labelledby");if(this.attributeExists(r)){let i=pe(r.split(" ").map(o=>`#${o}`).join(","));if(i.length)return dr(i[0])}}extractSVGTitle(){try{if(this.element.tagName.toLowerCase()!=="svg")return;let e=this.element.querySelector("title");return e?dr(e):void 0}catch(e){console.error("extractSVGTitle error",e)}}attributeExists(e){return e&&e.length>0}};var va=class{constructor(e,t){this.structuralVicinityData={elementsInStructuralVicinity:[],html:""};this.element=e,this.config=t}static{l(this,"StructuralVicinityExtractor")}getInitialLimit(){switch(this.config.type){case"ratio":return document.querySelectorAll("*").length*this.config.value;case"fixed":return this.config.value}}calculate(){let e=Date.now().toString();return this.structuralVicinityData.html=this.populateStructuralVicinity(this.element,["element"],{runId:e,step:0,limit:this.getInitialLimit()}),this.structuralVicinityData.elementsInStructuralVicinity.forEach(t=>t.element.attributes.removeNamedItem(`checksum-radial-traverse-${e}`)),this.structuralVicinityData}populateStructuralVicinity(e,t,r){let{runId:i,step:o,limit:a}=r;if(!e||o>a||e.attributes[`checksum-radial-traverse-${i}`]!==void 0)return"";this.structuralVicinityData.elementsInStructuralVicinity.push({element:e,position:t}),e.setAttribute(`checksum-radial-traverse-${i}`,o.toString());let h={runId:i,step:o+1,limit:this.config.useDecayingLimit?a-1:a},p=this.populateStructuralVicinity(fr(e),[...t,"parent"],h),g=this.populateStructuralVicinity(e.previousElementSibling,[...t,"left-sibling"],h),y=this.populateStructuralVicinity(e.nextElementSibling,[...t,"right-sibling"],h),w=[];ey(e).map((E,v)=>w.push(this.populateStructuralVicinity(E,[...t,"child"],h)));let S=g+e.outerHTML.replace(e.innerHTML,w.join(""))+y;return p&&!p.includes(e.outerHTML)?p.replace("></",`>${S}</`):p?p.replace(e.outerHTML,S):S}};var ws=class{constructor(e,t){this.document=e;this.config=t;this.debug=!1;this.sampleBoxColors={0:"green",1:"orange",2:"red",3:"blue"}}static{l(this,"VisualVicinityExtractor")}calculate(e){let t=[],r=this.config.radius,i=this.config.scanStep,o=e.getBoundingClientRect();for(let a=o.left-r;a<o.left+o.width+r;a+=i)for(let u=o.top-r;u<o.top+o.height+r;u+=i){let f=a+i/2,h=u+i/2;if(this.doesRectContain(o,{left:a,top:u,right:a+i,bottom:u+i})){this.addTrace(f,h,i,3);continue}let p=this.document.elementFromPoint(f,h);if(!p)continue;let g=p.getBoundingClientRect();if(g.width>r*2&&g.height>r*2||this.doesRectContain(g,o)){this.addTrace(f,h,i,2);continue}if(!!t.find(({element:E})=>E===p)){this.addTrace(f,h,i,1);continue}let{position:w,distance:S}=this.getPosition(o,g);t.push({element:p,position:w,distance:S}),this.addTrace(f,h,i,0)}return t}getPosition(e,t){let{x:r,y:i}=this.getCenter(t),{x:o,y:a}=this.getCenter(e),u=l(()=>{let h=r-o,p=i-a;return h<0&&p<0?"top-left":h>0&&p<0?"top-right":h<0&&p>0?"bottom-left":h>0&&p>0?"bottom-right":h===0&&p<0?"top":h===0&&p>0?"bottom":h<0&&p===0?"left":h>0&&p===0?"right":"center"},"calcPosition");return{distance:l(()=>Number(Math.sqrt(Math.pow(o-r,2)+Math.pow(a-i,2)).toFixed(2)),"calcDistance")(),position:u()}}getCenter(e){return{x:e.width/2+e.left,y:e.height/2+e.top}}addTrace(e,t,r,i){if(!this.debug)return;let o=this.document.createElement("xdiv");o.setAttribute("style",`position: absolute; width: ${r}px; height: ${r}px; top: ${t}px; left: ${e}px; background: ${this.sampleBoxColors[i]}; z-index: 999999999999;opacity:0.4`),this.document.getElementsByTagName("body")[0].prepend(o)}doesRectContain(e,t){return t.left>=e.left&&t.right<=e.right&&t.top>=e.top&&t.bottom<=e.bottom}doRectsOverlap(e,t){let r=e.right<t.left,i=e.left>t.right,o=e.top>t.bottom,a=e.top<t.top;return!(r||i||o||a)}};window.vve=new ws({radius:50,scanStep:10});var Ss=hs(wy());window.resq$=Ss.resq$;window.resq$$=Ss.resq$$;var xf=class{static{l(this,"Provider")}extract(e){let t=this.findParentComponent(e,{ignoreBaseElement:!0});return{component:t,parentComponent:this.findParentComponent(t.node)}}findParentComponent(e,{ignoreBaseElement:t=!1,baseElement:r=void 0}={}){let i=(0,Ss.resq$$)("*",e.parentElement).find(o=>o.children.length===1&&o.children[0].node===e);return r=r??e,i&&(t||i.node!==r)?this.parseRESQresult(i):this.findParentComponent(e.parentElement,{baseElement:r,ignoreBaseElement:t})}parseRESQresult(e){if(!e)return;let t=l(r=>{switch(typeof r){case"string":return[r];case"object":return Array.isArray(r)?r.map(t):Object.keys(r)}},"parseState");return{name:e.name,node:e.node,isFragment:e.isFragment,stateTokens:t(e.state),propsNames:Object.keys(e.props),hasChildren:!!e.children.length}}},Sy=new xf;var Mf=class{static{l(this,"Provider")}extract(e){return{component:void 0,parentComponent:void 0}}},QW=new Mf;var Sa=class{constructor(e,t){this.provider=Sy;this.element=e,this.config=t}static{l(this,"ReactMetadataExtractor")}extract(){return this.provider.extract(this.element)}};var Ea=class{constructor(e){this.document=e;this.tagBaseComputedStyle={}}static{l(this,"StyleExtractor")}extract({element:e,setStyle:t}){let r=e.tagName.toLowerCase();try{if(!this.tagBaseComputedStyle[r]){let i=this.document.createElement(r);this.document.getElementsByTagName("body")[0].prepend(i),this.tagBaseComputedStyle[r]=this.sanitzieStyle(window.getComputedStyle(i)),i.remove()}}catch(i){if(console.error("Failed to extract style for tag",r,i),!this.tagBaseComputedStyle[r])return}t({inline:this.sanitzieStyle(e.style,{acceptEmptyValue:!1}),computed:this.diffComputedStyle(this.tagBaseComputedStyle[r],this.sanitzieStyle(window.getComputedStyle(e)))})}diffComputedStyle(e,t){return l((o,a)=>Object.keys(a).reduce((u,f)=>o[f]===a[f]?u:{...u,[f]:a[f]},{}),"oneWayDiff")(e,t)}sanitzieStyle(e,{acceptEmptyValue:t=!0}={}){return Object.keys(e).reduce((r,i)=>{if(!isNaN(i))return r;let o=e[i];return!t&&!o||(r[i]=o),r},{})}};var kr=class{constructor(){this.makeFeatureNode=l((e,t=void 0)=>{let r=e.nodeType===Node.ELEMENT_NODE;return{type:e.nodeType,tag:r?e.tagName.toLowerCase():void 0,feature:r?ma(e,t):void 0,children:[],isRoot:t}},"makeFeatureNode");this.includeRootElements=!0;this.rootElementsTypeExceptions=[5];this.cache=Nt.getInstance("innerFeaturesExtractor",{log:!1})}static{l(this,"InnerFeaturesExtractor")}extract(e){let t=[],r=this.makeFeatureNode(e,!0);return this.walk(e,r,t),t}getMapFromCache(){let e=this.cache.get();return e||(e=new Map,this.cache.set(e)),e}getFeatureNodeFromCache(e){let t=this.getMapFromCache();return t.has(e)?t.get(e):void 0}addFeatureNodeToCache(e,t){let r=this.getMapFromCache();r.set(e,t),this.cache.set(r)}walk(e,t,r){let i=!1;ri(e).forEach(a=>{let u=this.getFeatureNodeFromCache(a)??this.makeFeatureNode(a),f=this.walk(a,u,r);f&&t.children.push(u),i||=f});let o=!!t.feature;return o&&(!t.isRoot||this.shouldIncludeRootNode(t))&&r.push(t.feature),this.addFeatureNodeToCache(e,t),o||i}shouldIncludeRootNode(e){return!(!this.includeRootElements||this.rootElementsTypeExceptions.includes(e.type))}};window.inner_features_extractor=new kr;var ci=class{static{l(this,"InnerTextExtractor")}constructor(){}extract(e){return{content:dr(e)??void 0}}};var Ca=class{constructor(e){this.document=e}static{l(this,"PositioningExtractor")}extract(e){let{top:t,bottom:r,left:i,right:o}=e.getBoundingClientRect(),a=document.documentElement.scrollHeight,u=document.documentElement.scrollWidth;return{viewport:{size:{height:window.innerHeight,width:window.innerWidth},element:{top:this.normalize(t,window.innerHeight),bottom:this.normalize(r,window.innerHeight),left:this.normalize(i,window.innerWidth),right:this.normalize(o,window.innerWidth)}},document:{size:{height:a,width:u},element:{top:this.normalize(t+window.scrollY,a),bottom:this.normalize(r+window.scrollY,a),left:this.normalize(i+window.scrollX,u),right:this.normalize(o+window.scrollX,u)}}}}normalize(e,t){return e/t}};var rr=class{constructor(e,t){this.stats={serializeElement:0,populateElementsInStructuralVicinity:0,populateElementsInVisualVicinity:0,extractAttributes:0,extractInnerText:0,extractStyle:0,extractTag:0,extractInnerFeatures:0,extractPositioning:0,extractSVGComponents:0,final:0};this.xmlSerializer=new XMLSerializer,this.document=e,this.config=t??si,this.visualVicinityExtractor=new ws(this.document,this.config.visualVicinity),this.styleExtractor=new Ea(this.document),this.innerFeaturesExtractor=new kr,this.innerTextExtractor=new ci,this.positioningExtractor=new Ca(this.document)}static{l(this,"ESRAElementMetadataExtractor")}isSameDocument(e){return this.document===e}extract(e){let t=new mt(e).scrollIntoView(),r=Date.now(),i=new ba(e);return this.serializeElement(i),this.stats.serializeElement+=Date.now()-r,r=Date.now(),this.populateElementsInStructuralVicinity(i),this.stats.populateElementsInStructuralVicinity+=Date.now()-r,r=Date.now(),this.populateElementsInVisualVicinity(i),this.stats.populateElementsInVisualVicinity+=Date.now()-r,r=Date.now(),this.extractAttributes(i),this.stats.extractAttributes+=Date.now()-r,r=Date.now(),this.extractInnerText(i),this.stats.extractInnerText+=Date.now()-r,r=Date.now(),this.extractStyle(i),this.stats.extractStyle+=Date.now()-r,r=Date.now(),this.extractTag(i),this.stats.extractTag+=Date.now()-r,r=Date.now(),this.extractInnerFeatures(i),this.stats.extractInnerFeatures+=Date.now()-r,r=Date.now(),this.extractPositioning(i),this.stats.extractPositioning+=Date.now()-r,r=Date.now(),this.extractSVGComponents(i),this.stats.extractSVGComponents+=Date.now()-r,r=Date.now(),t.restore(),this.stats.final+=Date.now()-r,i}extractReact({element:e,setReact:t}){t(new Sa(e,this.config.react).extract())}extractTag({element:e,setTag:t}){t(e.tagName.toLowerCase())}extractPositioning({element:e,setPositioning:t}){t(this.positioningExtractor.extract(e))}extractSVGComponents({element:e,setSVGs:t}){t(new oi(this.document).extract(e))}serializeElement({element:e,setSerializedElement:t}){}extractAttributes({element:e,setClass:t,setAttribute:r,getElementsInStructuralVicinity:i,getElementsInVisualVicinity:o}){return new li(this.document).extract({element:e,setClass:t,setAttribute:r,getElementsInStructuralVicinity:i,getElementsInVisualVicinity:o})}populateElementsInStructuralVicinity({element:e,setElementStructuralVicinityData:t}){t(new va(e,this.config.structuralVicinity).calculate())}populateElementsInVisualVicinity({element:e,setElementVisualVicinityData:t}){t(this.visualVicinityExtractor.calculate(e))}extractInnerText({element:e,setInnerText:t}){t(this.innerTextExtractor.extract(e))}extractStyle({element:e,setStyle:t}){return this.styleExtractor.extract({element:e,setStyle:t})}extractInnerFeatures({element:e,setInnerFeatures:t}){t(this.innerFeaturesExtractor.extract(e))}};var rn=class extends Error{static{l(this,"TimeoutError")}constructor(){super("Timeout")}};var nn=l(n=>{},"consoleTime"),sn=l(n=>{},"consoleTimeEnd");var xa=l((n,e=[])=>{if(!n)return n;let t=window.getComputedStyle(n).cursor,r=l((o,a=()=>!1)=>{let u=o;for(;u;){let f=u.parentElement;if(!f||f.nodeType!==Node.ELEMENT_NODE)return u;if(a(f))break;if(window.getComputedStyle(f).cursor!==t)return u;u=f}},"getClosestElementWithCursor"),i=l(o=>{try{if(o.matches("label[for]")&&!o.matches(ps.concat(e).filter(a=>!!a&&a!=="label[for]").join(","))){let a=o.getAttribute("for");if(!a)return!1;let u=document.getElementById(a);if(!u)return!1;let f=u.getAttribute("type");return f?u.tagName.toLowerCase()==="input"&&["checkbox","radio"].includes(f):!1}}catch(a){console.error("interactableParentIsValid",o,a)}return!0},"interactableParentIsValid");try{if("isContentEditable"in n&&n.isContentEditable)return n;if("closest"in n){let a=In(n,ps.concat(e).filter(u=>!!u).join(","));if(a&&i(a)){if(a===n)return n;let u=r(n,f=>f===a);return u||a}}if(["auto","default","context-menu","help","progress","wait"].includes(t))return n;let o=r(n);return o||n}catch(o){return console.error("getCompoundInteractableRootElement",n,o),n}},"getCompoundInteractableRootElement");var On=l((n=document,e={},{allowDisabled:t=!1,useDataVisibleAttributes:r=!0,excludeCrossOriginIframes:i=!1,includeCompoundInnerElements:o=!0}={})=>{let a=Nt.getInstance("getAllInteractableHTMLElements",{target:n,log:!1}),u=Date.now(),f=l(w=>{let S=w.reduce((E,v)=>!t&&v.state.disabled?E:[...E,v.element],[]);return console.log("[getAllInteractableHTMLElements] done, took",Date.now()-u,"ms"),S},"makeResponse");if(a.hasCache())return f(a.get());let h=pe("*",n,{excludeCrossOriginIframes:i});nn("[getAllInteractableHTMLElements] items");let p=h.reduce((w,S)=>{let E="disabled"in S&&!!S.disabled;return S.matches(ps.concat(e.appSpecificInteractableElementsSelectors||[]).filter(M=>!!M).join(","))||ny.includes(window.getComputedStyle(S).cursor)||S.isContentEditable&&!S.parentElement?.isContentEditable||!e.ignoreEventListenersWhenDeterminingInteractability&&(gf.some(M=>S[M])||oA(S))?[...w,{element:S,disabled:E}]:w},[]);sn("[getAllInteractableHTMLElements] items"),nn("[getAllInteractableHTMLElements] getCompoundInteractableRootElement");let g=p.reduce((w,S)=>{let E=xa(S.element,e.appSpecificInteractableElementsSelectors||[]),v=w.find(M=>M.element===E);return v?!S.disabled&&v.state.disabled&&(v.state.disabled=!1):w.push({element:E,state:{disabled:S.disabled}}),o&&S.element!==E&&sA(S.element)&&w.push({...S,state:{disabled:S.disabled}}),w},[]);sn("[getAllInteractableHTMLElements] getCompoundInteractableRootElement"),nn("[getAllInteractableHTMLElements] isElementHidden");let y=g.filter(({element:w})=>{if(r){if(!w)return!1;let S=w.getAttribute("checksum-data-visible");if(S){let E=S==="true",v=w.getAttribute("checksum-data-visible-under-transparent-element")==="true",M=w.getAttribute("checksum-data-transparently-visible")==="true";return E&&!v||M}}return!vt(w,{markTransparentElementsAsHidden:!1}).isHidden});return sn("[getAllInteractableHTMLElements] isElementHidden"),a.set(y),f(y)},"getAllInteractableHTMLElements"),sA=l(n=>["img","video","audio","a","svg","button"].includes(n.tagName.toLowerCase())?!0:Array.from(n.childNodes).filter(e=>e.nodeType===Node.TEXT_NODE&&e.textContent.trim()).length>0,"hasUniqueFeatures"),oA=l(n=>{if(n._checksum_eventListenerList){let r=n._checksum_eventListenerList;if(gf.some(i=>r[i.slice(2)]))return!0}let e=Object.keys(n).find(r=>r.startsWith("__reactFiber")),t=e?n[e]:void 0;return!t||!t.memoizedProps?!1:iy.some(r=>t.memoizedProps[r])},"hasFrameworkInteractionListener");var Ln=class n{constructor(e,t){this.POSITIONING_SATISFACTORY_SCORE=1;this.targetElementStaticData={};this.qualifiedAttributes=[];this.qualifiedAttributesMap={};this.qualifiedClasses=[];this.candidateQueries=[];this.candidates=[];this.uniqueCandidates=[];this.queryCandidates=[];this.interactableCandidates=[];this.rankedCandidates=[];this.filteredAndSortedRankedCandidates=[];this.finalCandidates=[];this.weightsSum=0;this.config={innerText:{dropIfMoreThanNCandidates:5},innerFeatures:{mandatoryPercentage:.6,mandatoryMax:6},results:{scorePercentile:.75,epsilon:.01}};this.getSelectionResultForCandidate=l(e=>{let t=Nt.getInstance("getElementSelectionResult",{log:!1}),r=t.get();if(r||(r=new Map,t.set(r)),r.has(e))return r.get(e);this.checkTimeout();let i=this.extractMetadata(e),{score:o,scores:a}=this.similarity.rank(i),u={score:o,candidate:e,scores:a,esraMetadata:i};return r.set(e,u),t.set(r),u},"getSelectionResultForCandidate");this.targetElementESRAMetadata=e,this.targetElementStaticData=t||e.staticMetadata,this.similarity=new da(this.targetElementESRAMetadata),this.esraMetadataExtractor=new rr(document)}static{l(this,"ESRASelector")}makeWeight(e){return this.weightsSum+=e,e}getWeight(e){return e/this.weightsSum}extractMetadata(e){return new fa(this.esraMetadataExtractor.extract(e).toMetadata())}getLastSelectionLogs(e=5){if(!this.candidates?.length)return{};let t=new XMLSerializer,r=l((a,u=50)=>a.slice(0,u).map(f=>({score:f.score,metadata:f.metadata,element:t.serializeToString(f.candidate).substring(0,200)})),"printCandidates"),i=this.rankedCandidates[Math.min(this.rankedCandidates.length-1,e)].score,o=l(a=>r(a,e).filter(u=>u.score>=i),"filterByScore");return{candidatesQuery:this.candidateQueries.filter(a=>!!a.length).join(","),totalUniqueCandidates:this.uniqueCandidates.length,topRankingCandidates:r(this.rankedCandidates,e),topRemovedCandidates:{hidden:o(this.removedCandidates.hidden),staticData:o(this.removedCandidates.static)}}}selectByPositioning(){let e=this.targetElementESRAMetadata.positioning;if(window.innerWidth!==e.viewport.size.width||window.innerHeight!==e.viewport.size.height)return;let t=document.elementFromPoint(e.viewport.element.left*window.innerWidth,e.viewport.element.top*window.innerHeight),r=this.extractMetadata(t),{score:i}=this.similarity.rank(r);return i>=this.POSITIONING_SATISFACTORY_SCORE?{candidate:t,score:i,esraMetadata:r}:void 0}collectCandidates(){this.setQualifiedAttributesQueries(),this.setQualifiedClassesQueries(),this.setInnerFeaturesQueries(),this.candidates=[];let e=this.candidateQueries.filter(t=>!!t.length).join(",");this.queryCandidates=[],e.length&&(this.queryCandidates=pe(e)),this.interactableCandidates=[],this.elementsFiltering!==0&&(this.interactableCandidates=On())}select(){console.log("selecting elements, filtering: ",ms[this.elementsFiltering]);let e=l(o=>{switch(o){case 0:return this.queryCandidates;case 1:return this.intersectElements(this.queryCandidates,this.interactableCandidates);case 2:return this.interactableCandidates;case 3:return this.queryCandidates.concat(this.interactableCandidates)}},"filterElements");for(;this.candidates=e(this.elementsFiltering),!(this.candidates.length||this.elementsFiltering===3);)console.log(`no candidates found, expanding selection to ${ms[this.elementsFiltering+1]}`),this.elementsFiltering++;console.log("# of query/interactable/total candidates:",this.queryCandidates.length,this.interactableCandidates.length,this.candidates.length),this.candidates.push(...this.getInnerTextCandidates()),this.candidates.length||this.candidates.push(...this.getTagCandidates()),this.uniqueCandidates=this.candidates.filter((o,a,u)=>u.indexOf(o)===a);let t=n.limitChildren;t?.length&&(t=t.map(o=>({...o,parent:document.querySelector(o.selector)})),this.uniqueCandidates=this.uniqueCandidates.filter(o=>{for(var a of t)if(a.parent&&this.isDescendant(a.parent,o)&&a.limit--<=0)return!1;return!0})),this.checkTimeout(),this.rankedCandidates=this.uniqueCandidates.filter(o=>o instanceof ni(o).HTMLElement||o instanceof ni(o).SVGElement).map(this.getSelectionResultForCandidate).sort((o,a)=>a.score-o.score),this.removedCandidates={hidden:[],static:[]},this.filteredAndSortedRankedCandidates=this.rankedCandidates.filter(o=>{let{isHidden:a,clickOffset:u}=this.isHidden(o.candidate);return a===!0?(this.removedCandidates.hidden.push(o),!1):(u&&(o.clickOffset=u),ga(this.targetElementStaticData)&&!yy(this.formatStaticCandidates(o.esraMetadata.staticCandidates),this.targetElementStaticData)?(o.metadata=JSON.stringify(o.esraMetadata.staticCandidates),this.removedCandidates.static.push(o),!1):!0)}),this.checkTimeout(),this.removedCandidates.hidden.slice().reverse().forEach((o,a,u)=>{o.candidate.tagName==="INPUT"&&this.filteredAndSortedRankedCandidates.find(f=>f.score>.1&&f.candidate.contains(o.candidate))&&(this.removedCandidates.hidden.splice(u.length-1-a,1),this.filteredAndSortedRankedCandidates.push(o))}),this.filteredAndSortedRankedCandidates=this.filteredAndSortedRankedCandidates.sort((o,a)=>a.score-o.score);let r=this.filteredAndSortedRankedCandidates.length*(1-this.config.results.scorePercentile);this.finalCandidates=[];let i=null;for(let o=0;o<this.filteredAndSortedRankedCandidates.length;++o){let a=this.filteredAndSortedRankedCandidates[o];if(o>=r&&(!i||i.score-a.score>this.config.results.epsilon))break;i=a,this.finalCandidates.push(a)}return this.finalCandidates}intersectElements(e,t){let r=l((u,{useElementSize:f=!1}={})=>{let h=new Set;return u.forEach(p=>{let g=2,y=p;for(;y&&g-- >0&&(h.add(y),!(f&&Math.abs(y.parentElement.clientWidth-y.clientWidth)>y.clientWidth*.3&&Math.abs(y.parentElement.clientHeight-y.clientHeight)>y.clientHeight*.3));)y=y.parentElement}),h},"normalize"),i=r(e),o=r(t),a=new Set;return i.forEach(u=>{o.has(u)&&a.add(u)}),Array.from(a)}checkTimeout(){if(n.timeout&&Date.now()-this.processStartTime>n.timeout)throw new rn}selectOne({elementsFiltering:e=1,minSelectionScore:t=.3}={}){try{if(this.elementsFiltering=e,this.processStartTime=Date.now(),this.targetElementESRAMetadata.tag==="html"){let i=document.querySelector("html");return{candidate:i,score:1,esraMetadata:this.extractMetadata(i)}}let r=this.selectByPositioning();if(r)return console.log("Found element by positioning"),r;for(this.collectCandidates();;){let i=this.select();if(!i.length)break;let{score:o}=i[0];if(o<t&&this.elementsFiltering!==3){this.elementsFiltering++,console.log(`Best matching element is below threshold (${o}/${t}), expanding selection to ${ms[this.elementsFiltering]}`);continue}return i[0]}}catch(r){r instanceof rn?console.error("ESRA selection timeout"):console.error("ESRA selection error",r)}return{candidate:void 0,score:0,esraMetadata:void 0}}getFinalCandidates(){return this.finalCandidates}setQualifiedAttributesQueries(){this.candidateQueries.push(this.similarity.getQualifiedAttributes().map(e=>`[${e}="${this.targetElementESRAMetadata.attributes[e].value}"]`).join(","))}setQualifiedClassesQueries(e=[]){this.candidateQueries.push(this.similarity.getQualifiedClasses().map(t=>`.${t}`).join(","))}setInnerFeaturesQueries(){let e=by(this.targetElementESRAMetadata.innerFeatures,this.config).map(t=>`*${t}`);this.candidateQueries.push(...e)}getInnerTextCandidates(){let e=this.similarity.getQualifiedInnerText();if(!e)return[];let t=oy(e.content);return t.length>this.config.innerText.dropIfMoreThanNCandidates?[]:t}getTagCandidates(){return pe(this.targetElementESRAMetadata.tag)}isDescendant(e,t){return e.contains(t)}formatStaticCandidates(e){let t={};return Object.keys(e).forEach(r=>{t[r]=e[r]}),t}isHidden(e){return vt(e,{useCache:!0})}};var aA=Object.defineProperty,lA=l((n,e,t)=>e in n?aA(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,"__defNormalProp"),P=l((n,e,t)=>lA(n,typeof e!="symbol"?e+"":e,t),"__publicField"),Ey,cA=Object.defineProperty,uA=l((n,e,t)=>e in n?cA(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,"__defNormalProp$1"),Cy=l((n,e,t)=>uA(n,typeof e!="symbol"?e+"":e,t),"__publicField$1"),ue=(n=>(n[n.Document=0]="Document",n[n.DocumentType=1]="DocumentType",n[n.Element=2]="Element",n[n.Text=3]="Text",n[n.CDATA=4]="CDATA",n[n.Comment=5]="Comment",n))(ue||{}),xy={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},My={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},Ma={},fA=l(()=>!!globalThis.Zone,"isAngularZonePresent$1");function Vh(n){if(Ma[n])return Ma[n];let e=globalThis[n],t=e.prototype,r=n in xy?xy[n]:void 0,i=!!(r&&r.every(u=>{var f,h;return!!((h=(f=Object.getOwnPropertyDescriptor(t,u))==null?void 0:f.get)!=null&&h.toString().includes("[native code]"))})),o=n in My?My[n]:void 0,a=!!(o&&o.every(u=>{var f;return typeof t[u]=="function"&&((f=t[u])==null?void 0:f.toString().includes("[native code]"))}));if(i&&a&&!fA())return Ma[n]=e.prototype,e.prototype;try{let u=document.createElement("iframe");document.body.appendChild(u);let f=u.contentWindow;if(!f)return e.prototype;let h=f[n].prototype;return document.body.removeChild(u),h?Ma[n]=h:t}catch{return t}}l(Vh,"getUntaintedPrototype$1");var Tf={};function un(n,e,t){var r;let i=`${n}.${String(t)}`;if(Tf[i])return Tf[i].call(e);let o=Vh(n),a=(r=Object.getOwnPropertyDescriptor(o,t))==null?void 0:r.get;return a?(Tf[i]=a,a.call(e)):e[t]}l(un,"getUntaintedAccessor$1");var If={};function kb(n,e,t){let r=`${n}.${String(t)}`;if(If[r])return If[r].bind(e);let o=Vh(n)[t];return typeof o!="function"?e[t]:(If[r]=o,o.bind(e))}l(kb,"getUntaintedMethod$1");function hA(n){return un("Node",n,"childNodes")}l(hA,"childNodes$1");function dA(n){return un("Node",n,"parentNode")}l(dA,"parentNode$1");function pA(n){return un("Node",n,"parentElement")}l(pA,"parentElement$1");function mA(n){return un("Node",n,"textContent")}l(mA,"textContent$1");function gA(n,e){return kb("Node",n,"contains")(e)}l(gA,"contains$1");function yA(n){return kb("Node",n,"getRootNode")()}l(yA,"getRootNode$1");function bA(n){return!n||!("host"in n)?null:un("ShadowRoot",n,"host")}l(bA,"host$1");function vA(n){return n.styleSheets}l(vA,"styleSheets$1");function wA(n){return!n||!("shadowRoot"in n)?null:un("Element",n,"shadowRoot")}l(wA,"shadowRoot$1");function SA(n,e){return un("Element",n,"querySelector")(e)}l(SA,"querySelector$1");function EA(n,e){return un("Element",n,"querySelectorAll")(e)}l(EA,"querySelectorAll$1");function CA(){return Vh("MutationObserver").constructor}l(CA,"mutationObserverCtor$1");function xA(n,e,t){try{if(!(e in n))return()=>{};let r=n[e],i=t(r);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:r}})),n[e]=i,()=>{n[e]=r}}catch{return()=>{}}}l(xA,"patch$1");var wt={childNodes:hA,parentNode:dA,parentElement:pA,textContent:mA,contains:gA,getRootNode:yA,host:bA,styleSheets:vA,shadowRoot:wA,querySelector:SA,querySelectorAll:EA,mutationObserver:CA,patch:xA};function Uh(n){return n.nodeType===n.ELEMENT_NODE}l(Uh,"isElement");function As(n){let e=n&&"host"in n&&"mode"in n&&wt.host(n)||null;return!!(e&&"shadowRoot"in e&&wt.shadowRoot(e)===n)}l(As,"isShadowRoot");function Os(n){return Object.prototype.toString.call(n)==="[object ShadowRoot]"}l(Os,"isNativeShadowDom");function MA(n){return n.includes(" background-clip: text;")&&!n.includes(" -webkit-background-clip: text;")&&(n=n.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),n}l(MA,"fixBrowserCompatibilityIssuesInCSS");function TA(n){let{cssText:e}=n;if(e.split('"').length<3)return e;let t=["@import",`url(${JSON.stringify(n.href)})`];return n.layerName===""?t.push("layer"):n.layerName&&t.push(`layer(${n.layerName})`),n.supportsText&&t.push(`supports(${n.supportsText})`),n.media.length&&t.push(n.media.mediaText),t.join(" ")+";"}l(TA,"escapeImportStatement");function Vf(n){try{let e=n.rules||n.cssRules;if(!e)return null;let t=n.href;!t&&n.ownerNode&&n.ownerNode.ownerDocument&&(t=n.ownerNode.ownerDocument.location.href);let r=Array.from(e,i=>Pb(i,t)).join("");return MA(r)}catch{return null}}l(Vf,"stringifyStylesheet");function Pb(n,e){if(RA(n)){let t;try{t=Vf(n.styleSheet)||TA(n)}catch{t=n.cssText}return n.styleSheet.href?nl(t,n.styleSheet.href):t}else{let t=n.cssText;return AA(n)&&n.selectorText.includes(":")&&(t=IA(t)),e?nl(t,e):t}}l(Pb,"stringifyRule");function IA(n){let e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return n.replace(e,"$1\\$2")}l(IA,"fixSafariColons");function RA(n){return"styleSheet"in n}l(RA,"isCSSImportRule");function AA(n){return"selectorText"in n}l(AA,"isCSSStyleRule");var Ds=class{static{l(this,"Mirror")}constructor(){Cy(this,"idNodeMap",new Map),Cy(this,"nodeMetaMap",new WeakMap)}getId(e){var t;return e?((t=this.getMeta(e))==null?void 0:t.id)??-1:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){let t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){let r=t.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,t)}replace(e,t){let r=this.getNode(e);if(r){let i=this.nodeMetaMap.get(r);i&&this.nodeMetaMap.set(t,i)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function Fb(){return new Ds}l(Fb,"createMirror$2");function tl({element:n,maskInputOptions:e,tagName:t,type:r,value:i,maskInputFn:o}){let a=i||"",u=r&&cn(r);return(e[t.toLowerCase()]||u&&e[u])&&(o?a=o(a,n):a="*".repeat(a.length)),a}l(tl,"maskInputValue");function cn(n){return n.toLowerCase()}l(cn,"toLowerCase");var Ty="__rrweb_original__";function OA(n){let e=n.getContext("2d");if(!e)return!0;let t=50;for(let r=0;r<n.width;r+=t)for(let i=0;i<n.height;i+=t){let o=e.getImageData,a=Ty in o?o[Ty]:o;if(new Uint32Array(a.call(e,r,i,Math.min(t,n.width-r),Math.min(t,n.height-i)).data.buffer).some(f=>f!==0))return!1}return!0}l(OA,"is2DCanvasBlank");function LA(n,e){return!n||!e||n.type!==e.type?!1:n.type===ue.Document?n.compatMode===e.compatMode:n.type===ue.DocumentType?n.name===e.name&&n.publicId===e.publicId&&n.systemId===e.systemId:n.type===ue.Comment||n.type===ue.Text||n.type===ue.CDATA?n.textContent===e.textContent:n.type===ue.Element?n.tagName===e.tagName&&JSON.stringify(n.attributes)===JSON.stringify(e.attributes)&&n.isSVG===e.isSVG&&n.needBlock===e.needBlock:!1}l(LA,"isNodeMetaEqual");function rl(n){let e=n.type;return n.hasAttribute("data-rr-is-password")?"password":e?cn(e):null}l(rl,"getInputType");function Gh(n,e){let t;try{t=new URL(n,e??window.location.href)}catch{return null}let r=/\.([0-9a-z]+)(?:$)/i,i=t.pathname.match(r);return i?.[1]??null}l(Gh,"extractFileExtension");function NA(n){let e="";return n.indexOf("//")>-1?e=n.split("/").slice(0,3).join("/"):e=n.split("/")[0],e=e.split("?")[0],e}l(NA,"extractOrigin");var _A=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,DA=/^(?:[a-z+]+:)?\/\//i,kA=/^www\..*/i,PA=/^(data:)([^,]*),(.*)/i;function nl(n,e){return(n||"").replace(_A,(t,r,i,o,a,u)=>{let f=i||a||u,h=r||o||"";if(!f)return t;if(DA.test(f)||kA.test(f))return`url(${h}${f}${h})`;if(PA.test(f))return`url(${h}${f}${h})`;if(f[0]==="/")return`url(${h}${NA(e)+f}${h})`;let p=e.split("/"),g=f.split("/");p.pop();for(let y of g)y!=="."&&(y===".."?p.pop():p.push(y));return`url(${h}${p.join("/")}${h})`})}l(nl,"absolutifyURLs");function Ta(n,e=!1){return e?n.replace(/(\/\*[^*]*\*\/)|[\s;]/g,""):n.replace(/(\/\*[^*]*\*\/)|[\s;]/g,"").replace(/0px/g,"0")}l(Ta,"normalizeCssString");function FA(n,e,t=!1){let r=Array.from(e.childNodes),i=[],o=0;if(r.length>1&&n&&typeof n=="string"){let a=Ta(n,t),u=a.length/n.length;for(let f=1;f<r.length;f++)if(r[f].textContent&&typeof r[f].textContent=="string"){let h=Ta(r[f].textContent,t),p=100,g=3;for(;g<h.length&&(h[g].match(/[a-zA-Z0-9]/)||h.indexOf(h.substring(0,g),1)!==-1);g++);for(;g<h.length;g++){let y=h.substring(0,g),w=a.split(y),S=-1;if(w.length===2)S=w[0].length;else if(w.length>2&&w[0]===""&&r[f-1].textContent!=="")S=a.indexOf(y,1);else if(w.length===1){if(y=y.substring(0,y.length-1),w=a.split(y),w.length<=1)return i.push(n),i;g=p+1}else g===h.length-1&&(S=a.indexOf(y));if(w.length>=2&&g>p){let E=r[f-1].textContent;if(E&&typeof E=="string"){let v=Ta(E).length;S=a.indexOf(y,v)}S===-1&&(S=w[0].length)}if(S!==-1){let E=Math.floor(S/u);for(;E>0&&E<n.length;){if(o+=1,o>50*r.length)return i.push(n),i;let v=Ta(n.substring(0,E),t);if(v.length===S){i.push(n.substring(0,E)),n=n.substring(E),a=a.substring(S);break}else v.length<S?E+=Math.max(1,Math.floor((S-v.length)/u)):E-=Math.max(1,Math.floor((v.length-S)*u))}break}}}}return i.push(n),i}l(FA,"splitCssText");function $A(n,e){return FA(n,e).join("/* rr_split */")}l($A,"markCssSplits");var HA=1,BA=new RegExp("[^a-z0-9-_:]"),ks=-2;function $b(){return HA++}l($b,"genId");function WA(n){if(n instanceof HTMLFormElement)return"form";let e=cn(n.tagName);return BA.test(e)?"div":e}l(WA,"getValidTagName$1");var ui,Iy,VA=/^[^ \t\n\r\u000c]+/,UA=/^[, \t\n\r\u000c]+/;function GA(n,e){if(e.trim()==="")return e;let t=0;function r(o){let a,u=o.exec(e.substring(t));return u?(a=u[0],t+=a.length,a):""}l(r,"collectCharacters");let i=[];for(;r(UA),!(t>=e.length);){let o=r(VA);if(o.slice(-1)===",")o=pi(n,o.substring(0,o.length-1)),i.push(o);else{let a="";o=pi(n,o);let u=!1;for(;;){let f=e.charAt(t);if(f===""){i.push((o+a).trim());break}else if(u)f===")"&&(u=!1);else if(f===","){t+=1,i.push((o+a).trim());break}else f==="("&&(u=!0);a+=f,t+=1}}}return i.join(", ")}l(GA,"getAbsoluteSrcsetString");var Ry=new WeakMap;function pi(n,e){return!e||e.trim()===""?e:zh(n,e)}l(pi,"absoluteToDoc");function zA(n){return!!(n.tagName==="svg"||n.ownerSVGElement)}l(zA,"isSVGElement");function zh(n,e){let t=Ry.get(n);if(t||(t=n.createElement("a"),Ry.set(n,t)),!e)e="";else if(e.startsWith("blob:")||e.startsWith("data:"))return e;return t.setAttribute("href",e),t.href}l(zh,"getHref");function Hb(n,e,t,r){return r&&(t==="src"||t==="href"&&!(e==="use"&&r[0]==="#")||t==="xlink:href"&&r[0]!=="#"||t==="background"&&(e==="table"||e==="td"||e==="th")?pi(n,r):t==="srcset"?GA(n,r):t==="style"?nl(r,zh(n)):e==="object"&&t==="data"?pi(n,r):r)}l(Hb,"transformAttribute");function Bb(n,e,t){return(n==="video"||n==="audio")&&e==="autoplay"}l(Bb,"ignoreAttribute");function jA(n,e,t){try{if(typeof e=="string"){if(n.classList.contains(e))return!0}else for(let r=n.classList.length;r--;){let i=n.classList[r];if(e.test(i))return!0}if(t)return n.matches(t)}catch{}return!1}l(jA,"_isBlockedElement");function il(n,e,t){if(!n)return!1;if(n.nodeType!==n.ELEMENT_NODE)return t?il(wt.parentNode(n),e,t):!1;for(let r=n.classList.length;r--;){let i=n.classList[r];if(e.test(i))return!0}return t?il(wt.parentNode(n),e,t):!1}l(il,"classMatchesRegex");function Wb(n,e,t,r){let i;if(Uh(n)){if(i=n,!wt.childNodes(i).length)return!1}else{if(wt.parentElement(n)===null)return!1;i=wt.parentElement(n)}try{if(typeof e=="string"){if(r){if(i.closest(`.${e}`))return!0}else if(i.classList.contains(e))return!0}else if(il(i,e,r))return!0;if(t){if(r){if(i.closest(t))return!0}else if(i.matches(t))return!0}}catch{}return!1}l(Wb,"needMaskingText");function qA(n,e,t){let r=n.contentWindow;if(!r)return;let i=!1,o;try{o=r.document.readyState}catch{return}if(o!=="complete"){let u=setTimeout(()=>{i||(e(),i=!0)},t);n.addEventListener("load",()=>{clearTimeout(u),i=!0,e()});return}let a="about:blank";if(r.location.href!==a||n.src===a||n.src==="")return setTimeout(e,0),n.addEventListener("load",e);n.addEventListener("load",e)}l(qA,"onceIframeLoaded");function YA(n,e,t){let r=!1,i;try{i=n.sheet}catch{return}if(i)return;let o=setTimeout(()=>{r||(e(),r=!0)},t);n.addEventListener("load",()=>{clearTimeout(o),r=!0,e()})}l(YA,"onceStylesheetLoaded");function KA(n,e){let{doc:t,mirror:r,blockClass:i,blockSelector:o,needsMask:a,inlineStylesheet:u,maskInputOptions:f={},maskTextFn:h,maskInputFn:p,dataURLOptions:g={},inlineImages:y,recordCanvas:w,keepIframeSrcFn:S,newlyAddedElement:E=!1,cssCaptured:v=!1}=e,M=XA(t,r);switch(n.nodeType){case n.DOCUMENT_NODE:return n.compatMode!=="CSS1Compat"?{type:ue.Document,childNodes:[],compatMode:n.compatMode}:{type:ue.Document,childNodes:[]};case n.DOCUMENT_TYPE_NODE:return{type:ue.DocumentType,name:n.name,publicId:n.publicId,systemId:n.systemId,rootId:M};case n.ELEMENT_NODE:return JA(n,{doc:t,blockClass:i,blockSelector:o,inlineStylesheet:u,maskInputOptions:f,maskInputFn:p,dataURLOptions:g,inlineImages:y,recordCanvas:w,keepIframeSrcFn:S,newlyAddedElement:E,rootId:M});case n.TEXT_NODE:return ZA(n,{doc:t,needsMask:a,maskTextFn:h,rootId:M,cssCaptured:v});case n.CDATA_SECTION_NODE:return{type:ue.CDATA,textContent:"",rootId:M};case n.COMMENT_NODE:return{type:ue.Comment,textContent:wt.textContent(n)||"",rootId:M};default:return!1}}l(KA,"serializeNode");function XA(n,e){if(!e.hasNode(n))return;let t=e.getId(n);return t===1?void 0:t}l(XA,"getRootId");function ZA(n,e){let{needsMask:t,maskTextFn:r,rootId:i,cssCaptured:o}=e,a=wt.parentNode(n),u=a&&a.tagName,f="",h=u==="STYLE"?!0:void 0,p=u==="SCRIPT"?!0:void 0;return p?f="SCRIPT_PLACEHOLDER":o||(f=wt.textContent(n),h&&f&&(f=nl(f,zh(e.doc)))),!h&&!p&&f&&t&&(f=r?r(f,wt.parentElement(n)):f.replace(/[\S]/g,"*")),{type:ue.Text,textContent:f||"",rootId:i}}l(ZA,"serializeTextNode");function JA(n,e){let{doc:t,blockClass:r,blockSelector:i,inlineStylesheet:o,maskInputOptions:a={},maskInputFn:u,dataURLOptions:f={},inlineImages:h,recordCanvas:p,keepIframeSrcFn:g,newlyAddedElement:y=!1,rootId:w}=e,S=jA(n,r,i),E=WA(n),v={},M=n.attributes.length;for(let T=0;T<M;T++){let N=n.attributes[T];Bb(E,N.name,N.value)||(v[N.name]=Hb(t,E,cn(N.name),N.value))}if(E==="link"&&o){let T=Array.from(t.styleSheets).find(U=>U.href===n.href),N=null;T&&(N=Vf(T)),N&&(delete v.rel,delete v.href,v._cssText=N)}if(E==="style"&&n.sheet){let T=Vf(n.sheet);T&&(n.childNodes.length>1&&(T=$A(T,n)),v._cssText=T)}if(E==="input"||E==="textarea"||E==="select"){let T=n.value,N=n.checked;v.type!=="radio"&&v.type!=="checkbox"&&v.type!=="submit"&&v.type!=="button"&&T?v.value=tl({element:n,type:rl(n),tagName:E,value:T,maskInputOptions:a,maskInputFn:u}):N&&(v.checked=N)}if(E==="option"&&(n.selected&&!a.select?v.selected=!0:delete v.selected),E==="dialog"&&n.open&&(v.rr_open_mode=n.matches("dialog:modal")?"modal":"non-modal"),E==="canvas"&&p){if(n.__context==="2d")OA(n)||(v.rr_dataURL=n.toDataURL(f.type,f.quality));else if(!("__context"in n)){let T=n.toDataURL(f.type,f.quality),N=t.createElement("canvas");N.width=n.width,N.height=n.height;let U=N.toDataURL(f.type,f.quality);T!==U&&(v.rr_dataURL=T)}}if(E==="img"&&h){ui||(ui=t.createElement("canvas"),Iy=ui.getContext("2d"));let T=n,N=T.currentSrc||T.getAttribute("src")||"<unknown-src>",U=T.crossOrigin,G=l(()=>{T.removeEventListener("load",G);try{ui.width=T.naturalWidth,ui.height=T.naturalHeight,Iy.drawImage(T,0,0),v.rr_dataURL=ui.toDataURL(f.type,f.quality)}catch(Q){if(T.crossOrigin!=="anonymous"){T.crossOrigin="anonymous",T.complete&&T.naturalWidth!==0?G():T.addEventListener("load",G);return}else console.warn(`Cannot inline img src=${N}! Error: ${Q}`)}T.crossOrigin==="anonymous"&&(U?v.crossOrigin=U:T.removeAttribute("crossorigin"))},"recordInlineImage");T.complete&&T.naturalWidth!==0?G():T.addEventListener("load",G)}if(E==="audio"||E==="video"){let T=v;T.rr_mediaState=n.paused?"paused":"played",T.rr_mediaCurrentTime=n.currentTime,T.rr_mediaPlaybackRate=n.playbackRate,T.rr_mediaMuted=n.muted,T.rr_mediaLoop=n.loop,T.rr_mediaVolume=n.volume}if(y||(n.scrollLeft&&(v.rr_scrollLeft=n.scrollLeft),n.scrollTop&&(v.rr_scrollTop=n.scrollTop)),S){let{width:T,height:N}=n.getBoundingClientRect();v={class:v.class,rr_width:`${T}px`,rr_height:`${N}px`}}E==="iframe"&&!g(v.src)&&(n.contentDocument||(v.rr_src=v.src),delete v.src);let A;try{customElements.get(E)&&(A=!0)}catch{}return{type:ue.Element,tagName:E,attributes:v,childNodes:[],isSVG:zA(n)||void 0,needBlock:S,rootId:w,isCustom:A}}l(JA,"serializeElementNode");function $e(n){return n==null?"":n.toLowerCase()}l($e,"lowerIfExists");function QA(n,e){if(e.comment&&n.type===ue.Comment)return!0;if(n.type===ue.Element){if(e.script&&(n.tagName==="script"||n.tagName==="link"&&(n.attributes.rel==="preload"&&n.attributes.as==="script"||n.attributes.rel==="modulepreload")||n.tagName==="link"&&n.attributes.rel==="prefetch"&&typeof n.attributes.href=="string"&&Gh(n.attributes.href)==="js"))return!0;if(e.headFavicon&&(n.tagName==="link"&&n.attributes.rel==="shortcut icon"||n.tagName==="meta"&&($e(n.attributes.name).match(/^msapplication-tile(image|color)$/)||$e(n.attributes.name)==="application-name"||$e(n.attributes.rel)==="icon"||$e(n.attributes.rel)==="apple-touch-icon"||$e(n.attributes.rel)==="shortcut icon")))return!0;if(n.tagName==="meta"){if(e.headMetaDescKeywords&&$e(n.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&($e(n.attributes.property).match(/^(og|twitter|fb):/)||$e(n.attributes.name).match(/^(og|twitter):/)||$e(n.attributes.name)==="pinterest"))return!0;if(e.headMetaRobots&&($e(n.attributes.name)==="robots"||$e(n.attributes.name)==="googlebot"||$e(n.attributes.name)==="bingbot"))return!0;if(e.headMetaHttpEquiv&&n.attributes["http-equiv"]!==void 0)return!0;if(e.headMetaAuthorship&&($e(n.attributes.name)==="author"||$e(n.attributes.name)==="generator"||$e(n.attributes.name)==="framework"||$e(n.attributes.name)==="publisher"||$e(n.attributes.name)==="progid"||$e(n.attributes.property).match(/^article:/)||$e(n.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&($e(n.attributes.name)==="google-site-verification"||$e(n.attributes.name)==="yandex-verification"||$e(n.attributes.name)==="csrf-token"||$e(n.attributes.name)==="p:domain_verify"||$e(n.attributes.name)==="verify-v1"||$e(n.attributes.name)==="verification"||$e(n.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}l(QA,"slimDOMExcluded");function mi(n,e){let{doc:t,mirror:r,blockClass:i,blockSelector:o,maskTextClass:a,maskTextSelector:u,skipChild:f=!1,inlineStylesheet:h=!0,maskInputOptions:p={},maskTextFn:g,maskInputFn:y,slimDOMOptions:w,dataURLOptions:S={},inlineImages:E=!1,recordCanvas:v=!1,onSerialize:M,onIframeLoad:A,iframeLoadTimeout:T=5e3,onStylesheetLoad:N,stylesheetLoadTimeout:U=5e3,keepIframeSrcFn:G=l(()=>!1,"keepIframeSrcFn"),newlyAddedElement:Q=!1,cssCaptured:W=!1}=e,{needsMask:z}=e,{preserveWhiteSpace:re=!0}=e;z||(z=Wb(n,a,u,z===void 0));let B=KA(n,{doc:t,mirror:r,blockClass:i,blockSelector:o,needsMask:z,inlineStylesheet:h,maskInputOptions:p,maskTextFn:g,maskInputFn:y,dataURLOptions:S,inlineImages:E,recordCanvas:v,keepIframeSrcFn:G,newlyAddedElement:Q,cssCaptured:W});if(!B)return console.warn(n,"not serialized"),null;let q;r.hasNode(n)?q=r.getId(n):QA(B,w)||!re&&B.type===ue.Text&&!B.textContent.replace(/^\s+|\s+$/gm,"").length?q=ks:q=$b();let k=Object.assign(B,{id:q});if(r.add(n,k),q===ks)return null;M&&M(n);let ee=!f;if(k.type===ue.Element){ee=ee&&!k.needBlock,delete k.needBlock;let Y=wt.shadowRoot(n);Y&&Os(Y)&&(k.isShadowHost=!0)}if((k.type===ue.Document||k.type===ue.Element)&&ee){w.headWhitespace&&k.type===ue.Element&&k.tagName==="head"&&(re=!1);let Y={doc:t,mirror:r,blockClass:i,blockSelector:o,needsMask:z,maskTextClass:a,maskTextSelector:u,skipChild:f,inlineStylesheet:h,maskInputOptions:p,maskTextFn:g,maskInputFn:y,slimDOMOptions:w,dataURLOptions:S,inlineImages:E,recordCanvas:v,preserveWhiteSpace:re,onSerialize:M,onIframeLoad:A,iframeLoadTimeout:T,onStylesheetLoad:N,stylesheetLoadTimeout:U,keepIframeSrcFn:G,cssCaptured:!1};if(!(k.type===ue.Element&&k.tagName==="textarea"&&k.attributes.value!==void 0)){k.type===ue.Element&&k.attributes._cssText!==void 0&&typeof k.attributes._cssText=="string"&&(Y.cssCaptured=!0);for(let Ae of Array.from(wt.childNodes(n))){let xe=mi(Ae,Y);xe&&k.childNodes.push(xe)}}let he=null;if(Uh(n)&&(he=wt.shadowRoot(n)))for(let Ae of Array.from(wt.childNodes(he))){let xe=mi(Ae,Y);xe&&(Os(he)&&(xe.isShadow=!0),k.childNodes.push(xe))}}let X=wt.parentNode(n);return X&&As(X)&&Os(X)&&(k.isShadow=!0),k.type===ue.Element&&k.tagName==="iframe"&&qA(n,()=>{let Y=n.contentDocument;if(Y&&A){let he=mi(Y,{doc:Y,mirror:r,blockClass:i,blockSelector:o,needsMask:z,maskTextClass:a,maskTextSelector:u,skipChild:!1,inlineStylesheet:h,maskInputOptions:p,maskTextFn:g,maskInputFn:y,slimDOMOptions:w,dataURLOptions:S,inlineImages:E,recordCanvas:v,preserveWhiteSpace:re,onSerialize:M,onIframeLoad:A,iframeLoadTimeout:T,onStylesheetLoad:N,stylesheetLoadTimeout:U,keepIframeSrcFn:G});he&&A(n,he)}},T),k.type===ue.Element&&k.tagName==="link"&&typeof k.attributes.rel=="string"&&(k.attributes.rel==="stylesheet"||k.attributes.rel==="preload"&&typeof k.attributes.href=="string"&&Gh(k.attributes.href)==="css")&&YA(n,()=>{if(N){let Y=mi(n,{doc:t,mirror:r,blockClass:i,blockSelector:o,needsMask:z,maskTextClass:a,maskTextSelector:u,skipChild:!1,inlineStylesheet:h,maskInputOptions:p,maskTextFn:g,maskInputFn:y,slimDOMOptions:w,dataURLOptions:S,inlineImages:E,recordCanvas:v,preserveWhiteSpace:re,onSerialize:M,onIframeLoad:A,iframeLoadTimeout:T,onStylesheetLoad:N,stylesheetLoadTimeout:U,keepIframeSrcFn:G});Y&&N(n,Y)}},U),k}l(mi,"serializeNodeWithId");function eO(n,e){let{mirror:t=new Ds,blockClass:r="rr-block",blockSelector:i=null,maskTextClass:o="rr-mask",maskTextSelector:a=null,inlineStylesheet:u=!0,inlineImages:f=!1,recordCanvas:h=!1,maskAllInputs:p=!1,maskTextFn:g,maskInputFn:y,slimDOM:w=!1,dataURLOptions:S,preserveWhiteSpace:E,onSerialize:v,onIframeLoad:M,iframeLoadTimeout:A,onStylesheetLoad:T,stylesheetLoadTimeout:N,keepIframeSrcFn:U=l(()=>!1,"keepIframeSrcFn")}=e||{};return mi(n,{doc:n,mirror:t,blockClass:r,blockSelector:i,maskTextClass:o,maskTextSelector:a,skipChild:!1,inlineStylesheet:u,maskInputOptions:p===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:p===!1?{password:!0}:p,maskTextFn:g,maskInputFn:y,slimDOMOptions:w===!0||w==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:w==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:w===!1?{}:w,dataURLOptions:S,inlineImages:f,recordCanvas:h,preserveWhiteSpace:E,onSerialize:v,onIframeLoad:M,iframeLoadTimeout:A,onStylesheetLoad:T,stylesheetLoadTimeout:N,keepIframeSrcFn:U,newlyAddedElement:!1})}l(eO,"snapshot");var tO=/(max|min)-device-(width|height)/,Ay=new RegExp(tO.source,"g"),rO={postcssPlugin:"postcss-custom-selectors",prepare(){return{postcssPlugin:"postcss-custom-selectors",AtRule:l(function(n){n.params.match(Ay)&&(n.params=n.params.replace(Ay,"$1-$2"))},"AtRule")}}},nO={postcssPlugin:"postcss-hover-classes",prepare:l(function(){let n=[];return{Rule:l(function(e){n.indexOf(e)===-1&&(n.push(e),e.selectors.forEach(function(t){t.includes(":hover")&&(e.selector+=`,
`+t.replace(/:hover/g,".\\:hover"))}))},"Rule")}},"prepare")};function iO(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}l(iO,"getDefaultExportFromCjs$1");function sO(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=l(function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)},"a22");t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:l(function(){return n[r]},"get")})}),t}l(sO,"getAugmentedNamespace$1");var jh={exports:{}},Ue=String,Vb=l(function(){return{isColorSupported:!1,reset:Ue,bold:Ue,dim:Ue,italic:Ue,underline:Ue,inverse:Ue,hidden:Ue,strikethrough:Ue,black:Ue,red:Ue,green:Ue,yellow:Ue,blue:Ue,magenta:Ue,cyan:Ue,white:Ue,gray:Ue,bgBlack:Ue,bgRed:Ue,bgGreen:Ue,bgYellow:Ue,bgBlue:Ue,bgMagenta:Ue,bgCyan:Ue,bgWhite:Ue}},"create$1");jh.exports=Vb();jh.exports.createColors=Vb;var oO=jh.exports,aO={},lO=Object.freeze(Object.defineProperty({__proto__:null,default:aO},Symbol.toStringTag,{value:"Module"})),sr=sO(lO),Oy=oO,Ly=sr,Uf=class Ub extends Error{static{l(this,"CssSyntaxError")}constructor(e,t,r,i,o,a){super(e),this.name="CssSyntaxError",this.reason=e,o&&(this.file=o),i&&(this.source=i),a&&(this.plugin=a),typeof t<"u"&&typeof r<"u"&&(typeof t=="number"?(this.line=t,this.column=r):(this.line=t.line,this.column=t.column,this.endLine=r.line,this.endColumn=r.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,Ub)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;e==null&&(e=Oy.isColorSupported),Ly&&e&&(t=Ly(t));let r=t.split(/\r?\n/),i=Math.max(this.line-3,0),o=Math.min(this.line+2,r.length),a=String(o).length,u,f;if(e){let{bold:h,gray:p,red:g}=Oy.createColors(!0);u=l(y=>h(g(y)),"mark"),f=l(y=>p(y),"aside")}else u=f=l(h=>h,"aside");return r.slice(i,o).map((h,p)=>{let g=i+1+p,y=" "+(" "+g).slice(-a)+" | ";if(g===this.line){let w=f(y.replace(/\d/g," "))+h.slice(0,this.column-1).replace(/[^\t]/g," ");return u(">")+f(y)+h+`
 `+w+u("^")}return" "+f(y)+h}).join(`
`)}toString(){let e=this.showSourceCode();return e&&(e=`

`+e+`
`),this.name+": "+this.message+e}},qh=Uf;Uf.default=Uf;var zs={};zs.isClean=Symbol("isClean");zs.my=Symbol("my");var Ny={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function cO(n){return n[0].toUpperCase()+n.slice(1)}l(cO,"capitalize$1");var Gf=class{static{l(this,"Stringifier")}constructor(e){this.builder=e}atrule(e,t){let r="@"+e.name,i=e.params?this.rawValue(e,"params"):"";if(typeof e.raws.afterName<"u"?r+=e.raws.afterName:i&&(r+=" "),e.nodes)this.block(e,r+i);else{let o=(e.raws.between||"")+(t?";":"");this.builder(r+i+o,e)}}beforeAfter(e,t){let r;e.type==="decl"?r=this.raw(e,null,"beforeDecl"):e.type==="comment"?r=this.raw(e,null,"beforeComment"):t==="before"?r=this.raw(e,null,"beforeRule"):r=this.raw(e,null,"beforeClose");let i=e.parent,o=0;for(;i&&i.type!=="root";)o+=1,i=i.parent;if(r.includes(`
`)){let a=this.raw(e,null,"indent");if(a.length)for(let u=0;u<o;u++)r+=a}return r}block(e,t){let r=this.raw(e,"between","beforeOpen");this.builder(t+r+"{",e,"start");let i;e.nodes&&e.nodes.length?(this.body(e),i=this.raw(e,"after")):i=this.raw(e,"after","emptyBody"),i&&this.builder(i),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&e.nodes[t].type==="comment";)t-=1;let r=this.raw(e,"semicolon");for(let i=0;i<e.nodes.length;i++){let o=e.nodes[i],a=this.raw(o,"before");a&&this.builder(a),this.stringify(o,t!==i||r)}}comment(e){let t=this.raw(e,"left","commentLeft"),r=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+r+"*/",e)}decl(e,t){let r=this.raw(e,"between","colon"),i=e.prop+r+this.rawValue(e,"value");e.important&&(i+=e.raws.important||" !important"),t&&(i+=";"),this.builder(i,e)}document(e){this.body(e)}raw(e,t,r){let i;if(r||(r=t),t&&(i=e.raws[t],typeof i<"u"))return i;let o=e.parent;if(r==="before"&&(!o||o.type==="root"&&o.first===e||o&&o.type==="document"))return"";if(!o)return Ny[r];let a=e.root();if(a.rawCache||(a.rawCache={}),typeof a.rawCache[r]<"u")return a.rawCache[r];if(r==="before"||r==="after")return this.beforeAfter(e,r);{let u="raw"+cO(r);this[u]?i=this[u](a,e):a.walk(f=>{if(i=f.raws[t],typeof i<"u")return!1})}return typeof i>"u"&&(i=Ny[r]),a.rawCache[r]=i,i}rawBeforeClose(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length>0&&typeof r.raws.after<"u")return t=r.raws.after,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let r;return e.walkComments(i=>{if(typeof i.raws.before<"u")return r=i.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(t,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeDecl(e,t){let r;return e.walkDecls(i=>{if(typeof i.raws.before<"u")return r=i.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(t,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeOpen(e){let t;return e.walk(r=>{if(r.type!=="decl"&&(t=r.raws.between,typeof t<"u"))return!1}),t}rawBeforeRule(e){let t;return e.walk(r=>{if(r.nodes&&(r.parent!==e||e.first!==r)&&typeof r.raws.before<"u")return t=r.raws.before,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls(r=>{if(typeof r.raws.between<"u")return t=r.raws.between.replace(/[^\s:]/g,""),!1}),t}rawEmptyBody(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length===0&&(t=r.raws.after,typeof t<"u"))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(r=>{let i=r.parent;if(i&&i!==e&&i.parent&&i.parent===e&&typeof r.raws.before<"u"){let o=r.raws.before.split(`
`);return t=o[o.length-1],t=t.replace(/\S/g,""),!1}}),t}rawSemicolon(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length&&r.last.type==="decl"&&(t=r.raws.semicolon,typeof t<"u"))return!1}),t}rawValue(e,t){let r=e[t],i=e.raws[t];return i&&i.value===r?i.raw:r}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}},Gb=Gf;Gf.default=Gf;var uO=Gb;function zf(n,e){new uO(e).stringify(n)}l(zf,"stringify$4$1");var Tl=zf;zf.default=zf;var{isClean:Ia,my:fO}=zs,hO=qh,dO=Gb,pO=Tl;function jf(n,e){let t=new n.constructor;for(let r in n){if(!Object.prototype.hasOwnProperty.call(n,r)||r==="proxyCache")continue;let i=n[r],o=typeof i;r==="parent"&&o==="object"?e&&(t[r]=e):r==="source"?t[r]=i:Array.isArray(i)?t[r]=i.map(a=>jf(a,t)):(o==="object"&&i!==null&&(i=jf(i)),t[r]=i)}return t}l(jf,"cloneNode$1");var qf=class{static{l(this,"Node2")}constructor(e={}){this.raws={},this[Ia]=!1,this[fO]=!0;for(let t in e)if(t==="nodes"){this.nodes=[];for(let r of e[t])typeof r.clone=="function"?this.append(r.clone()):this.append(r)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=jf(this);for(let r in e)t[r]=e[r];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:r,start:i}=this.rangeBy(t);return this.source.input.error(e,{column:i.column,line:i.line},{column:r.column,line:r.line},t)}return new hO(e)}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:t==="root"?()=>e.root().toProxy():e[t]},set(e,t,r){return e[t]===r||(e[t]=r,(t==="prop"||t==="value"||t==="name"||t==="params"||t==="important"||t==="text")&&e.markDirty()),!0}}}markDirty(){if(this[Ia]){this[Ia]=!1;let e=this;for(;e=e.parent;)e[Ia]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let r=this.source.start;if(e.index)r=this.positionInside(e.index,t);else if(e.word){t=this.toString();let i=t.indexOf(e.word);i!==-1&&(r=this.positionInside(i,t))}return r}positionInside(e,t){let r=t||this.toString(),i=this.source.start.column,o=this.source.start.line;for(let a=0;a<e;a++)r[a]===`
`?(i=1,o+=1):i+=1;return{column:i,line:o}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},r=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let i=this.toString(),o=i.indexOf(e.word);o!==-1&&(t=this.positionInside(o,i),r=this.positionInside(o+e.word.length,i))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?r={column:e.end.column,line:e.end.line}:typeof e.endIndex=="number"?r=this.positionInside(e.endIndex):e.index&&(r=this.positionInside(e.index+1));return(r.line<t.line||r.line===t.line&&r.column<=t.column)&&(r={column:t.column+1,line:t.line}),{end:r,start:t}}raw(e,t){return new dO().raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,r=!1;for(let i of e)i===this?r=!0:r?(this.parent.insertAfter(t,i),t=i):this.parent.insertBefore(t,i);r||this.remove()}return this}root(){let e=this;for(;e.parent&&e.parent.type!=="document";)e=e.parent;return e}toJSON(e,t){let r={},i=t==null;t=t||new Map;let o=0;for(let a in this){if(!Object.prototype.hasOwnProperty.call(this,a)||a==="parent"||a==="proxyCache")continue;let u=this[a];if(Array.isArray(u))r[a]=u.map(f=>typeof f=="object"&&f.toJSON?f.toJSON(null,t):f);else if(typeof u=="object"&&u.toJSON)r[a]=u.toJSON(null,t);else if(a==="source"){let f=t.get(u.input);f==null&&(f=o,t.set(u.input,o),o++),r[a]={end:u.end,inputId:f,start:u.start}}else r[a]=u}return i&&(r.inputs=[...t.keys()].map(a=>a.toJSON())),r}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=pO){e.stringify&&(e=e.stringify);let t="";return e(this,r=>{t+=r}),t}warn(e,t,r){let i={node:this};for(let o in r)i[o]=r[o];return e.warn(t,i)}get proxyOf(){return this}},Il=qf;qf.default=qf;var mO=Il,Yf=class extends mO{static{l(this,"Declaration")}constructor(e){e&&typeof e.value<"u"&&typeof e.value!="string"&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}},Rl=Yf;Yf.default=Yf;var gO="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",yO=l((n,e=21)=>(t=e)=>{let r="",i=t;for(;i--;)r+=n[Math.random()*n.length|0];return r},"customAlphabet$1"),bO=l((n=21)=>{let e="",t=n;for(;t--;)e+=gO[Math.random()*64|0];return e},"nanoid$1$1"),vO={nanoid:bO,customAlphabet:yO},{SourceMapConsumer:_y,SourceMapGenerator:Dy}=sr,{existsSync:wO,readFileSync:SO}=sr,{dirname:Rf,join:EO}=sr;function CO(n){return Buffer?Buffer.from(n,"base64").toString():window.atob(n)}l(CO,"fromBase64$1");var Kf=class{static{l(this,"PreviousMap")}constructor(e,t){if(t.map===!1)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let r=t.map?t.map.prev:void 0,i=this.loadMap(t.from,r);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=Rf(this.mapFile)),i&&(this.text=i)}consumer(){return this.consumerCache||(this.consumerCache=new _y(this.text)),this.consumerCache}decodeInline(e){let t=/^data:application\/json;charset=utf-?8;base64,/,r=/^data:application\/json;base64,/,i=/^data:application\/json;charset=utf-?8,/,o=/^data:application\/json,/;if(i.test(e)||o.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(t.test(e)||r.test(e))return CO(e.substr(RegExp.lastMatch.length));let a=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+a)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return typeof e!="object"?!1:typeof e.mappings=="string"||typeof e._mappings=="string"||Array.isArray(e.sections)}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let r=e.lastIndexOf(t.pop()),i=e.indexOf("*/",r);r>-1&&i>-1&&(this.annotation=this.getAnnotationURL(e.substring(r,i)))}loadFile(e){if(this.root=Rf(e),wO(e))return this.mapFile=e,SO(e,"utf-8").toString().trim()}loadMap(e,t){if(t===!1)return!1;if(t){if(typeof t=="string")return t;if(typeof t=="function"){let r=t(e);if(r){let i=this.loadFile(r);if(!i)throw new Error("Unable to load previous source map: "+r.toString());return i}}else{if(t instanceof _y)return Dy.fromSourceMap(t).toString();if(t instanceof Dy)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let r=this.annotation;return e&&(r=EO(Rf(e),r)),this.loadFile(r)}}}startWith(e,t){return e?e.substr(0,t.length)===t:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}},zb=Kf;Kf.default=Kf;var{SourceMapConsumer:xO,SourceMapGenerator:MO}=sr,{fileURLToPath:ky,pathToFileURL:Ra}=sr,{isAbsolute:Xf,resolve:Zf}=sr,{nanoid:TO}=vO,Af=sr,Py=qh,IO=zb,Of=Symbol("fromOffsetCache"),RO=!!(xO&&MO),Fy=!!(Zf&&Xf),sl=class{static{l(this,"Input")}constructor(e,t={}){if(e===null||typeof e>"u"||typeof e=="object"&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),this.css[0]==="\uFEFF"||this.css[0]==="\uFFFE"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!Fy||/^\w+:\/\//.test(t.from)||Xf(t.from)?this.file=t.from:this.file=Zf(t.from)),Fy&&RO){let r=new IO(this.css,t);if(r.text){this.map=r;let i=r.consumer().file;!this.file&&i&&(this.file=this.mapResolve(i))}}this.file||(this.id="<input css "+TO(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,r,i={}){let o,a,u;if(t&&typeof t=="object"){let h=t,p=r;if(typeof h.offset=="number"){let g=this.fromOffset(h.offset);t=g.line,r=g.col}else t=h.line,r=h.column;if(typeof p.offset=="number"){let g=this.fromOffset(p.offset);a=g.line,u=g.col}else a=p.line,u=p.column}else if(!r){let h=this.fromOffset(t);t=h.line,r=h.col}let f=this.origin(t,r,a,u);return f?o=new Py(e,f.endLine===void 0?f.line:{column:f.column,line:f.line},f.endLine===void 0?f.column:{column:f.endColumn,line:f.endLine},f.source,f.file,i.plugin):o=new Py(e,a===void 0?t:{column:r,line:t},a===void 0?r:{column:u,line:a},this.css,this.file,i.plugin),o.input={column:r,endColumn:u,endLine:a,line:t,source:this.css},this.file&&(Ra&&(o.input.url=Ra(this.file).toString()),o.input.file=this.file),o}fromOffset(e){let t,r;if(this[Of])r=this[Of];else{let o=this.css.split(`
`);r=new Array(o.length);let a=0;for(let u=0,f=o.length;u<f;u++)r[u]=a,a+=o[u].length+1;this[Of]=r}t=r[r.length-1];let i=0;if(e>=t)i=r.length-1;else{let o=r.length-2,a;for(;i<o;)if(a=i+(o-i>>1),e<r[a])o=a-1;else if(e>=r[a+1])i=a+1;else{i=a;break}}return{col:e-r[i]+1,line:i+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:Zf(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,r,i){if(!this.map)return!1;let o=this.map.consumer(),a=o.originalPositionFor({column:t,line:e});if(!a.source)return!1;let u;typeof r=="number"&&(u=o.originalPositionFor({column:i,line:r}));let f;Xf(a.source)?f=Ra(a.source):f=new URL(a.source,this.map.consumer().sourceRoot||Ra(this.map.mapFile));let h={column:a.column,endColumn:u&&u.column,endLine:u&&u.line,line:a.line,url:f.toString()};if(f.protocol==="file:")if(ky)h.file=ky(f);else throw new Error("file: protocol is not available in this PostCSS build");let p=o.sourceContentFor(a.source);return p&&(h.source=p),h}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])this[t]!=null&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}},Al=sl;sl.default=sl;Af&&Af.registerInput&&Af.registerInput(sl);var{SourceMapConsumer:jb,SourceMapGenerator:Ka}=sr,{dirname:Xa,relative:qb,resolve:Yb,sep:Kb}=sr,{pathToFileURL:$y}=sr,AO=Al,OO=!!(jb&&Ka),LO=!!(Xa&&Yb&&qb&&Kb),NO=class{static{l(this,"MapGenerator")}constructor(e,t,r,i){this.stringify=e,this.mapOpts=r.map||{},this.root=t,this.opts=r,this.css=i,this.originalCSS=i,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;this.isInline()?e="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?e=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?e=this.mapOpts.annotation(this.opts.to,this.root):e=this.outputFile()+".map";let t=`
`;this.css.includes(`\r
`)&&(t=`\r
`),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t=this.toUrl(this.path(e.file)),r=e.root||Xa(e.file),i;this.mapOpts.sourcesContent===!1?(i=new jb(e.text),i.sourcesContent&&(i.sourcesContent=null)):i=e.consumer(),this.map.applySourceMap(i,t,this.toUrl(this.path(r)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],e.type==="comment"&&e.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),LO&&OO&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=Ka.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new Ka({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new Ka({file:this.outputFile(),ignoreInvalidMapping:!0});let e=1,t=1,r="<no source>",i={generated:{column:0,line:0},original:{column:0,line:0},source:""},o,a;this.stringify(this.root,(u,f,h)=>{if(this.css+=u,f&&h!=="end"&&(i.generated.line=e,i.generated.column=t-1,f.source&&f.source.start?(i.source=this.sourcePath(f),i.original.line=f.source.start.line,i.original.column=f.source.start.column-1,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,this.map.addMapping(i))),o=u.match(/\n/g),o?(e+=o.length,a=u.lastIndexOf(`
`),t=u.length-a):t+=u.length,f&&h!=="start"){let p=f.parent||{raws:{}};(!(f.type==="decl"||f.type==="atrule"&&!f.nodes)||f!==p.last||p.raws.semicolon)&&(f.source&&f.source.end?(i.source=this.sourcePath(f),i.original.line=f.source.end.line,i.original.column=f.source.end.column-1,i.generated.line=e,i.generated.column=t-2,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,i.generated.line=e,i.generated.column=t-1,this.map.addMapping(i)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(e=>e.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let e=this.mapOpts.annotation;return typeof e<"u"&&e!==!0?!1:this.previous().length?this.previous().some(t=>t.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(e=>e.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute||e.charCodeAt(0)===60||/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let r=this.opts.to?Xa(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(r=Xa(Yb(r,this.mapOpts.annotation)));let i=qb(r,e);return this.memoizedPaths.set(e,i),i}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new AO(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let r=t.source.input.from;if(r&&!e[r]){e[r]=!0;let i=this.usesFileUrls?this.toFileUrl(r):this.toUrl(this.path(r));this.map.setSourceContent(i,t.source.input.css)}}});else if(this.css){let t=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(t,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if($y){let r=$y(e).toString();return this.memoizedFileURLs.set(e,r),r}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;Kb==="\\"&&(e=e.replace(/\\/g,"/"));let r=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,r),r}},Xb=NO,_O=Il,Jf=class extends _O{static{l(this,"Comment")}constructor(e){super(e),this.type="comment"}},Ol=Jf;Jf.default=Jf;var{isClean:Zb,my:Jb}=zs,Qb=Rl,ev=Ol,DO=Il,tv,Yh,Kh,rv;function nv(n){return n.map(e=>(e.nodes&&(e.nodes=nv(e.nodes)),delete e.source,e))}l(nv,"cleanSource$1");function iv(n){if(n[Zb]=!1,n.proxyOf.nodes)for(let e of n.proxyOf.nodes)iv(e)}l(iv,"markDirtyUp$1");var $r=class sv extends DO{static{l(this,"Container")}append(...e){for(let t of e){let r=this.normalize(t,this.last);for(let i of r)this.proxyOf.nodes.push(i)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t=this.getIterator(),r,i;for(;this.indexes[t]<this.proxyOf.nodes.length&&(r=this.indexes[t],i=e(this.proxyOf.nodes[r],r),i!==!1);)this.indexes[t]+=1;return delete this.indexes[t],i}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:e[t]?t==="each"||typeof t=="string"&&t.startsWith("walk")?(...r)=>e[t](...r.map(i=>typeof i=="function"?(o,a)=>i(o.toProxy(),a):i)):t==="every"||t==="some"?r=>e[t]((i,...o)=>r(i.toProxy(),...o)):t==="root"?()=>e.root().toProxy():t==="nodes"?e.nodes.map(r=>r.toProxy()):t==="first"||t==="last"?e[t].toProxy():e[t]:e[t]},set(e,t,r){return e[t]===r||(e[t]=r,(t==="name"||t==="params"||t==="selector")&&e.markDirty()),!0}}}index(e){return typeof e=="number"?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let r=this.index(e),i=this.normalize(t,this.proxyOf.nodes[r]).reverse();r=this.index(e);for(let a of i)this.proxyOf.nodes.splice(r+1,0,a);let o;for(let a in this.indexes)o=this.indexes[a],r<o&&(this.indexes[a]=o+i.length);return this.markDirty(),this}insertBefore(e,t){let r=this.index(e),i=r===0?"prepend":!1,o=this.normalize(t,this.proxyOf.nodes[r],i).reverse();r=this.index(e);for(let u of o)this.proxyOf.nodes.splice(r,0,u);let a;for(let u in this.indexes)a=this.indexes[u],r<=a&&(this.indexes[u]=a+o.length);return this.markDirty(),this}normalize(e,t){if(typeof e=="string")e=nv(tv(e).nodes);else if(typeof e>"u")e=[];else if(Array.isArray(e)){e=e.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type==="root"&&this.type!=="document"){e=e.nodes.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type)e=[e];else if(e.prop){if(typeof e.value>"u")throw new Error("Value field is missed in node creation");typeof e.value!="string"&&(e.value=String(e.value)),e=[new Qb(e)]}else if(e.selector)e=[new Yh(e)];else if(e.name)e=[new Kh(e)];else if(e.text)e=[new ev(e)];else throw new Error("Unknown node type in node creation");return e.map(i=>(i[Jb]||sv.rebuild(i),i=i.proxyOf,i.parent&&i.parent.removeChild(i),i[Zb]&&iv(i),typeof i.raws.before>"u"&&t&&typeof t.raws.before<"u"&&(i.raws.before=t.raws.before.replace(/\S/g,"")),i.parent=this.proxyOf,i))}prepend(...e){e=e.reverse();for(let t of e){let r=this.normalize(t,this.first,"prepend").reverse();for(let i of r)this.proxyOf.nodes.unshift(i);for(let i in this.indexes)this.indexes[i]=this.indexes[i]+r.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);let t;for(let r in this.indexes)t=this.indexes[r],t>=e&&(this.indexes[r]=t-1);return this.markDirty(),this}replaceValues(e,t,r){return r||(r=t,t={}),this.walkDecls(i=>{t.props&&!t.props.includes(i.prop)||t.fast&&!i.value.includes(t.fast)||(i.value=i.value.replace(e,r))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,r)=>{let i;try{i=e(t,r)}catch(o){throw t.addToError(o)}return i!==!1&&t.walk&&(i=t.walk(e)),i})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="atrule"&&e.test(r.name))return t(r,i)}):this.walk((r,i)=>{if(r.type==="atrule"&&r.name===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="atrule")return t(r,i)}))}walkComments(e){return this.walk((t,r)=>{if(t.type==="comment")return e(t,r)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="decl"&&e.test(r.prop))return t(r,i)}):this.walk((r,i)=>{if(r.type==="decl"&&r.prop===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="decl")return t(r,i)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="rule"&&e.test(r.selector))return t(r,i)}):this.walk((r,i)=>{if(r.type==="rule"&&r.selector===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="rule")return t(r,i)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};$r.registerParse=n=>{tv=n};$r.registerRule=n=>{Yh=n};$r.registerAtRule=n=>{Kh=n};$r.registerRoot=n=>{rv=n};var Dn=$r;$r.default=$r;$r.rebuild=n=>{n.type==="atrule"?Object.setPrototypeOf(n,Kh.prototype):n.type==="rule"?Object.setPrototypeOf(n,Yh.prototype):n.type==="decl"?Object.setPrototypeOf(n,Qb.prototype):n.type==="comment"?Object.setPrototypeOf(n,ev.prototype):n.type==="root"&&Object.setPrototypeOf(n,rv.prototype),n[Jb]=!0,n.nodes&&n.nodes.forEach(e=>{$r.rebuild(e)})};var kO=Dn,ov,av,Ps=class extends kO{static{l(this,"Document2")}constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new ov(new av,this,e).stringify()}};Ps.registerLazyResult=n=>{ov=n};Ps.registerProcessor=n=>{av=n};var Xh=Ps;Ps.default=Ps;var Qf=class{static{l(this,"Warning")}constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let r=t.node.rangeBy(t);this.line=r.start.line,this.column=r.start.column,this.endLine=r.end.line,this.endColumn=r.end.column}for(let r in t)this[r]=t[r]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}},lv=Qf;Qf.default=Qf;var PO=lv,eh=class{static{l(this,"Result")}constructor(e,t,r){this.processor=e,this.messages=[],this.root=t,this.opts=r,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let r=new PO(e,t);return this.messages.push(r),r}warnings(){return this.messages.filter(e=>e.type==="warning")}get content(){return this.css}},Zh=eh;eh.default=eh;var Lf=39,Hy=34,Aa=92,By=47,Oa=10,Es=32,La=12,Na=9,_a=13,FO=91,$O=93,HO=40,BO=41,WO=123,VO=125,UO=59,GO=42,zO=58,jO=64,Da=/[\t\n\f\r "#'()/;[\\\]{}]/g,ka=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,qO=/.[\r\n"'(/\\]/,Wy=/[\da-f]/i,YO=l(function(e,t={}){let r=e.css.valueOf(),i=t.ignoreErrors,o,a,u,f,h,p,g,y,w,S,E=r.length,v=0,M=[],A=[];function T(){return v}l(T,"position");function N(W){throw e.error("Unclosed "+W,v)}l(N,"unclosed");function U(){return A.length===0&&v>=E}l(U,"endOfFile");function G(W){if(A.length)return A.pop();if(v>=E)return;let z=W?W.ignoreUnclosed:!1;switch(o=r.charCodeAt(v),o){case Oa:case Es:case Na:case _a:case La:{a=v;do a+=1,o=r.charCodeAt(a);while(o===Es||o===Oa||o===Na||o===_a||o===La);S=["space",r.slice(v,a)],v=a-1;break}case FO:case $O:case WO:case VO:case zO:case UO:case BO:{let re=String.fromCharCode(o);S=[re,re,v];break}case HO:{if(y=M.length?M.pop()[1]:"",w=r.charCodeAt(v+1),y==="url"&&w!==Lf&&w!==Hy&&w!==Es&&w!==Oa&&w!==Na&&w!==La&&w!==_a){a=v;do{if(p=!1,a=r.indexOf(")",a+1),a===-1)if(i||z){a=v;break}else N("bracket");for(g=a;r.charCodeAt(g-1)===Aa;)g-=1,p=!p}while(p);S=["brackets",r.slice(v,a+1),v,a],v=a}else a=r.indexOf(")",v+1),f=r.slice(v,a+1),a===-1||qO.test(f)?S=["(","(",v]:(S=["brackets",f,v,a],v=a);break}case Lf:case Hy:{u=o===Lf?"'":'"',a=v;do{if(p=!1,a=r.indexOf(u,a+1),a===-1)if(i||z){a=v+1;break}else N("string");for(g=a;r.charCodeAt(g-1)===Aa;)g-=1,p=!p}while(p);S=["string",r.slice(v,a+1),v,a],v=a;break}case jO:{Da.lastIndex=v+1,Da.test(r),Da.lastIndex===0?a=r.length-1:a=Da.lastIndex-2,S=["at-word",r.slice(v,a+1),v,a],v=a;break}case Aa:{for(a=v,h=!0;r.charCodeAt(a+1)===Aa;)a+=1,h=!h;if(o=r.charCodeAt(a+1),h&&o!==By&&o!==Es&&o!==Oa&&o!==Na&&o!==_a&&o!==La&&(a+=1,Wy.test(r.charAt(a)))){for(;Wy.test(r.charAt(a+1));)a+=1;r.charCodeAt(a+1)===Es&&(a+=1)}S=["word",r.slice(v,a+1),v,a],v=a;break}default:{o===By&&r.charCodeAt(v+1)===GO?(a=r.indexOf("*/",v+2)+1,a===0&&(i||z?a=r.length:N("comment")),S=["comment",r.slice(v,a+1),v,a],v=a):(ka.lastIndex=v+1,ka.test(r),ka.lastIndex===0?a=r.length-1:a=ka.lastIndex-2,S=["word",r.slice(v,a+1),v,a],M.push(S),v=a);break}}return v++,S}l(G,"nextToken");function Q(W){A.push(W)}return l(Q,"back"),{back:Q,endOfFile:U,nextToken:G,position:T}},"tokenizer"),cv=Dn,ol=class extends cv{static{l(this,"AtRule")}constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}},Jh=ol;ol.default=ol;cv.registerAtRule(ol);var uv=Dn,fv,hv,bi=class extends uv{static{l(this,"Root")}constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,r){let i=super.normalize(e);if(t){if(r==="prepend")this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let o of i)o.raws.before=t.raws.before}return i}removeChild(e,t){let r=this.index(e);return!t&&r===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(e)}toResult(e={}){return new fv(new hv,this,e).stringify()}};bi.registerLazyResult=n=>{fv=n};bi.registerProcessor=n=>{hv=n};var js=bi;bi.default=bi;uv.registerRoot(bi);var Fs={comma(n){return Fs.split(n,[","],!0)},space(n){let e=[" ",`
`,"	"];return Fs.split(n,e)},split(n,e,t){let r=[],i="",o=!1,a=0,u=!1,f="",h=!1;for(let p of n)h?h=!1:p==="\\"?h=!0:u?p===f&&(u=!1):p==='"'||p==="'"?(u=!0,f=p):p==="("?a+=1:p===")"?a>0&&(a-=1):a===0&&e.includes(p)&&(o=!0),o?(i!==""&&r.push(i.trim()),i="",o=!1):i+=p;return(t||i!=="")&&r.push(i.trim()),r}},dv=Fs;Fs.default=Fs;var pv=Dn,KO=dv,al=class extends pv{static{l(this,"Rule")}constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return KO.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,r=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(r)}},Qh=al;al.default=al;pv.registerRule(al);var XO=Rl,ZO=YO,JO=Ol,QO=Jh,eL=js,Vy=Qh,Uy={empty:!0,space:!0};function tL(n){for(let e=n.length-1;e>=0;e--){let t=n[e],r=t[3]||t[2];if(r)return r}}l(tL,"findLastWithPosition$1");var rL=class{static{l(this,"Parser")}constructor(e){this.input=e,this.root=new eL,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t=new QO;t.name=e[1].slice(1),t.name===""&&this.unnamedAtrule(t,e),this.init(t,e[2]);let r,i,o,a=!1,u=!1,f=[],h=[];for(;!this.tokenizer.endOfFile();){if(e=this.tokenizer.nextToken(),r=e[0],r==="("||r==="["?h.push(r==="("?")":"]"):r==="{"&&h.length>0?h.push("}"):r===h[h.length-1]&&h.pop(),h.length===0)if(r===";"){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}else if(r==="{"){u=!0;break}else if(r==="}"){if(f.length>0){for(o=f.length-1,i=f[o];i&&i[0]==="space";)i=f[--o];i&&(t.source.end=this.getPosition(i[3]||i[2]),t.source.end.offset++)}this.end(e);break}else f.push(e);else f.push(e);if(this.tokenizer.endOfFile()){a=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(f),f.length?(t.raws.afterName=this.spacesAndCommentsFromStart(f),this.raw(t,"params",f),a&&(e=f[f.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),u&&(t.nodes=[],this.current=t)}checkMissedSemicolon(e){let t=this.colon(e);if(t===!1)return;let r=0,i;for(let o=t-1;o>=0&&(i=e[o],!(i[0]!=="space"&&(r+=1,r===2)));o--);throw this.input.error("Missed semicolon",i[0]==="word"?i[3]+1:i[2])}colon(e){let t=0,r,i,o;for(let[a,u]of e.entries()){if(r=u,i=r[0],i==="("&&(t+=1),i===")"&&(t-=1),t===0&&i===":")if(!o)this.doubleColon(r);else{if(o[0]==="word"&&o[1]==="progid")continue;return a}o=r}return!1}comment(e){let t=new JO;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let r=e[1].slice(2,-2);if(/^\s*$/.test(r))t.text="",t.raws.left=r,t.raws.right="";else{let i=r.match(/^(\s*)([^]*\S)(\s*)$/);t.text=i[2],t.raws.left=i[1],t.raws.right=i[3]}}createTokenizer(){this.tokenizer=ZO(this.input)}decl(e,t){let r=new XO;this.init(r,e[0][2]);let i=e[e.length-1];for(i[0]===";"&&(this.semicolon=!0,e.pop()),r.source.end=this.getPosition(i[3]||i[2]||tL(e)),r.source.end.offset++;e[0][0]!=="word";)e.length===1&&this.unknownWord(e),r.raws.before+=e.shift()[1];for(r.source.start=this.getPosition(e[0][2]),r.prop="";e.length;){let h=e[0][0];if(h===":"||h==="space"||h==="comment")break;r.prop+=e.shift()[1]}r.raws.between="";let o;for(;e.length;)if(o=e.shift(),o[0]===":"){r.raws.between+=o[1];break}else o[0]==="word"&&/\w/.test(o[1])&&this.unknownWord([o]),r.raws.between+=o[1];(r.prop[0]==="_"||r.prop[0]==="*")&&(r.raws.before+=r.prop[0],r.prop=r.prop.slice(1));let a=[],u;for(;e.length&&(u=e[0][0],!(u!=="space"&&u!=="comment"));)a.push(e.shift());this.precheckMissedSemicolon(e);for(let h=e.length-1;h>=0;h--){if(o=e[h],o[1].toLowerCase()==="!important"){r.important=!0;let p=this.stringFrom(e,h);p=this.spacesFromEnd(e)+p,p!==" !important"&&(r.raws.important=p);break}else if(o[1].toLowerCase()==="important"){let p=e.slice(0),g="";for(let y=h;y>0;y--){let w=p[y][0];if(g.trim().indexOf("!")===0&&w!=="space")break;g=p.pop()[1]+g}g.trim().indexOf("!")===0&&(r.important=!0,r.raws.important=g,e=p)}if(o[0]!=="space"&&o[0]!=="comment")break}e.some(h=>h[0]!=="space"&&h[0]!=="comment")&&(r.raws.between+=a.map(h=>h[1]).join(""),a=[]),this.raw(r,"value",a.concat(e),t),r.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new Vy;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&t.type==="rule"&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}other(e){let t=!1,r=null,i=!1,o=null,a=[],u=e[1].startsWith("--"),f=[],h=e;for(;h;){if(r=h[0],f.push(h),r==="("||r==="[")o||(o=h),a.push(r==="("?")":"]");else if(u&&i&&r==="{")o||(o=h),a.push("}");else if(a.length===0)if(r===";")if(i){this.decl(f,u);return}else break;else if(r==="{"){this.rule(f);return}else if(r==="}"){this.tokenizer.back(f.pop()),t=!0;break}else r===":"&&(i=!0);else r===a[a.length-1]&&(a.pop(),a.length===0&&(o=null));h=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),a.length>0&&this.unclosedBracket(o),t&&i){if(!u)for(;f.length&&(h=f[f.length-1][0],!(h!=="space"&&h!=="comment"));)this.tokenizer.back(f.pop());this.decl(f,u)}else this.unknownWord(f)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e);break}this.endFile()}precheckMissedSemicolon(){}raw(e,t,r,i){let o,a,u=r.length,f="",h=!0,p,g;for(let y=0;y<u;y+=1)o=r[y],a=o[0],a==="space"&&y===u-1&&!i?h=!1:a==="comment"?(g=r[y-1]?r[y-1][0]:"empty",p=r[y+1]?r[y+1][0]:"empty",!Uy[g]&&!Uy[p]?f.slice(-1)===","?h=!1:f+=o[1]:h=!1):f+=o[1];if(!h){let y=r.reduce((w,S)=>w+S[1],"");e.raws[t]={raw:y,value:f}}e[t]=f}rule(e){e.pop();let t=new Vy;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],!(t!=="space"&&t!=="comment"));)r=e.pop()[1]+r;return r}spacesAndCommentsFromStart(e){let t,r="";for(;e.length&&(t=e[0][0],!(t!=="space"&&t!=="comment"));)r+=e.shift()[1];return r}spacesFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],t==="space");)r=e.pop()[1]+r;return r}stringFrom(e,t){let r="";for(let i=t;i<e.length;i++)r+=e[i][1];return e.splice(t,e.length-t),r}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}},nL=rL,iL=Dn,sL=nL,oL=Al;function ll(n,e){let t=new oL(n,e),r=new sL(t);try{r.parse()}catch(i){throw i}return r.root}l(ll,"parse$3$1");var ed=ll;ll.default=ll;iL.registerParse(ll);var{isClean:mr,my:aL}=zs,lL=Xb,cL=Tl,uL=Dn,fL=Xh;var Gy=Zh,hL=ed,dL=js,pL={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},mL={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},gL={Once:!0,postcssPlugin:!0,prepare:!0},vi=0;function Cs(n){return typeof n=="object"&&typeof n.then=="function"}l(Cs,"isPromise$1");function mv(n){let e=!1,t=pL[n.type];return n.type==="decl"?e=n.prop.toLowerCase():n.type==="atrule"&&(e=n.name.toLowerCase()),e&&n.append?[t,t+"-"+e,vi,t+"Exit",t+"Exit-"+e]:e?[t,t+"-"+e,t+"Exit",t+"Exit-"+e]:n.append?[t,vi,t+"Exit"]:[t,t+"Exit"]}l(mv,"getEvents$1");function zy(n){let e;return n.type==="document"?e=["Document",vi,"DocumentExit"]:n.type==="root"?e=["Root",vi,"RootExit"]:e=mv(n),{eventIndex:0,events:e,iterator:0,node:n,visitorIndex:0,visitors:[]}}l(zy,"toStack$1");function th(n){return n[mr]=!1,n.nodes&&n.nodes.forEach(e=>th(e)),n}l(th,"cleanMarks$1");var rh={},wi=class gv{static{l(this,"LazyResult")}constructor(e,t,r){this.stringified=!1,this.processed=!1;let i;if(typeof t=="object"&&t!==null&&(t.type==="root"||t.type==="document"))i=th(t);else if(t instanceof gv||t instanceof Gy)i=th(t.root),t.map&&(typeof r.map>"u"&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=t.map);else{let o=hL;r.syntax&&(o=r.syntax.parse),r.parser&&(o=r.parser),o.parse&&(o=o.parse);try{i=o(t,r)}catch(a){this.processed=!0,this.error=a}i&&!i[aL]&&uL.rebuild(i)}this.result=new Gy(e,i,r),this.helpers={...rh,postcss:rh,result:this.result},this.plugins=this.processor.plugins.map(o=>typeof o=="object"&&o.prepare?{...o,...o.prepare(this.result)}:o)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let r=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,e.name==="CssSyntaxError"&&!e.plugin?(e.plugin=r.postcssPlugin,e.setMessage()):r.postcssVersion}catch(i){console&&console.error&&console.error(i)}return e}prepareVisitors(){this.listeners={};let e=l((t,r,i)=>{this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push([t,i])},"add");for(let t of this.plugins)if(typeof t=="object")for(let r in t){if(!mL[r]&&/^[A-Z]/.test(r))throw new Error(`Unknown event ${r} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!gL[r])if(typeof t[r]=="object")for(let i in t[r])i==="*"?e(t,r,t[r][i]):e(t,r+"-"+i.toLowerCase(),t[r][i]);else typeof t[r]=="function"&&e(t,r,t[r])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],r=this.runOnRoot(t);if(Cs(r))try{await r}catch(i){throw this.handleError(i)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[mr];){e[mr]=!0;let t=[zy(e)];for(;t.length>0;){let r=this.visitTick(t);if(Cs(r))try{await r}catch(i){let o=t[t.length-1].node;throw this.handleError(i,o)}}}if(this.listeners.OnceExit)for(let[t,r]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if(e.type==="document"){let i=e.nodes.map(o=>r(o,this.helpers));await Promise.all(i)}else await r(e,this.helpers)}catch(i){throw this.handleError(i)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if(typeof e=="object"&&e.Once){if(this.result.root.type==="document"){let t=this.result.root.nodes.map(r=>e.Once(r,this.helpers));return Cs(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}else if(typeof e=="function")return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=cL;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let i=new lL(t,this.result.root,this.result.opts).generate();return this.result.css=i[0],this.result.map=i[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){let t=this.runOnRoot(e);if(Cs(t))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[mr];)e[mr]=!0,this.walkSync(e);if(this.listeners.OnceExit)if(e.type==="document")for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[r,i]of e){this.result.lastPlugin=r;let o;try{o=i(t,this.helpers)}catch(a){throw this.handleError(a,t.proxyOf)}if(t.type!=="root"&&t.type!=="document"&&!t.parent)return!0;if(Cs(o))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:r,visitors:i}=t;if(r.type!=="root"&&r.type!=="document"&&!r.parent){e.pop();return}if(i.length>0&&t.visitorIndex<i.length){let[a,u]=i[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===i.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=a;try{return u(r.toProxy(),this.helpers)}catch(f){throw this.handleError(f,r)}}if(t.iterator!==0){let a=t.iterator,u;for(;u=r.nodes[r.indexes[a]];)if(r.indexes[a]+=1,!u[mr]){u[mr]=!0,e.push(zy(u));return}t.iterator=0,delete r.indexes[a]}let o=t.events;for(;t.eventIndex<o.length;){let a=o[t.eventIndex];if(t.eventIndex+=1,a===vi){r.nodes&&r.nodes.length&&(r[mr]=!0,t.iterator=r.getIterator());return}else if(this.listeners[a]){t.visitors=this.listeners[a];return}}e.pop()}walkSync(e){e[mr]=!0;let t=mv(e);for(let r of t)if(r===vi)e.nodes&&e.each(i=>{i[mr]||this.walkSync(i)});else{let i=this.listeners[r];if(i&&this.visitSync(i,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};wi.registerPostcss=n=>{rh=n};var yv=wi;wi.default=wi;dL.registerLazyResult(wi);fL.registerLazyResult(wi);var yL=Xb,bL=Tl;var vL=ed,wL=Zh,nh=class{static{l(this,"NoWorkResult")}constructor(e,t,r){t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=r,this._map=void 0;let i,o=bL;this.result=new wL(this._processor,i,this._opts),this.result.css=t;let a=this;Object.defineProperty(this.result,"root",{get(){return a.root}});let u=new yL(o,i,this._opts,t);if(u.isMap()){let[f,h]=u.generate();f&&(this.result.css=f),h&&(this.result.map=h)}else u.clearAnnotation(),this.result.css=u.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=vL;try{e=t(this._css,this._opts)}catch(r){this.error=r}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}},SL=nh;nh.default=nh;var EL=SL,CL=yv,xL=Xh,ML=js,$s=class{static{l(this,"Processor")}constructor(e=[]){this.version="8.4.38",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let r of e)if(r.postcss===!0?r=r():r.postcss&&(r=r.postcss),typeof r=="object"&&Array.isArray(r.plugins))t=t.concat(r.plugins);else if(typeof r=="object"&&r.postcssPlugin)t.push(r);else if(typeof r=="function")t.push(r);else if(!(typeof r=="object"&&(r.parse||r.stringify)))throw new Error(r+" is not a PostCSS plugin");return t}process(e,t={}){return!this.plugins.length&&!t.parser&&!t.stringifier&&!t.syntax?new EL(this,e,t):new CL(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}},TL=$s;$s.default=$s;ML.registerProcessor($s);xL.registerProcessor($s);var IL=Rl,RL=zb,AL=Ol,OL=Jh,LL=Al,NL=js,_L=Qh;function Hs(n,e){if(Array.isArray(n))return n.map(i=>Hs(i));let{inputs:t,...r}=n;if(t){e=[];for(let i of t){let o={...i,__proto__:LL.prototype};o.map&&(o.map={...o.map,__proto__:RL.prototype}),e.push(o)}}if(r.nodes&&(r.nodes=n.nodes.map(i=>Hs(i,e))),r.source){let{inputId:i,...o}=r.source;r.source=o,i!=null&&(r.source.input=e[i])}if(r.type==="root")return new NL(r);if(r.type==="decl")return new IL(r);if(r.type==="rule")return new _L(r);if(r.type==="comment")return new AL(r);if(r.type==="atrule")return new OL(r);throw new Error("Unknown node type: "+n.type)}l(Hs,"fromJSON$1$1");var DL=Hs;Hs.default=Hs;var kL=qh,bv=Rl,PL=yv,FL=Dn,td=TL,$L=Tl,HL=DL,vv=Xh,BL=lv,wv=Ol,Sv=Jh,WL=Zh,VL=Al,UL=ed,GL=dv,Ev=Qh,Cv=js,zL=Il;function Le(...n){return n.length===1&&Array.isArray(n[0])&&(n=n[0]),new td(n)}l(Le,"postcss$3");Le.plugin=l(function(e,t){let r=!1;function i(...a){console&&console.warn&&!r&&(r=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+`: \u91CC\u9762 postcss.plugin \u88AB\u5F03\u7528. \u8FC1\u79FB\u6307\u5357:
https://www.w3ctech.com/topic/2226`));let u=t(...a);return u.postcssPlugin=e,u.postcssVersion=new td().version,u}l(i,"creator");let o;return Object.defineProperty(i,"postcss",{get(){return o||(o=i()),o}}),i.process=function(a,u,f){return Le([i(f)]).process(a,u)},i},"plugin");Le.stringify=$L;Le.parse=UL;Le.fromJSON=HL;Le.list=GL;Le.comment=n=>new wv(n);Le.atRule=n=>new Sv(n);Le.decl=n=>new bv(n);Le.rule=n=>new Ev(n);Le.root=n=>new Cv(n);Le.document=n=>new vv(n);Le.CssSyntaxError=kL;Le.Declaration=bv;Le.Container=FL;Le.Processor=td;Le.Document=vv;Le.Comment=wv;Le.Warning=BL;Le.AtRule=Sv;Le.Result=WL;Le.Input=VL;Le.Rule=Ev;Le.Root=Cv;Le.Node=zL;PL.registerPostcss(Le);var jL=Le;Le.default=Le;var ze=iO(jL);ze.stringify;ze.fromJSON;ze.plugin;ze.parse;ze.list;ze.document;ze.comment;ze.atRule;ze.rule;ze.decl;ze.root;ze.CssSyntaxError;ze.Declaration;ze.Container;ze.Processor;ze.Document;ze.Comment;ze.Warning;ze.AtRule;ze.Result;ze.Input;ze.Rule;ze.Root;ze.Node;var jy={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function qL(n){let e=jy[n.tagName]?jy[n.tagName]:n.tagName;return e==="link"&&n.attributes._cssText&&(e="style"),e}l(qL,"getTagName");function Ll(n,e){let t=e?.stylesWithHoverClass.get(n);if(t)return t;let r=n;try{r=ze([rO,nO]).process(n).css}catch(i){console.warn("Failed to adapt css for replay",i)}return e?.stylesWithHoverClass.set(n,r),r}l(Ll,"adaptCssForReplay");function qy(){return{stylesWithHoverClass:new Map}}l(qy,"createCache");function YL(n,e,t,r){let i=[];for(let f of n.childNodes)f.type===ue.Text&&i.push(f);let o=e.split("/* rr_split */");for(;o.length>1&&o.length>i.length;)o.splice(-2,2,o.slice(-2).join(""));let a="";t&&(a=Ll(o.join(""),r));let u=0;for(let f=0;f<i.length&&f!==o.length;f++){let h=i[f];if(!t)h.textContent=o[f];else if(f<o.length-1){let p=u,g=o[f+1].length;g=Math.min(g,30);let y=!1;for(;g>2;g--){let w=o[f+1].substring(0,g),S=a.substring(u).indexOf(w);if(y=S!==-1,y){p+=S;break}}y||(p+=o[f].length),h.textContent=a.substring(u,p),u=p}else h.textContent=a.substring(u)}}l(YL,"applyCssSplits");function KL(n,e,t,r){let{doc:i,hackCss:o,cache:a}=r;n.childNodes.length?YL(n,t,o,a):(o&&(t=Ll(t,a)),e.appendChild(i.createTextNode(t)))}l(KL,"buildStyleNode");function XL(n,e){var t;let{doc:r,hackCss:i,cache:o}=e;switch(n.type){case ue.Document:return r.implementation.createDocument(null,"",null);case ue.DocumentType:return r.implementation.createDocumentType(n.name||"html",n.publicId,n.systemId);case ue.Element:{let a=qL(n),u;n.isSVG?u=r.createElementNS("http://www.w3.org/2000/svg",a):(n.isCustom&&((t=r.defaultView)!=null&&t.customElements)&&!r.defaultView.customElements.get(n.tagName)&&r.defaultView.customElements.define(n.tagName,class extends r.defaultView.HTMLElement{}),u=r.createElement(a));let f={};for(let h in n.attributes){if(!Object.prototype.hasOwnProperty.call(n.attributes,h))continue;let p=n.attributes[h];if(!(a==="option"&&h==="selected"&&p===!1)&&p!==null){if(p===!0&&(p=""),h.startsWith("rr_")){f[h]=p;continue}if(typeof p=="string"){if(a==="style"&&h==="_cssText"){KL(n,u,p,e);continue}else if(a==="textarea"&&h==="value"){u.appendChild(r.createTextNode(p)),n.childNodes=[];continue}}try{if(n.isSVG&&h==="xlink:href")u.setAttributeNS("http://www.w3.org/1999/xlink",h,p.toString());else if(h==="onload"||h==="onclick"||h.substring(0,7)==="onmouse")u.setAttribute("_"+h,p.toString());else if(a==="meta"&&n.attributes["http-equiv"]==="Content-Security-Policy"&&h==="content"){u.setAttribute("csp-content",p.toString());continue}else a==="link"&&(n.attributes.rel==="preload"&&n.attributes.as==="script"||n.attributes.rel==="modulepreload")||a==="link"&&n.attributes.rel==="prefetch"&&typeof n.attributes.href=="string"&&Gh(n.attributes.href)==="js"||(a==="img"&&n.attributes.srcset&&n.attributes.rr_dataURL?u.setAttribute("rrweb-original-srcset",n.attributes.srcset):u.setAttribute(h,p.toString()))}catch{}}}for(let h in f){let p=f[h];if(a==="canvas"&&h==="rr_dataURL"){let g=r.createElement("img");g.onload=()=>{let y=u.getContext("2d");y&&y.drawImage(g,0,0,g.width,g.height)},g.src=p.toString(),u.RRNodeType&&(u.rr_dataURL=p.toString())}else if(a==="img"&&h==="rr_dataURL"){let g=u;g.currentSrc.startsWith("data:")||(g.setAttribute("rrweb-original-src",n.attributes.src),g.src=p.toString())}if(h==="rr_width")u.style.setProperty("width",p.toString());else if(h==="rr_height")u.style.setProperty("height",p.toString());else if(h==="rr_mediaCurrentTime"&&typeof p=="number")u.currentTime=p;else if(h==="rr_mediaState")switch(p){case"played":u.play().catch(g=>console.warn("media playback error",g));break;case"paused":u.pause();break}else h==="rr_mediaPlaybackRate"&&typeof p=="number"?u.playbackRate=p:h==="rr_mediaMuted"&&typeof p=="boolean"?u.muted=p:h==="rr_mediaLoop"&&typeof p=="boolean"?u.loop=p:h==="rr_mediaVolume"&&typeof p=="number"?u.volume=p:h==="rr_open_mode"&&u.setAttribute("rr_open_mode",p)}if(n.isShadowHost)if(!u.shadowRoot)u.attachShadow({mode:"open"});else for(;u.shadowRoot.firstChild;)u.shadowRoot.removeChild(u.shadowRoot.firstChild);return u}case ue.Text:return n.isStyle&&i?r.createTextNode(Ll(n.textContent,o)):r.createTextNode(n.textContent);case ue.CDATA:return r.createCDATASection(n.textContent);case ue.Comment:return r.createComment(n.textContent);default:return null}}l(XL,"buildNode");function Ls(n,e){let{doc:t,mirror:r,skipChild:i=!1,hackCss:o=!0,afterAppend:a,cache:u}=e;if(r.has(n.id)){let h=r.getNode(n.id),p=r.getMeta(h);if(LA(p,n))return r.getNode(n.id)}let f=XL(n,{doc:t,hackCss:o,cache:u});if(!f)return null;if(n.rootId&&r.getNode(n.rootId)!==t&&r.replace(n.rootId,t),n.type===ue.Document&&(t.close(),t.open(),n.compatMode==="BackCompat"&&n.childNodes&&n.childNodes[0].type!==ue.DocumentType&&(n.childNodes[0].type===ue.Element&&"xmlns"in n.childNodes[0].attributes&&n.childNodes[0].attributes.xmlns==="http://www.w3.org/1999/xhtml"?t.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'):t.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">')),f=t),r.add(f,n),(n.type===ue.Document||n.type===ue.Element)&&!i)for(let h of n.childNodes){let p=Ls(h,{doc:t,mirror:r,skipChild:!1,hackCss:o,afterAppend:a,cache:u});if(!p){console.warn("Failed to rebuild",h);continue}if(h.isShadow&&Uh(f)&&f.shadowRoot)f.shadowRoot.appendChild(p);else if(n.type===ue.Document&&h.type==ue.Element){let g=p,y=null;g.childNodes.forEach(w=>{w.nodeName==="BODY"&&(y=w)}),y?(g.removeChild(y),f.appendChild(p),g.appendChild(y)):f.appendChild(p)}else if(n.type===ue.Document&&h.type===ue.DocumentType)try{f.firstChild&&f.firstChild.nodeType===1?f.insertBefore(p,f.firstChild):f.appendChild(p)}catch{console.error("fix for DOCTYPE inserting failed")}else f.appendChild(p);a&&a(p,h.id)}return f}l(Ls,"buildNodeWithSN");function ZL(n,e){function t(r){e(r)}l(t,"walk");for(let r of n.getIds())n.has(r)&&t(n.getNode(r))}l(ZL,"visit");function JL(n,e){let t=e.getMeta(n);if(t?.type!==ue.Element)return;let r=n;for(let i in t.attributes){if(!(Object.prototype.hasOwnProperty.call(t.attributes,i)&&i.startsWith("rr_")))continue;let o=t.attributes[i];i==="rr_scrollLeft"&&(r.scrollLeft=o),i==="rr_scrollTop"&&(r.scrollTop=o)}}l(JL,"handleScroll");function QL(n,e){let{doc:t,onVisit:r,hackCss:i=!0,afterAppend:o,cache:a,mirror:u=new Ds}=e,f=Ls(n,{doc:t,mirror:u,skipChild:!1,hackCss:i,afterAppend:o,cache:a});return ZL(u,h=>{r&&r(h),JL(h,u)}),f}l(QL,"rebuild");var eN=Object.defineProperty,tN=l((n,e,t)=>e in n?eN(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,"__defNormalProp2"),J=l((n,e,t)=>tN(n,typeof e!="symbol"?e+"":e,t),"__publicField2"),rN=Object.defineProperty,nN=l((n,e,t)=>e in n?rN(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,"__defNormalProp22"),Yy=l((n,e,t)=>nN(n,typeof e!="symbol"?e+"":e,t),"__publicField22"),iN=class{static{l(this,"Mirror2")}constructor(){Yy(this,"idNodeMap",new Map),Yy(this,"nodeMetaMap",new WeakMap)}getId(e){var t;return e?((t=this.getMeta(e))==null?void 0:t.id)??-1:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){let t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){let r=t.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,t)}replace(e,t){let r=this.getNode(e);if(r){let i=this.nodeMetaMap.get(r);i&&this.nodeMetaMap.set(t,i)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function sN(){return new iN}l(sN,"createMirror$1");function oN(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}l(oN,"getDefaultExportFromCjs");function aN(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=l(function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)},"a22");t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:l(function(){return n[r]},"get")})}),t}l(aN,"getAugmentedNamespace");var rd={exports:{}},Ge=String,xv=l(function(){return{isColorSupported:!1,reset:Ge,bold:Ge,dim:Ge,italic:Ge,underline:Ge,inverse:Ge,hidden:Ge,strikethrough:Ge,black:Ge,red:Ge,green:Ge,yellow:Ge,blue:Ge,magenta:Ge,cyan:Ge,white:Ge,gray:Ge,bgBlack:Ge,bgRed:Ge,bgGreen:Ge,bgYellow:Ge,bgBlue:Ge,bgMagenta:Ge,bgCyan:Ge,bgWhite:Ge}},"create");rd.exports=xv();rd.exports.createColors=xv;var lN=rd.exports,cN={},uN=Object.freeze(Object.defineProperty({__proto__:null,default:cN},Symbol.toStringTag,{value:"Module"})),or=aN(uN),Ky=lN,Xy=or,ih=class Mv extends Error{static{l(this,"CssSyntaxError2")}constructor(e,t,r,i,o,a){super(e),this.name="CssSyntaxError",this.reason=e,o&&(this.file=o),i&&(this.source=i),a&&(this.plugin=a),typeof t<"u"&&typeof r<"u"&&(typeof t=="number"?(this.line=t,this.column=r):(this.line=t.line,this.column=t.column,this.endLine=r.line,this.endColumn=r.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,Mv)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;e==null&&(e=Ky.isColorSupported),Xy&&e&&(t=Xy(t));let r=t.split(/\r?\n/),i=Math.max(this.line-3,0),o=Math.min(this.line+2,r.length),a=String(o).length,u,f;if(e){let{bold:h,gray:p,red:g}=Ky.createColors(!0);u=l(y=>h(g(y)),"mark"),f=l(y=>p(y),"aside")}else u=f=l(h=>h,"aside");return r.slice(i,o).map((h,p)=>{let g=i+1+p,y=" "+(" "+g).slice(-a)+" | ";if(g===this.line){let w=f(y.replace(/\d/g," "))+h.slice(0,this.column-1).replace(/[^\t]/g," ");return u(">")+f(y)+h+`
 `+w+u("^")}return" "+f(y)+h}).join(`
`)}toString(){let e=this.showSourceCode();return e&&(e=`

`+e+`
`),this.name+": "+this.message+e}},nd=ih;ih.default=ih;var qs={};qs.isClean=Symbol("isClean");qs.my=Symbol("my");var Zy={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function fN(n){return n[0].toUpperCase()+n.slice(1)}l(fN,"capitalize");var sh=class{static{l(this,"Stringifier2")}constructor(e){this.builder=e}atrule(e,t){let r="@"+e.name,i=e.params?this.rawValue(e,"params"):"";if(typeof e.raws.afterName<"u"?r+=e.raws.afterName:i&&(r+=" "),e.nodes)this.block(e,r+i);else{let o=(e.raws.between||"")+(t?";":"");this.builder(r+i+o,e)}}beforeAfter(e,t){let r;e.type==="decl"?r=this.raw(e,null,"beforeDecl"):e.type==="comment"?r=this.raw(e,null,"beforeComment"):t==="before"?r=this.raw(e,null,"beforeRule"):r=this.raw(e,null,"beforeClose");let i=e.parent,o=0;for(;i&&i.type!=="root";)o+=1,i=i.parent;if(r.includes(`
`)){let a=this.raw(e,null,"indent");if(a.length)for(let u=0;u<o;u++)r+=a}return r}block(e,t){let r=this.raw(e,"between","beforeOpen");this.builder(t+r+"{",e,"start");let i;e.nodes&&e.nodes.length?(this.body(e),i=this.raw(e,"after")):i=this.raw(e,"after","emptyBody"),i&&this.builder(i),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&e.nodes[t].type==="comment";)t-=1;let r=this.raw(e,"semicolon");for(let i=0;i<e.nodes.length;i++){let o=e.nodes[i],a=this.raw(o,"before");a&&this.builder(a),this.stringify(o,t!==i||r)}}comment(e){let t=this.raw(e,"left","commentLeft"),r=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+r+"*/",e)}decl(e,t){let r=this.raw(e,"between","colon"),i=e.prop+r+this.rawValue(e,"value");e.important&&(i+=e.raws.important||" !important"),t&&(i+=";"),this.builder(i,e)}document(e){this.body(e)}raw(e,t,r){let i;if(r||(r=t),t&&(i=e.raws[t],typeof i<"u"))return i;let o=e.parent;if(r==="before"&&(!o||o.type==="root"&&o.first===e||o&&o.type==="document"))return"";if(!o)return Zy[r];let a=e.root();if(a.rawCache||(a.rawCache={}),typeof a.rawCache[r]<"u")return a.rawCache[r];if(r==="before"||r==="after")return this.beforeAfter(e,r);{let u="raw"+fN(r);this[u]?i=this[u](a,e):a.walk(f=>{if(i=f.raws[t],typeof i<"u")return!1})}return typeof i>"u"&&(i=Zy[r]),a.rawCache[r]=i,i}rawBeforeClose(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length>0&&typeof r.raws.after<"u")return t=r.raws.after,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let r;return e.walkComments(i=>{if(typeof i.raws.before<"u")return r=i.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(t,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeDecl(e,t){let r;return e.walkDecls(i=>{if(typeof i.raws.before<"u")return r=i.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(t,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeOpen(e){let t;return e.walk(r=>{if(r.type!=="decl"&&(t=r.raws.between,typeof t<"u"))return!1}),t}rawBeforeRule(e){let t;return e.walk(r=>{if(r.nodes&&(r.parent!==e||e.first!==r)&&typeof r.raws.before<"u")return t=r.raws.before,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls(r=>{if(typeof r.raws.between<"u")return t=r.raws.between.replace(/[^\s:]/g,""),!1}),t}rawEmptyBody(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length===0&&(t=r.raws.after,typeof t<"u"))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(r=>{let i=r.parent;if(i&&i!==e&&i.parent&&i.parent===e&&typeof r.raws.before<"u"){let o=r.raws.before.split(`
`);return t=o[o.length-1],t=t.replace(/\S/g,""),!1}}),t}rawSemicolon(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length&&r.last.type==="decl"&&(t=r.raws.semicolon,typeof t<"u"))return!1}),t}rawValue(e,t){let r=e[t],i=e.raws[t];return i&&i.value===r?i.raw:r}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}},Tv=sh;sh.default=sh;var hN=Tv;function oh(n,e){new hN(e).stringify(n)}l(oh,"stringify$4");var Nl=oh;oh.default=oh;var{isClean:Pa,my:dN}=qs,pN=nd,mN=Tv,gN=Nl;function ah(n,e){let t=new n.constructor;for(let r in n){if(!Object.prototype.hasOwnProperty.call(n,r)||r==="proxyCache")continue;let i=n[r],o=typeof i;r==="parent"&&o==="object"?e&&(t[r]=e):r==="source"?t[r]=i:Array.isArray(i)?t[r]=i.map(a=>ah(a,t)):(o==="object"&&i!==null&&(i=ah(i)),t[r]=i)}return t}l(ah,"cloneNode");var lh=class{static{l(this,"Node3")}constructor(e={}){this.raws={},this[Pa]=!1,this[dN]=!0;for(let t in e)if(t==="nodes"){this.nodes=[];for(let r of e[t])typeof r.clone=="function"?this.append(r.clone()):this.append(r)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=ah(this);for(let r in e)t[r]=e[r];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:r,start:i}=this.rangeBy(t);return this.source.input.error(e,{column:i.column,line:i.line},{column:r.column,line:r.line},t)}return new pN(e)}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:t==="root"?()=>e.root().toProxy():e[t]},set(e,t,r){return e[t]===r||(e[t]=r,(t==="prop"||t==="value"||t==="name"||t==="params"||t==="important"||t==="text")&&e.markDirty()),!0}}}markDirty(){if(this[Pa]){this[Pa]=!1;let e=this;for(;e=e.parent;)e[Pa]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let r=this.source.start;if(e.index)r=this.positionInside(e.index,t);else if(e.word){t=this.toString();let i=t.indexOf(e.word);i!==-1&&(r=this.positionInside(i,t))}return r}positionInside(e,t){let r=t||this.toString(),i=this.source.start.column,o=this.source.start.line;for(let a=0;a<e;a++)r[a]===`
`?(i=1,o+=1):i+=1;return{column:i,line:o}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},r=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let i=this.toString(),o=i.indexOf(e.word);o!==-1&&(t=this.positionInside(o,i),r=this.positionInside(o+e.word.length,i))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?r={column:e.end.column,line:e.end.line}:typeof e.endIndex=="number"?r=this.positionInside(e.endIndex):e.index&&(r=this.positionInside(e.index+1));return(r.line<t.line||r.line===t.line&&r.column<=t.column)&&(r={column:t.column+1,line:t.line}),{end:r,start:t}}raw(e,t){return new mN().raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,r=!1;for(let i of e)i===this?r=!0:r?(this.parent.insertAfter(t,i),t=i):this.parent.insertBefore(t,i);r||this.remove()}return this}root(){let e=this;for(;e.parent&&e.parent.type!=="document";)e=e.parent;return e}toJSON(e,t){let r={},i=t==null;t=t||new Map;let o=0;for(let a in this){if(!Object.prototype.hasOwnProperty.call(this,a)||a==="parent"||a==="proxyCache")continue;let u=this[a];if(Array.isArray(u))r[a]=u.map(f=>typeof f=="object"&&f.toJSON?f.toJSON(null,t):f);else if(typeof u=="object"&&u.toJSON)r[a]=u.toJSON(null,t);else if(a==="source"){let f=t.get(u.input);f==null&&(f=o,t.set(u.input,o),o++),r[a]={end:u.end,inputId:f,start:u.start}}else r[a]=u}return i&&(r.inputs=[...t.keys()].map(a=>a.toJSON())),r}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=gN){e.stringify&&(e=e.stringify);let t="";return e(this,r=>{t+=r}),t}warn(e,t,r){let i={node:this};for(let o in r)i[o]=r[o];return e.warn(t,i)}get proxyOf(){return this}},_l=lh;lh.default=lh;var yN=_l,ch=class extends yN{static{l(this,"Declaration2")}constructor(e){e&&typeof e.value<"u"&&typeof e.value!="string"&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}},Dl=ch;ch.default=ch;var bN="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",vN=l((n,e=21)=>(t=e)=>{let r="",i=t;for(;i--;)r+=n[Math.random()*n.length|0];return r},"customAlphabet"),wN=l((n=21)=>{let e="",t=n;for(;t--;)e+=bN[Math.random()*64|0];return e},"nanoid$1"),SN={nanoid:wN,customAlphabet:vN},{SourceMapConsumer:Jy,SourceMapGenerator:Qy}=or,{existsSync:EN,readFileSync:CN}=or,{dirname:Nf,join:xN}=or;function MN(n){return Buffer?Buffer.from(n,"base64").toString():window.atob(n)}l(MN,"fromBase64");var uh=class{static{l(this,"PreviousMap2")}constructor(e,t){if(t.map===!1)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let r=t.map?t.map.prev:void 0,i=this.loadMap(t.from,r);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=Nf(this.mapFile)),i&&(this.text=i)}consumer(){return this.consumerCache||(this.consumerCache=new Jy(this.text)),this.consumerCache}decodeInline(e){let t=/^data:application\/json;charset=utf-?8;base64,/,r=/^data:application\/json;base64,/,i=/^data:application\/json;charset=utf-?8,/,o=/^data:application\/json,/;if(i.test(e)||o.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(t.test(e)||r.test(e))return MN(e.substr(RegExp.lastMatch.length));let a=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+a)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return typeof e!="object"?!1:typeof e.mappings=="string"||typeof e._mappings=="string"||Array.isArray(e.sections)}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let r=e.lastIndexOf(t.pop()),i=e.indexOf("*/",r);r>-1&&i>-1&&(this.annotation=this.getAnnotationURL(e.substring(r,i)))}loadFile(e){if(this.root=Nf(e),EN(e))return this.mapFile=e,CN(e,"utf-8").toString().trim()}loadMap(e,t){if(t===!1)return!1;if(t){if(typeof t=="string")return t;if(typeof t=="function"){let r=t(e);if(r){let i=this.loadFile(r);if(!i)throw new Error("Unable to load previous source map: "+r.toString());return i}}else{if(t instanceof Jy)return Qy.fromSourceMap(t).toString();if(t instanceof Qy)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let r=this.annotation;return e&&(r=xN(Nf(e),r)),this.loadFile(r)}}}startWith(e,t){return e?e.substr(0,t.length)===t:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}},Iv=uh;uh.default=uh;var{SourceMapConsumer:TN,SourceMapGenerator:IN}=or,{fileURLToPath:eb,pathToFileURL:Fa}=or,{isAbsolute:fh,resolve:hh}=or,{nanoid:RN}=SN,_f=or,tb=nd,AN=Iv,Df=Symbol("fromOffsetCache"),ON=!!(TN&&IN),rb=!!(hh&&fh),cl=class{static{l(this,"Input2")}constructor(e,t={}){if(e===null||typeof e>"u"||typeof e=="object"&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),this.css[0]==="\uFEFF"||this.css[0]==="\uFFFE"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!rb||/^\w+:\/\//.test(t.from)||fh(t.from)?this.file=t.from:this.file=hh(t.from)),rb&&ON){let r=new AN(this.css,t);if(r.text){this.map=r;let i=r.consumer().file;!this.file&&i&&(this.file=this.mapResolve(i))}}this.file||(this.id="<input css "+RN(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,r,i={}){let o,a,u;if(t&&typeof t=="object"){let h=t,p=r;if(typeof h.offset=="number"){let g=this.fromOffset(h.offset);t=g.line,r=g.col}else t=h.line,r=h.column;if(typeof p.offset=="number"){let g=this.fromOffset(p.offset);a=g.line,u=g.col}else a=p.line,u=p.column}else if(!r){let h=this.fromOffset(t);t=h.line,r=h.col}let f=this.origin(t,r,a,u);return f?o=new tb(e,f.endLine===void 0?f.line:{column:f.column,line:f.line},f.endLine===void 0?f.column:{column:f.endColumn,line:f.endLine},f.source,f.file,i.plugin):o=new tb(e,a===void 0?t:{column:r,line:t},a===void 0?r:{column:u,line:a},this.css,this.file,i.plugin),o.input={column:r,endColumn:u,endLine:a,line:t,source:this.css},this.file&&(Fa&&(o.input.url=Fa(this.file).toString()),o.input.file=this.file),o}fromOffset(e){let t,r;if(this[Df])r=this[Df];else{let o=this.css.split(`
`);r=new Array(o.length);let a=0;for(let u=0,f=o.length;u<f;u++)r[u]=a,a+=o[u].length+1;this[Df]=r}t=r[r.length-1];let i=0;if(e>=t)i=r.length-1;else{let o=r.length-2,a;for(;i<o;)if(a=i+(o-i>>1),e<r[a])o=a-1;else if(e>=r[a+1])i=a+1;else{i=a;break}}return{col:e-r[i]+1,line:i+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:hh(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,r,i){if(!this.map)return!1;let o=this.map.consumer(),a=o.originalPositionFor({column:t,line:e});if(!a.source)return!1;let u;typeof r=="number"&&(u=o.originalPositionFor({column:i,line:r}));let f;fh(a.source)?f=Fa(a.source):f=new URL(a.source,this.map.consumer().sourceRoot||Fa(this.map.mapFile));let h={column:a.column,endColumn:u&&u.column,endLine:u&&u.line,line:a.line,url:f.toString()};if(f.protocol==="file:")if(eb)h.file=eb(f);else throw new Error("file: protocol is not available in this PostCSS build");let p=o.sourceContentFor(a.source);return p&&(h.source=p),h}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])this[t]!=null&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}},kl=cl;cl.default=cl;_f&&_f.registerInput&&_f.registerInput(cl);var{SourceMapConsumer:Rv,SourceMapGenerator:Za}=or,{dirname:Ja,relative:Av,resolve:Ov,sep:Lv}=or,{pathToFileURL:nb}=or,LN=kl,NN=!!(Rv&&Za),_N=!!(Ja&&Ov&&Av&&Lv),DN=class{static{l(this,"MapGenerator2")}constructor(e,t,r,i){this.stringify=e,this.mapOpts=r.map||{},this.root=t,this.opts=r,this.css=i,this.originalCSS=i,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;this.isInline()?e="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?e=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?e=this.mapOpts.annotation(this.opts.to,this.root):e=this.outputFile()+".map";let t=`
`;this.css.includes(`\r
`)&&(t=`\r
`),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t=this.toUrl(this.path(e.file)),r=e.root||Ja(e.file),i;this.mapOpts.sourcesContent===!1?(i=new Rv(e.text),i.sourcesContent&&(i.sourcesContent=null)):i=e.consumer(),this.map.applySourceMap(i,t,this.toUrl(this.path(r)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],e.type==="comment"&&e.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),_N&&NN&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=Za.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new Za({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new Za({file:this.outputFile(),ignoreInvalidMapping:!0});let e=1,t=1,r="<no source>",i={generated:{column:0,line:0},original:{column:0,line:0},source:""},o,a;this.stringify(this.root,(u,f,h)=>{if(this.css+=u,f&&h!=="end"&&(i.generated.line=e,i.generated.column=t-1,f.source&&f.source.start?(i.source=this.sourcePath(f),i.original.line=f.source.start.line,i.original.column=f.source.start.column-1,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,this.map.addMapping(i))),o=u.match(/\n/g),o?(e+=o.length,a=u.lastIndexOf(`
`),t=u.length-a):t+=u.length,f&&h!=="start"){let p=f.parent||{raws:{}};(!(f.type==="decl"||f.type==="atrule"&&!f.nodes)||f!==p.last||p.raws.semicolon)&&(f.source&&f.source.end?(i.source=this.sourcePath(f),i.original.line=f.source.end.line,i.original.column=f.source.end.column-1,i.generated.line=e,i.generated.column=t-2,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,i.generated.line=e,i.generated.column=t-1,this.map.addMapping(i)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(e=>e.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let e=this.mapOpts.annotation;return typeof e<"u"&&e!==!0?!1:this.previous().length?this.previous().some(t=>t.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(e=>e.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute||e.charCodeAt(0)===60||/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let r=this.opts.to?Ja(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(r=Ja(Ov(r,this.mapOpts.annotation)));let i=Av(r,e);return this.memoizedPaths.set(e,i),i}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new LN(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let r=t.source.input.from;if(r&&!e[r]){e[r]=!0;let i=this.usesFileUrls?this.toFileUrl(r):this.toUrl(this.path(r));this.map.setSourceContent(i,t.source.input.css)}}});else if(this.css){let t=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(t,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(nb){let r=nb(e).toString();return this.memoizedFileURLs.set(e,r),r}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;Lv==="\\"&&(e=e.replace(/\\/g,"/"));let r=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,r),r}},Nv=DN,kN=_l,dh=class extends kN{static{l(this,"Comment2")}constructor(e){super(e),this.type="comment"}},Pl=dh;dh.default=dh;var{isClean:_v,my:Dv}=qs,kv=Dl,Pv=Pl,PN=_l,Fv,id,sd,$v;function Hv(n){return n.map(e=>(e.nodes&&(e.nodes=Hv(e.nodes)),delete e.source,e))}l(Hv,"cleanSource");function Bv(n){if(n[_v]=!1,n.proxyOf.nodes)for(let e of n.proxyOf.nodes)Bv(e)}l(Bv,"markDirtyUp");var Hr=class Wv extends PN{static{l(this,"Container2")}append(...e){for(let t of e){let r=this.normalize(t,this.last);for(let i of r)this.proxyOf.nodes.push(i)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t=this.getIterator(),r,i;for(;this.indexes[t]<this.proxyOf.nodes.length&&(r=this.indexes[t],i=e(this.proxyOf.nodes[r],r),i!==!1);)this.indexes[t]+=1;return delete this.indexes[t],i}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:e[t]?t==="each"||typeof t=="string"&&t.startsWith("walk")?(...r)=>e[t](...r.map(i=>typeof i=="function"?(o,a)=>i(o.toProxy(),a):i)):t==="every"||t==="some"?r=>e[t]((i,...o)=>r(i.toProxy(),...o)):t==="root"?()=>e.root().toProxy():t==="nodes"?e.nodes.map(r=>r.toProxy()):t==="first"||t==="last"?e[t].toProxy():e[t]:e[t]},set(e,t,r){return e[t]===r||(e[t]=r,(t==="name"||t==="params"||t==="selector")&&e.markDirty()),!0}}}index(e){return typeof e=="number"?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let r=this.index(e),i=this.normalize(t,this.proxyOf.nodes[r]).reverse();r=this.index(e);for(let a of i)this.proxyOf.nodes.splice(r+1,0,a);let o;for(let a in this.indexes)o=this.indexes[a],r<o&&(this.indexes[a]=o+i.length);return this.markDirty(),this}insertBefore(e,t){let r=this.index(e),i=r===0?"prepend":!1,o=this.normalize(t,this.proxyOf.nodes[r],i).reverse();r=this.index(e);for(let u of o)this.proxyOf.nodes.splice(r,0,u);let a;for(let u in this.indexes)a=this.indexes[u],r<=a&&(this.indexes[u]=a+o.length);return this.markDirty(),this}normalize(e,t){if(typeof e=="string")e=Hv(Fv(e).nodes);else if(typeof e>"u")e=[];else if(Array.isArray(e)){e=e.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type==="root"&&this.type!=="document"){e=e.nodes.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type)e=[e];else if(e.prop){if(typeof e.value>"u")throw new Error("Value field is missed in node creation");typeof e.value!="string"&&(e.value=String(e.value)),e=[new kv(e)]}else if(e.selector)e=[new id(e)];else if(e.name)e=[new sd(e)];else if(e.text)e=[new Pv(e)];else throw new Error("Unknown node type in node creation");return e.map(i=>(i[Dv]||Wv.rebuild(i),i=i.proxyOf,i.parent&&i.parent.removeChild(i),i[_v]&&Bv(i),typeof i.raws.before>"u"&&t&&typeof t.raws.before<"u"&&(i.raws.before=t.raws.before.replace(/\S/g,"")),i.parent=this.proxyOf,i))}prepend(...e){e=e.reverse();for(let t of e){let r=this.normalize(t,this.first,"prepend").reverse();for(let i of r)this.proxyOf.nodes.unshift(i);for(let i in this.indexes)this.indexes[i]=this.indexes[i]+r.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);let t;for(let r in this.indexes)t=this.indexes[r],t>=e&&(this.indexes[r]=t-1);return this.markDirty(),this}replaceValues(e,t,r){return r||(r=t,t={}),this.walkDecls(i=>{t.props&&!t.props.includes(i.prop)||t.fast&&!i.value.includes(t.fast)||(i.value=i.value.replace(e,r))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,r)=>{let i;try{i=e(t,r)}catch(o){throw t.addToError(o)}return i!==!1&&t.walk&&(i=t.walk(e)),i})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="atrule"&&e.test(r.name))return t(r,i)}):this.walk((r,i)=>{if(r.type==="atrule"&&r.name===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="atrule")return t(r,i)}))}walkComments(e){return this.walk((t,r)=>{if(t.type==="comment")return e(t,r)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="decl"&&e.test(r.prop))return t(r,i)}):this.walk((r,i)=>{if(r.type==="decl"&&r.prop===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="decl")return t(r,i)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="rule"&&e.test(r.selector))return t(r,i)}):this.walk((r,i)=>{if(r.type==="rule"&&r.selector===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="rule")return t(r,i)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};Hr.registerParse=n=>{Fv=n};Hr.registerRule=n=>{id=n};Hr.registerAtRule=n=>{sd=n};Hr.registerRoot=n=>{$v=n};var kn=Hr;Hr.default=Hr;Hr.rebuild=n=>{n.type==="atrule"?Object.setPrototypeOf(n,sd.prototype):n.type==="rule"?Object.setPrototypeOf(n,id.prototype):n.type==="decl"?Object.setPrototypeOf(n,kv.prototype):n.type==="comment"?Object.setPrototypeOf(n,Pv.prototype):n.type==="root"&&Object.setPrototypeOf(n,$v.prototype),n[Dv]=!0,n.nodes&&n.nodes.forEach(e=>{Hr.rebuild(e)})};var FN=kn,Vv,Uv,Bs=class extends FN{static{l(this,"Document23")}constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new Vv(new Uv,this,e).stringify()}};Bs.registerLazyResult=n=>{Vv=n};Bs.registerProcessor=n=>{Uv=n};var od=Bs;Bs.default=Bs;var ph=class{static{l(this,"Warning2")}constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let r=t.node.rangeBy(t);this.line=r.start.line,this.column=r.start.column,this.endLine=r.end.line,this.endColumn=r.end.column}for(let r in t)this[r]=t[r]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}},Gv=ph;ph.default=ph;var $N=Gv,mh=class{static{l(this,"Result2")}constructor(e,t,r){this.processor=e,this.messages=[],this.root=t,this.opts=r,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let r=new $N(e,t);return this.messages.push(r),r}warnings(){return this.messages.filter(e=>e.type==="warning")}get content(){return this.css}},ad=mh;mh.default=mh;var kf=39,ib=34,$a=92,sb=47,Ha=10,xs=32,Ba=12,Wa=9,Va=13,HN=91,BN=93,WN=40,VN=41,UN=123,GN=125,zN=59,jN=42,qN=58,YN=64,Ua=/[\t\n\f\r "#'()/;[\\\]{}]/g,Ga=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,KN=/.[\r\n"'(/\\]/,ob=/[\da-f]/i,XN=l(function(e,t={}){let r=e.css.valueOf(),i=t.ignoreErrors,o,a,u,f,h,p,g,y,w,S,E=r.length,v=0,M=[],A=[];function T(){return v}l(T,"position");function N(W){throw e.error("Unclosed "+W,v)}l(N,"unclosed");function U(){return A.length===0&&v>=E}l(U,"endOfFile");function G(W){if(A.length)return A.pop();if(v>=E)return;let z=W?W.ignoreUnclosed:!1;switch(o=r.charCodeAt(v),o){case Ha:case xs:case Wa:case Va:case Ba:{a=v;do a+=1,o=r.charCodeAt(a);while(o===xs||o===Ha||o===Wa||o===Va||o===Ba);S=["space",r.slice(v,a)],v=a-1;break}case HN:case BN:case UN:case GN:case qN:case zN:case VN:{let re=String.fromCharCode(o);S=[re,re,v];break}case WN:{if(y=M.length?M.pop()[1]:"",w=r.charCodeAt(v+1),y==="url"&&w!==kf&&w!==ib&&w!==xs&&w!==Ha&&w!==Wa&&w!==Ba&&w!==Va){a=v;do{if(p=!1,a=r.indexOf(")",a+1),a===-1)if(i||z){a=v;break}else N("bracket");for(g=a;r.charCodeAt(g-1)===$a;)g-=1,p=!p}while(p);S=["brackets",r.slice(v,a+1),v,a],v=a}else a=r.indexOf(")",v+1),f=r.slice(v,a+1),a===-1||KN.test(f)?S=["(","(",v]:(S=["brackets",f,v,a],v=a);break}case kf:case ib:{u=o===kf?"'":'"',a=v;do{if(p=!1,a=r.indexOf(u,a+1),a===-1)if(i||z){a=v+1;break}else N("string");for(g=a;r.charCodeAt(g-1)===$a;)g-=1,p=!p}while(p);S=["string",r.slice(v,a+1),v,a],v=a;break}case YN:{Ua.lastIndex=v+1,Ua.test(r),Ua.lastIndex===0?a=r.length-1:a=Ua.lastIndex-2,S=["at-word",r.slice(v,a+1),v,a],v=a;break}case $a:{for(a=v,h=!0;r.charCodeAt(a+1)===$a;)a+=1,h=!h;if(o=r.charCodeAt(a+1),h&&o!==sb&&o!==xs&&o!==Ha&&o!==Wa&&o!==Va&&o!==Ba&&(a+=1,ob.test(r.charAt(a)))){for(;ob.test(r.charAt(a+1));)a+=1;r.charCodeAt(a+1)===xs&&(a+=1)}S=["word",r.slice(v,a+1),v,a],v=a;break}default:{o===sb&&r.charCodeAt(v+1)===jN?(a=r.indexOf("*/",v+2)+1,a===0&&(i||z?a=r.length:N("comment")),S=["comment",r.slice(v,a+1),v,a],v=a):(Ga.lastIndex=v+1,Ga.test(r),Ga.lastIndex===0?a=r.length-1:a=Ga.lastIndex-2,S=["word",r.slice(v,a+1),v,a],M.push(S),v=a);break}}return v++,S}l(G,"nextToken");function Q(W){A.push(W)}return l(Q,"back"),{back:Q,endOfFile:U,nextToken:G,position:T}},"tokenizer2"),zv=kn,ul=class extends zv{static{l(this,"AtRule2")}constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}},ld=ul;ul.default=ul;zv.registerAtRule(ul);var jv=kn,qv,Yv,Si=class extends jv{static{l(this,"Root2")}constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,r){let i=super.normalize(e);if(t){if(r==="prepend")this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let o of i)o.raws.before=t.raws.before}return i}removeChild(e,t){let r=this.index(e);return!t&&r===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(e)}toResult(e={}){return new qv(new Yv,this,e).stringify()}};Si.registerLazyResult=n=>{qv=n};Si.registerProcessor=n=>{Yv=n};var Ys=Si;Si.default=Si;jv.registerRoot(Si);var Ws={comma(n){return Ws.split(n,[","],!0)},space(n){let e=[" ",`
`,"	"];return Ws.split(n,e)},split(n,e,t){let r=[],i="",o=!1,a=0,u=!1,f="",h=!1;for(let p of n)h?h=!1:p==="\\"?h=!0:u?p===f&&(u=!1):p==='"'||p==="'"?(u=!0,f=p):p==="("?a+=1:p===")"?a>0&&(a-=1):a===0&&e.includes(p)&&(o=!0),o?(i!==""&&r.push(i.trim()),i="",o=!1):i+=p;return(t||i!=="")&&r.push(i.trim()),r}},Kv=Ws;Ws.default=Ws;var Xv=kn,ZN=Kv,fl=class extends Xv{static{l(this,"Rule2")}constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return ZN.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,r=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(r)}},cd=fl;fl.default=fl;Xv.registerRule(fl);var JN=Dl,QN=XN,e_=Pl,t_=ld,r_=Ys,ab=cd,lb={empty:!0,space:!0};function n_(n){for(let e=n.length-1;e>=0;e--){let t=n[e],r=t[3]||t[2];if(r)return r}}l(n_,"findLastWithPosition");var i_=class{static{l(this,"Parser2")}constructor(e){this.input=e,this.root=new r_,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t=new t_;t.name=e[1].slice(1),t.name===""&&this.unnamedAtrule(t,e),this.init(t,e[2]);let r,i,o,a=!1,u=!1,f=[],h=[];for(;!this.tokenizer.endOfFile();){if(e=this.tokenizer.nextToken(),r=e[0],r==="("||r==="["?h.push(r==="("?")":"]"):r==="{"&&h.length>0?h.push("}"):r===h[h.length-1]&&h.pop(),h.length===0)if(r===";"){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}else if(r==="{"){u=!0;break}else if(r==="}"){if(f.length>0){for(o=f.length-1,i=f[o];i&&i[0]==="space";)i=f[--o];i&&(t.source.end=this.getPosition(i[3]||i[2]),t.source.end.offset++)}this.end(e);break}else f.push(e);else f.push(e);if(this.tokenizer.endOfFile()){a=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(f),f.length?(t.raws.afterName=this.spacesAndCommentsFromStart(f),this.raw(t,"params",f),a&&(e=f[f.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),u&&(t.nodes=[],this.current=t)}checkMissedSemicolon(e){let t=this.colon(e);if(t===!1)return;let r=0,i;for(let o=t-1;o>=0&&(i=e[o],!(i[0]!=="space"&&(r+=1,r===2)));o--);throw this.input.error("Missed semicolon",i[0]==="word"?i[3]+1:i[2])}colon(e){let t=0,r,i,o;for(let[a,u]of e.entries()){if(r=u,i=r[0],i==="("&&(t+=1),i===")"&&(t-=1),t===0&&i===":")if(!o)this.doubleColon(r);else{if(o[0]==="word"&&o[1]==="progid")continue;return a}o=r}return!1}comment(e){let t=new e_;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let r=e[1].slice(2,-2);if(/^\s*$/.test(r))t.text="",t.raws.left=r,t.raws.right="";else{let i=r.match(/^(\s*)([^]*\S)(\s*)$/);t.text=i[2],t.raws.left=i[1],t.raws.right=i[3]}}createTokenizer(){this.tokenizer=QN(this.input)}decl(e,t){let r=new JN;this.init(r,e[0][2]);let i=e[e.length-1];for(i[0]===";"&&(this.semicolon=!0,e.pop()),r.source.end=this.getPosition(i[3]||i[2]||n_(e)),r.source.end.offset++;e[0][0]!=="word";)e.length===1&&this.unknownWord(e),r.raws.before+=e.shift()[1];for(r.source.start=this.getPosition(e[0][2]),r.prop="";e.length;){let h=e[0][0];if(h===":"||h==="space"||h==="comment")break;r.prop+=e.shift()[1]}r.raws.between="";let o;for(;e.length;)if(o=e.shift(),o[0]===":"){r.raws.between+=o[1];break}else o[0]==="word"&&/\w/.test(o[1])&&this.unknownWord([o]),r.raws.between+=o[1];(r.prop[0]==="_"||r.prop[0]==="*")&&(r.raws.before+=r.prop[0],r.prop=r.prop.slice(1));let a=[],u;for(;e.length&&(u=e[0][0],!(u!=="space"&&u!=="comment"));)a.push(e.shift());this.precheckMissedSemicolon(e);for(let h=e.length-1;h>=0;h--){if(o=e[h],o[1].toLowerCase()==="!important"){r.important=!0;let p=this.stringFrom(e,h);p=this.spacesFromEnd(e)+p,p!==" !important"&&(r.raws.important=p);break}else if(o[1].toLowerCase()==="important"){let p=e.slice(0),g="";for(let y=h;y>0;y--){let w=p[y][0];if(g.trim().indexOf("!")===0&&w!=="space")break;g=p.pop()[1]+g}g.trim().indexOf("!")===0&&(r.important=!0,r.raws.important=g,e=p)}if(o[0]!=="space"&&o[0]!=="comment")break}e.some(h=>h[0]!=="space"&&h[0]!=="comment")&&(r.raws.between+=a.map(h=>h[1]).join(""),a=[]),this.raw(r,"value",a.concat(e),t),r.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new ab;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&t.type==="rule"&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}other(e){let t=!1,r=null,i=!1,o=null,a=[],u=e[1].startsWith("--"),f=[],h=e;for(;h;){if(r=h[0],f.push(h),r==="("||r==="[")o||(o=h),a.push(r==="("?")":"]");else if(u&&i&&r==="{")o||(o=h),a.push("}");else if(a.length===0)if(r===";")if(i){this.decl(f,u);return}else break;else if(r==="{"){this.rule(f);return}else if(r==="}"){this.tokenizer.back(f.pop()),t=!0;break}else r===":"&&(i=!0);else r===a[a.length-1]&&(a.pop(),a.length===0&&(o=null));h=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),a.length>0&&this.unclosedBracket(o),t&&i){if(!u)for(;f.length&&(h=f[f.length-1][0],!(h!=="space"&&h!=="comment"));)this.tokenizer.back(f.pop());this.decl(f,u)}else this.unknownWord(f)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e);break}this.endFile()}precheckMissedSemicolon(){}raw(e,t,r,i){let o,a,u=r.length,f="",h=!0,p,g;for(let y=0;y<u;y+=1)o=r[y],a=o[0],a==="space"&&y===u-1&&!i?h=!1:a==="comment"?(g=r[y-1]?r[y-1][0]:"empty",p=r[y+1]?r[y+1][0]:"empty",!lb[g]&&!lb[p]?f.slice(-1)===","?h=!1:f+=o[1]:h=!1):f+=o[1];if(!h){let y=r.reduce((w,S)=>w+S[1],"");e.raws[t]={raw:y,value:f}}e[t]=f}rule(e){e.pop();let t=new ab;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],!(t!=="space"&&t!=="comment"));)r=e.pop()[1]+r;return r}spacesAndCommentsFromStart(e){let t,r="";for(;e.length&&(t=e[0][0],!(t!=="space"&&t!=="comment"));)r+=e.shift()[1];return r}spacesFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],t==="space");)r=e.pop()[1]+r;return r}stringFrom(e,t){let r="";for(let i=t;i<e.length;i++)r+=e[i][1];return e.splice(t,e.length-t),r}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}},s_=i_,o_=kn,a_=s_,l_=kl;function hl(n,e){let t=new l_(n,e),r=new a_(t);try{r.parse()}catch(i){throw i}return r.root}l(hl,"parse$3");var ud=hl;hl.default=hl;o_.registerParse(hl);var{isClean:gr,my:c_}=qs,u_=Nv,f_=Nl,h_=kn,d_=od;var cb=ad,p_=ud,m_=Ys,g_={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},y_={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},b_={Once:!0,postcssPlugin:!0,prepare:!0},Ei=0;function Ms(n){return typeof n=="object"&&typeof n.then=="function"}l(Ms,"isPromise");function Zv(n){let e=!1,t=g_[n.type];return n.type==="decl"?e=n.prop.toLowerCase():n.type==="atrule"&&(e=n.name.toLowerCase()),e&&n.append?[t,t+"-"+e,Ei,t+"Exit",t+"Exit-"+e]:e?[t,t+"-"+e,t+"Exit",t+"Exit-"+e]:n.append?[t,Ei,t+"Exit"]:[t,t+"Exit"]}l(Zv,"getEvents");function ub(n){let e;return n.type==="document"?e=["Document",Ei,"DocumentExit"]:n.type==="root"?e=["Root",Ei,"RootExit"]:e=Zv(n),{eventIndex:0,events:e,iterator:0,node:n,visitorIndex:0,visitors:[]}}l(ub,"toStack");function gh(n){return n[gr]=!1,n.nodes&&n.nodes.forEach(e=>gh(e)),n}l(gh,"cleanMarks");var yh={},Ci=class Jv{static{l(this,"LazyResult2")}constructor(e,t,r){this.stringified=!1,this.processed=!1;let i;if(typeof t=="object"&&t!==null&&(t.type==="root"||t.type==="document"))i=gh(t);else if(t instanceof Jv||t instanceof cb)i=gh(t.root),t.map&&(typeof r.map>"u"&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=t.map);else{let o=p_;r.syntax&&(o=r.syntax.parse),r.parser&&(o=r.parser),o.parse&&(o=o.parse);try{i=o(t,r)}catch(a){this.processed=!0,this.error=a}i&&!i[c_]&&h_.rebuild(i)}this.result=new cb(e,i,r),this.helpers={...yh,postcss:yh,result:this.result},this.plugins=this.processor.plugins.map(o=>typeof o=="object"&&o.prepare?{...o,...o.prepare(this.result)}:o)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let r=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,e.name==="CssSyntaxError"&&!e.plugin?(e.plugin=r.postcssPlugin,e.setMessage()):r.postcssVersion}catch(i){console&&console.error&&console.error(i)}return e}prepareVisitors(){this.listeners={};let e=l((t,r,i)=>{this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push([t,i])},"add");for(let t of this.plugins)if(typeof t=="object")for(let r in t){if(!y_[r]&&/^[A-Z]/.test(r))throw new Error(`Unknown event ${r} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!b_[r])if(typeof t[r]=="object")for(let i in t[r])i==="*"?e(t,r,t[r][i]):e(t,r+"-"+i.toLowerCase(),t[r][i]);else typeof t[r]=="function"&&e(t,r,t[r])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],r=this.runOnRoot(t);if(Ms(r))try{await r}catch(i){throw this.handleError(i)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[gr];){e[gr]=!0;let t=[ub(e)];for(;t.length>0;){let r=this.visitTick(t);if(Ms(r))try{await r}catch(i){let o=t[t.length-1].node;throw this.handleError(i,o)}}}if(this.listeners.OnceExit)for(let[t,r]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if(e.type==="document"){let i=e.nodes.map(o=>r(o,this.helpers));await Promise.all(i)}else await r(e,this.helpers)}catch(i){throw this.handleError(i)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if(typeof e=="object"&&e.Once){if(this.result.root.type==="document"){let t=this.result.root.nodes.map(r=>e.Once(r,this.helpers));return Ms(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}else if(typeof e=="function")return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=f_;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let i=new u_(t,this.result.root,this.result.opts).generate();return this.result.css=i[0],this.result.map=i[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){let t=this.runOnRoot(e);if(Ms(t))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[gr];)e[gr]=!0,this.walkSync(e);if(this.listeners.OnceExit)if(e.type==="document")for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[r,i]of e){this.result.lastPlugin=r;let o;try{o=i(t,this.helpers)}catch(a){throw this.handleError(a,t.proxyOf)}if(t.type!=="root"&&t.type!=="document"&&!t.parent)return!0;if(Ms(o))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:r,visitors:i}=t;if(r.type!=="root"&&r.type!=="document"&&!r.parent){e.pop();return}if(i.length>0&&t.visitorIndex<i.length){let[a,u]=i[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===i.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=a;try{return u(r.toProxy(),this.helpers)}catch(f){throw this.handleError(f,r)}}if(t.iterator!==0){let a=t.iterator,u;for(;u=r.nodes[r.indexes[a]];)if(r.indexes[a]+=1,!u[gr]){u[gr]=!0,e.push(ub(u));return}t.iterator=0,delete r.indexes[a]}let o=t.events;for(;t.eventIndex<o.length;){let a=o[t.eventIndex];if(t.eventIndex+=1,a===Ei){r.nodes&&r.nodes.length&&(r[gr]=!0,t.iterator=r.getIterator());return}else if(this.listeners[a]){t.visitors=this.listeners[a];return}}e.pop()}walkSync(e){e[gr]=!0;let t=Zv(e);for(let r of t)if(r===Ei)e.nodes&&e.each(i=>{i[gr]||this.walkSync(i)});else{let i=this.listeners[r];if(i&&this.visitSync(i,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};Ci.registerPostcss=n=>{yh=n};var Qv=Ci;Ci.default=Ci;m_.registerLazyResult(Ci);d_.registerLazyResult(Ci);var v_=Nv,w_=Nl;var S_=ud,E_=ad,bh=class{static{l(this,"NoWorkResult2")}constructor(e,t,r){t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=r,this._map=void 0;let i,o=w_;this.result=new E_(this._processor,i,this._opts),this.result.css=t;let a=this;Object.defineProperty(this.result,"root",{get(){return a.root}});let u=new v_(o,i,this._opts,t);if(u.isMap()){let[f,h]=u.generate();f&&(this.result.css=f),h&&(this.result.map=h)}else u.clearAnnotation(),this.result.css=u.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=S_;try{e=t(this._css,this._opts)}catch(r){this.error=r}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}},C_=bh;bh.default=bh;var x_=C_,M_=Qv,T_=od,I_=Ys,Vs=class{static{l(this,"Processor2")}constructor(e=[]){this.version="8.4.38",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let r of e)if(r.postcss===!0?r=r():r.postcss&&(r=r.postcss),typeof r=="object"&&Array.isArray(r.plugins))t=t.concat(r.plugins);else if(typeof r=="object"&&r.postcssPlugin)t.push(r);else if(typeof r=="function")t.push(r);else if(!(typeof r=="object"&&(r.parse||r.stringify)))throw new Error(r+" is not a PostCSS plugin");return t}process(e,t={}){return!this.plugins.length&&!t.parser&&!t.stringifier&&!t.syntax?new x_(this,e,t):new M_(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}},R_=Vs;Vs.default=Vs;I_.registerProcessor(Vs);T_.registerProcessor(Vs);var A_=Dl,O_=Iv,L_=Pl,N_=ld,__=kl,D_=Ys,k_=cd;function Us(n,e){if(Array.isArray(n))return n.map(i=>Us(i));let{inputs:t,...r}=n;if(t){e=[];for(let i of t){let o={...i,__proto__:__.prototype};o.map&&(o.map={...o.map,__proto__:O_.prototype}),e.push(o)}}if(r.nodes&&(r.nodes=n.nodes.map(i=>Us(i,e))),r.source){let{inputId:i,...o}=r.source;r.source=o,i!=null&&(r.source.input=e[i])}if(r.type==="root")return new D_(r);if(r.type==="decl")return new A_(r);if(r.type==="rule")return new k_(r);if(r.type==="comment")return new L_(r);if(r.type==="atrule")return new N_(r);throw new Error("Unknown node type: "+n.type)}l(Us,"fromJSON$1");var P_=Us;Us.default=Us;var F_=nd,ew=Dl,$_=Qv,H_=kn,fd=R_,B_=Nl,W_=P_,tw=od,V_=Gv,rw=Pl,nw=ld,U_=ad,G_=kl,z_=ud,j_=Kv,iw=cd,sw=Ys,q_=_l;function Ne(...n){return n.length===1&&Array.isArray(n[0])&&(n=n[0]),new fd(n)}l(Ne,"postcss");Ne.plugin=l(function(e,t){let r=!1;function i(...a){console&&console.warn&&!r&&(r=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+`: \u91CC\u9762 postcss.plugin \u88AB\u5F03\u7528. \u8FC1\u79FB\u6307\u5357:
https://www.w3ctech.com/topic/2226`));let u=t(...a);return u.postcssPlugin=e,u.postcssVersion=new fd().version,u}l(i,"creator");let o;return Object.defineProperty(i,"postcss",{get(){return o||(o=i()),o}}),i.process=function(a,u,f){return Ne([i(f)]).process(a,u)},i},"plugin2");Ne.stringify=B_;Ne.parse=z_;Ne.fromJSON=W_;Ne.list=j_;Ne.comment=n=>new rw(n);Ne.atRule=n=>new nw(n);Ne.decl=n=>new ew(n);Ne.rule=n=>new iw(n);Ne.root=n=>new sw(n);Ne.document=n=>new tw(n);Ne.CssSyntaxError=F_;Ne.Declaration=ew;Ne.Container=H_;Ne.Processor=fd;Ne.Document=tw;Ne.Comment=rw;Ne.Warning=V_;Ne.AtRule=nw;Ne.Result=U_;Ne.Input=G_;Ne.Rule=iw;Ne.Root=sw;Ne.Node=q_;$_.registerPostcss(Ne);var Y_=Ne;Ne.default=Ne;var Ze=oN(Y_);Ze.stringify;Ze.fromJSON;Ze.plugin;Ze.parse;Ze.list;Ze.document;Ze.comment;Ze.atRule;Ze.rule;Ze.decl;Ze.root;Ze.CssSyntaxError;Ze.Declaration;Ze.Container;Ze.Processor;Ze.Document;Ze.Comment;Ze.Warning;Ze.AtRule;Ze.Result;Ze.Input;Ze.Rule;Ze.Root;Ze.Node;var Ee=(n=>(n[n.Document=0]="Document",n[n.DocumentType=1]="DocumentType",n[n.Element=2]="Element",n[n.Text=3]="Text",n[n.CDATA=4]="CDATA",n[n.Comment=5]="Comment",n))(Ee||{});function K_(n){let e={},t=/;(?![^(]*\))/g,r=/:(.+)/,i=/\/\*.*?\*\//g;return n.replace(i,"").split(t).forEach(function(o){if(o){let a=o.split(r);a.length>1&&(e[vh(a[0].trim())]=a[1].trim())}}),e}l(K_,"parseCSSText");function fb(n){let e=[];for(let t in n){let r=n[t];if(typeof r!="string")continue;let i=Q_(t);e.push(`${i}: ${r};`)}return e.join(" ")}l(fb,"toCSSText");var X_=/-([a-z])/g,Z_=/^--[a-zA-Z0-9-]+$/,vh=l(n=>Z_.test(n)?n:n.replace(X_,(e,t)=>t?t.toUpperCase():""),"camelize"),J_=/\B([A-Z])/g,Q_=l(n=>n.replace(J_,"-$1").toLowerCase(),"hyphenate"),ir=class n{static{l(this,"BaseRRNode")}constructor(...e){J(this,"parentElement",null),J(this,"parentNode",null),J(this,"ownerDocument"),J(this,"firstChild",null),J(this,"lastChild",null),J(this,"previousSibling",null),J(this,"nextSibling",null),J(this,"ELEMENT_NODE",1),J(this,"TEXT_NODE",3),J(this,"nodeType"),J(this,"nodeName"),J(this,"RRNodeType")}get childNodes(){let e=[],t=this.firstChild;for(;t;)e.push(t),t=t.nextSibling;return e}contains(e){if(e instanceof n){if(e.ownerDocument!==this.ownerDocument)return!1;if(e===this)return!0}else return!1;for(;e.parentNode;){if(e.parentNode===this)return!0;e=e.parentNode}return!1}appendChild(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(e,t){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}},wh=class n extends ir{static{l(this,"BaseRRDocument")}constructor(...e){super(e),J(this,"nodeType",9),J(this,"nodeName","#document"),J(this,"compatMode","CSS1Compat"),J(this,"RRNodeType",Ee.Document),J(this,"textContent",null),this.ownerDocument=this}get documentElement(){return this.childNodes.find(e=>e.RRNodeType===Ee.Element&&e.tagName==="HTML")||null}get body(){var e;return((e=this.documentElement)==null?void 0:e.childNodes.find(t=>t.RRNodeType===Ee.Element&&t.tagName==="BODY"))||null}get head(){var e;return((e=this.documentElement)==null?void 0:e.childNodes.find(t=>t.RRNodeType===Ee.Element&&t.tagName==="HEAD"))||null}get implementation(){return this}get firstElementChild(){return this.documentElement}appendChild(e){let t=e.RRNodeType;if((t===Ee.Element||t===Ee.DocumentType)&&this.childNodes.some(i=>i.RRNodeType===t))throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': Only one ${t===Ee.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);let r=hd(this,e);return r.parentElement=null,r}insertBefore(e,t){let r=e.RRNodeType;if((r===Ee.Element||r===Ee.DocumentType)&&this.childNodes.some(o=>o.RRNodeType===r))throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': Only one ${r===Ee.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);let i=ow(this,e,t);return i.parentElement=null,i}removeChild(e){return aw(this,e)}open(){this.firstChild=null,this.lastChild=null}close(){}write(e){let t;if(e==='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'?t="-//W3C//DTD XHTML 1.0 Transitional//EN":e==='<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">'&&(t="-//W3C//DTD HTML 4.0 Transitional//EN"),t){let r=this.createDocumentType("html",t,"");this.open(),this.appendChild(r)}}createDocument(e,t,r){return new n}createDocumentType(e,t,r){let i=new dl(e,t,r);return i.ownerDocument=this,i}createElement(e){let t=new xi(e);return t.ownerDocument=this,t}createElementNS(e,t){return this.createElement(t)}createTextNode(e){let t=new pl(e);return t.ownerDocument=this,t}createComment(e){let t=new ml(e);return t.ownerDocument=this,t}createCDATASection(e){let t=new gl(e);return t.ownerDocument=this,t}toString(){return"RRDocument"}},dl=class extends ir{static{l(this,"BaseRRDocumentType")}constructor(e,t,r){super(),J(this,"nodeType",10),J(this,"RRNodeType",Ee.DocumentType),J(this,"name"),J(this,"publicId"),J(this,"systemId"),J(this,"textContent",null),this.name=e,this.publicId=t,this.systemId=r,this.nodeName=e}toString(){return"RRDocumentType"}},xi=class extends ir{static{l(this,"BaseRRElement")}constructor(e){super(),J(this,"nodeType",1),J(this,"RRNodeType",Ee.Element),J(this,"tagName"),J(this,"attributes",{}),J(this,"shadowRoot",null),J(this,"scrollLeft"),J(this,"scrollTop"),this.tagName=e.toUpperCase(),this.nodeName=e.toUpperCase()}get textContent(){let e="";return this.childNodes.forEach(t=>e+=t.textContent),e}set textContent(e){this.firstChild=null,this.lastChild=null,this.appendChild(this.ownerDocument.createTextNode(e))}get classList(){return new Ch(this.attributes.class,e=>{this.attributes.class=e})}get id(){return this.attributes.id||""}get className(){return this.attributes.class||""}get style(){let e=this.attributes.style?K_(this.attributes.style):{},t=/\B([A-Z])/g;return e.setProperty=(r,i,o)=>{if(t.test(r))return;let a=vh(r);i?e[a]=i:delete e[a],o==="important"&&(e[a]+=" !important"),this.attributes.style=fb(e)},e.removeProperty=r=>{if(t.test(r))return"";let i=vh(r),o=e[i]||"";return delete e[i],this.attributes.style=fb(e),o},e}getAttribute(e){return this.attributes[e]===void 0?null:this.attributes[e]}setAttribute(e,t){this.attributes[e]=t}setAttributeNS(e,t,r){this.setAttribute(t,r)}removeAttribute(e){delete this.attributes[e]}appendChild(e){return hd(this,e)}insertBefore(e,t){return ow(this,e,t)}removeChild(e){return aw(this,e)}attachShadow(e){let t=this.ownerDocument.createElement("SHADOWROOT");return this.shadowRoot=t,t}dispatchEvent(e){return!0}toString(){let e="";for(let t in this.attributes)e+=`${t}="${this.attributes[t]}" `;return`${this.tagName} ${e}`}},Sh=class extends xi{static{l(this,"BaseRRMediaElement")}constructor(){super(...arguments),J(this,"currentTime"),J(this,"volume"),J(this,"paused"),J(this,"muted"),J(this,"playbackRate"),J(this,"loop")}attachShadow(e){throw new Error("RRDomException: Failed to execute 'attachShadow' on 'RRElement': This RRElement does not support attachShadow")}play(){this.paused=!1}pause(){this.paused=!0}},Eh=class extends xi{static{l(this,"BaseRRDialogElement")}constructor(){super(...arguments),J(this,"tagName","DIALOG"),J(this,"nodeName","DIALOG")}get isModal(){return this.getAttribute("rr_open_mode")==="modal"}get open(){return this.getAttribute("open")!==null}close(){this.removeAttribute("open"),this.removeAttribute("rr_open_mode")}show(){this.setAttribute("open",""),this.setAttribute("rr_open_mode","non-modal")}showModal(){this.setAttribute("open",""),this.setAttribute("rr_open_mode","modal")}},pl=class extends ir{static{l(this,"BaseRRText")}constructor(e){super(),J(this,"nodeType",3),J(this,"nodeName","#text"),J(this,"RRNodeType",Ee.Text),J(this,"data"),this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRText text=${JSON.stringify(this.data)}`}},ml=class extends ir{static{l(this,"BaseRRComment")}constructor(e){super(),J(this,"nodeType",8),J(this,"nodeName","#comment"),J(this,"RRNodeType",Ee.Comment),J(this,"data"),this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRComment text=${JSON.stringify(this.data)}`}},gl=class extends ir{static{l(this,"BaseRRCDATASection")}constructor(e){super(),J(this,"nodeName","#cdata-section"),J(this,"nodeType",4),J(this,"RRNodeType",Ee.CDATA),J(this,"data"),this.data=e}get textContent(){return this.data}set textContent(e){this.data=e}toString(){return`RRCDATASection data=${JSON.stringify(this.data)}`}},Ch=class{static{l(this,"ClassList")}constructor(e,t){if(J(this,"onChange"),J(this,"classes",[]),J(this,"add",(...r)=>{for(let i of r){let o=String(i);this.classes.indexOf(o)>=0||this.classes.push(o)}this.onChange&&this.onChange(this.classes.join(" "))}),J(this,"remove",(...r)=>{this.classes=this.classes.filter(i=>r.indexOf(i)===-1),this.onChange&&this.onChange(this.classes.join(" "))}),e){let r=e.trim().split(/\s+/);this.classes.push(...r)}this.onChange=t}};function hd(n,e){return e.parentNode&&e.parentNode.removeChild(e),n.lastChild?(n.lastChild.nextSibling=e,e.previousSibling=n.lastChild):(n.firstChild=e,e.previousSibling=null),n.lastChild=e,e.nextSibling=null,e.parentNode=n,e.parentElement=n,e.ownerDocument=n.ownerDocument,e}l(hd,"appendChild");function ow(n,e,t){if(!t)return hd(n,e);if(t.parentNode!==n)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return e===t||(e.parentNode&&e.parentNode.removeChild(e),e.previousSibling=t.previousSibling,t.previousSibling=e,e.nextSibling=t,e.previousSibling?e.previousSibling.nextSibling=e:n.firstChild=e,e.parentElement=n,e.parentNode=n,e.ownerDocument=n.ownerDocument),e}l(ow,"insertBefore");function aw(n,e){if(e.parentNode!==n)throw new Error("Failed to execute 'removeChild' on 'RRNode': The RRNode to be removed is not a child of this RRNode.");return e.previousSibling?e.previousSibling.nextSibling=e.nextSibling:n.firstChild=e.nextSibling,e.nextSibling?e.nextSibling.previousSibling=e.previousSibling:n.lastChild=e.previousSibling,e.previousSibling=null,e.nextSibling=null,e.parentElement=null,e.parentNode=null,e}l(aw,"removeChild");var Bt=(n=>(n[n.PLACEHOLDER=0]="PLACEHOLDER",n[n.ELEMENT_NODE=1]="ELEMENT_NODE",n[n.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",n[n.TEXT_NODE=3]="TEXT_NODE",n[n.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",n[n.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",n[n.ENTITY_NODE=6]="ENTITY_NODE",n[n.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",n[n.COMMENT_NODE=8]="COMMENT_NODE",n[n.DOCUMENT_NODE=9]="DOCUMENT_NODE",n[n.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",n[n.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE",n))(Bt||{}),xh={svg:"http://www.w3.org/2000/svg","xlink:href":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/xmlns/"},eD={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"},yr=null;function yl(n,e,t,r=e.mirror||e.ownerDocument.mirror){n=tD(n,e,t,r),lw(n,e,t,r),rD(n,e,t)}l(yl,"diff");function tD(n,e,t,r){var i;if(t.afterAppend&&!yr&&(yr=new WeakSet,setTimeout(()=>{yr=null},0)),!dd(n,e)){let o=bl(e,t.mirror,r);(i=n.parentNode)==null||i.replaceChild(o,n),n=o}switch(e.RRNodeType){case Ee.Document:{if(!fi(n,e,t.mirror,r)){let o=r.getMeta(e);o&&(t.mirror.removeNodeFromMap(n),n.close(),n.open(),t.mirror.add(n,o),yr?.add(n))}break}case Ee.Element:{let o=n,a=e;switch(a.tagName){case"IFRAME":{let u=n.contentDocument;if(!u)break;yl(u,e.contentDocument,t,r);break}}a.shadowRoot&&(o.shadowRoot||o.attachShadow({mode:"open"}),lw(o.shadowRoot,a.shadowRoot,t,r)),nD(o,a,r);break}}return n}l(tD,"diffBeforeUpdatingChildren");function rD(n,e,t){var r;switch(e.RRNodeType){case Ee.Document:{let i=e.scrollData;i&&t.applyScroll(i,!0);break}case Ee.Element:{let i=n,o=e;switch(o.scrollData&&t.applyScroll(o.scrollData,!0),o.inputData&&t.applyInput(o.inputData),o.tagName){case"AUDIO":case"VIDEO":{let a=n,u=o;u.paused!==void 0&&(u.paused?a.pause():a.play()),u.muted!==void 0&&(a.muted=u.muted),u.volume!==void 0&&(a.volume=u.volume),u.currentTime!==void 0&&(a.currentTime=u.currentTime),u.playbackRate!==void 0&&(a.playbackRate=u.playbackRate),u.loop!==void 0&&(a.loop=u.loop);break}case"CANVAS":{let a=e;if(a.rr_dataURL!==null){let u=document.createElement("img");u.onload=()=>{let f=i.getContext("2d");f&&f.drawImage(u,0,0,u.width,u.height)},u.src=a.rr_dataURL}a.canvasMutations.forEach(u=>t.applyCanvas(u.event,u.mutation,n));break}case"STYLE":{let a=i.sheet;a&&e.rules.forEach(u=>t.applyStyleSheetMutation(u,a));break}case"DIALOG":{let a=i,u=o,f=a.open,h=a.matches("dialog:modal"),p=u.open,g=u.isModal,y=h!==g,w=f!==p;if((y||f&&w)&&a.close(),p&&(w||y))try{g?a.showModal():a.show()}catch(S){console.warn(S)}break}}break}case Ee.Text:case Ee.Comment:case Ee.CDATA:{n.textContent!==e.data&&(n.textContent=e.data);break}}yr?.has(n)&&(yr.delete(n),(r=t.afterAppend)==null||r.call(t,n,t.mirror.getId(n)))}l(rD,"diffAfterUpdatingChildren");function nD(n,e,t){let r=n.attributes,i=e.attributes;for(let o in i){let a=i[o],u=t.getMeta(e);if(u?.isSVG&&xh[o])n.setAttributeNS(xh[o],o,a);else if(e.tagName==="CANVAS"&&o==="rr_dataURL"){let f=document.createElement("img");f.src=a,f.onload=()=>{let h=n.getContext("2d");h&&h.drawImage(f,0,0,f.width,f.height)}}else{if(e.tagName==="IFRAME"&&o==="srcdoc")continue;try{n.setAttribute(o,a)}catch(f){console.warn(f)}}}for(let{name:o}of Array.from(r))o in i||n.removeAttribute(o);e.scrollLeft&&(n.scrollLeft=e.scrollLeft),e.scrollTop&&(n.scrollTop=e.scrollTop)}l(nD,"diffProps");function lw(n,e,t,r){let i=Array.from(n.childNodes),o=e.childNodes;if(i.length===0&&o.length===0)return;let a=0,u=i.length-1,f=0,h=o.length-1,p=i[a],g=i[u],y=o[f],w=o[h],S,E;for(;a<=u&&f<=h;)if(p===void 0)p=i[++a];else if(g===void 0)g=i[--u];else if(fi(p,y,t.mirror,r))p=i[++a],y=o[++f];else if(fi(g,w,t.mirror,r))g=i[--u],w=o[--h];else if(fi(p,w,t.mirror,r)){try{n.insertBefore(p,g.nextSibling)}catch(A){console.warn(A)}p=i[++a],w=o[--h]}else if(fi(g,y,t.mirror,r)){try{n.insertBefore(g,p)}catch(A){console.warn(A)}g=i[--u],y=o[++f]}else{if(!S){S={};for(let T=a;T<=u;T++){let N=i[T];N&&t.mirror.hasNode(N)&&(S[t.mirror.getId(N)]=T)}}E=S[r.getId(y)];let A=i[E];if(E!==void 0&&A&&fi(A,y,t.mirror,r)){try{n.insertBefore(A,p)}catch(T){console.warn(T)}i[E]=void 0}else{let T=bl(y,t.mirror,r);n.nodeName==="#document"&&p&&(T.nodeType===T.DOCUMENT_TYPE_NODE&&p.nodeType===p.DOCUMENT_TYPE_NODE||T.nodeType===T.ELEMENT_NODE&&p.nodeType===p.ELEMENT_NODE)&&(n.removeChild(p),t.mirror.removeNodeFromMap(p),p=i[++a]);try{n.insertBefore(T,p||null)}catch(N){console.warn(N)}}y=o[++f]}if(a>u){let A=o[h+1],T=null;for(A&&(T=t.mirror.getNode(r.getId(A)));f<=h;++f){let N=bl(o[f],t.mirror,r);try{n.insertBefore(N,T)}catch(U){console.warn(U)}}}else if(f>h)for(;a<=u;a++){let A=i[a];if(!(!A||A.parentNode!==n))try{n.removeChild(A),t.mirror.removeNodeFromMap(A)}catch(T){console.warn(T)}}let v=n.firstChild,M=e.firstChild;for(;v!==null&&M!==null;)yl(v,M,t,r),v=v.nextSibling,M=M.nextSibling}l(lw,"diffChildren");function bl(n,e,t){let r=t.getId(n),i=t.getMeta(n),o=null;if(r>-1&&(o=e.getNode(r)),o!==null&&dd(o,n))return o;switch(n.RRNodeType){case Ee.Document:o=new Document;break;case Ee.DocumentType:o=document.implementation.createDocumentType(n.name,n.publicId,n.systemId);break;case Ee.Element:{let a=n.tagName.toLowerCase();a=eD[a]||a,i&&"isSVG"in i&&i?.isSVG?o=document.createElementNS(xh.svg,a):o=document.createElement(n.tagName);break}case Ee.Text:o=document.createTextNode(n.data);break;case Ee.Comment:o=document.createComment(n.data);break;case Ee.CDATA:o=document.createCDATASection(n.data);break}i&&e.add(o,{...i});try{yr?.add(o)}catch{}return o}l(bl,"createOrGetNode");function dd(n,e){return n.nodeType!==e.nodeType?!1:n.nodeType!==n.ELEMENT_NODE||n.tagName.toUpperCase()===e.tagName}l(dd,"sameNodeType");function fi(n,e,t,r){let i=t.getId(n),o=r.getId(e);return i===-1||i!==o?!1:dd(n,e)}l(fi,"nodeMatching");var Mi=class n extends wh{static{l(this,"RRDocument")}constructor(e){super(),J(this,"UNSERIALIZED_STARTING_ID",-2),J(this,"_unserializedId",this.UNSERIALIZED_STARTING_ID),J(this,"mirror",uD()),J(this,"scrollData",null),e&&(this.mirror=e)}get unserializedId(){return this._unserializedId--}createDocument(e,t,r){return new n}createDocumentType(e,t,r){let i=new iD(e,t,r);return i.ownerDocument=this,i}createElement(e){let t=e.toUpperCase(),r;switch(t){case"AUDIO":case"VIDEO":r=new Mh(t);break;case"IFRAME":r=new Ah(t,this.mirror);break;case"CANVAS":r=new Ih(t);break;case"STYLE":r=new Rh(t);break;case"DIALOG":r=new Th(t);break;default:r=new Ti(t);break}return r.ownerDocument=this,r}createComment(e){let t=new oD(e);return t.ownerDocument=this,t}createCDATASection(e){let t=new aD(e);return t.ownerDocument=this,t}createTextNode(e){let t=new sD(e);return t.ownerDocument=this,t}destroyTree(){this.firstChild=null,this.lastChild=null,this.mirror.reset()}open(){super.open(),this._unserializedId=this.UNSERIALIZED_STARTING_ID}},iD=dl,Ti=class extends xi{static{l(this,"RRElement")}constructor(){super(...arguments),J(this,"inputData",null),J(this,"scrollData",null)}},Mh=class extends Sh{static{l(this,"RRMediaElement")}},Th=class extends Eh{static{l(this,"RRDialogElement")}},Ih=class extends Ti{static{l(this,"RRCanvasElement")}constructor(){super(...arguments),J(this,"rr_dataURL",null),J(this,"canvasMutations",[])}getContext(){return null}},Rh=class extends Ti{static{l(this,"RRStyleElement")}constructor(){super(...arguments),J(this,"rules",[])}},Ah=class extends Ti{static{l(this,"RRIFrameElement")}constructor(e,t){super(e),J(this,"contentDocument",new Mi),this.contentDocument.mirror=t}},sD=pl,oD=ml,aD=gl;function lD(n){return n instanceof HTMLFormElement?"FORM":n.tagName.toUpperCase()}l(lD,"getValidTagName");function cw(n,e,t,r){let i;switch(n.nodeType){case Bt.DOCUMENT_NODE:r&&r.nodeName==="IFRAME"?i=r.contentDocument:(i=e,i.compatMode=n.compatMode);break;case Bt.DOCUMENT_TYPE_NODE:{let a=n;i=e.createDocumentType(a.name,a.publicId,a.systemId);break}case Bt.ELEMENT_NODE:{let a=n,u=lD(a);i=e.createElement(u);let f=i;for(let{name:h,value:p}of Array.from(a.attributes))f.attributes[h]=p;a.scrollLeft&&(f.scrollLeft=a.scrollLeft),a.scrollTop&&(f.scrollTop=a.scrollTop);break}case Bt.TEXT_NODE:i=e.createTextNode(n.textContent||"");break;case Bt.CDATA_SECTION_NODE:i=e.createCDATASection(n.data);break;case Bt.COMMENT_NODE:i=e.createComment(n.textContent||"");break;case Bt.DOCUMENT_FRAGMENT_NODE:i=r.attachShadow({mode:"open"});break;default:return null}let o=t.getMeta(n);return e instanceof Mi&&(o||(o=uw(i,e.unserializedId),t.add(n,o)),e.mirror.add(i,{...o})),i}l(cw,"buildFromNode");function cD(n,e=sN(),t=new Mi){function r(i,o){let a=cw(i,t,e,o);if(a!==null)if(o?.nodeName!=="IFRAME"&&i.nodeType!==Bt.DOCUMENT_FRAGMENT_NODE&&(o?.appendChild(a),a.parentNode=o,a.parentElement=o),i.nodeName==="IFRAME"){let u=i.contentDocument;u&&r(u,a)}else(i.nodeType===Bt.DOCUMENT_NODE||i.nodeType===Bt.ELEMENT_NODE||i.nodeType===Bt.DOCUMENT_FRAGMENT_NODE)&&(i.nodeType===Bt.ELEMENT_NODE&&i.shadowRoot&&r(i.shadowRoot,a),i.childNodes.forEach(u=>r(u,a)))}return l(r,"walk2"),r(n,null),t}l(cD,"buildFromDom");function uD(){return new Oh}l(uD,"createMirror");var Oh=class{static{l(this,"Mirror22")}constructor(){J(this,"idNodeMap",new Map),J(this,"nodeMetaMap",new WeakMap)}getId(e){var t;return e?((t=this.getMeta(e))==null?void 0:t.id)??-1:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){let t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){let r=t.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,t)}replace(e,t){let r=this.getNode(e);if(r){let i=this.nodeMetaMap.get(r);i&&this.nodeMetaMap.set(t,i)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function uw(n,e){switch(n.RRNodeType){case Ee.Document:return{id:e,type:n.RRNodeType,childNodes:[]};case Ee.DocumentType:{let t=n;return{id:e,type:n.RRNodeType,name:t.name,publicId:t.publicId,systemId:t.systemId}}case Ee.Element:return{id:e,type:n.RRNodeType,tagName:n.tagName.toLowerCase(),attributes:{},childNodes:[]};case Ee.Text:return{id:e,type:n.RRNodeType,textContent:n.textContent||""};case Ee.Comment:return{id:e,type:n.RRNodeType,textContent:n.textContent||""};case Ee.CDATA:return{id:e,type:n.RRNodeType,textContent:""}}}l(uw,"getDefaultSN");var hb={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},db={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},za={},fD=l(()=>!!globalThis.Zone,"isAngularZonePresent");function pd(n){if(za[n])return za[n];let e=globalThis[n],t=e.prototype,r=n in hb?hb[n]:void 0,i=!!(r&&r.every(u=>{var f,h;return!!((h=(f=Object.getOwnPropertyDescriptor(t,u))==null?void 0:f.get)!=null&&h.toString().includes("[native code]"))})),o=n in db?db[n]:void 0,a=!!(o&&o.every(u=>{var f;return typeof t[u]=="function"&&((f=t[u])==null?void 0:f.toString().includes("[native code]"))}));if(i&&a&&!fD())return za[n]=e.prototype,e.prototype;try{let u=document.createElement("iframe");document.body.appendChild(u);let f=u.contentWindow;if(!f)return e.prototype;let h=f[n].prototype;return document.body.removeChild(u),h?za[n]=h:t}catch{return t}}l(pd,"getUntaintedPrototype");var Pf={};function fn(n,e,t){var r;let i=`${n}.${String(t)}`;if(Pf[i])return Pf[i].call(e);let o=pd(n),a=(r=Object.getOwnPropertyDescriptor(o,t))==null?void 0:r.get;return a?(Pf[i]=a,a.call(e)):e[t]}l(fn,"getUntaintedAccessor");var Ff={};function fw(n,e,t){let r=`${n}.${String(t)}`;if(Ff[r])return Ff[r].bind(e);let o=pd(n)[t];return typeof o!="function"?e[t]:(Ff[r]=o,o.bind(e))}l(fw,"getUntaintedMethod");function hD(n){return fn("Node",n,"childNodes")}l(hD,"childNodes");function dD(n){return fn("Node",n,"parentNode")}l(dD,"parentNode");function pD(n){return fn("Node",n,"parentElement")}l(pD,"parentElement");function mD(n){return fn("Node",n,"textContent")}l(mD,"textContent");function gD(n,e){return fw("Node",n,"contains")(e)}l(gD,"contains");function yD(n){return fw("Node",n,"getRootNode")()}l(yD,"getRootNode");function bD(n){return!n||!("host"in n)?null:fn("ShadowRoot",n,"host")}l(bD,"host");function vD(n){return n.styleSheets}l(vD,"styleSheets");function wD(n){return!n||!("shadowRoot"in n)?null:fn("Element",n,"shadowRoot")}l(wD,"shadowRoot");function SD(n,e){return fn("Element",n,"querySelector")(e)}l(SD,"querySelector");function ED(n,e){return fn("Element",n,"querySelectorAll")(e)}l(ED,"querySelectorAll");function hw(){return pd("MutationObserver").constructor}l(hw,"mutationObserverCtor");function Pn(n,e,t){try{if(!(e in n))return()=>{};let r=n[e],i=t(r);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:r}})),n[e]=i,()=>{n[e]=r}}catch{return()=>{}}}l(Pn,"patch");var we={childNodes:hD,parentNode:dD,parentElement:pD,textContent:mD,contains:gD,getRootNode:yD,host:bD,styleSheets:vD,shadowRoot:wD,querySelector:SD,querySelectorAll:ED,mutationObserver:hw,patch:Pn};function Tt(n,e,t=document){let r={capture:!0,passive:!0};return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e,r)}l(Tt,"on");var hi=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,pb={map:{},getId(){return console.error(hi),-1},getNode(){return console.error(hi),null},removeNodeFromMap(){console.error(hi)},has(){return console.error(hi),!1},reset(){console.error(hi)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(pb=new Proxy(pb,{get(n,e,t){return e==="map"&&console.error(hi),Reflect.get(n,e,t)}}));function Gs(n,e,t={}){let r=null,i=0;return function(...o){let a=Date.now();!i&&t.leading===!1&&(i=a);let u=e-(a-i),f=this;u<=0||u>e?(r&&(clearTimeout(r),r=null),i=a,n.apply(f,o)):!r&&t.trailing!==!1&&(r=setTimeout(()=>{i=t.leading===!1?0:Date.now(),r=null,n.apply(f,o)},u))}}l(Gs,"throttle");function Fl(n,e,t,r,i=window){let o=i.Object.getOwnPropertyDescriptor(n,e);return i.Object.defineProperty(n,e,r?t:{set(a){setTimeout(()=>{t.set.call(this,a)},0),o&&o.set&&o.set.call(this,a)}}),()=>Fl(n,e,o||{},!0)}l(Fl,"hookSetter");var vl=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(vl=l(()=>new Date().getTime(),"nowTimestamp"));function dw(n){var e,t,r,i;let o=n.document;return{left:o.scrollingElement?o.scrollingElement.scrollLeft:n.pageXOffset!==void 0?n.pageXOffset:o.documentElement.scrollLeft||o?.body&&((e=we.parentElement(o.body))==null?void 0:e.scrollLeft)||((t=o?.body)==null?void 0:t.scrollLeft)||0,top:o.scrollingElement?o.scrollingElement.scrollTop:n.pageYOffset!==void 0?n.pageYOffset:o?.documentElement.scrollTop||o?.body&&((r=we.parentElement(o.body))==null?void 0:r.scrollTop)||((i=o?.body)==null?void 0:i.scrollTop)||0}}l(dw,"getWindowScroll");function pw(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}l(pw,"getWindowHeight");function mw(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}l(mw,"getWindowWidth");function gw(n){return n?n.nodeType===n.ELEMENT_NODE?n:we.parentElement(n):null}l(gw,"closestElementOfNode");function It(n,e,t,r){if(!n)return!1;let i=gw(n);if(!i)return!1;try{if(typeof e=="string"){if(i.classList.contains(e)||r&&i.closest("."+e)!==null)return!0}else if(il(i,e,r))return!0}catch{}return!!(t&&(i.matches(t)||r&&i.closest(t)!==null))}l(It,"isBlocked");function CD(n,e){return e.getId(n)!==-1}l(CD,"isSerialized");function $f(n,e,t){return n.tagName==="TITLE"&&t.headTitleMutations?!0:e.getId(n)===ks}l($f,"isIgnored");function yw(n,e){if(As(n))return!1;let t=e.getId(n);if(!e.has(t))return!0;let r=we.parentNode(n);return r&&r.nodeType===n.DOCUMENT_NODE?!1:r?yw(r,e):!0}l(yw,"isAncestorRemoved");function Lh(n){return!!n.changedTouches}l(Lh,"legacy_isTouchEvent");function bw(n=window){"NodeList"in n&&!n.NodeList.prototype.forEach&&(n.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in n&&!n.DOMTokenList.prototype.forEach&&(n.DOMTokenList.prototype.forEach=Array.prototype.forEach)}l(bw,"polyfill$1");function xD(n){let e={},t=l((i,o)=>{let a={value:i,parent:o,children:[]};return e[i.node.id]=a,a},"putIntoMap"),r=[];for(let i of n){let{nextId:o,parentId:a}=i;if(o&&o in e){let u=e[o];if(u.parent){let f=u.parent.children.indexOf(u);u.parent.children.splice(f,0,t(i,u.parent))}else{let f=r.indexOf(u);r.splice(f,0,t(i,null))}continue}if(a in e){let u=e[a];u.children.push(t(i,u));continue}r.push(t(i,null))}return r}l(xD,"queueToResolveTrees");function vw(n,e){e(n.value);for(let t=n.children.length-1;t>=0;t--)vw(n.children[t],e)}l(vw,"iterateResolveTree");function Ns(n,e){return!!(n.nodeName==="IFRAME"&&e.getMeta(n))}l(Ns,"isSerializedIframe");function ww(n,e){return!!(n.nodeName==="LINK"&&n.nodeType===n.ELEMENT_NODE&&n.getAttribute&&n.getAttribute("rel")==="stylesheet"&&e.getMeta(n))}l(ww,"isSerializedStylesheet");function Sw(n,e){var t,r;let i=(r=(t=n.ownerDocument)==null?void 0:t.defaultView)==null?void 0:r.frameElement;if(!i||i===e)return{x:0,y:0,relativeScale:1,absoluteScale:1};let o=i.getBoundingClientRect(),a=Sw(i,e),u=o.height/i.clientHeight;return{x:o.x*a.relativeScale+a.x,y:o.y*a.relativeScale+a.y,relativeScale:u,absoluteScale:a.absoluteScale*u}}l(Sw,"getBaseDimension");function Nn(n){return n?n instanceof ir&&"shadowRoot"in n?!!n.shadowRoot:!!we.shadowRoot(n):!1}l(Nn,"hasShadowRoot");function Is(n,e){let t=n[e[0]];return e.length===1?t:Is(t.cssRules[e[1]].cssRules,e.slice(2))}l(Is,"getNestedRule");function mb(n){let e=[...n],t=e.pop();return{positions:e,index:t}}l(mb,"getPositionsAndIndex");function MD(n){let e=new Set,t=[];for(let r=n.length;r--;){let i=n[r];e.has(i.id)||(t.push(i),e.add(i.id))}return t}l(MD,"uniqueTextMutations");var wl=class{static{l(this,"StyleSheetMirror")}constructor(){P(this,"id",1),P(this,"styleIDMap",new WeakMap),P(this,"idStyleMap",new Map)}getId(e){return this.styleIDMap.get(e)??-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let r;return t===void 0?r=this.id++:r=t,this.styleIDMap.set(e,r),this.idStyleMap.set(r,e),r}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}};function Ew(n){var e;let t=null;return"getRootNode"in n&&((e=we.getRootNode(n))==null?void 0:e.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&we.host(we.getRootNode(n))&&(t=we.host(we.getRootNode(n))),t}l(Ew,"getShadowHost");function TD(n){let e=n,t;for(;t=Ew(e);)e=t;return e}l(TD,"getRootShadowHost");function ID(n){let e=n.ownerDocument;if(!e)return!1;let t=TD(n);return we.contains(e,t)}l(ID,"shadowHostInDom");function Cw(n){let e=n.ownerDocument;return e?we.contains(e,n)||ID(n):!1}l(Cw,"inDom");var j=(n=>(n[n.DomContentLoaded=0]="DomContentLoaded",n[n.Load=1]="Load",n[n.FullSnapshot=2]="FullSnapshot",n[n.IncrementalSnapshot=3]="IncrementalSnapshot",n[n.Meta=4]="Meta",n[n.Custom=5]="Custom",n[n.Plugin=6]="Plugin",n))(j||{}),V=(n=>(n[n.Mutation=0]="Mutation",n[n.MouseMove=1]="MouseMove",n[n.MouseInteraction=2]="MouseInteraction",n[n.Scroll=3]="Scroll",n[n.ViewportResize=4]="ViewportResize",n[n.Input=5]="Input",n[n.TouchMove=6]="TouchMove",n[n.MediaInteraction=7]="MediaInteraction",n[n.StyleSheetRule=8]="StyleSheetRule",n[n.CanvasMutation=9]="CanvasMutation",n[n.Font=10]="Font",n[n.Log=11]="Log",n[n.Drag=12]="Drag",n[n.StyleDeclaration=13]="StyleDeclaration",n[n.Selection=14]="Selection",n[n.AdoptedStyleSheet=15]="AdoptedStyleSheet",n[n.CustomElement=16]="CustomElement",n))(V||{}),ne=(n=>(n[n.MouseUp=0]="MouseUp",n[n.MouseDown=1]="MouseDown",n[n.Click=2]="Click",n[n.ContextMenu=3]="ContextMenu",n[n.DblClick=4]="DblClick",n[n.Focus=5]="Focus",n[n.Blur=6]="Blur",n[n.TouchStart=7]="TouchStart",n[n.TouchMove_Departed=8]="TouchMove_Departed",n[n.TouchEnd=9]="TouchEnd",n[n.TouchCancel=10]="TouchCancel",n))(ne||{}),Pr=(n=>(n[n.Mouse=0]="Mouse",n[n.Pen=1]="Pen",n[n.Touch=2]="Touch",n))(Pr||{}),Br=(n=>(n[n["2D"]=0]="2D",n[n.WebGL=1]="WebGL",n[n.WebGL2=2]="WebGL2",n))(Br||{}),an=(n=>(n[n.Play=0]="Play",n[n.Pause=1]="Pause",n[n.Seeked=2]="Seeked",n[n.VolumeChange=3]="VolumeChange",n[n.RateChange=4]="RateChange",n))(an||{}),ve=(n=>(n.Start="start",n.Pause="pause",n.Resume="resume",n.Resize="resize",n.Finish="finish",n.FullsnapshotRebuilded="fullsnapshot-rebuilded",n.LoadStylesheetStart="load-stylesheet-start",n.LoadStylesheetEnd="load-stylesheet-end",n.SkipStart="skip-start",n.SkipEnd="skip-end",n.MouseInteraction="mouse-interaction",n.EventCast="event-cast",n.CustomEvent="custom-event",n.Flush="flush",n.StateChange="state-change",n.PlayBack="play-back",n.Destroy="destroy",n))(ve||{}),Fr=(n=>(n[n.Document=0]="Document",n[n.DocumentType=1]="DocumentType",n[n.Element=2]="Element",n[n.Text=3]="Text",n[n.CDATA=4]="CDATA",n[n.Comment=5]="Comment",n))(Fr||{});function gb(n){return"__ln"in n}l(gb,"isNodeInLinkedList");var Nh=class{static{l(this,"DoubleLinkedList")}constructor(){P(this,"length",0),P(this,"head",null),P(this,"tail",null)}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let r=0;r<e;r++)t=t?.next||null;return t}addNode(e){let t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&gb(e.previousSibling)){let r=e.previousSibling.__ln.next;t.next=r,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,r&&(r.previous=t)}else if(e.nextSibling&&gb(e.nextSibling)&&e.nextSibling.__ln.previous){let r=e.nextSibling.__ln.previous;t.previous=r,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,r&&(r.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;t.next===null&&(this.tail=t),this.length++}removeNode(e){let t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}},yb=l((n,e)=>`${n}@${e}`,"moveKey"),_h=class{static{l(this,"MutationBuffer")}constructor(){P(this,"frozen",!1),P(this,"locked",!1),P(this,"texts",[]),P(this,"attributes",[]),P(this,"attributeMap",new WeakMap),P(this,"removes",[]),P(this,"mapRemoves",[]),P(this,"movedMap",{}),P(this,"addedSet",new Set),P(this,"movedSet",new Set),P(this,"droppedSet",new Set),P(this,"removesSubTreeCache",new Set),P(this,"mutationCb"),P(this,"blockClass"),P(this,"blockSelector"),P(this,"maskTextClass"),P(this,"maskTextSelector"),P(this,"inlineStylesheet"),P(this,"maskInputOptions"),P(this,"maskTextFn"),P(this,"maskInputFn"),P(this,"keepIframeSrcFn"),P(this,"recordCanvas"),P(this,"inlineImages"),P(this,"slimDOMOptions"),P(this,"dataURLOptions"),P(this,"doc"),P(this,"mirror"),P(this,"iframeManager"),P(this,"stylesheetManager"),P(this,"shadowDomManager"),P(this,"canvasManager"),P(this,"processedNodeManager"),P(this,"unattachedDoc"),P(this,"processMutations",e=>{e.forEach(this.processMutation),this.emit()}),P(this,"emit",()=>{if(this.frozen||this.locked)return;let e=[],t=new Set,r=new Nh,i=l(f=>{let h=f,p=ks;for(;p===ks;)h=h&&h.nextSibling,p=h&&this.mirror.getId(h);return p},"getNextId"),o=l(f=>{let h=we.parentNode(f);if(!h||!Cw(f))return;let p=!1;if(f.nodeType===Node.TEXT_NODE){let S=h.tagName;if(S==="TEXTAREA")return;S==="STYLE"&&this.addedSet.has(h)&&(p=!0)}let g=As(h)?this.mirror.getId(Ew(f)):this.mirror.getId(h),y=i(f);if(g===-1||y===-1)return r.addNode(f);let w=mi(f,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:l(S=>{Ns(S,this.mirror)&&this.iframeManager.addIframe(S),ww(S,this.mirror)&&this.stylesheetManager.trackLinkElement(S),Nn(f)&&this.shadowDomManager.addShadowRoot(we.shadowRoot(f),this.doc)},"onSerialize"),onIframeLoad:l((S,E)=>{this.iframeManager.attachIframe(S,E),this.shadowDomManager.observeAttachShadow(S)},"onIframeLoad"),onStylesheetLoad:l((S,E)=>{this.stylesheetManager.attachLinkElement(S,E)},"onStylesheetLoad"),cssCaptured:p});w&&(e.push({parentId:g,nextId:y,node:w}),t.add(w.id))},"pushAdd");for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(let f of this.movedSet)bb(this.removesSubTreeCache,f,this.mirror)&&!this.movedSet.has(we.parentNode(f))||o(f);for(let f of this.addedSet)!vb(this.droppedSet,f)&&!bb(this.removesSubTreeCache,f,this.mirror)||vb(this.movedSet,f)?o(f):this.droppedSet.add(f);let a=null;for(;r.length;){let f=null;if(a){let h=this.mirror.getId(we.parentNode(a.value)),p=i(a.value);h!==-1&&p!==-1&&(f=a)}if(!f){let h=r.tail;for(;h;){let p=h;if(h=h.previous,p){let g=this.mirror.getId(we.parentNode(p.value));if(i(p.value)===-1)continue;if(g!==-1){f=p;break}else{let w=p.value,S=we.parentNode(w);if(S&&S.nodeType===Node.DOCUMENT_FRAGMENT_NODE){let E=we.host(S);if(this.mirror.getId(E)!==-1){f=p;break}}}}}}if(!f){for(;r.head;)r.removeNode(r.head.value);break}a=f.previous,r.removeNode(f.value),o(f.value)}let u={texts:this.texts.map(f=>{let h=f.node,p=we.parentNode(h);return p&&p.tagName==="TEXTAREA"&&this.genTextAreaValueMutation(p),{id:this.mirror.getId(h),value:f.value}}).filter(f=>!t.has(f.id)).filter(f=>this.mirror.has(f.id)),attributes:this.attributes.map(f=>{let{attributes:h}=f;if(typeof h.style=="string"){let p=JSON.stringify(f.styleDiff),g=JSON.stringify(f._unchangedStyles);p.length<h.style.length&&(p+g).split("var(").length===h.style.split("var(").length&&(h.style=f.styleDiff)}return{id:this.mirror.getId(f.node),attributes:h}}).filter(f=>!t.has(f.id)).filter(f=>this.mirror.has(f.id)),removes:this.removes,adds:e};!u.texts.length&&!u.attributes.length&&!u.removes.length&&!u.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.removesSubTreeCache=new Set,this.movedMap={},this.mutationCb(u))}),P(this,"genTextAreaValueMutation",e=>{let t=this.attributeMap.get(e);t||(t={node:e,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(t),this.attributeMap.set(e,t));let r=Array.from(we.childNodes(e),i=>we.textContent(i)||"").join("");t.attributes.value=tl({element:e,maskInputOptions:this.maskInputOptions,tagName:e.tagName,type:rl(e),value:r,maskInputFn:this.maskInputFn})}),P(this,"processMutation",e=>{if(!$f(e.target,this.mirror,this.slimDOMOptions))switch(e.type){case"characterData":{let t=we.textContent(e.target);!It(e.target,this.blockClass,this.blockSelector,!1)&&t!==e.oldValue&&this.texts.push({value:Wb(e.target,this.maskTextClass,this.maskTextSelector,!0)&&t?this.maskTextFn?this.maskTextFn(t,gw(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{let t=e.target,r=e.attributeName,i=e.target.getAttribute(r);if(r==="value"){let a=rl(t);i=tl({element:t,maskInputOptions:this.maskInputOptions,tagName:t.tagName,type:a,value:i,maskInputFn:this.maskInputFn})}if(It(e.target,this.blockClass,this.blockSelector,!1)||i===e.oldValue)return;let o=this.attributeMap.get(e.target);if(t.tagName==="IFRAME"&&r==="src"&&!this.keepIframeSrcFn(i))if(!t.contentDocument)r="rr_src";else return;if(o||(o={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(o),this.attributeMap.set(e.target,o)),r==="type"&&t.tagName==="INPUT"&&(e.oldValue||"").toLowerCase()==="password"&&t.setAttribute("data-rr-is-password","true"),!Bb(t.tagName,r))if(o.attributes[r]=Hb(this.doc,cn(t.tagName),cn(r),i),r==="style"){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}let a=this.unattachedDoc.createElement("span");e.oldValue&&a.setAttribute("style",e.oldValue);for(let u of Array.from(t.style)){let f=t.style.getPropertyValue(u),h=t.style.getPropertyPriority(u);f!==a.style.getPropertyValue(u)||h!==a.style.getPropertyPriority(u)?h===""?o.styleDiff[u]=f:o.styleDiff[u]=[f,h]:o._unchangedStyles[u]=[f,h]}for(let u of Array.from(a.style))t.style.getPropertyValue(u)===""&&(o.styleDiff[u]=!1)}else r==="open"&&t.tagName==="DIALOG"&&(t.matches("dialog:modal")?o.attributes.rr_open_mode="modal":o.attributes.rr_open_mode="non-modal");break}case"childList":{if(It(e.target,this.blockClass,this.blockSelector,!0))return;if(e.target.tagName==="TEXTAREA"){this.genTextAreaValueMutation(e.target);return}e.addedNodes.forEach(t=>this.genAdds(t,e.target)),e.removedNodes.forEach(t=>{let r=this.mirror.getId(t),i=As(e.target)?this.mirror.getId(we.host(e.target)):this.mirror.getId(e.target);It(e.target,this.blockClass,this.blockSelector,!1)||$f(t,this.mirror,this.slimDOMOptions)||!CD(t,this.mirror)||(this.addedSet.has(t)?(Dh(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&r===-1||yw(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[yb(r,i)]?Dh(this.movedSet,t):(this.removes.push({parentId:i,id:r,isShadow:As(e.target)&&Os(e.target)?!0:void 0}),RD(t,this.removesSubTreeCache))),this.mapRemoves.push(t))});break}}}),P(this,"genAdds",(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!(this.addedSet.has(e)||this.movedSet.has(e))){if(this.mirror.hasNode(e)){if($f(e,this.mirror,this.slimDOMOptions))return;this.movedSet.add(e);let r=null;t&&this.mirror.hasNode(t)&&(r=this.mirror.getId(t)),r&&r!==-1&&(this.movedMap[yb(this.mirror.getId(e),r)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);It(e,this.blockClass,this.blockSelector,!1)||(we.childNodes(e).forEach(r=>this.genAdds(r)),Nn(e)&&we.childNodes(we.shadowRoot(e)).forEach(r=>{this.processedNodeManager.add(r,this),this.genAdds(r,e)}))}})}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(t=>{this[t]=e[t]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}};function Dh(n,e){n.delete(e),we.childNodes(e).forEach(t=>Dh(n,t))}l(Dh,"deepDelete");function RD(n,e){let t=[n];for(;t.length;){let r=t.pop();e.has(r)||(e.add(r),we.childNodes(r).forEach(i=>t.push(i)))}}l(RD,"processRemoves");function bb(n,e,t){return n.size===0?!1:AD(n,e)}l(bb,"isParentRemoved");function AD(n,e,t){let r=we.parentNode(e);return r?n.has(r):!1}l(AD,"_isParentRemoved");function vb(n,e){return n.size===0?!1:xw(n,e)}l(vb,"isAncestorInSet");function xw(n,e){let t=we.parentNode(e);return t?n.has(t)?!0:xw(n,t):!1}l(xw,"_isAncestorInSet");var _s;function OD(n){_s=n}l(OD,"registerErrorHandler");function LD(){_s=void 0}l(LD,"unregisterErrorHandler");var Ce=l(n=>_s?l((...t)=>{try{return n(...t)}catch(r){if(_s&&_s(r)===!0)return;throw r}},"rrwebWrapped"):n,"callbackWrapper"),_n=[];function Ks(n){try{if("composedPath"in n){let e=n.composedPath();if(e.length)return e[0]}else if("path"in n&&n.path.length)return n.path[0]}catch{}return n&&n.target}l(Ks,"getEventTarget");function Mw(n,e){let t=new _h;_n.push(t),t.init(n);let r=new(hw())(Ce(t.processMutations.bind(t)));return r.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),r}l(Mw,"initMutationObserver");function ND({mousemoveCb:n,sampling:e,doc:t,mirror:r}){if(e.mousemove===!1)return()=>{};let i=typeof e.mousemove=="number"?e.mousemove:50,o=typeof e.mousemoveCallback=="number"?e.mousemoveCallback:500,a=[],u,f=Gs(Ce(g=>{let y=Date.now()-u;n(a.map(w=>(w.timeOffset-=y,w)),g),a=[],u=null}),o),h=Ce(Gs(Ce(g=>{let y=Ks(g),{clientX:w,clientY:S}=Lh(g)?g.changedTouches[0]:g;u||(u=vl()),a.push({x:w,y:S,id:r.getId(y),timeOffset:vl()-u}),f(typeof DragEvent<"u"&&g instanceof DragEvent?V.Drag:g instanceof MouseEvent?V.MouseMove:V.TouchMove)}),i,{trailing:!1})),p=[Tt("mousemove",h,t),Tt("touchmove",h,t),Tt("drag",h,t)];return Ce(()=>{p.forEach(g=>g())})}l(ND,"initMoveObserver");function _D({mouseInteractionCb:n,doc:e,mirror:t,blockClass:r,blockSelector:i,sampling:o}){if(o.mouseInteraction===!1)return()=>{};let a=o.mouseInteraction===!0||o.mouseInteraction===void 0?{}:o.mouseInteraction,u=[],f=null,h=l(p=>g=>{let y=Ks(g);if(It(y,r,i,!0))return;let w=null,S=p;if("pointerType"in g){switch(g.pointerType){case"mouse":w=Pr.Mouse;break;case"touch":w=Pr.Touch;break;case"pen":w=Pr.Pen;break}w===Pr.Touch?ne[p]===ne.MouseDown?S="TouchStart":ne[p]===ne.MouseUp&&(S="TouchEnd"):Pr.Pen}else Lh(g)&&(w=Pr.Touch);w!==null?(f=w,(S.startsWith("Touch")&&w===Pr.Touch||S.startsWith("Mouse")&&w===Pr.Mouse)&&(w=null)):ne[p]===ne.Click&&(w=f,f=null);let E=Lh(g)?g.changedTouches[0]:g;if(!E)return;let v=t.getId(y),{clientX:M,clientY:A}=E;Ce(n)({type:ne[S],id:v,x:M,y:A,...w!==null&&{pointerType:w}})},"getHandler");return Object.keys(ne).filter(p=>Number.isNaN(Number(p))&&!p.endsWith("_Departed")&&a[p]!==!1).forEach(p=>{let g=cn(p),y=h(p);if(window.PointerEvent)switch(ne[p]){case ne.MouseDown:case ne.MouseUp:g=g.replace("mouse","pointer");break;case ne.TouchStart:case ne.TouchEnd:return}u.push(Tt(g,y,e))}),Ce(()=>{u.forEach(p=>p())})}l(_D,"initMouseInteractionObserver");function Tw({scrollCb:n,doc:e,mirror:t,blockClass:r,blockSelector:i,sampling:o}){let a=Ce(Gs(Ce(u=>{let f=Ks(u);if(!f||It(f,r,i,!0))return;let h=t.getId(f);if(f===e&&e.defaultView){let p=dw(e.defaultView);n({id:h,x:p.left,y:p.top})}else n({id:h,x:f.scrollLeft,y:f.scrollTop})}),o.scroll||100));return Tt("scroll",a,e)}l(Tw,"initScrollObserver");function DD({viewportResizeCb:n},{win:e}){let t=-1,r=-1,i=Ce(Gs(Ce(()=>{let o=pw(),a=mw();(t!==o||r!==a)&&(n({width:Number(a),height:Number(o)}),t=o,r=a)}),200));return Tt("resize",i,e)}l(DD,"initViewportResizeObserver");var kD=["INPUT","TEXTAREA","SELECT"],wb=new WeakMap;function PD({inputCb:n,doc:e,mirror:t,blockClass:r,blockSelector:i,ignoreClass:o,ignoreSelector:a,maskInputOptions:u,maskInputFn:f,sampling:h,userTriggeredOnInput:p}){function g(A){let T=Ks(A),N=A.isTrusted,U=T&&T.tagName;if(T&&U==="OPTION"&&(T=we.parentElement(T)),!T||!U||kD.indexOf(U)<0||It(T,r,i,!0)||T.classList.contains(o)||a&&T.matches(a))return;let G=T.value,Q=!1,W=rl(T)||"";W==="radio"||W==="checkbox"?Q=T.checked:(u[U.toLowerCase()]||u[W])&&(G=tl({element:T,maskInputOptions:u,tagName:U,type:W,value:G,maskInputFn:f})),y(T,p?{text:G,isChecked:Q,userTriggered:N}:{text:G,isChecked:Q});let z=T.name;W==="radio"&&z&&Q&&e.querySelectorAll(`input[type="radio"][name="${z}"]`).forEach(re=>{if(re!==T){let B=re.value;y(re,p?{text:B,isChecked:!Q,userTriggered:!1}:{text:B,isChecked:!Q})}})}l(g,"eventHandler");function y(A,T){let N=wb.get(A);if(!N||N.text!==T.text||N.isChecked!==T.isChecked){wb.set(A,T);let U=t.getId(A);Ce(n)({...T,id:U})}}l(y,"cbWithDedup");let S=(h.input==="last"?["change"]:["input","change"]).map(A=>Tt(A,Ce(g),e)),E=e.defaultView;if(!E)return()=>{S.forEach(A=>A())};let v=E.Object.getOwnPropertyDescriptor(E.HTMLInputElement.prototype,"value"),M=[[E.HTMLInputElement.prototype,"value"],[E.HTMLInputElement.prototype,"checked"],[E.HTMLSelectElement.prototype,"value"],[E.HTMLTextAreaElement.prototype,"value"],[E.HTMLSelectElement.prototype,"selectedIndex"],[E.HTMLOptionElement.prototype,"selected"]];return v&&v.set&&S.push(...M.map(A=>Fl(A[0],A[1],{set(){Ce(g)({target:this,isTrusted:!1})}},!1,E))),Ce(()=>{S.forEach(A=>A())})}l(PD,"initInputObserver");function Sl(n){let e=[];function t(r,i){if(ja("CSSGroupingRule")&&r.parentRule instanceof CSSGroupingRule||ja("CSSMediaRule")&&r.parentRule instanceof CSSMediaRule||ja("CSSSupportsRule")&&r.parentRule instanceof CSSSupportsRule||ja("CSSConditionRule")&&r.parentRule instanceof CSSConditionRule){let a=Array.from(r.parentRule.cssRules).indexOf(r);i.unshift(a)}else if(r.parentStyleSheet){let a=Array.from(r.parentStyleSheet.cssRules).indexOf(r);i.unshift(a)}return i}return l(t,"recurse"),t(n,e)}l(Sl,"getNestedCSSRulePositions");function on(n,e,t){let r,i;return n?(n.ownerNode?r=e.getId(n.ownerNode):i=t.getId(n),{styleId:i,id:r}):{}}l(on,"getIdAndStyleId");function FD({styleSheetRuleCb:n,mirror:e,stylesheetManager:t},{win:r}){if(!r.CSSStyleSheet||!r.CSSStyleSheet.prototype)return()=>{};let i=r.CSSStyleSheet.prototype.insertRule;r.CSSStyleSheet.prototype.insertRule=new Proxy(i,{apply:Ce((p,g,y)=>{let[w,S]=y,{id:E,styleId:v}=on(g,e,t.styleMirror);return(E&&E!==-1||v&&v!==-1)&&n({id:E,styleId:v,adds:[{rule:w,index:S}]}),p.apply(g,y)})}),r.CSSStyleSheet.prototype.addRule=function(p,g,y=this.cssRules.length){let w=`${p} { ${g} }`;return r.CSSStyleSheet.prototype.insertRule.apply(this,[w,y])};let o=r.CSSStyleSheet.prototype.deleteRule;r.CSSStyleSheet.prototype.deleteRule=new Proxy(o,{apply:Ce((p,g,y)=>{let[w]=y,{id:S,styleId:E}=on(g,e,t.styleMirror);return(S&&S!==-1||E&&E!==-1)&&n({id:S,styleId:E,removes:[{index:w}]}),p.apply(g,y)})}),r.CSSStyleSheet.prototype.removeRule=function(p){return r.CSSStyleSheet.prototype.deleteRule.apply(this,[p])};let a;r.CSSStyleSheet.prototype.replace&&(a=r.CSSStyleSheet.prototype.replace,r.CSSStyleSheet.prototype.replace=new Proxy(a,{apply:Ce((p,g,y)=>{let[w]=y,{id:S,styleId:E}=on(g,e,t.styleMirror);return(S&&S!==-1||E&&E!==-1)&&n({id:S,styleId:E,replace:w}),p.apply(g,y)})}));let u;r.CSSStyleSheet.prototype.replaceSync&&(u=r.CSSStyleSheet.prototype.replaceSync,r.CSSStyleSheet.prototype.replaceSync=new Proxy(u,{apply:Ce((p,g,y)=>{let[w]=y,{id:S,styleId:E}=on(g,e,t.styleMirror);return(S&&S!==-1||E&&E!==-1)&&n({id:S,styleId:E,replaceSync:w}),p.apply(g,y)})}));let f={};qa("CSSGroupingRule")?f.CSSGroupingRule=r.CSSGroupingRule:(qa("CSSMediaRule")&&(f.CSSMediaRule=r.CSSMediaRule),qa("CSSConditionRule")&&(f.CSSConditionRule=r.CSSConditionRule),qa("CSSSupportsRule")&&(f.CSSSupportsRule=r.CSSSupportsRule));let h={};return Object.entries(f).forEach(([p,g])=>{h[p]={insertRule:g.prototype.insertRule,deleteRule:g.prototype.deleteRule},g.prototype.insertRule=new Proxy(h[p].insertRule,{apply:Ce((y,w,S)=>{let[E,v]=S,{id:M,styleId:A}=on(w.parentStyleSheet,e,t.styleMirror);return(M&&M!==-1||A&&A!==-1)&&n({id:M,styleId:A,adds:[{rule:E,index:[...Sl(w),v||0]}]}),y.apply(w,S)})}),g.prototype.deleteRule=new Proxy(h[p].deleteRule,{apply:Ce((y,w,S)=>{let[E]=S,{id:v,styleId:M}=on(w.parentStyleSheet,e,t.styleMirror);return(v&&v!==-1||M&&M!==-1)&&n({id:v,styleId:M,removes:[{index:[...Sl(w),E]}]}),y.apply(w,S)})})}),Ce(()=>{r.CSSStyleSheet.prototype.insertRule=i,r.CSSStyleSheet.prototype.deleteRule=o,a&&(r.CSSStyleSheet.prototype.replace=a),u&&(r.CSSStyleSheet.prototype.replaceSync=u),Object.entries(f).forEach(([p,g])=>{g.prototype.insertRule=h[p].insertRule,g.prototype.deleteRule=h[p].deleteRule})})}l(FD,"initStyleSheetObserver");function Iw({mirror:n,stylesheetManager:e},t){var r,i,o;let a=null;t.nodeName==="#document"?a=n.getId(t):a=n.getId(we.host(t));let u=t.nodeName==="#document"?(r=t.defaultView)==null?void 0:r.Document:(o=(i=t.ownerDocument)==null?void 0:i.defaultView)==null?void 0:o.ShadowRoot,f=u?.prototype?Object.getOwnPropertyDescriptor(u?.prototype,"adoptedStyleSheets"):void 0;return a===null||a===-1||!u||!f?()=>{}:(Object.defineProperty(t,"adoptedStyleSheets",{configurable:f.configurable,enumerable:f.enumerable,get(){var h;return(h=f.get)==null?void 0:h.call(this)},set(h){var p;let g=(p=f.set)==null?void 0:p.call(this,h);if(a!==null&&a!==-1)try{e.adoptStyleSheets(h,a)}catch{}return g}}),Ce(()=>{Object.defineProperty(t,"adoptedStyleSheets",{configurable:f.configurable,enumerable:f.enumerable,get:f.get,set:f.set})}))}l(Iw,"initAdoptedStyleSheetObserver");function $D({styleDeclarationCb:n,mirror:e,ignoreCSSAttributes:t,stylesheetManager:r},{win:i}){let o=i.CSSStyleDeclaration.prototype.setProperty;i.CSSStyleDeclaration.prototype.setProperty=new Proxy(o,{apply:Ce((u,f,h)=>{var p;let[g,y,w]=h;if(t.has(g))return o.apply(f,[g,y,w]);let{id:S,styleId:E}=on((p=f.parentRule)==null?void 0:p.parentStyleSheet,e,r.styleMirror);return(S&&S!==-1||E&&E!==-1)&&n({id:S,styleId:E,set:{property:g,value:y,priority:w},index:Sl(f.parentRule)}),u.apply(f,h)})});let a=i.CSSStyleDeclaration.prototype.removeProperty;return i.CSSStyleDeclaration.prototype.removeProperty=new Proxy(a,{apply:Ce((u,f,h)=>{var p;let[g]=h;if(t.has(g))return a.apply(f,[g]);let{id:y,styleId:w}=on((p=f.parentRule)==null?void 0:p.parentStyleSheet,e,r.styleMirror);return(y&&y!==-1||w&&w!==-1)&&n({id:y,styleId:w,remove:{property:g},index:Sl(f.parentRule)}),u.apply(f,h)})}),Ce(()=>{i.CSSStyleDeclaration.prototype.setProperty=o,i.CSSStyleDeclaration.prototype.removeProperty=a})}l($D,"initStyleDeclarationObserver");function HD({mediaInteractionCb:n,blockClass:e,blockSelector:t,mirror:r,sampling:i,doc:o}){let a=Ce(f=>Gs(Ce(h=>{let p=Ks(h);if(!p||It(p,e,t,!0))return;let{currentTime:g,volume:y,muted:w,playbackRate:S,loop:E}=p;n({type:f,id:r.getId(p),currentTime:g,volume:y,muted:w,playbackRate:S,loop:E})}),i.media||500)),u=[Tt("play",a(an.Play),o),Tt("pause",a(an.Pause),o),Tt("seeked",a(an.Seeked),o),Tt("volumechange",a(an.VolumeChange),o),Tt("ratechange",a(an.RateChange),o)];return Ce(()=>{u.forEach(f=>f())})}l(HD,"initMediaInteractionObserver");function BD({fontCb:n,doc:e}){let t=e.defaultView;if(!t)return()=>{};let r=[],i=new WeakMap,o=t.FontFace;t.FontFace=l(function(f,h,p){let g=new o(f,h,p);return i.set(g,{family:f,buffer:typeof h!="string",descriptors:p,fontSource:typeof h=="string"?h:JSON.stringify(Array.from(new Uint8Array(h)))}),g},"FontFace2");let a=Pn(e.fonts,"add",function(u){return function(f){return setTimeout(Ce(()=>{let h=i.get(f);h&&(n(h),i.delete(f))}),0),u.apply(this,[f])}});return r.push(()=>{t.FontFace=o}),r.push(a),Ce(()=>{r.forEach(u=>u())})}l(BD,"initFontObserver");function WD(n){let{doc:e,mirror:t,blockClass:r,blockSelector:i,selectionCb:o}=n,a=!0,u=Ce(()=>{let f=e.getSelection();if(!f||a&&f?.isCollapsed)return;a=f.isCollapsed||!1;let h=[],p=f.rangeCount||0;for(let g=0;g<p;g++){let y=f.getRangeAt(g),{startContainer:w,startOffset:S,endContainer:E,endOffset:v}=y;It(w,r,i,!0)||It(E,r,i,!0)||h.push({start:t.getId(w),startOffset:S,end:t.getId(E),endOffset:v})}o({ranges:h})});return u(),Tt("selectionchange",u)}l(WD,"initSelectionObserver");function VD({doc:n,customElementCb:e}){let t=n.defaultView;return!t||!t.customElements?()=>{}:Pn(t.customElements,"define",function(i){return function(o,a,u){try{e({define:{name:o}})}catch{console.warn(`Custom element callback failed for ${o}`)}return i.apply(this,[o,a,u])}})}l(VD,"initCustomElementObserver");function UD(n,e){let{mutationCb:t,mousemoveCb:r,mouseInteractionCb:i,scrollCb:o,viewportResizeCb:a,inputCb:u,mediaInteractionCb:f,styleSheetRuleCb:h,styleDeclarationCb:p,canvasMutationCb:g,fontCb:y,selectionCb:w,customElementCb:S}=n;n.mutationCb=(...E)=>{e.mutation&&e.mutation(...E),t(...E)},n.mousemoveCb=(...E)=>{e.mousemove&&e.mousemove(...E),r(...E)},n.mouseInteractionCb=(...E)=>{e.mouseInteraction&&e.mouseInteraction(...E),i(...E)},n.scrollCb=(...E)=>{e.scroll&&e.scroll(...E),o(...E)},n.viewportResizeCb=(...E)=>{e.viewportResize&&e.viewportResize(...E),a(...E)},n.inputCb=(...E)=>{e.input&&e.input(...E),u(...E)},n.mediaInteractionCb=(...E)=>{e.mediaInteaction&&e.mediaInteaction(...E),f(...E)},n.styleSheetRuleCb=(...E)=>{e.styleSheetRule&&e.styleSheetRule(...E),h(...E)},n.styleDeclarationCb=(...E)=>{e.styleDeclaration&&e.styleDeclaration(...E),p(...E)},n.canvasMutationCb=(...E)=>{e.canvasMutation&&e.canvasMutation(...E),g(...E)},n.fontCb=(...E)=>{e.font&&e.font(...E),y(...E)},n.selectionCb=(...E)=>{e.selection&&e.selection(...E),w(...E)},n.customElementCb=(...E)=>{e.customElement&&e.customElement(...E),S(...E)}}l(UD,"mergeHooks");function GD(n,e={}){let t=n.doc.defaultView;if(!t)return()=>{};UD(n,e);let r;n.recordDOM&&(r=Mw(n,n.doc));let i=ND(n),o=_D(n),a=Tw(n),u=DD(n,{win:t}),f=PD(n),h=HD(n),p=l(()=>{},"styleSheetObserver"),g=l(()=>{},"adoptedStyleSheetObserver"),y=l(()=>{},"styleDeclarationObserver"),w=l(()=>{},"fontObserver");n.recordDOM&&(p=FD(n,{win:t}),g=Iw(n,n.doc),y=$D(n,{win:t}),n.collectFonts&&(w=BD(n)));let S=WD(n),E=VD(n),v=[];for(let M of n.plugins)v.push(M.observer(M.callback,t,M.options));return Ce(()=>{_n.forEach(M=>M.reset()),r?.disconnect(),i(),o(),a(),u(),f(),h(),p(),g(),y(),w(),S(),E(),v.forEach(M=>M())})}l(GD,"initObservers");function ja(n){return typeof window[n]<"u"}l(ja,"hasNestedCSSRule");function qa(n){return!!(typeof window[n]<"u"&&window[n].prototype&&"insertRule"in window[n].prototype&&"deleteRule"in window[n].prototype)}l(qa,"canMonkeyPatchNestedCSSRule");var El=class{static{l(this,"CrossOriginIframeMirror")}constructor(e){P(this,"iframeIdToRemoteIdMap",new WeakMap),P(this,"iframeRemoteIdToIdMap",new WeakMap),this.generateIdFn=e}getId(e,t,r,i){let o=r||this.getIdToRemoteIdMap(e),a=i||this.getRemoteIdToIdMap(e),u=o.get(t);return u||(u=this.generateIdFn(),o.set(t,u),a.set(u,t)),u}getIds(e,t){let r=this.getIdToRemoteIdMap(e),i=this.getRemoteIdToIdMap(e);return t.map(o=>this.getId(e,o,r,i))}getRemoteId(e,t,r){let i=r||this.getRemoteIdToIdMap(e);if(typeof t!="number")return t;let o=i.get(t);return o||-1}getRemoteIds(e,t){let r=this.getRemoteIdToIdMap(e);return t.map(i=>this.getRemoteId(e,i,r))}reset(e){if(!e){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}},kh=class{static{l(this,"IframeManager")}constructor(e){P(this,"iframes",new WeakMap),P(this,"crossOriginIframeMap",new WeakMap),P(this,"crossOriginIframeMirror",new El($b)),P(this,"crossOriginIframeStyleMirror"),P(this,"crossOriginIframeRootIdMap",new WeakMap),P(this,"mirror"),P(this,"mutationCb"),P(this,"wrappedEmit"),P(this,"loadListener"),P(this,"stylesheetManager"),P(this,"recordCrossOriginIframes"),this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new El(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var r,i;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),this.recordCrossOriginIframes&&((r=e.contentWindow)==null||r.addEventListener("message",this.handleMessage.bind(this))),(i=this.loadListener)==null||i.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){let t=e;if(t.data.type!=="rrweb"||t.origin!==t.data.origin||!e.source)return;let i=this.crossOriginIframeMap.get(e.source);if(!i)return;let o=this.transformCrossOriginEvent(i,t.data.event);o&&this.wrappedEmit(o,t.data.isCheckout)}transformCrossOriginEvent(e,t){var r;switch(t.type){case j.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);let i=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,i),this.patchRootIdOnNode(t.data.node,i),{timestamp:t.timestamp,type:j.IncrementalSnapshot,data:{source:V.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case j.Meta:case j.Load:case j.DomContentLoaded:return!1;case j.Plugin:return t;case j.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case j.IncrementalSnapshot:switch(t.data.source){case V.Mutation:return t.data.adds.forEach(i=>{this.replaceIds(i,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(i.node,e);let o=this.crossOriginIframeRootIdMap.get(e);o&&this.patchRootIdOnNode(i.node,o)}),t.data.removes.forEach(i=>{this.replaceIds(i,e,["parentId","id"])}),t.data.attributes.forEach(i=>{this.replaceIds(i,e,["id"])}),t.data.texts.forEach(i=>{this.replaceIds(i,e,["id"])}),t;case V.Drag:case V.TouchMove:case V.MouseMove:return t.data.positions.forEach(i=>{this.replaceIds(i,e,["id"])}),t;case V.ViewportResize:return!1;case V.MediaInteraction:case V.MouseInteraction:case V.Scroll:case V.CanvasMutation:case V.Input:return this.replaceIds(t.data,e,["id"]),t;case V.StyleSheetRule:case V.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case V.Font:return t;case V.Selection:return t.data.ranges.forEach(i=>{this.replaceIds(i,e,["start","end"])}),t;case V.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),(r=t.data.styles)==null||r.forEach(i=>{this.replaceStyleIds(i,e,["styleId"])}),t}}return!1}replace(e,t,r,i){for(let o of i)!Array.isArray(t[o])&&typeof t[o]!="number"||(Array.isArray(t[o])?t[o]=e.getIds(r,t[o]):t[o]=e.getId(r,t[o]));return t}replaceIds(e,t,r){return this.replace(this.crossOriginIframeMirror,e,t,r)}replaceStyleIds(e,t,r){return this.replace(this.crossOriginIframeStyleMirror,e,t,r)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(r=>{this.replaceIdOnNode(r,t)})}patchRootIdOnNode(e,t){e.type!==Fr.Document&&!e.rootId&&(e.rootId=t),"childNodes"in e&&e.childNodes.forEach(r=>{this.patchRootIdOnNode(r,t)})}},Ph=class{static{l(this,"ShadowDomManager")}constructor(e){P(this,"shadowDoms",new WeakSet),P(this,"mutationCb"),P(this,"scrollCb"),P(this,"bypassOptions"),P(this,"mirror"),P(this,"restoreHandlers",[]),this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!Os(e)||this.shadowDoms.has(e))return;this.shadowDoms.add(e);let r=Mw({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push(()=>r.disconnect()),this.restoreHandlers.push(Tw({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),setTimeout(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(we.host(e))),this.restoreHandlers.push(Iw({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){!e.contentWindow||!e.contentDocument||this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){let r=this;this.restoreHandlers.push(Pn(e.prototype,"attachShadow",function(i){return function(o){let a=i.call(this,o),u=we.shadowRoot(this);return u&&Cw(this)&&r.addShadowRoot(u,t),a}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}},gi="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rs=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(Ts=0;Ts<gi.length;Ts++)Rs[gi.charCodeAt(Ts)]=Ts;var Ts,zD=l(function(n){var e=new Uint8Array(n),t,r=e.length,i="";for(t=0;t<r;t+=3)i+=gi[e[t]>>2],i+=gi[(e[t]&3)<<4|e[t+1]>>4],i+=gi[(e[t+1]&15)<<2|e[t+2]>>6],i+=gi[e[t+2]&63];return r%3===2?i=i.substring(0,i.length-1)+"=":r%3===1&&(i=i.substring(0,i.length-2)+"=="),i},"encode"),jD=l(function(n){var e=n.length*.75,t=n.length,r,i=0,o,a,u,f;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var h=new ArrayBuffer(e),p=new Uint8Array(h);for(r=0;r<t;r+=4)o=Rs[n.charCodeAt(r)],a=Rs[n.charCodeAt(r+1)],u=Rs[n.charCodeAt(r+2)],f=Rs[n.charCodeAt(r+3)],p[i++]=o<<2|a>>4,p[i++]=(a&15)<<4|u>>2,p[i++]=(u&3)<<6|f&63;return h},"decode"),Sb=new Map;function qD(n,e){let t=Sb.get(n);return t||(t=new Map,Sb.set(n,t)),t.has(e)||t.set(e,[]),t.get(e)}l(qD,"variableListFor$1");var Rw=l((n,e,t)=>{if(!n||!(Ow(n,e)||typeof n=="object"))return;let r=n.constructor.name,i=qD(t,r),o=i.indexOf(n);return o===-1&&(o=i.length,i.push(n)),o},"saveWebGLVar");function Qa(n,e,t){if(n instanceof Array)return n.map(r=>Qa(r,e,t));if(n===null)return n;if(n instanceof Float32Array||n instanceof Float64Array||n instanceof Int32Array||n instanceof Uint32Array||n instanceof Uint8Array||n instanceof Uint16Array||n instanceof Int16Array||n instanceof Int8Array||n instanceof Uint8ClampedArray)return{rr_type:n.constructor.name,args:[Object.values(n)]};if(n instanceof ArrayBuffer){let r=n.constructor.name,i=zD(n);return{rr_type:r,base64:i}}else{if(n instanceof DataView)return{rr_type:n.constructor.name,args:[Qa(n.buffer,e,t),n.byteOffset,n.byteLength]};if(n instanceof HTMLImageElement){let r=n.constructor.name,{src:i}=n;return{rr_type:r,src:i}}else if(n instanceof HTMLCanvasElement){let r="HTMLImageElement",i=n.toDataURL();return{rr_type:r,src:i}}else{if(n instanceof ImageData)return{rr_type:n.constructor.name,args:[Qa(n.data,e,t),n.width,n.height]};if(Ow(n,e)||typeof n=="object"){let r=n.constructor.name,i=Rw(n,e,t);return{rr_type:r,index:i}}}}return n}l(Qa,"serializeArg");var Aw=l((n,e,t)=>n.map(r=>Qa(r,e,t)),"serializeArgs"),Ow=l((n,e)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(i=>typeof e[i]=="function").find(i=>n instanceof e[i]),"isInstanceOfWebGLObject");function YD(n,e,t,r){let i=[],o=Object.getOwnPropertyNames(e.CanvasRenderingContext2D.prototype);for(let a of o)try{if(typeof e.CanvasRenderingContext2D.prototype[a]!="function")continue;let u=Pn(e.CanvasRenderingContext2D.prototype,a,function(f){return function(...h){return It(this.canvas,t,r,!0)||setTimeout(()=>{let p=Aw(h,e,this);n(this.canvas,{type:Br["2D"],property:a,args:p})},0),f.apply(this,h)}});i.push(u)}catch{let u=Fl(e.CanvasRenderingContext2D.prototype,a,{set(f){n(this.canvas,{type:Br["2D"],property:a,args:[f],setter:!0})}});i.push(u)}return()=>{i.forEach(a=>a())}}l(YD,"initCanvas2DMutationObserver");function KD(n){return n==="experimental-webgl"?"webgl":n}l(KD,"getNormalizedContextName");function Eb(n,e,t,r){let i=[];try{let o=Pn(n.HTMLCanvasElement.prototype,"getContext",function(a){return function(u,...f){if(!It(this,e,t,!0)){let h=KD(u);if("__context"in this||(this.__context=h),r&&["webgl","webgl2"].includes(h))if(f[0]&&typeof f[0]=="object"){let p=f[0];p.preserveDrawingBuffer||(p.preserveDrawingBuffer=!0)}else f.splice(0,1,{preserveDrawingBuffer:!0})}return a.apply(this,[u,...f])}});i.push(o)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{i.forEach(o=>o())}}l(Eb,"initCanvasContextObserver");function Cb(n,e,t,r,i,o){let a=[],u=Object.getOwnPropertyNames(n);for(let f of u)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(f))try{if(typeof n[f]!="function")continue;let h=Pn(n,f,function(p){return function(...g){let y=p.apply(this,g);if(Rw(y,o,this),"tagName"in this.canvas&&!It(this.canvas,r,i,!0)){let w=Aw(g,o,this),S={type:e,property:f,args:w};t(this.canvas,S)}return y}});a.push(h)}catch{let h=Fl(n,f,{set(p){t(this.canvas,{type:e,property:f,args:[p],setter:!0})}});a.push(h)}return a}l(Cb,"patchGLPrototype");function XD(n,e,t,r){let i=[];return i.push(...Cb(e.WebGLRenderingContext.prototype,Br.WebGL,n,t,r,e)),typeof e.WebGL2RenderingContext<"u"&&i.push(...Cb(e.WebGL2RenderingContext.prototype,Br.WebGL2,n,t,r,e)),()=>{i.forEach(o=>o())}}l(XD,"initCanvasWebGLMutationObserver");var Lw="KGZ1bmN0aW9uKCkgewogICJ1c2Ugc3RyaWN0IjsKICB2YXIgY2hhcnMgPSAiQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLyI7CiAgdmFyIGxvb2t1cCA9IHR5cGVvZiBVaW50OEFycmF5ID09PSAidW5kZWZpbmVkIiA/IFtdIDogbmV3IFVpbnQ4QXJyYXkoMjU2KTsKICBmb3IgKHZhciBpID0gMDsgaSA8IGNoYXJzLmxlbmd0aDsgaSsrKSB7CiAgICBsb29rdXBbY2hhcnMuY2hhckNvZGVBdChpKV0gPSBpOwogIH0KICB2YXIgZW5jb2RlID0gZnVuY3Rpb24oYXJyYXlidWZmZXIpIHsKICAgIHZhciBieXRlcyA9IG5ldyBVaW50OEFycmF5KGFycmF5YnVmZmVyKSwgaTIsIGxlbiA9IGJ5dGVzLmxlbmd0aCwgYmFzZTY0ID0gIiI7CiAgICBmb3IgKGkyID0gMDsgaTIgPCBsZW47IGkyICs9IDMpIHsKICAgICAgYmFzZTY0ICs9IGNoYXJzW2J5dGVzW2kyXSA+PiAyXTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMl0gJiAzKSA8PCA0IHwgYnl0ZXNbaTIgKyAxXSA+PiA0XTsKICAgICAgYmFzZTY0ICs9IGNoYXJzWyhieXRlc1tpMiArIDFdICYgMTUpIDw8IDIgfCBieXRlc1tpMiArIDJdID4+IDZdOwogICAgICBiYXNlNjQgKz0gY2hhcnNbYnl0ZXNbaTIgKyAyXSAmIDYzXTsKICAgIH0KICAgIGlmIChsZW4gJSAzID09PSAyKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDEpICsgIj0iOwogICAgfSBlbHNlIGlmIChsZW4gJSAzID09PSAxKSB7CiAgICAgIGJhc2U2NCA9IGJhc2U2NC5zdWJzdHJpbmcoMCwgYmFzZTY0Lmxlbmd0aCAtIDIpICsgIj09IjsKICAgIH0KICAgIHJldHVybiBiYXNlNjQ7CiAgfTsKICBjb25zdCBsYXN0QmxvYk1hcCA9IC8qIEBfX1BVUkVfXyAqLyBuZXcgTWFwKCk7CiAgY29uc3QgdHJhbnNwYXJlbnRCbG9iTWFwID0gLyogQF9fUFVSRV9fICovIG5ldyBNYXAoKTsKICBhc3luYyBmdW5jdGlvbiBnZXRUcmFuc3BhcmVudEJsb2JGb3Iod2lkdGgsIGhlaWdodCwgZGF0YVVSTE9wdGlvbnMpIHsKICAgIGNvbnN0IGlkID0gYCR7d2lkdGh9LSR7aGVpZ2h0fWA7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBpZiAodHJhbnNwYXJlbnRCbG9iTWFwLmhhcyhpZCkpIHJldHVybiB0cmFuc3BhcmVudEJsb2JNYXAuZ2V0KGlkKTsKICAgICAgY29uc3Qgb2Zmc2NyZWVuID0gbmV3IE9mZnNjcmVlbkNhbnZhcyh3aWR0aCwgaGVpZ2h0KTsKICAgICAgb2Zmc2NyZWVuLmdldENvbnRleHQoIjJkIik7CiAgICAgIGNvbnN0IGJsb2IgPSBhd2FpdCBvZmZzY3JlZW4uY29udmVydFRvQmxvYihkYXRhVVJMT3B0aW9ucyk7CiAgICAgIGNvbnN0IGFycmF5QnVmZmVyID0gYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpOwogICAgICBjb25zdCBiYXNlNjQgPSBlbmNvZGUoYXJyYXlCdWZmZXIpOwogICAgICB0cmFuc3BhcmVudEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICByZXR1cm4gYmFzZTY0OwogICAgfSBlbHNlIHsKICAgICAgcmV0dXJuICIiOwogICAgfQogIH0KICBjb25zdCB3b3JrZXIgPSBzZWxmOwogIHdvcmtlci5vbm1lc3NhZ2UgPSBhc3luYyBmdW5jdGlvbihlKSB7CiAgICBpZiAoIk9mZnNjcmVlbkNhbnZhcyIgaW4gZ2xvYmFsVGhpcykgewogICAgICBjb25zdCB7IGlkLCBiaXRtYXAsIHdpZHRoLCBoZWlnaHQsIGRhdGFVUkxPcHRpb25zIH0gPSBlLmRhdGE7CiAgICAgIGNvbnN0IHRyYW5zcGFyZW50QmFzZTY0ID0gZ2V0VHJhbnNwYXJlbnRCbG9iRm9yKAogICAgICAgIHdpZHRoLAogICAgICAgIGhlaWdodCwKICAgICAgICBkYXRhVVJMT3B0aW9ucwogICAgICApOwogICAgICBjb25zdCBvZmZzY3JlZW4gPSBuZXcgT2Zmc2NyZWVuQ2FudmFzKHdpZHRoLCBoZWlnaHQpOwogICAgICBjb25zdCBjdHggPSBvZmZzY3JlZW4uZ2V0Q29udGV4dCgiMmQiKTsKICAgICAgY3R4LmRyYXdJbWFnZShiaXRtYXAsIDAsIDApOwogICAgICBiaXRtYXAuY2xvc2UoKTsKICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IG9mZnNjcmVlbi5jb252ZXJ0VG9CbG9iKGRhdGFVUkxPcHRpb25zKTsKICAgICAgY29uc3QgdHlwZSA9IGJsb2IudHlwZTsKICAgICAgY29uc3QgYXJyYXlCdWZmZXIgPSBhd2FpdCBibG9iLmFycmF5QnVmZmVyKCk7CiAgICAgIGNvbnN0IGJhc2U2NCA9IGVuY29kZShhcnJheUJ1ZmZlcik7CiAgICAgIGlmICghbGFzdEJsb2JNYXAuaGFzKGlkKSAmJiBhd2FpdCB0cmFuc3BhcmVudEJhc2U2NCA9PT0gYmFzZTY0KSB7CiAgICAgICAgbGFzdEJsb2JNYXAuc2V0KGlkLCBiYXNlNjQpOwogICAgICAgIHJldHVybiB3b3JrZXIucG9zdE1lc3NhZ2UoeyBpZCB9KTsKICAgICAgfQogICAgICBpZiAobGFzdEJsb2JNYXAuZ2V0KGlkKSA9PT0gYmFzZTY0KSByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQgfSk7CiAgICAgIHdvcmtlci5wb3N0TWVzc2FnZSh7CiAgICAgICAgaWQsCiAgICAgICAgdHlwZSwKICAgICAgICBiYXNlNjQsCiAgICAgICAgd2lkdGgsCiAgICAgICAgaGVpZ2h0CiAgICAgIH0pOwogICAgICBsYXN0QmxvYk1hcC5zZXQoaWQsIGJhc2U2NCk7CiAgICB9IGVsc2UgewogICAgICByZXR1cm4gd29ya2VyLnBvc3RNZXNzYWdlKHsgaWQ6IGUuZGF0YS5pZCB9KTsKICAgIH0KICB9Owp9KSgpOwovLyMgc291cmNlTWFwcGluZ1VSTD1pbWFnZS1iaXRtYXAtZGF0YS11cmwtd29ya2VyLUlKcEM3Z19iLmpzLm1hcAo=",ZD=l(n=>Uint8Array.from(atob(n),e=>e.charCodeAt(0)),"decodeBase64"),xb=typeof window<"u"&&window.Blob&&new Blob([ZD(Lw)],{type:"text/javascript;charset=utf-8"});function JD(n){let e;try{if(e=xb&&(window.URL||window.webkitURL).createObjectURL(xb),!e)throw"";let t=new Worker(e,{name:n?.name});return t.addEventListener("error",()=>{(window.URL||window.webkitURL).revokeObjectURL(e)}),t}catch{return new Worker("data:text/javascript;base64,"+Lw,{name:n?.name})}finally{e&&(window.URL||window.webkitURL).revokeObjectURL(e)}}l(JD,"WorkerWrapper");var Fh=class{static{l(this,"CanvasManager")}constructor(e){P(this,"pendingCanvasMutations",new Map),P(this,"rafStamps",{latestId:0,invokeId:null}),P(this,"mirror"),P(this,"mutationCb"),P(this,"resetObservers"),P(this,"frozen",!1),P(this,"locked",!1),P(this,"processMutation",(f,h)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(f)||this.pendingCanvasMutations.set(f,[]),this.pendingCanvasMutations.get(f).push(h)});let{sampling:t="all",win:r,blockClass:i,blockSelector:o,recordCanvas:a,dataURLOptions:u}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,a&&t==="all"&&this.initCanvasMutationObserver(r,i,o),a&&typeof t=="number"&&this.initCanvasFPSObserver(t,r,i,o,{dataURLOptions:u})}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}initCanvasFPSObserver(e,t,r,i,o){let a=Eb(t,r,i,!0),u=new Map,f=new JD;f.onmessage=S=>{let{id:E}=S.data;if(u.set(E,!1),!("base64"in S.data))return;let{base64:v,type:M,width:A,height:T}=S.data;this.mutationCb({id:E,type:Br["2D"],commands:[{property:"clearRect",args:[0,0,A,T]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:v}],type:M}]},0,0]}]})};let h=1e3/e,p=0,g,y=l(()=>{let S=[];return t.document.querySelectorAll("canvas").forEach(E=>{It(E,r,i,!0)||S.push(E)}),S},"getCanvas"),w=l(S=>{if(p&&S-p<h){g=requestAnimationFrame(w);return}p=S,y().forEach(async E=>{var v;let M=this.mirror.getId(E);if(u.get(M)||E.width===0||E.height===0)return;if(u.set(M,!0),["webgl","webgl2"].includes(E.__context)){let T=E.getContext(E.__context);((v=T?.getContextAttributes())==null?void 0:v.preserveDrawingBuffer)===!1&&T.clear(T.COLOR_BUFFER_BIT)}let A=await createImageBitmap(E);f.postMessage({id:M,bitmap:A,width:E.width,height:E.height,dataURLOptions:o.dataURLOptions},[A])}),g=requestAnimationFrame(w)},"takeCanvasSnapshots");g=requestAnimationFrame(w),this.resetObservers=()=>{a(),cancelAnimationFrame(g)}}initCanvasMutationObserver(e,t,r){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();let i=Eb(e,t,r,!1),o=YD(this.processMutation.bind(this),e,t,r),a=XD(this.processMutation.bind(this),e,t,r);this.resetObservers=()=>{i(),o(),a()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){let e=l(t=>{this.rafStamps.latestId=t,requestAnimationFrame(e)},"setLatestRAFTimestamp");requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((e,t)=>{let r=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,r)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;let r=this.pendingCanvasMutations.get(e);if(!r||t===-1)return;let i=r.map(a=>{let{type:u,...f}=a;return f}),{type:o}=r[0];this.mutationCb({id:t,type:o,commands:i}),this.pendingCanvasMutations.delete(e)}},$h=class{static{l(this,"StylesheetManager")}constructor(e){P(this,"trackedLinkElements",new WeakSet),P(this,"mutationCb"),P(this,"adoptedStyleSheetCb"),P(this,"styleMirror",new wl),this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(e.length===0)return;let r={id:t,styleIds:[]},i=[];for(let o of e){let a;this.styleMirror.has(o)?a=this.styleMirror.getId(o):(a=this.styleMirror.add(o),i.push({styleId:a,rules:Array.from(o.rules||CSSRule,(u,f)=>({rule:Pb(u,o.href),index:f}))})),r.styleIds.push(a)}i.length>0&&(r.styles=i),this.adoptedStyleSheetCb(r)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}},Hh=class{static{l(this,"ProcessedNodeManager")}constructor(){P(this,"nodeMap",new WeakMap),P(this,"active",!1)}inOtherBuffer(e,t){let r=this.nodeMap.get(e);return r&&Array.from(r).some(i=>i!==t)}add(e,t){this.active||(this.active=!0,requestAnimationFrame(()=>{this.nodeMap=new WeakMap,this.active=!1})),this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}destroy(){}},nt,el,Hf,Cl=!1;try{if(Array.from([1],n=>n*2)[0]!==2){let n=document.createElement("iframe");document.body.appendChild(n),Array.from=((Ey=n.contentWindow)==null?void 0:Ey.Array.from)||Array.from,document.body.removeChild(n)}}catch(n){console.debug("Unable to override Array.from",n)}var nr=Fb();function Xt(n={}){let{emit:e,checkoutEveryNms:t,checkoutEveryNth:r,blockClass:i="rr-block",blockSelector:o=null,ignoreClass:a="rr-ignore",ignoreSelector:u=null,maskTextClass:f="rr-mask",maskTextSelector:h=null,inlineStylesheet:p=!0,maskAllInputs:g,maskInputOptions:y,slimDOMOptions:w,maskInputFn:S,maskTextFn:E,hooks:v,packFn:M,sampling:A={},dataURLOptions:T={},mousemoveWait:N,recordDOM:U=!0,recordCanvas:G=!1,recordCrossOriginIframes:Q=!1,recordAfter:W=n.recordAfter==="DOMContentLoaded"?n.recordAfter:"load",userTriggeredOnInput:z=!1,collectFonts:re=!1,inlineImages:B=!1,plugins:q,keepIframeSrcFn:k=l(()=>!1,"keepIframeSrcFn"),ignoreCSSAttributes:ee=new Set([]),errorHandler:X}=n;OD(X);let Y=Q?window.parent===window:!0,he=!1;if(!Y)try{window.parent.document&&(he=!1)}catch{he=!0}if(Y&&!e)throw new Error("emit function is required");if(!Y&&!he)return()=>{};N!==void 0&&A.mousemove===void 0&&(A.mousemove=N),nr.reset();let Ae=g===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:y!==void 0?y:{password:!0},xe=w===!0||w==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:w==="all",headMetaDescKeywords:w==="all",headTitleMutations:w==="all"}:w||{};bw();let Cr,ge=0,dt=l(Me=>{for(let Qe of q||[])Qe.eventProcessor&&(Me=Qe.eventProcessor(Me));return M&&!he&&(Me=M(Me)),Me},"eventProcessor");nt=l((Me,Qe)=>{var ke;let Ye=Me;if(Ye.timestamp=vl(),(ke=_n[0])!=null&&ke.isFrozen()&&Ye.type!==j.FullSnapshot&&!(Ye.type===j.IncrementalSnapshot&&Ye.data.source===V.Mutation)&&_n.forEach(at=>at.unfreeze()),Y)e?.(dt(Ye),Qe);else if(he){let at={type:"rrweb",event:dt(Ye),origin:window.location.origin,isCheckout:Qe};window.parent.postMessage(at,"*")}if(Ye.type===j.FullSnapshot)Cr=Ye,ge=0;else if(Ye.type===j.IncrementalSnapshot){if(Ye.data.source===V.Mutation&&Ye.data.isAttachIframe)return;ge++;let at=r&&ge>=r,Ie=t&&Ye.timestamp-Cr.timestamp>t;(at||Ie)&&el(!0)}},"wrappedEmit");let ut=l(Me=>{nt({type:j.IncrementalSnapshot,data:{source:V.Mutation,...Me}})},"wrappedMutationEmit"),ot=l(Me=>nt({type:j.IncrementalSnapshot,data:{source:V.Scroll,...Me}}),"wrappedScrollEmit"),yn=l(Me=>nt({type:j.IncrementalSnapshot,data:{source:V.CanvasMutation,...Me}}),"wrappedCanvasMutationEmit"),Wt=l(Me=>nt({type:j.IncrementalSnapshot,data:{source:V.AdoptedStyleSheet,...Me}}),"wrappedAdoptedStyleSheetEmit"),_t=new $h({mutationCb:ut,adoptedStyleSheetCb:Wt}),xr=new kh({mirror:nr,mutationCb:ut,stylesheetManager:_t,recordCrossOriginIframes:Q,wrappedEmit:nt});for(let Me of q||[])Me.getMirror&&Me.getMirror({nodeMirror:nr,crossOriginIframeMirror:xr.crossOriginIframeMirror,crossOriginIframeStyleMirror:xr.crossOriginIframeStyleMirror});let zr=new Hh;Hf=new Fh({recordCanvas:G,mutationCb:yn,win:window,blockClass:i,blockSelector:o,mirror:nr,sampling:A.canvas,dataURLOptions:T});let Mr=new Ph({mutationCb:ut,scrollCb:ot,bypassOptions:{blockClass:i,blockSelector:o,maskTextClass:f,maskTextSelector:h,inlineStylesheet:p,maskInputOptions:Ae,dataURLOptions:T,maskTextFn:E,maskInputFn:S,recordCanvas:G,inlineImages:B,sampling:A,slimDOMOptions:xe,iframeManager:xr,stylesheetManager:_t,canvasManager:Hf,keepIframeSrcFn:k,processedNodeManager:zr},mirror:nr});el=l((Me=!1)=>{if(!U)return;nt({type:j.Meta,data:{href:window.location.href,width:mw(),height:pw()}},Me),_t.reset(),Mr.init(),_n.forEach(ke=>ke.lock());let Qe=eO(document,{mirror:nr,blockClass:i,blockSelector:o,maskTextClass:f,maskTextSelector:h,inlineStylesheet:p,maskAllInputs:Ae,maskTextFn:E,maskInputFn:S,slimDOM:xe,dataURLOptions:T,recordCanvas:G,inlineImages:B,onSerialize:l(ke=>{Ns(ke,nr)&&xr.addIframe(ke),ww(ke,nr)&&_t.trackLinkElement(ke),Nn(ke)&&Mr.addShadowRoot(we.shadowRoot(ke),document)},"onSerialize"),onIframeLoad:l((ke,Ye)=>{xr.attachIframe(ke,Ye),Mr.observeAttachShadow(ke)},"onIframeLoad"),onStylesheetLoad:l((ke,Ye)=>{_t.attachLinkElement(ke,Ye)},"onStylesheetLoad"),keepIframeSrcFn:k});if(!Qe)return console.warn("Failed to snapshot the document");nt({type:j.FullSnapshot,data:{node:Qe,initialOffset:dw(window)}},Me),_n.forEach(ke=>ke.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&_t.adoptStyleSheets(document.adoptedStyleSheets,nr.getId(document))},"takeFullSnapshot$1");try{let Me=[],Qe=l(Ye=>{var at;return Ce(GD)({mutationCb:ut,mousemoveCb:l((Ie,ji)=>nt({type:j.IncrementalSnapshot,data:{source:ji,positions:Ie}}),"mousemoveCb"),mouseInteractionCb:l(Ie=>nt({type:j.IncrementalSnapshot,data:{source:V.MouseInteraction,...Ie}}),"mouseInteractionCb"),scrollCb:ot,viewportResizeCb:l(Ie=>nt({type:j.IncrementalSnapshot,data:{source:V.ViewportResize,...Ie}}),"viewportResizeCb"),inputCb:l(Ie=>nt({type:j.IncrementalSnapshot,data:{source:V.Input,...Ie}}),"inputCb"),mediaInteractionCb:l(Ie=>nt({type:j.IncrementalSnapshot,data:{source:V.MediaInteraction,...Ie}}),"mediaInteractionCb"),styleSheetRuleCb:l(Ie=>nt({type:j.IncrementalSnapshot,data:{source:V.StyleSheetRule,...Ie}}),"styleSheetRuleCb"),styleDeclarationCb:l(Ie=>nt({type:j.IncrementalSnapshot,data:{source:V.StyleDeclaration,...Ie}}),"styleDeclarationCb"),canvasMutationCb:yn,fontCb:l(Ie=>nt({type:j.IncrementalSnapshot,data:{source:V.Font,...Ie}}),"fontCb"),selectionCb:l(Ie=>{nt({type:j.IncrementalSnapshot,data:{source:V.Selection,...Ie}})},"selectionCb"),customElementCb:l(Ie=>{nt({type:j.IncrementalSnapshot,data:{source:V.CustomElement,...Ie}})},"customElementCb"),blockClass:i,ignoreClass:a,ignoreSelector:u,maskTextClass:f,maskTextSelector:h,maskInputOptions:Ae,inlineStylesheet:p,sampling:A,recordDOM:U,recordCanvas:G,inlineImages:B,userTriggeredOnInput:z,collectFonts:re,doc:Ye,maskInputFn:S,maskTextFn:E,keepIframeSrcFn:k,blockSelector:o,slimDOMOptions:xe,dataURLOptions:T,mirror:nr,iframeManager:xr,stylesheetManager:_t,shadowDomManager:Mr,processedNodeManager:zr,canvasManager:Hf,ignoreCSSAttributes:ee,plugins:((at=q?.filter(Ie=>Ie.observer))==null?void 0:at.map(Ie=>({observer:Ie.observer,options:Ie.options,callback:l(ji=>nt({type:j.Plugin,data:{plugin:Ie.name,payload:ji}}),"callback")})))||[]},v)},"observe");xr.addLoadListener(Ye=>{try{Me.push(Qe(Ye.contentDocument))}catch(at){console.warn(at)}});let ke=l(()=>{el(),Me.push(Qe(document)),Cl=!0},"init");return document.readyState==="interactive"||document.readyState==="complete"?ke():(Me.push(Tt("DOMContentLoaded",()=>{nt({type:j.DomContentLoaded,data:{}}),W==="DOMContentLoaded"&&ke()})),Me.push(Tt("load",()=>{nt({type:j.Load,data:{}}),W==="load"&&ke()},window))),()=>{Me.forEach(Ye=>Ye()),zr.destroy(),Cl=!1,LD()}}catch(Me){console.warn(Me)}}l(Xt,"record");Xt.addCustomEvent=(n,e)=>{if(!Cl)throw new Error("please add custom event after start recording");nt({type:j.Custom,data:{tag:n,payload:e}})};Xt.freezePage=()=>{_n.forEach(n=>n.freeze())};Xt.takeFullSnapshot=n=>{if(!Cl)throw new Error("please take full snapshot after start recording");el(n)};Xt.mirror=nr;function Nw(n){return{all:n=n||new Map,on:l(function(e,t){var r=n.get(e);r?r.push(t):n.set(e,[t])},"on"),off:l(function(e,t){var r=n.get(e);r&&(t?r.splice(r.indexOf(t)>>>0,1):n.set(e,[]))},"off"),emit:l(function(e,t){var r=n.get(e);r&&r.slice().map(function(i){i(t)}),(r=n.get("*"))&&r.slice().map(function(i){i(e,t)})},"emit")}}l(Nw,"mitt$1");var QD=Object.freeze(Object.defineProperty({__proto__:null,default:Nw},Symbol.toStringTag,{value:"Module"}));function ek(n=window,e=document){if("scrollBehavior"in e.documentElement.style&&n.__forceSmoothScrollPolyfill__!==!0)return;let t=n.HTMLElement||n.Element,r=468,i={scroll:n.scroll||n.scrollTo,scrollBy:n.scrollBy,elementScroll:t.prototype.scroll||f,scrollIntoView:t.prototype.scrollIntoView},o=n.performance&&n.performance.now?n.performance.now.bind(n.performance):Date.now;function a(M){let A=["MSIE ","Trident/","Edge/"];return new RegExp(A.join("|")).test(M)}l(a,"isMicrosoftBrowser");let u=a(n.navigator.userAgent)?1:0;function f(M,A){this.scrollLeft=M,this.scrollTop=A}l(f,"scrollElement");function h(M){return .5*(1-Math.cos(Math.PI*M))}l(h,"ease");function p(M){if(M===null||typeof M!="object"||M.behavior===void 0||M.behavior==="auto"||M.behavior==="instant")return!0;if(typeof M=="object"&&M.behavior==="smooth")return!1;throw new TypeError("behavior member of ScrollOptions "+M.behavior+" is not a valid value for enumeration ScrollBehavior.")}l(p,"shouldBailOut");function g(M,A){if(A==="Y")return M.clientHeight+u<M.scrollHeight;if(A==="X")return M.clientWidth+u<M.scrollWidth}l(g,"hasScrollableSpace");function y(M,A){let T=n.getComputedStyle(M,null)["overflow"+A];return T==="auto"||T==="scroll"}l(y,"canOverflow");function w(M){let A=g(M,"Y")&&y(M,"Y"),T=g(M,"X")&&y(M,"X");return A||T}l(w,"isScrollable");function S(M){for(;M!==e.body&&w(M)===!1;)M=M.parentNode||M.host;return M}l(S,"findScrollableParent");function E(M){let A=o(),T,N,U,G=(A-M.startTime)/r;G=G>1?1:G,T=h(G),N=M.startX+(M.x-M.startX)*T,U=M.startY+(M.y-M.startY)*T,M.method.call(M.scrollable,N,U),(N!==M.x||U!==M.y)&&n.requestAnimationFrame(E.bind(n,M))}l(E,"step");function v(M,A,T){let N,U,G,Q,W=o();M===e.body?(N=n,U=n.scrollX||n.pageXOffset,G=n.scrollY||n.pageYOffset,Q=i.scroll):(N=M,U=M.scrollLeft,G=M.scrollTop,Q=f),E({scrollable:N,method:Q,startTime:W,startX:U,startY:G,x:A,y:T})}l(v,"smoothScroll"),n.scroll=n.scrollTo=function(){if(arguments[0]!==void 0){if(p(arguments[0])===!0){i.scroll.call(n,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:n.scrollX||n.pageXOffset,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:n.scrollY||n.pageYOffset);return}v.call(n,e.body,arguments[0].left!==void 0?~~arguments[0].left:n.scrollX||n.pageXOffset,arguments[0].top!==void 0?~~arguments[0].top:n.scrollY||n.pageYOffset)}},n.scrollBy=function(){if(arguments[0]!==void 0){if(p(arguments[0])){i.scrollBy.call(n,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:0,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:0);return}v.call(n,e.body,~~arguments[0].left+(n.scrollX||n.pageXOffset),~~arguments[0].top+(n.scrollY||n.pageYOffset))}},t.prototype.scroll=t.prototype.scrollTo=function(){if(arguments[0]===void 0)return;if(p(arguments[0])===!0){if(typeof arguments[0]=="number"&&arguments[1]===void 0)throw new SyntaxError("Value could not be converted");i.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left:typeof arguments[0]!="object"?~~arguments[0]:this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top:arguments[1]!==void 0?~~arguments[1]:this.scrollTop);return}let M=arguments[0].left,A=arguments[0].top;v.call(this,this,typeof M>"u"?this.scrollLeft:~~M,typeof A>"u"?this.scrollTop:~~A)},t.prototype.scrollBy=function(){if(arguments[0]!==void 0){if(p(arguments[0])===!0){i.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop);return}this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior})}},t.prototype.scrollIntoView=function(){if(p(arguments[0])===!0){i.scrollIntoView.call(this,arguments[0]===void 0?!0:arguments[0]);return}let M=S(this),A=M.getBoundingClientRect(),T=this.getBoundingClientRect();M!==e.body?(v.call(this,M,M.scrollLeft+T.left-A.left,M.scrollTop+T.top-A.top),n.getComputedStyle(M).position!=="fixed"&&n.scrollBy({left:A.left,top:A.top,behavior:"smooth"})):n.scrollBy({left:T.left,top:T.top,behavior:"smooth"})}}l(ek,"polyfill");var Bh=class{static{l(this,"Timer")}constructor(e=[],t){P(this,"timeOffset",0),P(this,"speed"),P(this,"actions"),P(this,"raf",null),P(this,"lastTimestamp"),this.actions=e,this.speed=t.speed}addAction(e){let t=this.raf===!0;if(!this.actions.length||this.actions[this.actions.length-1].delay<=e.delay)this.actions.push(e);else{let r=this.findActionIndex(e);this.actions.splice(r,0,e)}t&&(this.raf=requestAnimationFrame(this.rafCheck.bind(this)))}start(){this.timeOffset=0,this.lastTimestamp=performance.now(),this.raf=requestAnimationFrame(this.rafCheck.bind(this))}rafCheck(){let e=performance.now();for(this.timeOffset+=(e-this.lastTimestamp)*this.speed,this.lastTimestamp=e;this.actions.length;){let t=this.actions[0];if(this.timeOffset>=t.delay)this.actions.shift(),t.doAction();else break}this.actions.length>0?this.raf=requestAnimationFrame(this.rafCheck.bind(this)):this.raf=!0}clear(){this.raf&&(this.raf!==!0&&cancelAnimationFrame(this.raf),this.raf=null),this.actions.length=0}setSpeed(e){this.speed=e}isActive(){return this.raf!==null}findActionIndex(e){let t=0,r=this.actions.length-1;for(;t<=r;){let i=Math.floor((t+r)/2);if(this.actions[i].delay<e.delay)t=i+1;else if(this.actions[i].delay>e.delay)r=i-1;else return i+1}return t}};function Mb(n,e){if(n.type===j.IncrementalSnapshot&&n.data.source===V.MouseMove&&n.data.positions&&n.data.positions.length){let t=n.data.positions[0].timeOffset,r=n.timestamp+t;return n.delay=r-e,r-e}return n.delay=n.timestamp-e,n.delay}l(Mb,"addDelay");function Tb(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var r,i,o=t.call(n),a=[];try{for(;(e===void 0||e-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(u){i={error:u}}finally{try{r&&!r.done&&(t=o.return)&&t.call(o)}finally{if(i)throw i.error}}return a}l(Tb,"t");var yi;(function(n){n[n.NotStarted=0]="NotStarted",n[n.Running=1]="Running",n[n.Stopped=2]="Stopped"})(yi||(yi={}));var _w={type:"xstate.init"};function Bf(n){return n===void 0?[]:[].concat(n)}l(Bf,"r");function di(n){return{type:"xstate.assign",assignment:n}}l(di,"o");function Ib(n,e){return typeof(n=typeof n=="string"&&e&&e[n]?e[n]:n)=="string"?{type:n}:typeof n=="function"?{type:n.name,exec:n}:n}l(Ib,"i");function xl(n){return function(e){return n===e}}l(xl,"a");function Dw(n){return typeof n=="string"?{type:n}:n}l(Dw,"u");function Rb(n,e){return{value:n,context:e,actions:[],changed:!1,matches:xl(n)}}l(Rb,"c");function Ab(n,e,t){var r=e,i=!1;return[n.filter(function(o){if(o.type==="xstate.assign"){i=!0;var a=Object.assign({},r);return typeof o.assignment=="function"?a=o.assignment(r,t):Object.keys(o.assignment).forEach(function(u){a[u]=typeof o.assignment[u]=="function"?o.assignment[u](r,t):o.assignment[u]}),r=a,!1}return!0}),r,i]}l(Ab,"f");function kw(n,e){e===void 0&&(e={});var t=Tb(Ab(Bf(n.states[n.initial].entry).map(function(a){return Ib(a,e.actions)}),n.context,_w),2),r=t[0],i=t[1],o={config:n,_options:e,initialState:{value:n.initial,actions:r,context:i,matches:xl(n.initial)},transition:l(function(a,u){var f,h,p=typeof a=="string"?{value:a,context:n.context}:a,g=p.value,y=p.context,w=Dw(u),S=n.states[g];if(S.on){var E=Bf(S.on[w.type]);try{for(var v=function(he){var Ae=typeof Symbol=="function"&&Symbol.iterator,xe=Ae&&he[Ae],Cr=0;if(xe)return xe.call(he);if(he&&typeof he.length=="number")return{next:l(function(){return he&&Cr>=he.length&&(he=void 0),{value:he&&he[Cr++],done:!he}},"next")};throw new TypeError(Ae?"Object is not iterable.":"Symbol.iterator is not defined.")}(E),M=v.next();!M.done;M=v.next()){var A=M.value;if(A===void 0)return Rb(g,y);var T=typeof A=="string"?{target:A}:A,N=T.target,U=T.actions,G=U===void 0?[]:U,Q=T.cond,W=Q===void 0?function(){return!0}:Q,z=N===void 0,re=N??g,B=n.states[re];if(W(y,w)){var q=Tb(Ab((z?Bf(G):[].concat(S.exit,G,B.entry).filter(function(he){return he})).map(function(he){return Ib(he,o._options.actions)}),y,w),3),k=q[0],ee=q[1],X=q[2],Y=N??g;return{value:Y,context:ee,actions:k,changed:N!==g||k.length>0||X,matches:xl(Y)}}}}catch(he){f={error:he}}finally{try{M&&!M.done&&(h=v.return)&&h.call(v)}finally{if(f)throw f.error}}}return Rb(g,y)},"transition")};return o}l(kw,"s");var Ob=l(function(n,e){return n.actions.forEach(function(t){var r=t.exec;return r&&r(n.context,e)})},"l");function Pw(n){var e=n.initialState,t=yi.NotStarted,r=new Set,i={_machine:n,send:l(function(o){t===yi.Running&&(e=n.transition(e,o),Ob(e,Dw(o)),r.forEach(function(a){return a(e)}))},"send"),subscribe:l(function(o){return r.add(o),o(e),{unsubscribe:l(function(){return r.delete(o)},"unsubscribe")}},"subscribe"),start:l(function(o){if(o){var a=typeof o=="object"?o:{context:n.config.context,value:o};e={value:a.value,actions:[],context:a.context,matches:xl(a.value)}}return t=yi.Running,Ob(e,_w),i},"start"),stop:l(function(){return t=yi.Stopped,r.clear(),i},"stop"),get state(){return e},get status(){return t}};return i}l(Pw,"v");function tk(n,e){for(let t=n.length-1;t>=0;t--){let r=n[t];if(r.type===j.Meta&&r.timestamp<=e)return n.slice(t)}return n}l(tk,"discardPriorSnapshots");function rk(n,{getCastFn:e,applyEventsSynchronously:t,emitter:r}){let i=kw({id:"player",context:n,initial:"paused",states:{playing:{on:{PAUSE:{target:"paused",actions:["pause"]},CAST_EVENT:{target:"playing",actions:"castEvent"},END:{target:"paused",actions:["resetLastPlayedEvent","pause"]},ADD_EVENT:{target:"playing",actions:["addEvent"]}}},paused:{on:{PLAY:{target:"playing",actions:["recordTimeOffset","play"]},CAST_EVENT:{target:"paused",actions:"castEvent"},TO_LIVE:{target:"live",actions:["startLive"]},ADD_EVENT:{target:"paused",actions:["addEvent"]}}},live:{on:{ADD_EVENT:{target:"live",actions:["addEvent"]},CAST_EVENT:{target:"live",actions:["castEvent"]}}}}},{actions:{castEvent:di({lastPlayedEvent:l((o,a)=>a.type==="CAST_EVENT"?a.payload.event:o.lastPlayedEvent,"lastPlayedEvent")}),recordTimeOffset:di((o,a)=>{let u=o.timeOffset;return"payload"in a&&"timeOffset"in a.payload&&(u=a.payload.timeOffset),{...o,timeOffset:u,baselineTime:o.events[0].timestamp+u}}),play(o){var a;let{timer:u,events:f,baselineTime:h,lastPlayedEvent:p}=o;u.clear();for(let S of f)Mb(S,h);let g=tk(f,h),y=p?.timestamp;p?.type===j.IncrementalSnapshot&&p.data.source===V.MouseMove&&(y=p.timestamp+((a=p.data.positions[0])==null?void 0:a.timeOffset)),h<(y||0)&&r.emit(ve.PlayBack);let w=new Array;for(let S of g)if(!(y&&y<h&&(S.timestamp<=y||S===p)))if(S.timestamp<h)w.push(S);else{let E=e(S,!1);u.addAction({doAction:l(()=>{E()},"doAction"),delay:S.delay})}t(w),r.emit(ve.Flush),u.start()},pause(o){o.timer.clear()},resetLastPlayedEvent:di(o=>({...o,lastPlayedEvent:null})),startLive:di({baselineTime:l((o,a)=>(o.timer.start(),a.type==="TO_LIVE"&&a.payload.baselineTime?a.payload.baselineTime:Date.now()),"baselineTime")}),addEvent:di((o,a)=>{let{baselineTime:u,timer:f,events:h}=o;if(a.type==="ADD_EVENT"){let{event:p}=a.payload;Mb(p,u);let g=h.length-1;if(!h[g]||h[g].timestamp<=p.timestamp)h.push(p);else{let S=-1,E=0;for(;E<=g;){let v=Math.floor((E+g)/2);h[v].timestamp<=p.timestamp?E=v+1:g=v-1}S===-1&&(S=E),h.splice(S,0,p)}let y=p.timestamp<u,w=e(p,y);y?w():f.isActive()&&f.addAction({doAction:l(()=>{w()},"doAction"),delay:p.delay})}return{...o,events:h}})}});return Pw(i)}l(rk,"createPlayerService");function nk(n){let e=kw({id:"speed",context:n,initial:"normal",states:{normal:{on:{FAST_FORWARD:{target:"skipping",actions:["recordSpeed","setSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}},skipping:{on:{BACK_TO_NORMAL:{target:"normal",actions:["restoreSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}}}},{actions:{setSpeed:l((t,r)=>{"payload"in r&&t.timer.setSpeed(r.payload.speed)},"setSpeed"),recordSpeed:di({normalSpeed:l(t=>t.timer.speed,"normalSpeed")}),restoreSpeed:l(t=>{t.timer.setSpeed(t.normalSpeed)},"restoreSpeed")}});return Pw(e)}l(nk,"createSpeedService");var ik=l(n=>[`.${n} { background: currentColor }`,"noscript { display: none !important; }"],"rules"),Lb=new Map;function Fw(n,e){let t=Lb.get(n);return t||(t=new Map,Lb.set(n,t)),t.has(e)||t.set(e,[]),t.get(e)}l(Fw,"variableListFor");function ln(n,e,t){return async r=>{if(r&&typeof r=="object"&&"rr_type"in r)if(t&&(t.isUnchanged=!1),r.rr_type==="ImageBitmap"&&"args"in r){let i=await ln(n,e,t)(r.args);return await createImageBitmap.apply(null,i)}else if("index"in r){if(t||e===null)return r;let{rr_type:i,index:o}=r;return Fw(e,i)[o]}else if("args"in r){let{rr_type:i,args:o}=r,a=window[i];return new a(...await Promise.all(o.map(ln(n,e,t))))}else{if("base64"in r)return jD(r.base64);if("src"in r){let i=n.get(r.src);if(i)return i;{let o=new Image;return o.src=r.src,n.set(r.src,o),o}}else if("data"in r&&r.rr_type==="Blob"){let i=await Promise.all(r.data.map(ln(n,e,t)));return new Blob(i,{type:r.type})}}else if(Array.isArray(r))return await Promise.all(r.map(ln(n,e,t)));return r}}l(ln,"deserializeArg");function sk(n,e){try{return e===Br.WebGL?n.getContext("webgl")||n.getContext("experimental-webgl"):n.getContext("webgl2")}catch{return null}}l(sk,"getContext");var ok=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject"];function ak(n,e){if(!e?.constructor)return;let{name:t}=e.constructor;if(!ok.includes(t))return;let r=Fw(n,t);r.includes(e)||r.push(e)}l(ak,"saveToWebGLVarMap");async function lk({mutation:n,target:e,type:t,imageMap:r,errorHandler:i}){try{let o=sk(e,t);if(!o)return;if(n.setter){o[n.property]=n.args[0];return}let a=o[n.property],u=await Promise.all(n.args.map(ln(r,o))),f=a.apply(o,u);ak(o,f);let h=!1}catch(o){i(n,o)}}l(lk,"webglMutation");async function ck({event:n,mutations:e,target:t,imageMap:r,errorHandler:i}){let o=t.getContext("2d");if(!o){i(e[0],new Error("Canvas context is null"));return}let a=e.map(async f=>Promise.all(f.args.map(ln(r,o))));(await Promise.all(a)).forEach((f,h)=>{let p=e[h];try{if(p.setter){o[p.property]=p.args[0];return}let g=o[p.property];p.property==="drawImage"&&typeof p.args[0]=="string"?(r.get(n),g.apply(o,p.args)):g.apply(o,f)}catch(g){i(p,g)}})}l(ck,"canvasMutation$1");async function Nb({event:n,mutation:e,target:t,imageMap:r,canvasEventMap:i,errorHandler:o}){try{let a=i.get(n)||e,u="commands"in a?a.commands:[a];if([Br.WebGL,Br.WebGL2].includes(e.type)){for(let f=0;f<u.length;f++){let h=u[f];await lk({mutation:h,type:e.type,target:t,imageMap:r,errorHandler:o})}return}await ck({event:n,mutations:u,target:t,imageMap:r,errorHandler:o})}catch(a){o(e,a)}}l(Nb,"canvasMutation");var Wh=class{static{l(this,"MediaManager")}constructor(e){P(this,"mediaMap",new Map),P(this,"warn"),P(this,"service"),P(this,"speedService"),P(this,"emitter"),P(this,"getCurrentTime"),P(this,"metadataCallbackMap",new Map),this.warn=e.warn,this.service=e.service,this.speedService=e.speedService,this.emitter=e.emitter,this.getCurrentTime=e.getCurrentTime,this.emitter.on(ve.Start,this.start.bind(this)),this.emitter.on(ve.SkipStart,this.start.bind(this)),this.emitter.on(ve.Pause,this.pause.bind(this)),this.emitter.on(ve.Finish,this.pause.bind(this)),this.speedService.subscribe(()=>{this.syncAllMediaElements()})}syncAllMediaElements(e={pause:!1}){this.mediaMap.forEach((t,r)=>{this.syncTargetWithState(r),e.pause&&r.pause()})}start(){this.syncAllMediaElements()}pause(){this.syncAllMediaElements({pause:!0})}seekTo({time:e,target:t,mediaState:r}){if(r.isPlaying){let o=(e-r.lastInteractionTimeOffset)/1e3*r.playbackRate,a="duration"in t&&t.duration;if(Number.isNaN(a)){this.waitForMetadata(t);return}let u=r.currentTimeAtLastInteraction+o;t.loop&&a!==!1&&(u=u%a),t.currentTime=u}else t.pause(),t.currentTime=r.currentTimeAtLastInteraction}waitForMetadata(e){if(this.metadataCallbackMap.has(e)||!("addEventListener"in e))return;let t=l(()=>{this.metadataCallbackMap.delete(e);let r=this.mediaMap.get(e);r&&this.seekTo({time:this.getCurrentTime(),target:e,mediaState:r})},"onLoadedMetadata");this.metadataCallbackMap.set(e,t),e.addEventListener("loadedmetadata",t,{once:!0})}getMediaStateFromMutation({target:e,timeOffset:t,mutation:r}){let i=this.mediaMap.get(e),{type:o,playbackRate:a,currentTime:u,muted:f,volume:h,loop:p}=r;return{isPlaying:o===an.Play||o!==an.Pause&&(i?.isPlaying||e.getAttribute("autoplay")!==null),currentTimeAtLastInteraction:u??i?.currentTimeAtLastInteraction??0,lastInteractionTimeOffset:t,playbackRate:a??i?.playbackRate??1,volume:h??i?.volume??1,muted:f??i?.muted??e.getAttribute("muted")===null,loop:p??i?.loop??e.getAttribute("loop")===null}}syncTargetWithState(e){let t=this.mediaMap.get(e);if(!t)return;let{muted:r,loop:i,volume:o,isPlaying:a}=t,u=this.service.state.matches("paused"),f=t.playbackRate*this.speedService.state.context.timer.speed;try{this.seekTo({time:this.getCurrentTime(),target:e,mediaState:t}),e.volume!==o&&(e.volume=o),e.muted=r,e.loop=i,e.playbackRate!==f&&(e.playbackRate=f),a&&!u?e.play():e.pause()}catch(h){this.warn(`Failed to replay media interactions: ${h.message||h}`)}}addMediaElements(e,t,r){if(!["AUDIO","VIDEO"].includes(e.nodeName))return;let i=e,o=r.getMeta(i);if(!o||!("attributes"in o))return;let a=this.service.state.matches("paused"),u=o.attributes,f=!1;u.rr_mediaState?f=u.rr_mediaState==="played":f=i.getAttribute("autoplay")!==null,f&&a&&i.pause();let h=1;typeof u.rr_mediaPlaybackRate=="number"&&(h=u.rr_mediaPlaybackRate);let p=!1;typeof u.rr_mediaMuted=="boolean"?p=u.rr_mediaMuted:p=i.getAttribute("muted")!==null;let g=!1;typeof u.rr_mediaLoop=="boolean"?g=u.rr_mediaLoop:g=i.getAttribute("loop")!==null;let y=1;typeof u.rr_mediaVolume=="number"&&(y=u.rr_mediaVolume);let w=0;typeof u.rr_mediaCurrentTime=="number"&&(w=u.rr_mediaCurrentTime),this.mediaMap.set(i,{isPlaying:f,currentTimeAtLastInteraction:w,lastInteractionTimeOffset:t,playbackRate:h,volume:y,muted:p,loop:g}),this.syncTargetWithState(i)}mediaMutation({target:e,timeOffset:t,mutation:r}){this.mediaMap.set(e,this.getMediaStateFromMutation({target:e,timeOffset:t,mutation:r})),this.syncTargetWithState(e)}isSupportedMediaElement(e){return["AUDIO","VIDEO"].includes(e.nodeName)}reset(){this.mediaMap.clear()}};function Ya(n,e){if(n.nodeName!=="DIALOG"||n instanceof ir)return;let t=n,r=t.open,i=r&&t.matches("dialog:modal"),o=t.getAttribute("rr_open_mode"),a=typeof e?.attributes.open=="string"||typeof t.getAttribute("open")=="string",u=o==="modal";if(!(r&&!(i&&o==="non-modal"||!i&&u))){if(!t.isConnected){console.warn("dialog is not attached to the dom",t);return}r&&t.close(),a&&(u?t.showModal():t.show())}}l(Ya,"applyDialogToTopLevel");function uk(n,e){if(n.nodeName!=="DIALOG"||n instanceof ir)return;let t=n;if(!t.isConnected){console.warn("dialog is not attached to the dom",t);return}e.attributes.open===null&&(t.removeAttribute("open"),t.removeAttribute("rr_open_mode"))}l(uk,"removeDialogFromTopLevel");var fk=5*1e3,hk=Nw||QD,_b="[replayer]",Wf={duration:500,lineCap:"round",lineWidth:3,strokeStyle:"red"};function Db(n){return n.type==j.IncrementalSnapshot&&(n.data.source==V.TouchMove||n.data.source==V.MouseInteraction&&n.data.type==ne.TouchStart)}l(Db,"indicatesTouchDevice");var Ml=class{static{l(this,"Replayer")}constructor(e,t){if(P(this,"wrapper"),P(this,"iframe"),P(this,"service"),P(this,"speedService"),P(this,"config"),P(this,"usingVirtualDom",!1),P(this,"virtualDom",new Mi),P(this,"mouse"),P(this,"mouseTail",null),P(this,"tailPositions",[]),P(this,"emitter",hk()),P(this,"nextUserInteractionEvent"),P(this,"legacy_missingNodeRetryMap",{}),P(this,"cache",qy()),P(this,"imageMap",new Map),P(this,"canvasEventMap",new Map),P(this,"mirror",Fb()),P(this,"styleMirror",new wl),P(this,"mediaManager"),P(this,"firstFullSnapshot",null),P(this,"newDocumentQueue",[]),P(this,"mousePos",null),P(this,"touchActive",null),P(this,"lastMouseDownEvent",null),P(this,"lastHoveredRootNode"),P(this,"lastSelectionData",null),P(this,"constructedStyleMutations",[]),P(this,"adoptedStyleSheets",[]),P(this,"handleResize",u=>{this.iframe.style.display="inherit";for(let f of[this.mouseTail,this.iframe])f&&(f.setAttribute("width",String(u.width)),f.setAttribute("height",String(u.height)))}),P(this,"applyEventsSynchronously",u=>{for(let f of u){switch(f.type){case j.DomContentLoaded:case j.Load:case j.Custom:continue;case j.FullSnapshot:case j.Meta:case j.Plugin:case j.IncrementalSnapshot:break}this.getCastFn(f,!0)()}}),P(this,"getCastFn",(u,f=!1)=>{let h;switch(u.type){case j.DomContentLoaded:case j.Load:break;case j.Custom:h=l(()=>{this.emitter.emit(ve.CustomEvent,u)},"castFn");break;case j.Meta:h=l(()=>this.emitter.emit(ve.Resize,{width:u.data.width,height:u.data.height}),"castFn");break;case j.FullSnapshot:h=l(()=>{var g;if(this.firstFullSnapshot){if(this.firstFullSnapshot===u){this.firstFullSnapshot=!0;return}}else this.firstFullSnapshot=!0;this.mediaManager.reset(),this.styleMirror.reset(),this.rebuildFullSnapshot(u,f),(g=this.iframe.contentWindow)==null||g.scrollTo(u.data.initialOffset)},"castFn");break;case j.IncrementalSnapshot:h=l(()=>{if(this.applyIncremental(u,f),!f&&(u===this.nextUserInteractionEvent&&(this.nextUserInteractionEvent=null,this.backToNormal()),this.config.skipInactive&&!this.nextUserInteractionEvent)){for(let g of this.service.state.context.events)if(!(g.timestamp<=u.timestamp)&&this.isUserInteraction(g)){g.delay-u.delay>this.config.inactivePeriodThreshold*this.speedService.state.context.timer.speed&&(this.nextUserInteractionEvent=g);break}if(this.nextUserInteractionEvent){let g=this.nextUserInteractionEvent.delay-u.delay,y={speed:Math.min(Math.round(g/fk),this.config.maxSpeed)};this.speedService.send({type:"FAST_FORWARD",payload:y}),this.emitter.emit(ve.SkipStart,y)}}},"castFn");break}return l(()=>{h&&h();for(let y of this.config.plugins||[])y.handler&&y.handler(u,f,{replayer:this});this.service.send({type:"CAST_EVENT",payload:{event:u}});let g=this.service.state.context.events.length-1;if(!this.config.liveMode&&u===this.service.state.context.events[g]){let y=l(()=>{g<this.service.state.context.events.length-1||(this.backToNormal(),this.service.send("END"),this.emitter.emit(ve.Finish))},"finish"),w=50;u.type===j.IncrementalSnapshot&&u.data.source===V.MouseMove&&u.data.positions.length&&(w+=Math.max(0,-u.data.positions[0].timeOffset)),setTimeout(y,w)}this.emitter.emit(ve.EventCast,u)},"wrappedCastFn")}),!t?.liveMode&&e.length<2)throw new Error("Replayer need at least 2 events.");let r={speed:1,maxSpeed:360,root:document.body,loadTimeout:0,skipInactive:!1,inactivePeriodThreshold:10*1e3,showWarning:!0,showDebug:!1,blockClass:"rr-block",liveMode:!1,insertStyleRules:[],triggerFocus:!0,UNSAFE_replayCanvas:!1,pauseAnimation:!0,mouseTail:Wf,useVirtualDom:!0,logger:console};this.config=Object.assign({},r,t),this.handleResize=this.handleResize.bind(this),this.getCastFn=this.getCastFn.bind(this),this.applyEventsSynchronously=this.applyEventsSynchronously.bind(this),this.emitter.on(ve.Resize,this.handleResize),this.setupDom();for(let u of this.config.plugins||[])u.getMirror&&u.getMirror({nodeMirror:this.mirror});this.emitter.on(ve.Flush,()=>{if(this.usingVirtualDom){let u={mirror:this.mirror,applyCanvas:l((f,h,p)=>{Nb({event:f,mutation:h,target:p,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})},"applyCanvas"),applyInput:this.applyInput.bind(this),applyScroll:this.applyScroll.bind(this),applyStyleSheetMutation:l((f,h)=>{f.source===V.StyleSheetRule?this.applyStyleSheetRule(f,h):f.source===V.StyleDeclaration&&this.applyStyleDeclaration(f,h)},"applyStyleSheetMutation"),afterAppend:l((f,h)=>{for(let p of this.config.plugins||[])p.onBuild&&p.onBuild(f,{id:h,replayer:this})},"afterAppend")};if(this.iframe.contentDocument)try{yl(this.iframe.contentDocument,this.virtualDom,u,this.virtualDom.mirror)}catch(f){console.warn(f)}if(this.virtualDom.destroyTree(),this.usingVirtualDom=!1,Object.keys(this.legacy_missingNodeRetryMap).length)for(let f in this.legacy_missingNodeRetryMap)try{let h=this.legacy_missingNodeRetryMap[f],p=bl(h.node,this.mirror,this.virtualDom.mirror);yl(p,h.node,u,this.virtualDom.mirror),h.node=p}catch(h){this.warn(h)}this.constructedStyleMutations.forEach(f=>{this.applyStyleSheetMutation(f)}),this.constructedStyleMutations=[],this.adoptedStyleSheets.forEach(f=>{this.applyAdoptedStyleSheet(f)}),this.adoptedStyleSheets=[]}if(this.mousePos&&(this.moveAndHover(this.mousePos.x,this.mousePos.y,this.mousePos.id,!0,this.mousePos.debugData),this.mousePos=null),this.touchActive===!0?this.mouse.classList.add("touch-active"):this.touchActive===!1&&this.mouse.classList.remove("touch-active"),this.touchActive=null,this.lastMouseDownEvent){let[u,f]=this.lastMouseDownEvent;u.dispatchEvent(f)}this.lastMouseDownEvent=null,this.lastSelectionData&&(this.applySelection(this.lastSelectionData),this.lastSelectionData=null)}),this.emitter.on(ve.PlayBack,()=>{this.firstFullSnapshot=null,this.mirror.reset(),this.styleMirror.reset(),this.mediaManager.reset()});let i=new Bh([],{speed:this.config.speed});this.service=rk({events:e.map(u=>t&&t.unpackFn?t.unpackFn(u):u).sort((u,f)=>u.timestamp-f.timestamp),timer:i,timeOffset:0,baselineTime:0,lastPlayedEvent:null},{getCastFn:this.getCastFn,applyEventsSynchronously:this.applyEventsSynchronously,emitter:this.emitter}),this.service.start(),this.service.subscribe(u=>{this.emitter.emit(ve.StateChange,{player:u})}),this.speedService=nk({normalSpeed:-1,timer:i}),this.speedService.start(),this.speedService.subscribe(u=>{this.emitter.emit(ve.StateChange,{speed:u})}),this.mediaManager=new Wh({warn:this.warn.bind(this),service:this.service,speedService:this.speedService,emitter:this.emitter,getCurrentTime:this.getCurrentTime.bind(this)});let o=this.service.state.context.events.find(u=>u.type===j.Meta),a=this.service.state.context.events.find(u=>u.type===j.FullSnapshot);if(o){let{width:u,height:f}=o.data;setTimeout(()=>{this.emitter.emit(ve.Resize,{width:u,height:f})},0)}a&&setTimeout(()=>{var u;this.firstFullSnapshot||(this.firstFullSnapshot=a,this.rebuildFullSnapshot(a),(u=this.iframe.contentWindow)==null||u.scrollTo(a.data.initialOffset))},1),this.service.state.context.events.find(Db)&&this.mouse.classList.add("touch-device")}get timer(){return this.service.state.context.timer}on(e,t){return this.emitter.on(e,t),this}off(e,t){return this.emitter.off(e,t),this}setConfig(e){Object.keys(e).forEach(t=>{e[t],this.config[t]=e[t]}),this.config.skipInactive||this.backToNormal(),typeof e.speed<"u"&&this.speedService.send({type:"SET_SPEED",payload:{speed:e.speed}}),typeof e.mouseTail<"u"&&(e.mouseTail===!1?this.mouseTail&&(this.mouseTail.style.display="none"):(this.mouseTail||(this.mouseTail=document.createElement("canvas"),this.mouseTail.width=Number.parseFloat(this.iframe.width),this.mouseTail.height=Number.parseFloat(this.iframe.height),this.mouseTail.classList.add("replayer-mouse-tail"),this.wrapper.insertBefore(this.mouseTail,this.iframe)),this.mouseTail.style.display="inherit"))}getMetaData(){let e=this.service.state.context.events[0],t=this.service.state.context.events[this.service.state.context.events.length-1];return{startTime:e.timestamp,endTime:t.timestamp,totalTime:t.timestamp-e.timestamp}}getCurrentTime(){return this.timer.timeOffset+this.getTimeOffset()}getTimeOffset(){let{baselineTime:e,events:t}=this.service.state.context;return e-t[0].timestamp}getMirror(){return this.mirror}play(e=0){var t,r;this.service.state.matches("paused")?this.service.send({type:"PLAY",payload:{timeOffset:e}}):(this.service.send({type:"PAUSE"}),this.service.send({type:"PLAY",payload:{timeOffset:e}})),(r=(t=this.iframe.contentDocument)==null?void 0:t.getElementsByTagName("html")[0])==null||r.classList.remove("rrweb-paused"),this.emitter.emit(ve.Start)}pause(e){var t,r;e===void 0&&this.service.state.matches("playing")&&this.service.send({type:"PAUSE"}),typeof e=="number"&&(this.play(e),this.service.send({type:"PAUSE"})),(r=(t=this.iframe.contentDocument)==null?void 0:t.getElementsByTagName("html")[0])==null||r.classList.add("rrweb-paused"),this.emitter.emit(ve.Pause)}resume(e=0){this.warn("The 'resume' was deprecated in 1.0. Please use 'play' method which has the same interface."),this.play(e),this.emitter.emit(ve.Resume)}destroy(){this.pause(),this.mirror.reset(),this.styleMirror.reset(),this.mediaManager.reset(),this.config.root.removeChild(this.wrapper),this.emitter.emit(ve.Destroy)}startLive(e){this.service.send({type:"TO_LIVE",payload:{baselineTime:e}})}addEvent(e){let t=this.config.unpackFn?this.config.unpackFn(e):e;Db(t)&&this.mouse.classList.add("touch-device"),Promise.resolve().then(()=>this.service.send({type:"ADD_EVENT",payload:{event:t}}))}enableInteract(){this.iframe.setAttribute("scrolling","auto"),this.iframe.style.pointerEvents="auto"}disableInteract(){this.iframe.setAttribute("scrolling","no"),this.iframe.style.pointerEvents="none"}resetCache(){this.cache=qy()}setupDom(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("replayer-wrapper"),this.config.root.appendChild(this.wrapper),this.mouse=document.createElement("div"),this.mouse.classList.add("replayer-mouse"),this.wrapper.appendChild(this.mouse),this.config.mouseTail!==!1&&(this.mouseTail=document.createElement("canvas"),this.mouseTail.classList.add("replayer-mouse-tail"),this.mouseTail.style.display="inherit",this.wrapper.appendChild(this.mouseTail)),this.iframe=document.createElement("iframe");let e=["allow-same-origin"];this.config.UNSAFE_replayCanvas&&e.push("allow-scripts"),this.iframe.style.display="none",this.iframe.setAttribute("sandbox",e.join(" ")),this.disableInteract(),this.wrapper.appendChild(this.iframe),this.iframe.contentWindow&&this.iframe.contentDocument&&(ek(this.iframe.contentWindow,this.iframe.contentDocument),bw(this.iframe.contentWindow))}rebuildFullSnapshot(e,t=!1){if(!this.iframe.contentDocument)return this.warn("Looks like your replayer has been destroyed.");Object.keys(this.legacy_missingNodeRetryMap).length&&this.warn("Found unresolved missing node map",this.legacy_missingNodeRetryMap),this.legacy_missingNodeRetryMap={};let r=[],i=new Set,o=l((f,h)=>{if(f.nodeName==="DIALOG"&&i.add(f),this.collectIframeAndAttachDocument(r,f),this.mediaManager.isSupportedMediaElement(f)){let{events:p}=this.service.state.context;this.mediaManager.addMediaElements(f,e.timestamp-p[0].timestamp,this.mirror)}for(let p of this.config.plugins||[])p.onBuild&&p.onBuild(f,{id:h,replayer:this})},"afterAppend");this.usingVirtualDom&&(this.virtualDom.destroyTree(),this.usingVirtualDom=!1),this.mirror.reset(),QL(e.data.node,{doc:this.iframe.contentDocument,afterAppend:o,cache:this.cache,mirror:this.mirror}),o(this.iframe.contentDocument,e.data.node.id);for(let{mutationInQueue:f,builtNode:h}of r)this.attachDocumentToIframe(f,h),this.newDocumentQueue=this.newDocumentQueue.filter(p=>p!==f);let{documentElement:a,head:u}=this.iframe.contentDocument;this.insertStyleRules(a,u),i.forEach(f=>Ya(f)),this.service.state.matches("playing")||this.iframe.contentDocument.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(ve.FullsnapshotRebuilded,e),t||this.waitForStylesheetLoad(),this.config.UNSAFE_replayCanvas&&this.preloadAllImages()}insertStyleRules(e,t){var r;let i=ik(this.config.blockClass).concat(this.config.insertStyleRules);if(this.config.pauseAnimation&&i.push("html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }"),!!i.length)if(this.usingVirtualDom){let o=this.virtualDom.createElement("style");this.virtualDom.mirror.add(o,uw(o,this.virtualDom.unserializedId)),e.insertBefore(o,t),o.rules.push({source:V.StyleSheetRule,adds:i.map((a,u)=>({rule:a,index:u}))})}else{let o=document.createElement("style");e.insertBefore(o,t);for(let a=0;a<i.length;a++)(r=o.sheet)==null||r.insertRule(i[a],a)}}attachDocumentToIframe(e,t){let r=this.usingVirtualDom?this.virtualDom.mirror:this.mirror,i=[],o=new Set,a=l((u,f)=>{u.nodeName==="DIALOG"&&o.add(u),this.collectIframeAndAttachDocument(i,u);let h=r.getMeta(u);if(h?.type===Fr.Element&&h?.tagName.toUpperCase()==="HTML"){let{documentElement:p,head:g}=t.contentDocument;this.insertStyleRules(p,g)}if(!this.usingVirtualDom)for(let p of this.config.plugins||[])p.onBuild&&p.onBuild(u,{id:f,replayer:this})},"afterAppend");Ls(e.node,{doc:t.contentDocument,mirror:r,hackCss:!0,skipChild:!1,afterAppend:a,cache:this.cache}),a(t.contentDocument,e.node.id);for(let{mutationInQueue:u,builtNode:f}of i)this.attachDocumentToIframe(u,f),this.newDocumentQueue=this.newDocumentQueue.filter(h=>h!==u);o.forEach(u=>Ya(u))}collectIframeAndAttachDocument(e,t){if(Ns(t,this.mirror)){let r=this.newDocumentQueue.find(i=>i.parentId===this.mirror.getId(t));r&&e.push({mutationInQueue:r,builtNode:t})}}waitForStylesheetLoad(){var e;let t=(e=this.iframe.contentDocument)==null?void 0:e.head;if(t){let r=new Set,i,o=this.service.state,a=l(()=>{o=this.service.state},"stateHandler");this.emitter.on(ve.Start,a),this.emitter.on(ve.Pause,a);let u=l(()=>{this.emitter.off(ve.Start,a),this.emitter.off(ve.Pause,a)},"unsubscribe");t.querySelectorAll('link[rel="stylesheet"]').forEach(f=>{f.sheet||(r.add(f),f.addEventListener("load",()=>{r.delete(f),r.size===0&&i!==-1&&(o.matches("playing")&&this.play(this.getCurrentTime()),this.emitter.emit(ve.LoadStylesheetEnd),i&&clearTimeout(i),u())}))}),r.size>0&&(this.service.send({type:"PAUSE"}),this.emitter.emit(ve.LoadStylesheetStart),i=setTimeout(()=>{o.matches("playing")&&this.play(this.getCurrentTime()),i=-1,u()},this.config.loadTimeout))}}async preloadAllImages(){let e=[];for(let t of this.service.state.context.events)t.type===j.IncrementalSnapshot&&t.data.source===V.CanvasMutation&&(e.push(this.deserializeAndPreloadCanvasEvents(t.data,t)),("commands"in t.data?t.data.commands:[t.data]).forEach(i=>{this.preloadImages(i,t)}));return Promise.all(e)}preloadImages(e,t){if(e.property==="drawImage"&&typeof e.args[0]=="string"&&!this.imageMap.has(t)){let r=document.createElement("canvas"),i=r.getContext("2d"),o=i?.createImageData(r.width,r.height);i?.putImageData(o,0,0)}}async deserializeAndPreloadCanvasEvents(e,t){if(!this.canvasEventMap.has(t)){let r={isUnchanged:!0};if("commands"in e){let i=await Promise.all(e.commands.map(async o=>{let a=await Promise.all(o.args.map(ln(this.imageMap,null,r)));return{...o,args:a}}));r.isUnchanged===!1&&this.canvasEventMap.set(t,{...e,commands:i})}else{let i=await Promise.all(e.args.map(ln(this.imageMap,null,r)));r.isUnchanged===!1&&this.canvasEventMap.set(t,{...e,args:i})}}}applyIncremental(e,t){var r,i,o;let{data:a}=e;switch(a.source){case V.Mutation:{try{this.applyMutation(a,t)}catch(u){this.warn(`Exception in mutation ${u.message||u}`,a)}break}case V.Drag:case V.TouchMove:case V.MouseMove:if(t){let u=a.positions[a.positions.length-1];this.mousePos={x:u.x,y:u.y,id:u.id,debugData:a}}else a.positions.forEach(u=>{let f={doAction:l(()=>{this.moveAndHover(u.x,u.y,u.id,t,a)},"doAction"),delay:u.timeOffset+e.timestamp-this.service.state.context.baselineTime};this.timer.addAction(f)}),this.timer.addAction({doAction(){},delay:e.delay-((r=a.positions[0])==null?void 0:r.timeOffset)});break;case V.MouseInteraction:{if(a.id===-1)break;let u=new Event(cn(ne[a.type])),f=this.mirror.getNode(a.id);if(!f)return this.debugNodeNotFound(a,a.id);this.emitter.emit(ve.MouseInteraction,{type:a.type,target:f});let{triggerFocus:h}=this.config;switch(a.type){case ne.Blur:"blur"in f&&f.blur();break;case ne.Focus:h&&f.focus&&f.focus({preventScroll:!0});break;case ne.Click:case ne.TouchStart:case ne.TouchEnd:case ne.MouseDown:case ne.MouseUp:t?(a.type===ne.TouchStart?this.touchActive=!0:a.type===ne.TouchEnd&&(this.touchActive=!1),a.type===ne.MouseDown?this.lastMouseDownEvent=[f,u]:a.type===ne.MouseUp&&(this.lastMouseDownEvent=null),this.mousePos={x:a.x||0,y:a.y||0,id:a.id,debugData:a}):(a.type===ne.TouchStart&&(this.tailPositions.length=0),this.moveAndHover(a.x||0,a.y||0,a.id,t,a),a.type===ne.Click?(this.mouse.classList.remove("active"),this.mouse.offsetWidth,this.mouse.classList.add("active")):a.type===ne.TouchStart?(this.mouse.offsetWidth,this.mouse.classList.add("touch-active")):a.type===ne.TouchEnd?this.mouse.classList.remove("touch-active"):f.dispatchEvent(u));break;case ne.TouchCancel:t?this.touchActive=!1:this.mouse.classList.remove("touch-active");break;default:f.dispatchEvent(u)}break}case V.Scroll:{if(a.id===-1)break;if(this.usingVirtualDom){let u=this.virtualDom.mirror.getNode(a.id);if(!u)return this.debugNodeNotFound(a,a.id);u.scrollData=a;break}this.applyScroll(a,t);break}case V.ViewportResize:this.emitter.emit(ve.Resize,{width:a.width,height:a.height});break;case V.Input:{if(a.id===-1)break;if(this.usingVirtualDom){let u=this.virtualDom.mirror.getNode(a.id);if(!u)return this.debugNodeNotFound(a,a.id);u.inputData=a;break}this.applyInput(a);break}case V.MediaInteraction:{let u=this.usingVirtualDom?this.virtualDom.mirror.getNode(a.id):this.mirror.getNode(a.id);if(!u)return this.debugNodeNotFound(a,a.id);let f=u,{events:h}=this.service.state.context;this.mediaManager.mediaMutation({target:f,timeOffset:e.timestamp-h[0].timestamp,mutation:a});break}case V.StyleSheetRule:case V.StyleDeclaration:{this.usingVirtualDom?a.styleId?this.constructedStyleMutations.push(a):a.id&&((i=this.virtualDom.mirror.getNode(a.id))==null||i.rules.push(a)):this.applyStyleSheetMutation(a);break}case V.CanvasMutation:{if(!this.config.UNSAFE_replayCanvas)return;if(this.usingVirtualDom){let u=this.virtualDom.mirror.getNode(a.id);if(!u)return this.debugNodeNotFound(a,a.id);u.canvasMutations.push({event:e,mutation:a})}else{let u=this.mirror.getNode(a.id);if(!u)return this.debugNodeNotFound(a,a.id);Nb({event:e,mutation:a,target:u,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})}break}case V.Font:{try{let u=new FontFace(a.family,a.buffer?new Uint8Array(JSON.parse(a.fontSource)):a.fontSource,a.descriptors);(o=this.iframe.contentDocument)==null||o.fonts.add(u)}catch(u){this.warn(u)}break}case V.Selection:{if(t){this.lastSelectionData=a;break}this.applySelection(a);break}case V.AdoptedStyleSheet:{this.usingVirtualDom?this.adoptedStyleSheets.push(a):this.applyAdoptedStyleSheet(a);break}}}applyMutation(e,t){if(this.config.useVirtualDom&&!this.usingVirtualDom&&t&&(this.usingVirtualDom=!0,cD(this.iframe.contentDocument,this.mirror,this.virtualDom),Object.keys(this.legacy_missingNodeRetryMap).length))for(let h in this.legacy_missingNodeRetryMap)try{let p=this.legacy_missingNodeRetryMap[h],g=cw(p.node,this.virtualDom,this.mirror);g&&(p.node=g)}catch(p){this.warn(p)}let r=this.usingVirtualDom?this.virtualDom.mirror:this.mirror;e.removes=e.removes.filter(h=>r.getNode(h.id)?!0:(this.warnNodeNotFound(e,h.id),!1)),e.removes.forEach(h=>{var p;let g=r.getNode(h.id);if(!g)return;let y=r.getNode(h.parentId);if(!y)return this.warnNodeNotFound(e,h.parentId);if(h.isShadow&&Nn(y)&&(y=y.shadowRoot),r.removeNodeFromMap(g),y)try{y.removeChild(g),this.usingVirtualDom&&g.nodeName==="#text"&&y.nodeName==="STYLE"&&((p=y.rules)==null?void 0:p.length)>0&&(y.rules=[])}catch(w){if(w instanceof DOMException)this.warn("parent could not remove child in mutation",y,g,e);else throw w}});let i={...this.legacy_missingNodeRetryMap},o=[],a=l(h=>{let p=null;return h.nextId&&(p=r.getNode(h.nextId)),h.nextId!==null&&h.nextId!==void 0&&h.nextId!==-1&&!p},"nextNotInDOM"),u=l(h=>{var p,g;if(!this.iframe.contentDocument)return this.warn("Looks like your replayer has been destroyed.");let y=r.getNode(h.parentId);if(!y)return h.node.type===Fr.Document?this.newDocumentQueue.push(h):o.push(h);h.node.isShadow&&(Nn(y)||y.attachShadow({mode:"open"}),y=y.shadowRoot);let w=null,S=null;if(h.previousId&&(w=r.getNode(h.previousId)),h.nextId&&(S=r.getNode(h.nextId)),a(h))return o.push(h);if(h.node.rootId&&!r.getNode(h.node.rootId))return;let E=h.node.rootId?r.getNode(h.node.rootId):this.usingVirtualDom?this.virtualDom:this.iframe.contentDocument;if(Ns(y,r)){this.attachDocumentToIframe(h,y);return}let v=l((T,N)=>{if(!this.usingVirtualDom){Ya(T);for(let U of this.config.plugins||[])U.onBuild&&U.onBuild(T,{id:N,replayer:this})}},"afterAppend"),M=Ls(h.node,{doc:E,mirror:r,skipChild:!0,hackCss:!0,cache:this.cache,afterAppend:v});if(h.previousId===-1||h.nextId===-1){i[h.node.id]={node:M,mutation:h};return}let A=r.getMeta(y);if(A&&A.type===Fr.Element&&h.node.type===Fr.Text){let T=Array.isArray(y.childNodes)?y.childNodes:Array.from(y.childNodes);if(A.tagName==="textarea")for(let N of T)N.nodeType===y.TEXT_NODE&&y.removeChild(N);else if(A.tagName==="style"&&T.length===1)for(let N of T)N.nodeType===y.TEXT_NODE&&!r.hasNode(N)&&(M.textContent=N.textContent,y.removeChild(N))}else if(A?.type===Fr.Document){let T=y;h.node.type===Fr.DocumentType&&((p=T.childNodes[0])==null?void 0:p.nodeType)===Node.DOCUMENT_TYPE_NODE&&T.removeChild(T.childNodes[0]),M.nodeName==="HTML"&&T.documentElement&&T.removeChild(T.documentElement)}if(w&&w.nextSibling&&w.nextSibling.parentNode?y.insertBefore(M,w.nextSibling):S&&S.parentNode?y.contains(S)?y.insertBefore(M,S):y.insertBefore(M,null):y.appendChild(M),v(M,h.node.id),this.usingVirtualDom&&M.nodeName==="#text"&&y.nodeName==="STYLE"&&((g=y.rules)==null?void 0:g.length)>0&&(y.rules=[]),Ns(M,this.mirror)){let T=this.mirror.getId(M),N=this.newDocumentQueue.find(U=>U.parentId===T);N&&(this.attachDocumentToIframe(N,M),this.newDocumentQueue=this.newDocumentQueue.filter(U=>U!==N))}(h.previousId||h.nextId)&&this.legacy_resolveMissingNode(i,y,M,h)},"appendNode");e.adds.forEach(h=>{u(h)});let f=Date.now();for(;o.length;){let h=xD(o);if(o.length=0,Date.now()-f>500){this.warn("Timeout in the loop, please check the resolve tree data:",h);break}for(let p of h)r.getNode(p.value.parentId)?vw(p,y=>{u(y)}):this.debug("Drop resolve tree since there is no parent for the root node.",p)}Object.keys(i).length&&Object.assign(this.legacy_missingNodeRetryMap,i),MD(e.texts).forEach(h=>{var p;let g=r.getNode(h.id);if(!g)return e.removes.find(w=>w.id===h.id)?void 0:this.warnNodeNotFound(e,h.id);let y=g.parentElement;if(h.value&&y&&y.tagName==="STYLE"?g.textContent=Ll(h.value,this.cache):g.textContent=h.value,this.usingVirtualDom){let w=g.parentNode;((p=w?.rules)==null?void 0:p.length)>0&&(w.rules=[])}}),e.attributes.forEach(h=>{var p;let g=r.getNode(h.id);if(!g)return e.removes.find(y=>y.id===h.id)?void 0:this.warnNodeNotFound(e,h.id);for(let y in h.attributes)if(typeof y=="string"){let w=h.attributes[y];if(w===null)g.removeAttribute(y),y==="open"&&uk(g,h);else if(typeof w=="string")try{if(y==="_cssText"&&(g.nodeName==="LINK"||g.nodeName==="STYLE"))try{let S=r.getMeta(g),E=Ls({...S,attributes:{...S.attributes,...h.attributes}},{doc:g.ownerDocument,mirror:r,skipChild:!0,hackCss:!0,cache:this.cache});Object.assign(S.attributes,h.attributes);let v=g.nextSibling,M=g.parentNode;if(E&&M){M.removeChild(g),M.insertBefore(E,v),r.replace(h.id,E);break}}catch{}if(y==="value"&&g.nodeName==="TEXTAREA"){let S=g;S.childNodes.forEach(v=>S.removeChild(v));let E=(p=g.ownerDocument)==null?void 0:p.createTextNode(w);E&&S.appendChild(E)}else g.setAttribute(y,w);y==="rr_open_mode"&&g.nodeName==="DIALOG"&&Ya(g,h)}catch(S){this.warn("An error occurred may due to the checkout feature.",S)}else if(y==="style"){let S=w,E=g;for(let v in S)if(S[v]===!1)E.style.removeProperty(v);else if(S[v]instanceof Array){let M=S[v];E.style.setProperty(v,M[0],M[1])}else{let M=S[v];E.style.setProperty(v,M)}}}})}applyScroll(e,t){var r,i;let o=this.mirror.getNode(e.id);if(!o)return this.debugNodeNotFound(e,e.id);let a=this.mirror.getMeta(o);if(o===this.iframe.contentDocument)(r=this.iframe.contentWindow)==null||r.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"});else if(a?.type===Fr.Document)(i=o.defaultView)==null||i.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"});else try{o.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"})}catch{}}applyInput(e){let t=this.mirror.getNode(e.id);if(!t)return this.debugNodeNotFound(e,e.id);try{t.checked=e.isChecked,t.value=e.text}catch{}}applySelection(e){try{let t=new Set,r=e.ranges.map(({start:i,startOffset:o,end:a,endOffset:u})=>{let f=this.mirror.getNode(i),h=this.mirror.getNode(a);if(!f||!h)return;let p=new Range;p.setStart(f,o),p.setEnd(h,u);let g=f.ownerDocument,y=g?.getSelection();return y&&t.add(y),{range:p,selection:y}});t.forEach(i=>i.removeAllRanges()),r.forEach(i=>{var o;return i&&((o=i.selection)==null?void 0:o.addRange(i.range))})}catch{}}applyStyleSheetMutation(e){var t;let r=null;e.styleId?r=this.styleMirror.getStyle(e.styleId):e.id&&(r=((t=this.mirror.getNode(e.id))==null?void 0:t.sheet)||null),r&&(e.source===V.StyleSheetRule?this.applyStyleSheetRule(e,r):e.source===V.StyleDeclaration&&this.applyStyleDeclaration(e,r))}applyStyleSheetRule(e,t){var r,i,o,a;if((r=e.adds)==null||r.forEach(({rule:u,index:f})=>{try{if(Array.isArray(f)){let{positions:h,index:p}=mb(f);Is(t.cssRules,h).insertRule(u,p)}else{let h=f===void 0?void 0:Math.min(f,t.cssRules.length);t?.insertRule(u,h)}}catch{}}),(i=e.removes)==null||i.forEach(({index:u})=>{try{if(Array.isArray(u)){let{positions:f,index:h}=mb(u);Is(t.cssRules,f).deleteRule(h||0)}else t?.deleteRule(u)}catch{}}),e.replace)try{(o=t.replace)==null||o.call(t,e.replace)}catch{}if(e.replaceSync)try{(a=t.replaceSync)==null||a.call(t,e.replaceSync)}catch{}}applyStyleDeclaration(e,t){e.set&&Is(t.rules,e.index).style.setProperty(e.set.property,e.set.value,e.set.priority),e.remove&&Is(t.rules,e.index).style.removeProperty(e.remove.property)}applyAdoptedStyleSheet(e){var t;let r=this.mirror.getNode(e.id);if(!r)return;(t=e.styles)==null||t.forEach(u=>{var f;let h=null,p=null;if(Nn(r)?p=((f=r.ownerDocument)==null?void 0:f.defaultView)||null:r.nodeName==="#document"&&(p=r.defaultView),!!p)try{h=new p.CSSStyleSheet,this.styleMirror.add(h,u.styleId),this.applyStyleSheetRule({source:V.StyleSheetRule,adds:u.rules},h)}catch{}});let i=10,o=0,a=l((u,f)=>{let h=f.map(p=>this.styleMirror.getStyle(p)).filter(p=>p!==null);Nn(u)?u.shadowRoot.adoptedStyleSheets=h:u.nodeName==="#document"&&(u.adoptedStyleSheets=h),h.length!==f.length&&o<i&&(setTimeout(()=>a(u,f),0+100*o),o++)},"adoptStyleSheets");a(r,e.styleIds)}legacy_resolveMissingNode(e,t,r,i){let{previousId:o,nextId:a}=i,u=o&&e[o],f=a&&e[a];if(u){let{node:h,mutation:p}=u;t.insertBefore(h,r),delete e[p.node.id],delete this.legacy_missingNodeRetryMap[p.node.id],(p.previousId||p.nextId)&&this.legacy_resolveMissingNode(e,t,h,p)}if(f){let{node:h,mutation:p}=f;t.insertBefore(h,r.nextSibling),delete e[p.node.id],delete this.legacy_missingNodeRetryMap[p.node.id],(p.previousId||p.nextId)&&this.legacy_resolveMissingNode(e,t,h,p)}}moveAndHover(e,t,r,i,o){let a=this.mirror.getNode(r);if(!a)return this.debugNodeNotFound(o,r);let u=Sw(a,this.iframe),f=e*u.absoluteScale+u.x,h=t*u.absoluteScale+u.y;this.mouse.style.left=`${f}px`,this.mouse.style.top=`${h}px`,i||this.drawMouseTail({x:f,y:h}),this.hoverElements(a)}drawMouseTail(e){if(!this.mouseTail)return;let{lineCap:t,lineWidth:r,strokeStyle:i,duration:o}=this.config.mouseTail===!0?Wf:Object.assign({},Wf,this.config.mouseTail),a=l(()=>{if(!this.mouseTail)return;let u=this.mouseTail.getContext("2d");!u||!this.tailPositions.length||(u.clearRect(0,0,this.mouseTail.width,this.mouseTail.height),u.beginPath(),u.lineWidth=r,u.lineCap=t,u.strokeStyle=i,u.moveTo(this.tailPositions[0].x,this.tailPositions[0].y),this.tailPositions.forEach(f=>u.lineTo(f.x,f.y)),u.stroke())},"draw");this.tailPositions.push(e),a(),setTimeout(()=>{this.tailPositions=this.tailPositions.filter(u=>u!==e),a()},o/this.speedService.state.context.timer.speed)}hoverElements(e){var t;(t=this.lastHoveredRootNode||this.iframe.contentDocument)==null||t.querySelectorAll(".\\:hover").forEach(i=>{i.classList.remove(":hover")}),this.lastHoveredRootNode=e.getRootNode();let r=e;for(;r;)r.classList&&r.classList.add(":hover"),r=r.parentElement}isUserInteraction(e){return e.type!==j.IncrementalSnapshot?!1:e.data.source>V.Mutation&&e.data.source<=V.Input}backToNormal(){this.nextUserInteractionEvent=null,!this.speedService.state.matches("normal")&&(this.speedService.send({type:"BACK_TO_NORMAL"}),this.emitter.emit(ve.SkipEnd,{speed:this.speedService.state.context.normalSpeed}))}warnNodeNotFound(e,t){this.warn(`Node with id '${t}' not found. `,e)}warnCanvasMutationFailed(e,t){this.warn("Has error on canvas update",t,"canvas mutation:",e)}debugNodeNotFound(e,t){this.debug(`Node with id '${t}' not found. `,e)}warn(...e){this.config.showWarning&&this.config.logger.warn(_b,...e)}debug(...e){this.config.showDebug&&this.config.logger.log(_b,...e)}},{addCustomEvent:QU}=Xt,{freezePage:e3}=Xt,{takeFullSnapshot:t3}=Xt,dk="0.0.3-beta.1";typeof window<"u"&&(window.checksumRRWeb={version:dk});var Hw=l(n=>{let e=l(o=>o&&(o instanceof HTMLInputElement&&/|text|email|number|password|search|tel|url/.test(o.type||"")||o instanceof HTMLTextAreaElement)?!(o.disabled||o.readOnly):!1,"isEditableInputOrTextArea"),t=l((o,a)=>{n({key:o,eventTarget:a})},"sendKeyEvent"),r=l(o=>(o.ctrlKey?"ctrl ":"")+(o.altKey?"alt ":"")+(o.shiftKey?"shift ":"")+(o.metaKey?"meta ":"")+o.key,"formatKeyProperties"),i=l(o=>{try{if(e(o.target))return;t(r(o),o.target)}catch{}},"onKeyUp");window.addEventListener("keyup",o=>{i(o)})},"startKeyboardObserver");var $l=class n{constructor(e=document,t){this.target=e;this.onEvent=t;this.monitoredTextElements=[];this.inputEnabledSelectors=["[contenteditable=true]"].join(",");this.iframeObservers=[];this.monitorInputEnabledElement=l(e=>{e.addEventListener("input",t=>{this.onEvent({text:t.target?.innerText,eventTarget:t.target})})},"monitorInputEnabledElement")}static{l(this,"ContendEditableObserver")}startObserver(){this.startIframesObserver(),this.observer=new MutationObserver(e=>{e.forEach(t=>{t.addedNodes.forEach(r=>{if(r.nodeType===Node.ELEMENT_NODE&&r.nodeType===Node.ELEMENT_NODE){let i=r;i.matches(this.inputEnabledSelectors)||i.isContentEditable?this.monitorInputEnabledElement(i):Array.from(pe("*",i)).filter(o=>o.matches&&o.matches(this.inputEnabledSelectors)||o.isContentEditable).forEach(this.monitorInputEnabledElement)}})})}),this.observer.observe(this.target,{childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0}),this.startInputMonitoring()}startIframesObserver(){setInterval(()=>{pe("iframe",this.target).forEach(t=>{if(this.iframeObservers.find(a=>a.iframe===t))return;let r=l(a=>{if(a.iframe.contentWindow)try{a.observer=new n(a.iframe.contentWindow.document,this.onEvent),a.observer.startObserver()}catch{}},"observeIframe"),i=t,o={iframe:i,observer:null};this.iframeObservers.push(o),i.contentWindow?r(o):i.addEventListener("load",()=>{r(o)})})},500)}startInputMonitoring(){this.monitoredTextElements=pe(this.inputEnabledSelectors,this.target),this.monitoredTextElements.forEach(this.monitorInputEnabledElement)}};var Hl=class{constructor(e){this.onEvent=e;this.onURLChange=l(()=>{setTimeout(()=>{let e=window.location.href;if(e!==this.currentURL){this.currentURL=e;try{this.onEvent({url:e})}catch{}}})},"onURLChange")}static{l(this,"URLObserver")}start(){window.addEventListener("popstate",r=>{this.onURLChange()}),window.addEventListener("locationchange",r=>{this.onURLChange()}),window.addEventListener("hashchange",r=>{this.onURLChange()});let e=window.history.pushState;window.history.pushState=(...r)=>(this.onURLChange(),e.apply(window.history,r));let t=window.history.replaceState;window.history.replaceState=(...r)=>(this.onURLChange(),t.apply(window.history,r))}};var hn={defaultMerge:Symbol("deepmerge-ts: default merge"),skip:Symbol("deepmerge-ts: skip")},h3={defaultMerge:hn.defaultMerge};function pk(n,e){return e}l(pk,"defaultMetaDataUpdater");function mk(n,e){return n.filter(t=>t!==void 0)}l(mk,"defaultFilterValues");var Bw;(function(n){n[n.NOT=0]="NOT",n[n.RECORD=1]="RECORD",n[n.ARRAY=2]="ARRAY",n[n.SET=3]="SET",n[n.MAP=4]="MAP",n[n.OTHER=5]="OTHER"})(Bw||(Bw={}));function Ww(n){return typeof n!="object"||n===null?0:Array.isArray(n)?2:bk(n)?1:n instanceof Set?3:n instanceof Map?4:5}l(Ww,"getObjectType");function gk(n){let e=new Set;for(let t of n)for(let r of[...Object.keys(t),...Object.getOwnPropertySymbols(t)])e.add(r);return e}l(gk,"getKeys");function yk(n,e){return typeof n=="object"&&Object.prototype.propertyIsEnumerable.call(n,e)}l(yk,"objectHasProperty");function Uw(n){let e=0,t=n[0]?.[Symbol.iterator]();return{[Symbol.iterator](){return{next(){do{if(t===void 0)return{done:!0,value:void 0};let r=t.next();if(r.done===!0){e+=1,t=n[e]?.[Symbol.iterator]();continue}return{done:!1,value:r.value}}while(!0)}}}}}l(Uw,"getIterableOfIterables");var Vw=["[object Object]","[object Module]"];function bk(n){if(!Vw.includes(Object.prototype.toString.call(n)))return!1;let{constructor:e}=n;if(e===void 0)return!0;let t=e.prototype;return!(t===null||typeof t!="object"||!Vw.includes(Object.prototype.toString.call(t))||!t.hasOwnProperty("isPrototypeOf"))}l(bk,"isRecord");function vk(n,e,t){let r={};for(let i of gk(n)){let o=[];for(let f of n)yk(f,i)&&o.push(f[i]);if(o.length===0)continue;let a=e.metaDataUpdater(t,{key:i,parents:n}),u=zw(o,e,a);u!==hn.skip&&(i==="__proto__"?Object.defineProperty(r,i,{value:u,configurable:!0,enumerable:!0,writable:!0}):r[i]=u)}return r}l(vk,"mergeRecords$1");function wk(n){return n.flat()}l(wk,"mergeArrays$1");function Sk(n){return new Set(Uw(n))}l(Sk,"mergeSets$1");function Ek(n){return new Map(Uw(n))}l(Ek,"mergeMaps$1");function Ck(n){return n.at(-1)}l(Ck,"mergeOthers$1");var Bl={mergeRecords:vk,mergeArrays:wk,mergeSets:Sk,mergeMaps:Ek,mergeOthers:Ck};function Gw(...n){return xk({})(...n)}l(Gw,"deepmerge");function xk(n,e){let t=Mk(n,r);function r(...i){return zw(i,t,e)}return l(r,"customizedDeepmerge"),r}l(xk,"deepmergeCustom");function Mk(n,e){return{defaultMergeFunctions:Bl,mergeFunctions:{...Bl,...Object.fromEntries(Object.entries(n).filter(([t,r])=>Object.hasOwn(Bl,t)).map(([t,r])=>r===!1?[t,Bl.mergeOthers]:[t,r]))},metaDataUpdater:n.metaDataUpdater??pk,deepmerge:e,useImplicitDefaultMerging:n.enableImplicitDefaultMerging??!1,filterValues:n.filterValues===!1?void 0:n.filterValues??mk,actions:hn}}l(Mk,"getUtils");function zw(n,e,t){let r=e.filterValues?.(n,t)??n;if(r.length===0)return;if(r.length===1)return md(r,e,t);let i=Ww(r[0]);if(i!==0&&i!==5){for(let o=1;o<r.length;o++)if(Ww(r[o])!==i)return md(r,e,t)}switch(i){case 1:return Tk(r,e,t);case 2:return Ik(r,e,t);case 3:return Rk(r,e,t);case 4:return Ak(r,e,t);default:return md(r,e,t)}}l(zw,"mergeUnknowns");function Tk(n,e,t){let r=e.mergeFunctions.mergeRecords(n,e,t);return r===hn.defaultMerge||e.useImplicitDefaultMerging&&r===void 0&&e.mergeFunctions.mergeRecords!==e.defaultMergeFunctions.mergeRecords?e.defaultMergeFunctions.mergeRecords(n,e,t):r}l(Tk,"mergeRecords");function Ik(n,e,t){let r=e.mergeFunctions.mergeArrays(n,e,t);return r===hn.defaultMerge||e.useImplicitDefaultMerging&&r===void 0&&e.mergeFunctions.mergeArrays!==e.defaultMergeFunctions.mergeArrays?e.defaultMergeFunctions.mergeArrays(n):r}l(Ik,"mergeArrays");function Rk(n,e,t){let r=e.mergeFunctions.mergeSets(n,e,t);return r===hn.defaultMerge||e.useImplicitDefaultMerging&&r===void 0&&e.mergeFunctions.mergeSets!==e.defaultMergeFunctions.mergeSets?e.defaultMergeFunctions.mergeSets(n):r}l(Rk,"mergeSets");function Ak(n,e,t){let r=e.mergeFunctions.mergeMaps(n,e,t);return r===hn.defaultMerge||e.useImplicitDefaultMerging&&r===void 0&&e.mergeFunctions.mergeMaps!==e.defaultMergeFunctions.mergeMaps?e.defaultMergeFunctions.mergeMaps(n):r}l(Ak,"mergeMaps");function md(n,e,t){let r=e.mergeFunctions.mergeOthers(n,e,t);return r===hn.defaultMerge||e.useImplicitDefaultMerging&&r===void 0&&e.mergeFunctions.mergeOthers!==e.defaultMergeFunctions.mergeOthers?e.defaultMergeFunctions.mergeOthers(n):r}l(md,"mergeOthers");var Ok={sampling:{mousemove:!1},userTriggeredOnInput:!0,maskInputOptions:{password:!1}},Wl=class{constructor(e,t={}){this.eventHandler=e;this.options=t;this.logNativeMutationObserver=!1;this.stopRRWebRecording=l(()=>{},"stopRRWebRecording");this.start=l(()=>{console.log("starting with options",this.options),this.stopRRWebRecording=Xt({...this.options,emit:this.eventHandler}),this.logNativeMutationObserver&&this.selfObserve(),this.startURLObserver(),this.startKeyboardObserver(),this.startContentEditableObserver()},"start");this.stop=l(()=>{this.stopRRWebRecording()},"stop");this.startURLObserver=l(()=>{this.urlObserver=new Hl(({url:e})=>{let t={url:e};this.addCustomEvent("url-change",t)}),this.urlObserver.start()},"startURLObserver");this.startContentEditableObserver=l(()=>{this.contentEditableObserver=new $l(document,({text:e,eventTarget:t})=>{let r={text:e,id:this.tryGetMetaFromEventTarget(t)?.id};this.addCustomEvent("contenteditable-input",r)}),this.contentEditableObserver.startObserver()},"startContentEditableObserver");this.startKeyboardObserver=l(()=>{Hw(({key:e,eventTarget:t})=>{let r={key:e,id:this.tryGetMetaFromEventTarget(t)?.id};this.addCustomEvent("key-stroke",r)})},"startKeyboardObserver");this.addCustomEvent=l((e,t)=>{Xt.addCustomEvent(e,t)},"addCustomEvent");this.tryGetMetaFromEventTarget=l(e=>{try{return this.getMeta(e)}catch{}},"tryGetMetaFromEventTarget");this.selfObserve=l(()=>{let e=document.getElementsByTagName("body"),t={attributes:!0,childList:!0,subtree:!0},r=l((o,a)=>{for(let u of o)u.type==="childList"?console.log("A child node has been added or removed.",u):u.type==="attributes"&&console.log(`The ${u.attributeName} attribute was modified.`,u)},"callback");new MutationObserver(r).observe(e[0],t)},"selfObserve");this.getNodeById=l(e=>Xt.mirror.getNode(e),"getNodeById");this.getMeta=l(e=>Xt.mirror.getMeta(e),"getMeta");this.eventHandler=e,this.options=Gw(Ok,t)}static{l(this,"SessionRecorder")}};var jw=[{selector:'path[d="M17.5 13V15.6667C17.5 16.0203 17.3361 16.3594 17.0444 16.6095C16.7527 16.8595 16.357 17 15.9444 17H5.05556C4.643 17 4.24733 16.8595 3.95561 16.6095C3.66389 16.3594 3.5 16.0203 3.5 15.6667V13"] + path[d="M14.6673 6.92057L10.5007 2.75391L6.33398 6.92057"] + path[d="M10.5 2.75391V12.7539"]',description:"export button"},{selector:'path[d="M16.0893 13.1868C16.6838 12.7754 17.1321 12.1858 17.3697 11.503C17.6072 10.8202 17.6216 10.0796 17.4107 9.38816C17.1999 8.69667 16.7748 8.09007 16.1968 7.65594C15.6187 7.2218 14.9177 6.9826 14.1948 6.97285H12.8308C12.6017 6.20011 12.1996 5.48973 11.6549 4.89565C11.1102 4.30157 10.4374 3.83943 9.68735 3.54431C8.93734 3.24918 8.12995 3.12885 7.32648 3.19244C6.52301 3.25603 5.7446 3.50187 5.05036 3.9113C4.35612 4.32072 3.7643 4.88297 3.31985 5.55533C2.8754 6.22769 2.59001 6.99248 2.48535 7.79164C2.38068 8.59079 2.4595 9.40329 2.71582 10.1674C2.97214 10.9316 3.39921 11.6272 3.96461 12.2016"] + path[d="M10.0273 10.0039V16.8241"] + path[d="M13.0585 13.0351L10.0273 10.0039L6.99609 13.0351"]',description:"import button"},{selector:'path[d="M20.4696 21.5303C20.7625 21.8232 21.2373 21.8232 21.5302 21.5303C21.8231 21.2374 21.8231 20.7626 21.5302 20.4697L20.4696 21.5303ZM17.1802 16.1197C16.8873 15.8268 16.4125 15.8268 16.1196 16.1197C15.8267 16.4126 15.8267 16.8874 16.1196 17.1803L17.1802 16.1197ZM18.25 11C18.25 15.0041 15.0041 18.25 11 18.25V19.75C15.8325 19.75 19.75 15.8325 19.75 11H18.25ZM11 18.25C6.99594 18.25 3.75 15.0041 3.75 11H2.25C2.25 15.8325 6.16751 19.75 11 19.75V18.25ZM3.75 11C3.75 6.99594 6.99594 3.75 11 3.75V2.25C6.16751 2.25 2.25 6.16751 2.25 11H3.75ZM11 3.75C15.0041 3.75 18.25 6.99594 18.25 11H19.75C19.75 6.16751 15.8325 2.25 11 2.25V3.75ZM21.5302 20.4697L17.1802 16.1197L16.1196 17.1803L20.4696 21.5303L21.5302 20.4697Z"]',description:"search"},{selector:'path[d="M3.75 10H16.875"] + path[d="M8.125 5L3.125 10L8.125 15"]',description:"back"},{selector:'path[d="M3.33301 8H12.6663"] + path[d="M8 3.33331L12.6667 7.99998L8 12.6666"]',description:"forward"},{selector:'path[d="M10 4.16667V15.8333"] + path[d="M4.16699 10H15.8337"]',description:"new or Add button"},{selector:'path[d="M10 10.75C10.4142 10.75 10.75 10.4142 10.75 10C10.75 9.58579 10.4142 9.25 10 9.25C9.58579 9.25 9.25 9.58579 9.25 10C9.25 10.4142 9.58579 10.75 10 10.75Z"] + path[d="M15.833 10.75C16.2472 10.75 16.583 10.4142 16.583 10C16.583 9.58579 16.2472 9.25 15.833 9.25C15.4188 9.25 15.083 9.58579 15.083 10C15.083 10.4142 15.4188 10.75 15.833 10.75Z"] + path[d="M4.16699 10.75C4.58121 10.75 4.91699 10.4142 4.91699 10C4.91699 9.58579 4.58121 9.25 4.16699 9.25C3.75278 9.25 3.41699 9.58579 3.41699 10C3.41699 10.4142 3.75278 10.75 4.16699 10.75Z"]',description:"open menu"},{selector:'path[d="M10 4.16667V15.8333"] + path[d="M4.16699 10H15.8337"]',description:"add filter"},{selector:'path[d="M15 5L5 15"] + path[d="M5 5L15 15"]',description:"close or remove"},{selector:'path[d="M4 6L8 10L12 6"]',description:"open or close dropdown"},{selector:'path[d="M10 17.5C14.1421 17.5 17.5 14.1421 17.5 10C17.5 5.85786 14.1421 2.5 10 2.5C5.85786 2.5 2.5 5.85786 2.5 10C2.5 14.1421 5.85786 17.5 10 17.5Z"] + path[d="M12.5 7.5L7.5 12.5"] + path[d="M7.5 7.5L12.5 12.5"]',description:"clear input"},{selector:'path[d="M3.33301 5.49054H4.81449H16.6663"] + path[d="M7.14286 5.49999V3.99999C7.14286 3.60216 7.29337 3.22063 7.56128 2.93932C7.82919 2.65802 8.19255 2.49998 8.57143 2.49998H11.4286C11.8075 2.49998 12.1708 2.65802 12.4387 2.93932C12.7066 3.22063 12.8571 3.60216 12.8571 3.99999V5.49999M15 5.49999V16C15 16.3978 14.8495 16.7793 14.5816 17.0607C14.3137 17.342 13.9503 17.5 13.5714 17.5H6.42857C6.04969 17.5 5.68633 17.342 5.41842 17.0607C5.15051 16.7793 5 16.3978 5 16V5.49999H15Z"] + path[d="M8.33203 9.23726V13.4039"] + path[d="M11.666 9.23726V13.4039"]',description:"delete"},{selector:'path[d="M13.3334 4L6.00008 11.3333L2.66675 8"]',description:"checked"},{selector:'path[d="M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"]',description:"downward-pointing arrow"},{selector:'path[d="M18.0893 3.08926C18.4147 2.76382 18.4147 2.23618 18.0893 1.91074C17.7638 1.58531 17.2362 1.58531 16.9107 1.91074L18.0893 3.08926ZM9.41074 9.41074L8.82149 10L10 11.1785L10.5893 10.5893L9.41074 9.41074ZM16.9107 1.91074L9.41074 9.41074L10.5893 10.5893L18.0893 3.08926L16.9107 1.91074Z"] + path[d="M17.5 2.5L12.25 17.5L9.25 10.75L2.5 7.75L17.5 2.5Z"]',description:"send"}];var Lk=5*60*1e3,Vl=class{constructor(){this.flashingTextElements=[]}static{l(this,"FlashingElementsDetector")}start(){this.stop(),this.flashingTextElements=[],this.observer=new MutationObserver(e=>{e.forEach(t=>{t.addedNodes.length>0&&t.addedNodes.forEach(r=>{r instanceof HTMLElement&&this.includeElement(r)&&setTimeout(()=>{this.flashingTextElements.push(this.processTextElements(r))},1e3)})})}),this.observer.observe(document.body,{childList:!0,subtree:!0}),this.monitoringPeriodTimeout=setTimeout(()=>{this.stop()},Lk)}stop(){this.monitoringPeriodTimeout&&(clearTimeout(this.monitoringPeriodTimeout),this.monitoringPeriodTimeout=null),this.observer&&(this.observer.disconnect(),this.observer=null)}get(){let e=this.flashingTextElements.map(r=>r.filter(i=>!i.isConnected||vt(i.parentElement).isHidden)).filter(r=>r.length).map(r=>`<span>${r.map(i=>i.textContent).join("</span><span>")}</span>`),t=new Set(e);return Array.from(t)}stopAndGet(){return this.stop(),this.get()}includeElement(e){return!(e.getElementsByTagName("*").length>50||e.outerHTML.length>5e3)}processTextElements(e){let t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null),r,i=[];for(;r=t.nextNode();)vt(r.parentNode).isHidden||i.push(r);return i}};var Ii=class{static{l(this,"AlphaNumericCounter")}constructor(e){this.counter=e??"0"}increment(){let e=this.counter.length-1;for(;e>=0;){let t=this.counter[e];if(t==="9"){this.counter=this.replaceAt(this.counter,e,"a");return}else if(t==="z"){if(this.counter=this.replaceAt(this.counter,e,"0"),e===0){this.counter="1"+this.counter;return}e--}else{this.counter=this.replaceAt(this.counter,e,String.fromCharCode(t.charCodeAt(0)+1));return}}}get(){return this.counter}incrementAndGet(){return this.increment(),this.get()}getAndIncrement(){let e=this.get();return this.increment(),e}replaceAt(e,t,r){return e.substr(0,t)+r+e.substr(t+r.length)}static compare(e,t){let r=e.length,i=t.length;if(r!==i)return r-i;for(let o=0;o<r;o++){let a=e.charCodeAt(o),u=t.charCodeAt(o);if(a!==u)return a-u}return 0}};var Xs="checksum-ignore",Gl="checksum-get-more-items",qw=20,Nk=.7,Ul,Yw,_k=0,Kw=l((n,{forceIncludeAttribute:e,forceIncludeFileInput:t,forceIncludeElements:r,limit:i})=>{n.excludedElements?.forEach(w=>{w.removeAttribute(Xs)}),n.excludedElements=new Set;let o=n.element,a=i??Math.min(Math.ceil(o.children.length*.5),o.children.length-qw),u=l(w=>e&&(w.hasAttribute(e)||Array.from(w.querySelectorAll(`[${e}]`)).length>0)||t&&w.tagName.toLowerCase()==="input"&&w.type==="file"?!0:r.includes(w),"isForceIncluded"),f=l(w=>{let S=0;if(n.elementsToKeep.includes(w))return S;let E=gd(w);E.length>=n.attributes.length&&S++;let v=E.filter(T=>n.attributes.includes(T)).length;v===n.attributes.length?S+=3:v>0&&S++;let A=yd(w).filter(T=>n.classes.includes(T)).length;return A===n.classes.length?S+=2:A>0&&S++,S},"scoreElement"),h=Array.from(o.children).filter(w=>w.tagName===n.tagName&&!u(w)).map(w=>({element:w,score:f(w)})).sort((w,S)=>S.score-w.score),{inViewportElements:p,outOfViewportElements:g}=h.reduce((w,S)=>{let{element:E}=S;return bs(Xe(E,"Element")?E:E?.parentElement)?w.inViewportElements.push(E):w.outOfViewportElements.push(E),w},{inViewportElements:[],outOfViewportElements:[]}),y=l(w=>{for(let S of w)if(n.excludedElements.add(S),n.excludedElements.size===a)return!0},"excludeElements");return y(g)||y(p),Dk(n),Array.from(n.excludedElements)},"viewportReducer");function Dk(n){let{excludedElements:e,element:t}=n;e.forEach(r=>{r.setAttribute(Xs,"")}),t._getmoreitemsid||(t._getmoreitemsid="gm"+_k++),n.id=t._getmoreitemsid,t.setAttribute(Gl,n.id)}l(Dk,"markTemplateElements");function gd(n){return Array.from(n.attributes).filter(e=>!e.name.startsWith("checksum")).map(e=>e.name.replace(/[0-9]/g,""))}l(gd,"mapAttributes");function yd(n){return n.className?.split(" ").filter(e=>e)??[]}l(yd,"getElementClasses");function br(n=document.body,{nodeRepetitionsThreshold:e=qw}={}){try{return console.time("bettertemplatize"),Ul=new Set,Xw(n,e),console.timeEnd("bettertemplatize"),console.log("[bettertemplatize] templates found:",Array.from(Ul)),Array.from(Ul)}catch(t){return console.error("[bettertemplatize] failed during template processing:",t.message),[]}}l(br,"bettertemplatize");function Xw(n,e){Array.from(n.children).forEach(t=>{if(t instanceof SVGElement)return;let r=t.children.length;if(r>=e){let i=Array.from(t.children),o=Math.ceil(r*Nk);for(let a=0;a<r;a++){let u=0,f=i.slice(0,a);for(let h=a+1;h<r&&u+r-h>=o;h++)try{if(Zw(i[a],i[h])){if(u++,u>=o){Ul.add({element:t,...Yw,elementsToKeep:f});return}}else f.push(i[h])}catch{return}}}Xw(t,e)})}l(Xw,"traverse");var kk=.8,Pk=.5,Fk=.8,$k=5;function Zw(n,e,t=1){let r,i,o=l(E=>(E&&(Yw={attributes:r,classes:i,tagName:n.nodeName}),E),"response");if(n.nodeType!==e.nodeType)return o(!1);if(n instanceof SVGElement&&e instanceof SVGElement||n.nodeType===Node.TEXT_NODE)return o(!0);if(n.nodeType!==Node.ELEMENT_NODE)return o(!1);let a=n,u=e;if(a.tagName.toLowerCase()!==u.tagName.toLowerCase())return o(!1);let f=gd(a),h=gd(u);if(r=f.filter(E=>h.includes(E)),r.length/Math.max(f.length,h.length)<kk)return o(!1);let p=yd(a),g=yd(u);if(i=p.filter(E=>g.includes(E)),i.length/Math.max(p.length,g.length)<Pk)return o(!1);if(t>=$k)return o(!0);if(a.shadowRoot&&!u.shadowRoot||!a.shadowRoot&&u.shadowRoot)return o(!1);let y=Array.from(a.shadowRoot?a.shadowRoot.children:a.children),w=Array.from(u.shadowRoot?u.shadowRoot.children:u.children);if(y.length===0&&w.length===0)return o(!0);let S=0;for(let E=0;E<Math.min(y.length,w.length);E++)Zw(y[E],w[E],t+1)&&S++;return S/Math.max(y.length,w.length)<Fk?o(!1):o(!0)}l(Zw,"areSimilar");var Jw=16e3;var Hk=!0,bd={markTransparentElementsAsHidden:!1,markElementsHiddenByTransparentElementAsVisible:!0},zl=class{constructor(){this.checksumIdToRRwebIdMap={};this.flashingElementsDetector=new Vl;this.forceIncludeElements=[];this.preMapReducedHTMLSelectors=!1;this.useRrwebIdsAsChecksumIds=!1;this.excludedNodes=0;this.reducePercentage=50;this.scrollableElements={};this.defaultReduceHTMLOptions={checkElementInstanceType:!0,extraAllowedAttributes:[],initialChecksumId:void 0,forceIncludeFileInput:!1,forceIncludeAttribute:void 0,invalidateCache:!1,svgIntegration:"aria-label",includeFlashingElements:!0,onForceIncludeElement:l(()=>{},"onForceIncludeElement"),limitNodeRepetitions:50,stopFlashingElementsDetection:!1,assignChecksumIdsToAllElements:!0,assignRrwebIdsToAllElements:!0,fromTimeMachine:!1}}static{l(this,"HTMLReducer")}preprocessDocument(e=document){nn("[preprocessDocument] querySelectorAllExtended");let t=pe("*",e,{includeHTML:!0});sn("[preprocessDocument] querySelectorAllExtended"),nn("[preprocessDocument] isElementHidden");for(let r of t){if(this.shouldIgnoreElement(r))continue;let i=vt(r,bd);r.setAttribute("checksum-data-visible",!i.isHidden&&!i.isTransparent?"true":"false"),!i.isHidden&&i.isTransparent&&r.setAttribute("checksum-data-transparently-visible","true"),i.isBehindTransparentElement&&r.setAttribute("checksum-data-visible-under-transparent-element","true"),i.clickOffset&&r.setAttribute("checksum-data-click-offset",`${i.clickOffset.x};${i.clickOffset.y}`),this.markScrollableElement(r)}sn("[preprocessDocument] isElementHidden")}markScrollableElement(e){let{canScrollX:t,canScrollY:r,progressX:i,progressY:o}=mt.getScrollData(e);if(t&&(e.setAttribute("data-scrollable-x","true"),e.setAttribute("data-scrollable-x-progress",i.toString())),r&&(e.setAttribute("data-scrollable-y","true"),e.setAttribute("data-scrollable-y-progress",o.toString())),t||r)try{let{id:a}=this.getSessionMirror().getMeta(e);a&&(this.scrollableElements[a]={x:t?i:void 0,y:r?o:void 0})}catch(a){console.error("[markScrollableElement] Error getting rrwebId and updating scrollable elements",e,a)}}setSessionRecorder(e){this.sessionRecorder=e}markInteractableElements(e,t=document,{forceIncludeAttribute:r,forceIncludeFileInput:i}={}){nn("[markInteractableElements]"),this.interactableElements=[];let o=On(t,e,{allowDisabled:!0,excludeCrossOriginIframes:!1}),a=l((h,p)=>(h._checksumid||(h._checksumid=p??this.checksumIdCounter.getAndIncrement()),h.setAttribute("checksumid",h._checksumid),h.setAttribute("checksuminteractable","true"),h._checksumid),"setChecksumIdForElement"),u=l((h,p=!1,g)=>{if(this.shouldIgnoreElement(h))return;let y=h.getAttribute("checksum-data-click-offset")?.split(";"),w=y&&{x:parseInt(y[0]),y:parseInt(y[1])},S=a(h,g);this.interactableElements.push({checksumId:S,element:h,forced:p,clickOffset:w})},"handleInteractableElement");o.forEach(h=>u(h));let f=l(h=>{pe(h,t,{includeHTML:!0}).forEach(p=>u(p,!0))},"forceIncludeSelector");r&&f(`[${r}]`),i&&f("input[type='file']"),this.forceIncludeElements.filter(({element:h})=>h?.isConnected).forEach(({element:h,checksumid:p})=>u(h,!0,p)),console.log(`Marked ${this.interactableElements.length} interactable elements`),sn("[markInteractableElements]")}truthyFilter(e){return!!e}shouldIgnoreElement(e){return e.hasAttribute(Xs)}getSessionMirror(e=!1){return e?window.checksum.timeMachine.sessionReplayer:this.sessionRecorder}generateSimplifiedDom(e,t,{extraAllowedAttributes:r=[],checkElementInstanceType:i=!0,forceIncludeAttribute:o=void 0,forceIncludeFileInput:a=!1,svgIntegration:u="aria-label",onForceIncludeElement:f=void 0,contentWindow:h=window,assignChecksumIdsToAllElements:p=!0,assignRrwebIdsToAllElements:g=!0,fromTimeMachine:y=!1}={}){if(!e)return null;let w=l((ge,dt=ge)=>{if(ge._originalNode=dt,!Xe(ge,"Element")||!Xe(dt,"Element"))return ge;let ut=ge,ot=dt;if(p&&!ot.hasAttribute("checksumid")&&(ot._checksumid||(ot._checksumid=this.checksumIdCounter.getAndIncrement()),ut.setAttribute("checksumid",ot._checksumid),this.nonInteractableElementsFromSimplifiedDom.push({checksumId:ot._checksumid,element:ot})),g){let yn=this.getSessionMirror(y);if(yn){let Wt=yn.getMeta(ot)?.id?.toString();Wt&&(ut.setAttribute("rrwebid",Wt),this.useRrwebIdsAsChecksumIds&&(ut.setAttribute("checksumid",Wt),ut._checksumid=Wt))}}return this.checksumIdToRRwebIdMap[ot._checksumid]=parseInt(ot._rrwebid),ge},"processSimplifiedDOMNode"),S=l((ge,dt=e)=>w(document.createTextNode(ge),dt),"createTextNode"),E=l((ge,dt=e)=>w(document.createElement(ge),dt),"createElementNode");if(e.nodeType===Node.ELEMENT_NODE){let ge=e;if(ge.tagName.toLowerCase()==="head"||this.shouldIgnoreElement(ge))return null}if(e.nodeType===Node.TEXT_NODE)return!e.parentElement||e.parentElement.getAttribute("checksum-data-visible")==="false"&&!e.parentElement.hasAttribute("checksumid")||e.parentElement.tagName.toLowerCase()==="body"?null:e.textContent?.trim()?S(e.textContent+" "):null;if(e.nodeType!==Node.ELEMENT_NODE||i&&!(Xe(e,"HTMLElement")||Xe(e,"SVGElement")))return null;let v=e,M=v.tagName.toLowerCase()==="iframe"&&v.contentDocument,A=ri(M?v.contentDocument.documentElement:v,{flattenShadowRootChildren:!0});t.esraSelectionRules?.limitChildren?.forEach(ge=>{v.matches(ge.selector)&&A.length>ge.limit&&A.splice(ge.limit)});let T=A.map(ge=>this.generateSimplifiedDom(ge,t,{extraAllowedAttributes:r,checkElementInstanceType:i,forceIncludeAttribute:o,forceIncludeFileInput:a,svgIntegration:u,onForceIncludeElement:f,contentWindow:M?v.contentWindow:h,assignChecksumIdsToAllElements:p,assignRrwebIdsToAllElements:g,fromTimeMachine:y})).filter(this.truthyFilter),N=v.getAttribute("checksum-data-visible")!=="false",U=v.hasAttribute("checksumid"),G=v.hasAttribute("role"),{customDescription:Q,customDescriptionTarget:W}=this.getElementCustomDescription(v,{enableSVGCustomDescription:!!u}),z=!!Q,re=v.hasAttribute("aria-label")||v.hasAttribute("name")||v.hasAttribute("alt"),B=v.hasAttribute(Gl)||this.forceIncludeElements.map(ge=>ge.element).includes(v)||!!o&&v.hasAttribute(o)||a&&v.tagName.toLowerCase()==="input"&&v.getAttribute("type")==="file",q=["form","button","input","textarea","a","table","th","tr","td","section","nav","header","footer","main","article","aside","li","ul","select","option","datalist"],k=U||N&&(G||re||z||v.matches(q.join(",")));if(!(k||B)){if(!T.length)return null;if(T.length===1&&!Xe(T[0],"Text"))return T[0]}!k&&B&&f?.(v);let X=l(()=>{if(z)switch(W){case"svg":switch(u){case"aria-label":let dt=E("svg");return dt.setAttribute("aria-label",Q),{simplifiedNode:dt,appendChildren:!1};case"text":if(v.hasAttribute("checksumid")){let ot=E("div");return ot.innerText=Q,{simplifiedNode:ot,appendChildren:!1}}return{simplifiedNode:S(` [${Q}] `),appendChildren:!1}}}let ge=v.tagName.toLowerCase()==="body"&&v.ownerDocument!==document?"div":v.tagName;return{simplifiedNode:E(ge)}},"makeSimplifiedNode"),{simplifiedNode:Y,appendChildren:he=!0}=X();if(!Xe(Y,"Element"))return Y;let Ae=Y,xe=["aria-.+","data-name","name","type","placeholder","content","value","role","icon","title","checksumid","checksuminteractable","checksum-get-more-items","checked","disabled","selected","label","required","inputmode","min","max","step","minlength","maxlength","alt","hidden","draggable","ondrop","ondragover","contenteditable","href","(data-)?test(-)?id"].concat(r),Cr=v.attributes;for(let ge of Cr)for(let dt of xe)new RegExp("^"+dt+"$").test(ge.name)&&Ae.setAttribute(ge.name,ge.value??!0);if(v.isContentEditable?Ae.setAttribute("contenteditable","true"):!["TEXTAREA","INPUT","SELECT"].includes(v.tagName)&&window.getComputedStyle(v).cursor==="text"&&Ae.setAttribute("contenteditable","cursor-text"),Xe(v,"HTMLInputElement")&&v.getAttribute("type")==="checkbox")v.checked&&Ae.setAttribute("checked","true");else if(Xe(v,"HTMLInputElement")||Xe(v,"HTMLSelectElement"))Ae.setAttribute("value",v.value);else if(Xe(v,"HTMLTextAreaElement")&&!v.childNodes.length&&v.value){let ge=S(v.value);Ae.appendChild(ge)}return he&&T.forEach(ge=>Ae.appendChild(ge)),Ae}getElementCustomDescription(e,{enableSVGCustomDescription:t=!0}={}){return(Xe(e,"SVGElement")||e.tagName.toLowerCase()==="svg")&&t?{customDescriptionTarget:"svg",customDescription:this.getSVGDescriptionForElement(e)}:{}}getSVGDescriptionForElement(e){let t=this.findSvgElementDescriptionFromBank(e);if(t)return t;let r=e.querySelector("title");if(r)return r.textContent}findSvgElementDescriptionFromBank(e){return this.getSvgBank().find(t=>e.matches(`svg:has(${t.selector})`))?.description}getSvgBank(){return jw}restoreDom(e=document){pe("*",e).forEach(r=>{r.removeAttribute("checksum-data-visible"),r.removeAttribute("checksum-data-transparently-visible"),r.removeAttribute("checksum-data-visible-under-transparent-element"),r.removeAttribute("checksumid"),r.removeAttribute("checksuminteractable"),r.removeAttribute("checksum-data-click-offset"),r.removeAttribute(Xs),r.removeAttribute(Gl),r.removeAttribute("data-scrollable-x"),r.removeAttribute("data-scrollable-y"),r.removeAttribute("data-scrollable-x-progress"),r.removeAttribute("data-scrollable-y-progress"),r.removeAttribute("rrwebid")})}removeAttribute(e){pe("*",document).forEach(r=>{r.removeAttribute(e)})}async mapAndStoreSelectors(){let e={},t=new Mt;for(let{checksumId:r,element:i,clickOffset:o,selector:a,locator:u,parentFramesSelectors:f}of await t.injectSelectorsAndLocators(this.interactableElementsFromSimplifiedDom)){if(!a){console.warn("Unable to get selector for element",i);continue}let h=i;e[r]={element:h,selector:a,locator:u,clickOffset:o,parentFramesSelectors:f,innerText:h.innerText,rrwebId:this.checksumIdToRRwebIdMap[r]}}return e}shouldFurtherReduce(e){return e?e.outerHTML.length>Jw:!0}async reduce(e=document,t,r={}){console.time("reduceHTML");let{initialChecksumId:i,forceIncludeAttribute:o,forceIncludeFileInput:a,invalidateCache:u,includeFlashingElements:f,limitNodeRepetitions:h,stopFlashingElementsDetection:p}=this.lastReduceHTMLOptions={...this.defaultReduceHTMLOptions,...r},g=Nt.getInstance("reduce",{target:e,monitorInput:!0,invalidate:u,log:!1});if(g.hasCache())return g.get();let y=f?this.flashingElementsDetector.get():void 0;p&&this.flashingElementsDetector.stop(),this.nodeRepetitionsThreshold=h,this.reducePercentage=50,this.templateNodes=void 0,this.excludedNodes=0,this.scrollableElements={};let w=l(M=>Kw(M,{forceIncludeAttribute:o,forceIncludeFileInput:a,forceIncludeElements:this.forceIncludeElements.map(A=>A.element),limit:Math.min(Math.ceil(M.element.children.length*(this.reducePercentage/100)),M.element.children.length-6)}),"templateReducer");console.log("Running pre-templatize"),this.templatize(w),console.log("Preprocessing document..."),this.preprocessDocument(e);let S;for((i||!this.checksumIdCounter)&&(this.checksumIdCounter=new Ii(i??"0")),console.log("Marking interactable elements..."),this.markInteractableElements(t,e,{forceIncludeAttribute:o,forceIncludeFileInput:a});;){if(console.log("Generating simplified DOM..."),this.nonInteractableElementsFromSimplifiedDom=[],S=this.generateSimplifiedDom(e.documentElement,t,this.lastReduceHTMLOptions),!S)throw new Error("Unable to get simplified DOM");if(this.shouldFurtherReduce(S)){if(console.log(`Will further reduce (${S.outerHTML.length})...`),!this.templatize(w)){console.log(`Exceeded maximum html reduction, stopping (html size: ${S.outerHTML.length})`);break}}else break}console.log("Simplified DOM generated, length:",S.outerHTML.length);let E=new Set(Array.from(S.querySelectorAll("[checksumid]")).map(M=>M.getAttribute("checksumid")));this.interactableElementsFromSimplifiedDom=this.interactableElements.filter(M=>E.has(M.checksumId)),console.log(`Found ${this.interactableElementsFromSimplifiedDom.length} interactable elements in simplified DOM vs ${this.interactableElements.length} in original DOM`),console.log("Restoring DOM..."),this.restoreDom(e),this.preMapReducedHTMLSelectors=Hk?!1:!!t.preMapReducedHTMLSelectors,this.preMapReducedHTMLSelectors?(console.log("Mapping selectors..."),this.selectors=await this.mapAndStoreSelectors(),console.log("Done mapping selectors")):this.selectors={},this.elementsInSimplifiedDomByChecksumId=[...this.interactableElementsFromSimplifiedDom,...this.nonInteractableElementsFromSimplifiedDom].reduce((M,A)=>(M[A.checksumId]=A,M),{});let v={reducedDomHTMLElement:S,reducedHTML:S.outerHTML,currentChecksumId:this.checksumIdCounter.get(),flashingHTML:y,scrollableElements:this.scrollableElements};return g.set(v),console.timeEnd("reduceHTML"),v}templatize(e){let t=this.excludedNodes,r=l(()=>Array.from(this.templateNodes).reduce((i,o)=>i+e(o).length,0),"calcExculdedNodes");if(!this.templateNodes)this.templateNodes=br(document.body,{nodeRepetitionsThreshold:this.nodeRepetitionsThreshold}),this.excludedNodes=r();else do{if(this.reducePercentage<98)this.reducePercentage=Math.min(this.reducePercentage+20,98),console.log("Increasing reduce percentage to",this.reducePercentage);else{if(this.nodeRepetitionsThreshold<=20)return!1;this.reducePercentage=50,this.nodeRepetitionsThreshold-=10,console.log("Reducing node repetitions threshold to",this.nodeRepetitionsThreshold),this.templateNodes=br(document.body,{nodeRepetitionsThreshold:this.nodeRepetitionsThreshold})}this.excludedNodes=r()}while(t===this.excludedNodes);return console.log(`[templatize] ${this.excludedNodes} elements marked to ignore for ${this.templateNodes.length} templates`),!0}getMoreElementsFromTemplate(e,t){try{let r=this.templateNodes.find(h=>h.id===e);if(!r)throw new Error("Template not found");let{element:i,excludedElements:o}=r;console.log("Preprocessing template node..."),this.preprocessDocument(i),console.log("Marking template interactable elements..."),this.markInteractableElements(t,i,this.lastReduceHTMLOptions);let a=[],u=l(()=>a.map(h=>h.outerHTML).join(""),"getElementsHTML"),f=o.values();for(;u().length<Jw*.5;){let h=f.next().value;if(!h)break;let p=Array.from(h.querySelectorAll("[checksumid]")).concat(h._checksumid?[h]:[]);this.interactableElements.filter(g=>p.includes(g.element)).forEach(g=>{this.elementsInSimplifiedDomByChecksumId[g.element._checksumid]=g}),a.push(this.generateSimplifiedDom(h,t,this.lastReduceHTMLOptions)),o.delete(h)}return this.restoreDom(i),{items:u(),hasMoreItems:o.size>0}}catch(r){console.error("[getMoreElementsFromTemplate] error",r);return}}async getSelectorForChecksumId(e,{forceGenerate:t=!1}={}){let r=l(h=>({selector:e,element:h?h.element:null,locator:"",parentFramesSelectors:[],invalid:!0,rrwebId:this.checksumIdToRRwebIdMap[e],clickOffset:h?.clickOffset,innerText:h?h.element.innerText:""}),"makeDefaultResult"),i=new Mt,o=this.elementsInSimplifiedDomByChecksumId[e];if(!o||!o.element.isConnected)return this.preMapReducedHTMLSelectors&&this.selectors[e]?this.selectors[e]:r(o);let{selector:a,locator:u,parentFramesSelectors:f}=await i.getSelectorAndLocator(o.element);return{...r(o),selector:a,locator:u,parentFramesSelectors:f,invalid:!1}}getElementForChecksumId(e){return this.elementsInSimplifiedDomByChecksumId[e]?.element}hasInnerTextByChecksumId(e,{maxLength:t=void 0,minLength:r=void 0}={}){if(!this.preMapReducedHTMLSelectors){let o=this.elementsInSimplifiedDomByChecksumId[e]?.element?.innerText;return!(!o||r&&o.length<r||t&&o.length>t)}return!!this.selectors[e]?.innerText}getInteractableElements(){return this.interactableElements}getInteractableElementsInReducedHTML(){return this.interactableElementsFromSimplifiedDom}startFlashingElementsDetection(){return this.flashingElementsDetector.start()}addForceIncludeElement(e){this.forceIncludeElements.push(e),e.element._checksumid=e.checksumid}};function eS(n){return n._debugSource?.fileName?n._debugSource?.fileName:""}l(eS,"getComponentpath");function Qw(n,e){if(n==="Unknown"||typeof n!="string"||n[0]!==n[0].toUpperCase()||e.type.$$typeof===Symbol.for("react.context")||e.type.$$typeof===Symbol.for("react.forward_ref")||e.type.$$typeof===Symbol.for("react.memo")||e.type.$$typeof===Symbol.for("react.profiler")||e.type.$$typeof===Symbol.for("react.suspense"))return!1;let t=eS(e);return!(/.*\/node_modules\//.test(t)||n===t||/^(?!.*src).*$/.test(t))}l(Qw,"isComponentAllowed");function vd(n,e={}){if(!n)return["",{}];let t=n.type,r=t?t.name||t:"Unknown",i="";if(Qw(r,n)){i+=`<${r}>`;let o=eS(n);e[r]=o}if(n.child){let[o,a]=vd(n.child,e);i+=o,e={...e,...a}}if(Qw(r,n)&&(i+=`</${r}>`),n.sibling){let[o,a]=vd(n.sibling,e);i+=o,e={...e,...a}}return[i,e]}l(vd,"traverseReactTree");function tS(n){let e=n._reactRootContainer?._internalRoot.current;return e||console.log("No react tree in element",n),vd(e)}l(tS,"getReactTree");var Ri=class n{static{l(this,"FrontendLogger")}static{this.overriddenMethods=["log","warn","error"]}static{this.original={}}static removePrefix(){this.overriddenMethods.forEach(e=>{n.original[e]&&(console[e]=n.original[e])})}static setPrefix(e){this.overriddenMethods.forEach(t=>{n.original[t]||(n.original[t]=console[t]),console[t]=(...r)=>{r.unshift(e),n.original[t].apply(console,r)}})}};var jl=class{constructor(e=i=>i.map(o=>o.target),t={childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0},r={collectElement:!0}){this.filterElements=e;this.observeOptions=t;this.options=r;this.mutationEventListeners=[]}static{l(this,"MutationDetector")}addEventListener(e,t){this.mutationEventListeners.push({selector:e,listener:t})}startListening(){this.elements=[],this.observer=new MutationObserver(e=>{this.options.collectElement&&(this.elements=[...this.elements,...this.filterElements(e)]),this.mutationEventListeners.length&&e.forEach(t=>{t.addedNodes.forEach(r=>{if(r.nodeType!==Node.ELEMENT_NODE)return;let i=r;this.mutationEventListeners.forEach(o=>{i.matches(o.selector)?o.listener(i):i.querySelectorAll(o.selector).forEach(a=>{o.listener(a)})})})})}),this.observer.observe(document.body,this.observeOptions)}stopListening(){return this.observer.disconnect(),this.elements}};function rS(n){let e=n.filter(r=>r.addedNodes.length>0).reduce((r,i)=>[...r,...i.addedNodes],[]),t=n.filter(r=>r.type==="attributes"&&r.attributeName==="style"&&r.target instanceof HTMLElement&&/display\s*:\s*none/.test(r.oldValue)&&pa(r.target).visible).map(r=>r.target);return[...e,...t]}l(rS,"poppingElementsFilter");function Bk(n,e){let t=new Set;for(;n;)t.add(n),n=n.parentNode;for(;e;){if(t.has(e))return e;e=e.parentNode}return null}l(Bk,"findCommonAncestor");function wd(n,e){let t=Bk(n,e),r=0,i;if(!t)return 99999;for(i=n;i&&i!==t;)r++,i=i.parentNode;for(i=e;i&&i!==t;)r++,i=i.parentNode;return r}l(wd,"distanceBetweenNodes");var Zs=class{constructor(){this.lastHighlights=[]}static{l(this,"ElementHighlighter")}clearHighlights(){this.lastHighlights.length&&(this.lastHighlights.forEach(e=>e.remove()),this.lastHighlights=[])}highlightElement(e,{highlightStyle:t={},textStyle:r={},mousePosition:i,text:o,textType:a="static",textPosition:u="overlap",textWidthType:f="rect",clear:h=!0,shouldFlipHighlightTextOutsideViewport:p=!0,pointerEvents:g,classNames:y=[],renderDocument:w,scroll:S=!1}={}){if(h&&this.clearHighlights(),!e)return;let E={left:0,top:0,right:0,bottom:0},v=1,M=1;if(w!==e.ownerDocument){let z=e.ownerDocument.defaultView?.frameElement;for(;z&&z.contentDocument!==w;){let re=z.getBoundingClientRect(),B=this.getScaleFromStyles(z);v*=B.scaleX,M*=B.scaleY,E.left+=re.left,E.top+=re.top,z=z.ownerDocument.defaultView?.frameElement}}let A=w??e.ownerDocument,T=vf(e),N=e.getBoundingClientRect(),U={top:N.top*M+E.top,left:N.left*v+E.left};if(!T){let z=A.defaultView?.scrollX||0,re=A.defaultView?.scrollY||0;U.left+=z,U.top+=re}let G=A.createElement("div");if(G.style.outline="2px dashed rgba(255,0,0,.75)",G.style.position=T?"fixed":"absolute",G.style.left=U.left+"px",G.style.top=U.top+"px",G.style.width=N.width*v+"px",G.style.height=N.height*M+"px",G.style.pointerEvents=g??"none",G.style.zIndex="2147483647",G.className=["checksum-dom-cache-ignore",...y].join(" "),this.mergeStyle(G,t),i){let z=A.createElement("div");if(z.style.position="absolute",z.style.left=+i.x-16+"px",z.style.top=+i.y-16+"px",z.style.color="#004DFF",z.className=["checksum-dom-cache-ignore","mouse-cross",...y].join(" "),z.style.zIndex="2147483648",!A.head.querySelector("style[role=mouse-location]")){var Q=A.head.appendChild(A.createElement("style"));Q.setAttribute("role","mouse-location"),Q.innerHTML=".mouse-cross:before, .mouse-cross:after {position: absolute;left: 15px;content: ' ';height: 33px;width: 3px;background-color: #004DFF;}.mouse-cross:before {transform: rotate(0deg);}.mouse-cross:after {transform: rotate(-90deg);}"}A.body.appendChild(z),this.lastHighlights.push(z)}let W=A.createElement("div");o&&(W.className=["checksum-dom-cache-ignore",...y].join(" "),W.innerText=o,W.style.fontSize="12px",W.style.width=f==="rect"?`${N.width}px`:"auto",W.style.background="#000000a1",W.style.color="white",W.style.padding="5px",W.style.position="absolute",W.style.pointerEvents="none",W.style.userSelect="none",u==="above"?W.style.bottom=`${N.height}px`:u==="below"&&(W.style.top=`${N.height}px`),this.mergeStyle(W,r),G.appendChild(W),G.style.pointerEvents=g??"none",a==="hover"&&(W.style.display="none",G.addEventListener("mouseover",()=>{W.style.display="block"}),G.addEventListener("mouseout",()=>{W.style.display="none"}))),A.body.appendChild(G),u==="above"&&wf(W)>0?(W.style.bottom="initial",W.style.top=`${N.height}px`):u==="below"&&Sf(W)>0&&(W.style.top="initial",W.style.bottom=`${N.height}px`),this.lastHighlights.push(G),p&&this.flipHighlightTextPositionOutsideViewport(W,u,N.height),S&&new mt(e).scrollIntoView()}getScaleFromStyles(e){let t=window.getComputedStyle(e),r=t.transform;if(r.startsWith("matrix")){let i=parseFloat(r.split(",")[0].replace("matrix(",""))||1,o=parseFloat(r.split(",")[3])||1;return{scaleX:i,scaleY:o}}else if(t.scale){let i=parseFloat(t.scale)||1,o=parseFloat(t.scale)||1;return{scaleX:i,scaleY:o}}return{scaleX:1,scaleY:1}}mergeStyle(e,t){for(let r in t)e.style[r]=t[r]}flipHighlightTextPositionOutsideViewport(e,t,r){t==="above"&&wf(e)>0?(e.style.bottom="initial",e.style.top=`${r}px`):t==="below"&&Sf(e)>0&&(e.style.top="initial",e.style.bottom=`${r}px`)}},Sd=new Zs;function ql(n,e){return typeof n!="string"?nS(n):`${JSON.stringify(n)}${e?"s":"i"}`}l(ql,"escapeForTextSelector");function Yl(n,e=!1){return typeof n!="string"?nS(n):`"${n.replace(/\\/g,"\\\\").replace(/["]/g,'\\"')}"${e?"s":"i"}`}l(Yl,"escapeForAttributeSelector");function nS(n){return n.unicode||n.unicodeSets?String(n):String(n).replace(/(^|[^\\])(\\\\)*(["'`])/g,"$1$2\\$3").replace(/>>/g,"\\>\\>")}l(nS,"escapeRegexForSelector");var Wk=10,Oi=Wk/2;var Vk=100,Uk=120,Gk=140,zk=160,jk=180,qk=200;var d5=Vk+Oi,p5=Uk+Oi,m5=Gk+Oi,g5=zk+Oi,y5=jk+Oi,b5=qk+Oi;function Ai(n){let e={full:"",immediate:[]};if(!Yk(n)){let t="";if(n instanceof HTMLInputElement&&(n.type==="submit"||n.type==="button"))e={full:n.value,immediate:[n.value]};else{for(let r=n.firstChild;r;r=r.nextSibling)r.nodeType===Node.TEXT_NODE?(e.full+=r.nodeValue||"",t+=r.nodeValue||""):(t&&e.immediate.push(t),t="",r.nodeType===Node.ELEMENT_NODE&&(e.full+=Ai(r).full));t&&e.immediate.push(t),n.shadowRoot&&(e.full+=Ai(n.shadowRoot).full)}}return e}l(Ai,"elementText");function Kl(n){return n.replace(/\u200b/g,"").trim().replace(/\s+/g," ")}l(Kl,"normalizeWhiteSpace");function Yk(n){let e=n.ownerDocument;return n.nodeName==="SCRIPT"||n.nodeName==="NOSCRIPT"||n.nodeName==="STYLE"||e.head&&e.head.contains(n)}l(Yk,"shouldSkipForTextMatching");function Js(n){return n.trim().replace(/([!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~])/g,"\\$1")}l(Js,"escapeSelector");function Wr(n){let e=n.ownerDocument.defaultView;return e!==window&&!e.playwright&&(e.playwright=window.playwright),e.playwright}l(Wr,"getElementWindowPlaywright");var Xl=["role","aria-label","aria-labelledby","aria-checked","checked","placeholder","title","alt","id","data-testid","data-test-id","data-test","class","id","style","href","src","path","type"];function Li(n){return typeof n=="object"&&n!==null&&n.nodeType===Node.ELEMENT_NODE}l(Li,"isElement");var $n={NONE:"",DESCENDANT:" ",CHILD:" > "},He={id:"id",class:"class",tag:"tag",attribute:"attribute",nthchild:"nthchild",nthoftype:"nthoftype"};function iS(n,e){return Object.values(n).includes(e)}l(iS,"isEnumValue");var Kk="CssSelectorGenerator";function Ni(n="unknown problem",...e){console.warn(`${Kk}: ${n}`,...e)}l(Ni,"showWarning");var Xk={selectors:[He.id,He.class,He.tag,He.attribute],includeTag:!1,whitelist:[],blacklist:[],combineWithinSelector:!0,combineBetweenSelectors:!0,root:null,maxCombinations:Number.POSITIVE_INFINITY,maxCandidates:Number.POSITIVE_INFINITY};function Zk(n){return Array.isArray(n)?n.filter(e=>iS(He,e)):[]}l(Zk,"sanitizeSelectorTypes");function Ed(n){return n instanceof RegExp}l(Ed,"isRegExp");function Jk(n){return["string","function"].includes(typeof n)||Ed(n)}l(Jk,"isCssSelectorMatch");function sS(n){return Array.isArray(n)?n.filter(Jk):[]}l(sS,"sanitizeCssSelectorMatchList");function Qk(n){return n instanceof Node}l(Qk,"isNode");function oS(n){let e=[Node.DOCUMENT_NODE,Node.DOCUMENT_FRAGMENT_NODE,Node.ELEMENT_NODE];return Qk(n)&&e.includes(n.nodeType)}l(oS,"isParentNode");function Cd(n,e){if(oS(n))return n.contains(e)||Ni("element root mismatch","Provided root does not contain the element. This will most likely result in producing a fallback selector using element's real root node. If you plan to use the selector using provided root (e.g. `root.querySelector`), it will not work as intended."),n;let t=e.getRootNode({composed:!1});return oS(t)?(t!==document&&Ni("shadow root inferred","You did not provide a root and the element is a child of Shadow DOM. This will produce a selector using ShadowRoot as a root. If you plan to use the selector using document as a root (e.g. `document.querySelector`), it will not work as intended."),t):Qs(e)}l(Cd,"sanitizeRoot");function aS(n){return typeof n=="number"?n:Number.POSITIVE_INFINITY}l(aS,"sanitizeMaxNumber");function lS(n,e={}){let t=Object.assign(Object.assign({},Xk),e);return{selectors:Zk(t.selectors),whitelist:sS(t.whitelist),blacklist:sS(t.blacklist),root:Cd(t.root,n),combineWithinSelector:!!t.combineWithinSelector,combineBetweenSelectors:!!t.combineBetweenSelectors,includeTag:!!t.includeTag,maxCombinations:aS(t.maxCombinations),maxCandidates:aS(t.maxCandidates)}}l(lS,"sanitizeOptions");function vr(n=[]){let[e=[],...t]=n;return t.length===0?e:t.reduce((r,i)=>r.filter(o=>i.includes(o)),e)}l(vr,"getIntersection");function Zl(n){return[].concat(...n)}l(Zl,"flattenArray");function eP(n){return n.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".+")}l(eP,"wildcardToRegExp");function eo(n){let e=n.map(t=>{if(Ed(t))return r=>t.test(r);if(typeof t=="function")return r=>{let i=t(r);return typeof i!="boolean"?(Ni("pattern matcher function invalid","Provided pattern matching function does not return boolean. It's result will be ignored.",t),!1):i};if(typeof t=="string"){let r=new RegExp("^"+eP(t)+"$");return i=>r.test(i)}return Ni("pattern matcher invalid","Pattern matching only accepts strings, regular expressions and/or functions. This item is invalid and will be ignored.",t),()=>!1});return t=>e.some(r=>r(t))}l(eo,"createPatternMatcher");function _i(n,e,t){let r=Array.from(Cd(t,n[0]).querySelectorAll(e));return r.length===n.length&&n.every(i=>r.includes(i))}l(_i,"testSelector");function xd(n,e){e=e??Qs(n);let t=[],r=n;for(;Li(r)&&r!==e;)t.push(r),r=r.parentElement;return t}l(xd,"getElementParents");function cS(n,e){return vr(n.map(t=>xd(t,e)))}l(cS,"getParents");function Qs(n){return n.ownerDocument.querySelector(":root")}l(Qs,"getRootNode");var Jl=", ",uS=new RegExp(["^$","\\s"].join("|")),fS=new RegExp(["^$"].join("|")),Ql=[He.nthoftype,He.tag,He.id,He.class,He.attribute,He.nthchild];var tP=eo(["class","id","ng-*"]);function rP({name:n}){return`[${n}]`}l(rP,"attributeNodeToSimplifiedSelector");function nP({name:n,value:e}){return`[${n}='${e}']`}l(nP,"attributeNodeToSelector");function iP({nodeName:n,nodeValue:e},t){let r=t.tagName.toLowerCase();return["input","option"].includes(r)&&n==="value"||n==="src"&&e?.startsWith("data:")?!1:!tP(n)}l(iP,"isValidAttributeNode");function sP({nodeName:n,nodeValue:e}){return{name:Vr(n),value:Vr(e??void 0)}}l(sP,"sanitizeAttributeData");function Md(n){let e=Array.from(n.attributes).filter(t=>iP(t,n)).map(sP);return[...e.map(rP),...e.map(nP)]}l(Md,"getElementAttributeSelectors");function hS(n){let e=n.map(Md);return vr(e)}l(hS,"getAttributeSelectors");function Td(n){var e;return((e=n.getAttribute("class"))!==null&&e!==void 0?e:"").trim().split(/\s+/).filter(t=>!fS.test(t)).map(t=>`.${Vr(t)}`)}l(Td,"getElementClassSelectors");function dS(n){let e=n.map(Td);return vr(e)}l(dS,"getClassSelectors");function Id(n){var e;let t=(e=n.getAttribute("id"))!==null&&e!==void 0?e:"",r=`#${Vr(t)}`,i=n.getRootNode({composed:!1});return!uS.test(t)&&_i([n],r,i)?[r]:[]}l(Id,"getElementIdSelectors");function pS(n){return n.length===0||n.length>1?[]:Id(n[0])}l(pS,"getIdSelector");function Rd(n){let e=n.parentNode;if(e){let r=Array.from(e.childNodes).filter(Li).indexOf(n);if(r>-1)return[`:nth-child(${String(r+1)})`]}return[]}l(Rd,"getElementNthChildSelector");function mS(n){return vr(n.map(Rd))}l(mS,"getNthChildSelector");function Ad(n){return[Vr(n.tagName.toLowerCase())]}l(Ad,"getElementTagSelectors");function ec(n){let e=[...new Set(Zl(n.map(Ad)))];return e.length===0||e.length>1?[]:[e[0]]}l(ec,"getTagSelector");function Od(n){let e=ec([n])[0],t=n.parentElement;if(t){let i=Array.from(t.children).filter(o=>o.tagName.toLowerCase()===e).indexOf(n);if(i>-1)return[`${e}:nth-of-type(${String(i+1)})`]}return[]}l(Od,"getElementNthOfTypeSelector");function gS(n){return vr(n.map(Od))}l(gS,"getNthOfTypeSelector");function*oP(n=[],{maxResults:e=Number.POSITIVE_INFINITY}={}){let t=0,r=Ld(1);for(;r.length<=n.length&&t<e;)t+=1,yield r.map(o=>n[o]),r=aP(r,n.length-1)}l(oP,"powerSetGenerator");function Nd(n=[],{maxResults:e=Number.POSITIVE_INFINITY}={}){return Array.from(oP(n,{maxResults:e}))}l(Nd,"getPowerSet");function aP(n=[],e=0){let t=n.length;if(t===0)return[];let r=[...n];r[t-1]+=1;for(let i=t-1;i>=0;i--)if(r[i]>e){if(i===0)return Ld(t+1);r[i-1]++,r[i]=r[i-1]+1}return r[t-1]>e?Ld(t+1):r}l(aP,"bumpOffsets");function Ld(n=1){return Array.from(Array(n).keys())}l(Ld,"generateOffsets");function yS(n={}){let e=[];return Object.entries(n).forEach(([t,r])=>{e=r.flatMap(i=>e.length===0?[{[t]:i}]:e.map(o=>Object.assign(Object.assign({},o),{[t]:i})))}),e}l(yS,"getCartesianProduct");var lP="3a".toUpperCase(),cP=/[ !"#$%&'()\[\]{|}<>*+,./;=?@^`~\\]/;function Vr(n=""){return CSS?CSS.escape(n):uP(n)}l(Vr,"sanitizeSelectorItem");function uP(n=""){return n.split("").map(e=>e===":"?`\\${lP} `:cP.test(e)?`\\${e}`:escape(e).replace(/%/g,"\\")).join("")}l(uP,"legacySanitizeSelectorItem");var fP={tag:ec,id:pS,class:dS,attribute:hS,nthchild:mS,nthoftype:gS},hP={tag:Ad,id:Id,class:Td,attribute:Md,nthchild:Rd,nthoftype:Od};function bS(n,e){return hP[e](n)}l(bS,"getElementSelectorsByType");function dP(n,e){let t=fP[e];return t(n)}l(dP,"getSelectorsByType");function pP(n=[],e,t){return n.filter(r=>t(r)||!e(r))}l(pP,"filterSelectors");function mP(n=[],e){return n.sort((t,r)=>{let i=e(t),o=e(r);return i&&!o?-1:!i&&o?1:0})}l(mP,"orderSelectors");function gP(n,e,t){let r=yP(n,t),i=SP(r,t),o=Zl(i);return[...new Set(o)]}l(gP,"getAllSelectors");function yP(n,e){let{blacklist:t,whitelist:r,combineWithinSelector:i,maxCombinations:o}=e,a=eo(t),u=eo(r),f=l((h,p)=>{let g=dP(n,p),y=pP(g,a,u),w=mP(y,u);return h[p]=i?Nd(w,{maxResults:o}):w.map(S=>[S]),h},"reducer");return bP(e).reduce(f,{})}l(yP,"getSelectorsList");function bP(n){let{selectors:e,includeTag:t}=n,r=[...e];return t&&!r.includes("tag")&&r.push("tag"),r}l(bP,"getSelectorsToGet");function vP(n){return n.includes(He.tag)||n.includes(He.nthoftype)?[...n]:[...n,He.tag]}l(vP,"addTagTypeIfNeeded");function wP(n){let{selectors:e,combineBetweenSelectors:t,includeTag:r,maxCandidates:i}=n,o=t?Nd(e,{maxResults:i}):e.map(a=>[a]);return r?o.map(vP):o}l(wP,"combineSelectorTypes");function SP(n,e){return wP(e).map(t=>EP(t,n)).filter(t=>t.length>0)}l(SP,"getTypeCombinations");function EP(n,e){let t={};return n.forEach(i=>{let o=e[i];o&&o.length>0&&(t[i]=o)}),yS(t).map(xP)}l(EP,"constructSelectors");function CP(n,e){return e[n]?e[n].join(""):""}l(CP,"constructSelectorType");function xP(n={}){let e=[...Ql];return n[He.tag]&&n[He.nthoftype]&&e.splice(e.indexOf(He.tag),1),e.map(t=>CP(t,n)).join("")}l(xP,"constructSelector");function MP(n,e){return[...n.map(t=>e+$n.DESCENDANT+t),...n.map(t=>e+$n.CHILD+t)]}l(MP,"generateCandidateCombinations");function TP(n,e){return e===""?n:MP(n,e)}l(TP,"generateCandidates");function IP(n,e,t="",r){let i=gP(n,e,r),o=TP(i,t);for(let a of o)if(_i(n,a,e))return a;return null}l(IP,"getSelectorWithinRoot");function vS(n,e,t="",r){if(n.length===0)return null;let i=[n.length>1?n:[],...cS(n,e).map(o=>[o])];for(let o of i){let a=IP(o,e,t,r);if(a)return{foundElements:o,selector:a}}return null}l(vS,"getClosestIdentifiableParent");function wS(n){(n instanceof NodeList||n instanceof HTMLCollection)&&(n=Array.from(n));let e=(Array.isArray(n)?n:[n]).filter(Li);return[...new Set(e)]}l(wS,"sanitizeSelectorNeedle");function RP(n){return{value:n,include:!1}}l(RP,"createElementSelectorData");function SS(n,e,t=$n.NONE){let r={};return e.forEach(i=>{Reflect.set(r,i,bS(n,i).map(RP))}),{element:n,operator:t,selectors:r}}l(SS,"createElementData");function ES({selectors:n,operator:e}){let t=[...Ql];n[He.tag]&&n[He.nthoftype]&&(t=t.filter(i=>i!==He.tag));let r="";return t.forEach(i=>{var o;((o=n[i])!==null&&o!==void 0?o:[]).forEach(({value:u,include:f})=>{f&&(r+=u)})}),e+r}l(ES,"constructElementSelector");function AP(n){return[":root",...xd(n).reverse().map(r=>{let i=SS(r,[He.nthchild],$n.CHILD);return i.selectors.nthchild.forEach(o=>{o.include=!0}),i}).map(ES)].join("")}l(AP,"getElementFallbackSelector");function CS(n){return n.map(AP).join(Jl)}l(CS,"getFallbackSelector");function _d(n,e={}){var t;let r=wS(n),i=lS(r[0],e),o=(t=i.root)!==null&&t!==void 0?t:Qs(r[0]),a="",u=o;function f(){return vS(r,u,a,i)}l(f,"updateIdentifiableParent");let h=f();for(;h;){let{foundElements:p,selector:g}=h;if(_i(r,g,o))return g;u=p[0],a=g,h=f()}return r.length>1?r.map(p=>_d(p,i)).join(Jl):CS(r)}l(_d,"getCssSelector");var to=l(n=>new Promise(e=>setTimeout(e,n)),"awaitSleep"),MS=l(async(n,e=1e3,t)=>{if(e===null)return n;let r="guard-timed-out",i=l(async()=>(await to(e+1e3),r),"guard"),o=await Promise.race([n,i()]);if(typeof o=="string"&&o===r)throw typeof t=="function"?new Error(t()):new Error(t??"guardReturnTimedOut");return o},"guardReturn");var OP=!1,pn=class n{constructor(e){this.locators=[];this.elements=[];this.locators=e}static{l(this,"LocatorChain")}hasDuplicateFilters(){let e=this.locators.map(t=>t.options?.hasText).filter(t=>t);return e.length!==new Set(e).size}cloneAndAddCandidate(e){return new n([e,...this.locators.slice()])}toLocatorCandidate(){return{selector:this.getSelector(),locator:this.getLocator()}}getSelector(){return this.locators.map(e=>e.selector).join(" >> ")}getLocator(){return this.locators.map(e=>e.locator).join(".")}},mn=class n{constructor(e=document){this.rootNode=e;this.MAX_TESTING_SELECTORS=50;this.MAX_SINGLE_ELEMENT_SELECTORS=5;this.MAX_PROCESSING_TIME=15e3;this.MAX_MULTICANDIDATE_PROCESSING=5}static{l(this,"PlaywrightCustomLocatorGenerator")}async generate(e,t=[],r={}){let{isPartOfListItem:i,isForContextElement:o,useTextContent:a,addCSSSelectorGenerator:u,expandCSSKeyElements:f,bruteForceMode:h}={isPartOfListItem:!1,isForContextElement:!1,useTextContent:!0,addCSSSelectorGenerator:!0,expandCSSKeyElements:!0,bruteForceMode:!1,...r};if(Xe(e,"HTMLOptionElement")&&e.closest("select"))return this.generate(e.closest("select"),t,{isPartOfListItem:i});this.targetElement=e,this.startTimestamp=Date.now();let p=[];for(t=t.filter(y=>Array.from(document.querySelectorAll(y.selector)).includes(y.element)),f&&this.expandCSSKeyFeatures(e,t);e&&e!==this.rootNode;){await to(0);let y=this.getAllLocators(e,t,{useTextContent:a,bruteForceMode:h}),w=[],S=l(async E=>{if(!E.hasDuplicateFilters())try{await to(0);let{elements:v}=this.getLocatorBase(e).locator(E.getSelector());v?.some(M=>M===this.targetElement)&&(E.elements=v.filter(M=>dn(M)||M.constructor.name===this.targetElement.constructor.name),w.push(E))}catch(v){console.log(v,E.getSelector())}},"testCandidate");if(p.length)for(let E of y)for(let v of p)await S(v.cloneAndAddCandidate(E));else for(let E of y)await S(new pn([E]));if(w.length===0&&p.length===0){let E=e.tagName.toLowerCase();p.push(new pn([{selector:E,locator:this.getSelectorLocator(E),elements:this.getLocatorBase(e).locator(e.tagName.toLowerCase()).elements.filter(v=>dn(v))}]))}if(p.push(...w),o)return p.map(E=>E.toLocatorCandidate());if(p.length>this.MAX_TESTING_SELECTORS||p.filter(E=>E.elements.length===1).length>this.MAX_SINGLE_ELEMENT_SELECTORS||this.checkTimeout(!1))break;e=e.parentElement}if(i){let y=this.filterListItemsSelectors(p);if(y?.length)return y.map(w=>({...w.toLocatorCandidate(),isListSelector:!0}))}let g=[];try{for(let y of p)this.checkTimeout(),g.push(...y.elements.length===1?[y]:await this.reduceMultiCandidates(y))}catch(y){y instanceof rn&&console.warn("[PlaywrightCustomLocatorGenerator] Timeout error")}if(!g?.length&&(console.log("no single element selector found"),!f))return this.generate(e,t,{isPartOfListItem:i,isForContextElement:o,useTextContent:a,addCSSSelectorGenerator:!0,expandCSSKeyElements:!0});if(u){let y=await this.addCSSSelectorGenerator();y&&g.unshift(y)}if(this.rootNode===document&&a){let{selector:y,locator:w}=await new Mt().getSelectorAndLocator(this.targetElement);g.unshift(new pn([{selector:y,locator:w}]))}return g=g.concat(await this.addOptionalParentSelector(a,u,f)),Array.from(new Map(g.map(y=>[y.toLocatorCandidate().selector,y.toLocatorCandidate()])).values())}testSelector(e,t,r,i=!0){let o=Wr(t).selector(t),a=this.getLocatorBase(t).locator(o);console.log("Locator result",a);let u=l(h=>i&&(h.elements.length!==1||t!==h.element)?!1:!!h.elements.includes(t),"testResult");if(!u(a))return{valid:!1};let f={};if(r?.locatorWithVars?.length)try{let p=new Function(`{ return function(element) { ${r.variablesCode}; return this.getLocatorBase(element).locator(\`${r.locatorWithVars}\`); } }`)().call(this,t);if(console.log("Locator with vars result",p),!u(p))return{valid:!1};f={selectorWithVars:o,locatorWithVars:r.locatorWithVars}}catch(h){return console.error("Error testing selector with variables",h.message),{valid:!1}}return{valid:!0,selector:o,locator:e,...f}}async addCSSSelectorGenerator(){try{let e=this.rootNode===document?{}:{root:this.rootNode},t=await MS(new Promise(r=>{let i=_d(this.targetElement,e);r(i)}),2e3);if(t.length<50)return new pn([{selector:t,locator:`locator('${t}')`}])}catch(e){console.error("Error getting CSS selector",e)}}async addOptionalParentSelector(e,t,r){try{let i=Wr(this.targetElement),o=i.locator(i.selector(this.targetElement)).element;if(o!==this.targetElement&&o?.contains(this.targetElement))return(await this.generate(o,[],{isPartOfListItem:!1,isForContextElement:!1,useTextContent:e,addCSSSelectorGenerator:t,expandCSSKeyElements:r})).map(({selector:a,locator:u})=>new pn([{selector:a,locator:u}]))}finally{return[]}}expandCSSKeyFeatures(e,t,r=4){try{let i=[];for(;e&&e!==this.rootNode&&i.length<r&&e!==document.documentElement;)Array.from(e.attributes).filter(({name:a,value:u})=>u.length<30&&!Xl.includes(a)).forEach(a=>{try{if(i.length>r-1)return;let u=`[${a.name}${a.value?`="${a.value}"`:""}]`;try{if(!e.parentElement||e.parentElement.querySelectorAll(u).length>1)return}catch{console.warn(`Error checking selector - ${u}, continuing`);return}if(!t.some(f=>f.selector.includes(u))&&this.getLocatorBase(e).locator(u).element===e){let f={element:e,selector:u};t.push(f),i.push(f)}}catch(u){console.warn("Error processing css key feature",{name:a.name,value:a.value},u)}}),e=e.parentElement;i.length}catch(i){console.error("Error extracting CSS key features",i)}}async generateArbitraryItemListSelector(e,t=[]){console.log("generateArbitraryItemListSelector",e);try{let r=br(document.body,{nodeRepetitionsThreshold:5});if(!r?.length)throw new Error("No templates found in the page");let i=r.find(y=>y.element.contains(e));if(!i)throw new Error("No template found for target element");console.log("Found template for target element",i);let o=await new n().generate(i.element,t,{isPartOfListItem:!1,isForContextElement:!1,useTextContent:!1});console.log("baseCustomSelectors",o);let a=o[0].selector,u=this.getSelectorLocator(a,i.element);console.log("Randomly selected baseSelector",a);let f=l(()=>{let y=[],w=new Hn,S=e;for(;S&&S!==i.element;){let E="",v=!1,M=!1,A=!1;for(;!E.length;)E=w.getSelectorPart(S,{useClasses:M,useId:v,useTag:A}),v?(M=!0,A=!0):v=!0;y.push({selector:E,element:S}),S=S.parentElement}return y},"getCSSFeatures"),h=f();console.log("cssFeatures",h);let p=(await new n(i.element).generate(e,f(),{isPartOfListItem:!0,isForContextElement:!1,useTextContent:!1})).map(y=>({...y,elements:[]})),g=p.filter(y=>(y.elements=this.getLocatorBase(e).locator(a).locator(y.selector).elements,y.elements.length>Math.ceil(i.element.children.length*.7)));return console.log("elementSelectors",p),g.map(({selector:y,locator:w})=>({selector:`${a} >> ${y}`,locator:`${u}.${w}`}))}catch(r){console.error("[findGenericItemListSelector] error",r)}}filterListItemsSelectors(e){try{let t=br(document.body,{nodeRepetitionsThreshold:5});if(!t?.length)throw new Error("No templates found in the page");return e.filter(r=>{if(r.elements.length<2)return!1;let i=new Hn().getSmallestCommonRoot(r.elements);return!(!t.some(o=>o.element===i)||Array.from(i.children).some(o=>{r.elements.filter(a=>o.contains(a)).length>1}))})}catch(t){console.error("[filterListItemsSelectors] error",t.message)}}getLocatorBase(e){let t=Wr(e);return this.rootNode===document||this.rootNode.nodeType===9?t:t.locator(t.selector(this.rootNode))}getSelectorLocator(e,t){return Wr(t??this.targetElement).asLocator("javascript",e)}async reduceMultiCandidates(e){await to(0);let{elements:t}=e,r=e.getSelector().split(" >> "),i=[],o=this.getLocatorBase(this.targetElement),a=l(p=>{try{return i.push(new pn([{selector:p,locator:this.getSelectorLocator(p)}])),i.length>=this.MAX_MULTICANDIDATE_PROCESSING}catch(g){return console.error(g),!1}},"addCandidateWithSelector"),u=l(p=>e.getSelector()+(r[r.length-1]===this.targetElement.tagName.toLowerCase()?p:` >> internal:and=${LP(this.targetElement.tagName.toLowerCase()+p)}`),"addCSSFilterToLocator"),f=l(p=>o.locator(p).elements.length===1?a(p):!1,"addIfSingularAndCheckLimit");if(t.length<5){let p=t.indexOf(this.targetElement);p!==-1&&a(e.getSelector()+` >> nth=${p}`)}let h=this.targetElement.parentElement;if(t.every(p=>p.parentElement===h&&p.tagName===this.targetElement.tagName)){let p=Array.from(h.children).indexOf(this.targetElement);if(p!==-1){let g=u(`:nth-child(${p+1})`);f(g)&&a(g)}}for(let p of Array.from(this.targetElement.classList).filter(g=>!hr.includes(g))){let g=u(`.${Js(p)}`);try{if(f(g))return i}catch(y){console.error(y)}}for(let p of Array.from(this.targetElement.attributes).filter(g=>!Xl.includes(g.name))){let g=u(`[${p.name}`+(p.value?`="${p.value}"]`:"]"));try{if(f(g))return i}catch(y){console.error(y)}}return i}getAllLocators(e,t,r={}){r={exact:!0,useTextContent:!0,...r};let i=[this.getByRoleLocator(e,r),r.useTextContent?this.getByTextLocator(e,r):null,this.getByLabelLocator(e,r),this.getByPlaceholderLocator(e,r),this.getByTitleLocator(e,r),this.getByAltLocator(e,r),this.getTestIdLocator(e,r),...e===this.targetElement?[this.getInnerFeaturesLocator(e)]:[],...t.filter(o=>o.element===e).map(o=>({selector:o.selector,locator:this.getSelectorLocator(o.selector)}))].filter(o=>o);return!i.length&&r.bruteForceMode?i.concat(this.findUniqueCSSLocatorForElement(e)):i}findUniqueCSSLocatorForElement(e,t=5){let r=[],i=l(o=>(r.push([{selector:o,locator:`locator('${o}')`}]),r.length>=t),"addCandidate");for(let o of Array.from(e.attributes).filter(({name:a,value:u})=>u.length<30&&!Xl.includes(a)))try{let a=`[${o.name}${o.value?`="${o.value}"`:""}]`;if(e.ownerDocument.querySelectorAll(a).length===1&&i(a))return r}catch{}for(let o of Array.from(e.classList).filter(a=>!hr.includes(a)))try{let a=`.${Js(o)}`;if(e.ownerDocument.querySelectorAll(a).length===1&&i(a))return r}catch{}return r}getInnerFeaturesLocator(e){let t=e.tagName.toLowerCase();if(!dn(e)||["html","body","div"].includes(t))return;let r=new kr().extract(e).filter(o=>!o.isRoot).slice(0,4).map(o=>ai(o).pop());if(r.length<2)return;let i=t+r.map(o=>`:has(${o})`).join("");return{selector:i,locator:this.getSelectorLocator(i)}}getByRoleLocator(e,t={}){try{if(!dn(e))throw new Error("Provided element is not an HTMLElement");let r={},i={button:"button",input:l(w=>w.type==="checkbox"?"checkbox":w.type==="radio"?"radio":"textbox","input"),select:"listbox",a:"link",h1:"heading",h2:"heading",h3:"heading",h4:"heading",h5:"heading",h6:"heading",li:"listitem",option:"option",textarea:"textbox",table:"table",tr:"row",th:"columnheader",td:"cell",img:"img"},o=e.tagName.toLowerCase(),a=e.getAttribute("role")||(i[o]instanceof Function?i[o](e):i[o]);if(!a)return;let u=[];if(a==="heading"&&!e.hasAttribute("aria-level")){let w=parseInt(o.charAt(1),10);u.push(["level",String(w)])}(a==="checkbox"||a==="radio")&&u.push(["checked",String(e.getAttribute("aria-checked")??e.getAttribute("checked")??"false")]);let f=l(()=>{let w=l(T=>this.limitTextLength(this.normalize(T),t.exact),"normalize"),S={text:"",exact:!1},E=e.getAttribute("aria-label")??e.getAttribute("aria-labelledby")??e.getAttribute("title");if(E)return w(E);let v=Ai(e),M=Kl(v.full);if(!M?.length)return S;let A=w(M);return r.hasText=A.text,A},"getAccessibleName"),{text:h,exact:p}=f();h&&h.length>0&&h.length<30&&u.push(["name",Yl(h,p)]);let g=l(()=>{let w=`internal:role=${a}${u.map(([S,E])=>`[${S}=${E}]`).join("")}`;return{locator:this.getSelectorLocator(w),selector:w,options:r}},"getSelection"),y=g();if(h?.length&&p&&!this.getLocatorBase(e).locator(y.selector).elements.includes(e)){let w=u.find(S=>S[0]==="name");w&&(w[1]=Yl(h,!1),y=g())}return y}catch(r){console.error("Error getting role locator",r.message)}}getByTextLocator(e,t={}){try{if(!dn(e))return;let r=Kl(Ai(e).full);if(!r?.length||r.length>100)return;let i={};if(Array.from(e.children).filter(u=>dn(u)).some(u=>Kl(Ai(u).full)===r)){i.hasText=r;let u=`${e.tagName.toLowerCase()} >> internal:has-text=${ql(r,!1)}`;return{selector:u,locator:this.getSelectorLocator(u),options:i}}let o=l(u=>{let h="internal:text="+ql(r,u);return{selector:h,locator:this.getSelectorLocator(h),options:i}},"getSelection"),a=o(t.exact);return t.exact&&!this.getLocatorBase(e).locator(a.selector).elements.includes(e)&&(a=o(!1)),a}catch{}}getByLabelLocator(e,t={}){try{if(!dn(e)||!["input","textarea","select"].includes(e.tagName.toLowerCase()))return;let r=l(u=>({selector:`internal:label=${ql(u,t.exact)}`,locator:`getByLabel('${u}')`}),"respond"),i=e.getAttribute("aria-label");if(i)return r(i);let o=e.getAttribute("aria-labelledby");if(o){let u=document.getElementById(o);if(u){let f=u.innerText.trim();if(f)return r(f)}}let a=e.getAttribute("id");if(a){let u=document.querySelector(`label[for="${a}"]`);if(u){let f=u.innerText.trim();if(f)return r(f)}}}catch{}}getByPlaceholderLocator(e,t={}){if(["input","textarea"].includes(e.tagName?.toLowerCase()))return this.getByAttributeLocator(e,"placeholder",t)}getByTitleLocator(e,t={}){return this.getByAttributeLocator(e,"title",t)}getByAltLocator(e,t={}){return this.getByAttributeLocator(e,"alt",t)}getTestIdLocator(e,t={}){for(let r of["data-testid","data-test-id","data-test"])if(e.getAttribute(r))return this.getByAttributeLocator(e,r,{...t,locatorName:"getByTestId"})}getByAttributeLocator(e,t,r={}){try{if(!dn(e))return;let i=e.getAttribute(t);if(i)return{selector:`internal:attr=[${t}=${Yl(i,r.exact)}]`,locator:(r.locatorName??`getBy${t.charAt(0).toUpperCase()+t.slice(1)}`)+`('${i}')`}}catch{}}normalize(e){return e.replace(/\n/g,"").replace(/[ \t]+/g," ").trim()}limitTextLength(e,t=!0,r=30){for(;e?.length>30&&e.length<100&&e.includes(" ");)e=e.split(" ").slice(0,-1).join(" "),t=!1;return{text:e,exact:t}}checkTimeout(e=!0){if(OP)return!1;if(this.MAX_PROCESSING_TIME&&Date.now()-this.startTimestamp>this.MAX_PROCESSING_TIME){if(e)throw new rn;return!0}}};function LP(n,e=!1){return`"${n.replace(/\\/g,"\\\\").replace(/["]/g,'\\"')}"`}l(LP,"escapeForAndLocator");function dn(n){return Xe(n,"HTMLElement")}l(dn,"isInstanceOfHTMLElement");function TS(n=document,e){try{let r=function(a){let u=a.nodeName.toLowerCase(),f=!1;if(["name","label","aria-label","data-testid","role"].forEach(h=>{a.hasAttribute(h)&&(u+=`[@${h}="${a.getAttribute(h)}"]`,f=!0)}),!f){let h=1,p=a.previousSibling;for(;p;)p.nodeType===Node.ELEMENT_NODE&&p.nodeName===a.nodeName&&h++,p=p.previousSibling;h>1&&(u+=`[${h}]`)}return u};var t=r;if(l(r,"getNodeIdentifier"),!n||!e||!n.contains(e))throw new Error("Child is not a descendant of the given element.");let i=[],o=e;for(;o!==n;)o.nodeType===Node.ELEMENT_NODE&&i.unshift(r(o)),o=o.parentElement;return i.join("/")}catch(r){console.error("Failed to get relative xpath",r);return}}l(TS,"getRelativeXPath");function IS(n,e){return[new XPathEvaluator().evaluate(e,n,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue].filter(i=>i instanceof HTMLElement)}l(IS,"findElementsByXPath");var Hn=class{constructor(e){this.htmlReducer=e;this.BASE_MAX_COMPONENTS_FOR_SELECTOR_COMBINATION=13;this.MAX_SELECTORS_PER_CONTEXT_ELEMENT=10;this.innerFeaturesExtractor=new kr;this.innerTextExtractor=new ci}static{l(this,"CompoundSelector")}filter(e,{isPartOfListItem:t=!1}={}){e.forEach(u=>{u.element=this.htmlReducer.getElementForChecksumId(u.selection.checksumid)});let r=e.splice(e.findIndex(u=>u.isTarget),1)[0],i=e.filter(u=>!!u.element&&!u.element.contains(r.element)&&!r.element.contains(u.element)&&!e.some(f=>f!==u&&(f.element===u.element||f.element.contains(u.element)))).concat(r);if(console.log(`filtered context elements, ${e.length+1} > ${i.length}`),!t)return i;let o=br(document.body,{nodeRepetitionsThreshold:4});if(!o?.length)return[];let a=o.find(u=>u.element.contains(r.element));return a?(console.log("Found template for target element",a),i.filter(u=>a.element.contains(u.element))):[]}async generate(e,{isPartOfListItem:t=!1}={}){let r=e.filter(a=>a.isTarget)[0];if(e=this.filter(e,{isPartOfListItem:t}),e.length<2)throw new Error("Not enough elements found for the given checksum ids");if(!r?.element)throw new Error("Target element not found");let i=this.getSmallestCommonRoot(e.map(a=>a.element));if(!i)throw new Error("No common root found for the given elements");return this.extractFeaturesMetadata(e),{targetSelection:{xpath:TS(i,r.element),cssSelectors:this.generateAllContextualSelectors(i,r.element).filter(a=>a&&a.trim().length>0),playwrightSelectors:await new mn(i).generate(r.element,[],{addCSSSelectorGenerator:!1,expandCSSKeyElements:!1}),featuresMetadata:r.featuresMetadata},contextElements:e}}async select(e,t){e.forEach(o=>{if(o.find(a=>!a||!a.isConnected))throw new Error("One or more context elements are not connected to the DOM")});let r=l((o,a)=>{try{return o.selector(a)}catch{let f=a.ownerDocument.defaultView.parent?.document?.defaultView?.playwright;if(f)try{return f.selector(a)}catch{return}return}},"getElementSelector"),i=this.getSmallestCommonParents(e).map(this.calculateElementSize).sort((o,a)=>o.size-a.size).map(o=>o.element);return t?i.map(o=>{let a=Wr(o),{element:u}=a.locator(r(a,o)).locator(t);return u?r(a,u):null}).filter(o=>o):i.map(o=>{let a=Wr(o);if(!a){console.warn("Failed getting playwright for element",o);return}return r(a,o)}).filter(o=>o)}async selectFromMetadata(e){let{contextElements:t}=e;t.forEach(i=>this.getSelectorCandidatesForContextElement(i));let r=ya(t.map(i=>i.candidatesSelectors.map((o,a)=>a)));for(let i of r){t.forEach((a,u)=>a.selector=a.candidatesSelectors[i[u]]);let o=this.getSmallestCommonParentsFromMetadata(t).map(this.calculateElementSize).sort((a,u)=>a.size-u.size).map(a=>a.element);for(let a of o){let u=this.generateTargetSelectotionHistogram(a,e.targetSelection);if(u.size>0)return Array.from(u.keys()).slice(0,20).map(h=>Wr(h).generateSelectorAndLocator(h))}}}generateTargetSelectotionHistogram(e,t){let r=new Map,i=l(o=>{o.filter(a=>a instanceof HTMLElement).forEach(a=>{r.set(a,(r.get(a)||0)+1)})},"addElementstoHistogram");if(t.xpath)try{i(IS(e,t.xpath))}catch{}return t.cssSelectors.forEach(o=>{try{i(pe(o,e))}catch{}}),new Map([...r.entries()].sort((o,a)=>a[1]-o[1]))}calculateElementSize(e){let t=e.getBoundingClientRect();return{element:e,size:t.width*t.height}}buildSelectorForContextElement(e,{useTag:t=!0,useInnerFeatures:r=!0,useClasses:i=!0,useAttributes:o=!0}){let a=t?e.featuresMetadata.tag:"";i&&e.featuresMetadata.classes.length&&(a+="."+e.featuresMetadata.classes.map(u=>u.trim().replace(/([!\"#$%&'()*+,./:;<=>?@[\\\]^`{|}~])/g,"\\$1")).join(".")),o&&(a+=Object.entries(e.featuresMetadata.attributes).map(([u,f])=>`[${u}="${f}"]`).join("")),r&&(a+=e.featuresMetadata.innerFeatures.filter(u=>!u.isRoot).map(u=>`:has(${ai(u)})`).join("")),e.selector=a}getSelectorCandidatesForContextElement(e){let t=this.buildSelectorsCombination(e.featuresMetadata);e.candidatesSelectors=[];for(let r=0;r<t.length&&e.candidatesSelectors.length<this.MAX_SELECTORS_PER_CONTEXT_ELEMENT;r++)document.querySelector(t[r])&&e.candidatesSelectors.push(t[r])}buildSelectorsCombination(e){let t=this.BASE_MAX_COMPONENTS_FOR_SELECTOR_COMBINATION,r=l(y=>{let w=[[]];for(let S=0;S<y.length;S++){let E=w.length;for(let v=0;v<E;v++)w.push(w[v].concat(y[S]))}return w},"getCombinations"),i=l(y=>y.trim().replace(/([!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~])/g,"\\$1"),"escapeSelector"),o=e.tag,a=e.innerFeatures.filter(y=>!y.isRoot).map(y=>`:has(${ai(y)})`).slice(0,4),u=e.classes.map(y=>`.${i(y)}`),f=Object.entries(e.attributes).map(([y,w])=>`[${y}="${i(w)}"]`),h=l(()=>a.length+1+u.length+f.length>t,"exceedsMaxLength");for(;h()&&(u.pop(),!!h());)f.pop();let p=r([...u,...f,...a]),g=p.map(y=>[o,...y]);return p.push(...g),p.map(y=>y.join("")).filter(y=>y).sort((y,w)=>w.length-y.length)}extractFeaturesMetadata(e){e.forEach(t=>{t.featuresMetadata={id:t.element.getAttribute("id")??void 0,tag:t.element.tagName.toLowerCase(),innerText:this.innerTextExtractor.extract(t.element),innerFeatures:this.innerFeaturesExtractor.extract(t.element),classes:Array.from(t.element.classList).filter(r=>!hr.includes(r))||[],attributes:Array.from(t.element.attributes).reduce((r,i)=>(["class","style","id"].includes(i.name)||(r[i.name]=i.value),r),{})}})}generateAllContextualSelectors(e,t){let r=[],i=[!0,!1];for(let a of i)for(let u of i)for(let f of i)r.push({useId:a,useClasses:u,useTag:f});let o=r.map(a=>this.createContextualSelector(e,t,a)).filter(a=>a).filter(a=>{try{let u=pe(a,e);return u.length===1&&u[0]===t}catch{return!1}});return[...new Set(o)]}createContextualSelector(e,t,{useId:r=!1,useClasses:i=!0,useTag:o=!0}){if(!e||!t)return null;let a=[],u=t;for(;u&&u!==e;)a.unshift(this.getSelectorPart(u,{useId:r,useClasses:i,useTag:o})),u=u.parentElement;return u?a.join(" ").trim():null}getSelectorPart(e,{useId:t=!1,useClasses:r=!0,useTag:i=!0}){if(t&&e.id&&e.id.match(/^\D/))return`#${e.id}`;let o=i?e.tagName.toLowerCase():"";if(r&&e.className){let a=e.className.trim().split(/\s+/).filter(u=>!hr.includes(u)).map(Js).join(".");a.length>0&&(o+="."+a)}return["name","label","aria-label","data-testid","role"].forEach(a=>{e.hasAttribute(a)&&(o+=`[${a}="${e.getAttribute(a)}"]`)}),o.trim()}getSmallestCommonRoot(e){let t=l(i=>{let o=[];for(;i;)o.push(i),i=i.parentElement;return o},"getAncestors"),r=t(e[0]);for(let i=1;i<e.length;i++){let o=t(e[i]);r=r.filter(a=>o.includes(a))}return r.length>0?r[0]:null}getSmallestCommonParentsFromMetadata(e){let t=e.map(r=>{try{let i=pe(r.selector);return r.selection.type==="content"?i.filter(o=>o.textContent===r.selection.value):i}catch{return[]}});return t.some(r=>r.length===0)?[]:this.getSmallestCommonParents(t)}getSmallestCommonParents(e){let t=new Set;ya(e).forEach(o=>{let a=this.getSmallestCommonRoot(o);a&&t.add(a)});let i=Array.from(t);return i.filter(o=>!i.some(a=>o!==a&&o.contains(a)))}};var tc=class{constructor(){this.MAX_SNIPPET_SIZE=12e3;this.MAX_LIONTAIL_SIZE=6e3;this.MAX_ATTRIBUTE_SIZE=100}static{l(this,"ParentChainReducer")}async reduce(e,t={useLionTail:!0,useChecksumIds:!0}){if(console.log("[ParentChainReducer] will reduce",e),!Xe(e,"HTMLElement")&&!Xe(e,"SVGElement"))throw new Error("Element is not an HTMLElement");return{reducedHTML:this.getAncestorsHTMLSnippet(e,t)}}getElementForChecksumId(e){return this.elementsInSimplifiedDomByChecksumId[e]}getAncestorsHTMLSnippet(e,{useLionTail:t=!0,useChecksumIds:r=!0}={}){this.elementsInSimplifiedDomByChecksumId={};let i=this.MAX_LIONTAIL_SIZE,o=this.MAX_ATTRIBUTE_SIZE,a=[],u=e;e.setAttribute("checksum-selected","true");try{for(;u;)a.push(u),u.parentNode&&u.parentNode instanceof ShadowRoot?u=u.parentNode.host:u=u.parentElement;a.reverse();let f=l(y=>{for(let w=y.attributes.length-1;w>=0;w--){let S=y.attributes[w];S.name.length+S.value.length>o&&y.removeAttribute(S.name)}return y},"normalizeNode"),h,p=new Ii;do{h=a[0].cloneNode(!1);let y=h,w=ds(h);for(let S=1;S<a.length;S++){if(t){let v=ds(a[S]).length;if(v<=i&&w.length+v<=this.MAX_SNIPPET_SIZE){let M=this.deepCloneNode(a[S],r?p:void 0);y.appendChild(M);break}}let E=f(a[S].cloneNode(a[S]===e));if(r){let v=p.getAndIncrement();E.setAttribute("checksumid",v),this.elementsInSimplifiedDomByChecksumId[v]=a[S]}y.appendChild(E),y=E}i=Math.max(i-10,0),o=Math.max(o-10,0)}while(h.outerHTML.length>this.MAX_SNIPPET_SIZE&&o>0);return this.filterNodeClasses(h),ds(h,{limitAttributeLength:!0})}catch(f){console.error("Error while getting ancestors HTML snippet",f)}finally{e.removeAttribute("checksum-selected")}}deepCloneNode(e,t){let r=e.cloneNode(!1),i=[e],o=[r];for(;i.length;){let a=i.shift(),u=o.shift();for(let f=0;f<a.childNodes.length;f++){let h=a.childNodes[f],p=h.cloneNode(!1);if(u.appendChild(p),t&&Xe(h,"HTMLElement")){let g=t.getAndIncrement();p.setAttribute("checksumid",g),this.elementsInSimplifiedDomByChecksumId[g]=h}i.push(h),o.push(p)}}return r}filterNodeClasses(e){let t=l(r=>{if("classList"in r){let i=r,o=i.classList;for(let a=0;a<o.length;a++){let u=o[a];hr.includes(u)&&i.classList.remove(u)}for(let a=0;a<i.children.length;a++)t(i.children[a])}},"filterClasses");t(e)}};var rc=class{static{l(this,"FilesObserver")}constructor(e){this.fileInputsWithListeners=new Set,this.filesMap={},this.observer=null,this.sessionMirror=e}async getFilesByRrwebId(e){let t=this.filesMap[e]??[];try{let r=await Promise.all(t.map(async i=>({data:await NP(i),fileName:i.name})));return this.filesMap[e]=[],r}catch{console.log("Error while parsing files to base 64")}}init(){console.log("Starting observation..."),console.log(this.sessionMirror),this.observeDOMChanges(),window.addEventListener("unload",this.cleanup.bind(this))}handleFileChange(e){console.log("handleFileChange",this.sessionMirror);let t=e.target,r=Array.from(t.files||[]),i=this.sessionMirror.getMeta(t);this.filesMap[i.id]=r,console.log(`Files updated for ID: ${i.id}`,r)}addFileInputListeners(e){e.forEach(t=>{this.fileInputsWithListeners.has(t)||(t.addEventListener("change",this.handleFileChange.bind(this)),this.fileInputsWithListeners.add(t))})}observeDOMChanges(){let e=window.document,t=e.querySelectorAll('input[type="file"]');this.addFileInputListeners(t);let r=l(()=>{this.observer=new MutationObserver(o=>{o.forEach(a=>{if(a.type==="childList"){let u=a.target.querySelectorAll('input[type="file"]');this.addFileInputListeners(u)}})}),this.observer.observe(e.body,{childList:!0,subtree:!0})},"onBodyReady"),i=new MutationObserver(function(){e.body&&(i.disconnect(),r())});i.observe(e.documentElement,{childList:!0,subtree:!0})}cleanup(){console.log("Cleaning up files observer..."),this.observer&&this.observer.disconnect(),this.fileInputsWithListeners.forEach(e=>{e.removeEventListener("change",this.handleFileChange)}),this.fileInputsWithListeners.clear(),this.filesMap={}}},NP=l(n=>new Promise((e,t)=>{let r=new FileReader;r.onloadend=()=>{r.result?e(r.result.toString()):t(new Error("File reading failed"))},r.onerror=()=>{t(new Error("File reading failed"))},r.readAsDataURL(n)}),"convertFileToBase64");var nc=class{constructor(e){this.sessionRecorder=e}static{l(this,"NativeDialogObserver")}init(){this.overrideDialog("alert"),this.overrideDialog("confirm"),this.overrideDialog("prompt")}overrideDialog(e){let t=window[e].bind(window);window[e]=r=>{let i=t(r),o=this.determineDialogAction(i,e);return this.sessionRecorder.addCustomEvent("native-dialog-event",{dialogType:e,dialogMessage:r,dialogResult:i,dialogAction:o}),i}}determineDialogAction(e,t){if(t==="alert")return"native_accept";if(t==="confirm")return e?"native_accept":"native_dismiss";if(t==="prompt")return e?"native_accept":"native_dismiss"}};var Di=class n{constructor({rootDocument:e=document,getRenderDocument:t=l(p=>p?.document,"getRenderDocument"),defaultView:r,topLevelInspector:i,rootDocumentForSelectorGenerator:o,eventName:a,iframeSelector:u,getNodeById:f,getNodeRrwebId:h}={}){this.wasHoveredElementSelected=!1;this.selected=[];this.singleSelection=!0;this.subDocumentInspector=null;this.listening=!1;this.locatorCache=Dd.getInstance();this.onMouseOut=l(e=>{this.elementHighlighter.clearHighlights()},"onMouseOut");this.onMouseOver=l(async e=>{let t=e.composedPath()[0];if("getRootNode"in t){let i=t.getRootNode();if(i!==this.rootDocument){this.handleSubDocument(i,this.defaultView);return}}if(Xe(t,"HTMLIFrameElement")){this.handleSubDocument(t.contentDocument,t.contentDocument.defaultView);return}if(this.subDocumentInspector&&this.stopSubDocumentInspector(!0),!Xe(t,"HTMLElement"))return;let r=t;if(!(r===this.hoveredElement||r.matches(".element-inspector-ignore"))){this.elementHighlighter.clearHighlights(),this.hoveredElement&&(this.hoveredElement.removeEventListener("click",this.onClick,{capture:!0}),this.hoveredElement.removeEventListener("mousedown",this.onClick,{capture:!0}));try{let{locator:i,selector:o,parentFramesSelectors:a,locatorRrwebId:u}=await this.getInspectedElementSelection(r,this.rootDocumentForSelectorGenerator);if(this.elementHighlighter.highlightElement(r,{text:i.replace("frameLocator('iframe').",""),textPosition:"below",textWidthType:"auto",pointerEvents:"none",classNames:["element-inspector-ignore"],renderDocument:this.getRenderDocument(this.defaultView)}),u){let f=this.getNodeById(u);f&&this.elementHighlighter.highlightElement(f,{clear:!1,pointerEvents:"none",classNames:["element-inspector-ignore"],renderDocument:this.getRenderDocument(this.defaultView)})}this.hoveredElement=r,this.hoveredElementSelection={locator:i,selector:o,parentFramesSelectors:a},this.wasHoveredElementSelected=!1,t.addEventListener("click",this.onClick,{capture:!0})}catch(i){console.error("Error inspecting element",i.message)}}},"onMouseOver");this.onClick=l(async e=>{e.stopPropagation(),e.preventDefault(),!this.wasHoveredElementSelected&&(this.wasHoveredElementSelected=!0,this.selected.push(this.hoveredElementSelection),this.singleSelection&&(this.topLevelInspector?this.topLevelInspector.stop():this.stop()),window.parent.postMessage({type:this.eventName,data:this.selected.at(this.selected.length-1)},"*"))},"onClick");this.onGlobalKeyDown=l(async e=>{let t=e;if((t.key==="Enter"||t.key===" ")&&this.hoveredElement){if(e.stopPropagation(),e.preventDefault(),this.wasHoveredElementSelected)return;this.wasHoveredElementSelected=!0,this.selected.push(this.hoveredElementSelection),this.singleSelection&&(this.topLevelInspector?this.topLevelInspector.stop():this.stop()),window.parent.postMessage({type:this.eventName,data:this.selected.at(this.selected.length-1)},"*")}},"onGlobalKeyDown");this.handleSubDocument=l((e,t)=>{if(this.subDocumentInspector){if(this.subDocumentInspector.rootDocument===e)return!0;this.stopSubDocumentInspector(!0)}return this.subDocumentInspector=new n({rootDocument:e,defaultView:t,topLevelInspector:this.topLevelInspector??this,getRenderDocument:this.getRenderDocument,eventName:this.eventName,iframeSelector:this.iframeSelector,getNodeById:this.getNodeById,getNodeRrwebId:this.getNodeRrwebId}),this.subDocumentInspector.start({singleSelection:this.singleSelection,timestamp:this.currentTimestamp}),!0},"handleSubDocument");this.stopSubDocumentInspector=l(e=>{this.subDocumentInspector&&(this.subDocumentInspector.stop(e),this.subDocumentInspector=null)},"stopSubDocumentInspector");this.rootDocument=e,this.topLevelInspector=i,this.getRenderDocument=t,this.eventName=a,this.iframeSelector=u,this.getNodeById=f,this.getNodeRrwebId=h,this.defaultView=r??this.getDefaultView(),this.playwrightElementSelectorGenerator=new Mt,this.elementHighlighter=new Zs,this.rootDocumentForSelectorGenerator=o??this.getDefaultView().document}static{l(this,"ElementInspector")}getDefaultView(){let t=document.querySelector(this.iframeSelector)?.contentDocument||null;return!t&&this.rootDocument.nodeType===Node.DOCUMENT_NODE&&(t=this.rootDocument),t||(t=document),t.defaultView}start({singleSelection:e,timestamp:t}={singleSelection:!0}){this.singleSelection=e,this.locatorCache.setTimestamp(t),this.currentTimestamp=t,this.stop(),this.cleanSelection(),this.rootDocument.addEventListener("mouseover",this.onMouseOver),this.rootDocument.addEventListener("mouseout",this.onMouseOut),this.rootDocument.addEventListener("keydown",this.onGlobalKeyDown),this.listening=!0}stop(e=!1){this.listening&&(this.listening=!1,this.subDocumentInspector&&this.stopSubDocumentInspector(e),this.elementHighlighter.clearHighlights(),this.hoveredElement&&(this.hoveredElement.removeEventListener("click",this.onClick,{capture:!0}),this.hoveredElement.removeEventListener("mousedown",this.onClick,{capture:!0})),this.currentTimestamp=void 0,this.hoveredElement=null,this.wasHoveredElementSelected=!1,this.rootDocument.removeEventListener("mouseover",this.onMouseOver),this.rootDocument.removeEventListener("keydown",this.onGlobalKeyDown),e&&this.cleanSelection())}cleanSelection(){this.subDocumentInspector&&this.subDocumentInspector.cleanSelection(),this.selected=[]}consumeSelections(){if(this.subDocumentInspector)return this.subDocumentInspector.consumeSelections();let e=this.selected;return this.cleanSelection(),e}async getInspectedElementSelection(e,t){let r=this.locatorCache.getCachedLocatorForElement(e);if(!r){let{locator:i,selector:o,parentFramesSelectors:a}=await this.playwrightElementSelectorGenerator.getSelectorAndLocator(e,{rootDocument:t,ignoredIframesSelectors:[this.iframeSelector],flags:{origin:"element-inspector"},stripAttributes:!1}).catch(h=>({locator:"",selector:"",parentFramesSelectors:[]})),u=await this.playwrightElementSelectorGenerator.selector(o,a).catch(()=>e),f=u!==e?this.getNodeRrwebId(u):void 0;r={locator:i,selector:o,parentFramesSelectors:a,locatorRrwebId:f},this.locatorCache.setCachedLocatorForElement(e,r)}return r}},Dd=class n{constructor(){this.locatorCache=new Map}static{l(this,"InspectedElementCache")}static getInstance(){return n.instance||(n.instance=new n),n.instance}setTimestamp(e){this.currentTimestamp=e}getCachedLocatorForElement(e){try{return this.currentTimestamp?this.locatorCache.get(this.getKeyForElement(e)):void 0}catch{return}}setCachedLocatorForElement(e,t){this.currentTimestamp&&this.locatorCache.set(this.getKeyForElement(e),t)}getKeyForElement(e){let t=_P(e);if(!t)throw new Error("Can't find rrwebId for element");return`${t}_${this.currentTimestamp}`}};function _P(n){return window.checksum.timeMachine.sessionReplayer.getMeta(n)?.id}l(_P,"getNodeRrwebId");var kd=typeof navigator<"u"?navigator.userAgent.toLowerCase().indexOf("firefox")>0:!1;function Pd(n,e,t,r){n.addEventListener?n.addEventListener(e,t,r):n.attachEvent&&n.attachEvent("on".concat(e),t)}l(Pd,"addEvent");function ro(n,e,t,r){n.removeEventListener?n.removeEventListener(e,t,r):n.detachEvent&&n.detachEvent("on".concat(e),t)}l(ro,"removeEvent");function OS(n,e){let t=e.slice(0,e.length-1);for(let r=0;r<t.length;r++)t[r]=n[t[r].toLowerCase()];return t}l(OS,"getMods");function LS(n){typeof n!="string"&&(n=""),n=n.replace(/\s/g,"");let e=n.split(","),t=e.lastIndexOf("");for(;t>=0;)e[t-1]+=",",e.splice(t,1),t=e.lastIndexOf("");return e}l(LS,"getKeys");function DP(n,e){let t=n.length>=e.length?n:e,r=n.length>=e.length?e:n,i=!0;for(let o=0;o<t.length;o++)r.indexOf(t[o])===-1&&(i=!1);return i}l(DP,"compareArray");var io={backspace:8,"\u232B":8,tab:9,clear:12,enter:13,"\u21A9":13,return:13,esc:27,escape:27,space:32,left:37,up:38,right:39,down:40,del:46,delete:46,ins:45,insert:45,home:36,end:35,pageup:33,pagedown:34,capslock:20,num_0:96,num_1:97,num_2:98,num_3:99,num_4:100,num_5:101,num_6:102,num_7:103,num_8:104,num_9:105,num_multiply:106,num_add:107,num_enter:108,num_subtract:109,num_decimal:110,num_divide:111,"\u21EA":20,",":188,".":190,"/":191,"`":192,"-":kd?173:189,"=":kd?61:187,";":kd?59:186,"'":222,"[":219,"]":221,"\\":220},Sr={"\u21E7":16,shift:16,"\u2325":18,alt:18,option:18,"\u2303":17,ctrl:17,control:17,"\u2318":91,cmd:91,command:91},sc={16:"shiftKey",18:"altKey",17:"ctrlKey",91:"metaKey",shiftKey:16,ctrlKey:17,altKey:18,metaKey:91},gt={16:!1,18:!1,17:!1,91:!1},tt={};for(let n=1;n<20;n++)io["f".concat(n)]=111+n;var Je=[],no=null,NS="all",Ur=new Map,oo=l(n=>io[n.toLowerCase()]||Sr[n.toLowerCase()]||n.toUpperCase().charCodeAt(0),"code"),kP=l(n=>Object.keys(io).find(e=>io[e]===n),"getKey"),PP=l(n=>Object.keys(Sr).find(e=>Sr[e]===n),"getModifier");function _S(n){NS=n||"all"}l(_S,"setScope");function so(){return NS||"all"}l(so,"getScope");function FP(){return Je.slice(0)}l(FP,"getPressedKeyCodes");function $P(){return Je.map(n=>kP(n)||PP(n)||String.fromCharCode(n))}l($P,"getPressedKeyString");function HP(){let n=[];return Object.keys(tt).forEach(e=>{tt[e].forEach(t=>{let{key:r,scope:i,mods:o,shortcut:a}=t;n.push({scope:i,shortcut:a,mods:o,keys:r.split("+").map(u=>oo(u))})})}),n}l(HP,"getAllKeyCodes");function BP(n){let e=n.target||n.srcElement,{tagName:t}=e,r=!0,i=t==="INPUT"&&!["checkbox","radio","range","button","file","reset","submit","color"].includes(e.type);return(e.isContentEditable||(i||t==="TEXTAREA"||t==="SELECT")&&!e.readOnly)&&(r=!1),r}l(BP,"filter");function WP(n){return typeof n=="string"&&(n=oo(n)),Je.indexOf(n)!==-1}l(WP,"isPressed");function VP(n,e){let t,r;n||(n=so());for(let i in tt)if(Object.prototype.hasOwnProperty.call(tt,i))for(t=tt[i],r=0;r<t.length;)t[r].scope===n?t.splice(r,1).forEach(a=>{let{element:u}=a;return $d(u)}):r++;so()===n&&_S(e||"all")}l(VP,"deleteScope");function UP(n){let e=n.keyCode||n.which||n.charCode,t=Je.indexOf(e);if(t>=0&&Je.splice(t,1),n.key&&n.key.toLowerCase()==="meta"&&Je.splice(0,Je.length),(e===93||e===224)&&(e=91),e in gt){gt[e]=!1;for(let r in Sr)Sr[r]===e&&(wr[r]=!1)}}l(UP,"clearModifier");function DS(n){if(typeof n>"u")Object.keys(tt).forEach(i=>{Array.isArray(tt[i])&&tt[i].forEach(o=>ic(o)),delete tt[i]}),$d(null);else if(Array.isArray(n))n.forEach(i=>{i.key&&ic(i)});else if(typeof n=="object")n.key&&ic(n);else if(typeof n=="string"){for(var e=arguments.length,t=new Array(e>1?e-1:0),r=1;r<e;r++)t[r-1]=arguments[r];let[i,o]=t;typeof i=="function"&&(o=i,i=""),ic({key:n,scope:i,method:o,splitKey:"+"})}}l(DS,"unbind");var ic=l(n=>{let{key:e,scope:t,method:r,splitKey:i="+"}=n;LS(e).forEach(a=>{let u=a.split(i),f=u.length,h=u[f-1],p=h==="*"?"*":oo(h);if(!tt[p])return;t||(t=so());let g=f>1?OS(Sr,u):[],y=[];tt[p]=tt[p].filter(w=>{let E=(r?w.method===r:!0)&&w.scope===t&&DP(w.mods,g);return E&&y.push(w.element),!E}),y.forEach(w=>$d(w))})},"eachUnbind");function RS(n,e,t,r){if(e.element!==r)return;let i;if(e.scope===t||e.scope==="all"){i=e.mods.length>0;for(let o in gt)Object.prototype.hasOwnProperty.call(gt,o)&&(!gt[o]&&e.mods.indexOf(+o)>-1||gt[o]&&e.mods.indexOf(+o)===-1)&&(i=!1);(e.mods.length===0&&!gt[16]&&!gt[18]&&!gt[17]&&!gt[91]||i||e.shortcut==="*")&&(e.keys=[],e.keys=e.keys.concat(Je),e.method(n,e)===!1&&(n.preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation&&n.stopPropagation(),n.cancelBubble&&(n.cancelBubble=!0)))}}l(RS,"eventHandler");function AS(n,e){let t=tt["*"],r=n.keyCode||n.which||n.charCode;if(!wr.filter.call(this,n))return;if((r===93||r===224)&&(r=91),Je.indexOf(r)===-1&&r!==229&&Je.push(r),["metaKey","ctrlKey","altKey","shiftKey"].forEach(u=>{let f=sc[u];n[u]&&Je.indexOf(f)===-1?Je.push(f):!n[u]&&Je.indexOf(f)>-1?Je.splice(Je.indexOf(f),1):u==="metaKey"&&n[u]&&(Je=Je.filter(h=>h in sc||h===r))}),r in gt){gt[r]=!0;for(let u in Sr)Sr[u]===r&&(wr[u]=!0);if(!t)return}for(let u in gt)Object.prototype.hasOwnProperty.call(gt,u)&&(gt[u]=n[sc[u]]);n.getModifierState&&!(n.altKey&&!n.ctrlKey)&&n.getModifierState("AltGraph")&&(Je.indexOf(17)===-1&&Je.push(17),Je.indexOf(18)===-1&&Je.push(18),gt[17]=!0,gt[18]=!0);let i=so();if(t)for(let u=0;u<t.length;u++)t[u].scope===i&&(n.type==="keydown"&&t[u].keydown||n.type==="keyup"&&t[u].keyup)&&RS(n,t[u],i,e);if(!(r in tt))return;let o=tt[r],a=o.length;for(let u=0;u<a;u++)if((n.type==="keydown"&&o[u].keydown||n.type==="keyup"&&o[u].keyup)&&o[u].key){let f=o[u],{splitKey:h}=f,p=f.key.split(h),g=[];for(let y=0;y<p.length;y++)g.push(oo(p[y]));g.sort().join("")===Je.sort().join("")&&RS(n,f,i,e)}}l(AS,"dispatch");function wr(n,e,t){Je=[];let r=LS(n),i=[],o="all",a=document,u=0,f=!1,h=!0,p="+",g=!1,y=!1;for(t===void 0&&typeof e=="function"&&(t=e),Object.prototype.toString.call(e)==="[object Object]"&&(e.scope&&(o=e.scope),e.element&&(a=e.element),e.keyup&&(f=e.keyup),e.keydown!==void 0&&(h=e.keydown),e.capture!==void 0&&(g=e.capture),typeof e.splitKey=="string"&&(p=e.splitKey),e.single===!0&&(y=!0)),typeof e=="string"&&(o=e),y&&DS(n,o);u<r.length;u++)n=r[u].split(p),i=[],n.length>1&&(i=OS(Sr,n)),n=n[n.length-1],n=n==="*"?"*":oo(n),n in tt||(tt[n]=[]),tt[n].push({keyup:f,keydown:h,scope:o,mods:i,shortcut:r[u],method:t,key:r[u],splitKey:p,element:a});if(typeof a<"u"&&window){if(!Ur.has(a)){let w=l(function(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;return AS(E,a)},"keydownListener"),S=l(function(){let E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.event;AS(E,a),UP(E)},"keyupListenr");Ur.set(a,{keydownListener:w,keyupListenr:S,capture:g}),Pd(a,"keydown",w,g),Pd(a,"keyup",S,g)}if(!no){let w=l(()=>{Je=[]},"listener");no={listener:w,capture:g},Pd(window,"focus",w,g)}}}l(wr,"hotkeys");function GP(n){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"all";Object.keys(tt).forEach(t=>{tt[t].filter(i=>i.scope===e&&i.shortcut===n).forEach(i=>{i&&i.method&&i.method()})})}l(GP,"trigger");function $d(n){let e=Object.values(tt).flat();if(e.findIndex(r=>{let{element:i}=r;return i===n})<0){let{keydownListener:r,keyupListenr:i,capture:o}=Ur.get(n)||{};r&&i&&(ro(n,"keyup",i,o),ro(n,"keydown",r,o),Ur.delete(n))}if((e.length<=0||Ur.size<=0)&&(Object.keys(Ur).forEach(i=>{let{keydownListener:o,keyupListenr:a,capture:u}=Ur.get(i)||{};o&&a&&(ro(i,"keyup",a,u),ro(i,"keydown",o,u),Ur.delete(i))}),Ur.clear(),Object.keys(tt).forEach(i=>delete tt[i]),no)){let{listener:i,capture:o}=no;ro(window,"focus",i,o),no=null}}l($d,"removeKeyEvent");var Fd={getPressedKeyString:$P,setScope:_S,getScope:so,deleteScope:VP,getPressedKeyCodes:FP,getAllKeyCodes:HP,isPressed:WP,filter:BP,trigger:GP,unbind:DS,keyMap:io,modifier:Sr,modifierMap:sc};for(let n in Fd)Object.prototype.hasOwnProperty.call(Fd,n)&&(wr[n]=Fd[n]);if(typeof window<"u"){let n=window.hotkeys;wr.noConflict=e=>(e&&window.hotkeys===wr&&(window.hotkeys=n),wr),window.hotkeys=wr}var ki=class{constructor(){this.boundShortcuts=[]}static{l(this,"KeybindingsManager")}addKeybinding(e){let t=e.key.toLowerCase();if(this.boundShortcuts.includes(t))return;this.boundShortcuts.push(t),wr(t,{capture:!0,keydown:!0},i=>{i.preventDefault(),e.callback(i)})}};var oc=class{constructor(e){this.keybindingsManager=new ki;this.createHandler=l(e=>({handlerFunc:l(t=>{try{e.handlerFunc(t)}finally{this.stopObserver()}},"handlerFunc"),handlerType:e.handlerType}),"createHandler");this.toHaveTextHandler=l(()=>e=>{let t=e?.data?.data,r=window.prompt(`Please enter the expected text for the element:
${t.locator}`);r!==null&&this.sessionRecorder.addCustomEvent("assertion",{matcher:`toHaveText("${r}")`,locator:t.locator})},"toHaveTextHandler");this.toBeVisibleHandler=l(()=>e=>{let t=e?.data?.data;this.sessionRecorder.addCustomEvent("assertion",{matcher:"toBeVisible()",locator:t.locator})},"toBeVisibleHandler");this.sessionRecorder=e}static{l(this,"AssertionsObserver")}init(){this.keybindingsManager.addKeybinding({key:"ctrl+\u2318+a",callback:l(()=>this.toggleObserver({handlerFunc:this.toHaveTextHandler(),handlerType:"toHaveText"}),"callback")}),this.keybindingsManager.addKeybinding({key:"ctrl+\u2318+s",callback:l(()=>this.toggleObserver({handlerFunc:this.toBeVisibleHandler(),handlerType:"toBeVisible"}),"callback")}),this.keybindingsManager.addKeybinding({key:"esc",callback:l(e=>{this.activeHandler&&(e.stopPropagation(),this.cleanUpHandler())},"callback")})}toggleObserver(e){if(this.activeHandler){this.cleanUpHandler();return}let t=this.createHandler(e);this.activeHandler=t,this.startObserver(),window.addEventListener("message",t.handlerFunc,{once:!0})}cleanUpHandler(){this.activeHandler&&(window.removeEventListener("message",this.activeHandler.handlerFunc),this.stopObserver(),this.activeHandler=null)}isInspectorActive(){return!!this.elementInspector}enableEventsFilter(){this.sessionRecorder.addCustomEvent("filter",{filter:{only:[{type:j.Custom,tag:"assertion"}],exclude:[]}})}disableEventsFilter(){this.sessionRecorder.addCustomEvent("filter",{filter:{only:[],exclude:[]}})}startObserver(){this.elementInspector=new Di({rootDocument:window.document}),this.elementInspector.start(),this.enableEventsFilter()}stopObserver(){this.isInspectorActive()&&(this.elementInspector.stop(),this.elementInspector=null,this.disableEventsFilter(),this.cleanUpHandler())}};var ac=class{constructor(e){this.keybindingsManager=new ki;this.lastMousePosition={x:0,y:0};this.sessionRecorder=e,this.listenForMouseMove()}static{l(this,"ActionsObserver")}init(){this.keybindingsManager.addKeybinding({key:"ctrl+\u2318+h",callback:l(async()=>{try{await this.handleImmediateHover()}catch(e){console.error("[ActionsObserver] calling handleImmediateHover:",e)}},"callback")})}listenForMouseMove(){try{document.addEventListener("mousemove",e=>{try{this.lastMousePosition.x=e.clientX,this.lastMousePosition.y=e.clientY}catch(t){console.error("[ActionsObserver] mousemove event listener error:",t)}})}catch(e){console.error("[ActionsObserver] listenForMouseMove error:",e)}}async handleImmediateHover(){let e=document.elementFromPoint(this.lastMousePosition.x,this.lastMousePosition.y);if(!e)return;let t=new Mt,{locator:r}=await t.getSelectorAndLocator(e);r&&(this.sessionRecorder.addCustomEvent("hover",{locator:r}),this.highlightElement(e))}highlightElement(e){let t=e;if(!t.style)return;let r=t.style.backgroundColor,i=t.style.transition;t.style.transition="background-color 0.3s ease",t.style.backgroundColor="rgba(255, 255, 0, 0.3)",setTimeout(()=>{t.style.backgroundColor=r,t.style.transition=i},500)}cleanUpHandler(){this.activeHandler&&(window.removeEventListener("message",this.activeHandler.handlerFunc),this.stopObserver(),this.activeHandler=null)}isInspectorActive(){return!!this.elementInspector}stopObserver(){this.isInspectorActive()&&(this.elementInspector.stop(),this.elementInspector=null,this.cleanUpHandler())}};var lc=class{constructor(e){this.sessionRecorder=e}static{l(this,"BlobObserver")}init(){this.overrideCreateObjectURL()}overrideCreateObjectURL(){let e=URL.createObjectURL.bind(URL);URL.createObjectURL=t=>{let r=e(t);return!this.sessionRecorder||!t||typeof t.arrayBuffer!="function"||t.arrayBuffer().then(i=>{let o=new Uint8Array(i),a=Array.from(o);this.sessionRecorder.addCustomEvent("blob-data",{blobData:a,mimeType:t.type,originalUrl:r})}).catch(i=>{console.warn("Failed to process blob data for recording:",i)}),r}}};var zP="$checksum",cc=class{constructor(){this.testIdCounter=0;this.initialized=!1;Ri.setPrefix(zP),this.elementSelector=new Mt,this.htmlReducer=new zl,this.parentChainReducer=new tc,this.compoundSelector=new Hn(this.htmlReducer)}static{l(this,"ChecksumTestGenerator")}getCompoundSelector(){return this.compoundSelector}betterTemplatizr(e){return br(e)}async buildCustomPlaywrightSelectors(e,t=[],r={},i=document){typeof e=="string"&&(e=this.htmlReducer.getElementForChecksumId(e));let o=t.map(a=>({...a,element:this.parentChainReducer.getElementForChecksumId(a.checksumId)})).filter(({element:a})=>!!a);return await new mn(i).generate(e,o,{isPartOfListItem:!1,isForContextElement:!1,addCSSSelectorGenerator:!0,expandCSSKeyElements:!0,...r})}async buildArbitraryListItem(e){return typeof e=="string"&&(e=this.htmlReducer.getElementForChecksumId(e)),new mn().generateArbitraryItemListSelector(e)}testElementSelector(e,t,r,i=!0){let o=typeof t=="string"?this.htmlReducer.getElementForChecksumId(t):t;return o?new mn().testSelector(e,o,r,i):(console.error("Element not found",t),{valid:!1,error:"Element not found"})}async getParentChainHTML(e,t=!0,r=!0){return typeof e=="string"&&(e=this.htmlReducer.getElementForChecksumId(e)),(await this.parentChainReducer.reduce(e,{useLionTail:t,useChecksumIds:r})).reducedHTML}init(e,t={},{sessionRecorder:r=!0,filesObserver:i=!1,assertionsObserver:o=!1,actionsObserver:a=!1,nativeDialogObserver:u=!1,blobObserver:f=!0}={}){this.appSpecificRules=e,this.config=t,!this.initialized&&(this.initialized=!0,r&&(this.sessionMirror=new Wl((h,p)=>{h.isCheckout=p,window.checksumSendBroadcastMessage?.("rrweb",[h]),this.lastRrwebEventTimestamp=h.timestamp},t.recordOptions)),i&&(this.filesObserver=new rc(this.sessionMirror),this.filesObserver.init()),o&&(this.assertionsObserver=new oc(this.sessionMirror),this.assertionsObserver.init()),a&&(this.actionsObserver=new ac(this.sessionMirror),this.actionsObserver.init()),u&&(this.nativeDialogObserver=new nc(this.sessionMirror),this.nativeDialogObserver.init()),f&&(this.blobObserver=new lc(this.sessionMirror),this.blobObserver.init()),this.sessionMirror&&(this.sessionMirror.start(),this.htmlReducer.setSessionRecorder(this.sessionMirror)),Ln.limitChildren=this.appSpecificRules?.esraSelectionRules?.limitChildren??[],Ln.timeout=this.config.esraTimeout,this.config.showFrontendLogs?Ri.removePrefix():this.config.logPrefix?.length&&Ri.setPrefix(this.config.logPrefix))}getElementSelector(){return this.elementSelector}getLastSelectionLogs(){return this.currentESRASelector?this.currentESRASelector.getLastSelectionLogs():{}}getBestMatchingElementSimilarityScore(e){return this.currentESRASelector=new Ln(e),this.currentESRASelector.selectOne().score}async extractESRAMetadata(e){return new rr(document).extract(e).toMetadata()}async select(e,t){return await this.elementSelector.selector(e,t)}async getSelectionDataForSelector(e,t){try{let r=await this.elementSelector.selector(e,t);if(!r)return console.warn("could not find element for selector: "+e),null;let{locator:i}=await this.elementSelector.getSelectorAndLocator(r,{testIdSelector:this.appSpecificRules?.esraSelectionRules?.testIdSelector}),o=await this.extractESRAMetadata(r);return{generatedLocator:i,esraMetadata:o,selector:e,parentFramesSelectors:t}}catch(r){console.log("getMetadataForSelector exception",r);return}}async getMatchingElementSelectionData(e,{minSelectionScore:t,cachedSelector:r,staticMetadata:i}={minSelectionScore:.3},o=!1){try{let a,u,f;if(r&&(console.log("Trying to locate using cached selector",r),a=await this.elementSelector.selector(r)),!a){console.log("Trying to locate using ESRA",e),ga(i)&&console.log("and static data",i),this.currentESRASelector=new Ln(e,i);let p=this.currentESRASelector.selectOne({minSelectionScore:t});p.score>=t?(a=p.candidate,u=p.score,f=p.clickOffset):console.log("Best matching element was below threshold",p)}if(console.log(a?[`Located with score ${u}`,a]:"Element not located"),!a)return;o&&new mt(a).scrollIntoView(),this.highlightElement(a);let h=await this.makeMatchingElementSelectionData(a,u);return f&&(h.clickOffset=f),h}catch(a){console.log("getMatchingElementSelectionData exception",a);return}}getAllInteractableElementsForLastSelectQuery(){let e=this.currentESRASelector.getFinalCandidates();return Promise.all(e.map(async t=>({esraMetadata:t.esraMetadata,selectionData:await this.makeMatchingElementSelectionData(t.candidate,t.score)})))}async getInteractableElementsRaw(){return On()}async getInteractableElements(){let e=On(),t=new rr(document);return Promise.all(e.map(async r=>{let i=t.extract(r).toMetadata(),o=await this.makeMatchingElementSelectionData(r);return{esraMetadata:i,selectionData:o}}))}getCurrentESRASelector(){return this.currentESRASelector}startFlashingElementsDetection(){return this.htmlReducer.startFlashingElementsDetection()}async reduceHTML(e={},t={},r=document){let i=await this.htmlReducer.reduce(r,{...this.appSpecificRules,...e},t);if(this.lastRrwebEventTimestamp&&(i.lastRRwebEvent={timestamp:this.lastRrwebEventTimestamp}),t.extractESRAForInterpretationRequiredElements){console.log("Extracting ESRA for interpretation required elements...");let o=this.htmlReducer.getInteractableElementsInReducedHTML();i.elementsForNodeInterpretation=o.reduce((a,{checksumId:u,element:f})=>{if(!(f instanceof HTMLElement)||f.innerText?.trim().length)return a;let p=new rr(document).extract(f).toMetadata();return[...a,{checksumId:u,esraMetadata:p}]},[]),console.log("Done with ESRA extraction for interpretation required elements")}return i}getMoreItemsForTemplate(e,t={}){return this.htmlReducer.getMoreElementsFromTemplate(e,{...this.appSpecificRules,...t})}displayInterpretationForElements(e){this.clearHighlights(),this.htmlReducer.getInteractableElements().forEach(({checksumId:r,element:i})=>{let o=e[r];if(o){if(!i.isConnected){console.log(`Element ${r} is not connected to the DOM, skipping display`);return}this.highlightElement(i,{text:o,textType:"hover",clear:!1,textStyle:{width:"120px"}})}})}async overlayInteractableElementsWithChecksumId({reduceBeforeRender:e=!1,mode:t="full",textPosition:r=t==="tag"?"above":void 0,shouldFlipHighlightTextOutsideViewport:i=!0,scrollIntoView:o=!1,checksumId:a}={}){this.clearHighlights(),e&&await this.reduceHTML();let u=l((h,p,g)=>{if(!p.isConnected){console.log(`Element ${h} is not connected to the DOM, skipping display`);return}let{width:y,height:w}=p.getBoundingClientRect();if(y<=0||w<=0)return;function S(A){switch(t){case"tag":return{background:A,width:"initial",left:"-2px",border:`3px dashed ${A}`,"font-weight":"bold"};case"full":return{background:"black",height:"100%"}}}l(S,"getTextStyleByMode");function E(A){let T=["red","gold","green","steelBlue","orange","hotPink","darkViolet","brown"];return A?T[A%T.length]:"red"}l(E,"getColor");let v=E(g);function M(){switch(t){case"tag":return{outline:`3px dashed ${v}`};case"full":return{outline:"none"};case"selected":return{outline:"6px dashed red",opacity:"0.7"}}}l(M,"getHighlightStyle"),this.highlightElement(p,{text:h,clear:!1,highlightStyle:M(),...r?{textPosition:r}:{},textStyle:S(v),shouldFlipHighlightTextOutsideViewport:i})},"overlayElement");if(t==="selected"&&a){let h=await this.getElementForChecksumId(a);u(null,h,0);return}this.htmlReducer.getInteractableElementsInReducedHTML().filter(h=>!vt(h.element,{...bd,scrollIntoView:o}).isHidden).forEach(({checksumId:h,element:p},g)=>{u(h,p,g)})}async getElementForChecksumId(e){return this.htmlReducer.getElementForChecksumId(e)}async getSelectorForChecksumId(e){let t=await this.htmlReducer.getSelectorForChecksumId(e),{element:r,innerText:i,...o}=t;return o}hasInnerTextByChecksumId(e){return this.htmlReducer.hasInnerTextByChecksumId(e)}async getSelectorByPosition(e,t){let r=document.elementFromPoint(e,t),{selector:i,locator:o,parentFramesSelectors:a}=await this.elementSelector.getSelectorAndLocator(r);return{selector:i,locator:o,parentFramesSelectors:a}}isInput(e){let t=pe(e);if(t.length)return["input","textarea"].includes(t[0].tagName.toLowerCase())}querySelectorExtended(e){return pe(e)}getReactTree(e){return tS(e)}isHidden(e,t){return vt(e,t)}showGrid(){this.removeGrid();let e=document.createElement("style");e.id="checksum_grid_style",e.innerHTML=`
                  .checksum_grid {
                        background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAJ1JREFUaEPtksEJgDAUxX73H1oRxAECkSrppacXaNI1M8f84Kz7Idf95XP0kM3yVWSzIFORikgG+lqSWIytCFYnDSsiicXYimB10rAikliMrQhWJw0rIonF2IpgddKwIpJYjK0IVicNKyKJxdiKYHXSsCKSWIytCFYnDSsiicXYimB10rAikliMrQhWJw0rIonF2IpgddLwKSLx38Oej8ZiASoSUGMAAAAASUVORK5CYII=");
                        background-repeat: repeat;
                        background-size: 20px;
                        background-position: 0px 0px;
                        position: absolute;
                        top: 0;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        height: 100%;
                        z-index: 1000;
                  }
`,document.body.prepend(e);let t=document.createElement("div");t.classList.add("checksum_grid"),document.body.prepend(t)}removeGrid(){let e=document.querySelector("#checksum_grid_style");e&&e.remove();let t=document.querySelector(".checksum_grid");t&&t.remove()}clearHighlights(){Sd.clearHighlights()}highlightElement(e,t={}){this.config.skipElementHighlighting||Sd.highlightElement(e,t)}async getInspectedElementSelectionResultByRRwebId(e,t={ignoredIframesSelectors:[],fromTimeMachine:!1}){let i=await(t.fromTimeMachine?window.checksum.timeMachine.sessionReplayer:this.sessionMirror).getNodeById(e);if(i)return await this.elementSelector.getSelectorAndLocator(i,{ignoredIframesSelectors:t.ignoredIframesSelectors})}startListeningForHTMLChanges(){this.mutationDetector&&this.mutationDetector.stopListening(),this.mutationDetector=new jl(rS),this.mutationDetector.startListening()}stopListeningForHTMLChanges(e){let t=this.mutationDetector.stopListening();switch(e){default:return t.map(r=>(r.innerText??r.textContent)?.trim())}}scrollScrollableElement(e,t,r){let i=this.sessionMirror.getNodeById(e);return!i||!(i instanceof Element)?{result:!1,error:"Element not found"}:mt.scrollScrollableElement(i,t,r)}extractViewportHTML(){let e=document.documentElement,t={},r=l(a=>{let f=l(()=>a instanceof Element?a:fr(a),"getElement")();if(!f)return!1;let h=f.getBoundingClientRect();return h.top<window.innerHeight&&h.bottom>0&&h.left<window.innerWidth&&h.right>0},"isInViewport"),i=l(a=>{let u=r(a),f=[];if(ri(a).forEach(p=>{let g=i(p);g&&f.push(g)}),!u&&f.length===0)return null;let h=a.cloneNode(!1);if(a instanceof Element){let{canScrollX:p,canScrollY:g,progressX:y,progressY:w}=mt.getScrollData(a),S=h,E=p||g,v={};p&&(S.setAttribute("data-scrollable-x","true"),S.setAttribute("data-scrollable-x-progress",y.toString()),v.x=y),g&&(S.setAttribute("data-scrollable-y","true"),S.setAttribute("data-scrollable-y-progress",w.toString()),v.y=w);let M=null;try{let{id:A}=this.sessionMirror.getMeta(a);A&&(S.setAttribute("rrwebId",A.toString()),M=A)}catch(A){console.error("Error adding rrwebId",a,A)}M&&E&&(t[M]=v)}return f.forEach(p=>{h.appendChild(p)}),h},"copyVisibleElements");return{html:i(e).outerHTML,scrollableElements:t}}async generateLocatorByRrwebId(e){let t=await this.sessionMirror.getNodeById(e);if(!t)return;let{locator:r}=await this.elementSelector.getSelectorAndLocator(t);return r}async scrollElementIntoView(e){return e?(new mt(e).scrollIntoView(),!0):!1}async scrollElementIntoViewByChecksumId(e){let t=await this.getElementForChecksumId(e);return this.scrollElementIntoView(t)}async scrollElementIntoViewByRrwebId(e){let t=await this.sessionMirror.getNodeById(e);return this.scrollElementIntoView(t)}async scrollIntoViewAndHighlight(e){let t=await this.elementSelector.selector(e);t&&(t.scrollIntoView(),this.highlightElement(t))}async recordScrollPosition(e){let t=await this.getElementForChecksumId(e);if(!t)return;let r=new mt(t);r.getScrollableParentsPositions(),t._checksumScrollHelper=r}async restoreScrollPosition(e){let t=await this.getElementForChecksumId(e);!t||!("_checksumScrollHelper"in t)||(t._checksumScrollHelper.restore(),delete t._checksumScrollHelper)}determineClosestNode(e,t,r){return wd(e,r)-wd(t,r)}addForceIncludeElement(e,t){this.htmlReducer.addForceIncludeElement({element:e,checksumid:t})}async makeMatchingElementSelectionData(e,t,r){try{let i=this.setAndGetTestId(e),o=this.getVisibleParent(e),a=this.setAndGetTestId(o),u=this.getElementAtCenterOfElement(e),f=this.setAndGetTestId(u),h={element:i,visibleElement:a===i?void 0:a,atPointElement:f===i||f===a?void 0:f},p=await this.elementSelector.getSelectorAndLocator(e,{testIdSelector:this.appSpecificRules?.esraSelectionRules?.testIdSelector}),g=await this.elementSelector.getSelectorAndLocator(u,{testIdSelector:this.appSpecificRules?.esraSelectionRules?.testIdSelector}),y=await this.elementSelector.getSelectorAndLocator(o,{testIdSelector:this.appSpecificRules?.esraSelectionRules?.testIdSelector}),w={element:p?.selector,visibleElement:y?.selector,atPointElement:g?.selector},S={element:p?.parentFramesSelectors,visibleElement:y?.parentFramesSelectors,atPointElement:g?.parentFramesSelectors},E=l(N=>({tag:N.tagName.toLowerCase()}),"makeElementData"),v={element:E(e),visibleElement:h.visibleElement?E(o):void 0,atPointElement:h.atPointElement?E(u):void 0},M=l(async N=>N===e&&r?r:new rr(document).extract(N).toMetadata(),"makeESRAMetadata"),A={element:await M(e),visibleElement:h.visibleElement?await M(o):void 0,atPointElement:h.atPointElement?await M(u):void 0},T=p?.locator;return{testIds:h,selectors:w,parentFramesSelectors:S,elementData:v,score:t,esraMetadata:A,generatedLocator:T}}catch(i){return console.log("[makeMatchingElementSelectionData] exception",i),{testIds:{element:void 0},selectors:{element:void 0},parentFramesSelectors:{element:void 0},elementData:{element:void 0},esraMetadata:{element:void 0},generatedLocator:void 0}}}getElementAtCenterOfElement(e){let{x:t,y:r}=e.getBoundingClientRect(),i=e.ownerDocument.elementFromPoint(t,r);return i instanceof HTMLElement?i:void 0}setAndGetTestId(e){if(!e)return;let t=e.getAttribute("data-checksum-testid");if(t)return t;let r=(this.testIdCounter++).toString();return e.setAttribute("data-checksum-testid",r),r}getVisibleParent(e){return!(e instanceof HTMLElement)||e.offsetParent!==null?e:this.getVisibleParent(fr(e))}};var Pi=class{static{l(this,"EventHandlersBase")}setSessionReplayer(e){}skipEvents(e){}preCastEvent(e){}async preEvent(e){}postEvent(e,t){return t}handleMeta(e,t){}handleViewportResize(e){}handleMutation(e,t){}handleInput(e,t){}handleClick(e,t){}handleDblClick(e,t){}handleMouseDown(e,t){}handleMouseUp(e,t){}handleMouseMove(e,t){}handleFocus(e,t){}handleBlur(e,t){}handleContentEditableInput(e,t){}handleKeyStroke(e,t){}handleURLChange(e,t){}handleNativeDialog(e,t){}handleRecordAssertion(e,t){}handleRecordHover(e,t){}};var Fi=class{static{l(this,"BlobStoreManager")}static storeBlob(e){if(window.parent.blobs||(window.parent.blobs={}),e.originalUrl){let t=new Uint8Array(e.blobData),r=new Blob([t],{type:e.mimeType});window.parent.blobs[e.originalUrl]=URL.createObjectURL(r)}}static getBlobUrl(e){return window.parent.blobs?.[e]}static async replaceBlobUrls(e){if(e==null)return e;if(typeof e=="string"){if(e.includes("blob:")){try{await this.waitForBlob(e)}catch(r){return console.error(`Waiting for blob failed: ${r}`),e}return this.getBlobUrl(e)||e}return e}if(Array.isArray(e))return await Promise.all(e.map(t=>this.replaceBlobUrls(t)));if(typeof e=="object"){let t={};for(let[r,i]of Object.entries(e))t[r]=await this.replaceBlobUrls(i);return t}return e}static async waitForBlob(e,t=5e3){return new Promise((r,i)=>{let o=Date.now(),a=l(()=>{if(this.hasBlob(e)){r();return}if(Date.now()-o>t){i(new Error(`Timeout waiting for blob: ${e}`));return}setTimeout(a,100)},"checkBlob");a()})}static hasBlob(e){return e in(window.parent.blobs??{})}};var uc=class{constructor({eventHandlers:e}){this.filter={only:[],exclude:[]};this.preCastEvent=l(async e=>this.handlers.preCastEvent(e),"preCastEvent");this.processEvent=l(async(e,t=!0)=>{await this.handlers.preEvent(e);let r=t?await this.handleEvent(e):void 0,i=await this.handlers.postEvent(e,r);return this.handlers.controlledReturn?this.handlers.getReturnValue():i},"processEvent");this.skipEvents=l(async e=>this.handlers.skipEvents(e),"skipEvents");this.shouldProcess=l(e=>{let{only:t,exclude:r}=this.filter,i=l(o=>e.type===j.Custom&&e.data.tag==="filter"?!0:o.type!==e.type?!1:e.type===j.Custom?o.tag===e.data.tag:e.type===j.IncrementalSnapshot?e.data.source===o.source:!0,"matchFilter");return!(t.length>0&&!t.some(i)||r.length>0&&r.some(i))},"shouldProcess");this.handlers=e}static{l(this,"EventProcessor")}setHandlers(e){this.handlers=e}async handleEvent(e){if(this.shouldProcess(e))switch(e.type){case j.Meta:return this.handlers.handleMeta(e.data,e);case j.IncrementalSnapshot:switch(e.data.source){case V.ViewportResize:return this.handlers.handleViewportResize(e.data,e);case V.Mutation:return this.handlers.handleMutation(e.data,e);case V.Input:return this.handlers.handleInput(e.data,e);case V.MouseInteraction:return this.handleMouseInteraction(e.data,e);case V.MouseMove:return this.handlers.handleMouseMove(e.data,e);default:break}break;case j.Custom:switch(e.data.tag){case"contenteditable-input":return this.handlers.handleContentEditableInput(e.data.payload,e);case"key-stroke":return this.handlers.handleKeyStroke(e.data.payload,e);case"url-change":return this.handlers.handleURLChange(e.data.payload,e);case"native-dialog-event":return this.handlers.handleNativeDialog(e.data.payload,e);case"assertion":return this.handlers.handleRecordAssertion(e.data.payload,e);case"hover":return this.handlers.handleRecordHover(e.data.payload,e);case"filter":this.handleFilterEvent(e.data.payload);break;case"blob-data":let t=e.data.payload;Fi.storeBlob(t);break}break;default:break}}async handleMouseInteraction(e,t){switch(e.type){case ne.Click:return this.handlers.handleClick(e,t);case ne.DblClick:return this.handlers.handleDblClick(e,t);case ne.MouseDown:return this.handlers.handleMouseDown(e,t);case ne.MouseUp:return this.handlers.handleMouseUp(e,t);case ne.Focus:return this.handlers.handleFocus(e,t);case ne.Blur:return this.handlers.handleBlur(e,t);default:break}}handleFilterEvent(e){this.filter.exclude=e.filter.exclude,this.filter.only=e.filter.only}};var Wd=hs(ua());var fc=class{constructor(){this._replayingState="Paused";this.listeners=[]}static{l(this,"ReplayerListenersManager")}set replayingState(e){this._replayingState=e,this.notifyListeners()}addListener(e){this.listeners.push(e)}removeListener(e){this.listeners=this.listeners.filter(t=>t!==e)}async wrapWithLoadingState(e,t="Paused"){return this.replayingState="Processing",new Promise((r,i)=>{requestAnimationFrame(()=>{setTimeout(()=>{e().then(o=>{r(o)}).catch(o=>{i(o)}).finally(()=>{this.replayingState=t})},0)})})}notifyListeners(){this.listeners.forEach(e=>e(this._replayingState))}};var qP={[j.DomContentLoaded]:"DomContentLoaded",[j.Load]:"Load",[j.FullSnapshot]:"FullSnapshot",[j.IncrementalSnapshot]:"IncrementalSnapshot",[j.Meta]:"Meta",[j.Custom]:"Custom",[j.Plugin]:"Plugin"},YP={[V.Mutation]:"Mutation",[V.MouseMove]:"MouseMove",[V.MouseInteraction]:"MouseInteraction",[V.Scroll]:"Scroll",[V.ViewportResize]:"ViewportResize",[V.Input]:"Input",[V.TouchMove]:"TouchMove",[V.MediaInteraction]:"MediaInteraction",[V.StyleSheetRule]:"StyleSheetRule",[V.CanvasMutation]:"CanvasMutation",[V.Font]:"Font",[V.Log]:"Log",[V.Drag]:"Drag",[V.StyleDeclaration]:"StyleDeclaration"},KP={[ne.MouseUp]:"MouseUp",[ne.MouseDown]:"MouseDown",[ne.Click]:"Click",[ne.ContextMenu]:"ContextMenu",[ne.DblClick]:"DblClick",[ne.Focus]:"Focus",[ne.Blur]:"Blur",[ne.TouchStart]:"TouchStart",[ne.TouchMove_Departed]:"TouchMove_Departed",[ne.TouchEnd]:"TouchEnd"},Hd=l(n=>({...n,type:qP[n.type],data:{...n.data,source:n.type===j.IncrementalSnapshot?YP[n.data.source]??n.data.source:n.data.source,type:n.data.source===V.MouseInteraction?KP[n.data.type]:n.data.type}}),"stringifyEvent"),Bn=l((n,{includeBlur:e=!0,includeFocus:t=!0}={})=>{switch(n.type){case j.Meta:return!1;case j.IncrementalSnapshot:switch(n.data.source){case V.Input:return n.data.userTriggered;case V.MouseInteraction:return!(!e&&n.data.type===ne.Blur||!t&&n.data.type===ne.Focus);case V.MouseMove:case V.Drag:case V.Selection:return!0;default:return!1}case j.Custom:switch(n.data.tag){case"contenteditable-input":case"hover":return!0;default:return!1}default:return!1}},"isActionEvent");var kS=l(n=>{n.querySelectorAll("a, button, input").forEach(e=>{e.addEventListener("click",t=>t.preventDefault()),e.addEventListener("keydown",t=>t.preventDefault())})},"disableInteractiveElements");var Bd=class{static{l(this,"Logger")}static formatMessage(e,t){let{level:r,message:i,timestamp:o,data:a}=e,u=`[${o}] [${r.toUpperCase()}]`;return t&&(u+=` [${t}]`),u+=` ${i}`,a?`${u}
Data: ${JSON.stringify(a)}`:u}static getCallerInfo(){let r=(new Error().stack?.split(`
`)||[])[4];if(r){let i=r.match(/at\s+.+\s+\((.+):(\d+):(\d+)\)/)||r.match(/at\s+(.+):(\d+):(\d+)/);if(i){let[,o,a]=i;return`${o.split("/").pop()||o}:${a}`}}return"unknown"}static log(e,t,r){let i={level:e,message:t,timestamp:new Date().toISOString(),data:r},o=this.getCallerInfo(),a=this.formatMessage(i,o);switch(e){case"error":console.error(a);break;case"warn":console.warn(a);break;case"debug":console.debug(a);break;case"rrweb":break;default:console.log(a)}}static info(e,t){this.log("info",e,t)}static warn(e,t){this.log("warn",e,t)}static error(e,t){this.log("error",e,t)}static debug(e,t){this.log("debug",e,t)}static rrweb(e,t){this.log("rrweb",e,t)}},_e=Bd;var XP=!0,$i=class{constructor(e={}){this.interactionEventsTimestamps=[];this.initialEventsBuffer=[];this.config={enableInteract:!1};this.eventSubscribers={};this.newRRWebSeekMode=!1;this.timer=null;this.animationFrameStepHandler={wait:l(e=>requestAnimationFrame(e),"wait"),cancel:l(e=>cancelAnimationFrame(e),"cancel")};this.timeoutStepHandler={wait:l(e=>setTimeout(e,10),"wait"),cancel:l(e=>clearTimeout(e),"cancel")};this.stop=l(()=>{_e.info("Stopping replayer");try{this.replayer&&this.replayer.destroy()}catch(e){_e.error("Error destroying replayer",e)}},"stop");this.getNodeById=l(e=>this.replayer.getMirror().getNode(e),"getNodeById");this.getMeta=l(e=>this.replayer?.getMirror()?.getMeta(e),"getMeta");this.getLastInteractionEventTimestamp=l(e=>{let t=this.interactionEventsTimestamps.sort((r,i)=>r-i).reverse().find(r=>r<=e);return _e.rrweb("Getting last interaction event timestamp",{inputTimestamp:e,lastTimestamp:t}),t},"getLastInteractionEventTimestamp");_e.info("Initializing SessionReplayer",{config:e}),this.config={...this.config,...e},this.replayerListenersManager=new fc,window.addEventListener("message",async t=>{try{let{data:r}=t;r.type==="setNewRRWebSeekMode"&&this.setNewRRWebSeekMode(r.payload)}catch{}})}static{l(this,"SessionReplayer")}makeReplayerConfig(){let e={mouseTail:!1,pauseAnimation:!1,speed:360,triggerFocus:!0,UNSAFE_replayCanvas:!0,liveMode:!0,showDebug:!1,skipInactive:!0,useVirtualDom:!1};return this.config.root&&(e.root=this.config.root),_e.rrweb("Creating replayer configuration",{playerConfig:e}),e}makeReplayer(e=[],{baselineTime:t=Date.now()}={}){if(_e.info("Creating replayer instance",{eventsCount:e.length,baselineTime:t,config:this.config}),this.replayer=new Ml(e,this.makeReplayerConfig()),this.config.enableInteract?(_e.rrweb("Enabling interact mode"),this.replayer.enableInteract()):(_e.rrweb("Disabling interact mode"),this.replayer?.disableInteract()),this.config.onlyLive?(_e.info("Starting live mode",{baselineTime:t}),this.replayer.startLive(t)):(_e.info("Starting playback"),this.replayer.play()),XP&&(_e.rrweb("Setting up debug mode"),this.setupDebugMode()),Object.values(ve).forEach(r=>{this.replayer.on(r,i=>{this.notifySubscribers(r,i)})}),this.disableInteractiveElements(),this.newRRWebSeekMode){let r=this.getReplayerContext().timer;this.timerAddAction=r.addAction.bind(r),r.addAction=i=>(i.delay=0,this.timerAddAction(i))}}isConnected(){let e=!!this.replayer;return _e.rrweb("Checking replayer connection status",{connected:e}),e}subscribeTo(e,t,r){_e.rrweb("Subscribing to events",{id:e,events:t}),t.forEach(i=>{this.eventSubscribers[i]||(this.eventSubscribers[i]={}),this.eventSubscribers[i][e]=r})}unsubscribeFrom(e){_e.rrweb("Unsubscribing from events",{id:e}),Object.keys(this.eventSubscribers).forEach(t=>{this.eventSubscribers[t][e]&&delete this.eventSubscribers[t][e]})}notifySubscribers(e,t){Object.values(this.eventSubscribers[e]??{}).forEach(r=>{try{r(t)}catch(i){_e.error("Error in event cast subscriber",{eventType:e,error:i})}})}setNewRRWebSeekMode(e){this.newRRWebSeekMode=e}getFirstEventTimestamp(){let e=this.replayer.getMetaData().startTime;return _e.rrweb("Getting first event timestamp",{timestamp:e}),e}getLastEventTimestamp(){let e=this.replayer.getMetaData().endTime;return _e.rrweb("Getting last event timestamp",{timestamp:e}),e}getCurrentTimestamp(){try{let e=this.replayer.getCurrentTime()+this.getFirstEventTimestamp();return _e.rrweb("Getting current timestamp",{timestamp:e}),e}catch(e){return _e.error("Error getting current timestamp",e),0}}getIframeDocument(){return _e.rrweb("Getting iframe document"),this.replayer.iframe.contentDocument}start(e,t=[]){}async fastForward(e){if(_e.rrweb("Fast forwarding events",{eventsCount:e.length}),!this.replayer)if(this.config.onlyLive)_e.rrweb("Creating live replayer",{baselineTime:e[0].timestamp}),this.makeReplayer([],{baselineTime:e[0].timestamp});else if(this.initialEventsBuffer.push(...e),_e.rrweb("Buffering initial events",{bufferSize:this.initialEventsBuffer.length}),this.initialEventsBuffer.length>=2)this.makeReplayer(this.initialEventsBuffer);else return;let t=0,r=new Promise(i=>{this.subscribeTo("fastForward",[ve.EventCast],o=>{t++,t===e.length&&(this.unsubscribeFrom("fastForward"),i())})});for(let i of e){i.type===j.FullSnapshot&&(_e.rrweb("Updating last snapshot"),this.lastSnapshot=i);let o=i;try{o=await Fi.replaceBlobUrls(i)}finally{this.replayer.addEvent(o)}Bn(i,{includeBlur:!1,includeFocus:!1})&&this.interactionEventsTimestamps.push(i.timestamp)}return r}monitorTime(e,t,r=this.animationFrameStepHandler){let i=l(()=>{this.timer&&(r.cancel(this.timer),this.timer=null)},"stopTimer");i();let o=l(()=>{let a=this.replayer.getCurrentTime();if(e&&a>=e){t(),i();return}else console.log(`[SessionReplayer] monitoring time, current: ${a}; target: ${e}...`);let u=this.replayer.getMetaData();a<u.totalTime&&(this.timer=r.wait(o))},"update");this.timer=r.wait(o)}async seek(e,t=!0){return _e.info("Seeking to timestamp",{timestamp:e,pause:t}),new Promise(r=>{if(this.newRRWebSeekMode)this.subscribeTo("seek",[ve.EventCast],i=>{if(i.timestamp>=e){if(this.unsubscribeFrom("seek"),t){this.replayer.pause(),requestAnimationFrame(()=>{this.getReplayerContext().timer.clear(),r()});return}r()}}),this.replayer.play();else{let i=e-this.getFirstEventTimestamp();this.monitorTime(i,()=>{t&&this.replayer.pause(),r()}),this.replayer.play(i)}})}async goLive(){let e=this.getLastEventTimestamp();_e.info("Going live",{lastTimestamp:e}),await this.replayerListenersManager.wrapWithLoadingState(async()=>{await this.seek(e,!1),await(0,Wd.default)(1e3)})}async goBack(e,{sleepAfter:t=100,beforeTimestamp:r=!1,includeAllMatchingTimestamps:i=!1}={}){_e.info("Going back to timestamp",{timestamp:e,sleepAfter:t,beforeTimestamp:r,includeAllMatchingTimestamps:i}),await this.replayerListenersManager.wrapWithLoadingState(async()=>{await this.seek(e,!0),t&&await(0,Wd.default)(t)})}getReplayerContext(){return this.replayer.service.state.context}setupDebugMode(){window.__chkreplayer={events:l(()=>this.getReplayerContext().events,"events"),stringifyEvents:l(()=>this.getReplayerContext().events.map(Hd),"stringifyEvents"),stringifyActionEvents:l(()=>this.getReplayerContext().events.filter(e=>Bn(e)).map(Hd),"stringifyActionEvents"),back:l(e=>this.goBack(e),"back"),live:l(()=>this.goLive(),"live"),currentTime:l(()=>this.replayer.getCurrentTime(),"currentTime"),getReplayer:l(()=>this.replayer,"getReplayer"),getThis:l(()=>this,"getThis")}}disableInteractiveElements(){_e.rrweb("Disabling interactive elements");let e=this.replayer.iframe.contentDocument||this.replayer.iframe.contentWindow.document;new MutationObserver(()=>kS(e)).observe(e,{childList:!0,subtree:!0})}};var hc=class{static{l(this,"Streamer")}constructor(e={}){this.sessionReplayer=new $i(e),this.eventProcessor=new uc({eventHandlers:new Pi})}setEventHandlers(e){e.setSessionReplayer(this.sessionReplayer),this.eventHandlers=e,this.eventProcessor.setHandlers(this.eventHandlers)}start(e){this.sessionReplayer.start(e)}async handleEvent(e){return await this.eventProcessor.preCastEvent(e),await this.sessionReplayer.fastForward([e]),await this.eventProcessor.processEvent(e)}handleEvents(e){return this.skipEvents(e)}async skipEvents(e){await this.eventProcessor.skipEvents(e),await this.sessionReplayer.fastForward(e)}stop(){this.sessionReplayer.stop()}};var dc=class{constructor(e){this.timeMachine=e;this.seekbarMin=Date.now();this.seekbarMax=Date.now();this.listeningToTimeMachine=!1}static{l(this,"TimeMachineSeeker")}open(){let e=document.getElementById("time-machine-seekbar");e&&e.remove(),this.seekbarMax=Date.now(),console.log("Creating seekbar with min/max timestamp",this.seekbarMin,this.seekbarMax),console.log("Current timestamp",this.timeMachine.getCurrentTimestamp());let t=0,r=1,i=.001,o=document.createElement("div");o.id="time-machine-seekbar",o.style.position="absolute",o.style.width="90%",o.style.bottom="0",o.style.background="white",o.style.opacity="0.75",o.style.display="flex",o.style.justifyContent="center",o.style.alignItems="center",o.style.padding="10px",o.style.margin="0 20px",o.style.gap="10px";let a=document.createElement("input");a.type="range",a.min=t.toString(),a.max=r.toString(),a.step=i.toString(),a.value=a.max,a.style.flexGrow="1";let u=document.createElement("span");u.textContent=this.formatTimestamp(this.seekbarMax);let f=document.createElement("button");f.textContent="Refresh",f.addEventListener("click",()=>{this.open()}),o.appendChild(a),o.appendChild(u),o.appendChild(f),a.addEventListener("input",()=>{let h=parseFloat(a.value),p=this.getTimestamp(h);console.log("Seeking to timestamp",p),u.textContent=this.formatTimestamp(p),this.timeMachine.goBack(p)}),document.body.appendChild(o),this.addTMListeners()}getTimestamp(e){let t=Math.round(this.seekbarMin+e*(this.seekbarMax-this.seekbarMin));return t>this.seekbarMax?this.seekbarMax:t<this.seekbarMin?this.seekbarMin:t}formatTimestamp(e){let t=Math.max(0,Math.floor((e-this.seekbarMin)/1e3)),r=Math.floor(t/60),i=t%60;return`${String(r).padStart(2,"0")}:${String(i).padStart(2,"0")}`}addTMListeners(){this.listeningToTimeMachine||(this.listeningToTimeMachine=!0,this.timeMachine.sessionReplayer.replayerListenersManager?.addListener(e=>{e==="Processing"?this.showTimeMachineLoading():this.hideTimeMachineLoading()}))}showTimeMachineLoading(){let e=document.createElement("div");e.id="time-machine-loading",e.style.position="absolute",e.style.width="100%",e.style.height="100%",e.style.top="0",e.style.left="0",e.style.background="black",e.style.opacity="0.65",e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center";let t=document.createElement("div");t.style.color="white",t.style.fontSize="20px",t.style.cursor="pointer",t.textContent="Loading (if stuck, click here)...",t.addEventListener("click",()=>{this.hideTimeMachineLoading()}),e.appendChild(t),document.body.appendChild(e)}hideTimeMachineLoading(){let e=document.getElementById("time-machine-loading");e&&e.remove()}};var Cp={};YR(Cp,{IGNORED_NODE:()=>Yd,Mirror:()=>Vi,absolutifyURLs:()=>uo,adaptCssForReplay:()=>Bc,buildNodeWithSN:()=>Ep,classMatchesRegex:()=>Rc,cleanupSnapshot:()=>PF,createCache:()=>OH,createMirror:()=>pF,escapeImportStatement:()=>lE,extractFileExtension:()=>Dc,fixSafariColons:()=>uE,genId:()=>wE,getInputType:()=>gE,ignoreAttribute:()=>EE,is2DCanvasBlank:()=>pE,isCSSImportRule:()=>fE,isCSSStyleRule:()=>hE,isElement:()=>_c,isNativeShadowDom:()=>xc,isNodeMetaEqual:()=>mE,isShadowRoot:()=>aE,markCssSplits:()=>bE,maskInputValue:()=>dE,needMaskingText:()=>CE,normalizeCssString:()=>co,rebuild:()=>PH,serializeNodeWithId:()=>Wi,snapshot:()=>DF,splitCssText:()=>yE,stringifyRule:()=>cE,stringifyStylesheet:()=>Ic,toLowerCase:()=>go,transformAttribute:()=>SE,visitSnapshot:()=>kF});var ZP=Object.defineProperty,JP=l((n,e,t)=>e in n?ZP(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,"__defNormalProp"),PS=l((n,e,t)=>JP(n,typeof e!="symbol"?e+"":e,t),"__publicField"),le=(n=>(n[n.Document=0]="Document",n[n.DocumentType=1]="DocumentType",n[n.Element=2]="Element",n[n.Text=3]="Text",n[n.CDATA=4]="CDATA",n[n.Comment=5]="Comment",n))(le||{}),FS={Node:["childNodes","parentNode","parentElement","textContent"],ShadowRoot:["host","styleSheets"],Element:["shadowRoot","querySelector","querySelectorAll"],MutationObserver:[]},$S={Node:["contains","getRootNode"],ShadowRoot:["getSelection"],Element:[],MutationObserver:["constructor"]},pc={},QP=l(()=>!!globalThis.Zone,"isAngularZonePresent");function up(n){if(pc[n])return pc[n];let e=globalThis[n],t=e.prototype,r=n in FS?FS[n]:void 0,i=!!(r&&r.every(u=>{var f,h;return!!((h=(f=Object.getOwnPropertyDescriptor(t,u))==null?void 0:f.get)!=null&&h.toString().includes("[native code]"))})),o=n in $S?$S[n]:void 0,a=!!(o&&o.every(u=>{var f;return typeof t[u]=="function"&&((f=t[u])==null?void 0:f.toString().includes("[native code]"))}));if(i&&a&&!QP())return pc[n]=e.prototype,e.prototype;try{let u=document.createElement("iframe");document.body.appendChild(u);let f=u.contentWindow;if(!f)return e.prototype;let h=f[n].prototype;return document.body.removeChild(u),h?pc[n]=h:t}catch{return t}}l(up,"getUntaintedPrototype");var Vd={};function gn(n,e,t){var r;let i=`${n}.${String(t)}`;if(Vd[i])return Vd[i].call(e);let o=up(n),a=(r=Object.getOwnPropertyDescriptor(o,t))==null?void 0:r.get;return a?(Vd[i]=a,a.call(e)):e[t]}l(gn,"getUntaintedAccessor");var Ud={};function oE(n,e,t){let r=`${n}.${String(t)}`;if(Ud[r])return Ud[r].bind(e);let o=up(n)[t];return typeof o!="function"?e[t]:(Ud[r]=o,o.bind(e))}l(oE,"getUntaintedMethod");function eF(n){return gn("Node",n,"childNodes")}l(eF,"childNodes");function tF(n){return gn("Node",n,"parentNode")}l(tF,"parentNode");function rF(n){return gn("Node",n,"parentElement")}l(rF,"parentElement");function nF(n){return gn("Node",n,"textContent")}l(nF,"textContent");function iF(n,e){return oE("Node",n,"contains")(e)}l(iF,"contains");function sF(n){return oE("Node",n,"getRootNode")()}l(sF,"getRootNode");function oF(n){return!n||!("host"in n)?null:gn("ShadowRoot",n,"host")}l(oF,"host");function aF(n){return n.styleSheets}l(aF,"styleSheets");function lF(n){return!n||!("shadowRoot"in n)?null:gn("Element",n,"shadowRoot")}l(lF,"shadowRoot");function cF(n,e){return gn("Element",n,"querySelector")(e)}l(cF,"querySelector");function uF(n,e){return gn("Element",n,"querySelectorAll")(e)}l(uF,"querySelectorAll");function fF(){return up("MutationObserver").constructor}l(fF,"mutationObserverCtor");function hF(n,e,t){try{if(!(e in n))return()=>{};let r=n[e],i=t(r);return typeof i=="function"&&(i.prototype=i.prototype||{},Object.defineProperties(i,{__rrweb_original__:{enumerable:!1,value:r}})),n[e]=i,()=>{n[e]=r}}catch{return()=>{}}}l(hF,"patch");var St={childNodes:eF,parentNode:tF,parentElement:rF,textContent:nF,contains:iF,getRootNode:sF,host:oF,styleSheets:aF,shadowRoot:lF,querySelector:cF,querySelectorAll:uF,mutationObserver:fF,patch:hF};function _c(n){return n.nodeType===n.ELEMENT_NODE}l(_c,"isElement");function aE(n){let e=n&&"host"in n&&"mode"in n&&St.host(n)||null;return!!(e&&"shadowRoot"in e&&St.shadowRoot(e)===n)}l(aE,"isShadowRoot");function xc(n){return Object.prototype.toString.call(n)==="[object ShadowRoot]"}l(xc,"isNativeShadowDom");function dF(n){return n.includes(" background-clip: text;")&&!n.includes(" -webkit-background-clip: text;")&&(n=n.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),n}l(dF,"fixBrowserCompatibilityIssuesInCSS");function lE(n){let{cssText:e}=n;if(e.split('"').length<3)return e;let t=["@import",`url(${JSON.stringify(n.href)})`];return n.layerName===""?t.push("layer"):n.layerName&&t.push(`layer(${n.layerName})`),n.supportsText&&t.push(`supports(${n.supportsText})`),n.media.length&&t.push(n.media.mediaText),t.join(" ")+";"}l(lE,"escapeImportStatement");function Ic(n){try{let e=n.rules||n.cssRules;if(!e)return null;let t=n.href;!t&&n.ownerNode&&n.ownerNode.ownerDocument&&(t=n.ownerNode.ownerDocument.location.href);let r=Array.from(e,i=>cE(i,t)).join("");return dF(r)}catch{return null}}l(Ic,"stringifyStylesheet");function cE(n,e){if(fE(n)){let t;try{t=Ic(n.styleSheet)||lE(n)}catch{t=n.cssText}return n.styleSheet.href?uo(t,n.styleSheet.href):t}else{let t=n.cssText;return hE(n)&&n.selectorText.includes(":")&&(t=uE(t)),e?uo(t,e):t}}l(cE,"stringifyRule");function uE(n){let e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return n.replace(e,"$1\\$2")}l(uE,"fixSafariColons");function fE(n){return"styleSheet"in n}l(fE,"isCSSImportRule");function hE(n){return"selectorText"in n}l(hE,"isCSSStyleRule");var Vi=class{static{l(this,"Mirror")}constructor(){PS(this,"idNodeMap",new Map),PS(this,"nodeMetaMap",new WeakMap)}getId(e){var t;return e?((t=this.getMeta(e))==null?void 0:t.id)??-1:-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){let t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(r=>this.removeNodeFromMap(r))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){let r=t.id;this.idNodeMap.set(r,e),this.nodeMetaMap.set(e,t)}replace(e,t){let r=this.getNode(e);if(r){let i=this.nodeMetaMap.get(r);i&&this.nodeMetaMap.set(t,i)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function pF(){return new Vi}l(pF,"createMirror");function dE({element:n,maskInputOptions:e,tagName:t,type:r,value:i,maskInputFn:o}){let a=i||"",u=r&&go(r);return(e[t.toLowerCase()]||u&&e[u])&&(o?a=o(a,n):a="*".repeat(a.length)),a}l(dE,"maskInputValue");function go(n){return n.toLowerCase()}l(go,"toLowerCase");var HS="__rrweb_original__";function pE(n){let e=n.getContext("2d");if(!e)return!0;let t=50;for(let r=0;r<n.width;r+=t)for(let i=0;i<n.height;i+=t){let o=e.getImageData,a=HS in o?o[HS]:o;if(new Uint32Array(a.call(e,r,i,Math.min(t,n.width-r),Math.min(t,n.height-i)).data.buffer).some(f=>f!==0))return!1}return!0}l(pE,"is2DCanvasBlank");function mE(n,e){return!n||!e||n.type!==e.type?!1:n.type===le.Document?n.compatMode===e.compatMode:n.type===le.DocumentType?n.name===e.name&&n.publicId===e.publicId&&n.systemId===e.systemId:n.type===le.Comment||n.type===le.Text||n.type===le.CDATA?n.textContent===e.textContent:n.type===le.Element?n.tagName===e.tagName&&JSON.stringify(n.attributes)===JSON.stringify(e.attributes)&&n.isSVG===e.isSVG&&n.needBlock===e.needBlock:!1}l(mE,"isNodeMetaEqual");function gE(n){let e=n.type;return n.hasAttribute("data-rr-is-password")?"password":e?go(e):null}l(gE,"getInputType");function Dc(n,e){let t;try{t=new URL(n,e??window.location.href)}catch{return null}let r=/\.([0-9a-z]+)(?:$)/i,i=t.pathname.match(r);return i?.[1]??null}l(Dc,"extractFileExtension");function mF(n){let e="";return n.indexOf("//")>-1?e=n.split("/").slice(0,3).join("/"):e=n.split("/")[0],e=e.split("?")[0],e}l(mF,"extractOrigin");var gF=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,yF=/^(?:[a-z+]+:)?\/\//i,bF=/^www\..*/i,vF=/^(data:)([^,]*),(.*)/i;function uo(n,e){return(n||"").replace(gF,(t,r,i,o,a,u)=>{let f=i||a||u,h=r||o||"";if(!f)return t;if(yF.test(f)||bF.test(f))return`url(${h}${f}${h})`;if(vF.test(f))return`url(${h}${f}${h})`;if(f[0]==="/")return`url(${h}${mF(e)+f}${h})`;let p=e.split("/"),g=f.split("/");p.pop();for(let y of g)y!=="."&&(y===".."?p.pop():p.push(y));return`url(${h}${p.join("/")}${h})`})}l(uo,"absolutifyURLs");function co(n,e=!1){return e?n.replace(/(\/\*[^*]*\*\/)|[\s;]/g,""):n.replace(/(\/\*[^*]*\*\/)|[\s;]/g,"").replace(/0px/g,"0")}l(co,"normalizeCssString");function yE(n,e,t=!1){let r=Array.from(e.childNodes),i=[],o=0;if(r.length>1&&n&&typeof n=="string"){let a=co(n,t),u=a.length/n.length;for(let f=1;f<r.length;f++)if(r[f].textContent&&typeof r[f].textContent=="string"){let h=co(r[f].textContent,t),p=100,g=3;for(;g<h.length&&(h[g].match(/[a-zA-Z0-9]/)||h.indexOf(h.substring(0,g),1)!==-1);g++);for(;g<h.length;g++){let y=h.substring(0,g),w=a.split(y),S=-1;if(w.length===2)S=w[0].length;else if(w.length>2&&w[0]===""&&r[f-1].textContent!=="")S=a.indexOf(y,1);else if(w.length===1){if(y=y.substring(0,y.length-1),w=a.split(y),w.length<=1)return i.push(n),i;g=p+1}else g===h.length-1&&(S=a.indexOf(y));if(w.length>=2&&g>p){let E=r[f-1].textContent;if(E&&typeof E=="string"){let v=co(E).length;S=a.indexOf(y,v)}S===-1&&(S=w[0].length)}if(S!==-1){let E=Math.floor(S/u);for(;E>0&&E<n.length;){if(o+=1,o>50*r.length)return i.push(n),i;let v=co(n.substring(0,E),t);if(v.length===S){i.push(n.substring(0,E)),n=n.substring(E),a=a.substring(S);break}else v.length<S?E+=Math.max(1,Math.floor((S-v.length)/u)):E-=Math.max(1,Math.floor((v.length-S)*u))}break}}}}return i.push(n),i}l(yE,"splitCssText");function bE(n,e){return yE(n,e).join("/* rr_split */")}l(bE,"markCssSplits");var vE=1,wF=new RegExp("[^a-z0-9-_:]"),Yd=-2;function wE(){return vE++}l(wE,"genId");function SF(n){if(n instanceof HTMLFormElement)return"form";let e=go(n.tagName);return wF.test(e)?"div":e}l(SF,"getValidTagName");var Hi,BS,EF=/^[^ \t\n\r\u000c]+/,CF=/^[, \t\n\r\u000c]+/;function xF(n,e){if(e.trim()==="")return e;let t=0;function r(o){let a,u=o.exec(e.substring(t));return u?(a=u[0],t+=a.length,a):""}l(r,"collectCharacters");let i=[];for(;r(CF),!(t>=e.length);){let o=r(EF);if(o.slice(-1)===",")o=Bi(n,o.substring(0,o.length-1)),i.push(o);else{let a="";o=Bi(n,o);let u=!1;for(;;){let f=e.charAt(t);if(f===""){i.push((o+a).trim());break}else if(u)f===")"&&(u=!1);else if(f===","){t+=1,i.push((o+a).trim());break}else f==="("&&(u=!0);a+=f,t+=1}}}return i.join(", ")}l(xF,"getAbsoluteSrcsetString");var WS=new WeakMap;function Bi(n,e){return!e||e.trim()===""?e:fp(n,e)}l(Bi,"absoluteToDoc");function MF(n){return!!(n.tagName==="svg"||n.ownerSVGElement)}l(MF,"isSVGElement");function fp(n,e){let t=WS.get(n);if(t||(t=n.createElement("a"),WS.set(n,t)),!e)e="";else if(e.startsWith("blob:")||e.startsWith("data:"))return e;return t.setAttribute("href",e),t.href}l(fp,"getHref");function SE(n,e,t,r){return r&&(t==="src"||t==="href"&&!(e==="use"&&r[0]==="#")||t==="xlink:href"&&r[0]!=="#"||t==="background"&&(e==="table"||e==="td"||e==="th")?Bi(n,r):t==="srcset"?xF(n,r):t==="style"?uo(r,fp(n)):e==="object"&&t==="data"?Bi(n,r):r)}l(SE,"transformAttribute");function EE(n,e,t){return(n==="video"||n==="audio")&&e==="autoplay"}l(EE,"ignoreAttribute");function TF(n,e,t){try{if(typeof e=="string"){if(n.classList.contains(e))return!0}else for(let r=n.classList.length;r--;){let i=n.classList[r];if(e.test(i))return!0}if(t)return n.matches(t)}catch{}return!1}l(TF,"_isBlockedElement");function Rc(n,e,t){if(!n)return!1;if(n.nodeType!==n.ELEMENT_NODE)return t?Rc(St.parentNode(n),e,t):!1;for(let r=n.classList.length;r--;){let i=n.classList[r];if(e.test(i))return!0}return t?Rc(St.parentNode(n),e,t):!1}l(Rc,"classMatchesRegex");function CE(n,e,t,r){let i;if(_c(n)){if(i=n,!St.childNodes(i).length)return!1}else{if(St.parentElement(n)===null)return!1;i=St.parentElement(n)}try{if(typeof e=="string"){if(r){if(i.closest(`.${e}`))return!0}else if(i.classList.contains(e))return!0}else if(Rc(i,e,r))return!0;if(t){if(r){if(i.closest(t))return!0}else if(i.matches(t))return!0}}catch{}return!1}l(CE,"needMaskingText");function IF(n,e,t){let r=n.contentWindow;if(!r)return;let i=!1,o;try{o=r.document.readyState}catch{return}if(o!=="complete"){let u=setTimeout(()=>{i||(e(),i=!0)},t);n.addEventListener("load",()=>{clearTimeout(u),i=!0,e()});return}let a="about:blank";if(r.location.href!==a||n.src===a||n.src==="")return setTimeout(e,0),n.addEventListener("load",e);n.addEventListener("load",e)}l(IF,"onceIframeLoaded");function RF(n,e,t){let r=!1,i;try{i=n.sheet}catch{return}if(i)return;let o=setTimeout(()=>{r||(e(),r=!0)},t);n.addEventListener("load",()=>{clearTimeout(o),r=!0,e()})}l(RF,"onceStylesheetLoaded");function AF(n,e){let{doc:t,mirror:r,blockClass:i,blockSelector:o,needsMask:a,inlineStylesheet:u,maskInputOptions:f={},maskTextFn:h,maskInputFn:p,dataURLOptions:g={},inlineImages:y,recordCanvas:w,keepIframeSrcFn:S,newlyAddedElement:E=!1,cssCaptured:v=!1}=e,M=OF(t,r);switch(n.nodeType){case n.DOCUMENT_NODE:return n.compatMode!=="CSS1Compat"?{type:le.Document,childNodes:[],compatMode:n.compatMode}:{type:le.Document,childNodes:[]};case n.DOCUMENT_TYPE_NODE:return{type:le.DocumentType,name:n.name,publicId:n.publicId,systemId:n.systemId,rootId:M};case n.ELEMENT_NODE:return NF(n,{doc:t,blockClass:i,blockSelector:o,inlineStylesheet:u,maskInputOptions:f,maskInputFn:p,dataURLOptions:g,inlineImages:y,recordCanvas:w,keepIframeSrcFn:S,newlyAddedElement:E,rootId:M});case n.TEXT_NODE:return LF(n,{doc:t,needsMask:a,maskTextFn:h,rootId:M,cssCaptured:v});case n.CDATA_SECTION_NODE:return{type:le.CDATA,textContent:"",rootId:M};case n.COMMENT_NODE:return{type:le.Comment,textContent:St.textContent(n)||"",rootId:M};default:return!1}}l(AF,"serializeNode");function OF(n,e){if(!e.hasNode(n))return;let t=e.getId(n);return t===1?void 0:t}l(OF,"getRootId");function LF(n,e){let{needsMask:t,maskTextFn:r,rootId:i,cssCaptured:o}=e,a=St.parentNode(n),u=a&&a.tagName,f="",h=u==="STYLE"?!0:void 0,p=u==="SCRIPT"?!0:void 0;return p?f="SCRIPT_PLACEHOLDER":o||(f=St.textContent(n),h&&f&&(f=uo(f,fp(e.doc)))),!h&&!p&&f&&t&&(f=r?r(f,St.parentElement(n)):f.replace(/[\S]/g,"*")),{type:le.Text,textContent:f||"",rootId:i}}l(LF,"serializeTextNode");function NF(n,e){let{doc:t,blockClass:r,blockSelector:i,inlineStylesheet:o,maskInputOptions:a={},maskInputFn:u,dataURLOptions:f={},inlineImages:h,recordCanvas:p,keepIframeSrcFn:g,newlyAddedElement:y=!1,rootId:w}=e,S=TF(n,r,i),E=SF(n),v={},M=n.attributes.length;for(let T=0;T<M;T++){let N=n.attributes[T];EE(E,N.name,N.value)||(v[N.name]=SE(t,E,go(N.name),N.value))}if(E==="link"&&o){let T=Array.from(t.styleSheets).find(U=>U.href===n.href),N=null;T&&(N=Ic(T)),N&&(delete v.rel,delete v.href,v._cssText=N)}if(E==="style"&&n.sheet){let T=Ic(n.sheet);T&&(n.childNodes.length>1&&(T=bE(T,n)),v._cssText=T)}if(E==="input"||E==="textarea"||E==="select"){let T=n.value,N=n.checked;v.type!=="radio"&&v.type!=="checkbox"&&v.type!=="submit"&&v.type!=="button"&&T?v.value=dE({element:n,type:gE(n),tagName:E,value:T,maskInputOptions:a,maskInputFn:u}):N&&(v.checked=N)}if(E==="option"&&(n.selected&&!a.select?v.selected=!0:delete v.selected),E==="dialog"&&n.open&&(v.rr_open_mode=n.matches("dialog:modal")?"modal":"non-modal"),E==="canvas"&&p){if(n.__context==="2d")pE(n)||(v.rr_dataURL=n.toDataURL(f.type,f.quality));else if(!("__context"in n)){let T=n.toDataURL(f.type,f.quality),N=t.createElement("canvas");N.width=n.width,N.height=n.height;let U=N.toDataURL(f.type,f.quality);T!==U&&(v.rr_dataURL=T)}}if(E==="img"&&h){Hi||(Hi=t.createElement("canvas"),BS=Hi.getContext("2d"));let T=n,N=T.currentSrc||T.getAttribute("src")||"<unknown-src>",U=T.crossOrigin,G=l(()=>{T.removeEventListener("load",G);try{Hi.width=T.naturalWidth,Hi.height=T.naturalHeight,BS.drawImage(T,0,0),v.rr_dataURL=Hi.toDataURL(f.type,f.quality)}catch(Q){if(T.crossOrigin!=="anonymous"){T.crossOrigin="anonymous",T.complete&&T.naturalWidth!==0?G():T.addEventListener("load",G);return}else console.warn(`Cannot inline img src=${N}! Error: ${Q}`)}T.crossOrigin==="anonymous"&&(U?v.crossOrigin=U:T.removeAttribute("crossorigin"))},"recordInlineImage");T.complete&&T.naturalWidth!==0?G():T.addEventListener("load",G)}if(E==="audio"||E==="video"){let T=v;T.rr_mediaState=n.paused?"paused":"played",T.rr_mediaCurrentTime=n.currentTime,T.rr_mediaPlaybackRate=n.playbackRate,T.rr_mediaMuted=n.muted,T.rr_mediaLoop=n.loop,T.rr_mediaVolume=n.volume}if(y||(n.scrollLeft&&(v.rr_scrollLeft=n.scrollLeft),n.scrollTop&&(v.rr_scrollTop=n.scrollTop)),S){let{width:T,height:N}=n.getBoundingClientRect();v={class:v.class,rr_width:`${T}px`,rr_height:`${N}px`}}E==="iframe"&&!g(v.src)&&(n.contentDocument||(v.rr_src=v.src),delete v.src);let A;try{customElements.get(E)&&(A=!0)}catch{}return{type:le.Element,tagName:E,attributes:v,childNodes:[],isSVG:MF(n)||void 0,needBlock:S,rootId:w,isCustom:A}}l(NF,"serializeElementNode");function Be(n){return n==null?"":n.toLowerCase()}l(Be,"lowerIfExists");function _F(n,e){if(e.comment&&n.type===le.Comment)return!0;if(n.type===le.Element){if(e.script&&(n.tagName==="script"||n.tagName==="link"&&(n.attributes.rel==="preload"&&n.attributes.as==="script"||n.attributes.rel==="modulepreload")||n.tagName==="link"&&n.attributes.rel==="prefetch"&&typeof n.attributes.href=="string"&&Dc(n.attributes.href)==="js"))return!0;if(e.headFavicon&&(n.tagName==="link"&&n.attributes.rel==="shortcut icon"||n.tagName==="meta"&&(Be(n.attributes.name).match(/^msapplication-tile(image|color)$/)||Be(n.attributes.name)==="application-name"||Be(n.attributes.rel)==="icon"||Be(n.attributes.rel)==="apple-touch-icon"||Be(n.attributes.rel)==="shortcut icon")))return!0;if(n.tagName==="meta"){if(e.headMetaDescKeywords&&Be(n.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(Be(n.attributes.property).match(/^(og|twitter|fb):/)||Be(n.attributes.name).match(/^(og|twitter):/)||Be(n.attributes.name)==="pinterest"))return!0;if(e.headMetaRobots&&(Be(n.attributes.name)==="robots"||Be(n.attributes.name)==="googlebot"||Be(n.attributes.name)==="bingbot"))return!0;if(e.headMetaHttpEquiv&&n.attributes["http-equiv"]!==void 0)return!0;if(e.headMetaAuthorship&&(Be(n.attributes.name)==="author"||Be(n.attributes.name)==="generator"||Be(n.attributes.name)==="framework"||Be(n.attributes.name)==="publisher"||Be(n.attributes.name)==="progid"||Be(n.attributes.property).match(/^article:/)||Be(n.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&(Be(n.attributes.name)==="google-site-verification"||Be(n.attributes.name)==="yandex-verification"||Be(n.attributes.name)==="csrf-token"||Be(n.attributes.name)==="p:domain_verify"||Be(n.attributes.name)==="verify-v1"||Be(n.attributes.name)==="verification"||Be(n.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}l(_F,"slimDOMExcluded");function Wi(n,e){let{doc:t,mirror:r,blockClass:i,blockSelector:o,maskTextClass:a,maskTextSelector:u,skipChild:f=!1,inlineStylesheet:h=!0,maskInputOptions:p={},maskTextFn:g,maskInputFn:y,slimDOMOptions:w,dataURLOptions:S={},inlineImages:E=!1,recordCanvas:v=!1,onSerialize:M,onIframeLoad:A,iframeLoadTimeout:T=5e3,onStylesheetLoad:N,stylesheetLoadTimeout:U=5e3,keepIframeSrcFn:G=l(()=>!1,"keepIframeSrcFn"),newlyAddedElement:Q=!1,cssCaptured:W=!1}=e,{needsMask:z}=e,{preserveWhiteSpace:re=!0}=e;z||(z=CE(n,a,u,z===void 0));let B=AF(n,{doc:t,mirror:r,blockClass:i,blockSelector:o,needsMask:z,inlineStylesheet:h,maskInputOptions:p,maskTextFn:g,maskInputFn:y,dataURLOptions:S,inlineImages:E,recordCanvas:v,keepIframeSrcFn:G,newlyAddedElement:Q,cssCaptured:W});if(!B)return console.warn(n,"not serialized"),null;let q;r.hasNode(n)?q=r.getId(n):_F(B,w)||!re&&B.type===le.Text&&!B.textContent.replace(/^\s+|\s+$/gm,"").length?q=Yd:q=wE();let k=Object.assign(B,{id:q});if(r.add(n,k),q===Yd)return null;M&&M(n);let ee=!f;if(k.type===le.Element){ee=ee&&!k.needBlock,delete k.needBlock;let Y=St.shadowRoot(n);Y&&xc(Y)&&(k.isShadowHost=!0)}if((k.type===le.Document||k.type===le.Element)&&ee){w.headWhitespace&&k.type===le.Element&&k.tagName==="head"&&(re=!1);let Y={doc:t,mirror:r,blockClass:i,blockSelector:o,needsMask:z,maskTextClass:a,maskTextSelector:u,skipChild:f,inlineStylesheet:h,maskInputOptions:p,maskTextFn:g,maskInputFn:y,slimDOMOptions:w,dataURLOptions:S,inlineImages:E,recordCanvas:v,preserveWhiteSpace:re,onSerialize:M,onIframeLoad:A,iframeLoadTimeout:T,onStylesheetLoad:N,stylesheetLoadTimeout:U,keepIframeSrcFn:G,cssCaptured:!1};if(!(k.type===le.Element&&k.tagName==="textarea"&&k.attributes.value!==void 0)){k.type===le.Element&&k.attributes._cssText!==void 0&&typeof k.attributes._cssText=="string"&&(Y.cssCaptured=!0);for(let Ae of Array.from(St.childNodes(n))){let xe=Wi(Ae,Y);xe&&k.childNodes.push(xe)}}let he=null;if(_c(n)&&(he=St.shadowRoot(n)))for(let Ae of Array.from(St.childNodes(he))){let xe=Wi(Ae,Y);xe&&(xc(he)&&(xe.isShadow=!0),k.childNodes.push(xe))}}let X=St.parentNode(n);return X&&aE(X)&&xc(X)&&(k.isShadow=!0),k.type===le.Element&&k.tagName==="iframe"&&IF(n,()=>{let Y=n.contentDocument;if(Y&&A){let he=Wi(Y,{doc:Y,mirror:r,blockClass:i,blockSelector:o,needsMask:z,maskTextClass:a,maskTextSelector:u,skipChild:!1,inlineStylesheet:h,maskInputOptions:p,maskTextFn:g,maskInputFn:y,slimDOMOptions:w,dataURLOptions:S,inlineImages:E,recordCanvas:v,preserveWhiteSpace:re,onSerialize:M,onIframeLoad:A,iframeLoadTimeout:T,onStylesheetLoad:N,stylesheetLoadTimeout:U,keepIframeSrcFn:G});he&&A(n,he)}},T),k.type===le.Element&&k.tagName==="link"&&typeof k.attributes.rel=="string"&&(k.attributes.rel==="stylesheet"||k.attributes.rel==="preload"&&typeof k.attributes.href=="string"&&Dc(k.attributes.href)==="css")&&RF(n,()=>{if(N){let Y=Wi(n,{doc:t,mirror:r,blockClass:i,blockSelector:o,needsMask:z,maskTextClass:a,maskTextSelector:u,skipChild:!1,inlineStylesheet:h,maskInputOptions:p,maskTextFn:g,maskInputFn:y,slimDOMOptions:w,dataURLOptions:S,inlineImages:E,recordCanvas:v,preserveWhiteSpace:re,onSerialize:M,onIframeLoad:A,iframeLoadTimeout:T,onStylesheetLoad:N,stylesheetLoadTimeout:U,keepIframeSrcFn:G});Y&&N(n,Y)}},U),k}l(Wi,"serializeNodeWithId");function DF(n,e){let{mirror:t=new Vi,blockClass:r="rr-block",blockSelector:i=null,maskTextClass:o="rr-mask",maskTextSelector:a=null,inlineStylesheet:u=!0,inlineImages:f=!1,recordCanvas:h=!1,maskAllInputs:p=!1,maskTextFn:g,maskInputFn:y,slimDOM:w=!1,dataURLOptions:S,preserveWhiteSpace:E,onSerialize:v,onIframeLoad:M,iframeLoadTimeout:A,onStylesheetLoad:T,stylesheetLoadTimeout:N,keepIframeSrcFn:U=l(()=>!1,"keepIframeSrcFn")}=e||{};return Wi(n,{doc:n,mirror:t,blockClass:r,blockSelector:i,maskTextClass:o,maskTextSelector:a,skipChild:!1,inlineStylesheet:u,maskInputOptions:p===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:p===!1?{password:!0}:p,maskTextFn:g,maskInputFn:y,slimDOMOptions:w===!0||w==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:w==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:w===!1?{}:w,dataURLOptions:S,inlineImages:f,recordCanvas:h,preserveWhiteSpace:E,onSerialize:v,onIframeLoad:M,iframeLoadTimeout:A,onStylesheetLoad:T,stylesheetLoadTimeout:N,keepIframeSrcFn:U,newlyAddedElement:!1})}l(DF,"snapshot");function kF(n,e){function t(r){e(r),(r.type===le.Document||r.type===le.Element)&&r.childNodes.forEach(t)}l(t,"walk"),t(n)}l(kF,"visitSnapshot");function PF(){vE=1}l(PF,"cleanupSnapshot");var FF=/(max|min)-device-(width|height)/,VS=new RegExp(FF.source,"g"),$F={postcssPlugin:"postcss-custom-selectors",prepare(){return{postcssPlugin:"postcss-custom-selectors",AtRule:l(function(n){n.params.match(VS)&&(n.params=n.params.replace(VS,"$1-$2"))},"AtRule")}}},HF={postcssPlugin:"postcss-hover-classes",prepare:l(function(){let n=[];return{Rule:l(function(e){n.indexOf(e)===-1&&(n.push(e),e.selectors.forEach(function(t){t.includes(":hover")&&(e.selector+=`,
`+t.replace(/:hover/g,".\\:hover"))}))},"Rule")}},"prepare")};function BF(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}l(BF,"getDefaultExportFromCjs");function WF(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=l(function r(){return this instanceof r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)},"a2");t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(r){var i=Object.getOwnPropertyDescriptor(n,r);Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:l(function(){return n[r]},"get")})}),t}l(WF,"getAugmentedNamespace");var hp={exports:{}},je=String,xE=l(function(){return{isColorSupported:!1,reset:je,bold:je,dim:je,italic:je,underline:je,inverse:je,hidden:je,strikethrough:je,black:je,red:je,green:je,yellow:je,blue:je,magenta:je,cyan:je,white:je,gray:je,bgBlack:je,bgRed:je,bgGreen:je,bgYellow:je,bgBlue:je,bgMagenta:je,bgCyan:je,bgWhite:je}},"create");hp.exports=xE();hp.exports.createColors=xE;var VF=hp.exports,UF={},GF=Object.freeze(Object.defineProperty({__proto__:null,default:UF},Symbol.toStringTag,{value:"Module"})),ar=WF(GF),US=VF,GS=ar,Kd=class ME extends Error{static{l(this,"CssSyntaxError")}constructor(e,t,r,i,o,a){super(e),this.name="CssSyntaxError",this.reason=e,o&&(this.file=o),i&&(this.source=i),a&&(this.plugin=a),typeof t<"u"&&typeof r<"u"&&(typeof t=="number"?(this.line=t,this.column=r):(this.line=t.line,this.column=t.column,this.endLine=r.line,this.endColumn=r.column)),this.setMessage(),Error.captureStackTrace&&Error.captureStackTrace(this,ME)}setMessage(){this.message=this.plugin?this.plugin+": ":"",this.message+=this.file?this.file:"<css input>",typeof this.line<"u"&&(this.message+=":"+this.line+":"+this.column),this.message+=": "+this.reason}showSourceCode(e){if(!this.source)return"";let t=this.source;e==null&&(e=US.isColorSupported),GS&&e&&(t=GS(t));let r=t.split(/\r?\n/),i=Math.max(this.line-3,0),o=Math.min(this.line+2,r.length),a=String(o).length,u,f;if(e){let{bold:h,gray:p,red:g}=US.createColors(!0);u=l(y=>h(g(y)),"mark"),f=l(y=>p(y),"aside")}else u=f=l(h=>h,"aside");return r.slice(i,o).map((h,p)=>{let g=i+1+p,y=" "+(" "+g).slice(-a)+" | ";if(g===this.line){let w=f(y.replace(/\d/g," "))+h.slice(0,this.column-1).replace(/[^\t]/g," ");return u(">")+f(y)+h+`
 `+w+u("^")}return" "+f(y)+h}).join(`
`)}toString(){let e=this.showSourceCode();return e&&(e=`

`+e+`
`),this.name+": "+this.message+e}},dp=Kd;Kd.default=Kd;var yo={};yo.isClean=Symbol("isClean");yo.my=Symbol("my");var zS={after:`
`,beforeClose:`
`,beforeComment:`
`,beforeDecl:`
`,beforeOpen:" ",beforeRule:`
`,colon:": ",commentLeft:" ",commentRight:" ",emptyBody:"",indent:"    ",semicolon:!1};function zF(n){return n[0].toUpperCase()+n.slice(1)}l(zF,"capitalize");var Xd=class{static{l(this,"Stringifier")}constructor(e){this.builder=e}atrule(e,t){let r="@"+e.name,i=e.params?this.rawValue(e,"params"):"";if(typeof e.raws.afterName<"u"?r+=e.raws.afterName:i&&(r+=" "),e.nodes)this.block(e,r+i);else{let o=(e.raws.between||"")+(t?";":"");this.builder(r+i+o,e)}}beforeAfter(e,t){let r;e.type==="decl"?r=this.raw(e,null,"beforeDecl"):e.type==="comment"?r=this.raw(e,null,"beforeComment"):t==="before"?r=this.raw(e,null,"beforeRule"):r=this.raw(e,null,"beforeClose");let i=e.parent,o=0;for(;i&&i.type!=="root";)o+=1,i=i.parent;if(r.includes(`
`)){let a=this.raw(e,null,"indent");if(a.length)for(let u=0;u<o;u++)r+=a}return r}block(e,t){let r=this.raw(e,"between","beforeOpen");this.builder(t+r+"{",e,"start");let i;e.nodes&&e.nodes.length?(this.body(e),i=this.raw(e,"after")):i=this.raw(e,"after","emptyBody"),i&&this.builder(i),this.builder("}",e,"end")}body(e){let t=e.nodes.length-1;for(;t>0&&e.nodes[t].type==="comment";)t-=1;let r=this.raw(e,"semicolon");for(let i=0;i<e.nodes.length;i++){let o=e.nodes[i],a=this.raw(o,"before");a&&this.builder(a),this.stringify(o,t!==i||r)}}comment(e){let t=this.raw(e,"left","commentLeft"),r=this.raw(e,"right","commentRight");this.builder("/*"+t+e.text+r+"*/",e)}decl(e,t){let r=this.raw(e,"between","colon"),i=e.prop+r+this.rawValue(e,"value");e.important&&(i+=e.raws.important||" !important"),t&&(i+=";"),this.builder(i,e)}document(e){this.body(e)}raw(e,t,r){let i;if(r||(r=t),t&&(i=e.raws[t],typeof i<"u"))return i;let o=e.parent;if(r==="before"&&(!o||o.type==="root"&&o.first===e||o&&o.type==="document"))return"";if(!o)return zS[r];let a=e.root();if(a.rawCache||(a.rawCache={}),typeof a.rawCache[r]<"u")return a.rawCache[r];if(r==="before"||r==="after")return this.beforeAfter(e,r);{let u="raw"+zF(r);this[u]?i=this[u](a,e):a.walk(f=>{if(i=f.raws[t],typeof i<"u")return!1})}return typeof i>"u"&&(i=zS[r]),a.rawCache[r]=i,i}rawBeforeClose(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length>0&&typeof r.raws.after<"u")return t=r.raws.after,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawBeforeComment(e,t){let r;return e.walkComments(i=>{if(typeof i.raws.before<"u")return r=i.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(t,null,"beforeDecl"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeDecl(e,t){let r;return e.walkDecls(i=>{if(typeof i.raws.before<"u")return r=i.raws.before,r.includes(`
`)&&(r=r.replace(/[^\n]+$/,"")),!1}),typeof r>"u"?r=this.raw(t,null,"beforeRule"):r&&(r=r.replace(/\S/g,"")),r}rawBeforeOpen(e){let t;return e.walk(r=>{if(r.type!=="decl"&&(t=r.raws.between,typeof t<"u"))return!1}),t}rawBeforeRule(e){let t;return e.walk(r=>{if(r.nodes&&(r.parent!==e||e.first!==r)&&typeof r.raws.before<"u")return t=r.raws.before,t.includes(`
`)&&(t=t.replace(/[^\n]+$/,"")),!1}),t&&(t=t.replace(/\S/g,"")),t}rawColon(e){let t;return e.walkDecls(r=>{if(typeof r.raws.between<"u")return t=r.raws.between.replace(/[^\s:]/g,""),!1}),t}rawEmptyBody(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length===0&&(t=r.raws.after,typeof t<"u"))return!1}),t}rawIndent(e){if(e.raws.indent)return e.raws.indent;let t;return e.walk(r=>{let i=r.parent;if(i&&i!==e&&i.parent&&i.parent===e&&typeof r.raws.before<"u"){let o=r.raws.before.split(`
`);return t=o[o.length-1],t=t.replace(/\S/g,""),!1}}),t}rawSemicolon(e){let t;return e.walk(r=>{if(r.nodes&&r.nodes.length&&r.last.type==="decl"&&(t=r.raws.semicolon,typeof t<"u"))return!1}),t}rawValue(e,t){let r=e[t],i=e.raws[t];return i&&i.value===r?i.raw:r}root(e){this.body(e),e.raws.after&&this.builder(e.raws.after)}rule(e){this.block(e,this.rawValue(e,"selector")),e.raws.ownSemicolon&&this.builder(e.raws.ownSemicolon,e,"end")}stringify(e,t){if(!this[e.type])throw new Error("Unknown AST node type "+e.type+". Maybe you need to change PostCSS stringifier.");this[e.type](e,t)}},TE=Xd;Xd.default=Xd;var jF=TE;function Zd(n,e){new jF(e).stringify(n)}l(Zd,"stringify$4");var kc=Zd;Zd.default=Zd;var{isClean:mc,my:qF}=yo,YF=dp,KF=TE,XF=kc;function Jd(n,e){let t=new n.constructor;for(let r in n){if(!Object.prototype.hasOwnProperty.call(n,r)||r==="proxyCache")continue;let i=n[r],o=typeof i;r==="parent"&&o==="object"?e&&(t[r]=e):r==="source"?t[r]=i:Array.isArray(i)?t[r]=i.map(a=>Jd(a,t)):(o==="object"&&i!==null&&(i=Jd(i)),t[r]=i)}return t}l(Jd,"cloneNode");var Qd=class{static{l(this,"Node")}constructor(e={}){this.raws={},this[mc]=!1,this[qF]=!0;for(let t in e)if(t==="nodes"){this.nodes=[];for(let r of e[t])typeof r.clone=="function"?this.append(r.clone()):this.append(r)}else this[t]=e[t]}addToError(e){if(e.postcssNode=this,e.stack&&this.source&&/\n\s{4}at /.test(e.stack)){let t=this.source;e.stack=e.stack.replace(/\n\s{4}at /,`$&${t.input.from}:${t.start.line}:${t.start.column}$&`)}return e}after(e){return this.parent.insertAfter(this,e),this}assign(e={}){for(let t in e)this[t]=e[t];return this}before(e){return this.parent.insertBefore(this,e),this}cleanRaws(e){delete this.raws.before,delete this.raws.after,e||delete this.raws.between}clone(e={}){let t=Jd(this);for(let r in e)t[r]=e[r];return t}cloneAfter(e={}){let t=this.clone(e);return this.parent.insertAfter(this,t),t}cloneBefore(e={}){let t=this.clone(e);return this.parent.insertBefore(this,t),t}error(e,t={}){if(this.source){let{end:r,start:i}=this.rangeBy(t);return this.source.input.error(e,{column:i.column,line:i.line},{column:r.column,line:r.line},t)}return new YF(e)}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:t==="root"?()=>e.root().toProxy():e[t]},set(e,t,r){return e[t]===r||(e[t]=r,(t==="prop"||t==="value"||t==="name"||t==="params"||t==="important"||t==="text")&&e.markDirty()),!0}}}markDirty(){if(this[mc]){this[mc]=!1;let e=this;for(;e=e.parent;)e[mc]=!1}}next(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e+1]}positionBy(e,t){let r=this.source.start;if(e.index)r=this.positionInside(e.index,t);else if(e.word){t=this.toString();let i=t.indexOf(e.word);i!==-1&&(r=this.positionInside(i,t))}return r}positionInside(e,t){let r=t||this.toString(),i=this.source.start.column,o=this.source.start.line;for(let a=0;a<e;a++)r[a]===`
`?(i=1,o+=1):i+=1;return{column:i,line:o}}prev(){if(!this.parent)return;let e=this.parent.index(this);return this.parent.nodes[e-1]}rangeBy(e){let t={column:this.source.start.column,line:this.source.start.line},r=this.source.end?{column:this.source.end.column+1,line:this.source.end.line}:{column:t.column+1,line:t.line};if(e.word){let i=this.toString(),o=i.indexOf(e.word);o!==-1&&(t=this.positionInside(o,i),r=this.positionInside(o+e.word.length,i))}else e.start?t={column:e.start.column,line:e.start.line}:e.index&&(t=this.positionInside(e.index)),e.end?r={column:e.end.column,line:e.end.line}:typeof e.endIndex=="number"?r=this.positionInside(e.endIndex):e.index&&(r=this.positionInside(e.index+1));return(r.line<t.line||r.line===t.line&&r.column<=t.column)&&(r={column:t.column+1,line:t.line}),{end:r,start:t}}raw(e,t){return new KF().raw(this,e,t)}remove(){return this.parent&&this.parent.removeChild(this),this.parent=void 0,this}replaceWith(...e){if(this.parent){let t=this,r=!1;for(let i of e)i===this?r=!0:r?(this.parent.insertAfter(t,i),t=i):this.parent.insertBefore(t,i);r||this.remove()}return this}root(){let e=this;for(;e.parent&&e.parent.type!=="document";)e=e.parent;return e}toJSON(e,t){let r={},i=t==null;t=t||new Map;let o=0;for(let a in this){if(!Object.prototype.hasOwnProperty.call(this,a)||a==="parent"||a==="proxyCache")continue;let u=this[a];if(Array.isArray(u))r[a]=u.map(f=>typeof f=="object"&&f.toJSON?f.toJSON(null,t):f);else if(typeof u=="object"&&u.toJSON)r[a]=u.toJSON(null,t);else if(a==="source"){let f=t.get(u.input);f==null&&(f=o,t.set(u.input,o),o++),r[a]={end:u.end,inputId:f,start:u.start}}else r[a]=u}return i&&(r.inputs=[...t.keys()].map(a=>a.toJSON())),r}toProxy(){return this.proxyCache||(this.proxyCache=new Proxy(this,this.getProxyProcessor())),this.proxyCache}toString(e=XF){e.stringify&&(e=e.stringify);let t="";return e(this,r=>{t+=r}),t}warn(e,t,r){let i={node:this};for(let o in r)i[o]=r[o];return e.warn(t,i)}get proxyOf(){return this}},Pc=Qd;Qd.default=Qd;var ZF=Pc,ep=class extends ZF{static{l(this,"Declaration")}constructor(e){e&&typeof e.value<"u"&&typeof e.value!="string"&&(e={...e,value:String(e.value)}),super(e),this.type="decl"}get variable(){return this.prop.startsWith("--")||this.prop[0]==="$"}},Fc=ep;ep.default=ep;var JF="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",QF=l((n,e=21)=>(t=e)=>{let r="",i=t;for(;i--;)r+=n[Math.random()*n.length|0];return r},"customAlphabet"),e$=l((n=21)=>{let e="",t=n;for(;t--;)e+=JF[Math.random()*64|0];return e},"nanoid$1"),t$={nanoid:e$,customAlphabet:QF},{SourceMapConsumer:jS,SourceMapGenerator:qS}=ar,{existsSync:r$,readFileSync:n$}=ar,{dirname:Gd,join:i$}=ar;function s$(n){return Buffer?Buffer.from(n,"base64").toString():window.atob(n)}l(s$,"fromBase64");var tp=class{static{l(this,"PreviousMap")}constructor(e,t){if(t.map===!1)return;this.loadAnnotation(e),this.inline=this.startWith(this.annotation,"data:");let r=t.map?t.map.prev:void 0,i=this.loadMap(t.from,r);!this.mapFile&&t.from&&(this.mapFile=t.from),this.mapFile&&(this.root=Gd(this.mapFile)),i&&(this.text=i)}consumer(){return this.consumerCache||(this.consumerCache=new jS(this.text)),this.consumerCache}decodeInline(e){let t=/^data:application\/json;charset=utf-?8;base64,/,r=/^data:application\/json;base64,/,i=/^data:application\/json;charset=utf-?8,/,o=/^data:application\/json,/;if(i.test(e)||o.test(e))return decodeURIComponent(e.substr(RegExp.lastMatch.length));if(t.test(e)||r.test(e))return s$(e.substr(RegExp.lastMatch.length));let a=e.match(/data:application\/json;([^,]+),/)[1];throw new Error("Unsupported source map encoding "+a)}getAnnotationURL(e){return e.replace(/^\/\*\s*# sourceMappingURL=/,"").trim()}isMap(e){return typeof e!="object"?!1:typeof e.mappings=="string"||typeof e._mappings=="string"||Array.isArray(e.sections)}loadAnnotation(e){let t=e.match(/\/\*\s*# sourceMappingURL=/gm);if(!t)return;let r=e.lastIndexOf(t.pop()),i=e.indexOf("*/",r);r>-1&&i>-1&&(this.annotation=this.getAnnotationURL(e.substring(r,i)))}loadFile(e){if(this.root=Gd(e),r$(e))return this.mapFile=e,n$(e,"utf-8").toString().trim()}loadMap(e,t){if(t===!1)return!1;if(t){if(typeof t=="string")return t;if(typeof t=="function"){let r=t(e);if(r){let i=this.loadFile(r);if(!i)throw new Error("Unable to load previous source map: "+r.toString());return i}}else{if(t instanceof jS)return qS.fromSourceMap(t).toString();if(t instanceof qS)return t.toString();if(this.isMap(t))return JSON.stringify(t);throw new Error("Unsupported previous source map format: "+t.toString())}}else{if(this.inline)return this.decodeInline(this.annotation);if(this.annotation){let r=this.annotation;return e&&(r=i$(Gd(e),r)),this.loadFile(r)}}}startWith(e,t){return e?e.substr(0,t.length)===t:!1}withContent(){return!!(this.consumer().sourcesContent&&this.consumer().sourcesContent.length>0)}},IE=tp;tp.default=tp;var{SourceMapConsumer:o$,SourceMapGenerator:a$}=ar,{fileURLToPath:YS,pathToFileURL:gc}=ar,{isAbsolute:rp,resolve:np}=ar,{nanoid:l$}=t$,zd=ar,KS=dp,c$=IE,jd=Symbol("fromOffsetCache"),u$=!!(o$&&a$),XS=!!(np&&rp),Ac=class{static{l(this,"Input")}constructor(e,t={}){if(e===null||typeof e>"u"||typeof e=="object"&&!e.toString)throw new Error(`PostCSS received ${e} instead of CSS string`);if(this.css=e.toString(),this.css[0]==="\uFEFF"||this.css[0]==="\uFFFE"?(this.hasBOM=!0,this.css=this.css.slice(1)):this.hasBOM=!1,t.from&&(!XS||/^\w+:\/\//.test(t.from)||rp(t.from)?this.file=t.from:this.file=np(t.from)),XS&&u$){let r=new c$(this.css,t);if(r.text){this.map=r;let i=r.consumer().file;!this.file&&i&&(this.file=this.mapResolve(i))}}this.file||(this.id="<input css "+l$(6)+">"),this.map&&(this.map.file=this.from)}error(e,t,r,i={}){let o,a,u;if(t&&typeof t=="object"){let h=t,p=r;if(typeof h.offset=="number"){let g=this.fromOffset(h.offset);t=g.line,r=g.col}else t=h.line,r=h.column;if(typeof p.offset=="number"){let g=this.fromOffset(p.offset);a=g.line,u=g.col}else a=p.line,u=p.column}else if(!r){let h=this.fromOffset(t);t=h.line,r=h.col}let f=this.origin(t,r,a,u);return f?o=new KS(e,f.endLine===void 0?f.line:{column:f.column,line:f.line},f.endLine===void 0?f.column:{column:f.endColumn,line:f.endLine},f.source,f.file,i.plugin):o=new KS(e,a===void 0?t:{column:r,line:t},a===void 0?r:{column:u,line:a},this.css,this.file,i.plugin),o.input={column:r,endColumn:u,endLine:a,line:t,source:this.css},this.file&&(gc&&(o.input.url=gc(this.file).toString()),o.input.file=this.file),o}fromOffset(e){let t,r;if(this[jd])r=this[jd];else{let o=this.css.split(`
`);r=new Array(o.length);let a=0;for(let u=0,f=o.length;u<f;u++)r[u]=a,a+=o[u].length+1;this[jd]=r}t=r[r.length-1];let i=0;if(e>=t)i=r.length-1;else{let o=r.length-2,a;for(;i<o;)if(a=i+(o-i>>1),e<r[a])o=a-1;else if(e>=r[a+1])i=a+1;else{i=a;break}}return{col:e-r[i]+1,line:i+1}}mapResolve(e){return/^\w+:\/\//.test(e)?e:np(this.map.consumer().sourceRoot||this.map.root||".",e)}origin(e,t,r,i){if(!this.map)return!1;let o=this.map.consumer(),a=o.originalPositionFor({column:t,line:e});if(!a.source)return!1;let u;typeof r=="number"&&(u=o.originalPositionFor({column:i,line:r}));let f;rp(a.source)?f=gc(a.source):f=new URL(a.source,this.map.consumer().sourceRoot||gc(this.map.mapFile));let h={column:a.column,endColumn:u&&u.column,endLine:u&&u.line,line:a.line,url:f.toString()};if(f.protocol==="file:")if(YS)h.file=YS(f);else throw new Error("file: protocol is not available in this PostCSS build");let p=o.sourceContentFor(a.source);return p&&(h.source=p),h}toJSON(){let e={};for(let t of["hasBOM","css","file","id"])this[t]!=null&&(e[t]=this[t]);return this.map&&(e.map={...this.map},e.map.consumerCache&&(e.map.consumerCache=void 0)),e}get from(){return this.file||this.id}},$c=Ac;Ac.default=Ac;zd&&zd.registerInput&&zd.registerInput(Ac);var{SourceMapConsumer:RE,SourceMapGenerator:Mc}=ar,{dirname:Tc,relative:AE,resolve:OE,sep:LE}=ar,{pathToFileURL:ZS}=ar,f$=$c,h$=!!(RE&&Mc),d$=!!(Tc&&OE&&AE&&LE),p$=class{static{l(this,"MapGenerator")}constructor(e,t,r,i){this.stringify=e,this.mapOpts=r.map||{},this.root=t,this.opts=r,this.css=i,this.originalCSS=i,this.usesFileUrls=!this.mapOpts.from&&this.mapOpts.absolute,this.memoizedFileURLs=new Map,this.memoizedPaths=new Map,this.memoizedURLs=new Map}addAnnotation(){let e;this.isInline()?e="data:application/json;base64,"+this.toBase64(this.map.toString()):typeof this.mapOpts.annotation=="string"?e=this.mapOpts.annotation:typeof this.mapOpts.annotation=="function"?e=this.mapOpts.annotation(this.opts.to,this.root):e=this.outputFile()+".map";let t=`
`;this.css.includes(`\r
`)&&(t=`\r
`),this.css+=t+"/*# sourceMappingURL="+e+" */"}applyPrevMaps(){for(let e of this.previous()){let t=this.toUrl(this.path(e.file)),r=e.root||Tc(e.file),i;this.mapOpts.sourcesContent===!1?(i=new RE(e.text),i.sourcesContent&&(i.sourcesContent=null)):i=e.consumer(),this.map.applySourceMap(i,t,this.toUrl(this.path(r)))}}clearAnnotation(){if(this.mapOpts.annotation!==!1)if(this.root){let e;for(let t=this.root.nodes.length-1;t>=0;t--)e=this.root.nodes[t],e.type==="comment"&&e.text.indexOf("# sourceMappingURL=")===0&&this.root.removeChild(t)}else this.css&&(this.css=this.css.replace(/\n*?\/\*#[\S\s]*?\*\/$/gm,""))}generate(){if(this.clearAnnotation(),d$&&h$&&this.isMap())return this.generateMap();{let e="";return this.stringify(this.root,t=>{e+=t}),[e]}}generateMap(){if(this.root)this.generateString();else if(this.previous().length===1){let e=this.previous()[0].consumer();e.file=this.outputFile(),this.map=Mc.fromSourceMap(e,{ignoreInvalidMapping:!0})}else this.map=new Mc({file:this.outputFile(),ignoreInvalidMapping:!0}),this.map.addMapping({generated:{column:0,line:1},original:{column:0,line:1},source:this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>"});return this.isSourcesContent()&&this.setSourcesContent(),this.root&&this.previous().length>0&&this.applyPrevMaps(),this.isAnnotation()&&this.addAnnotation(),this.isInline()?[this.css]:[this.css,this.map]}generateString(){this.css="",this.map=new Mc({file:this.outputFile(),ignoreInvalidMapping:!0});let e=1,t=1,r="<no source>",i={generated:{column:0,line:0},original:{column:0,line:0},source:""},o,a;this.stringify(this.root,(u,f,h)=>{if(this.css+=u,f&&h!=="end"&&(i.generated.line=e,i.generated.column=t-1,f.source&&f.source.start?(i.source=this.sourcePath(f),i.original.line=f.source.start.line,i.original.column=f.source.start.column-1,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,this.map.addMapping(i))),o=u.match(/\n/g),o?(e+=o.length,a=u.lastIndexOf(`
`),t=u.length-a):t+=u.length,f&&h!=="start"){let p=f.parent||{raws:{}};(!(f.type==="decl"||f.type==="atrule"&&!f.nodes)||f!==p.last||p.raws.semicolon)&&(f.source&&f.source.end?(i.source=this.sourcePath(f),i.original.line=f.source.end.line,i.original.column=f.source.end.column-1,i.generated.line=e,i.generated.column=t-2,this.map.addMapping(i)):(i.source=r,i.original.line=1,i.original.column=0,i.generated.line=e,i.generated.column=t-1,this.map.addMapping(i)))}})}isAnnotation(){return this.isInline()?!0:typeof this.mapOpts.annotation<"u"?this.mapOpts.annotation:this.previous().length?this.previous().some(e=>e.annotation):!0}isInline(){if(typeof this.mapOpts.inline<"u")return this.mapOpts.inline;let e=this.mapOpts.annotation;return typeof e<"u"&&e!==!0?!1:this.previous().length?this.previous().some(t=>t.inline):!0}isMap(){return typeof this.opts.map<"u"?!!this.opts.map:this.previous().length>0}isSourcesContent(){return typeof this.mapOpts.sourcesContent<"u"?this.mapOpts.sourcesContent:this.previous().length?this.previous().some(e=>e.withContent()):!0}outputFile(){return this.opts.to?this.path(this.opts.to):this.opts.from?this.path(this.opts.from):"to.css"}path(e){if(this.mapOpts.absolute||e.charCodeAt(0)===60||/^\w+:\/\//.test(e))return e;let t=this.memoizedPaths.get(e);if(t)return t;let r=this.opts.to?Tc(this.opts.to):".";typeof this.mapOpts.annotation=="string"&&(r=Tc(OE(r,this.mapOpts.annotation)));let i=AE(r,e);return this.memoizedPaths.set(e,i),i}previous(){if(!this.previousMaps)if(this.previousMaps=[],this.root)this.root.walk(e=>{if(e.source&&e.source.input.map){let t=e.source.input.map;this.previousMaps.includes(t)||this.previousMaps.push(t)}});else{let e=new f$(this.originalCSS,this.opts);e.map&&this.previousMaps.push(e.map)}return this.previousMaps}setSourcesContent(){let e={};if(this.root)this.root.walk(t=>{if(t.source){let r=t.source.input.from;if(r&&!e[r]){e[r]=!0;let i=this.usesFileUrls?this.toFileUrl(r):this.toUrl(this.path(r));this.map.setSourceContent(i,t.source.input.css)}}});else if(this.css){let t=this.opts.from?this.toUrl(this.path(this.opts.from)):"<no source>";this.map.setSourceContent(t,this.css)}}sourcePath(e){return this.mapOpts.from?this.toUrl(this.mapOpts.from):this.usesFileUrls?this.toFileUrl(e.source.input.from):this.toUrl(this.path(e.source.input.from))}toBase64(e){return Buffer?Buffer.from(e).toString("base64"):window.btoa(unescape(encodeURIComponent(e)))}toFileUrl(e){let t=this.memoizedFileURLs.get(e);if(t)return t;if(ZS){let r=ZS(e).toString();return this.memoizedFileURLs.set(e,r),r}else throw new Error("`map.absolute` option is not available in this PostCSS build")}toUrl(e){let t=this.memoizedURLs.get(e);if(t)return t;LE==="\\"&&(e=e.replace(/\\/g,"/"));let r=encodeURI(e).replace(/[#?]/g,encodeURIComponent);return this.memoizedURLs.set(e,r),r}},NE=p$,m$=Pc,ip=class extends m${static{l(this,"Comment")}constructor(e){super(e),this.type="comment"}},Hc=ip;ip.default=ip;var{isClean:_E,my:DE}=yo,kE=Fc,PE=Hc,g$=Pc,FE,pp,mp,$E;function HE(n){return n.map(e=>(e.nodes&&(e.nodes=HE(e.nodes)),delete e.source,e))}l(HE,"cleanSource");function BE(n){if(n[_E]=!1,n.proxyOf.nodes)for(let e of n.proxyOf.nodes)BE(e)}l(BE,"markDirtyUp");var Gr=class WE extends g${static{l(this,"Container")}append(...e){for(let t of e){let r=this.normalize(t,this.last);for(let i of r)this.proxyOf.nodes.push(i)}return this.markDirty(),this}cleanRaws(e){if(super.cleanRaws(e),this.nodes)for(let t of this.nodes)t.cleanRaws(e)}each(e){if(!this.proxyOf.nodes)return;let t=this.getIterator(),r,i;for(;this.indexes[t]<this.proxyOf.nodes.length&&(r=this.indexes[t],i=e(this.proxyOf.nodes[r],r),i!==!1);)this.indexes[t]+=1;return delete this.indexes[t],i}every(e){return this.nodes.every(e)}getIterator(){this.lastEach||(this.lastEach=0),this.indexes||(this.indexes={}),this.lastEach+=1;let e=this.lastEach;return this.indexes[e]=0,e}getProxyProcessor(){return{get(e,t){return t==="proxyOf"?e:e[t]?t==="each"||typeof t=="string"&&t.startsWith("walk")?(...r)=>e[t](...r.map(i=>typeof i=="function"?(o,a)=>i(o.toProxy(),a):i)):t==="every"||t==="some"?r=>e[t]((i,...o)=>r(i.toProxy(),...o)):t==="root"?()=>e.root().toProxy():t==="nodes"?e.nodes.map(r=>r.toProxy()):t==="first"||t==="last"?e[t].toProxy():e[t]:e[t]},set(e,t,r){return e[t]===r||(e[t]=r,(t==="name"||t==="params"||t==="selector")&&e.markDirty()),!0}}}index(e){return typeof e=="number"?e:(e.proxyOf&&(e=e.proxyOf),this.proxyOf.nodes.indexOf(e))}insertAfter(e,t){let r=this.index(e),i=this.normalize(t,this.proxyOf.nodes[r]).reverse();r=this.index(e);for(let a of i)this.proxyOf.nodes.splice(r+1,0,a);let o;for(let a in this.indexes)o=this.indexes[a],r<o&&(this.indexes[a]=o+i.length);return this.markDirty(),this}insertBefore(e,t){let r=this.index(e),i=r===0?"prepend":!1,o=this.normalize(t,this.proxyOf.nodes[r],i).reverse();r=this.index(e);for(let u of o)this.proxyOf.nodes.splice(r,0,u);let a;for(let u in this.indexes)a=this.indexes[u],r<=a&&(this.indexes[u]=a+o.length);return this.markDirty(),this}normalize(e,t){if(typeof e=="string")e=HE(FE(e).nodes);else if(typeof e>"u")e=[];else if(Array.isArray(e)){e=e.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type==="root"&&this.type!=="document"){e=e.nodes.slice(0);for(let i of e)i.parent&&i.parent.removeChild(i,"ignore")}else if(e.type)e=[e];else if(e.prop){if(typeof e.value>"u")throw new Error("Value field is missed in node creation");typeof e.value!="string"&&(e.value=String(e.value)),e=[new kE(e)]}else if(e.selector)e=[new pp(e)];else if(e.name)e=[new mp(e)];else if(e.text)e=[new PE(e)];else throw new Error("Unknown node type in node creation");return e.map(i=>(i[DE]||WE.rebuild(i),i=i.proxyOf,i.parent&&i.parent.removeChild(i),i[_E]&&BE(i),typeof i.raws.before>"u"&&t&&typeof t.raws.before<"u"&&(i.raws.before=t.raws.before.replace(/\S/g,"")),i.parent=this.proxyOf,i))}prepend(...e){e=e.reverse();for(let t of e){let r=this.normalize(t,this.first,"prepend").reverse();for(let i of r)this.proxyOf.nodes.unshift(i);for(let i in this.indexes)this.indexes[i]=this.indexes[i]+r.length}return this.markDirty(),this}push(e){return e.parent=this,this.proxyOf.nodes.push(e),this}removeAll(){for(let e of this.proxyOf.nodes)e.parent=void 0;return this.proxyOf.nodes=[],this.markDirty(),this}removeChild(e){e=this.index(e),this.proxyOf.nodes[e].parent=void 0,this.proxyOf.nodes.splice(e,1);let t;for(let r in this.indexes)t=this.indexes[r],t>=e&&(this.indexes[r]=t-1);return this.markDirty(),this}replaceValues(e,t,r){return r||(r=t,t={}),this.walkDecls(i=>{t.props&&!t.props.includes(i.prop)||t.fast&&!i.value.includes(t.fast)||(i.value=i.value.replace(e,r))}),this.markDirty(),this}some(e){return this.nodes.some(e)}walk(e){return this.each((t,r)=>{let i;try{i=e(t,r)}catch(o){throw t.addToError(o)}return i!==!1&&t.walk&&(i=t.walk(e)),i})}walkAtRules(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="atrule"&&e.test(r.name))return t(r,i)}):this.walk((r,i)=>{if(r.type==="atrule"&&r.name===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="atrule")return t(r,i)}))}walkComments(e){return this.walk((t,r)=>{if(t.type==="comment")return e(t,r)})}walkDecls(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="decl"&&e.test(r.prop))return t(r,i)}):this.walk((r,i)=>{if(r.type==="decl"&&r.prop===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="decl")return t(r,i)}))}walkRules(e,t){return t?e instanceof RegExp?this.walk((r,i)=>{if(r.type==="rule"&&e.test(r.selector))return t(r,i)}):this.walk((r,i)=>{if(r.type==="rule"&&r.selector===e)return t(r,i)}):(t=e,this.walk((r,i)=>{if(r.type==="rule")return t(r,i)}))}get first(){if(this.proxyOf.nodes)return this.proxyOf.nodes[0]}get last(){if(this.proxyOf.nodes)return this.proxyOf.nodes[this.proxyOf.nodes.length-1]}};Gr.registerParse=n=>{FE=n};Gr.registerRule=n=>{pp=n};Gr.registerAtRule=n=>{mp=n};Gr.registerRoot=n=>{$E=n};var Wn=Gr;Gr.default=Gr;Gr.rebuild=n=>{n.type==="atrule"?Object.setPrototypeOf(n,mp.prototype):n.type==="rule"?Object.setPrototypeOf(n,pp.prototype):n.type==="decl"?Object.setPrototypeOf(n,kE.prototype):n.type==="comment"?Object.setPrototypeOf(n,PE.prototype):n.type==="root"&&Object.setPrototypeOf(n,$E.prototype),n[DE]=!0,n.nodes&&n.nodes.forEach(e=>{Gr.rebuild(e)})};var y$=Wn,VE,UE,fo=class extends y${static{l(this,"Document")}constructor(e){super({type:"document",...e}),this.nodes||(this.nodes=[])}toResult(e={}){return new VE(new UE,this,e).stringify()}};fo.registerLazyResult=n=>{VE=n};fo.registerProcessor=n=>{UE=n};var gp=fo;fo.default=fo;var sp=class{static{l(this,"Warning")}constructor(e,t={}){if(this.type="warning",this.text=e,t.node&&t.node.source){let r=t.node.rangeBy(t);this.line=r.start.line,this.column=r.start.column,this.endLine=r.end.line,this.endColumn=r.end.column}for(let r in t)this[r]=t[r]}toString(){return this.node?this.node.error(this.text,{index:this.index,plugin:this.plugin,word:this.word}).message:this.plugin?this.plugin+": "+this.text:this.text}},GE=sp;sp.default=sp;var b$=GE,op=class{static{l(this,"Result")}constructor(e,t,r){this.processor=e,this.messages=[],this.root=t,this.opts=r,this.css=void 0,this.map=void 0}toString(){return this.css}warn(e,t={}){t.plugin||this.lastPlugin&&this.lastPlugin.postcssPlugin&&(t.plugin=this.lastPlugin.postcssPlugin);let r=new b$(e,t);return this.messages.push(r),r}warnings(){return this.messages.filter(e=>e.type==="warning")}get content(){return this.css}},yp=op;op.default=op;var qd=39,JS=34,yc=92,QS=47,bc=10,ao=32,vc=12,wc=9,Sc=13,v$=91,w$=93,S$=40,E$=41,C$=123,x$=125,M$=59,T$=42,I$=58,R$=64,Ec=/[\t\n\f\r "#'()/;[\\\]{}]/g,Cc=/[\t\n\f\r !"#'():;@[\\\]{}]|\/(?=\*)/g,A$=/.[\r\n"'(/\\]/,eE=/[\da-f]/i,O$=l(function(e,t={}){let r=e.css.valueOf(),i=t.ignoreErrors,o,a,u,f,h,p,g,y,w,S,E=r.length,v=0,M=[],A=[];function T(){return v}l(T,"position");function N(W){throw e.error("Unclosed "+W,v)}l(N,"unclosed");function U(){return A.length===0&&v>=E}l(U,"endOfFile");function G(W){if(A.length)return A.pop();if(v>=E)return;let z=W?W.ignoreUnclosed:!1;switch(o=r.charCodeAt(v),o){case bc:case ao:case wc:case Sc:case vc:{a=v;do a+=1,o=r.charCodeAt(a);while(o===ao||o===bc||o===wc||o===Sc||o===vc);S=["space",r.slice(v,a)],v=a-1;break}case v$:case w$:case C$:case x$:case I$:case M$:case E$:{let re=String.fromCharCode(o);S=[re,re,v];break}case S$:{if(y=M.length?M.pop()[1]:"",w=r.charCodeAt(v+1),y==="url"&&w!==qd&&w!==JS&&w!==ao&&w!==bc&&w!==wc&&w!==vc&&w!==Sc){a=v;do{if(p=!1,a=r.indexOf(")",a+1),a===-1)if(i||z){a=v;break}else N("bracket");for(g=a;r.charCodeAt(g-1)===yc;)g-=1,p=!p}while(p);S=["brackets",r.slice(v,a+1),v,a],v=a}else a=r.indexOf(")",v+1),f=r.slice(v,a+1),a===-1||A$.test(f)?S=["(","(",v]:(S=["brackets",f,v,a],v=a);break}case qd:case JS:{u=o===qd?"'":'"',a=v;do{if(p=!1,a=r.indexOf(u,a+1),a===-1)if(i||z){a=v+1;break}else N("string");for(g=a;r.charCodeAt(g-1)===yc;)g-=1,p=!p}while(p);S=["string",r.slice(v,a+1),v,a],v=a;break}case R$:{Ec.lastIndex=v+1,Ec.test(r),Ec.lastIndex===0?a=r.length-1:a=Ec.lastIndex-2,S=["at-word",r.slice(v,a+1),v,a],v=a;break}case yc:{for(a=v,h=!0;r.charCodeAt(a+1)===yc;)a+=1,h=!h;if(o=r.charCodeAt(a+1),h&&o!==QS&&o!==ao&&o!==bc&&o!==wc&&o!==Sc&&o!==vc&&(a+=1,eE.test(r.charAt(a)))){for(;eE.test(r.charAt(a+1));)a+=1;r.charCodeAt(a+1)===ao&&(a+=1)}S=["word",r.slice(v,a+1),v,a],v=a;break}default:{o===QS&&r.charCodeAt(v+1)===T$?(a=r.indexOf("*/",v+2)+1,a===0&&(i||z?a=r.length:N("comment")),S=["comment",r.slice(v,a+1),v,a],v=a):(Cc.lastIndex=v+1,Cc.test(r),Cc.lastIndex===0?a=r.length-1:a=Cc.lastIndex-2,S=["word",r.slice(v,a+1),v,a],M.push(S),v=a);break}}return v++,S}l(G,"nextToken");function Q(W){A.push(W)}return l(Q,"back"),{back:Q,endOfFile:U,nextToken:G,position:T}},"tokenizer"),zE=Wn,Oc=class extends zE{static{l(this,"AtRule")}constructor(e){super(e),this.type="atrule"}append(...e){return this.proxyOf.nodes||(this.nodes=[]),super.append(...e)}prepend(...e){return this.proxyOf.nodes||(this.nodes=[]),super.prepend(...e)}},bp=Oc;Oc.default=Oc;zE.registerAtRule(Oc);var jE=Wn,qE,YE,Ui=class extends jE{static{l(this,"Root")}constructor(e){super(e),this.type="root",this.nodes||(this.nodes=[])}normalize(e,t,r){let i=super.normalize(e);if(t){if(r==="prepend")this.nodes.length>1?t.raws.before=this.nodes[1].raws.before:delete t.raws.before;else if(this.first!==t)for(let o of i)o.raws.before=t.raws.before}return i}removeChild(e,t){let r=this.index(e);return!t&&r===0&&this.nodes.length>1&&(this.nodes[1].raws.before=this.nodes[r].raws.before),super.removeChild(e)}toResult(e={}){return new qE(new YE,this,e).stringify()}};Ui.registerLazyResult=n=>{qE=n};Ui.registerProcessor=n=>{YE=n};var bo=Ui;Ui.default=Ui;jE.registerRoot(Ui);var ho={comma(n){return ho.split(n,[","],!0)},space(n){let e=[" ",`
`,"	"];return ho.split(n,e)},split(n,e,t){let r=[],i="",o=!1,a=0,u=!1,f="",h=!1;for(let p of n)h?h=!1:p==="\\"?h=!0:u?p===f&&(u=!1):p==='"'||p==="'"?(u=!0,f=p):p==="("?a+=1:p===")"?a>0&&(a-=1):a===0&&e.includes(p)&&(o=!0),o?(i!==""&&r.push(i.trim()),i="",o=!1):i+=p;return(t||i!=="")&&r.push(i.trim()),r}},KE=ho;ho.default=ho;var XE=Wn,L$=KE,Lc=class extends XE{static{l(this,"Rule")}constructor(e){super(e),this.type="rule",this.nodes||(this.nodes=[])}get selectors(){return L$.comma(this.selector)}set selectors(e){let t=this.selector?this.selector.match(/,\s*/):null,r=t?t[0]:","+this.raw("between","beforeOpen");this.selector=e.join(r)}},vp=Lc;Lc.default=Lc;XE.registerRule(Lc);var N$=Fc,_$=O$,D$=Hc,k$=bp,P$=bo,tE=vp,rE={empty:!0,space:!0};function F$(n){for(let e=n.length-1;e>=0;e--){let t=n[e],r=t[3]||t[2];if(r)return r}}l(F$,"findLastWithPosition");var $$=class{static{l(this,"Parser")}constructor(e){this.input=e,this.root=new P$,this.current=this.root,this.spaces="",this.semicolon=!1,this.createTokenizer(),this.root.source={input:e,start:{column:1,line:1,offset:0}}}atrule(e){let t=new k$;t.name=e[1].slice(1),t.name===""&&this.unnamedAtrule(t,e),this.init(t,e[2]);let r,i,o,a=!1,u=!1,f=[],h=[];for(;!this.tokenizer.endOfFile();){if(e=this.tokenizer.nextToken(),r=e[0],r==="("||r==="["?h.push(r==="("?")":"]"):r==="{"&&h.length>0?h.push("}"):r===h[h.length-1]&&h.pop(),h.length===0)if(r===";"){t.source.end=this.getPosition(e[2]),t.source.end.offset++,this.semicolon=!0;break}else if(r==="{"){u=!0;break}else if(r==="}"){if(f.length>0){for(o=f.length-1,i=f[o];i&&i[0]==="space";)i=f[--o];i&&(t.source.end=this.getPosition(i[3]||i[2]),t.source.end.offset++)}this.end(e);break}else f.push(e);else f.push(e);if(this.tokenizer.endOfFile()){a=!0;break}}t.raws.between=this.spacesAndCommentsFromEnd(f),f.length?(t.raws.afterName=this.spacesAndCommentsFromStart(f),this.raw(t,"params",f),a&&(e=f[f.length-1],t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++,this.spaces=t.raws.between,t.raws.between="")):(t.raws.afterName="",t.params=""),u&&(t.nodes=[],this.current=t)}checkMissedSemicolon(e){let t=this.colon(e);if(t===!1)return;let r=0,i;for(let o=t-1;o>=0&&(i=e[o],!(i[0]!=="space"&&(r+=1,r===2)));o--);throw this.input.error("Missed semicolon",i[0]==="word"?i[3]+1:i[2])}colon(e){let t=0,r,i,o;for(let[a,u]of e.entries()){if(r=u,i=r[0],i==="("&&(t+=1),i===")"&&(t-=1),t===0&&i===":")if(!o)this.doubleColon(r);else{if(o[0]==="word"&&o[1]==="progid")continue;return a}o=r}return!1}comment(e){let t=new D$;this.init(t,e[2]),t.source.end=this.getPosition(e[3]||e[2]),t.source.end.offset++;let r=e[1].slice(2,-2);if(/^\s*$/.test(r))t.text="",t.raws.left=r,t.raws.right="";else{let i=r.match(/^(\s*)([^]*\S)(\s*)$/);t.text=i[2],t.raws.left=i[1],t.raws.right=i[3]}}createTokenizer(){this.tokenizer=_$(this.input)}decl(e,t){let r=new N$;this.init(r,e[0][2]);let i=e[e.length-1];for(i[0]===";"&&(this.semicolon=!0,e.pop()),r.source.end=this.getPosition(i[3]||i[2]||F$(e)),r.source.end.offset++;e[0][0]!=="word";)e.length===1&&this.unknownWord(e),r.raws.before+=e.shift()[1];for(r.source.start=this.getPosition(e[0][2]),r.prop="";e.length;){let h=e[0][0];if(h===":"||h==="space"||h==="comment")break;r.prop+=e.shift()[1]}r.raws.between="";let o;for(;e.length;)if(o=e.shift(),o[0]===":"){r.raws.between+=o[1];break}else o[0]==="word"&&/\w/.test(o[1])&&this.unknownWord([o]),r.raws.between+=o[1];(r.prop[0]==="_"||r.prop[0]==="*")&&(r.raws.before+=r.prop[0],r.prop=r.prop.slice(1));let a=[],u;for(;e.length&&(u=e[0][0],!(u!=="space"&&u!=="comment"));)a.push(e.shift());this.precheckMissedSemicolon(e);for(let h=e.length-1;h>=0;h--){if(o=e[h],o[1].toLowerCase()==="!important"){r.important=!0;let p=this.stringFrom(e,h);p=this.spacesFromEnd(e)+p,p!==" !important"&&(r.raws.important=p);break}else if(o[1].toLowerCase()==="important"){let p=e.slice(0),g="";for(let y=h;y>0;y--){let w=p[y][0];if(g.trim().indexOf("!")===0&&w!=="space")break;g=p.pop()[1]+g}g.trim().indexOf("!")===0&&(r.important=!0,r.raws.important=g,e=p)}if(o[0]!=="space"&&o[0]!=="comment")break}e.some(h=>h[0]!=="space"&&h[0]!=="comment")&&(r.raws.between+=a.map(h=>h[1]).join(""),a=[]),this.raw(r,"value",a.concat(e),t),r.value.includes(":")&&!t&&this.checkMissedSemicolon(e)}doubleColon(e){throw this.input.error("Double colon",{offset:e[2]},{offset:e[2]+e[1].length})}emptyRule(e){let t=new tE;this.init(t,e[2]),t.selector="",t.raws.between="",this.current=t}end(e){this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.semicolon=!1,this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.spaces="",this.current.parent?(this.current.source.end=this.getPosition(e[2]),this.current.source.end.offset++,this.current=this.current.parent):this.unexpectedClose(e)}endFile(){this.current.parent&&this.unclosedBlock(),this.current.nodes&&this.current.nodes.length&&(this.current.raws.semicolon=this.semicolon),this.current.raws.after=(this.current.raws.after||"")+this.spaces,this.root.source.end=this.getPosition(this.tokenizer.position())}freeSemicolon(e){if(this.spaces+=e[1],this.current.nodes){let t=this.current.nodes[this.current.nodes.length-1];t&&t.type==="rule"&&!t.raws.ownSemicolon&&(t.raws.ownSemicolon=this.spaces,this.spaces="")}}getPosition(e){let t=this.input.fromOffset(e);return{column:t.col,line:t.line,offset:e}}init(e,t){this.current.push(e),e.source={input:this.input,start:this.getPosition(t)},e.raws.before=this.spaces,this.spaces="",e.type!=="comment"&&(this.semicolon=!1)}other(e){let t=!1,r=null,i=!1,o=null,a=[],u=e[1].startsWith("--"),f=[],h=e;for(;h;){if(r=h[0],f.push(h),r==="("||r==="[")o||(o=h),a.push(r==="("?")":"]");else if(u&&i&&r==="{")o||(o=h),a.push("}");else if(a.length===0)if(r===";")if(i){this.decl(f,u);return}else break;else if(r==="{"){this.rule(f);return}else if(r==="}"){this.tokenizer.back(f.pop()),t=!0;break}else r===":"&&(i=!0);else r===a[a.length-1]&&(a.pop(),a.length===0&&(o=null));h=this.tokenizer.nextToken()}if(this.tokenizer.endOfFile()&&(t=!0),a.length>0&&this.unclosedBracket(o),t&&i){if(!u)for(;f.length&&(h=f[f.length-1][0],!(h!=="space"&&h!=="comment"));)this.tokenizer.back(f.pop());this.decl(f,u)}else this.unknownWord(f)}parse(){let e;for(;!this.tokenizer.endOfFile();)switch(e=this.tokenizer.nextToken(),e[0]){case"space":this.spaces+=e[1];break;case";":this.freeSemicolon(e);break;case"}":this.end(e);break;case"comment":this.comment(e);break;case"at-word":this.atrule(e);break;case"{":this.emptyRule(e);break;default:this.other(e);break}this.endFile()}precheckMissedSemicolon(){}raw(e,t,r,i){let o,a,u=r.length,f="",h=!0,p,g;for(let y=0;y<u;y+=1)o=r[y],a=o[0],a==="space"&&y===u-1&&!i?h=!1:a==="comment"?(g=r[y-1]?r[y-1][0]:"empty",p=r[y+1]?r[y+1][0]:"empty",!rE[g]&&!rE[p]?f.slice(-1)===","?h=!1:f+=o[1]:h=!1):f+=o[1];if(!h){let y=r.reduce((w,S)=>w+S[1],"");e.raws[t]={raw:y,value:f}}e[t]=f}rule(e){e.pop();let t=new tE;this.init(t,e[0][2]),t.raws.between=this.spacesAndCommentsFromEnd(e),this.raw(t,"selector",e),this.current=t}spacesAndCommentsFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],!(t!=="space"&&t!=="comment"));)r=e.pop()[1]+r;return r}spacesAndCommentsFromStart(e){let t,r="";for(;e.length&&(t=e[0][0],!(t!=="space"&&t!=="comment"));)r+=e.shift()[1];return r}spacesFromEnd(e){let t,r="";for(;e.length&&(t=e[e.length-1][0],t==="space");)r=e.pop()[1]+r;return r}stringFrom(e,t){let r="";for(let i=t;i<e.length;i++)r+=e[i][1];return e.splice(t,e.length-t),r}unclosedBlock(){let e=this.current.source.start;throw this.input.error("Unclosed block",e.line,e.column)}unclosedBracket(e){throw this.input.error("Unclosed bracket",{offset:e[2]},{offset:e[2]+1})}unexpectedClose(e){throw this.input.error("Unexpected }",{offset:e[2]},{offset:e[2]+1})}unknownWord(e){throw this.input.error("Unknown word",{offset:e[0][2]},{offset:e[0][2]+e[0][1].length})}unnamedAtrule(e,t){throw this.input.error("At-rule without name",{offset:t[2]},{offset:t[2]+t[1].length})}},H$=$$,B$=Wn,W$=H$,V$=$c;function Nc(n,e){let t=new V$(n,e),r=new W$(t);try{r.parse()}catch(i){throw i}return r.root}l(Nc,"parse$3");var wp=Nc;Nc.default=Nc;B$.registerParse(Nc);var{isClean:Er,my:U$}=yo,G$=NE,z$=kc,j$=Wn,q$=gp;var nE=yp,Y$=wp,K$=bo,X$={atrule:"AtRule",comment:"Comment",decl:"Declaration",document:"Document",root:"Root",rule:"Rule"},Z$={AtRule:!0,AtRuleExit:!0,Comment:!0,CommentExit:!0,Declaration:!0,DeclarationExit:!0,Document:!0,DocumentExit:!0,Once:!0,OnceExit:!0,postcssPlugin:!0,prepare:!0,Root:!0,RootExit:!0,Rule:!0,RuleExit:!0},J$={Once:!0,postcssPlugin:!0,prepare:!0},Gi=0;function lo(n){return typeof n=="object"&&typeof n.then=="function"}l(lo,"isPromise");function ZE(n){let e=!1,t=X$[n.type];return n.type==="decl"?e=n.prop.toLowerCase():n.type==="atrule"&&(e=n.name.toLowerCase()),e&&n.append?[t,t+"-"+e,Gi,t+"Exit",t+"Exit-"+e]:e?[t,t+"-"+e,t+"Exit",t+"Exit-"+e]:n.append?[t,Gi,t+"Exit"]:[t,t+"Exit"]}l(ZE,"getEvents");function iE(n){let e;return n.type==="document"?e=["Document",Gi,"DocumentExit"]:n.type==="root"?e=["Root",Gi,"RootExit"]:e=ZE(n),{eventIndex:0,events:e,iterator:0,node:n,visitorIndex:0,visitors:[]}}l(iE,"toStack");function ap(n){return n[Er]=!1,n.nodes&&n.nodes.forEach(e=>ap(e)),n}l(ap,"cleanMarks");var lp={},zi=class JE{static{l(this,"LazyResult")}constructor(e,t,r){this.stringified=!1,this.processed=!1;let i;if(typeof t=="object"&&t!==null&&(t.type==="root"||t.type==="document"))i=ap(t);else if(t instanceof JE||t instanceof nE)i=ap(t.root),t.map&&(typeof r.map>"u"&&(r.map={}),r.map.inline||(r.map.inline=!1),r.map.prev=t.map);else{let o=Y$;r.syntax&&(o=r.syntax.parse),r.parser&&(o=r.parser),o.parse&&(o=o.parse);try{i=o(t,r)}catch(a){this.processed=!0,this.error=a}i&&!i[U$]&&j$.rebuild(i)}this.result=new nE(e,i,r),this.helpers={...lp,postcss:lp,result:this.result},this.plugins=this.processor.plugins.map(o=>typeof o=="object"&&o.prepare?{...o,...o.prepare(this.result)}:o)}async(){return this.error?Promise.reject(this.error):this.processed?Promise.resolve(this.result):(this.processing||(this.processing=this.runAsync()),this.processing)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}getAsyncError(){throw new Error("Use process(css).then(cb) to work with async plugins")}handleError(e,t){let r=this.result.lastPlugin;try{t&&t.addToError(e),this.error=e,e.name==="CssSyntaxError"&&!e.plugin?(e.plugin=r.postcssPlugin,e.setMessage()):r.postcssVersion}catch(i){console&&console.error&&console.error(i)}return e}prepareVisitors(){this.listeners={};let e=l((t,r,i)=>{this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push([t,i])},"add");for(let t of this.plugins)if(typeof t=="object")for(let r in t){if(!Z$[r]&&/^[A-Z]/.test(r))throw new Error(`Unknown event ${r} in ${t.postcssPlugin}. Try to update PostCSS (${this.processor.version} now).`);if(!J$[r])if(typeof t[r]=="object")for(let i in t[r])i==="*"?e(t,r,t[r][i]):e(t,r+"-"+i.toLowerCase(),t[r][i]);else typeof t[r]=="function"&&e(t,r,t[r])}this.hasListener=Object.keys(this.listeners).length>0}async runAsync(){this.plugin=0;for(let e=0;e<this.plugins.length;e++){let t=this.plugins[e],r=this.runOnRoot(t);if(lo(r))try{await r}catch(i){throw this.handleError(i)}}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[Er];){e[Er]=!0;let t=[iE(e)];for(;t.length>0;){let r=this.visitTick(t);if(lo(r))try{await r}catch(i){let o=t[t.length-1].node;throw this.handleError(i,o)}}}if(this.listeners.OnceExit)for(let[t,r]of this.listeners.OnceExit){this.result.lastPlugin=t;try{if(e.type==="document"){let i=e.nodes.map(o=>r(o,this.helpers));await Promise.all(i)}else await r(e,this.helpers)}catch(i){throw this.handleError(i)}}}return this.processed=!0,this.stringify()}runOnRoot(e){this.result.lastPlugin=e;try{if(typeof e=="object"&&e.Once){if(this.result.root.type==="document"){let t=this.result.root.nodes.map(r=>e.Once(r,this.helpers));return lo(t[0])?Promise.all(t):t}return e.Once(this.result.root,this.helpers)}else if(typeof e=="function")return e(this.result.root,this.result)}catch(t){throw this.handleError(t)}}stringify(){if(this.error)throw this.error;if(this.stringified)return this.result;this.stringified=!0,this.sync();let e=this.result.opts,t=z$;e.syntax&&(t=e.syntax.stringify),e.stringifier&&(t=e.stringifier),t.stringify&&(t=t.stringify);let i=new G$(t,this.result.root,this.result.opts).generate();return this.result.css=i[0],this.result.map=i[1],this.result}sync(){if(this.error)throw this.error;if(this.processed)return this.result;if(this.processed=!0,this.processing)throw this.getAsyncError();for(let e of this.plugins){let t=this.runOnRoot(e);if(lo(t))throw this.getAsyncError()}if(this.prepareVisitors(),this.hasListener){let e=this.result.root;for(;!e[Er];)e[Er]=!0,this.walkSync(e);if(this.listeners.OnceExit)if(e.type==="document")for(let t of e.nodes)this.visitSync(this.listeners.OnceExit,t);else this.visitSync(this.listeners.OnceExit,e)}return this.result}then(e,t){return this.async().then(e,t)}toString(){return this.css}visitSync(e,t){for(let[r,i]of e){this.result.lastPlugin=r;let o;try{o=i(t,this.helpers)}catch(a){throw this.handleError(a,t.proxyOf)}if(t.type!=="root"&&t.type!=="document"&&!t.parent)return!0;if(lo(o))throw this.getAsyncError()}}visitTick(e){let t=e[e.length-1],{node:r,visitors:i}=t;if(r.type!=="root"&&r.type!=="document"&&!r.parent){e.pop();return}if(i.length>0&&t.visitorIndex<i.length){let[a,u]=i[t.visitorIndex];t.visitorIndex+=1,t.visitorIndex===i.length&&(t.visitors=[],t.visitorIndex=0),this.result.lastPlugin=a;try{return u(r.toProxy(),this.helpers)}catch(f){throw this.handleError(f,r)}}if(t.iterator!==0){let a=t.iterator,u;for(;u=r.nodes[r.indexes[a]];)if(r.indexes[a]+=1,!u[Er]){u[Er]=!0,e.push(iE(u));return}t.iterator=0,delete r.indexes[a]}let o=t.events;for(;t.eventIndex<o.length;){let a=o[t.eventIndex];if(t.eventIndex+=1,a===Gi){r.nodes&&r.nodes.length&&(r[Er]=!0,t.iterator=r.getIterator());return}else if(this.listeners[a]){t.visitors=this.listeners[a];return}}e.pop()}walkSync(e){e[Er]=!0;let t=ZE(e);for(let r of t)if(r===Gi)e.nodes&&e.each(i=>{i[Er]||this.walkSync(i)});else{let i=this.listeners[r];if(i&&this.visitSync(i,e.toProxy()))return}}warnings(){return this.sync().warnings()}get content(){return this.stringify().content}get css(){return this.stringify().css}get map(){return this.stringify().map}get messages(){return this.sync().messages}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){return this.sync().root}get[Symbol.toStringTag](){return"LazyResult"}};zi.registerPostcss=n=>{lp=n};var QE=zi;zi.default=zi;K$.registerLazyResult(zi);q$.registerLazyResult(zi);var Q$=NE,eH=kc;var tH=wp,rH=yp,cp=class{static{l(this,"NoWorkResult")}constructor(e,t,r){t=t.toString(),this.stringified=!1,this._processor=e,this._css=t,this._opts=r,this._map=void 0;let i,o=eH;this.result=new rH(this._processor,i,this._opts),this.result.css=t;let a=this;Object.defineProperty(this.result,"root",{get(){return a.root}});let u=new Q$(o,i,this._opts,t);if(u.isMap()){let[f,h]=u.generate();f&&(this.result.css=f),h&&(this.result.map=h)}else u.clearAnnotation(),this.result.css=u.css}async(){return this.error?Promise.reject(this.error):Promise.resolve(this.result)}catch(e){return this.async().catch(e)}finally(e){return this.async().then(e,e)}sync(){if(this.error)throw this.error;return this.result}then(e,t){return this.async().then(e,t)}toString(){return this._css}warnings(){return[]}get content(){return this.result.css}get css(){return this.result.css}get map(){return this.result.map}get messages(){return[]}get opts(){return this.result.opts}get processor(){return this.result.processor}get root(){if(this._root)return this._root;let e,t=tH;try{e=t(this._css,this._opts)}catch(r){this.error=r}if(this.error)throw this.error;return this._root=e,e}get[Symbol.toStringTag](){return"NoWorkResult"}},nH=cp;cp.default=cp;var iH=nH,sH=QE,oH=gp,aH=bo,po=class{static{l(this,"Processor")}constructor(e=[]){this.version="8.4.38",this.plugins=this.normalize(e)}normalize(e){let t=[];for(let r of e)if(r.postcss===!0?r=r():r.postcss&&(r=r.postcss),typeof r=="object"&&Array.isArray(r.plugins))t=t.concat(r.plugins);else if(typeof r=="object"&&r.postcssPlugin)t.push(r);else if(typeof r=="function")t.push(r);else if(!(typeof r=="object"&&(r.parse||r.stringify)))throw new Error(r+" is not a PostCSS plugin");return t}process(e,t={}){return!this.plugins.length&&!t.parser&&!t.stringifier&&!t.syntax?new iH(this,e,t):new sH(this,e,t)}use(e){return this.plugins=this.plugins.concat(this.normalize([e])),this}},lH=po;po.default=po;aH.registerProcessor(po);oH.registerProcessor(po);var cH=Fc,uH=IE,fH=Hc,hH=bp,dH=$c,pH=bo,mH=vp;function mo(n,e){if(Array.isArray(n))return n.map(i=>mo(i));let{inputs:t,...r}=n;if(t){e=[];for(let i of t){let o={...i,__proto__:dH.prototype};o.map&&(o.map={...o.map,__proto__:uH.prototype}),e.push(o)}}if(r.nodes&&(r.nodes=n.nodes.map(i=>mo(i,e))),r.source){let{inputId:i,...o}=r.source;r.source=o,i!=null&&(r.source.input=e[i])}if(r.type==="root")return new pH(r);if(r.type==="decl")return new cH(r);if(r.type==="rule")return new mH(r);if(r.type==="comment")return new fH(r);if(r.type==="atrule")return new hH(r);throw new Error("Unknown node type: "+n.type)}l(mo,"fromJSON$1");var gH=mo;mo.default=mo;var yH=dp,eC=Fc,bH=QE,vH=Wn,Sp=lH,wH=kc,SH=gH,tC=gp,EH=GE,rC=Hc,nC=bp,CH=yp,xH=$c,MH=wp,TH=KE,iC=vp,sC=bo,IH=Pc;function De(...n){return n.length===1&&Array.isArray(n[0])&&(n=n[0]),new Sp(n)}l(De,"postcss");De.plugin=l(function(e,t){let r=!1;function i(...a){console&&console.warn&&!r&&(r=!0,console.warn(e+`: postcss.plugin was deprecated. Migration guide:
https://evilmartians.com/chronicles/postcss-8-plugin-migration`),process.env.LANG&&process.env.LANG.startsWith("cn")&&console.warn(e+`: \u91CC\u9762 postcss.plugin \u88AB\u5F03\u7528. \u8FC1\u79FB\u6307\u5357:
https://www.w3ctech.com/topic/2226`));let u=t(...a);return u.postcssPlugin=e,u.postcssVersion=new Sp().version,u}l(i,"creator");let o;return Object.defineProperty(i,"postcss",{get(){return o||(o=i()),o}}),i.process=function(a,u,f){return De([i(f)]).process(a,u)},i},"plugin");De.stringify=wH;De.parse=MH;De.fromJSON=SH;De.list=TH;De.comment=n=>new rC(n);De.atRule=n=>new nC(n);De.decl=n=>new eC(n);De.rule=n=>new iC(n);De.root=n=>new sC(n);De.document=n=>new tC(n);De.CssSyntaxError=yH;De.Declaration=eC;De.Container=vH;De.Processor=Sp;De.Document=tC;De.Comment=rC;De.Warning=EH;De.AtRule=nC;De.Result=CH;De.Input=xH;De.Rule=iC;De.Root=sC;De.Node=IH;bH.registerPostcss(De);var RH=De;De.default=De;var qe=BF(RH);qe.stringify;qe.fromJSON;qe.plugin;qe.parse;qe.list;qe.document;qe.comment;qe.atRule;qe.rule;qe.decl;qe.root;qe.CssSyntaxError;qe.Declaration;qe.Container;qe.Processor;qe.Document;qe.Comment;qe.Warning;qe.AtRule;qe.Result;qe.Input;qe.Rule;qe.Root;qe.Node;var sE={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function AH(n){let e=sE[n.tagName]?sE[n.tagName]:n.tagName;return e==="link"&&n.attributes._cssText&&(e="style"),e}l(AH,"getTagName");function Bc(n,e){let t=e?.stylesWithHoverClass.get(n);if(t)return t;let r=n;try{r=qe([$F,HF]).process(n).css}catch(i){console.warn("Failed to adapt css for replay",i)}return e?.stylesWithHoverClass.set(n,r),r}l(Bc,"adaptCssForReplay");function OH(){return{stylesWithHoverClass:new Map}}l(OH,"createCache");function LH(n,e,t,r){let i=[];for(let f of n.childNodes)f.type===le.Text&&i.push(f);let o=e.split("/* rr_split */");for(;o.length>1&&o.length>i.length;)o.splice(-2,2,o.slice(-2).join(""));let a="";t&&(a=Bc(o.join(""),r));let u=0;for(let f=0;f<i.length&&f!==o.length;f++){let h=i[f];if(!t)h.textContent=o[f];else if(f<o.length-1){let p=u,g=o[f+1].length;g=Math.min(g,30);let y=!1;for(;g>2;g--){let w=o[f+1].substring(0,g),S=a.substring(u).indexOf(w);if(y=S!==-1,y){p+=S;break}}y||(p+=o[f].length),h.textContent=a.substring(u,p),u=p}else h.textContent=a.substring(u)}}l(LH,"applyCssSplits");function NH(n,e,t,r){let{doc:i,hackCss:o,cache:a}=r;n.childNodes.length?LH(n,t,o,a):(o&&(t=Bc(t,a)),e.appendChild(i.createTextNode(t)))}l(NH,"buildStyleNode");function _H(n,e){var t;let{doc:r,hackCss:i,cache:o}=e;switch(n.type){case le.Document:return r.implementation.createDocument(null,"",null);case le.DocumentType:return r.implementation.createDocumentType(n.name||"html",n.publicId,n.systemId);case le.Element:{let a=AH(n),u;n.isSVG?u=r.createElementNS("http://www.w3.org/2000/svg",a):(n.isCustom&&((t=r.defaultView)!=null&&t.customElements)&&!r.defaultView.customElements.get(n.tagName)&&r.defaultView.customElements.define(n.tagName,class extends r.defaultView.HTMLElement{}),u=r.createElement(a));let f={};for(let h in n.attributes){if(!Object.prototype.hasOwnProperty.call(n.attributes,h))continue;let p=n.attributes[h];if(!(a==="option"&&h==="selected"&&p===!1)&&p!==null){if(p===!0&&(p=""),h.startsWith("rr_")){f[h]=p;continue}if(typeof p=="string"){if(a==="style"&&h==="_cssText"){NH(n,u,p,e);continue}else if(a==="textarea"&&h==="value"){u.appendChild(r.createTextNode(p)),n.childNodes=[];continue}}try{if(n.isSVG&&h==="xlink:href")u.setAttributeNS("http://www.w3.org/1999/xlink",h,p.toString());else if(h==="onload"||h==="onclick"||h.substring(0,7)==="onmouse")u.setAttribute("_"+h,p.toString());else if(a==="meta"&&n.attributes["http-equiv"]==="Content-Security-Policy"&&h==="content"){u.setAttribute("csp-content",p.toString());continue}else a==="link"&&(n.attributes.rel==="preload"&&n.attributes.as==="script"||n.attributes.rel==="modulepreload")||a==="link"&&n.attributes.rel==="prefetch"&&typeof n.attributes.href=="string"&&Dc(n.attributes.href)==="js"||(a==="img"&&n.attributes.srcset&&n.attributes.rr_dataURL?u.setAttribute("rrweb-original-srcset",n.attributes.srcset):u.setAttribute(h,p.toString()))}catch{}}}for(let h in f){let p=f[h];if(a==="canvas"&&h==="rr_dataURL"){let g=r.createElement("img");g.onload=()=>{let y=u.getContext("2d");y&&y.drawImage(g,0,0,g.width,g.height)},g.src=p.toString(),u.RRNodeType&&(u.rr_dataURL=p.toString())}else if(a==="img"&&h==="rr_dataURL"){let g=u;g.currentSrc.startsWith("data:")||(g.setAttribute("rrweb-original-src",n.attributes.src),g.src=p.toString())}if(h==="rr_width")u.style.setProperty("width",p.toString());else if(h==="rr_height")u.style.setProperty("height",p.toString());else if(h==="rr_mediaCurrentTime"&&typeof p=="number")u.currentTime=p;else if(h==="rr_mediaState")switch(p){case"played":u.play().catch(g=>console.warn("media playback error",g));break;case"paused":u.pause();break}else h==="rr_mediaPlaybackRate"&&typeof p=="number"?u.playbackRate=p:h==="rr_mediaMuted"&&typeof p=="boolean"?u.muted=p:h==="rr_mediaLoop"&&typeof p=="boolean"?u.loop=p:h==="rr_mediaVolume"&&typeof p=="number"?u.volume=p:h==="rr_open_mode"&&u.setAttribute("rr_open_mode",p)}if(n.isShadowHost)if(!u.shadowRoot)u.attachShadow({mode:"open"});else for(;u.shadowRoot.firstChild;)u.shadowRoot.removeChild(u.shadowRoot.firstChild);return u}case le.Text:return n.isStyle&&i?r.createTextNode(Bc(n.textContent,o)):r.createTextNode(n.textContent);case le.CDATA:return r.createCDATASection(n.textContent);case le.Comment:return r.createComment(n.textContent);default:return null}}l(_H,"buildNode");function Ep(n,e){let{doc:t,mirror:r,skipChild:i=!1,hackCss:o=!0,afterAppend:a,cache:u}=e;if(r.has(n.id)){let h=r.getNode(n.id),p=r.getMeta(h);if(mE(p,n))return r.getNode(n.id)}let f=_H(n,{doc:t,hackCss:o,cache:u});if(!f)return null;if(n.rootId&&r.getNode(n.rootId)!==t&&r.replace(n.rootId,t),n.type===le.Document&&(t.close(),t.open(),n.compatMode==="BackCompat"&&n.childNodes&&n.childNodes[0].type!==le.DocumentType&&(n.childNodes[0].type===le.Element&&"xmlns"in n.childNodes[0].attributes&&n.childNodes[0].attributes.xmlns==="http://www.w3.org/1999/xhtml"?t.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'):t.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">')),f=t),r.add(f,n),(n.type===le.Document||n.type===le.Element)&&!i)for(let h of n.childNodes){let p=Ep(h,{doc:t,mirror:r,skipChild:!1,hackCss:o,afterAppend:a,cache:u});if(!p){console.warn("Failed to rebuild",h);continue}if(h.isShadow&&_c(f)&&f.shadowRoot)f.shadowRoot.appendChild(p);else if(n.type===le.Document&&h.type==le.Element){let g=p,y=null;g.childNodes.forEach(w=>{w.nodeName==="BODY"&&(y=w)}),y?(g.removeChild(y),f.appendChild(p),g.appendChild(y)):f.appendChild(p)}else if(n.type===le.Document&&h.type===le.DocumentType)try{f.firstChild&&f.firstChild.nodeType===1?f.insertBefore(p,f.firstChild):f.appendChild(p)}catch{console.error("fix for DOCTYPE inserting failed")}else f.appendChild(p);a&&a(p,h.id)}return f}l(Ep,"buildNodeWithSN");function DH(n,e){function t(r){e(r)}l(t,"walk");for(let r of n.getIds())n.has(r)&&t(n.getNode(r))}l(DH,"visit");function kH(n,e){let t=e.getMeta(n);if(t?.type!==le.Element)return;let r=n;for(let i in t.attributes){if(!(Object.prototype.hasOwnProperty.call(t.attributes,i)&&i.startsWith("rr_")))continue;let o=t.attributes[i];i==="rr_scrollLeft"&&(r.scrollLeft=o),i==="rr_scrollTop"&&(r.scrollTop=o)}}l(kH,"handleScroll");function PH(n,e){let{doc:t,onVisit:r,hackCss:i=!0,afterAppend:o,cache:a,mirror:u=new Vi}=e,f=Ep(n,{doc:t,mirror:u,skipChild:!1,hackCss:i,afterAppend:o,cache:a});return DH(u,h=>{r&&r(h),kH(h,u)}),f}l(PH,"rebuild");var FH="@checksum-ai/rrweb-snapshot",$H="0.0.3-beta.1",HH="rrweb's component to take a snapshot of DOM, aka DOM serializer",BH={prepare:"npm run prepack",prepack:"npm run build",retest:"vitest run",test:"yarn build && vitest run","test:watch":"vitest watch","retest:update":"vitest run --update","test:update":"yarn build && vitest run --update",bench:"vite build && vitest bench",dev:"vite build --watch",build:"yarn turbo prepublish -F @checksum-ai/rrweb-snapshot","check-types":"tsc --noEmit",prepublish:"yarn check-types && vite build",lint:"yarn eslint src"},WH="module",VH={type:"git",url:"git+https://github.com/rrweb-io/rrweb.git"},UH=["rrweb","snapshot","DOM"],GH="./dist/rrweb-snapshot.umd.cjs",zH="./dist/rrweb-snapshot.js",jH="./dist/rrweb-snapshot.umd.cjs",qH="dist/index.d.ts",YH={".":{import:{types:"./dist/index.d.ts",default:"./dist/rrweb-snapshot.js"},require:{types:"./dist/index.d.cts",default:"./dist/rrweb-snapshot.umd.cjs"}}},KH=["dist","package.json"],XH="yanzhen@smartx.com",ZH="MIT",JH={url:"https://github.com/rrweb-io/rrweb/issues"},QH="https://github.com/rrweb-io/rrweb/tree/master/packages/rrweb-snapshot#readme",eB={"@rrweb/types":"^2.0.0-alpha.18","@rrweb/utils":"^2.0.0-alpha.18","@types/jsdom":"^20.0.0","@types/node":"^18.15.11","@types/puppeteer":"^5.4.4",puppeteer:"^17.1.3","ts-node":"^7.0.1",tslib:"^1.9.3",typescript:"^5.4.5",vite:"^5.3.1","vite-plugin-dts":"^3.9.1",vitest:"^1.4.0"},tB={postcss:"^8.4.38"},rB={name:FH,version:$H,description:HH,scripts:BH,type:WH,repository:VH,keywords:UH,main:GH,module:zH,unpkg:jH,typings:qH,exports:YH,files:KH,author:XH,license:ZH,bugs:JH,homepage:QH,devDependencies:eB,dependencies:tB},nB=rB.version;typeof window<"u"&&(window.checksumRRWeb={version:nB});var Wc=class extends hc{constructor(){super({enableInteract:!0});this.shouldHandleEvents=!0;this.name="timeMachine";this.rrwebSnapshot=Cp}static{l(this,"TimeMachine")}setEventHandlers(t,r=!0){this.shouldHandleEvents=r,super.setEventHandlers(t)}async handleEvents(t){try{t=t.filter(r=>r.timestamp>=(this.lastSeenTimestamp?this.lastSeenTimestamp:0)),t.length&&(this.lastSeenTimestamp=t[t.length-1].timestamp);for(let r of t)await this.eventProcessor.processEvent(r,this.shouldHandleEvents),await this.skipEvents([r])}catch(r){console.error(r)}}setShouldHandleEvents(t){this.shouldHandleEvents=t}async goBack(t,r={}){return t?this.sessionReplayer.goBack(t):this.goLive()}getElementByRRwebId(t){return this.sessionReplayer.getNodeById(t)}goLive(){return this.sessionReplayer.goLive()}getCurrentTimestamp(){return this.sessionReplayer.getCurrentTimestamp()}getFirstEventTimestamp(){return this.sessionReplayer.getFirstEventTimestamp()}setNewRRWebSeekMode(t){this.sessionReplayer.setNewRRWebSeekMode(t)}subscribeToEventCast(t,r,i){this.sessionReplayer.subscribeTo(t,r,i)}isConnected(){return this.sessionReplayer.isConnected()}unsubscribeFromEventCast(t){this.sessionReplayer.unsubscribeFrom(t)}openSeekbar(){this.seeker||(this.seeker=new dc(this)),this.seeker.open()}};var oC=l(({locator:n,parentFramesSelectors:e=[]})=>e.reverse().reduce((t,r)=>`frameLocator('${r}').${t}`,n),"getNestedFramesSelection");var aC=hs(ua());var Vc=class{constructor(){this.esraExtractors=[];this.playwrightSelector=new Mt}static{l(this,"TimeMachineElementSelection")}async getSelector(e,{extractPlaywrightSelector:t=!0,extractEsraMetadata:r=!0,rootDocument:i=document}={}){if(!e)return null;let o={};if(r)try{console.log("extracting ESRA metadata...");let a=this.getESRAExtractor(e).extract(e);o.esraMetadata=a.toMetadata(),console.log("ESRA metadata extraction complete")}catch(a){console.error("Failed to extract ESRA metadata",a)}if(t){let{selector:a,locator:u,parentFramesSelectors:f}=await this.playwrightSelector.getSelectorAndLocator(e,{ignoredIframesSelectors:[".replayer-wrapper > iframe"],rootDocument:i,flags:{originFlag:"timemachine"}});o.playwrightSelector=a,o.playwrightLocator=u,o.playwrightParentFramesSelectors=f}return o}getESRAExtractor(e){let t=e.ownerDocument;if(!t)throw console.warn("Node does not have an owner document",e),new Error("Node does not have an owner document");let r=this.esraExtractors.find(o=>o.isSameDocument(t));if(r)return r;let i=new rr(t);return this.esraExtractors.push(i),i}};var Uc=class n{static{l(this,"SequenceMatcher")}findSequence(e,t,r){for(let i=0;i<=e.length-t.length;i++){let o=this.findMatch(i,e,t,r);if(o!==null)return o}return null}findMatch(e,t,r,i){let o={},a=[];for(let u=0;u<r.length;u++){let f=t[e+u],h=r[u];if(!this.matchItem(h,f,o,i??f))return null;a.push(f)}return{items:a,token_values:o}}matchItem(e,t,r,i){if(Array.isArray(e)&&Array.isArray(t))return this.matchArray(e,t,r,i);if(typeof e=="object"&&e!==null&&typeof t=="object"&&t!==null){for(let o in e){let a=e[o],u=t[o];if(typeof a=="string"&&a.startsWith("$")){if(r[a]===void 0)r[a]={value:u,item:i};else if(r[a].value!==u)return!1}else if(typeof a=="object"&&a!==null){if(!this.matchItem(a,u,r,i))return!1}else if(a!==u)return!1}return!0}else return e===t}matchArray(e,t,r,i){for(let o=0;o<=t.length-e.length;o++){let a=t.slice(o,o+e.length),u=this.findSequence(a,e,i);if(u){for(let f in u.token_values)if(r[f]===void 0)r[f]={value:u.token_values[f].value,item:i};else if(r[f].value!==u.token_values[f].value)return!1;return!0}}return!1}runExample(){let e=[{x:"banana",id:"1gf3",class:"fruit",index:"3",details:{a:1,b:2,nested:{key:"value1"}},arr:[{a:3,b:2},{a:1,b:2}]},{y:"apple",id:"4gs2",class:"fruit",parentIndex:"3",index:"7",details:{a:1,b:2,nested:{key:"value1"}}}],t=[{class:"$1",index:"$2",details:{a:1,b:"$3",nested:{key:"$4"}},arr:[{a:1,b:"$5"}]},{class:"$1",parentIndex:"$2",details:{a:1,b:"$3",nested:{key:"$4"}}}],i=new n().findSequence(e,t);console.log(i)}};var iB=!1,Gc=class extends Pi{constructor(t){super();this.onStep=t;this.events=[];this.previousEvent=null;this.steps=[];this.lastInteractionEventIndex=0;this.sequences=[];this.sequenceMatcher=new Uc;this.inputFilter=void 0;this.clickFilter=void 0;this.releasePendingInputAction=l(()=>{this.log("releasePendingInputAction",this.inputFilter),clearTimeout(this.inputFilter.timeout),this.addStep({step:this.inputFilter.action,type:"action"}),this.inputFilter=void 0},"releasePendingInputAction");this.lastMouseDown=void 0;this.hasUndefinedFocus=!1;this.releasePendingClickActions=l((t=!0)=>{this.log("releasePendingClickActions",Date.now(),{addInteractions:t},this.clickFilter),this.clickFilter&&clearTimeout(this.clickFilter.timeout),t&&this.clickFilter.actions.forEach(r=>this.addStep({step:r,type:"action"})),this.clickFilter=void 0},"releasePendingClickActions");this.dragAndDropSequence={events:[{type:j.IncrementalSnapshot,data:{source:V.MouseInteraction,type:ne.MouseDown}},{type:j.IncrementalSnapshot,data:{source:V.Mutation,adds:[{parentId:"$dropzoneId",node:{id:"$draggableId"}}],removes:[{id:"$draggableId"}]}}],handler:l(async({token_values:{$dropzoneId:t,$draggableId:r},items:i})=>{let o=r.value,{selector:a}=await this.getNodeAndSelector(o,{timestamp:r.item.timestamp,revert:!1});if(!a)return;let u=t.value,{selector:f}=await this.getNodeAndSelector(u,{timestamp:t.item.timestamp});if(f)return console.log("Drag and drop",a.playwrightLocator,f.playwrightLocator),[this.makePageAction("drag_and_drop",i[0],a,{dropTarget:{selector:f.playwrightSelector,locator:f.playwrightLocator,parentFramesSelectors:f.playwrightParentFramesSelectors,esraMetadata:f.esraMetadata,rrwebId:u}})]},"handler")};this.maxNumberOfGetNodeRetries=3;this.elementSelector=new Vc,this.buildSequences()}static{l(this,"VisualTestGenerationTimeMachineEventHandlers")}log(...t){iB&&console.log(...t)}setSessionReplayer(){let t=window.parent.document.createElement("div");t.classList.add("live-tm"),t.style.display="none",window.parent.document.body.appendChild(t),this.sessionReplayer=new $i({enableInteract:!1,root:t,onlyLive:!0}),this.sessionReplayer.start({firstEventTimestamp:Date.now()})}getSteps(t=0){return this.steps.slice(t)}async preEvent(t){this.inputFilter&&Bn(t)&&!this.isConsecutiveInputEvent(t)&&this.releasePendingInputAction(),this.clickFilter&&Bn(t)&&await this.isConsecutiveCheckboxInputEvent(t)&&this.releasePendingClickActions(!1),this.clickFilter&&Bn(t)&&!this.isConsecutiveMouseInteractionEvent(t)&&this.releasePendingClickActions(),this.events.push(t)}async postEvent(t,r,i=!0){this.sessionReplayer.fastForward([t]),this.previousEvent=t}async handleInput(t,r,i=!1){if(this.inputFilter){this.inputFilter.action.fillValue=t.text,this.inputFilter.timeout=this.setInputWaitTimeout();return}if(!t.userTriggered)return;let{node:o,selector:a}=await this.getNodeAndSelector(t.id);if(!o||!a)return;let u=this.makePageAction(this.getInputEventCode(o,t),r,a);if(u.rrwebId=t.id,u.eventCode==="input"){u.timestamp=this.previousEvent?.timestamp??r.timestamp,u.fillValue=t.text,this.inputFilter={action:u,nodeId:t.id,contenteditable:i,timeout:this.setInputWaitTimeout()};return}u.eventCode==="selectoption"&&(u.fillValue=t.text),u.eventCode==="upload_files"&&(u.files=[],u.files.push(t.text.split("\\").pop())),this.addStep({step:u,type:"action"})}isConsecutiveInputEvent(t){return this.inputFilter?this.inputFilter.contenteditable?t.type===j.Custom&&t.data.tag==="contenteditable-input"&&t.data.payload.id===this.inputFilter.nodeId:t.type===j.IncrementalSnapshot&&t.data.source===V.Input&&t.data.id===this.inputFilter.nodeId&&!!t.data.userTriggered:!1}setInputWaitTimeout(){return this.inputFilter?.timeout&&clearTimeout(this.inputFilter.timeout),setTimeout(this.releasePendingInputAction,1e3)}handleContentEditableInput(t,r){this.handleInput({userTriggered:!0,id:t.id,text:t.text,isChecked:!1,source:V.Input},r,!0)}handleNativeDialog(t,r){try{let{dialogAction:i,dialogType:o,dialogResult:a,dialogMessage:u}=t,f={dialogResult:a,dialogType:o,dialogMessage:u},h=this.makePageAction(i,r,{},{nativeDialog:f});this.addStep({step:h,type:"action"})}catch(i){console.error("handleNativeDialog",i)}}handleRecordAssertion(t,r){this.addStep({step:this.makeAssertion(t,r),type:"assertion"})}handleRecordHover(t,r){try{let i=this.makePageAction("hover",r,{playwrightLocator:t.locator});this.addStep({step:i,type:"action"})}catch(i){console.error("handleRecordHover",i)}}handleKeyStroke(t,r){}async handleMouseDown(t,r){let{selector:i}=await this.getNodeAndSelector(t.id);this.lastMouseDown={selector:i,data:t,event:r}}handleFocus(t,r){this.hasUndefinedFocus=t.id===-1}async handleClick(t,r){try{if(t.x===void 0||t.y===void 0)return;if(this.lastMouseDown&&this.lastMouseDown.data.id!==t.id&&this.hasUndefinedFocus){let a=this.makePageAction("click",this.lastMouseDown.event,this.lastMouseDown.selector);this.addStep({step:a,type:"action"});return}let{selector:i}=await this.getNodeAndSelector(t.id);if(!i)return;let o=this.makePageAction("click",r,i);if(this.log("handleClick",Date.now(),o),this.clickFilter){this.log("handleClick","adding to filter"),this.clickFilter.actions.push(o);return}this.clickFilter={actions:[o],nodeId:t.id,timeout:this.setClickWaitTimeout()}}finally{this.hasUndefinedFocus=!1,this.lastMouseDown=void 0}}isConsecutiveMouseInteractionEvent(t){return this.clickFilter?t.type===j.IncrementalSnapshot&&t.data.source===V.MouseInteraction&&t.data.id===this.clickFilter.nodeId:!1}async isConsecutiveCheckboxInputEvent(t){if(!this.clickFilter)return!1;let r=l(async i=>{let{node:o}=await this.getNodeAndSelector(this.clickFilter.nodeId);return["check","uncheck"].includes(this.getInputEventCode(o,i))},"isCheckboxInput");return t.type===j.IncrementalSnapshot&&t.data.source===V.Input&&t.data.userTriggered&&t.data.id===this.clickFilter.nodeId&&await r(t.data)}setClickWaitTimeout(){return this.clickFilter?.timeout&&clearTimeout(this.clickFilter.timeout),this.log("setClickWaitTimeout",Date.now()),setTimeout(this.releasePendingClickActions,600)}async handleDblClick(t,r){if(t.x===void 0||t.y===void 0)return;let{selector:i}=await this.getNodeAndSelector(t.id),o=this.makePageAction("double_click",r,i);this.log("handleDblClick",o),this.addStep({step:o,type:"action"}),this.releasePendingClickActions(!1)}buildSequences(){this.sequences.push(this.dragAndDropSequence)}async performSequenceSearch(){let t=this.events.slice(this.lastInteractionEventIndex);for(let r of this.sequences){let i=this.sequenceMatcher.findSequence(t,r.events);if(i){let o=await r.handler(i);o&&o.forEach(a=>this.addStep({step:a,type:"action"}))}}await this.sessionReplayer.goLive()}addStep(t){t.type==="action"&&!t.step.id&&(t.step.id=Date.now().toString()),this.steps.push(t),this.lastInteractionEventIndex=this.events.length,this.log("addStep",t),this.onStep?.(t)}makeAssertion(t,r){return{matcher:t.matcher,locator:t.locator,thought:t.thought,timestamp:r.timestamp,id:t?.id||Date.now().toString()}}makePageAction(t,r,i,o={}){return console.log("making action with ts",r.timestamp,Date.now()-r.timestamp),{eventCode:t,selector:i.playwrightSelector,locator:oC({locator:i.playwrightLocator,parentFramesSelectors:i.playwrightParentFramesSelectors}),esraMetadata:i.esraMetadata,pageId:void 0,timestamp:r.timestamp,id:o?.id||Date.now().toString(),rrwebId:r.data?.id,...o,parentFramesSelectors:[]}}async getNodeById(t,{retriesLeft:r=this.maxNumberOfGetNodeRetries,useCompoundInteractableDetection:i=!0}={}){if(!r)return console.error("no node"),null;let o=this.sessionReplayer.getNodeById(t);return o?i?xa(o,[]):o:(await(0,aC.default)(100*(this.maxNumberOfGetNodeRetries-r+1)),this.getNodeById(t,{retriesLeft:r-1,useCompoundInteractableDetection:i}))}getInputEventCode(t,r){if(t.tagName.toLowerCase()==="select")return"selectoption";switch(t.getAttribute("type")){case"file":return"upload_files";case"checkbox":case"radio":return r.isChecked?"check":"uncheck";case"text":default:return"input"}}async getNodeAndSelector(t,{timestamp:r,revert:i=!0}={}){r&&await this.sessionReplayer.goBack(r);let o=await this.getNodeById(t);if(!o)return{};let a=await this.elementSelector.getSelector(o,{extractEsraMetadata:!1,rootDocument:this.sessionReplayer.getIframeDocument()});return a?(r&&i&&await this.sessionReplayer.goLive(),{node:o,selector:a}):{node:o}}};var zc=class{constructor(e){this.timeMachine=e;this.sendRecordedSteps=!1;this.onNewRecordedStep=l(e=>{this.sendRecordedSteps&&window.parent.postMessage({type:"new-recorded-step",data:[e]})},"onNewRecordedStep");this.eventHandlers=new Gc(this.onNewRecordedStep)}static{l(this,"VisualTestGenerator")}init(){this.timeMachine.setEventHandlers(this.eventHandlers,!0)}setSendRecordedSteps(e){this.sendRecordedSteps=e}startInspector({singleSelection:e=!0,rootDocument:t,timestamp:r,eventName:i}){this.stopInspector();let o=l(a=>a.top.document.querySelector("iframe.time-machine-iframe").contentDocument,"getRenderDocument");this.elementInspector=new Di({rootDocument:t??this.getRRwebReplayerDocument(),getRenderDocument:o,rootDocumentForSelectorGenerator:this.getRRwebReplayerDocument(),eventName:i}),this.elementInspector.start({singleSelection:e,timestamp:r})}getRRwebReplayerDocument(){return document.querySelector(".replayer-wrapper > iframe").contentDocument}stopInspector(){this.elementInspector?.stop()}consumeSelections(){return this.elementInspector.consumeSelections()}};(function(){let n=Element.prototype.addEventListener;Element.prototype.addEventListener=function(e,t,r){n.call(this,e,t,r),this._checksum_eventListenerList||(this._checksum_eventListenerList={}),this._checksum_eventListenerList[e]||(this._checksum_eventListenerList[e]=[]),this._checksum_eventListenerList[e].push(t)}})();var jc=class{static{l(this,"MockAutoHealAgent")}static{this.initialize=l(function(...e){return Promise.resolve()},"initialize")}static{this.success=l(function(){return Promise.resolve()},"success")}static{this.error=l(function(...e){return Promise.resolve()},"error")}static{this.breakpoint=l(function(){return Promise.resolve()},"breakpoint")}static{this.pushEval=l(function(...e){},"pushEval")}static{this.popEval=l(function(){},"popEval")}static{this.log=l(function(...e){},"log")}static{this.getLogs=l(function(){return[]},"getLogs")}};if(!window.checksum){let n=new cc,e=new Wc,t=new zc(e);window.checksum={testGenerator:n,timeMachine:e,visualTestGenerator:t},window.AutoHealAgent=jc,window.checksumRRWeb&&console.log(`Using forked rrweb@${window.checksumRRWeb.version}`)}})();
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

rrweb/dist/rrweb.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
