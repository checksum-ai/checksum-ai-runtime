(()=>{var cS=Object.create;var ms=Object.defineProperty;var uS=Object.getOwnPropertyDescriptor;var dS=Object.getOwnPropertyNames;var fS=Object.getPrototypeOf,hS=Object.prototype.hasOwnProperty;var o=(n,e)=>ms(n,"name",{value:e,configurable:!0});var ps=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports),mS=(n,e)=>{for(var t in e)ms(n,t,{get:e[t],enumerable:!0})},pS=(n,e,t,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let a of dS(e))!hS.call(n,a)&&a!==t&&ms(n,a,{get:()=>e[a],enumerable:!(i=uS(e,a))||i.enumerable});return n};var ni=(n,e,t)=>(t=n!=null?cS(fS(n)):{},pS(e||!n||!n.__esModule?ms(t,"default",{value:n,enumerable:!0}):t,n));var Gd=ps((Ms,tl)=>{(function(n,e){typeof Ms=="object"&&typeof tl=="object"?tl.exports=e():typeof define=="function"&&define.amd?define([],e):typeof Ms=="object"?Ms.resq=e():(n.window=n.window||{},n.window.resq=e())})(window,function(){return function(n){var e={};function t(i){if(e[i])return e[i].exports;var a=e[i]={i,l:!1,exports:{}};return n[i].call(a.exports,a,a.exports,t),a.l=!0,a.exports}return o(t,"r"),t.m=n,t.c=e,t.d=function(i,a,l){t.o(i,a)||Object.defineProperty(i,a,{enumerable:!0,get:l})},t.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},t.t=function(i,a){if(1&a&&(i=t(i)),8&a||4&a&&typeof i=="object"&&i&&i.__esModule)return i;var l=Object.create(null);if(t.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:i}),2&a&&typeof i!="string")for(var u in i)t.d(l,u,function(d){return i[d]}.bind(null,u));return l},t.n=function(i){var a=i&&i.__esModule?function(){return i.default}:function(){return i};return t.d(a,"a",a),a},t.o=function(i,a){return Object.prototype.hasOwnProperty.call(i,a)},t.p="",t(t.s=16)}([function(n,e,t){"use strict";t.d(e,"a",function(){return F}),t.d(e,"d",function(){return X}),t.d(e,"b",function(){return se}),t.d(e,"c",function(){return he});var i=t(1),a=t.n(i),l=t(14),u=t.n(l),d=t(2),f=t.n(d),h=t(15),p=t.n(h);function v(V,W){var K=Object.keys(V);if(Object.getOwnPropertySymbols){var Y=Object.getOwnPropertySymbols(V);W&&(Y=Y.filter(function(z){return Object.getOwnPropertyDescriptor(V,z).enumerable})),K.push.apply(K,Y)}return K}o(v,"l");var y=Array.isArray,w=Object.keys;function M(V){return typeof V=="function"}o(M,"x");function b(V){return V instanceof HTMLElement||V instanceof Text}o(b,"y");function R(V){return f()(V)==="object"&&!y(V)}o(R,"h");function T(V){if(!V||typeof V=="string")return V;var W=function(K){for(var Y=1;Y<arguments.length;Y++){var z=arguments[Y]!=null?arguments[Y]:{};Y%2?v(Object(z),!0).forEach(function(J){u()(K,J,z[J])}):Object.getOwnPropertyDescriptors?Object.defineProperties(K,Object.getOwnPropertyDescriptors(z)):v(Object(z)).forEach(function(J){Object.defineProperty(K,J,Object.getOwnPropertyDescriptor(z,J))})}return K}({},V);return delete W.children,W}o(T,"b");function _(V,W){var K=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return!(!y(V)||!y(W))&&(K?V.length===W.length&&!V.find(function(Y){return!W.includes(Y)}):V.some(function(Y){return W.includes(Y)}))}o(_,"v");function C(){var V=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},W=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},K=arguments.length>2&&arguments[2]!==void 0&&arguments[2],Y=[];if(!w(V).length)return!0;if(W===null||!w(W).length)return!1;if(K)return p()(V,W);var z=w(V).filter(function(J){return w(W).includes(J)});return z.forEach(function(J){R(V[J])&&R(W[J])&&(Y=Y.concat(C(V[J],W[J]))),(V[J]===W[J]||_(V[J],W[J]))&&Y.push(W)}),Y.length>0&&Y.filter(function(J){return J}).length===z.length}o(C,"_");function F(V){var W,K={children:[]};if(!V)return K;K.name=M(W=V.type)?W.displayName||W.name:W,K.props=T(V.memoizedProps),K.state=function(z){if(z){var J=z.baseState;return J||z}}(V.memoizedState);var Y=V.child;if(Y)for(K.children.push(Y);Y.sibling;)K.children.push(Y.sibling),Y=Y.sibling;return K.children=K.children.map(function(z){return F(z)}),M(V.type)&&function(z){return z.children.length>1}(K)?(K.node=function(z){return z.children.map(function(J){return J.node}).filter(function(J){return!!J})}(K),K.isFragment=!0):K.node=function(z){return b(z.stateNode)?z.stateNode:z.child&&b(z.child.stateNode)?z.child.stateNode:null}(V),K}o(F,"m");function G(V){for(;V.length;){var W=V.shift();if(W.node)return W.node;W.children&&Array.isArray(W.children)&&V.push.apply(V,a()(W.children))}}o(G,"g");function Q(V,W){for(var K=[];V.length;){var Y=V.shift().children;Y&&Array.isArray(Y)&&Y.forEach(function(z){W(z)&&(!z.node&&Array.isArray(z.children)&&(z.node=G(z.children.concat([]))),K.push(z)),V.push(z)})}return K}o(Q,"O");function le(V,W){var K=function(Y){if(Y){var z=Y.split("(");return z.length===1?Y:z.find(function(J){return J.includes(")")}).replace(/\)*/g,"")}}(W);return new RegExp("^"+V.split("*").map(function(Y){return Y.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}).join(".+")+"$").test(K)}o(le,"w");function X(V,W){var K=arguments.length>3?arguments[3]:void 0;return V.reduce(function(Y,z){return Y.concat(Q(Y,K&&typeof K=="function"?K:function(J){return typeof J.name=="string"?le(z,J.name):J.name!==null&&f()(J.name)==="object"&&le(z,J.name.displayName)}))},[W])}o(X,"j");function se(V,W,K){var Y=arguments.length>3&&arguments[3]!==void 0&&arguments[3];return M(K)?(console.warn("Functions are not supported as filter matchers"),[]):V.filter(function(z){return R(K)&&C(K,z[W],Y)||y(K)&&_(K,z[W],Y)||z[W]===K})}o(se,"M");function he(V){if(V.hasOwnProperty("_reactRootContainer"))return V._reactRootContainer._internalRoot.current;var W=Object.keys(V).find(function(K){return K.startsWith("__reactInternalInstance")||K.startsWith("__reactFiber")||K.startsWith("__reactContainer")});return W?V[W]:void 0}o(he,"P")},function(n,e,t){var i=t(17),a=t(18),l=t(19),u=t(20);n.exports=function(d){return i(d)||a(d)||l(d)||u()},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){function t(i){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?(n.exports=t=o(function(a){return typeof a},"r"),n.exports.default=n.exports,n.exports.__esModule=!0):(n.exports=t=o(function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},"r"),n.exports.default=n.exports,n.exports.__esModule=!0),t(i)}o(t,"r"),n.exports=t,n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){function t(i){return n.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},n.exports.default=n.exports,n.exports.__esModule=!0,t(i)}o(t,"r"),n.exports=t,n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){n.exports=function(t,i){if(!(t instanceof i))throw new TypeError("Cannot call a class as a function")},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){function t(i,a){for(var l=0;l<a.length;l++){var u=a[l];u.enumerable=u.enumerable||!1,u.configurable=!0,"value"in u&&(u.writable=!0),Object.defineProperty(i,u.key,u)}}o(t,"r"),n.exports=function(i,a,l){return a&&t(i.prototype,a),l&&t(i,l),i},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){function t(i,a){return n.exports=t=Object.setPrototypeOf||function(l,u){return l.__proto__=u,l},n.exports.default=n.exports,n.exports.__esModule=!0,t(i,a)}o(t,"r"),n.exports=t,n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e,t){var i=t(6);n.exports=function(a,l){if(typeof l!="function"&&l!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(l&&l.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),l&&i(a,l)},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e,t){var i=t(3),a=t(6),l=t(22),u=t(23);function d(f){var h=typeof Map=="function"?new Map:void 0;return n.exports=d=o(function(p){if(p===null||!l(p))return p;if(typeof p!="function")throw new TypeError("Super expression must either be null or a function");if(h!==void 0){if(h.has(p))return h.get(p);h.set(p,v)}function v(){return u(p,arguments,i(this).constructor)}return o(v,"e"),v.prototype=Object.create(p.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),a(v,p)},"c"),n.exports.default=n.exports,n.exports.__esModule=!0,d(f)}o(d,"c"),n.exports=d,n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch{typeof window=="object"&&(t=window)}n.exports=t},function(n,e){n.exports=function(t,i){(i==null||i>t.length)&&(i=t.length);for(var a=0,l=new Array(i);a<i;a++)l[a]=t[a];return l},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e,t){"use strict";(function(i){t.d(e,"a",function(){return l});var a=t(0);function l(){var u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5e3,d=arguments.length>1?arguments[1]:void 0;if(i.isReactLoaded)return Promise.resolve("React already loaded");var f=o(function(){var h=document.createTreeWalker(document);if(d)return document.querySelector(d);for(;h.nextNode();)if(h.currentNode.hasOwnProperty("_reactRootContainer"))return h.currentNode},"o");return new Promise(function(h,p){var v=!1,y=null;o(function w(){var M=f();if(M&&(i.isReactLoaded=!0,i.rootReactElement=Object(a.c)(M),i.rootReactElement))return clearTimeout(y),h();v||setTimeout(w,200)},"e")(),y=setTimeout(function(){v=!0,p("Timed out")},u)})}o(l,"o")}).call(this,t(9))},function(n,e,t){"use strict";t.d(e,"a",function(){return G});var i=t(1),a=t.n(i),l=t(4),u=t.n(l),d=t(5),f=t.n(d),h=t(7),p=t.n(h),v=t(13),y=t.n(v),w=t(3),M=t.n(w),b=t(8),R=t.n(b),T=t(0);function _(Q){var le=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}();return function(){var X,se=M()(Q);if(le){var he=M()(this).constructor;X=Reflect.construct(se,arguments,he)}else X=se.apply(this,arguments);return y()(this,X)}}o(_,"v");var C=function(Q){p()(X,Q);var le=_(X);function X(se){return u()(this,X),se||(se=[]),le.call.apply(le,[this].concat(a()(se)))}return o(X,"r"),f()(X,[{key:"byProps",value:o(function(se){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{exact:!1},V=he.exact,W=Object(T.b)(this,"props",se,V);return new X(W)},"value")},{key:"byState",value:o(function(se){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{exact:!1},V=he.exact,W=Object(T.b)(this,"state",se,V);return new X(W)},"value")}]),X}(R()(Array)),F=function(Q){p()(X,Q);var le=_(X);function X(se,he){var V;for(var W in u()(this,X),(V=le.call(this,se))._nodes=he,se)V[W]=se[W];return V}return o(X,"r"),f()(X,[{key:"byProps",value:o(function(se){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{exact:!1},V=he.exact,W=Object(T.b)(this._nodes,"props",se,V)[0];return new X(W,this._nodes)},"value")},{key:"byState",value:o(function(se){var he=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{exact:!1},V=he.exact,W=Object(T.b)(this._nodes,"state",se,V)[0];return new X(W,this._nodes)},"value")}]),X}(R()(Object)),G=function(){function Q(le,X){u()(this,Q),this.selectors=le.split(" ").filter(function(se){return!!se}).map(function(se){return se.trim()}),this.rootComponent=X,this.tree=Object(T.a)(this.rootComponent)}return o(Q,"t"),f()(Q,[{key:"find",value:o(function(){return this.nodes=new C(Object(T.d)(this.selectors,this.tree,!0)),new F(this.nodes[0],this.nodes)},"value")},{key:"findAll",value:o(function(){return new C(Object(T.d)(this.selectors,this.tree))},"value")}]),Q}()},function(n,e,t){var i=t(2).default,a=t(21);n.exports=function(l,u){return!u||i(u)!=="object"&&typeof u!="function"?a(l):u},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){n.exports=function(t,i,a){return i in t?Object.defineProperty(t,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[i]=a,t},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e,t){"use strict";var i=Array.isArray,a=Object.keys,l=Object.prototype.hasOwnProperty;n.exports=o(function u(d,f){if(d===f)return!0;if(d&&f&&typeof d=="object"&&typeof f=="object"){var h,p,v,y=i(d),w=i(f);if(y&&w){if((p=d.length)!=f.length)return!1;for(h=p;h--!=0;)if(!u(d[h],f[h]))return!1;return!0}if(y!=w)return!1;var M=d instanceof Date,b=f instanceof Date;if(M!=b)return!1;if(M&&b)return d.getTime()==f.getTime();var R=d instanceof RegExp,T=f instanceof RegExp;if(R!=T)return!1;if(R&&T)return d.toString()==f.toString();var _=a(d);if((p=_.length)!==a(f).length)return!1;for(h=p;h--!=0;)if(!l.call(f,_[h]))return!1;for(h=p;h--!=0;)if(!u(d[v=_[h]],f[v]))return!1;return!0}return d!=d&&f!=f},"t")},function(n,e,t){"use strict";t.r(e),function(i){t.d(e,"resq$",function(){return f}),t.d(e,"resq$$",function(){return h});var a=t(12),l=t(11);t.d(e,"waitToLoadReact",function(){return l.a});var u=t(0);function d(p,v,y){if(!y&&!i.isReactLoaded)throw new Error("Could not find the root element of your application");var w=i.rootReactElement;if(y instanceof HTMLElement&&(w=Object(u.c)(y)),!w)throw new Error("Could not find instance of React in given element");return new a.a(p,w)[v]()}o(d,"i");function f(p,v){return d(p,"find",v)}o(f,"c");function h(p,v){return d(p,"findAll",v)}o(h,"f")}.call(this,t(9))},function(n,e,t){var i=t(10);n.exports=function(a){if(Array.isArray(a))return i(a)},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){n.exports=function(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e,t){var i=t(10);n.exports=function(a,l){if(a){if(typeof a=="string")return i(a,l);var u=Object.prototype.toString.call(a).slice(8,-1);return u==="Object"&&a.constructor&&(u=a.constructor.name),u==="Map"||u==="Set"?Array.from(a):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?i(a,l):void 0}},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){n.exports=function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){n.exports=function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){n.exports=function(t){return Function.toString.call(t).indexOf("[native code]")!==-1},n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e,t){var i=t(6),a=t(24);function l(u,d,f){return a()?(n.exports=l=Reflect.construct,n.exports.default=n.exports,n.exports.__esModule=!0):(n.exports=l=o(function(h,p,v){var y=[null];y.push.apply(y,p);var w=new(Function.bind.apply(h,y));return v&&i(w,v.prototype),w},"u"),n.exports.default=n.exports,n.exports.__esModule=!0),l.apply(null,arguments)}o(l,"u"),n.exports=l,n.exports.default=n.exports,n.exports.__esModule=!0},function(n,e){n.exports=function(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}},n.exports.default=n.exports,n.exports.__esModule=!0}])})});var oo=ps(($C,hh)=>{hh.exports=n=>new Promise(e=>setTimeout(e,n))});var gh=ps((Or,wi)=>{(function(){var n,e="4.17.21",t=200,i="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",a="Expected a function",l="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",d=500,f="__lodash_placeholder__",h=1,p=2,v=4,y=1,w=2,M=1,b=2,R=4,T=8,_=16,C=32,F=64,G=128,Q=256,le=512,X=30,se="...",he=800,V=16,W=1,K=2,Y=3,z=1/0,J=9007199254740991,ve=17976931348623157e292,et=NaN,Ue=4294967295,B=Ue-1,P=Ue>>>1,te=[["ary",G],["bind",M],["bindKey",b],["curry",T],["curryRight",_],["flip",le],["partial",C],["partialRight",F],["rearg",Q]],ee="[object Arguments]",Oe="[object Array]",ut="[object AsyncFunction]",Xe="[object Boolean]",it="[object Date]",en="[object DOMException]",hn="[object Error]",tn="[object Function]",Me="[object GeneratorFunction]",Pe="[object Map]",Ce="[object Number]",ke="[object Null]",Ge="[object Object]",Te="[object Promise]",Fr="[object Proxy]",Pr="[object RegExp]",kt="[object Set]",Hr="[object String]",Ti="[object Symbol]",Rh="[object Undefined]",Wr="[object WeakMap]",Ah="[object WeakSet]",Br="[object ArrayBuffer]",nr="[object DataView]",Ao="[object Float32Array]",_o="[object Float64Array]",Do="[object Int8Array]",No="[object Int16Array]",Lo="[object Int32Array]",Oo="[object Uint8Array]",ko="[object Uint8ClampedArray]",Fo="[object Uint16Array]",Po="[object Uint32Array]",_h=/\b__p \+= '';/g,Dh=/\b(__p \+=) '' \+/g,Nh=/(__e\(.*?\)|\b__t\)) \+\n'';/g,sc=/&(?:amp|lt|gt|quot|#39);/g,oc=/[&<>"']/g,Lh=RegExp(sc.source),Oh=RegExp(oc.source),kh=/<%-([\s\S]+?)%>/g,Fh=/<%([\s\S]+?)%>/g,ac=/<%=([\s\S]+?)%>/g,Ph=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Hh=/^\w*$/,Wh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ho=/[\\^$.*+?()[\]{}|]/g,Bh=RegExp(Ho.source),Wo=/^\s+/,Vh=/\s/,Uh=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Gh=/\{\n\/\* \[wrapped with (.+)\] \*/,$h=/,? & /,qh=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,zh=/[()=,{}\[\]\/\s]/,jh=/\\(\\)?/g,Kh=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,lc=/\w*$/,Yh=/^[-+]0x[0-9a-f]+$/i,Qh=/^0b[01]+$/i,Xh=/^\[object .+?Constructor\]$/,Zh=/^0o[0-7]+$/i,Jh=/^(?:0|[1-9]\d*)$/,em=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ii=/($^)/,tm=/['\n\r\u2028\u2029\\]/g,Ci="\\ud800-\\udfff",nm="\\u0300-\\u036f",rm="\\ufe20-\\ufe2f",im="\\u20d0-\\u20ff",cc=nm+rm+im,uc="\\u2700-\\u27bf",dc="a-z\\xdf-\\xf6\\xf8-\\xff",sm="\\xac\\xb1\\xd7\\xf7",om="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",am="\\u2000-\\u206f",lm=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",fc="A-Z\\xc0-\\xd6\\xd8-\\xde",hc="\\ufe0e\\ufe0f",mc=sm+om+am+lm,Bo="['\u2019]",cm="["+Ci+"]",pc="["+mc+"]",Ri="["+cc+"]",gc="\\d+",um="["+uc+"]",vc="["+dc+"]",yc="[^"+Ci+mc+gc+uc+dc+fc+"]",Vo="\\ud83c[\\udffb-\\udfff]",dm="(?:"+Ri+"|"+Vo+")",Ec="[^"+Ci+"]",Uo="(?:\\ud83c[\\udde6-\\uddff]){2}",Go="[\\ud800-\\udbff][\\udc00-\\udfff]",rr="["+fc+"]",bc="\\u200d",Sc="(?:"+vc+"|"+yc+")",fm="(?:"+rr+"|"+yc+")",wc="(?:"+Bo+"(?:d|ll|m|re|s|t|ve))?",Mc="(?:"+Bo+"(?:D|LL|M|RE|S|T|VE))?",xc=dm+"?",Tc="["+hc+"]?",hm="(?:"+bc+"(?:"+[Ec,Uo,Go].join("|")+")"+Tc+xc+")*",mm="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",pm="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ic=Tc+xc+hm,gm="(?:"+[um,Uo,Go].join("|")+")"+Ic,vm="(?:"+[Ec+Ri+"?",Ri,Uo,Go,cm].join("|")+")",ym=RegExp(Bo,"g"),Em=RegExp(Ri,"g"),$o=RegExp(Vo+"(?="+Vo+")|"+vm+Ic,"g"),bm=RegExp([rr+"?"+vc+"+"+wc+"(?="+[pc,rr,"$"].join("|")+")",fm+"+"+Mc+"(?="+[pc,rr+Sc,"$"].join("|")+")",rr+"?"+Sc+"+"+wc,rr+"+"+Mc,pm,mm,gc,gm].join("|"),"g"),Sm=RegExp("["+bc+Ci+cc+hc+"]"),wm=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Mm=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],xm=-1,Ne={};Ne[Ao]=Ne[_o]=Ne[Do]=Ne[No]=Ne[Lo]=Ne[Oo]=Ne[ko]=Ne[Fo]=Ne[Po]=!0,Ne[ee]=Ne[Oe]=Ne[Br]=Ne[Xe]=Ne[nr]=Ne[it]=Ne[hn]=Ne[tn]=Ne[Pe]=Ne[Ce]=Ne[Ge]=Ne[Pr]=Ne[kt]=Ne[Hr]=Ne[Wr]=!1;var _e={};_e[ee]=_e[Oe]=_e[Br]=_e[nr]=_e[Xe]=_e[it]=_e[Ao]=_e[_o]=_e[Do]=_e[No]=_e[Lo]=_e[Pe]=_e[Ce]=_e[Ge]=_e[Pr]=_e[kt]=_e[Hr]=_e[Ti]=_e[Oo]=_e[ko]=_e[Fo]=_e[Po]=!0,_e[hn]=_e[tn]=_e[Wr]=!1;var Tm={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"s"},Im={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Cm={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Rm={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Am=parseFloat,_m=parseInt,Cc=typeof global=="object"&&global&&global.Object===Object&&global,Dm=typeof self=="object"&&self&&self.Object===Object&&self,Ye=Cc||Dm||Function("return this")(),qo=typeof Or=="object"&&Or&&!Or.nodeType&&Or,On=qo&&typeof wi=="object"&&wi&&!wi.nodeType&&wi,Rc=On&&On.exports===qo,zo=Rc&&Cc.process,Ct=function(){try{var A=On&&On.require&&On.require("util").types;return A||zo&&zo.binding&&zo.binding("util")}catch{}}(),Ac=Ct&&Ct.isArrayBuffer,_c=Ct&&Ct.isDate,Dc=Ct&&Ct.isMap,Nc=Ct&&Ct.isRegExp,Lc=Ct&&Ct.isSet,Oc=Ct&&Ct.isTypedArray;function yt(A,L,N){switch(N.length){case 0:return A.call(L);case 1:return A.call(L,N[0]);case 2:return A.call(L,N[0],N[1]);case 3:return A.call(L,N[0],N[1],N[2])}return A.apply(L,N)}o(yt,"apply");function Nm(A,L,N,j){for(var ce=-1,xe=A==null?0:A.length;++ce<xe;){var je=A[ce];L(j,je,N(je),A)}return j}o(Nm,"arrayAggregator");function Rt(A,L){for(var N=-1,j=A==null?0:A.length;++N<j&&L(A[N],N,A)!==!1;);return A}o(Rt,"arrayEach");function Lm(A,L){for(var N=A==null?0:A.length;N--&&L(A[N],N,A)!==!1;);return A}o(Lm,"arrayEachRight");function kc(A,L){for(var N=-1,j=A==null?0:A.length;++N<j;)if(!L(A[N],N,A))return!1;return!0}o(kc,"arrayEvery");function mn(A,L){for(var N=-1,j=A==null?0:A.length,ce=0,xe=[];++N<j;){var je=A[N];L(je,N,A)&&(xe[ce++]=je)}return xe}o(mn,"arrayFilter");function Ai(A,L){var N=A==null?0:A.length;return!!N&&ir(A,L,0)>-1}o(Ai,"arrayIncludes");function jo(A,L,N){for(var j=-1,ce=A==null?0:A.length;++j<ce;)if(N(L,A[j]))return!0;return!1}o(jo,"arrayIncludesWith");function Fe(A,L){for(var N=-1,j=A==null?0:A.length,ce=Array(j);++N<j;)ce[N]=L(A[N],N,A);return ce}o(Fe,"arrayMap");function pn(A,L){for(var N=-1,j=L.length,ce=A.length;++N<j;)A[ce+N]=L[N];return A}o(pn,"arrayPush");function Ko(A,L,N,j){var ce=-1,xe=A==null?0:A.length;for(j&&xe&&(N=A[++ce]);++ce<xe;)N=L(N,A[ce],ce,A);return N}o(Ko,"arrayReduce");function Om(A,L,N,j){var ce=A==null?0:A.length;for(j&&ce&&(N=A[--ce]);ce--;)N=L(N,A[ce],ce,A);return N}o(Om,"arrayReduceRight");function Yo(A,L){for(var N=-1,j=A==null?0:A.length;++N<j;)if(L(A[N],N,A))return!0;return!1}o(Yo,"arraySome");var km=Qo("length");function Fm(A){return A.split("")}o(Fm,"asciiToArray");function Pm(A){return A.match(qh)||[]}o(Pm,"asciiWords");function Fc(A,L,N){var j;return N(A,function(ce,xe,je){if(L(ce,xe,je))return j=xe,!1}),j}o(Fc,"baseFindKey");function _i(A,L,N,j){for(var ce=A.length,xe=N+(j?1:-1);j?xe--:++xe<ce;)if(L(A[xe],xe,A))return xe;return-1}o(_i,"baseFindIndex");function ir(A,L,N){return L===L?Ym(A,L,N):_i(A,Pc,N)}o(ir,"baseIndexOf");function Hm(A,L,N,j){for(var ce=N-1,xe=A.length;++ce<xe;)if(j(A[ce],L))return ce;return-1}o(Hm,"baseIndexOfWith");function Pc(A){return A!==A}o(Pc,"baseIsNaN");function Hc(A,L){var N=A==null?0:A.length;return N?Zo(A,L)/N:et}o(Hc,"baseMean");function Qo(A){return function(L){return L==null?n:L[A]}}o(Qo,"baseProperty");function Xo(A){return function(L){return A==null?n:A[L]}}o(Xo,"basePropertyOf");function Wc(A,L,N,j,ce){return ce(A,function(xe,je,Ae){N=j?(j=!1,xe):L(N,xe,je,Ae)}),N}o(Wc,"baseReduce");function Wm(A,L){var N=A.length;for(A.sort(L);N--;)A[N]=A[N].value;return A}o(Wm,"baseSortBy");function Zo(A,L){for(var N,j=-1,ce=A.length;++j<ce;){var xe=L(A[j]);xe!==n&&(N=N===n?xe:N+xe)}return N}o(Zo,"baseSum");function Jo(A,L){for(var N=-1,j=Array(A);++N<A;)j[N]=L(N);return j}o(Jo,"baseTimes");function Bm(A,L){return Fe(L,function(N){return[N,A[N]]})}o(Bm,"baseToPairs");function Bc(A){return A&&A.slice(0,$c(A)+1).replace(Wo,"")}o(Bc,"baseTrim");function Et(A){return function(L){return A(L)}}o(Et,"baseUnary");function ea(A,L){return Fe(L,function(N){return A[N]})}o(ea,"baseValues");function Vr(A,L){return A.has(L)}o(Vr,"cacheHas");function Vc(A,L){for(var N=-1,j=A.length;++N<j&&ir(L,A[N],0)>-1;);return N}o(Vc,"charsStartIndex");function Uc(A,L){for(var N=A.length;N--&&ir(L,A[N],0)>-1;);return N}o(Uc,"charsEndIndex");function Vm(A,L){for(var N=A.length,j=0;N--;)A[N]===L&&++j;return j}o(Vm,"countHolders");var Um=Xo(Tm),Gm=Xo(Im);function $m(A){return"\\"+Rm[A]}o($m,"escapeStringChar");function qm(A,L){return A==null?n:A[L]}o(qm,"getValue");function sr(A){return Sm.test(A)}o(sr,"hasUnicode");function zm(A){return wm.test(A)}o(zm,"hasUnicodeWord");function jm(A){for(var L,N=[];!(L=A.next()).done;)N.push(L.value);return N}o(jm,"iteratorToArray");function ta(A){var L=-1,N=Array(A.size);return A.forEach(function(j,ce){N[++L]=[ce,j]}),N}o(ta,"mapToArray");function Gc(A,L){return function(N){return A(L(N))}}o(Gc,"overArg");function gn(A,L){for(var N=-1,j=A.length,ce=0,xe=[];++N<j;){var je=A[N];(je===L||je===f)&&(A[N]=f,xe[ce++]=N)}return xe}o(gn,"replaceHolders");function Di(A){var L=-1,N=Array(A.size);return A.forEach(function(j){N[++L]=j}),N}o(Di,"setToArray");function Km(A){var L=-1,N=Array(A.size);return A.forEach(function(j){N[++L]=[j,j]}),N}o(Km,"setToPairs");function Ym(A,L,N){for(var j=N-1,ce=A.length;++j<ce;)if(A[j]===L)return j;return-1}o(Ym,"strictIndexOf");function Qm(A,L,N){for(var j=N+1;j--;)if(A[j]===L)return j;return j}o(Qm,"strictLastIndexOf");function or(A){return sr(A)?Zm(A):km(A)}o(or,"stringSize");function Ft(A){return sr(A)?Jm(A):Fm(A)}o(Ft,"stringToArray");function $c(A){for(var L=A.length;L--&&Vh.test(A.charAt(L)););return L}o($c,"trimmedEndIndex");var Xm=Xo(Cm);function Zm(A){for(var L=$o.lastIndex=0;$o.test(A);)++L;return L}o(Zm,"unicodeSize");function Jm(A){return A.match($o)||[]}o(Jm,"unicodeToArray");function ep(A){return A.match(bm)||[]}o(ep,"unicodeWords");var tp=o(function A(L){L=L==null?Ye:vn.defaults(Ye.Object(),L,vn.pick(Ye,Mm));var N=L.Array,j=L.Date,ce=L.Error,xe=L.Function,je=L.Math,Ae=L.Object,na=L.RegExp,np=L.String,At=L.TypeError,Ni=N.prototype,rp=xe.prototype,ar=Ae.prototype,Li=L["__core-js_shared__"],Oi=rp.toString,Re=ar.hasOwnProperty,ip=0,qc=function(){var r=/[^.]+$/.exec(Li&&Li.keys&&Li.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}(),ki=ar.toString,sp=Oi.call(Ae),op=Ye._,ap=na("^"+Oi.call(Re).replace(Ho,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Fi=Rc?L.Buffer:n,yn=L.Symbol,Pi=L.Uint8Array,zc=Fi?Fi.allocUnsafe:n,Hi=Gc(Ae.getPrototypeOf,Ae),jc=Ae.create,Kc=ar.propertyIsEnumerable,Wi=Ni.splice,Yc=yn?yn.isConcatSpreadable:n,Ur=yn?yn.iterator:n,kn=yn?yn.toStringTag:n,Bi=function(){try{var r=Bn(Ae,"defineProperty");return r({},"",{}),r}catch{}}(),lp=L.clearTimeout!==Ye.clearTimeout&&L.clearTimeout,cp=j&&j.now!==Ye.Date.now&&j.now,up=L.setTimeout!==Ye.setTimeout&&L.setTimeout,Vi=je.ceil,Ui=je.floor,ra=Ae.getOwnPropertySymbols,dp=Fi?Fi.isBuffer:n,Qc=L.isFinite,fp=Ni.join,hp=Gc(Ae.keys,Ae),Ke=je.max,tt=je.min,mp=j.now,pp=L.parseInt,Xc=je.random,gp=Ni.reverse,ia=Bn(L,"DataView"),Gr=Bn(L,"Map"),sa=Bn(L,"Promise"),lr=Bn(L,"Set"),$r=Bn(L,"WeakMap"),qr=Bn(Ae,"create"),Gi=$r&&new $r,cr={},vp=Vn(ia),yp=Vn(Gr),Ep=Vn(sa),bp=Vn(lr),Sp=Vn($r),$i=yn?yn.prototype:n,zr=$i?$i.valueOf:n,Zc=$i?$i.toString:n;function E(r){if(We(r)&&!ue(r)&&!(r instanceof ye)){if(r instanceof _t)return r;if(Re.call(r,"__wrapped__"))return Ju(r)}return new _t(r)}o(E,"lodash");var ur=function(){function r(){}return o(r,"object"),function(s){if(!He(s))return{};if(jc)return jc(s);r.prototype=s;var c=new r;return r.prototype=n,c}}();function qi(){}o(qi,"baseLodash");function _t(r,s){this.__wrapped__=r,this.__actions__=[],this.__chain__=!!s,this.__index__=0,this.__values__=n}o(_t,"LodashWrapper"),E.templateSettings={escape:kh,evaluate:Fh,interpolate:ac,variable:"",imports:{_:E}},E.prototype=qi.prototype,E.prototype.constructor=E,_t.prototype=ur(qi.prototype),_t.prototype.constructor=_t;function ye(r){this.__wrapped__=r,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ue,this.__views__=[]}o(ye,"LazyWrapper");function wp(){var r=new ye(this.__wrapped__);return r.__actions__=dt(this.__actions__),r.__dir__=this.__dir__,r.__filtered__=this.__filtered__,r.__iteratees__=dt(this.__iteratees__),r.__takeCount__=this.__takeCount__,r.__views__=dt(this.__views__),r}o(wp,"lazyClone");function Mp(){if(this.__filtered__){var r=new ye(this);r.__dir__=-1,r.__filtered__=!0}else r=this.clone(),r.__dir__*=-1;return r}o(Mp,"lazyReverse");function xp(){var r=this.__wrapped__.value(),s=this.__dir__,c=ue(r),m=s<0,g=c?r.length:0,S=Fg(0,g,this.__views__),x=S.start,I=S.end,D=I-x,O=m?I:x-1,k=this.__iteratees__,H=k.length,q=0,Z=tt(D,this.__takeCount__);if(!c||!m&&g==D&&Z==D)return wu(r,this.__actions__);var re=[];e:for(;D--&&q<Z;){O+=s;for(var fe=-1,ie=r[O];++fe<H;){var ge=k[fe],Se=ge.iteratee,wt=ge.type,at=Se(ie);if(wt==K)ie=at;else if(!at){if(wt==W)continue e;break e}}re[q++]=ie}return re}o(xp,"lazyValue"),ye.prototype=ur(qi.prototype),ye.prototype.constructor=ye;function Fn(r){var s=-1,c=r==null?0:r.length;for(this.clear();++s<c;){var m=r[s];this.set(m[0],m[1])}}o(Fn,"Hash");function Tp(){this.__data__=qr?qr(null):{},this.size=0}o(Tp,"hashClear");function Ip(r){var s=this.has(r)&&delete this.__data__[r];return this.size-=s?1:0,s}o(Ip,"hashDelete");function Cp(r){var s=this.__data__;if(qr){var c=s[r];return c===u?n:c}return Re.call(s,r)?s[r]:n}o(Cp,"hashGet");function Rp(r){var s=this.__data__;return qr?s[r]!==n:Re.call(s,r)}o(Rp,"hashHas");function Ap(r,s){var c=this.__data__;return this.size+=this.has(r)?0:1,c[r]=qr&&s===n?u:s,this}o(Ap,"hashSet"),Fn.prototype.clear=Tp,Fn.prototype.delete=Ip,Fn.prototype.get=Cp,Fn.prototype.has=Rp,Fn.prototype.set=Ap;function nn(r){var s=-1,c=r==null?0:r.length;for(this.clear();++s<c;){var m=r[s];this.set(m[0],m[1])}}o(nn,"ListCache");function _p(){this.__data__=[],this.size=0}o(_p,"listCacheClear");function Dp(r){var s=this.__data__,c=zi(s,r);if(c<0)return!1;var m=s.length-1;return c==m?s.pop():Wi.call(s,c,1),--this.size,!0}o(Dp,"listCacheDelete");function Np(r){var s=this.__data__,c=zi(s,r);return c<0?n:s[c][1]}o(Np,"listCacheGet");function Lp(r){return zi(this.__data__,r)>-1}o(Lp,"listCacheHas");function Op(r,s){var c=this.__data__,m=zi(c,r);return m<0?(++this.size,c.push([r,s])):c[m][1]=s,this}o(Op,"listCacheSet"),nn.prototype.clear=_p,nn.prototype.delete=Dp,nn.prototype.get=Np,nn.prototype.has=Lp,nn.prototype.set=Op;function rn(r){var s=-1,c=r==null?0:r.length;for(this.clear();++s<c;){var m=r[s];this.set(m[0],m[1])}}o(rn,"MapCache");function kp(){this.size=0,this.__data__={hash:new Fn,map:new(Gr||nn),string:new Fn}}o(kp,"mapCacheClear");function Fp(r){var s=is(this,r).delete(r);return this.size-=s?1:0,s}o(Fp,"mapCacheDelete");function Pp(r){return is(this,r).get(r)}o(Pp,"mapCacheGet");function Hp(r){return is(this,r).has(r)}o(Hp,"mapCacheHas");function Wp(r,s){var c=is(this,r),m=c.size;return c.set(r,s),this.size+=c.size==m?0:1,this}o(Wp,"mapCacheSet"),rn.prototype.clear=kp,rn.prototype.delete=Fp,rn.prototype.get=Pp,rn.prototype.has=Hp,rn.prototype.set=Wp;function Pn(r){var s=-1,c=r==null?0:r.length;for(this.__data__=new rn;++s<c;)this.add(r[s])}o(Pn,"SetCache");function Bp(r){return this.__data__.set(r,u),this}o(Bp,"setCacheAdd");function Vp(r){return this.__data__.has(r)}o(Vp,"setCacheHas"),Pn.prototype.add=Pn.prototype.push=Bp,Pn.prototype.has=Vp;function Pt(r){var s=this.__data__=new nn(r);this.size=s.size}o(Pt,"Stack");function Up(){this.__data__=new nn,this.size=0}o(Up,"stackClear");function Gp(r){var s=this.__data__,c=s.delete(r);return this.size=s.size,c}o(Gp,"stackDelete");function $p(r){return this.__data__.get(r)}o($p,"stackGet");function qp(r){return this.__data__.has(r)}o(qp,"stackHas");function zp(r,s){var c=this.__data__;if(c instanceof nn){var m=c.__data__;if(!Gr||m.length<t-1)return m.push([r,s]),this.size=++c.size,this;c=this.__data__=new rn(m)}return c.set(r,s),this.size=c.size,this}o(zp,"stackSet"),Pt.prototype.clear=Up,Pt.prototype.delete=Gp,Pt.prototype.get=$p,Pt.prototype.has=qp,Pt.prototype.set=zp;function Jc(r,s){var c=ue(r),m=!c&&Un(r),g=!c&&!m&&Mn(r),S=!c&&!m&&!g&&mr(r),x=c||m||g||S,I=x?Jo(r.length,np):[],D=I.length;for(var O in r)(s||Re.call(r,O))&&!(x&&(O=="length"||g&&(O=="offset"||O=="parent")||S&&(O=="buffer"||O=="byteLength"||O=="byteOffset")||ln(O,D)))&&I.push(O);return I}o(Jc,"arrayLikeKeys");function eu(r){var s=r.length;return s?r[ga(0,s-1)]:n}o(eu,"arraySample");function jp(r,s){return ss(dt(r),Hn(s,0,r.length))}o(jp,"arraySampleSize");function Kp(r){return ss(dt(r))}o(Kp,"arrayShuffle");function oa(r,s,c){(c!==n&&!Ht(r[s],c)||c===n&&!(s in r))&&sn(r,s,c)}o(oa,"assignMergeValue");function jr(r,s,c){var m=r[s];(!(Re.call(r,s)&&Ht(m,c))||c===n&&!(s in r))&&sn(r,s,c)}o(jr,"assignValue");function zi(r,s){for(var c=r.length;c--;)if(Ht(r[c][0],s))return c;return-1}o(zi,"assocIndexOf");function Yp(r,s,c,m){return En(r,function(g,S,x){s(m,g,c(g),x)}),m}o(Yp,"baseAggregator");function tu(r,s){return r&&zt(s,Qe(s),r)}o(tu,"baseAssign");function Qp(r,s){return r&&zt(s,ht(s),r)}o(Qp,"baseAssignIn");function sn(r,s,c){s=="__proto__"&&Bi?Bi(r,s,{configurable:!0,enumerable:!0,value:c,writable:!0}):r[s]=c}o(sn,"baseAssignValue");function aa(r,s){for(var c=-1,m=s.length,g=N(m),S=r==null;++c<m;)g[c]=S?n:Va(r,s[c]);return g}o(aa,"baseAt");function Hn(r,s,c){return r===r&&(c!==n&&(r=r<=c?r:c),s!==n&&(r=r>=s?r:s)),r}o(Hn,"baseClamp");function Dt(r,s,c,m,g,S){var x,I=s&h,D=s&p,O=s&v;if(c&&(x=g?c(r,m,g,S):c(r)),x!==n)return x;if(!He(r))return r;var k=ue(r);if(k){if(x=Hg(r),!I)return dt(r,x)}else{var H=nt(r),q=H==tn||H==Me;if(Mn(r))return Tu(r,I);if(H==Ge||H==ee||q&&!g){if(x=D||q?{}:$u(r),!I)return D?Cg(r,Qp(x,r)):Ig(r,tu(x,r))}else{if(!_e[H])return g?r:{};x=Wg(r,H,I)}}S||(S=new Pt);var Z=S.get(r);if(Z)return Z;S.set(r,x),Ed(r)?r.forEach(function(ie){x.add(Dt(ie,s,c,ie,r,S))}):vd(r)&&r.forEach(function(ie,ge){x.set(ge,Dt(ie,s,c,ge,r,S))});var re=O?D?Ca:Ia:D?ht:Qe,fe=k?n:re(r);return Rt(fe||r,function(ie,ge){fe&&(ge=ie,ie=r[ge]),jr(x,ge,Dt(ie,s,c,ge,r,S))}),x}o(Dt,"baseClone");function Xp(r){var s=Qe(r);return function(c){return nu(c,r,s)}}o(Xp,"baseConforms");function nu(r,s,c){var m=c.length;if(r==null)return!m;for(r=Ae(r);m--;){var g=c[m],S=s[g],x=r[g];if(x===n&&!(g in r)||!S(x))return!1}return!0}o(nu,"baseConformsTo");function ru(r,s,c){if(typeof r!="function")throw new At(a);return ei(function(){r.apply(n,c)},s)}o(ru,"baseDelay");function Kr(r,s,c,m){var g=-1,S=Ai,x=!0,I=r.length,D=[],O=s.length;if(!I)return D;c&&(s=Fe(s,Et(c))),m?(S=jo,x=!1):s.length>=t&&(S=Vr,x=!1,s=new Pn(s));e:for(;++g<I;){var k=r[g],H=c==null?k:c(k);if(k=m||k!==0?k:0,x&&H===H){for(var q=O;q--;)if(s[q]===H)continue e;D.push(k)}else S(s,H,m)||D.push(k)}return D}o(Kr,"baseDifference");var En=_u(qt),iu=_u(ca,!0);function Zp(r,s){var c=!0;return En(r,function(m,g,S){return c=!!s(m,g,S),c}),c}o(Zp,"baseEvery");function ji(r,s,c){for(var m=-1,g=r.length;++m<g;){var S=r[m],x=s(S);if(x!=null&&(I===n?x===x&&!St(x):c(x,I)))var I=x,D=S}return D}o(ji,"baseExtremum");function Jp(r,s,c,m){var g=r.length;for(c=de(c),c<0&&(c=-c>g?0:g+c),m=m===n||m>g?g:de(m),m<0&&(m+=g),m=c>m?0:Sd(m);c<m;)r[c++]=s;return r}o(Jp,"baseFill");function su(r,s){var c=[];return En(r,function(m,g,S){s(m,g,S)&&c.push(m)}),c}o(su,"baseFilter");function Ze(r,s,c,m,g){var S=-1,x=r.length;for(c||(c=Vg),g||(g=[]);++S<x;){var I=r[S];s>0&&c(I)?s>1?Ze(I,s-1,c,m,g):pn(g,I):m||(g[g.length]=I)}return g}o(Ze,"baseFlatten");var la=Du(),ou=Du(!0);function qt(r,s){return r&&la(r,s,Qe)}o(qt,"baseForOwn");function ca(r,s){return r&&ou(r,s,Qe)}o(ca,"baseForOwnRight");function Ki(r,s){return mn(s,function(c){return cn(r[c])})}o(Ki,"baseFunctions");function Wn(r,s){s=Sn(s,r);for(var c=0,m=s.length;r!=null&&c<m;)r=r[jt(s[c++])];return c&&c==m?r:n}o(Wn,"baseGet");function au(r,s,c){var m=s(r);return ue(r)?m:pn(m,c(r))}o(au,"baseGetAllKeys");function st(r){return r==null?r===n?Rh:ke:kn&&kn in Ae(r)?kg(r):Kg(r)}o(st,"baseGetTag");function ua(r,s){return r>s}o(ua,"baseGt");function eg(r,s){return r!=null&&Re.call(r,s)}o(eg,"baseHas");function tg(r,s){return r!=null&&s in Ae(r)}o(tg,"baseHasIn");function ng(r,s,c){return r>=tt(s,c)&&r<Ke(s,c)}o(ng,"baseInRange");function da(r,s,c){for(var m=c?jo:Ai,g=r[0].length,S=r.length,x=S,I=N(S),D=1/0,O=[];x--;){var k=r[x];x&&s&&(k=Fe(k,Et(s))),D=tt(k.length,D),I[x]=!c&&(s||g>=120&&k.length>=120)?new Pn(x&&k):n}k=r[0];var H=-1,q=I[0];e:for(;++H<g&&O.length<D;){var Z=k[H],re=s?s(Z):Z;if(Z=c||Z!==0?Z:0,!(q?Vr(q,re):m(O,re,c))){for(x=S;--x;){var fe=I[x];if(!(fe?Vr(fe,re):m(r[x],re,c)))continue e}q&&q.push(re),O.push(Z)}}return O}o(da,"baseIntersection");function rg(r,s,c,m){return qt(r,function(g,S,x){s(m,c(g),S,x)}),m}o(rg,"baseInverter");function Yr(r,s,c){s=Sn(s,r),r=Ku(r,s);var m=r==null?r:r[jt(Lt(s))];return m==null?n:yt(m,r,c)}o(Yr,"baseInvoke");function lu(r){return We(r)&&st(r)==ee}o(lu,"baseIsArguments");function ig(r){return We(r)&&st(r)==Br}o(ig,"baseIsArrayBuffer");function sg(r){return We(r)&&st(r)==it}o(sg,"baseIsDate");function Qr(r,s,c,m,g){return r===s?!0:r==null||s==null||!We(r)&&!We(s)?r!==r&&s!==s:og(r,s,c,m,Qr,g)}o(Qr,"baseIsEqual");function og(r,s,c,m,g,S){var x=ue(r),I=ue(s),D=x?Oe:nt(r),O=I?Oe:nt(s);D=D==ee?Ge:D,O=O==ee?Ge:O;var k=D==Ge,H=O==Ge,q=D==O;if(q&&Mn(r)){if(!Mn(s))return!1;x=!0,k=!1}if(q&&!k)return S||(S=new Pt),x||mr(r)?Vu(r,s,c,m,g,S):Lg(r,s,D,c,m,g,S);if(!(c&y)){var Z=k&&Re.call(r,"__wrapped__"),re=H&&Re.call(s,"__wrapped__");if(Z||re){var fe=Z?r.value():r,ie=re?s.value():s;return S||(S=new Pt),g(fe,ie,c,m,S)}}return q?(S||(S=new Pt),Og(r,s,c,m,g,S)):!1}o(og,"baseIsEqualDeep");function ag(r){return We(r)&&nt(r)==Pe}o(ag,"baseIsMap");function fa(r,s,c,m){var g=c.length,S=g,x=!m;if(r==null)return!S;for(r=Ae(r);g--;){var I=c[g];if(x&&I[2]?I[1]!==r[I[0]]:!(I[0]in r))return!1}for(;++g<S;){I=c[g];var D=I[0],O=r[D],k=I[1];if(x&&I[2]){if(O===n&&!(D in r))return!1}else{var H=new Pt;if(m)var q=m(O,k,D,r,s,H);if(!(q===n?Qr(k,O,y|w,m,H):q))return!1}}return!0}o(fa,"baseIsMatch");function cu(r){if(!He(r)||Gg(r))return!1;var s=cn(r)?ap:Xh;return s.test(Vn(r))}o(cu,"baseIsNative");function lg(r){return We(r)&&st(r)==Pr}o(lg,"baseIsRegExp");function cg(r){return We(r)&&nt(r)==kt}o(cg,"baseIsSet");function ug(r){return We(r)&&ds(r.length)&&!!Ne[st(r)]}o(ug,"baseIsTypedArray");function uu(r){return typeof r=="function"?r:r==null?mt:typeof r=="object"?ue(r)?hu(r[0],r[1]):fu(r):Nd(r)}o(uu,"baseIteratee");function ha(r){if(!Jr(r))return hp(r);var s=[];for(var c in Ae(r))Re.call(r,c)&&c!="constructor"&&s.push(c);return s}o(ha,"baseKeys");function dg(r){if(!He(r))return jg(r);var s=Jr(r),c=[];for(var m in r)m=="constructor"&&(s||!Re.call(r,m))||c.push(m);return c}o(dg,"baseKeysIn");function ma(r,s){return r<s}o(ma,"baseLt");function du(r,s){var c=-1,m=ft(r)?N(r.length):[];return En(r,function(g,S,x){m[++c]=s(g,S,x)}),m}o(du,"baseMap");function fu(r){var s=Aa(r);return s.length==1&&s[0][2]?zu(s[0][0],s[0][1]):function(c){return c===r||fa(c,r,s)}}o(fu,"baseMatches");function hu(r,s){return Da(r)&&qu(s)?zu(jt(r),s):function(c){var m=Va(c,r);return m===n&&m===s?Ua(c,r):Qr(s,m,y|w)}}o(hu,"baseMatchesProperty");function Yi(r,s,c,m,g){r!==s&&la(s,function(S,x){if(g||(g=new Pt),He(S))fg(r,s,x,c,Yi,m,g);else{var I=m?m(La(r,x),S,x+"",r,s,g):n;I===n&&(I=S),oa(r,x,I)}},ht)}o(Yi,"baseMerge");function fg(r,s,c,m,g,S,x){var I=La(r,c),D=La(s,c),O=x.get(D);if(O){oa(r,c,O);return}var k=S?S(I,D,c+"",r,s,x):n,H=k===n;if(H){var q=ue(D),Z=!q&&Mn(D),re=!q&&!Z&&mr(D);k=D,q||Z||re?ue(I)?k=I:$e(I)?k=dt(I):Z?(H=!1,k=Tu(D,!0)):re?(H=!1,k=Iu(D,!0)):k=[]:ti(D)||Un(D)?(k=I,Un(I)?k=wd(I):(!He(I)||cn(I))&&(k=$u(D))):H=!1}H&&(x.set(D,k),g(k,D,m,S,x),x.delete(D)),oa(r,c,k)}o(fg,"baseMergeDeep");function mu(r,s){var c=r.length;if(c)return s+=s<0?c:0,ln(s,c)?r[s]:n}o(mu,"baseNth");function pu(r,s,c){s.length?s=Fe(s,function(S){return ue(S)?function(x){return Wn(x,S.length===1?S[0]:S)}:S}):s=[mt];var m=-1;s=Fe(s,Et(ne()));var g=du(r,function(S,x,I){var D=Fe(s,function(O){return O(S)});return{criteria:D,index:++m,value:S}});return Wm(g,function(S,x){return Tg(S,x,c)})}o(pu,"baseOrderBy");function hg(r,s){return gu(r,s,function(c,m){return Ua(r,m)})}o(hg,"basePick");function gu(r,s,c){for(var m=-1,g=s.length,S={};++m<g;){var x=s[m],I=Wn(r,x);c(I,x)&&Xr(S,Sn(x,r),I)}return S}o(gu,"basePickBy");function mg(r){return function(s){return Wn(s,r)}}o(mg,"basePropertyDeep");function pa(r,s,c,m){var g=m?Hm:ir,S=-1,x=s.length,I=r;for(r===s&&(s=dt(s)),c&&(I=Fe(r,Et(c)));++S<x;)for(var D=0,O=s[S],k=c?c(O):O;(D=g(I,k,D,m))>-1;)I!==r&&Wi.call(I,D,1),Wi.call(r,D,1);return r}o(pa,"basePullAll");function vu(r,s){for(var c=r?s.length:0,m=c-1;c--;){var g=s[c];if(c==m||g!==S){var S=g;ln(g)?Wi.call(r,g,1):Ea(r,g)}}return r}o(vu,"basePullAt");function ga(r,s){return r+Ui(Xc()*(s-r+1))}o(ga,"baseRandom");function pg(r,s,c,m){for(var g=-1,S=Ke(Vi((s-r)/(c||1)),0),x=N(S);S--;)x[m?S:++g]=r,r+=c;return x}o(pg,"baseRange");function va(r,s){var c="";if(!r||s<1||s>J)return c;do s%2&&(c+=r),s=Ui(s/2),s&&(r+=r);while(s);return c}o(va,"baseRepeat");function me(r,s){return Oa(ju(r,s,mt),r+"")}o(me,"baseRest");function gg(r){return eu(pr(r))}o(gg,"baseSample");function vg(r,s){var c=pr(r);return ss(c,Hn(s,0,c.length))}o(vg,"baseSampleSize");function Xr(r,s,c,m){if(!He(r))return r;s=Sn(s,r);for(var g=-1,S=s.length,x=S-1,I=r;I!=null&&++g<S;){var D=jt(s[g]),O=c;if(D==="__proto__"||D==="constructor"||D==="prototype")return r;if(g!=x){var k=I[D];O=m?m(k,D,I):n,O===n&&(O=He(k)?k:ln(s[g+1])?[]:{})}jr(I,D,O),I=I[D]}return r}o(Xr,"baseSet");var yu=Gi?function(r,s){return Gi.set(r,s),r}:mt,yg=Bi?function(r,s){return Bi(r,"toString",{configurable:!0,enumerable:!1,value:$a(s),writable:!0})}:mt;function Eg(r){return ss(pr(r))}o(Eg,"baseShuffle");function Nt(r,s,c){var m=-1,g=r.length;s<0&&(s=-s>g?0:g+s),c=c>g?g:c,c<0&&(c+=g),g=s>c?0:c-s>>>0,s>>>=0;for(var S=N(g);++m<g;)S[m]=r[m+s];return S}o(Nt,"baseSlice");function bg(r,s){var c;return En(r,function(m,g,S){return c=s(m,g,S),!c}),!!c}o(bg,"baseSome");function Qi(r,s,c){var m=0,g=r==null?m:r.length;if(typeof s=="number"&&s===s&&g<=P){for(;m<g;){var S=m+g>>>1,x=r[S];x!==null&&!St(x)&&(c?x<=s:x<s)?m=S+1:g=S}return g}return ya(r,s,mt,c)}o(Qi,"baseSortedIndex");function ya(r,s,c,m){var g=0,S=r==null?0:r.length;if(S===0)return 0;s=c(s);for(var x=s!==s,I=s===null,D=St(s),O=s===n;g<S;){var k=Ui((g+S)/2),H=c(r[k]),q=H!==n,Z=H===null,re=H===H,fe=St(H);if(x)var ie=m||re;else O?ie=re&&(m||q):I?ie=re&&q&&(m||!Z):D?ie=re&&q&&!Z&&(m||!fe):Z||fe?ie=!1:ie=m?H<=s:H<s;ie?g=k+1:S=k}return tt(S,B)}o(ya,"baseSortedIndexBy");function Eu(r,s){for(var c=-1,m=r.length,g=0,S=[];++c<m;){var x=r[c],I=s?s(x):x;if(!c||!Ht(I,D)){var D=I;S[g++]=x===0?0:x}}return S}o(Eu,"baseSortedUniq");function bu(r){return typeof r=="number"?r:St(r)?et:+r}o(bu,"baseToNumber");function bt(r){if(typeof r=="string")return r;if(ue(r))return Fe(r,bt)+"";if(St(r))return Zc?Zc.call(r):"";var s=r+"";return s=="0"&&1/r==-z?"-0":s}o(bt,"baseToString");function bn(r,s,c){var m=-1,g=Ai,S=r.length,x=!0,I=[],D=I;if(c)x=!1,g=jo;else if(S>=t){var O=s?null:Dg(r);if(O)return Di(O);x=!1,g=Vr,D=new Pn}else D=s?[]:I;e:for(;++m<S;){var k=r[m],H=s?s(k):k;if(k=c||k!==0?k:0,x&&H===H){for(var q=D.length;q--;)if(D[q]===H)continue e;s&&D.push(H),I.push(k)}else g(D,H,c)||(D!==I&&D.push(H),I.push(k))}return I}o(bn,"baseUniq");function Ea(r,s){return s=Sn(s,r),r=Ku(r,s),r==null||delete r[jt(Lt(s))]}o(Ea,"baseUnset");function Su(r,s,c,m){return Xr(r,s,c(Wn(r,s)),m)}o(Su,"baseUpdate");function Xi(r,s,c,m){for(var g=r.length,S=m?g:-1;(m?S--:++S<g)&&s(r[S],S,r););return c?Nt(r,m?0:S,m?S+1:g):Nt(r,m?S+1:0,m?g:S)}o(Xi,"baseWhile");function wu(r,s){var c=r;return c instanceof ye&&(c=c.value()),Ko(s,function(m,g){return g.func.apply(g.thisArg,pn([m],g.args))},c)}o(wu,"baseWrapperValue");function ba(r,s,c){var m=r.length;if(m<2)return m?bn(r[0]):[];for(var g=-1,S=N(m);++g<m;)for(var x=r[g],I=-1;++I<m;)I!=g&&(S[g]=Kr(S[g]||x,r[I],s,c));return bn(Ze(S,1),s,c)}o(ba,"baseXor");function Mu(r,s,c){for(var m=-1,g=r.length,S=s.length,x={};++m<g;){var I=m<S?s[m]:n;c(x,r[m],I)}return x}o(Mu,"baseZipObject");function Sa(r){return $e(r)?r:[]}o(Sa,"castArrayLikeObject");function wa(r){return typeof r=="function"?r:mt}o(wa,"castFunction");function Sn(r,s){return ue(r)?r:Da(r,s)?[r]:Zu(Ie(r))}o(Sn,"castPath");var Sg=me;function wn(r,s,c){var m=r.length;return c=c===n?m:c,!s&&c>=m?r:Nt(r,s,c)}o(wn,"castSlice");var xu=lp||function(r){return Ye.clearTimeout(r)};function Tu(r,s){if(s)return r.slice();var c=r.length,m=zc?zc(c):new r.constructor(c);return r.copy(m),m}o(Tu,"cloneBuffer");function Ma(r){var s=new r.constructor(r.byteLength);return new Pi(s).set(new Pi(r)),s}o(Ma,"cloneArrayBuffer");function wg(r,s){var c=s?Ma(r.buffer):r.buffer;return new r.constructor(c,r.byteOffset,r.byteLength)}o(wg,"cloneDataView");function Mg(r){var s=new r.constructor(r.source,lc.exec(r));return s.lastIndex=r.lastIndex,s}o(Mg,"cloneRegExp");function xg(r){return zr?Ae(zr.call(r)):{}}o(xg,"cloneSymbol");function Iu(r,s){var c=s?Ma(r.buffer):r.buffer;return new r.constructor(c,r.byteOffset,r.length)}o(Iu,"cloneTypedArray");function Cu(r,s){if(r!==s){var c=r!==n,m=r===null,g=r===r,S=St(r),x=s!==n,I=s===null,D=s===s,O=St(s);if(!I&&!O&&!S&&r>s||S&&x&&D&&!I&&!O||m&&x&&D||!c&&D||!g)return 1;if(!m&&!S&&!O&&r<s||O&&c&&g&&!m&&!S||I&&c&&g||!x&&g||!D)return-1}return 0}o(Cu,"compareAscending");function Tg(r,s,c){for(var m=-1,g=r.criteria,S=s.criteria,x=g.length,I=c.length;++m<x;){var D=Cu(g[m],S[m]);if(D){if(m>=I)return D;var O=c[m];return D*(O=="desc"?-1:1)}}return r.index-s.index}o(Tg,"compareMultiple");function Ru(r,s,c,m){for(var g=-1,S=r.length,x=c.length,I=-1,D=s.length,O=Ke(S-x,0),k=N(D+O),H=!m;++I<D;)k[I]=s[I];for(;++g<x;)(H||g<S)&&(k[c[g]]=r[g]);for(;O--;)k[I++]=r[g++];return k}o(Ru,"composeArgs");function Au(r,s,c,m){for(var g=-1,S=r.length,x=-1,I=c.length,D=-1,O=s.length,k=Ke(S-I,0),H=N(k+O),q=!m;++g<k;)H[g]=r[g];for(var Z=g;++D<O;)H[Z+D]=s[D];for(;++x<I;)(q||g<S)&&(H[Z+c[x]]=r[g++]);return H}o(Au,"composeArgsRight");function dt(r,s){var c=-1,m=r.length;for(s||(s=N(m));++c<m;)s[c]=r[c];return s}o(dt,"copyArray");function zt(r,s,c,m){var g=!c;c||(c={});for(var S=-1,x=s.length;++S<x;){var I=s[S],D=m?m(c[I],r[I],I,c,r):n;D===n&&(D=r[I]),g?sn(c,I,D):jr(c,I,D)}return c}o(zt,"copyObject");function Ig(r,s){return zt(r,_a(r),s)}o(Ig,"copySymbols");function Cg(r,s){return zt(r,Uu(r),s)}o(Cg,"copySymbolsIn");function Zi(r,s){return function(c,m){var g=ue(c)?Nm:Yp,S=s?s():{};return g(c,r,ne(m,2),S)}}o(Zi,"createAggregator");function dr(r){return me(function(s,c){var m=-1,g=c.length,S=g>1?c[g-1]:n,x=g>2?c[2]:n;for(S=r.length>3&&typeof S=="function"?(g--,S):n,x&&ot(c[0],c[1],x)&&(S=g<3?n:S,g=1),s=Ae(s);++m<g;){var I=c[m];I&&r(s,I,m,S)}return s})}o(dr,"createAssigner");function _u(r,s){return function(c,m){if(c==null)return c;if(!ft(c))return r(c,m);for(var g=c.length,S=s?g:-1,x=Ae(c);(s?S--:++S<g)&&m(x[S],S,x)!==!1;);return c}}o(_u,"createBaseEach");function Du(r){return function(s,c,m){for(var g=-1,S=Ae(s),x=m(s),I=x.length;I--;){var D=x[r?I:++g];if(c(S[D],D,S)===!1)break}return s}}o(Du,"createBaseFor");function Rg(r,s,c){var m=s&M,g=Zr(r);function S(){var x=this&&this!==Ye&&this instanceof S?g:r;return x.apply(m?c:this,arguments)}return o(S,"wrapper"),S}o(Rg,"createBind");function Nu(r){return function(s){s=Ie(s);var c=sr(s)?Ft(s):n,m=c?c[0]:s.charAt(0),g=c?wn(c,1).join(""):s.slice(1);return m[r]()+g}}o(Nu,"createCaseFirst");function fr(r){return function(s){return Ko(_d(Ad(s).replace(ym,"")),r,"")}}o(fr,"createCompounder");function Zr(r){return function(){var s=arguments;switch(s.length){case 0:return new r;case 1:return new r(s[0]);case 2:return new r(s[0],s[1]);case 3:return new r(s[0],s[1],s[2]);case 4:return new r(s[0],s[1],s[2],s[3]);case 5:return new r(s[0],s[1],s[2],s[3],s[4]);case 6:return new r(s[0],s[1],s[2],s[3],s[4],s[5]);case 7:return new r(s[0],s[1],s[2],s[3],s[4],s[5],s[6])}var c=ur(r.prototype),m=r.apply(c,s);return He(m)?m:c}}o(Zr,"createCtor");function Ag(r,s,c){var m=Zr(r);function g(){for(var S=arguments.length,x=N(S),I=S,D=hr(g);I--;)x[I]=arguments[I];var O=S<3&&x[0]!==D&&x[S-1]!==D?[]:gn(x,D);if(S-=O.length,S<c)return Pu(r,s,Ji,g.placeholder,n,x,O,n,n,c-S);var k=this&&this!==Ye&&this instanceof g?m:r;return yt(k,this,x)}return o(g,"wrapper"),g}o(Ag,"createCurry");function Lu(r){return function(s,c,m){var g=Ae(s);if(!ft(s)){var S=ne(c,3);s=Qe(s),c=o(function(I){return S(g[I],I,g)},"predicate")}var x=r(s,c,m);return x>-1?g[S?s[x]:x]:n}}o(Lu,"createFind");function Ou(r){return an(function(s){var c=s.length,m=c,g=_t.prototype.thru;for(r&&s.reverse();m--;){var S=s[m];if(typeof S!="function")throw new At(a);if(g&&!x&&rs(S)=="wrapper")var x=new _t([],!0)}for(m=x?m:c;++m<c;){S=s[m];var I=rs(S),D=I=="wrapper"?Ra(S):n;D&&Na(D[0])&&D[1]==(G|T|C|Q)&&!D[4].length&&D[9]==1?x=x[rs(D[0])].apply(x,D[3]):x=S.length==1&&Na(S)?x[I]():x.thru(S)}return function(){var O=arguments,k=O[0];if(x&&O.length==1&&ue(k))return x.plant(k).value();for(var H=0,q=c?s[H].apply(this,O):k;++H<c;)q=s[H].call(this,q);return q}})}o(Ou,"createFlow");function Ji(r,s,c,m,g,S,x,I,D,O){var k=s&G,H=s&M,q=s&b,Z=s&(T|_),re=s&le,fe=q?n:Zr(r);function ie(){for(var ge=arguments.length,Se=N(ge),wt=ge;wt--;)Se[wt]=arguments[wt];if(Z)var at=hr(ie),Mt=Vm(Se,at);if(m&&(Se=Ru(Se,m,g,Z)),S&&(Se=Au(Se,S,x,Z)),ge-=Mt,Z&&ge<O){var qe=gn(Se,at);return Pu(r,s,Ji,ie.placeholder,c,Se,qe,I,D,O-ge)}var Wt=H?c:this,dn=q?Wt[r]:r;return ge=Se.length,I?Se=Yg(Se,I):re&&ge>1&&Se.reverse(),k&&D<ge&&(Se.length=D),this&&this!==Ye&&this instanceof ie&&(dn=fe||Zr(dn)),dn.apply(Wt,Se)}return o(ie,"wrapper"),ie}o(Ji,"createHybrid");function ku(r,s){return function(c,m){return rg(c,r,s(m),{})}}o(ku,"createInverter");function es(r,s){return function(c,m){var g;if(c===n&&m===n)return s;if(c!==n&&(g=c),m!==n){if(g===n)return m;typeof c=="string"||typeof m=="string"?(c=bt(c),m=bt(m)):(c=bu(c),m=bu(m)),g=r(c,m)}return g}}o(es,"createMathOperation");function xa(r){return an(function(s){return s=Fe(s,Et(ne())),me(function(c){var m=this;return r(s,function(g){return yt(g,m,c)})})})}o(xa,"createOver");function ts(r,s){s=s===n?" ":bt(s);var c=s.length;if(c<2)return c?va(s,r):s;var m=va(s,Vi(r/or(s)));return sr(s)?wn(Ft(m),0,r).join(""):m.slice(0,r)}o(ts,"createPadding");function _g(r,s,c,m){var g=s&M,S=Zr(r);function x(){for(var I=-1,D=arguments.length,O=-1,k=m.length,H=N(k+D),q=this&&this!==Ye&&this instanceof x?S:r;++O<k;)H[O]=m[O];for(;D--;)H[O++]=arguments[++I];return yt(q,g?c:this,H)}return o(x,"wrapper"),x}o(_g,"createPartial");function Fu(r){return function(s,c,m){return m&&typeof m!="number"&&ot(s,c,m)&&(c=m=n),s=un(s),c===n?(c=s,s=0):c=un(c),m=m===n?s<c?1:-1:un(m),pg(s,c,m,r)}}o(Fu,"createRange");function ns(r){return function(s,c){return typeof s=="string"&&typeof c=="string"||(s=Ot(s),c=Ot(c)),r(s,c)}}o(ns,"createRelationalOperation");function Pu(r,s,c,m,g,S,x,I,D,O){var k=s&T,H=k?x:n,q=k?n:x,Z=k?S:n,re=k?n:S;s|=k?C:F,s&=~(k?F:C),s&R||(s&=~(M|b));var fe=[r,s,g,Z,H,re,q,I,D,O],ie=c.apply(n,fe);return Na(r)&&Yu(ie,fe),ie.placeholder=m,Qu(ie,r,s)}o(Pu,"createRecurry");function Ta(r){var s=je[r];return function(c,m){if(c=Ot(c),m=m==null?0:tt(de(m),292),m&&Qc(c)){var g=(Ie(c)+"e").split("e"),S=s(g[0]+"e"+(+g[1]+m));return g=(Ie(S)+"e").split("e"),+(g[0]+"e"+(+g[1]-m))}return s(c)}}o(Ta,"createRound");var Dg=lr&&1/Di(new lr([,-0]))[1]==z?function(r){return new lr(r)}:ja;function Hu(r){return function(s){var c=nt(s);return c==Pe?ta(s):c==kt?Km(s):Bm(s,r(s))}}o(Hu,"createToPairs");function on(r,s,c,m,g,S,x,I){var D=s&b;if(!D&&typeof r!="function")throw new At(a);var O=m?m.length:0;if(O||(s&=~(C|F),m=g=n),x=x===n?x:Ke(de(x),0),I=I===n?I:de(I),O-=g?g.length:0,s&F){var k=m,H=g;m=g=n}var q=D?n:Ra(r),Z=[r,s,c,m,g,k,H,S,x,I];if(q&&zg(Z,q),r=Z[0],s=Z[1],c=Z[2],m=Z[3],g=Z[4],I=Z[9]=Z[9]===n?D?0:r.length:Ke(Z[9]-O,0),!I&&s&(T|_)&&(s&=~(T|_)),!s||s==M)var re=Rg(r,s,c);else s==T||s==_?re=Ag(r,s,I):(s==C||s==(M|C))&&!g.length?re=_g(r,s,c,m):re=Ji.apply(n,Z);var fe=q?yu:Yu;return Qu(fe(re,Z),r,s)}o(on,"createWrap");function Wu(r,s,c,m){return r===n||Ht(r,ar[c])&&!Re.call(m,c)?s:r}o(Wu,"customDefaultsAssignIn");function Bu(r,s,c,m,g,S){return He(r)&&He(s)&&(S.set(s,r),Yi(r,s,n,Bu,S),S.delete(s)),r}o(Bu,"customDefaultsMerge");function Ng(r){return ti(r)?n:r}o(Ng,"customOmitClone");function Vu(r,s,c,m,g,S){var x=c&y,I=r.length,D=s.length;if(I!=D&&!(x&&D>I))return!1;var O=S.get(r),k=S.get(s);if(O&&k)return O==s&&k==r;var H=-1,q=!0,Z=c&w?new Pn:n;for(S.set(r,s),S.set(s,r);++H<I;){var re=r[H],fe=s[H];if(m)var ie=x?m(fe,re,H,s,r,S):m(re,fe,H,r,s,S);if(ie!==n){if(ie)continue;q=!1;break}if(Z){if(!Yo(s,function(ge,Se){if(!Vr(Z,Se)&&(re===ge||g(re,ge,c,m,S)))return Z.push(Se)})){q=!1;break}}else if(!(re===fe||g(re,fe,c,m,S))){q=!1;break}}return S.delete(r),S.delete(s),q}o(Vu,"equalArrays");function Lg(r,s,c,m,g,S,x){switch(c){case nr:if(r.byteLength!=s.byteLength||r.byteOffset!=s.byteOffset)return!1;r=r.buffer,s=s.buffer;case Br:return!(r.byteLength!=s.byteLength||!S(new Pi(r),new Pi(s)));case Xe:case it:case Ce:return Ht(+r,+s);case hn:return r.name==s.name&&r.message==s.message;case Pr:case Hr:return r==s+"";case Pe:var I=ta;case kt:var D=m&y;if(I||(I=Di),r.size!=s.size&&!D)return!1;var O=x.get(r);if(O)return O==s;m|=w,x.set(r,s);var k=Vu(I(r),I(s),m,g,S,x);return x.delete(r),k;case Ti:if(zr)return zr.call(r)==zr.call(s)}return!1}o(Lg,"equalByTag");function Og(r,s,c,m,g,S){var x=c&y,I=Ia(r),D=I.length,O=Ia(s),k=O.length;if(D!=k&&!x)return!1;for(var H=D;H--;){var q=I[H];if(!(x?q in s:Re.call(s,q)))return!1}var Z=S.get(r),re=S.get(s);if(Z&&re)return Z==s&&re==r;var fe=!0;S.set(r,s),S.set(s,r);for(var ie=x;++H<D;){q=I[H];var ge=r[q],Se=s[q];if(m)var wt=x?m(Se,ge,q,s,r,S):m(ge,Se,q,r,s,S);if(!(wt===n?ge===Se||g(ge,Se,c,m,S):wt)){fe=!1;break}ie||(ie=q=="constructor")}if(fe&&!ie){var at=r.constructor,Mt=s.constructor;at!=Mt&&"constructor"in r&&"constructor"in s&&!(typeof at=="function"&&at instanceof at&&typeof Mt=="function"&&Mt instanceof Mt)&&(fe=!1)}return S.delete(r),S.delete(s),fe}o(Og,"equalObjects");function an(r){return Oa(ju(r,n,nd),r+"")}o(an,"flatRest");function Ia(r){return au(r,Qe,_a)}o(Ia,"getAllKeys");function Ca(r){return au(r,ht,Uu)}o(Ca,"getAllKeysIn");var Ra=Gi?function(r){return Gi.get(r)}:ja;function rs(r){for(var s=r.name+"",c=cr[s],m=Re.call(cr,s)?c.length:0;m--;){var g=c[m],S=g.func;if(S==null||S==r)return g.name}return s}o(rs,"getFuncName");function hr(r){var s=Re.call(E,"placeholder")?E:r;return s.placeholder}o(hr,"getHolder");function ne(){var r=E.iteratee||qa;return r=r===qa?uu:r,arguments.length?r(arguments[0],arguments[1]):r}o(ne,"getIteratee");function is(r,s){var c=r.__data__;return Ug(s)?c[typeof s=="string"?"string":"hash"]:c.map}o(is,"getMapData");function Aa(r){for(var s=Qe(r),c=s.length;c--;){var m=s[c],g=r[m];s[c]=[m,g,qu(g)]}return s}o(Aa,"getMatchData");function Bn(r,s){var c=qm(r,s);return cu(c)?c:n}o(Bn,"getNative");function kg(r){var s=Re.call(r,kn),c=r[kn];try{r[kn]=n;var m=!0}catch{}var g=ki.call(r);return m&&(s?r[kn]=c:delete r[kn]),g}o(kg,"getRawTag");var _a=ra?function(r){return r==null?[]:(r=Ae(r),mn(ra(r),function(s){return Kc.call(r,s)}))}:Ka,Uu=ra?function(r){for(var s=[];r;)pn(s,_a(r)),r=Hi(r);return s}:Ka,nt=st;(ia&&nt(new ia(new ArrayBuffer(1)))!=nr||Gr&&nt(new Gr)!=Pe||sa&&nt(sa.resolve())!=Te||lr&&nt(new lr)!=kt||$r&&nt(new $r)!=Wr)&&(nt=o(function(r){var s=st(r),c=s==Ge?r.constructor:n,m=c?Vn(c):"";if(m)switch(m){case vp:return nr;case yp:return Pe;case Ep:return Te;case bp:return kt;case Sp:return Wr}return s},"getTag"));function Fg(r,s,c){for(var m=-1,g=c.length;++m<g;){var S=c[m],x=S.size;switch(S.type){case"drop":r+=x;break;case"dropRight":s-=x;break;case"take":s=tt(s,r+x);break;case"takeRight":r=Ke(r,s-x);break}}return{start:r,end:s}}o(Fg,"getView");function Pg(r){var s=r.match(Gh);return s?s[1].split($h):[]}o(Pg,"getWrapDetails");function Gu(r,s,c){s=Sn(s,r);for(var m=-1,g=s.length,S=!1;++m<g;){var x=jt(s[m]);if(!(S=r!=null&&c(r,x)))break;r=r[x]}return S||++m!=g?S:(g=r==null?0:r.length,!!g&&ds(g)&&ln(x,g)&&(ue(r)||Un(r)))}o(Gu,"hasPath");function Hg(r){var s=r.length,c=new r.constructor(s);return s&&typeof r[0]=="string"&&Re.call(r,"index")&&(c.index=r.index,c.input=r.input),c}o(Hg,"initCloneArray");function $u(r){return typeof r.constructor=="function"&&!Jr(r)?ur(Hi(r)):{}}o($u,"initCloneObject");function Wg(r,s,c){var m=r.constructor;switch(s){case Br:return Ma(r);case Xe:case it:return new m(+r);case nr:return wg(r,c);case Ao:case _o:case Do:case No:case Lo:case Oo:case ko:case Fo:case Po:return Iu(r,c);case Pe:return new m;case Ce:case Hr:return new m(r);case Pr:return Mg(r);case kt:return new m;case Ti:return xg(r)}}o(Wg,"initCloneByTag");function Bg(r,s){var c=s.length;if(!c)return r;var m=c-1;return s[m]=(c>1?"& ":"")+s[m],s=s.join(c>2?", ":" "),r.replace(Uh,`{
/* [wrapped with `+s+`] */
`)}o(Bg,"insertWrapDetails");function Vg(r){return ue(r)||Un(r)||!!(Yc&&r&&r[Yc])}o(Vg,"isFlattenable");function ln(r,s){var c=typeof r;return s=s??J,!!s&&(c=="number"||c!="symbol"&&Jh.test(r))&&r>-1&&r%1==0&&r<s}o(ln,"isIndex");function ot(r,s,c){if(!He(c))return!1;var m=typeof s;return(m=="number"?ft(c)&&ln(s,c.length):m=="string"&&s in c)?Ht(c[s],r):!1}o(ot,"isIterateeCall");function Da(r,s){if(ue(r))return!1;var c=typeof r;return c=="number"||c=="symbol"||c=="boolean"||r==null||St(r)?!0:Hh.test(r)||!Ph.test(r)||s!=null&&r in Ae(s)}o(Da,"isKey");function Ug(r){var s=typeof r;return s=="string"||s=="number"||s=="symbol"||s=="boolean"?r!=="__proto__":r===null}o(Ug,"isKeyable");function Na(r){var s=rs(r),c=E[s];if(typeof c!="function"||!(s in ye.prototype))return!1;if(r===c)return!0;var m=Ra(c);return!!m&&r===m[0]}o(Na,"isLaziable");function Gg(r){return!!qc&&qc in r}o(Gg,"isMasked");var $g=Li?cn:Ya;function Jr(r){var s=r&&r.constructor,c=typeof s=="function"&&s.prototype||ar;return r===c}o(Jr,"isPrototype");function qu(r){return r===r&&!He(r)}o(qu,"isStrictComparable");function zu(r,s){return function(c){return c==null?!1:c[r]===s&&(s!==n||r in Ae(c))}}o(zu,"matchesStrictComparable");function qg(r){var s=cs(r,function(m){return c.size===d&&c.clear(),m}),c=s.cache;return s}o(qg,"memoizeCapped");function zg(r,s){var c=r[1],m=s[1],g=c|m,S=g<(M|b|G),x=m==G&&c==T||m==G&&c==Q&&r[7].length<=s[8]||m==(G|Q)&&s[7].length<=s[8]&&c==T;if(!(S||x))return r;m&M&&(r[2]=s[2],g|=c&M?0:R);var I=s[3];if(I){var D=r[3];r[3]=D?Ru(D,I,s[4]):I,r[4]=D?gn(r[3],f):s[4]}return I=s[5],I&&(D=r[5],r[5]=D?Au(D,I,s[6]):I,r[6]=D?gn(r[5],f):s[6]),I=s[7],I&&(r[7]=I),m&G&&(r[8]=r[8]==null?s[8]:tt(r[8],s[8])),r[9]==null&&(r[9]=s[9]),r[0]=s[0],r[1]=g,r}o(zg,"mergeData");function jg(r){var s=[];if(r!=null)for(var c in Ae(r))s.push(c);return s}o(jg,"nativeKeysIn");function Kg(r){return ki.call(r)}o(Kg,"objectToString");function ju(r,s,c){return s=Ke(s===n?r.length-1:s,0),function(){for(var m=arguments,g=-1,S=Ke(m.length-s,0),x=N(S);++g<S;)x[g]=m[s+g];g=-1;for(var I=N(s+1);++g<s;)I[g]=m[g];return I[s]=c(x),yt(r,this,I)}}o(ju,"overRest");function Ku(r,s){return s.length<2?r:Wn(r,Nt(s,0,-1))}o(Ku,"parent");function Yg(r,s){for(var c=r.length,m=tt(s.length,c),g=dt(r);m--;){var S=s[m];r[m]=ln(S,c)?g[S]:n}return r}o(Yg,"reorder");function La(r,s){if(!(s==="constructor"&&typeof r[s]=="function")&&s!="__proto__")return r[s]}o(La,"safeGet");var Yu=Xu(yu),ei=up||function(r,s){return Ye.setTimeout(r,s)},Oa=Xu(yg);function Qu(r,s,c){var m=s+"";return Oa(r,Bg(m,Qg(Pg(m),c)))}o(Qu,"setWrapToString");function Xu(r){var s=0,c=0;return function(){var m=mp(),g=V-(m-c);if(c=m,g>0){if(++s>=he)return arguments[0]}else s=0;return r.apply(n,arguments)}}o(Xu,"shortOut");function ss(r,s){var c=-1,m=r.length,g=m-1;for(s=s===n?m:s;++c<s;){var S=ga(c,g),x=r[S];r[S]=r[c],r[c]=x}return r.length=s,r}o(ss,"shuffleSelf");var Zu=qg(function(r){var s=[];return r.charCodeAt(0)===46&&s.push(""),r.replace(Wh,function(c,m,g,S){s.push(g?S.replace(jh,"$1"):m||c)}),s});function jt(r){if(typeof r=="string"||St(r))return r;var s=r+"";return s=="0"&&1/r==-z?"-0":s}o(jt,"toKey");function Vn(r){if(r!=null){try{return Oi.call(r)}catch{}try{return r+""}catch{}}return""}o(Vn,"toSource");function Qg(r,s){return Rt(te,function(c){var m="_."+c[0];s&c[1]&&!Ai(r,m)&&r.push(m)}),r.sort()}o(Qg,"updateWrapDetails");function Ju(r){if(r instanceof ye)return r.clone();var s=new _t(r.__wrapped__,r.__chain__);return s.__actions__=dt(r.__actions__),s.__index__=r.__index__,s.__values__=r.__values__,s}o(Ju,"wrapperClone");function Xg(r,s,c){(c?ot(r,s,c):s===n)?s=1:s=Ke(de(s),0);var m=r==null?0:r.length;if(!m||s<1)return[];for(var g=0,S=0,x=N(Vi(m/s));g<m;)x[S++]=Nt(r,g,g+=s);return x}o(Xg,"chunk");function Zg(r){for(var s=-1,c=r==null?0:r.length,m=0,g=[];++s<c;){var S=r[s];S&&(g[m++]=S)}return g}o(Zg,"compact");function Jg(){var r=arguments.length;if(!r)return[];for(var s=N(r-1),c=arguments[0],m=r;m--;)s[m-1]=arguments[m];return pn(ue(c)?dt(c):[c],Ze(s,1))}o(Jg,"concat");var ev=me(function(r,s){return $e(r)?Kr(r,Ze(s,1,$e,!0)):[]}),tv=me(function(r,s){var c=Lt(s);return $e(c)&&(c=n),$e(r)?Kr(r,Ze(s,1,$e,!0),ne(c,2)):[]}),nv=me(function(r,s){var c=Lt(s);return $e(c)&&(c=n),$e(r)?Kr(r,Ze(s,1,$e,!0),n,c):[]});function rv(r,s,c){var m=r==null?0:r.length;return m?(s=c||s===n?1:de(s),Nt(r,s<0?0:s,m)):[]}o(rv,"drop");function iv(r,s,c){var m=r==null?0:r.length;return m?(s=c||s===n?1:de(s),s=m-s,Nt(r,0,s<0?0:s)):[]}o(iv,"dropRight");function sv(r,s){return r&&r.length?Xi(r,ne(s,3),!0,!0):[]}o(sv,"dropRightWhile");function ov(r,s){return r&&r.length?Xi(r,ne(s,3),!0):[]}o(ov,"dropWhile");function av(r,s,c,m){var g=r==null?0:r.length;return g?(c&&typeof c!="number"&&ot(r,s,c)&&(c=0,m=g),Jp(r,s,c,m)):[]}o(av,"fill");function ed(r,s,c){var m=r==null?0:r.length;if(!m)return-1;var g=c==null?0:de(c);return g<0&&(g=Ke(m+g,0)),_i(r,ne(s,3),g)}o(ed,"findIndex");function td(r,s,c){var m=r==null?0:r.length;if(!m)return-1;var g=m-1;return c!==n&&(g=de(c),g=c<0?Ke(m+g,0):tt(g,m-1)),_i(r,ne(s,3),g,!0)}o(td,"findLastIndex");function nd(r){var s=r==null?0:r.length;return s?Ze(r,1):[]}o(nd,"flatten");function lv(r){var s=r==null?0:r.length;return s?Ze(r,z):[]}o(lv,"flattenDeep");function cv(r,s){var c=r==null?0:r.length;return c?(s=s===n?1:de(s),Ze(r,s)):[]}o(cv,"flattenDepth");function uv(r){for(var s=-1,c=r==null?0:r.length,m={};++s<c;){var g=r[s];m[g[0]]=g[1]}return m}o(uv,"fromPairs");function rd(r){return r&&r.length?r[0]:n}o(rd,"head");function dv(r,s,c){var m=r==null?0:r.length;if(!m)return-1;var g=c==null?0:de(c);return g<0&&(g=Ke(m+g,0)),ir(r,s,g)}o(dv,"indexOf");function fv(r){var s=r==null?0:r.length;return s?Nt(r,0,-1):[]}o(fv,"initial");var hv=me(function(r){var s=Fe(r,Sa);return s.length&&s[0]===r[0]?da(s):[]}),mv=me(function(r){var s=Lt(r),c=Fe(r,Sa);return s===Lt(c)?s=n:c.pop(),c.length&&c[0]===r[0]?da(c,ne(s,2)):[]}),pv=me(function(r){var s=Lt(r),c=Fe(r,Sa);return s=typeof s=="function"?s:n,s&&c.pop(),c.length&&c[0]===r[0]?da(c,n,s):[]});function gv(r,s){return r==null?"":fp.call(r,s)}o(gv,"join");function Lt(r){var s=r==null?0:r.length;return s?r[s-1]:n}o(Lt,"last");function vv(r,s,c){var m=r==null?0:r.length;if(!m)return-1;var g=m;return c!==n&&(g=de(c),g=g<0?Ke(m+g,0):tt(g,m-1)),s===s?Qm(r,s,g):_i(r,Pc,g,!0)}o(vv,"lastIndexOf");function yv(r,s){return r&&r.length?mu(r,de(s)):n}o(yv,"nth");var Ev=me(id);function id(r,s){return r&&r.length&&s&&s.length?pa(r,s):r}o(id,"pullAll");function bv(r,s,c){return r&&r.length&&s&&s.length?pa(r,s,ne(c,2)):r}o(bv,"pullAllBy");function Sv(r,s,c){return r&&r.length&&s&&s.length?pa(r,s,n,c):r}o(Sv,"pullAllWith");var wv=an(function(r,s){var c=r==null?0:r.length,m=aa(r,s);return vu(r,Fe(s,function(g){return ln(g,c)?+g:g}).sort(Cu)),m});function Mv(r,s){var c=[];if(!(r&&r.length))return c;var m=-1,g=[],S=r.length;for(s=ne(s,3);++m<S;){var x=r[m];s(x,m,r)&&(c.push(x),g.push(m))}return vu(r,g),c}o(Mv,"remove");function ka(r){return r==null?r:gp.call(r)}o(ka,"reverse");function xv(r,s,c){var m=r==null?0:r.length;return m?(c&&typeof c!="number"&&ot(r,s,c)?(s=0,c=m):(s=s==null?0:de(s),c=c===n?m:de(c)),Nt(r,s,c)):[]}o(xv,"slice");function Tv(r,s){return Qi(r,s)}o(Tv,"sortedIndex");function Iv(r,s,c){return ya(r,s,ne(c,2))}o(Iv,"sortedIndexBy");function Cv(r,s){var c=r==null?0:r.length;if(c){var m=Qi(r,s);if(m<c&&Ht(r[m],s))return m}return-1}o(Cv,"sortedIndexOf");function Rv(r,s){return Qi(r,s,!0)}o(Rv,"sortedLastIndex");function Av(r,s,c){return ya(r,s,ne(c,2),!0)}o(Av,"sortedLastIndexBy");function _v(r,s){var c=r==null?0:r.length;if(c){var m=Qi(r,s,!0)-1;if(Ht(r[m],s))return m}return-1}o(_v,"sortedLastIndexOf");function Dv(r){return r&&r.length?Eu(r):[]}o(Dv,"sortedUniq");function Nv(r,s){return r&&r.length?Eu(r,ne(s,2)):[]}o(Nv,"sortedUniqBy");function Lv(r){var s=r==null?0:r.length;return s?Nt(r,1,s):[]}o(Lv,"tail");function Ov(r,s,c){return r&&r.length?(s=c||s===n?1:de(s),Nt(r,0,s<0?0:s)):[]}o(Ov,"take");function kv(r,s,c){var m=r==null?0:r.length;return m?(s=c||s===n?1:de(s),s=m-s,Nt(r,s<0?0:s,m)):[]}o(kv,"takeRight");function Fv(r,s){return r&&r.length?Xi(r,ne(s,3),!1,!0):[]}o(Fv,"takeRightWhile");function Pv(r,s){return r&&r.length?Xi(r,ne(s,3)):[]}o(Pv,"takeWhile");var Hv=me(function(r){return bn(Ze(r,1,$e,!0))}),Wv=me(function(r){var s=Lt(r);return $e(s)&&(s=n),bn(Ze(r,1,$e,!0),ne(s,2))}),Bv=me(function(r){var s=Lt(r);return s=typeof s=="function"?s:n,bn(Ze(r,1,$e,!0),n,s)});function Vv(r){return r&&r.length?bn(r):[]}o(Vv,"uniq");function Uv(r,s){return r&&r.length?bn(r,ne(s,2)):[]}o(Uv,"uniqBy");function Gv(r,s){return s=typeof s=="function"?s:n,r&&r.length?bn(r,n,s):[]}o(Gv,"uniqWith");function Fa(r){if(!(r&&r.length))return[];var s=0;return r=mn(r,function(c){if($e(c))return s=Ke(c.length,s),!0}),Jo(s,function(c){return Fe(r,Qo(c))})}o(Fa,"unzip");function sd(r,s){if(!(r&&r.length))return[];var c=Fa(r);return s==null?c:Fe(c,function(m){return yt(s,n,m)})}o(sd,"unzipWith");var $v=me(function(r,s){return $e(r)?Kr(r,s):[]}),qv=me(function(r){return ba(mn(r,$e))}),zv=me(function(r){var s=Lt(r);return $e(s)&&(s=n),ba(mn(r,$e),ne(s,2))}),jv=me(function(r){var s=Lt(r);return s=typeof s=="function"?s:n,ba(mn(r,$e),n,s)}),Kv=me(Fa);function Yv(r,s){return Mu(r||[],s||[],jr)}o(Yv,"zipObject");function Qv(r,s){return Mu(r||[],s||[],Xr)}o(Qv,"zipObjectDeep");var Xv=me(function(r){var s=r.length,c=s>1?r[s-1]:n;return c=typeof c=="function"?(r.pop(),c):n,sd(r,c)});function od(r){var s=E(r);return s.__chain__=!0,s}o(od,"chain");function Zv(r,s){return s(r),r}o(Zv,"tap");function os(r,s){return s(r)}o(os,"thru");var Jv=an(function(r){var s=r.length,c=s?r[0]:0,m=this.__wrapped__,g=o(function(S){return aa(S,r)},"interceptor");return s>1||this.__actions__.length||!(m instanceof ye)||!ln(c)?this.thru(g):(m=m.slice(c,+c+(s?1:0)),m.__actions__.push({func:os,args:[g],thisArg:n}),new _t(m,this.__chain__).thru(function(S){return s&&!S.length&&S.push(n),S}))});function ey(){return od(this)}o(ey,"wrapperChain");function ty(){return new _t(this.value(),this.__chain__)}o(ty,"wrapperCommit");function ny(){this.__values__===n&&(this.__values__=bd(this.value()));var r=this.__index__>=this.__values__.length,s=r?n:this.__values__[this.__index__++];return{done:r,value:s}}o(ny,"wrapperNext");function ry(){return this}o(ry,"wrapperToIterator");function iy(r){for(var s,c=this;c instanceof qi;){var m=Ju(c);m.__index__=0,m.__values__=n,s?g.__wrapped__=m:s=m;var g=m;c=c.__wrapped__}return g.__wrapped__=r,s}o(iy,"wrapperPlant");function sy(){var r=this.__wrapped__;if(r instanceof ye){var s=r;return this.__actions__.length&&(s=new ye(this)),s=s.reverse(),s.__actions__.push({func:os,args:[ka],thisArg:n}),new _t(s,this.__chain__)}return this.thru(ka)}o(sy,"wrapperReverse");function oy(){return wu(this.__wrapped__,this.__actions__)}o(oy,"wrapperValue");var ay=Zi(function(r,s,c){Re.call(r,c)?++r[c]:sn(r,c,1)});function ly(r,s,c){var m=ue(r)?kc:Zp;return c&&ot(r,s,c)&&(s=n),m(r,ne(s,3))}o(ly,"every");function cy(r,s){var c=ue(r)?mn:su;return c(r,ne(s,3))}o(cy,"filter");var uy=Lu(ed),dy=Lu(td);function fy(r,s){return Ze(as(r,s),1)}o(fy,"flatMap");function hy(r,s){return Ze(as(r,s),z)}o(hy,"flatMapDeep");function my(r,s,c){return c=c===n?1:de(c),Ze(as(r,s),c)}o(my,"flatMapDepth");function ad(r,s){var c=ue(r)?Rt:En;return c(r,ne(s,3))}o(ad,"forEach");function ld(r,s){var c=ue(r)?Lm:iu;return c(r,ne(s,3))}o(ld,"forEachRight");var py=Zi(function(r,s,c){Re.call(r,c)?r[c].push(s):sn(r,c,[s])});function gy(r,s,c,m){r=ft(r)?r:pr(r),c=c&&!m?de(c):0;var g=r.length;return c<0&&(c=Ke(g+c,0)),fs(r)?c<=g&&r.indexOf(s,c)>-1:!!g&&ir(r,s,c)>-1}o(gy,"includes");var vy=me(function(r,s,c){var m=-1,g=typeof s=="function",S=ft(r)?N(r.length):[];return En(r,function(x){S[++m]=g?yt(s,x,c):Yr(x,s,c)}),S}),yy=Zi(function(r,s,c){sn(r,c,s)});function as(r,s){var c=ue(r)?Fe:du;return c(r,ne(s,3))}o(as,"map");function Ey(r,s,c,m){return r==null?[]:(ue(s)||(s=s==null?[]:[s]),c=m?n:c,ue(c)||(c=c==null?[]:[c]),pu(r,s,c))}o(Ey,"orderBy");var by=Zi(function(r,s,c){r[c?0:1].push(s)},function(){return[[],[]]});function Sy(r,s,c){var m=ue(r)?Ko:Wc,g=arguments.length<3;return m(r,ne(s,4),c,g,En)}o(Sy,"reduce");function wy(r,s,c){var m=ue(r)?Om:Wc,g=arguments.length<3;return m(r,ne(s,4),c,g,iu)}o(wy,"reduceRight");function My(r,s){var c=ue(r)?mn:su;return c(r,us(ne(s,3)))}o(My,"reject");function xy(r){var s=ue(r)?eu:gg;return s(r)}o(xy,"sample");function Ty(r,s,c){(c?ot(r,s,c):s===n)?s=1:s=de(s);var m=ue(r)?jp:vg;return m(r,s)}o(Ty,"sampleSize");function Iy(r){var s=ue(r)?Kp:Eg;return s(r)}o(Iy,"shuffle");function Cy(r){if(r==null)return 0;if(ft(r))return fs(r)?or(r):r.length;var s=nt(r);return s==Pe||s==kt?r.size:ha(r).length}o(Cy,"size");function Ry(r,s,c){var m=ue(r)?Yo:bg;return c&&ot(r,s,c)&&(s=n),m(r,ne(s,3))}o(Ry,"some");var Ay=me(function(r,s){if(r==null)return[];var c=s.length;return c>1&&ot(r,s[0],s[1])?s=[]:c>2&&ot(s[0],s[1],s[2])&&(s=[s[0]]),pu(r,Ze(s,1),[])}),ls=cp||function(){return Ye.Date.now()};function _y(r,s){if(typeof s!="function")throw new At(a);return r=de(r),function(){if(--r<1)return s.apply(this,arguments)}}o(_y,"after");function cd(r,s,c){return s=c?n:s,s=r&&s==null?r.length:s,on(r,G,n,n,n,n,s)}o(cd,"ary");function ud(r,s){var c;if(typeof s!="function")throw new At(a);return r=de(r),function(){return--r>0&&(c=s.apply(this,arguments)),r<=1&&(s=n),c}}o(ud,"before");var Pa=me(function(r,s,c){var m=M;if(c.length){var g=gn(c,hr(Pa));m|=C}return on(r,m,s,c,g)}),dd=me(function(r,s,c){var m=M|b;if(c.length){var g=gn(c,hr(dd));m|=C}return on(s,m,r,c,g)});function fd(r,s,c){s=c?n:s;var m=on(r,T,n,n,n,n,n,s);return m.placeholder=fd.placeholder,m}o(fd,"curry");function hd(r,s,c){s=c?n:s;var m=on(r,_,n,n,n,n,n,s);return m.placeholder=hd.placeholder,m}o(hd,"curryRight");function md(r,s,c){var m,g,S,x,I,D,O=0,k=!1,H=!1,q=!0;if(typeof r!="function")throw new At(a);s=Ot(s)||0,He(c)&&(k=!!c.leading,H="maxWait"in c,S=H?Ke(Ot(c.maxWait)||0,s):S,q="trailing"in c?!!c.trailing:q);function Z(qe){var Wt=m,dn=g;return m=g=n,O=qe,x=r.apply(dn,Wt),x}o(Z,"invokeFunc");function re(qe){return O=qe,I=ei(ge,s),k?Z(qe):x}o(re,"leadingEdge");function fe(qe){var Wt=qe-D,dn=qe-O,Ld=s-Wt;return H?tt(Ld,S-dn):Ld}o(fe,"remainingWait");function ie(qe){var Wt=qe-D,dn=qe-O;return D===n||Wt>=s||Wt<0||H&&dn>=S}o(ie,"shouldInvoke");function ge(){var qe=ls();if(ie(qe))return Se(qe);I=ei(ge,fe(qe))}o(ge,"timerExpired");function Se(qe){return I=n,q&&m?Z(qe):(m=g=n,x)}o(Se,"trailingEdge");function wt(){I!==n&&xu(I),O=0,m=D=g=I=n}o(wt,"cancel");function at(){return I===n?x:Se(ls())}o(at,"flush");function Mt(){var qe=ls(),Wt=ie(qe);if(m=arguments,g=this,D=qe,Wt){if(I===n)return re(D);if(H)return xu(I),I=ei(ge,s),Z(D)}return I===n&&(I=ei(ge,s)),x}return o(Mt,"debounced"),Mt.cancel=wt,Mt.flush=at,Mt}o(md,"debounce");var Dy=me(function(r,s){return ru(r,1,s)}),Ny=me(function(r,s,c){return ru(r,Ot(s)||0,c)});function Ly(r){return on(r,le)}o(Ly,"flip");function cs(r,s){if(typeof r!="function"||s!=null&&typeof s!="function")throw new At(a);var c=o(function(){var m=arguments,g=s?s.apply(this,m):m[0],S=c.cache;if(S.has(g))return S.get(g);var x=r.apply(this,m);return c.cache=S.set(g,x)||S,x},"memoized");return c.cache=new(cs.Cache||rn),c}o(cs,"memoize"),cs.Cache=rn;function us(r){if(typeof r!="function")throw new At(a);return function(){var s=arguments;switch(s.length){case 0:return!r.call(this);case 1:return!r.call(this,s[0]);case 2:return!r.call(this,s[0],s[1]);case 3:return!r.call(this,s[0],s[1],s[2])}return!r.apply(this,s)}}o(us,"negate");function Oy(r){return ud(2,r)}o(Oy,"once");var ky=Sg(function(r,s){s=s.length==1&&ue(s[0])?Fe(s[0],Et(ne())):Fe(Ze(s,1),Et(ne()));var c=s.length;return me(function(m){for(var g=-1,S=tt(m.length,c);++g<S;)m[g]=s[g].call(this,m[g]);return yt(r,this,m)})}),Ha=me(function(r,s){var c=gn(s,hr(Ha));return on(r,C,n,s,c)}),pd=me(function(r,s){var c=gn(s,hr(pd));return on(r,F,n,s,c)}),Fy=an(function(r,s){return on(r,Q,n,n,n,s)});function Py(r,s){if(typeof r!="function")throw new At(a);return s=s===n?s:de(s),me(r,s)}o(Py,"rest");function Hy(r,s){if(typeof r!="function")throw new At(a);return s=s==null?0:Ke(de(s),0),me(function(c){var m=c[s],g=wn(c,0,s);return m&&pn(g,m),yt(r,this,g)})}o(Hy,"spread");function Wy(r,s,c){var m=!0,g=!0;if(typeof r!="function")throw new At(a);return He(c)&&(m="leading"in c?!!c.leading:m,g="trailing"in c?!!c.trailing:g),md(r,s,{leading:m,maxWait:s,trailing:g})}o(Wy,"throttle");function By(r){return cd(r,1)}o(By,"unary");function Vy(r,s){return Ha(wa(s),r)}o(Vy,"wrap");function Uy(){if(!arguments.length)return[];var r=arguments[0];return ue(r)?r:[r]}o(Uy,"castArray");function Gy(r){return Dt(r,v)}o(Gy,"clone");function $y(r,s){return s=typeof s=="function"?s:n,Dt(r,v,s)}o($y,"cloneWith");function qy(r){return Dt(r,h|v)}o(qy,"cloneDeep");function zy(r,s){return s=typeof s=="function"?s:n,Dt(r,h|v,s)}o(zy,"cloneDeepWith");function jy(r,s){return s==null||nu(r,s,Qe(s))}o(jy,"conformsTo");function Ht(r,s){return r===s||r!==r&&s!==s}o(Ht,"eq");var Ky=ns(ua),Yy=ns(function(r,s){return r>=s}),Un=lu(function(){return arguments}())?lu:function(r){return We(r)&&Re.call(r,"callee")&&!Kc.call(r,"callee")},ue=N.isArray,Qy=Ac?Et(Ac):ig;function ft(r){return r!=null&&ds(r.length)&&!cn(r)}o(ft,"isArrayLike");function $e(r){return We(r)&&ft(r)}o($e,"isArrayLikeObject");function Xy(r){return r===!0||r===!1||We(r)&&st(r)==Xe}o(Xy,"isBoolean");var Mn=dp||Ya,Zy=_c?Et(_c):sg;function Jy(r){return We(r)&&r.nodeType===1&&!ti(r)}o(Jy,"isElement");function eE(r){if(r==null)return!0;if(ft(r)&&(ue(r)||typeof r=="string"||typeof r.splice=="function"||Mn(r)||mr(r)||Un(r)))return!r.length;var s=nt(r);if(s==Pe||s==kt)return!r.size;if(Jr(r))return!ha(r).length;for(var c in r)if(Re.call(r,c))return!1;return!0}o(eE,"isEmpty");function tE(r,s){return Qr(r,s)}o(tE,"isEqual");function nE(r,s,c){c=typeof c=="function"?c:n;var m=c?c(r,s):n;return m===n?Qr(r,s,n,c):!!m}o(nE,"isEqualWith");function Wa(r){if(!We(r))return!1;var s=st(r);return s==hn||s==en||typeof r.message=="string"&&typeof r.name=="string"&&!ti(r)}o(Wa,"isError");function rE(r){return typeof r=="number"&&Qc(r)}o(rE,"isFinite");function cn(r){if(!He(r))return!1;var s=st(r);return s==tn||s==Me||s==ut||s==Fr}o(cn,"isFunction");function gd(r){return typeof r=="number"&&r==de(r)}o(gd,"isInteger");function ds(r){return typeof r=="number"&&r>-1&&r%1==0&&r<=J}o(ds,"isLength");function He(r){var s=typeof r;return r!=null&&(s=="object"||s=="function")}o(He,"isObject");function We(r){return r!=null&&typeof r=="object"}o(We,"isObjectLike");var vd=Dc?Et(Dc):ag;function iE(r,s){return r===s||fa(r,s,Aa(s))}o(iE,"isMatch");function sE(r,s,c){return c=typeof c=="function"?c:n,fa(r,s,Aa(s),c)}o(sE,"isMatchWith");function oE(r){return yd(r)&&r!=+r}o(oE,"isNaN");function aE(r){if($g(r))throw new ce(i);return cu(r)}o(aE,"isNative");function lE(r){return r===null}o(lE,"isNull");function cE(r){return r==null}o(cE,"isNil");function yd(r){return typeof r=="number"||We(r)&&st(r)==Ce}o(yd,"isNumber");function ti(r){if(!We(r)||st(r)!=Ge)return!1;var s=Hi(r);if(s===null)return!0;var c=Re.call(s,"constructor")&&s.constructor;return typeof c=="function"&&c instanceof c&&Oi.call(c)==sp}o(ti,"isPlainObject");var Ba=Nc?Et(Nc):lg;function uE(r){return gd(r)&&r>=-J&&r<=J}o(uE,"isSafeInteger");var Ed=Lc?Et(Lc):cg;function fs(r){return typeof r=="string"||!ue(r)&&We(r)&&st(r)==Hr}o(fs,"isString");function St(r){return typeof r=="symbol"||We(r)&&st(r)==Ti}o(St,"isSymbol");var mr=Oc?Et(Oc):ug;function dE(r){return r===n}o(dE,"isUndefined");function fE(r){return We(r)&&nt(r)==Wr}o(fE,"isWeakMap");function hE(r){return We(r)&&st(r)==Ah}o(hE,"isWeakSet");var mE=ns(ma),pE=ns(function(r,s){return r<=s});function bd(r){if(!r)return[];if(ft(r))return fs(r)?Ft(r):dt(r);if(Ur&&r[Ur])return jm(r[Ur]());var s=nt(r),c=s==Pe?ta:s==kt?Di:pr;return c(r)}o(bd,"toArray");function un(r){if(!r)return r===0?r:0;if(r=Ot(r),r===z||r===-z){var s=r<0?-1:1;return s*ve}return r===r?r:0}o(un,"toFinite");function de(r){var s=un(r),c=s%1;return s===s?c?s-c:s:0}o(de,"toInteger");function Sd(r){return r?Hn(de(r),0,Ue):0}o(Sd,"toLength");function Ot(r){if(typeof r=="number")return r;if(St(r))return et;if(He(r)){var s=typeof r.valueOf=="function"?r.valueOf():r;r=He(s)?s+"":s}if(typeof r!="string")return r===0?r:+r;r=Bc(r);var c=Qh.test(r);return c||Zh.test(r)?_m(r.slice(2),c?2:8):Yh.test(r)?et:+r}o(Ot,"toNumber");function wd(r){return zt(r,ht(r))}o(wd,"toPlainObject");function gE(r){return r?Hn(de(r),-J,J):r===0?r:0}o(gE,"toSafeInteger");function Ie(r){return r==null?"":bt(r)}o(Ie,"toString");var vE=dr(function(r,s){if(Jr(s)||ft(s)){zt(s,Qe(s),r);return}for(var c in s)Re.call(s,c)&&jr(r,c,s[c])}),Md=dr(function(r,s){zt(s,ht(s),r)}),hs=dr(function(r,s,c,m){zt(s,ht(s),r,m)}),yE=dr(function(r,s,c,m){zt(s,Qe(s),r,m)}),EE=an(aa);function bE(r,s){var c=ur(r);return s==null?c:tu(c,s)}o(bE,"create");var SE=me(function(r,s){r=Ae(r);var c=-1,m=s.length,g=m>2?s[2]:n;for(g&&ot(s[0],s[1],g)&&(m=1);++c<m;)for(var S=s[c],x=ht(S),I=-1,D=x.length;++I<D;){var O=x[I],k=r[O];(k===n||Ht(k,ar[O])&&!Re.call(r,O))&&(r[O]=S[O])}return r}),wE=me(function(r){return r.push(n,Bu),yt(xd,n,r)});function ME(r,s){return Fc(r,ne(s,3),qt)}o(ME,"findKey");function xE(r,s){return Fc(r,ne(s,3),ca)}o(xE,"findLastKey");function TE(r,s){return r==null?r:la(r,ne(s,3),ht)}o(TE,"forIn");function IE(r,s){return r==null?r:ou(r,ne(s,3),ht)}o(IE,"forInRight");function CE(r,s){return r&&qt(r,ne(s,3))}o(CE,"forOwn");function RE(r,s){return r&&ca(r,ne(s,3))}o(RE,"forOwnRight");function AE(r){return r==null?[]:Ki(r,Qe(r))}o(AE,"functions");function _E(r){return r==null?[]:Ki(r,ht(r))}o(_E,"functionsIn");function Va(r,s,c){var m=r==null?n:Wn(r,s);return m===n?c:m}o(Va,"get");function DE(r,s){return r!=null&&Gu(r,s,eg)}o(DE,"has");function Ua(r,s){return r!=null&&Gu(r,s,tg)}o(Ua,"hasIn");var NE=ku(function(r,s,c){s!=null&&typeof s.toString!="function"&&(s=ki.call(s)),r[s]=c},$a(mt)),LE=ku(function(r,s,c){s!=null&&typeof s.toString!="function"&&(s=ki.call(s)),Re.call(r,s)?r[s].push(c):r[s]=[c]},ne),OE=me(Yr);function Qe(r){return ft(r)?Jc(r):ha(r)}o(Qe,"keys");function ht(r){return ft(r)?Jc(r,!0):dg(r)}o(ht,"keysIn");function kE(r,s){var c={};return s=ne(s,3),qt(r,function(m,g,S){sn(c,s(m,g,S),m)}),c}o(kE,"mapKeys");function FE(r,s){var c={};return s=ne(s,3),qt(r,function(m,g,S){sn(c,g,s(m,g,S))}),c}o(FE,"mapValues");var PE=dr(function(r,s,c){Yi(r,s,c)}),xd=dr(function(r,s,c,m){Yi(r,s,c,m)}),HE=an(function(r,s){var c={};if(r==null)return c;var m=!1;s=Fe(s,function(S){return S=Sn(S,r),m||(m=S.length>1),S}),zt(r,Ca(r),c),m&&(c=Dt(c,h|p|v,Ng));for(var g=s.length;g--;)Ea(c,s[g]);return c});function WE(r,s){return Td(r,us(ne(s)))}o(WE,"omitBy");var BE=an(function(r,s){return r==null?{}:hg(r,s)});function Td(r,s){if(r==null)return{};var c=Fe(Ca(r),function(m){return[m]});return s=ne(s),gu(r,c,function(m,g){return s(m,g[0])})}o(Td,"pickBy");function VE(r,s,c){s=Sn(s,r);var m=-1,g=s.length;for(g||(g=1,r=n);++m<g;){var S=r==null?n:r[jt(s[m])];S===n&&(m=g,S=c),r=cn(S)?S.call(r):S}return r}o(VE,"result");function UE(r,s,c){return r==null?r:Xr(r,s,c)}o(UE,"set");function GE(r,s,c,m){return m=typeof m=="function"?m:n,r==null?r:Xr(r,s,c,m)}o(GE,"setWith");var Id=Hu(Qe),Cd=Hu(ht);function $E(r,s,c){var m=ue(r),g=m||Mn(r)||mr(r);if(s=ne(s,4),c==null){var S=r&&r.constructor;g?c=m?new S:[]:He(r)?c=cn(S)?ur(Hi(r)):{}:c={}}return(g?Rt:qt)(r,function(x,I,D){return s(c,x,I,D)}),c}o($E,"transform");function qE(r,s){return r==null?!0:Ea(r,s)}o(qE,"unset");function zE(r,s,c){return r==null?r:Su(r,s,wa(c))}o(zE,"update");function jE(r,s,c,m){return m=typeof m=="function"?m:n,r==null?r:Su(r,s,wa(c),m)}o(jE,"updateWith");function pr(r){return r==null?[]:ea(r,Qe(r))}o(pr,"values");function KE(r){return r==null?[]:ea(r,ht(r))}o(KE,"valuesIn");function YE(r,s,c){return c===n&&(c=s,s=n),c!==n&&(c=Ot(c),c=c===c?c:0),s!==n&&(s=Ot(s),s=s===s?s:0),Hn(Ot(r),s,c)}o(YE,"clamp");function QE(r,s,c){return s=un(s),c===n?(c=s,s=0):c=un(c),r=Ot(r),ng(r,s,c)}o(QE,"inRange");function XE(r,s,c){if(c&&typeof c!="boolean"&&ot(r,s,c)&&(s=c=n),c===n&&(typeof s=="boolean"?(c=s,s=n):typeof r=="boolean"&&(c=r,r=n)),r===n&&s===n?(r=0,s=1):(r=un(r),s===n?(s=r,r=0):s=un(s)),r>s){var m=r;r=s,s=m}if(c||r%1||s%1){var g=Xc();return tt(r+g*(s-r+Am("1e-"+((g+"").length-1))),s)}return ga(r,s)}o(XE,"random");var ZE=fr(function(r,s,c){return s=s.toLowerCase(),r+(c?Rd(s):s)});function Rd(r){return Ga(Ie(r).toLowerCase())}o(Rd,"capitalize");function Ad(r){return r=Ie(r),r&&r.replace(em,Um).replace(Em,"")}o(Ad,"deburr");function JE(r,s,c){r=Ie(r),s=bt(s);var m=r.length;c=c===n?m:Hn(de(c),0,m);var g=c;return c-=s.length,c>=0&&r.slice(c,g)==s}o(JE,"endsWith");function eb(r){return r=Ie(r),r&&Oh.test(r)?r.replace(oc,Gm):r}o(eb,"escape");function tb(r){return r=Ie(r),r&&Bh.test(r)?r.replace(Ho,"\\$&"):r}o(tb,"escapeRegExp");var nb=fr(function(r,s,c){return r+(c?"-":"")+s.toLowerCase()}),rb=fr(function(r,s,c){return r+(c?" ":"")+s.toLowerCase()}),ib=Nu("toLowerCase");function sb(r,s,c){r=Ie(r),s=de(s);var m=s?or(r):0;if(!s||m>=s)return r;var g=(s-m)/2;return ts(Ui(g),c)+r+ts(Vi(g),c)}o(sb,"pad");function ob(r,s,c){r=Ie(r),s=de(s);var m=s?or(r):0;return s&&m<s?r+ts(s-m,c):r}o(ob,"padEnd");function ab(r,s,c){r=Ie(r),s=de(s);var m=s?or(r):0;return s&&m<s?ts(s-m,c)+r:r}o(ab,"padStart");function lb(r,s,c){return c||s==null?s=0:s&&(s=+s),pp(Ie(r).replace(Wo,""),s||0)}o(lb,"parseInt");function cb(r,s,c){return(c?ot(r,s,c):s===n)?s=1:s=de(s),va(Ie(r),s)}o(cb,"repeat");function ub(){var r=arguments,s=Ie(r[0]);return r.length<3?s:s.replace(r[1],r[2])}o(ub,"replace");var db=fr(function(r,s,c){return r+(c?"_":"")+s.toLowerCase()});function fb(r,s,c){return c&&typeof c!="number"&&ot(r,s,c)&&(s=c=n),c=c===n?Ue:c>>>0,c?(r=Ie(r),r&&(typeof s=="string"||s!=null&&!Ba(s))&&(s=bt(s),!s&&sr(r))?wn(Ft(r),0,c):r.split(s,c)):[]}o(fb,"split");var hb=fr(function(r,s,c){return r+(c?" ":"")+Ga(s)});function mb(r,s,c){return r=Ie(r),c=c==null?0:Hn(de(c),0,r.length),s=bt(s),r.slice(c,c+s.length)==s}o(mb,"startsWith");function pb(r,s,c){var m=E.templateSettings;c&&ot(r,s,c)&&(s=n),r=Ie(r),s=hs({},s,m,Wu);var g=hs({},s.imports,m.imports,Wu),S=Qe(g),x=ea(g,S),I,D,O=0,k=s.interpolate||Ii,H="__p += '",q=na((s.escape||Ii).source+"|"+k.source+"|"+(k===ac?Kh:Ii).source+"|"+(s.evaluate||Ii).source+"|$","g"),Z="//# sourceURL="+(Re.call(s,"sourceURL")?(s.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++xm+"]")+`
`;r.replace(q,function(ie,ge,Se,wt,at,Mt){return Se||(Se=wt),H+=r.slice(O,Mt).replace(tm,$m),ge&&(I=!0,H+=`' +
__e(`+ge+`) +
'`),at&&(D=!0,H+=`';
`+at+`;
__p += '`),Se&&(H+=`' +
((__t = (`+Se+`)) == null ? '' : __t) +
'`),O=Mt+ie.length,ie}),H+=`';
`;var re=Re.call(s,"variable")&&s.variable;if(!re)H=`with (obj) {
`+H+`
}
`;else if(zh.test(re))throw new ce(l);H=(D?H.replace(_h,""):H).replace(Dh,"$1").replace(Nh,"$1;"),H="function("+(re||"obj")+`) {
`+(re?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(I?", __e = _.escape":"")+(D?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+H+`return __p
}`;var fe=Dd(function(){return xe(S,Z+"return "+H).apply(n,x)});if(fe.source=H,Wa(fe))throw fe;return fe}o(pb,"template");function gb(r){return Ie(r).toLowerCase()}o(gb,"toLower");function vb(r){return Ie(r).toUpperCase()}o(vb,"toUpper");function yb(r,s,c){if(r=Ie(r),r&&(c||s===n))return Bc(r);if(!r||!(s=bt(s)))return r;var m=Ft(r),g=Ft(s),S=Vc(m,g),x=Uc(m,g)+1;return wn(m,S,x).join("")}o(yb,"trim");function Eb(r,s,c){if(r=Ie(r),r&&(c||s===n))return r.slice(0,$c(r)+1);if(!r||!(s=bt(s)))return r;var m=Ft(r),g=Uc(m,Ft(s))+1;return wn(m,0,g).join("")}o(Eb,"trimEnd");function bb(r,s,c){if(r=Ie(r),r&&(c||s===n))return r.replace(Wo,"");if(!r||!(s=bt(s)))return r;var m=Ft(r),g=Vc(m,Ft(s));return wn(m,g).join("")}o(bb,"trimStart");function Sb(r,s){var c=X,m=se;if(He(s)){var g="separator"in s?s.separator:g;c="length"in s?de(s.length):c,m="omission"in s?bt(s.omission):m}r=Ie(r);var S=r.length;if(sr(r)){var x=Ft(r);S=x.length}if(c>=S)return r;var I=c-or(m);if(I<1)return m;var D=x?wn(x,0,I).join(""):r.slice(0,I);if(g===n)return D+m;if(x&&(I+=D.length-I),Ba(g)){if(r.slice(I).search(g)){var O,k=D;for(g.global||(g=na(g.source,Ie(lc.exec(g))+"g")),g.lastIndex=0;O=g.exec(k);)var H=O.index;D=D.slice(0,H===n?I:H)}}else if(r.indexOf(bt(g),I)!=I){var q=D.lastIndexOf(g);q>-1&&(D=D.slice(0,q))}return D+m}o(Sb,"truncate");function wb(r){return r=Ie(r),r&&Lh.test(r)?r.replace(sc,Xm):r}o(wb,"unescape");var Mb=fr(function(r,s,c){return r+(c?" ":"")+s.toUpperCase()}),Ga=Nu("toUpperCase");function _d(r,s,c){return r=Ie(r),s=c?n:s,s===n?zm(r)?ep(r):Pm(r):r.match(s)||[]}o(_d,"words");var Dd=me(function(r,s){try{return yt(r,n,s)}catch(c){return Wa(c)?c:new ce(c)}}),xb=an(function(r,s){return Rt(s,function(c){c=jt(c),sn(r,c,Pa(r[c],r))}),r});function Tb(r){var s=r==null?0:r.length,c=ne();return r=s?Fe(r,function(m){if(typeof m[1]!="function")throw new At(a);return[c(m[0]),m[1]]}):[],me(function(m){for(var g=-1;++g<s;){var S=r[g];if(yt(S[0],this,m))return yt(S[1],this,m)}})}o(Tb,"cond");function Ib(r){return Xp(Dt(r,h))}o(Ib,"conforms");function $a(r){return function(){return r}}o($a,"constant");function Cb(r,s){return r==null||r!==r?s:r}o(Cb,"defaultTo");var Rb=Ou(),Ab=Ou(!0);function mt(r){return r}o(mt,"identity");function qa(r){return uu(typeof r=="function"?r:Dt(r,h))}o(qa,"iteratee");function _b(r){return fu(Dt(r,h))}o(_b,"matches");function Db(r,s){return hu(r,Dt(s,h))}o(Db,"matchesProperty");var Nb=me(function(r,s){return function(c){return Yr(c,r,s)}}),Lb=me(function(r,s){return function(c){return Yr(r,c,s)}});function za(r,s,c){var m=Qe(s),g=Ki(s,m);c==null&&!(He(s)&&(g.length||!m.length))&&(c=s,s=r,r=this,g=Ki(s,Qe(s)));var S=!(He(c)&&"chain"in c)||!!c.chain,x=cn(r);return Rt(g,function(I){var D=s[I];r[I]=D,x&&(r.prototype[I]=function(){var O=this.__chain__;if(S||O){var k=r(this.__wrapped__),H=k.__actions__=dt(this.__actions__);return H.push({func:D,args:arguments,thisArg:r}),k.__chain__=O,k}return D.apply(r,pn([this.value()],arguments))})}),r}o(za,"mixin");function Ob(){return Ye._===this&&(Ye._=op),this}o(Ob,"noConflict");function ja(){}o(ja,"noop");function kb(r){return r=de(r),me(function(s){return mu(s,r)})}o(kb,"nthArg");var Fb=xa(Fe),Pb=xa(kc),Hb=xa(Yo);function Nd(r){return Da(r)?Qo(jt(r)):mg(r)}o(Nd,"property");function Wb(r){return function(s){return r==null?n:Wn(r,s)}}o(Wb,"propertyOf");var Bb=Fu(),Vb=Fu(!0);function Ka(){return[]}o(Ka,"stubArray");function Ya(){return!1}o(Ya,"stubFalse");function Ub(){return{}}o(Ub,"stubObject");function Gb(){return""}o(Gb,"stubString");function $b(){return!0}o($b,"stubTrue");function qb(r,s){if(r=de(r),r<1||r>J)return[];var c=Ue,m=tt(r,Ue);s=ne(s),r-=Ue;for(var g=Jo(m,s);++c<r;)s(c);return g}o(qb,"times");function zb(r){return ue(r)?Fe(r,jt):St(r)?[r]:dt(Zu(Ie(r)))}o(zb,"toPath");function jb(r){var s=++ip;return Ie(r)+s}o(jb,"uniqueId");var Kb=es(function(r,s){return r+s},0),Yb=Ta("ceil"),Qb=es(function(r,s){return r/s},1),Xb=Ta("floor");function Zb(r){return r&&r.length?ji(r,mt,ua):n}o(Zb,"max");function Jb(r,s){return r&&r.length?ji(r,ne(s,2),ua):n}o(Jb,"maxBy");function eS(r){return Hc(r,mt)}o(eS,"mean");function tS(r,s){return Hc(r,ne(s,2))}o(tS,"meanBy");function nS(r){return r&&r.length?ji(r,mt,ma):n}o(nS,"min");function rS(r,s){return r&&r.length?ji(r,ne(s,2),ma):n}o(rS,"minBy");var iS=es(function(r,s){return r*s},1),sS=Ta("round"),oS=es(function(r,s){return r-s},0);function aS(r){return r&&r.length?Zo(r,mt):0}o(aS,"sum");function lS(r,s){return r&&r.length?Zo(r,ne(s,2)):0}return o(lS,"sumBy"),E.after=_y,E.ary=cd,E.assign=vE,E.assignIn=Md,E.assignInWith=hs,E.assignWith=yE,E.at=EE,E.before=ud,E.bind=Pa,E.bindAll=xb,E.bindKey=dd,E.castArray=Uy,E.chain=od,E.chunk=Xg,E.compact=Zg,E.concat=Jg,E.cond=Tb,E.conforms=Ib,E.constant=$a,E.countBy=ay,E.create=bE,E.curry=fd,E.curryRight=hd,E.debounce=md,E.defaults=SE,E.defaultsDeep=wE,E.defer=Dy,E.delay=Ny,E.difference=ev,E.differenceBy=tv,E.differenceWith=nv,E.drop=rv,E.dropRight=iv,E.dropRightWhile=sv,E.dropWhile=ov,E.fill=av,E.filter=cy,E.flatMap=fy,E.flatMapDeep=hy,E.flatMapDepth=my,E.flatten=nd,E.flattenDeep=lv,E.flattenDepth=cv,E.flip=Ly,E.flow=Rb,E.flowRight=Ab,E.fromPairs=uv,E.functions=AE,E.functionsIn=_E,E.groupBy=py,E.initial=fv,E.intersection=hv,E.intersectionBy=mv,E.intersectionWith=pv,E.invert=NE,E.invertBy=LE,E.invokeMap=vy,E.iteratee=qa,E.keyBy=yy,E.keys=Qe,E.keysIn=ht,E.map=as,E.mapKeys=kE,E.mapValues=FE,E.matches=_b,E.matchesProperty=Db,E.memoize=cs,E.merge=PE,E.mergeWith=xd,E.method=Nb,E.methodOf=Lb,E.mixin=za,E.negate=us,E.nthArg=kb,E.omit=HE,E.omitBy=WE,E.once=Oy,E.orderBy=Ey,E.over=Fb,E.overArgs=ky,E.overEvery=Pb,E.overSome=Hb,E.partial=Ha,E.partialRight=pd,E.partition=by,E.pick=BE,E.pickBy=Td,E.property=Nd,E.propertyOf=Wb,E.pull=Ev,E.pullAll=id,E.pullAllBy=bv,E.pullAllWith=Sv,E.pullAt=wv,E.range=Bb,E.rangeRight=Vb,E.rearg=Fy,E.reject=My,E.remove=Mv,E.rest=Py,E.reverse=ka,E.sampleSize=Ty,E.set=UE,E.setWith=GE,E.shuffle=Iy,E.slice=xv,E.sortBy=Ay,E.sortedUniq=Dv,E.sortedUniqBy=Nv,E.split=fb,E.spread=Hy,E.tail=Lv,E.take=Ov,E.takeRight=kv,E.takeRightWhile=Fv,E.takeWhile=Pv,E.tap=Zv,E.throttle=Wy,E.thru=os,E.toArray=bd,E.toPairs=Id,E.toPairsIn=Cd,E.toPath=zb,E.toPlainObject=wd,E.transform=$E,E.unary=By,E.union=Hv,E.unionBy=Wv,E.unionWith=Bv,E.uniq=Vv,E.uniqBy=Uv,E.uniqWith=Gv,E.unset=qE,E.unzip=Fa,E.unzipWith=sd,E.update=zE,E.updateWith=jE,E.values=pr,E.valuesIn=KE,E.without=$v,E.words=_d,E.wrap=Vy,E.xor=qv,E.xorBy=zv,E.xorWith=jv,E.zip=Kv,E.zipObject=Yv,E.zipObjectDeep=Qv,E.zipWith=Xv,E.entries=Id,E.entriesIn=Cd,E.extend=Md,E.extendWith=hs,za(E,E),E.add=Kb,E.attempt=Dd,E.camelCase=ZE,E.capitalize=Rd,E.ceil=Yb,E.clamp=YE,E.clone=Gy,E.cloneDeep=qy,E.cloneDeepWith=zy,E.cloneWith=$y,E.conformsTo=jy,E.deburr=Ad,E.defaultTo=Cb,E.divide=Qb,E.endsWith=JE,E.eq=Ht,E.escape=eb,E.escapeRegExp=tb,E.every=ly,E.find=uy,E.findIndex=ed,E.findKey=ME,E.findLast=dy,E.findLastIndex=td,E.findLastKey=xE,E.floor=Xb,E.forEach=ad,E.forEachRight=ld,E.forIn=TE,E.forInRight=IE,E.forOwn=CE,E.forOwnRight=RE,E.get=Va,E.gt=Ky,E.gte=Yy,E.has=DE,E.hasIn=Ua,E.head=rd,E.identity=mt,E.includes=gy,E.indexOf=dv,E.inRange=QE,E.invoke=OE,E.isArguments=Un,E.isArray=ue,E.isArrayBuffer=Qy,E.isArrayLike=ft,E.isArrayLikeObject=$e,E.isBoolean=Xy,E.isBuffer=Mn,E.isDate=Zy,E.isElement=Jy,E.isEmpty=eE,E.isEqual=tE,E.isEqualWith=nE,E.isError=Wa,E.isFinite=rE,E.isFunction=cn,E.isInteger=gd,E.isLength=ds,E.isMap=vd,E.isMatch=iE,E.isMatchWith=sE,E.isNaN=oE,E.isNative=aE,E.isNil=cE,E.isNull=lE,E.isNumber=yd,E.isObject=He,E.isObjectLike=We,E.isPlainObject=ti,E.isRegExp=Ba,E.isSafeInteger=uE,E.isSet=Ed,E.isString=fs,E.isSymbol=St,E.isTypedArray=mr,E.isUndefined=dE,E.isWeakMap=fE,E.isWeakSet=hE,E.join=gv,E.kebabCase=nb,E.last=Lt,E.lastIndexOf=vv,E.lowerCase=rb,E.lowerFirst=ib,E.lt=mE,E.lte=pE,E.max=Zb,E.maxBy=Jb,E.mean=eS,E.meanBy=tS,E.min=nS,E.minBy=rS,E.stubArray=Ka,E.stubFalse=Ya,E.stubObject=Ub,E.stubString=Gb,E.stubTrue=$b,E.multiply=iS,E.nth=yv,E.noConflict=Ob,E.noop=ja,E.now=ls,E.pad=sb,E.padEnd=ob,E.padStart=ab,E.parseInt=lb,E.random=XE,E.reduce=Sy,E.reduceRight=wy,E.repeat=cb,E.replace=ub,E.result=VE,E.round=sS,E.runInContext=A,E.sample=xy,E.size=Cy,E.snakeCase=db,E.some=Ry,E.sortedIndex=Tv,E.sortedIndexBy=Iv,E.sortedIndexOf=Cv,E.sortedLastIndex=Rv,E.sortedLastIndexBy=Av,E.sortedLastIndexOf=_v,E.startCase=hb,E.startsWith=mb,E.subtract=oS,E.sum=aS,E.sumBy=lS,E.template=pb,E.times=qb,E.toFinite=un,E.toInteger=de,E.toLength=Sd,E.toLower=gb,E.toNumber=Ot,E.toSafeInteger=gE,E.toString=Ie,E.toUpper=vb,E.trim=yb,E.trimEnd=Eb,E.trimStart=bb,E.truncate=Sb,E.unescape=wb,E.uniqueId=jb,E.upperCase=Mb,E.upperFirst=Ga,E.each=ad,E.eachRight=ld,E.first=rd,za(E,function(){var r={};return qt(E,function(s,c){Re.call(E.prototype,c)||(r[c]=s)}),r}(),{chain:!1}),E.VERSION=e,Rt(["bind","bindKey","curry","curryRight","partial","partialRight"],function(r){E[r].placeholder=E}),Rt(["drop","take"],function(r,s){ye.prototype[r]=function(c){c=c===n?1:Ke(de(c),0);var m=this.__filtered__&&!s?new ye(this):this.clone();return m.__filtered__?m.__takeCount__=tt(c,m.__takeCount__):m.__views__.push({size:tt(c,Ue),type:r+(m.__dir__<0?"Right":"")}),m},ye.prototype[r+"Right"]=function(c){return this.reverse()[r](c).reverse()}}),Rt(["filter","map","takeWhile"],function(r,s){var c=s+1,m=c==W||c==Y;ye.prototype[r]=function(g){var S=this.clone();return S.__iteratees__.push({iteratee:ne(g,3),type:c}),S.__filtered__=S.__filtered__||m,S}}),Rt(["head","last"],function(r,s){var c="take"+(s?"Right":"");ye.prototype[r]=function(){return this[c](1).value()[0]}}),Rt(["initial","tail"],function(r,s){var c="drop"+(s?"":"Right");ye.prototype[r]=function(){return this.__filtered__?new ye(this):this[c](1)}}),ye.prototype.compact=function(){return this.filter(mt)},ye.prototype.find=function(r){return this.filter(r).head()},ye.prototype.findLast=function(r){return this.reverse().find(r)},ye.prototype.invokeMap=me(function(r,s){return typeof r=="function"?new ye(this):this.map(function(c){return Yr(c,r,s)})}),ye.prototype.reject=function(r){return this.filter(us(ne(r)))},ye.prototype.slice=function(r,s){r=de(r);var c=this;return c.__filtered__&&(r>0||s<0)?new ye(c):(r<0?c=c.takeRight(-r):r&&(c=c.drop(r)),s!==n&&(s=de(s),c=s<0?c.dropRight(-s):c.take(s-r)),c)},ye.prototype.takeRightWhile=function(r){return this.reverse().takeWhile(r).reverse()},ye.prototype.toArray=function(){return this.take(Ue)},qt(ye.prototype,function(r,s){var c=/^(?:filter|find|map|reject)|While$/.test(s),m=/^(?:head|last)$/.test(s),g=E[m?"take"+(s=="last"?"Right":""):s],S=m||/^find/.test(s);g&&(E.prototype[s]=function(){var x=this.__wrapped__,I=m?[1]:arguments,D=x instanceof ye,O=I[0],k=D||ue(x),H=o(function(ge){var Se=g.apply(E,pn([ge],I));return m&&q?Se[0]:Se},"interceptor");k&&c&&typeof O=="function"&&O.length!=1&&(D=k=!1);var q=this.__chain__,Z=!!this.__actions__.length,re=S&&!q,fe=D&&!Z;if(!S&&k){x=fe?x:new ye(this);var ie=r.apply(x,I);return ie.__actions__.push({func:os,args:[H],thisArg:n}),new _t(ie,q)}return re&&fe?r.apply(this,I):(ie=this.thru(H),re?m?ie.value()[0]:ie.value():ie)})}),Rt(["pop","push","shift","sort","splice","unshift"],function(r){var s=Ni[r],c=/^(?:push|sort|unshift)$/.test(r)?"tap":"thru",m=/^(?:pop|shift)$/.test(r);E.prototype[r]=function(){var g=arguments;if(m&&!this.__chain__){var S=this.value();return s.apply(ue(S)?S:[],g)}return this[c](function(x){return s.apply(ue(x)?x:[],g)})}}),qt(ye.prototype,function(r,s){var c=E[s];if(c){var m=c.name+"";Re.call(cr,m)||(cr[m]=[]),cr[m].push({name:s,func:c})}}),cr[Ji(n,b).name]=[{name:"wrapper",func:n}],ye.prototype.clone=wp,ye.prototype.reverse=Mp,ye.prototype.value=xp,E.prototype.at=Jv,E.prototype.chain=ey,E.prototype.commit=ty,E.prototype.next=ny,E.prototype.plant=iy,E.prototype.reverse=sy,E.prototype.toJSON=E.prototype.valueOf=E.prototype.value=oy,E.prototype.first=E.prototype.head,Ur&&(E.prototype[Ur]=ry),E},"runInContext"),vn=tp();typeof define=="function"&&typeof define.amd=="object"&&define.amd?(Ye._=vn,define(function(){return vn})):On?((On.exports=vn)._=vn,qo._=vn):Ye._=vn}).call(Or)});var vh=ps(er=>{var ho=gh();function Mi(n){return n.reduce(function(e,t,i,a){return e+t})}o(Mi,"sum");function Jt(n){if(ho.isArray(n))return n;if(typeof n=="string")return n.split("");throw Error("Parameter must be a string or array.")}o(Jt,"ensureArr");er.jarowinkler=function(n,e,Q){n=Jt(n),e=Jt(e);var i,a;n.length>e.length?(i=n,a=e):(i=e,a=n);var l=Q||.7,u=.1,d=Math.floor(Math.max(i.length/2-1,0)),f=[],h=[],p,v,y,w,M=0;for(p=0;p<a.length;p++)for(w=a[p],v=Math.max(p-d,0),y=Math.min(p+d+1,i.length);v<y;v++)if(!h[v]&&w===i[v]){f[p]=v,h[v]=!0,M++;break}var b=[],R=[],T,_,C=0,F=0;for(T=0,_=0;T<a.length;T++)f[T]>-1&&(b[_]=a[T],_++);for(T=0,_=0;T<i.length;T++)h[T]&&(R[_]=i[T],_++);for(p=0;p<b.length;p++)b[p]!==R[p]&&C++;for(p=0;p<a.length&&n[p]===e[p];p++)F++;var G=M,Q=C/2;if(G){var le=(G/n.length+G/e.length+(G-Q)/G)/3,X=le<l?le:le+Math.min(u,1/i.length)*F*(1-le);return X}else return 0};er.levenshtein=function(n,e,t){if(n=Jt(n),e=Jt(e),n.length===0)return e.length;if(e.length===0)return n.length;var i=t||{d:1,i:1,s:1},a=[],l=[],u=e.length+1,d,f,h,p;for(d=0;d<u;d++)a[d]=d;for(d=0;d<n.length;d++){for(l[0]=d+1,f=0;f<e.length;f++)h=n[d]===e[f]?0:i.s,l[f+1]=Math.min(l[f]+i.d,a[f+1]+i.i,a[f]+h);for(f=0;f<u;f++)a[f]=l[f]}return p=Math.max(n.length,e.length),(p-l[e.length])/p};er.ngram=function(n,e,t){n=Jt(n),e=Jt(e);var i=n.length,a=e.length,l=t||2,u,d,f,h,p,v,y,w=[],M=[],b=[],R=[],T=[],_=i+1;if(i===0||a===0)return i===a?1:0;if(u=0,i<l||a<l){for(d=0,h=Math.min(i,a);d<h;d++)n[d]===e[d]&&u++;return u/Math.max(i,a)}for(d=0;d<i+l-1;d++)d<l-1?w[d]=0:w[d]=n[d-l+1];for(d=0;d<=i;d++)M[d]=d;for(f=1;f<=a;f++){if(f<l){for(p=0;p<l-f;p++)T[p]=0;for(p=l-f;p<l;p++)T[p]=e[p-(l-f)]}else T=e.slice(f-l,f);for(b[0]=f,d=1;d<=i;d++){for(u=0,v=l,h=0;h<l;h++)w[d-1+h]!==T[h]?u++:w[d-1+h]===0&&v--;y=u/v,b[d]=Math.min(Math.min(b[d-1]+1,M[d]+1),M[d-1]+y)}R=M,M=b,b=R}return 1-M[i]/Math.max(i,a)};er.pearson=function(n,e){var t=[];Object.keys(n).forEach(function(v){e[v]&&t.push(v)});var i=t.length;if(i===0)return 0;var a=Mi(t.map(function(v){return n[v]})),l=Mi(t.map(function(v){return e[v]})),u=Mi(t.map(function(v){return Math.pow(n[v],2)})),d=Mi(t.map(function(v){return Math.pow(e[v],2)})),f=Mi(t.map(function(v){return n[v]*e[v]})),h=f-a*l/i,p=Math.sqrt((u-Math.pow(a,2)/i)*(d-Math.pow(l,2)/i));return p===0?0:h/p};er.jaccard=function(n,e){return n=Jt(n),e=Jt(e),ho.intersection(n,e).length/ho.union(n,e).length};er.tanimoto=function(n,e){n=Jt(n),e=Jt(e);var t=ho.intersection(n,e).length;return t/(n.length+e.length-t)}});var Od={examinedAttributes:["class","src","placeholder","href","checked","disabled","contenteditable","draggable","hidden","inputmode","role","title","name","type","readonly","size","required","multiple","min","max","step","maxlength","alt","loop","controls","poster"]};var gr={attributesToExtract:Od.examinedAttributes,structuralVicinity:{type:"fixed",value:6,useDecayingLimit:!0},visualVicinity:{radius:50,scanStep:10},vicinityFeatureElementsOnly:!0,react:{}};var ri=(a=>(a[a.Query=0]="Query",a[a.Intersection=1]="Intersection",a[a.Interactables=2]="Interactables",a[a.All=3]="All",a))(ri||{});var gs={rect:["width","height"],circle:["cx","cy","r"],ellipse:["cx","cy","rx","ry"],line:["x1","y1","x2","y2"],polygon:["points"],polyline:["points"],path:["d"],text:["x","y"]},vr=class{constructor(e){this.document=e;this.limit=5;this.extractSVG=o(e=>Array.from(e.children).map(t=>{let i=gs[t.tagName.toLowerCase()];if(!i)return null;let a=i.reduce((u,d)=>{let f=t.getAttribute(d);return{...u,[d]:f}},{});return{tagName:t.tagName.toLowerCase(),attributes:a}}).filter(t=>!!t),"extractSVG")}static{o(this,"SVGsExtractor")}extract(e){let t=e.matches("svg")?[e]:e.querySelectorAll("svg");if(!(!t.length||t.length>this.limit))return Array.from(t).map(this.extractSVG)}};function vs(n){if(!n)return!1;let e=n.getBoundingClientRect();return e.top<=window.innerHeight&&e.left<=window.innerWidth&&e.bottom>=0&&e.right>=0}o(vs,"isElementInViewport");function ys(n,e=!0){let t=window.getComputedStyle(n),i=t.opacity==="0";return{visible:t.visibility!=="hidden"&&t.display!=="none"&&(!e||!i),isTransparent:i}}o(ys,"isElementVisibleByStyles");function kd(n,e,t=!0,i=!0){let a=n.getBoundingClientRect(),l=e.getBoundingClientRect(),u=a.left<l.right&&a.right>l.left,d=a.top<l.bottom&&a.bottom>l.top;return(!t||u)&&(!i||d)}o(kd,"elementsOverlap");function Fd(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView;if(!t)return null;let i=n.ownerDocument,a={top:0,left:0,right:t.innerWidth||i.documentElement.clientWidth,bottom:t.innerHeight||i.documentElement.clientHeight},l={top:Math.max(e.top,a.top),left:Math.max(e.left,a.left),right:Math.min(e.right,a.right),bottom:Math.min(e.bottom,a.bottom),height:0,width:0};return l.width=l.right-l.left,l.height=l.bottom-l.top,l.width>0&&l.height>0?l:null}o(Fd,"getOverlappingRectangleWithViewport");function Qa(n){try{return getComputedStyle(n).position==="fixed"?!0:!n.parentElement||n.parentElement===document.body?!1:Qa(n.parentElement)}catch(e){return console.error("isAncestorOrSelfFixed",e),!1}}o(Qa,"isAncestorOrSelfFixed");function Xa(n){let{top:e}=n.getBoundingClientRect();return e<0?-e:0}o(Xa,"getHeightOfCroppedElementAboveViewport");function Za(n){let{bottom:e}=n.getBoundingClientRect(),t=window.innerHeight;return e>t?e-t:0}o(Za,"getHeightsOfCroppedElementBelowViewport");function Pd(n){if(!n.src)return!0;let e=window.location.origin;try{let t=new URL(n.src).origin;return e!==t}catch{return!1}}o(Pd,"isCrossOriginIframe");var we=o((n,e=document,{excludeCrossOriginIframes:t=!1,includeHTML:i=!1}={})=>{let a=[],l=o(d=>{d.querySelectorAll(n).forEach(f=>a.push(f))},"queryElement"),u=o(d=>{l(d);let f=[],h=o(p=>{p.shadowRoot&&f.push(p.shadowRoot),p.childNodes?.forEach(v=>h(v))},"findShadowRoots");h(d),f.forEach(p=>u(p)),d.querySelectorAll("iframe").forEach(p=>{if(!(t&&Pd(p)))try{let v=p.contentDocument;v&&u(v)}catch{return}})},"queryNode");return u(e),i&&e instanceof Document&&e.documentElement.matches(n)&&a.push(e.documentElement),a},"querySelectorAllExtended"),Gn=o((n,e)=>{if(n.matches(e))return n;let t=n.slot;if(t){let l=n.parentElement;for(;l;){if(l.shadowRoot){let u=l.shadowRoot.querySelector(`slot[name="${t}"]`);if(u)return Gn(u,e)}l=l.parentElement}return null}let i=n.closest(e);if(i)return i;let a=n.getRootNode();return a.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Gn(a.host,e):null},"closestExtended"),yr=o((n,{flattenShadowRootChildren:e=!1}={})=>{let t=Array.from(n.childNodes);if(n.nodeType===Node.ELEMENT_NODE){let i=n;i.shadowRoot&&(t=t.filter(a=>!a.assignedSlot),e?t=t.concat(Array.from(i.shadowRoot.childNodes)):t.push(i.shadowRoot)),i.tagName.toLowerCase()==="slot"&&t.push(...i.assignedNodes())}return t},"childNodesExtended"),Hd=o(n=>{let e=Array.from(n.children);return n.shadowRoot&&(e=e.filter(t=>!t.assignedSlot),e.push(...Array.from(n.shadowRoot.children))),n.tagName.toLowerCase()==="slot"&&e.push(...n.assignedElements()),e},"childrenExtended");var fn=o(n=>{let e=n.parentElement;if(e)return e;switch(n.nodeType){case Node.ELEMENT_NODE:let i=n;if(i.assignedSlot)return i.assignedSlot;break;case Node.DOCUMENT_FRAGMENT_NODE:return n.host}let t=n.parentNode;if(t)switch(t.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:return t.host;case Node.DOCUMENT_NODE:if(window.document===t)return null;let a=Array.from(window.document.querySelectorAll("iframe")).find(l=>l.contentDocument===t);if(a)return a}return null},"parentElementExtended");var Kt=class{static{o(this,"ScrollHelper")}constructor(e){this.element=e,this.elRect=this.element.getBoundingClientRect()}scrollIntoView(){if(this.getScrollableParentsPositions(),!this.initialScrollPositions.length)return this;if(this.element.scrollIntoView({block:"center",inline:"center"}),!vs(this.element))for(let e of this.initialScrollPositions){let t=e.element.getBoundingClientRect();if(this.elRect.top<t.top||this.elRect.bottom>t.bottom){let i=this.elRect.top-t.top+e.element.scrollTop;e.element.scrollTop=i}}return this}restore(){this.initialScrollPositions.forEach(({element:e,top:t,left:i})=>{try{e.scroll(i,t)}catch(a){console.warn("[ScrollHelper/restore] couldn't restore initial scroll for",{element:e,top:t,left:i},a)}})}getScrollableParentsPositions(){this.initialScrollPositions=[];let e=fn(this.element);for(;e!=null;)(e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth)&&this.initialScrollPositions.push({element:e,top:e.scrollTop,left:e.scrollLeft}),e=fn(e)}};var pt=class n{constructor({target:e=document,disabled:t=!1,log:i=!0,name:a,monitorInput:l=!1}){this.ignoreMutationsWithAttributes=["checksum-data-visible","checksum-data-transparently-visible","checksum-data-visible-under-transparent-element","checksum-data-click-offset","checksum-target-node","checksumid"];this.ignoreMutationsWithAttributeRegexPatterns=["checksum-radial-traverse-.+"];this.ignoreElementsWithClasses=["checksum-dom-cache-ignore"];this.inputEnabledSelectors=["input","textarea","select","[contenteditable=true]"].join(",");this.shouldIgnoreMutationRecord=o(e=>{try{if(e.type==="attributes"&&this.ignoreMutationsWithAttributes.includes(e.attributeName)||e.type==="attributes"&&this.ignoreMutationsWithAttributeRegexPatterns.some(i=>new RegExp("^"+i+"$").test(e.attributeName)))return!0;if(e.type==="attributes"&&e.attributeName==="class"){let i=o(a=>a?a.split(" ").filter(l=>![":hover","rrweb-paused"].includes(l)).sort().join(" "):"","standardizeClassName");return i(e.oldValue)===i(e.target.className)}let t=o(i=>this.ignoreElementsWithClasses.some(a=>i.classList.contains(a)),"doesElementHaveIgnoredClass");if(e.type==="childList"&&Array.from(e.addedNodes).every(i=>t(i))&&Array.from(e.removedNodes).every(i=>t(i)))return!0}catch{}return!1},"shouldIgnoreMutationRecord");this.monitoredTextElements=[];this.monitorInputEnabledElement=o(e=>{e.addEventListener("input",t=>{this.invalidate()})},"monitorInputEnabledElement");this.target=e,this.name=a,this.disabled=t,this.logActivity=i,this.monitorInput=l,this.startObserver()}static{o(this,"DOMMutationDependentCache")}static{this.instances={}}static getInstance(e,t){let i=this.makeNameForCache(e,t?.flags);n.instances[i]||(n.instances[i]=new n({...t,name:t?.name??e}),t?.initialValue&&n.instances[i].set(t?.initialValue));let a=n.instances[i];return t?.invalidate&&a.invalidate(),a}static invalidateAll(){Object.values(n.instances).forEach(e=>e.invalidate())}static makeNameForCache(e,t){return`${e}${t?JSON.stringify(t):""}`}startObserver(){this.observer=new MutationObserver(e=>{e.every(this.shouldIgnoreMutationRecord)||(this.invalidate(),this.monitorInput&&e.forEach(t=>{t.addedNodes.forEach(i=>{if(i.nodeType===Node.ELEMENT_NODE&&i.nodeType===Node.ELEMENT_NODE){let a=i;a.matches(this.inputEnabledSelectors)||a.isContentEditable?this.monitorInputEnabledElement(a):Array.from(a.querySelectorAll("*")).filter(l=>l.matches&&l.matches(this.inputEnabledSelectors)||l.isContentEditable).forEach(this.monitorInputEnabledElement)}})}))}),this.observer.observe(this.target,{childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0}),this.monitorInput&&this.startInputMonitoring()}startInputMonitoring(){this.monitoredTextElements=we(this.inputEnabledSelectors),this.monitoredTextElements.forEach(this.monitorInputEnabledElement)}get(){return this.log("get","has cache:",!!this.cache),this.cache}set(e){this.disabled||(this.cache=e)}hasCache(){return this.log("hasCache",!!this.cache),!!this.cache}invalidate(){this.set(void 0)}log(...e){this.logActivity&&console.log(`[DOMMutationDependentCache] ${this.name?`[${this.name}]`:""}:`,...e)}};function gt(n,e){try{if(!n.ownerDocument)return!1;let t=n.ownerDocument.defaultView;return t?n instanceof t[e]||n instanceof t.top?.[e]:!1}catch{}return!1}o(gt,"isNodeInstanceOf");function Er(n,e){return e??n?.ownerDocument?.defaultView??window}o(Er,"getElementWindow");function rt(n,e={}){let{markTransparentElementsAsHidden:t=!0,markElementsHiddenByTransparentElementAsVisible:i=!1,scrollIntoView:a=!0,useCache:l=!1}=e;if(l){let y=gS(n,{markTransparentElementsAsHidden:t,markElementsHiddenByTransparentElementAsVisible:i,scrollIntoView:a});if(y)return y}let u,d={isHidden:!0},f=o((y,w=!0)=>(w&&u&&u.restore(),l&&vS(n,y,{markTransparentElementsAsHidden:t,markElementsHiddenByTransparentElementAsVisible:i}),{...d,...y}),"prepareResult");if(!n)return f({isHidden:!0});n=n.tagName==="OPTION"&&(n.closest("select")||n.closest("datalist"))||n;let{visible:h,isTransparent:p}=ys(n,t);if(d.isTransparent=p,!h)return f({isHidden:!0});if(yS(n,{scrollIntoView:a}))return f({isHidden:!0});try{let M=function(C){let F=C;for(;F;){if(F.nodeType===11)return[F,F.ownerDocument.defaultView];F=F.parentNode}};var v=M;o(M,"findShadowDocument"),a&&(u=new Kt(n).scrollIntoView());let y=Fd(n);if(!y)return f({isHidden:!0});let w=[[y.width/2,y.height/2,!0],[Math.max(y.width*.01,1),Math.max(y.height*.01,1)],[Math.min(y.width*.99,y.width-1),Math.max(y.height*.01,1)],[Math.max(y.width*.01,1),Math.min(y.height*.99,y.height-1)],[Math.min(y.width*.99,y.width-1),Math.min(y.height*.99,y.height-1)]],[b,R]=M(n)??[n.ownerDocument,n.ownerDocument.defaultView],T,_=Er(n);if(_&&n instanceof _.HTMLInputElement&&n.id&&n.type&&["checkbox","radio"].includes(n.type)){let C=we(`label[for="${n.id}"]`,b);C.length&&(T=C[0])}for(let[C,F,G]of w){let Q=y.left+C>=0&&y.left+C<=R.innerWidth?y.left+C:C,le=y.top+F>=0&&y.top+F<=R.innerHeight?y.top+F:F,X=b.elementFromPoint(Q,le);if(X===n)return f({isHidden:!1,clickOffset:G?void 0:{x:C,y:F}});if(!X)continue;if(G===!0&&X.shadowRoot)return f(rt(X,e));let se=X;for(;se;){if(se===n||T&&T===se)return f({isHidden:!1,clickOffset:G?void 0:{x:C,y:F}});se=fn(se)}if(i)try{let he=b.elementsFromPoint(Q,le);for(let V of he){if(V===n)return f({isHidden:!1,clickOffset:G?void 0:{x:C,y:F},isBehindTransparentElement:!0});let W=R.getComputedStyle(V),K=V.getBoundingClientRect();if(!(W.opacity==="0"||W.visibility==="hidden"||/rgba\(\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*\d{1,3}\s*,\s*0\s*\)/.test(W.backgroundColor))||K.width>y.width*1.2||K.height>y.height*1.2)break}}catch(he){console.error("Error while checking transparent elements over interactable",he)}}return u&&(u.restore(),u=void 0),T?rt(T,e):f({isHidden:!0})}catch(y){throw y}}o(rt,"isElementHidden");var Wd=o(n=>{let e=pt.getInstance("isElementHidden",{log:!1,flags:n}),t=e.get();return t||(t=new Map,e.set(t)),t},"getIsHiddenMapFromCache");function gS(n,e={}){let t=Wd(e);return t.has(n)?t.get(n):void 0}o(gS,"getIsElementHiddenFromCache");var vS=o((n,e,t={})=>{Wd(t).set(n,e)},"setIsElemenetHiddenInCache");function yS(n,{scrollIntoView:e=!0}={}){let t=n.parentElement,i=window.getComputedStyle(n);if(i.position==="absolute"||i.position==="fixed")return!1;let a;e&&(a=new Kt(n).scrollIntoView());let l=o(d=>(a&&a.restore(),d),"restoreAndReturn"),u=Er(n);if(!u)return l(!1);for(;t;){if(!(t instanceof u.Element))return l(!1);let d=window.getComputedStyle(t);if(d.position==="absolute"||d.position==="fixed")return l(!1);let f=d.overflowX==="hidden",h=d.overflowY==="hidden";if((f||h)&&!kd(t,n,f,h))return l(!0);t=t.parentElement}return l(!1)}o(yS,"isHiddenByOverflow");var $n=o(n=>rt(n,{useCache:!0}).isHidden,"getIsElementHidden"),Es=o((n,e)=>{let t=n.tagName.toLowerCase();switch(t){case"img":case"video":case"audio":return{type:0,tag:t,src:n.getAttribute("src"),size:{width:n.clientWidth,height:n.clientHeight},screenSize:{width:window.innerWidth,height:window.innerHeight},isRoot:e,isHidden:$n(n)};case"svg":return{type:6,tag:t,components:new vr(document).extract(n)[0],isRoot:e,isHidden:$n(n)};case"a":return{type:2,tag:t,href:n.getAttribute("href"),text:n.innerText,isRoot:e,isHidden:$n(n)};case"button":return{type:3,tag:t,text:n.innerText,buttonType:n.getAttribute("type")||"button",isRoot:e,isHidden:$n(n)};case"input":return{type:4,tag:t,inputType:n.getAttribute("type"),placeholder:n.getAttribute("placeholder"),isRoot:e,isHidden:$n(n)};case"table":case"form":case"textarea":case"iframe":case"select":return{type:1,tag:t,isRoot:e,isHidden:$n(n)}}if(n.innerHTML.trim()===n.innerText&&n.innerHTML.length)return{type:5,tag:t,text:ES(n.innerHTML),isRoot:e,isHidden:$n(n)}},"extractFeatureFromElement"),ES=o(n=>n.length>256?n.substring(0,256)+"...":n,"shortenText");var ii=o(n=>Object.keys(n||{}).reduce((e,t)=>{let i=n[t];return i&&(e[t]=i),e},{}),"sanitizeStaticMetadata"),Bd=o((n,e)=>{let t=ii(n),i=ii(e),a=o(d=>!d||Object.keys(d).length===0,"isEmpty");if(a(t)&&a(i))return!0;if(a(t)||a(i))return!1;let l=Object.keys(t).sort(),u=Object.keys(i).sort();if(l.length!==u.length||!l.every((d,f)=>d===u[f]))return!1;for(let d in t)if(t[d]!==i[d])return!1;return!0},"staticDataMatch"),bs=o(n=>{let e=ii(n);return!(!e||!Object.keys(e).length)},"hasStaticData");var Vd=o((n,e,{contains:t=!1,matchWholeWord:i=!1}={})=>(e=e.replaceAll(`
`,"\\A ").replaceAll('"','\\"'),t?i?`[${n}="${e}"],[${n}*="${e} "],[${n}*=" ${e} "],[${n}*=" ${e}"]`:`[${n}*="${e}"]`:`[${n}="${e}"]`),"buildAttributeEqualityQuerySelector"),el=o((n,e,{contains:t=!1,matchWholeWord:i=!1}={})=>t?i?n===e||n.startsWith(e)||n.includes(` ${e} `)||n.endsWith(e):n.includes(e):n===e,"checkStringEquality");var br=class{constructor(e){this.document=e;this.elementsByQueryCache={}}static{o(this,"AttributesExtractor")}getElementsByQuery(e){return this.elementsByQueryCache[e]||(this.elementsByQueryCache[e]=we(e,this.document)),this.elementsByQueryCache[e]}extract({element:e,setClass:t,setAttribute:i,getElementsInStructuralVicinity:a,getElementsInVisualVicinity:l}){for(let u=0;u<e.attributes.length;++u){let{name:d,value:f}=e.attributes[u];if(gr.attributesToExtract.includes(d)&&typeof f=="string"){if(d==="class"){f.split(" ").forEach(h=>{h.length&&t(h,this.processAttribute({element:e,getElementsInStructuralVicinity:a,getElementsInVisualVicinity:l},d,h,{contains:!0,matchWholeWord:!0}))});continue}i(d,this.processAttribute({element:e,getElementsInStructuralVicinity:a,getElementsInVisualVicinity:l},d,f))}}}processAttribute({element:e,getElementsInStructuralVicinity:t,getElementsInVisualVicinity:i},a,l,u={}){let d=this.getElementsByQuery("*"),f=Vd(a,l,u),h=this.getElementsByQuery(f),p=this.getElementsByQuery(`${e.tagName.toLowerCase()}`),v=h.filter(R=>R.tagName===e.tagName),y=t?t():[],w=y.filter(R=>R.element.attributes[a]&&el(R.element.attributes[a].value,l,u)),M=i?i():[],b=M.filter(R=>R.element.attributes[a]&&el(R.element.attributes[a].value,l,u));return{value:l,globalUniqueness:1-h.length/d.length,tagUniqueness:1-v.length/p.length,structuralVicinityUniqueness:t?1-w.length/y.length:void 0,visualVicinityUniqueness:i?1-b.length/M.length:void 0}}};var Ud=o((n,{tag:e="*"}={})=>we(e).filter(t=>t.innerText?.trim()===n.trim()),"findElementsWithText");function Yt(n){let e=n.getRootNode();switch(e.nodeType){case Node.DOCUMENT_FRAGMENT_NODE:return bS(n,e);default:return n.innerText}}o(Yt,"getInnerText");function bS(n,e){let t=n.querySelectorAll("slot");if(!t.length)return n.innerText;let i=n.cloneNode(!0),a=i.querySelectorAll("slot");return t.forEach((l,u)=>{let d=l.assignedNodes();a[u].innerText=d.map(f=>{switch(f.nodeType){case Node.TEXT_NODE:return f.textContent;case Node.ELEMENT_NODE:return f.innerText}}).filter(f=>!!f).join(`
`)}),i.innerText.trim()}o(bS,"extractInnerTextForElementInShadowDOM");var Ss=class{constructor(e){this.el=null;this.serializedElement="";this.attributes={};this.classes={};this.getElementsInStructuralVicinity=o(()=>this.structuralVicinityData.elementsInStructuralVicinity,"getElementsInStructuralVicinity");this.setElementStructuralVicinityData=o(e=>{this.structuralVicinityData=e},"setElementStructuralVicinityData");this.setElementVisualVicinityData=o(e=>{this.visualVicinityData=e},"setElementVisualVicinityData");this.getElementsInVisualVicinity=o(()=>this.visualVicinityData,"getElementsInVisualVicinity");this.setSerializedElement=o(e=>{this.serializedElement=e},"setSerializedElement");this.setAttribute=o((e,t)=>{this.attributes[e]=t},"setAttribute");this.setClass=o((e,t)=>{this.classes[e]=t},"setClass");this.setInnerText=o(e=>{this.innerText=e},"setInnerText");this.setStyle=o(e=>{this.style=e},"setStyle");this.setTag=o(e=>{this.tag=e},"setTag");this.setReact=o(e=>{this.react=e},"setReact");this.setInnerFeatures=o(e=>{this.innerFeatures=e},"setInnerFeatures");this.setPositioning=o(e=>{this.positioning=e},"setPositioning");this.setSVGs=o(e=>{this.svgs=e},"setSVGs");this.el=e,this.attributesExtractor=new br(this.el.ownerDocument)}static{o(this,"ESRAElementMetadataBuilder")}serialize(){}getSerializedElement(){return this.serializedElement}get element(){return this.el}getAttributes(){return this.attributes}getClasses(){return this.classes}getStyle(){return this.style}getInlineStyle(){return this.style.inline}getComputedStyle(){return this.style.computed}getTag(){return this.tag}getInnerFeatures(){return this.innerFeatures}getInnerText(){return this.innerText}getSVGs(){return this.svgs}toMetadata(){return{structuralVicinity:this.makeStructuralVicinityMetadata(),visualVicinity:this.makeVisualVicinityMetadata(),serializedElement:this.getSerializedElement(),attributes:this.getAttributes(),classes:this.getClasses(),innerText:this.getInnerText(),tag:this.getTag(),style:this.getStyle(),innerFeatures:this.getInnerFeatures(),staticCandidates:this.extractStaticCandidates(),positioning:this.positioning,svgs:this.getSVGs()}}extractStaticCandidates(){return ii({text:this.extractStaticTextCandidate(),labeled:this.extractLabeled(),labeling:this.extractLabeling(),svgTitle:this.extractSVGTitle()})}makeVicinityMetadata(e,t){return e.reduce((i,a)=>{let{qualified:l,feature:u}=this.isVicinityQualifiedElement(a.element);if(!l)return i;let d={},f={};this.attributesExtractor.extract({element:a.element,setClass:o((p,v)=>d[p]=v,"setClass"),setAttribute:o((p,v)=>f[p]=v,"setAttribute")});let h={tag:a.element.tagName.toLowerCase(),classes:d,attributes:f,text:this.extractTextForMetadata(a.element),feature:u,relativePosition:this.element.compareDocumentPosition(a.element),...t(a)};return i.push(h),i},[])}makeStructuralVicinityMetadata(){return this.makeVicinityMetadata(this.getElementsInStructuralVicinity(),e=>({position:e.position}))}makeVisualVicinityMetadata(){return this.makeVicinityMetadata(this.getElementsInVisualVicinity(),e=>({position:[e.position],distance:e.distance}))}isVicinityQualifiedElement(e){if(e===this.element)return{qualified:!1};if(!gr.vicinityFeatureElementsOnly)return{qualified:!0};let t=Es(e);return{qualified:!!t,feature:t}}extractTextForMetadata(e){if(e.innerHTML!==e.innerText)return;let t=e.innerHTML;return t.length>256?t.substring(0,256)+"...":t}extractStaticTextCandidate(){switch(this.tag){case"input":case"textarea":return this.attributes?.placeholder?.value;default:return this.innerText?.content}}extractLabeling(){if(this.element.tagName.toLowerCase()==="label")return Yt(this.element);let e=Gn(this.element,"label");if(e&&this.attributeExists(e.getAttribute("for")))return Yt(e);try{if(this.element.id&&this.element.id.length&&we(`[aria-labelledby="${this.element.id}"]`).length)return Yt(this.element)}catch(t){console.error("extractLabeling error",t)}}extractLabeled(){let e=this.element.getAttribute("aria-label");if(this.attributeExists(e))return e;let t=Gn(this.element,"label");if(t&&!this.attributeExists(t.getAttribute("for")))return Yt(t);if(this.element.id&&this.element.id.length)try{let a=we(`label[for=${this.element.id}]`);if(a.length)return Yt(a[0])}catch{return}let i=this.element.getAttribute("aria-labelledby");if(this.attributeExists(i)){let a=we(i.split(" ").map(l=>`#${l}`).join(","));if(a.length)return Yt(a[0])}}extractSVGTitle(){try{if(this.element.tagName.toLowerCase()!=="svg")return;let e=this.element.querySelector("title");return e?Yt(e):void 0}catch(e){console.error("extractSVGTitle error",e)}}attributeExists(e){return e&&e.length>0}};var ws=class{constructor(e,t){this.structuralVicinityData={elementsInStructuralVicinity:[],html:""};this.element=e,this.config=t}static{o(this,"StructuralVicinityExtractor")}getInitialLimit(){switch(this.config.type){case"ratio":return document.querySelectorAll("*").length*this.config.value;case"fixed":return this.config.value}}calculate(){let e=Date.now().toString();return this.structuralVicinityData.html=this.populateStructuralVicinity(this.element,["element"],{runId:e,step:0,limit:this.getInitialLimit()}),this.structuralVicinityData.elementsInStructuralVicinity.forEach(t=>t.element.attributes.removeNamedItem(`checksum-radial-traverse-${e}`)),this.structuralVicinityData}populateStructuralVicinity(e,t,i){let{runId:a,step:l,limit:u}=i;if(!e||l>u||e.attributes[`checksum-radial-traverse-${a}`]!==void 0)return"";this.structuralVicinityData.elementsInStructuralVicinity.push({element:e,position:t}),e.setAttribute(`checksum-radial-traverse-${a}`,l.toString());let h={runId:a,step:l+1,limit:this.config.useDecayingLimit?u-1:u},p=this.populateStructuralVicinity(fn(e),[...t,"parent"],h),v=this.populateStructuralVicinity(e.previousElementSibling,[...t,"left-sibling"],h),y=this.populateStructuralVicinity(e.nextElementSibling,[...t,"right-sibling"],h),w=[];Hd(e).map((b,R)=>w.push(this.populateStructuralVicinity(b,[...t,"child"],h)));let M=v+e.outerHTML.replace(e.innerHTML,w.join(""))+y;return p&&!p.includes(e.outerHTML)?p.replace("></",`>${M}</`):p?p.replace(e.outerHTML,M):M}};var si=class{constructor(e,t){this.document=e;this.config=t;this.debug=!1;this.sampleBoxColors={0:"green",1:"orange",2:"red",3:"blue"}}static{o(this,"VisualVicinityExtractor")}calculate(e){let t=[],i=this.config.radius,a=this.config.scanStep,l=e.getBoundingClientRect();for(let u=l.left-i;u<l.left+l.width+i;u+=a)for(let d=l.top-i;d<l.top+l.height+i;d+=a){let f=u+a/2,h=d+a/2;if(this.doesRectContain(l,{left:u,top:d,right:u+a,bottom:d+a})){this.addTrace(f,h,a,3);continue}let p=this.document.elementFromPoint(f,h);if(!p)continue;let v=p.getBoundingClientRect();if(v.width>i*2&&v.height>i*2||this.doesRectContain(v,l)){this.addTrace(f,h,a,2);continue}if(!!t.find(({element:b})=>b===p)){this.addTrace(f,h,a,1);continue}let{position:w,distance:M}=this.getPosition(l,v);t.push({element:p,position:w,distance:M}),this.addTrace(f,h,a,0)}return t}getPosition(e,t){let{x:i,y:a}=this.getCenter(t),{x:l,y:u}=this.getCenter(e),d=o(()=>{let h=i-l,p=a-u;return h<0&&p<0?"top-left":h>0&&p<0?"top-right":h<0&&p>0?"bottom-left":h>0&&p>0?"bottom-right":h===0&&p<0?"top":h===0&&p>0?"bottom":h<0&&p===0?"left":h>0&&p===0?"right":"center"},"calcPosition");return{distance:o(()=>Number(Math.sqrt(Math.pow(l-i,2)+Math.pow(u-a,2)).toFixed(2)),"calcDistance")(),position:d()}}getCenter(e){return{x:e.width/2+e.left,y:e.height/2+e.top}}addTrace(e,t,i,a){if(!this.debug)return;let l=this.document.createElement("xdiv");l.setAttribute("style",`position: absolute; width: ${i}px; height: ${i}px; top: ${t}px; left: ${e}px; background: ${this.sampleBoxColors[a]}; z-index: 999999999999;opacity:0.4`),this.document.getElementsByTagName("body")[0].prepend(l)}doesRectContain(e,t){return t.left>=e.left&&t.right<=e.right&&t.top>=e.top&&t.bottom<=e.bottom}doRectsOverlap(e,t){let i=e.right<t.left,a=e.left>t.right,l=e.top>t.bottom,u=e.top<t.top;return!(i||a||l||u)}};window.vve=new si({radius:50,scanStep:10});var oi=ni(Gd());window.resq$=oi.resq$;window.resq$$=oi.resq$$;var nl=class{static{o(this,"Provider")}extract(e){let t=this.findParentComponent(e,{ignoreBaseElement:!0});return{component:t,parentComponent:this.findParentComponent(t.node)}}findParentComponent(e,{ignoreBaseElement:t=!1,baseElement:i=void 0}={}){let a=(0,oi.resq$$)("*",e.parentElement).find(l=>l.children.length===1&&l.children[0].node===e);return i=i??e,a&&(t||a.node!==i)?this.parseRESQresult(a):this.findParentComponent(e.parentElement,{baseElement:i,ignoreBaseElement:t})}parseRESQresult(e){if(!e)return;let t=o(i=>{switch(typeof i){case"string":return[i];case"object":return Array.isArray(i)?i.map(t):Object.keys(i)}},"parseState");return{name:e.name,node:e.node,isFragment:e.isFragment,stateTokens:t(e.state),propsNames:Object.keys(e.props),hasChildren:!!e.children.length}}},$d=new nl;var rl=class{static{o(this,"Provider")}extract(e){return{component:void 0,parentComponent:void 0}}},b0=new rl;var xs=class{constructor(e,t){this.provider=$d;this.element=e,this.config=t}static{o(this,"ReactMetadataExtractor")}extract(){return this.provider.extract(this.element)}};var Ts=class{constructor(e){this.document=e;this.tagBaseComputedStyle={}}static{o(this,"StyleExtractor")}extract({element:e,setStyle:t}){let i=e.tagName.toLowerCase();try{if(!this.tagBaseComputedStyle[i]){let a=this.document.createElement(i);this.document.getElementsByTagName("body")[0].prepend(a),this.tagBaseComputedStyle[i]=this.sanitzieStyle(window.getComputedStyle(a)),a.remove()}}catch(a){if(console.error("Failed to extract style for tag",i,a),!this.tagBaseComputedStyle[i])return}t({inline:this.sanitzieStyle(e.style,{acceptEmptyValue:!1}),computed:this.diffComputedStyle(this.tagBaseComputedStyle[i],this.sanitzieStyle(window.getComputedStyle(e)))})}diffComputedStyle(e,t){return o((l,u)=>Object.keys(u).reduce((d,f)=>l[f]===u[f]?d:{...d,[f]:u[f]},{}),"oneWayDiff")(e,t)}sanitzieStyle(e,{acceptEmptyValue:t=!0}={}){return Object.keys(e).reduce((i,a)=>{if(!isNaN(a))return i;let l=e[a];return!t&&!l||(i[a]=l),i},{})}};var ai=class{constructor(e){this.document=e;this.makeFeatureNode=o((e,t=void 0)=>{let i=e.nodeType===Node.ELEMENT_NODE;return{type:e.nodeType,tag:i?e.tagName.toLowerCase():void 0,feature:i?Es(e,t):void 0,children:[],isRoot:t}},"makeFeatureNode");this.includeRootElements=!0;this.rootElementsTypeExceptions=[5];this.cache=pt.getInstance("innerFeaturesExtractor",{log:!1})}static{o(this,"InnerFeaturesExtractor")}extract(e){let t=[],i=this.makeFeatureNode(e,!0);return this.walk(e,i,t),t}getMapFromCache(){let e=this.cache.get();return e||(e=new Map,this.cache.set(e)),e}getFeatureNodeFromCache(e){let t=this.getMapFromCache();return t.has(e)?t.get(e):void 0}addFeatureNodeToCache(e,t){let i=this.getMapFromCache();i.set(e,t),this.cache.set(i)}walk(e,t,i){let a=!1;yr(e).forEach(u=>{let d=this.getFeatureNodeFromCache(u)??this.makeFeatureNode(u),f=this.walk(u,d,i);f&&t.children.push(d),a||=f});let l=!!t.feature;return l&&(!t.isRoot||this.shouldIncludeRootNode(t))&&i.push(t.feature),this.addFeatureNodeToCache(e,t),l||a}shouldIncludeRootNode(e){return!(!this.includeRootElements||this.rootElementsTypeExceptions.includes(e.type))}};window.inner_features_extractor=new ai;var Is=class{constructor(e){this.document=e}static{o(this,"InnerTextExtractor")}extract(e){return{content:Yt(e)??void 0}}};var Cs=class{constructor(e){this.document=e}static{o(this,"PositioningExtractor")}extract(e){let{top:t,bottom:i,left:a,right:l}=e.getBoundingClientRect(),u=document.documentElement.scrollHeight,d=document.documentElement.scrollWidth;return{viewport:{size:{height:window.innerHeight,width:window.innerWidth},element:{top:this.normalize(t,window.innerHeight),bottom:this.normalize(i,window.innerHeight),left:this.normalize(a,window.innerWidth),right:this.normalize(l,window.innerWidth)}},document:{size:{height:u,width:d},element:{top:this.normalize(t+window.scrollY,u),bottom:this.normalize(i+window.scrollY,u),left:this.normalize(a+window.scrollX,d),right:this.normalize(l+window.scrollX,d)}}}}normalize(e,t){return e/t}};var lt=class{constructor(e,t){this.stats={serializeElement:0,populateElementsInStructuralVicinity:0,populateElementsInVisualVicinity:0,extractAttributes:0,extractInnerText:0,extractStyle:0,extractTag:0,extractInnerFeatures:0,extractPositioning:0,extractSVGComponents:0,final:0};this.xmlSerializer=new XMLSerializer,this.document=e,this.config=t??gr,this.visualVicinityExtractor=new si(this.document,this.config.visualVicinity),this.styleExtractor=new Ts(this.document),this.innerFeaturesExtractor=new ai(this.document),this.innerTextExtractor=new Is(this.document),this.positioningExtractor=new Cs(this.document)}static{o(this,"ESRAElementMetadataExtractor")}isSameDocument(e){return this.document===e}extract(e){let t=new Kt(e).scrollIntoView(),i=Date.now(),a=new Ss(e);return this.serializeElement(a),this.stats.serializeElement+=Date.now()-i,i=Date.now(),this.populateElementsInStructuralVicinity(a),this.stats.populateElementsInStructuralVicinity+=Date.now()-i,i=Date.now(),this.populateElementsInVisualVicinity(a),this.stats.populateElementsInVisualVicinity+=Date.now()-i,i=Date.now(),this.extractAttributes(a),this.stats.extractAttributes+=Date.now()-i,i=Date.now(),this.extractInnerText(a),this.stats.extractInnerText+=Date.now()-i,i=Date.now(),this.extractStyle(a),this.stats.extractStyle+=Date.now()-i,i=Date.now(),this.extractTag(a),this.stats.extractTag+=Date.now()-i,i=Date.now(),this.extractInnerFeatures(a),this.stats.extractInnerFeatures+=Date.now()-i,i=Date.now(),this.extractPositioning(a),this.stats.extractPositioning+=Date.now()-i,i=Date.now(),this.extractSVGComponents(a),this.stats.extractSVGComponents+=Date.now()-i,i=Date.now(),t.restore(),this.stats.final+=Date.now()-i,a}extractReact({element:e,setReact:t}){t(new xs(e,this.config.react).extract())}extractTag({element:e,setTag:t}){t(e.tagName.toLowerCase())}extractPositioning({element:e,setPositioning:t}){t(this.positioningExtractor.extract(e))}extractSVGComponents({element:e,setSVGs:t}){t(new vr(this.document).extract(e))}serializeElement({element:e,setSerializedElement:t}){}extractAttributes({element:e,setClass:t,setAttribute:i,getElementsInStructuralVicinity:a,getElementsInVisualVicinity:l}){return new br(this.document).extract({element:e,setClass:t,setAttribute:i,getElementsInStructuralVicinity:a,getElementsInVisualVicinity:l})}populateElementsInStructuralVicinity({element:e,setElementStructuralVicinityData:t}){t(new ws(e,this.config.structuralVicinity).calculate())}populateElementsInVisualVicinity({element:e,setElementVisualVicinityData:t}){t(this.visualVicinityExtractor.calculate(e))}extractInnerText({element:e,setInnerText:t}){t(this.innerTextExtractor.extract(e))}extractStyle({element:e,setStyle:t}){return this.styleExtractor.extract({element:e,setStyle:t})}extractInnerFeatures({element:e,setInnerFeatures:t}){t(this.innerFeaturesExtractor.extract(e))}};var xt=class{static{o(this,"PlaywrightElementSelectorGenerator")}async injectSelectorsAndLocators(e,{testIdSelector:t,searchParentFrames:i=!0}={}){let a=e.map(l=>({container:l,removedAttributes:this.stripNodeAttributes(l.element)}));return a=await Promise.all(a.map(async l=>{let{selector:u,locator:d,parentFramesSelectors:f}=await this.getSelectorAndLocator(l.container.element,{testIdSelector:t,searchParentFrames:i,stripAttributes:!0});return{...l,selector:u,locator:d,parentFramesSelectors:f}})),a=await Promise.all(a.map(async l=>{if(!l.removedAttributes.id&&!l.removedAttributes.originalClasses||(this.restoreNodeAttributes(l.container.element,l.removedAttributes),window.playwright.$(l.selector)!==void 0))return l;let u=await this.getSelectorAndLocator(l.container.element,{testIdSelector:t,searchParentFrames:i,stripAttributes:!1});return console.log(`Selector ${l.selector} is not valid, generated new one: ${u.selector}`),Object.assign(l,u),l})),a.map(l=>{let{container:u,selector:d,locator:f,parentFramesSelectors:h}=l;return{...u,selector:d,locator:f,parentFramesSelectors:h}})}stripNodeAttributes(e){let t=e,i,a;t.id&&(i=t.id,t.removeAttribute("id"));try{if(a=t.getAttribute("class"),a&&typeof a=="string"){let l=a.split(" ").filter(u=>!u.startsWith("css-")&&!u.startsWith("jss-")).join(" ");t.setAttribute("class",l)}else a=void 0}catch(l){return console.warn("[playwright selector generator] error with class filtering",l),{}}return{id:i,originalClasses:a}}restoreNodeAttributes(e,t){let i=e,{id:a,originalClasses:l}=t;a&&i.setAttribute("id",a),l&&i.setAttribute("class",l)}getElementWindowPlaywright(e){let t=e.ownerDocument.defaultView;return t!==window&&!t.playwright&&(t.playwright=window.playwright),t.playwright}async safeGetSelectorAndLocator(e){try{return await this.getElementWindowPlaywright(e).generateSelectorAndLocator(e)}catch(t){return console.log("get selector and locator error",e.nodeType,e,`
`,t),{selector:"",locator:""}}}async getSelectorAndLocator(e,{testIdSelector:t,searchParentFrames:i=!0,stripAttributes:a=!0,ignoredIframesSelectors:l=[]}={}){if(!e)return null;let u=this.getIframes({ignoredIframesSelectors:l}),d=i?await this.getParentFramesSelectors(e,u):[],f=e,h=this.getTestAttributeSelector(f,t);if(h)return{selector:h,locator:`locator("${h}")`,parentFramesSelectors:d};let p;a&&(p=this.stripNodeAttributes(e));let{selector:v,locator:y}=await this.safeGetSelectorAndLocator(f);return p&&(this.restoreNodeAttributes(e,p),await this.getElementWindowPlaywright(e).$(v)!==e&&(console.log(`Selector ${v} is not valid, trying to generate new one`),{selector:v,locator:y}=await this.safeGetSelectorAndLocator(f))),y&&d&&d.length>0&&(y=d.map(w=>`frameLocator('${this.escapeSingleQuotes(this.escapeBackslash(w))}')`).join(".")+`.${y}`),{selector:v,locator:y,parentFramesSelectors:d}}async findIframeWindowByParentFrameSelectors(e=[]){let t=window.top;if(e&&e.length>0)for(let i of e)t=(await t.playwright.$(i)).contentWindow;return t}async selector(e,t){let i;try{i=await(await this.findIframeWindowByParentFrameSelectors(t)).playwright.$(e)}catch(a){console.log("selector error",e,a)}return i??this.selectFromFirstIframe(e)}async getParentFramesSelectors(e,t){if(!t.length)return[];let i=e.ownerDocument;if(i===document)return[];let a=t.find(u=>u.contentDocument===i);if(!a)return[];let l=await this.getSelectorAndLocator(a,{searchParentFrames:!1});return[...await this.getParentFramesSelectors(a,t),l.selector]}getIframes({ignoredIframesSelectors:e=[]}={}){let t=o(l=>l.filter(u=>!e.some(d=>u.matches(d))),"makeReturnValue"),i=pt.getInstance("playwrightElementSelectorGeneratorIframes",{log:!1});if(i.hasCache())return t(i.get());let a=we("iframe");return i.set(a),t(a)}getFirstIframeContentWindow(){let e=document.querySelector("iframe");if(!e)return;let t=e.contentWindow;return t.playwright||(t.playwright=window.playwright),t}async selectFromFirstIframe(e){let t=this.getFirstIframeContentWindow();if(t)try{return await t.playwright.$(e)}catch{console.log("selector error",e)}}getTestAttributeSelector(e,t){let i=["data-cy","data-testid","data-test-id","data-test"];for(let l of[t,...i])if(l&&e.getAttribute(l)){let u=`[${l}='${e.getAttribute(l)}']`;if(we(u).length===1)return u;if(we(u).length>1){let f=Array.from(we(u)).indexOf(e);return`${u} >> nth=${f}`}}}replaceAll(e,t,i){return e&&e.replace(new RegExp(t,"g"),i)}escapeSingleQuotes(e){return this.replaceAll(e,"'","\\'")}escapeBackslash(e){return e.replace(/\\/g,"\\\\")}};var qd=[{selector:'path[d="M17.5 13V15.6667C17.5 16.0203 17.3361 16.3594 17.0444 16.6095C16.7527 16.8595 16.357 17 15.9444 17H5.05556C4.643 17 4.24733 16.8595 3.95561 16.6095C3.66389 16.3594 3.5 16.0203 3.5 15.6667V13"] + path[d="M14.6673 6.92057L10.5007 2.75391L6.33398 6.92057"] + path[d="M10.5 2.75391V12.7539"]',description:"export button"},{selector:'path[d="M16.0893 13.1868C16.6838 12.7754 17.1321 12.1858 17.3697 11.503C17.6072 10.8202 17.6216 10.0796 17.4107 9.38816C17.1999 8.69667 16.7748 8.09007 16.1968 7.65594C15.6187 7.2218 14.9177 6.9826 14.1948 6.97285H12.8308C12.6017 6.20011 12.1996 5.48973 11.6549 4.89565C11.1102 4.30157 10.4374 3.83943 9.68735 3.54431C8.93734 3.24918 8.12995 3.12885 7.32648 3.19244C6.52301 3.25603 5.7446 3.50187 5.05036 3.9113C4.35612 4.32072 3.7643 4.88297 3.31985 5.55533C2.8754 6.22769 2.59001 6.99248 2.48535 7.79164C2.38068 8.59079 2.4595 9.40329 2.71582 10.1674C2.97214 10.9316 3.39921 11.6272 3.96461 12.2016"] + path[d="M10.0273 10.0039V16.8241"] + path[d="M13.0585 13.0351L10.0273 10.0039L6.99609 13.0351"]',description:"import button"},{selector:'path[d="M20.4696 21.5303C20.7625 21.8232 21.2373 21.8232 21.5302 21.5303C21.8231 21.2374 21.8231 20.7626 21.5302 20.4697L20.4696 21.5303ZM17.1802 16.1197C16.8873 15.8268 16.4125 15.8268 16.1196 16.1197C15.8267 16.4126 15.8267 16.8874 16.1196 17.1803L17.1802 16.1197ZM18.25 11C18.25 15.0041 15.0041 18.25 11 18.25V19.75C15.8325 19.75 19.75 15.8325 19.75 11H18.25ZM11 18.25C6.99594 18.25 3.75 15.0041 3.75 11H2.25C2.25 15.8325 6.16751 19.75 11 19.75V18.25ZM3.75 11C3.75 6.99594 6.99594 3.75 11 3.75V2.25C6.16751 2.25 2.25 6.16751 2.25 11H3.75ZM11 3.75C15.0041 3.75 18.25 6.99594 18.25 11H19.75C19.75 6.16751 15.8325 2.25 11 2.25V3.75ZM21.5302 20.4697L17.1802 16.1197L16.1196 17.1803L20.4696 21.5303L21.5302 20.4697Z"]',description:"search"},{selector:'path[d="M3.75 10H16.875"] + path[d="M8.125 5L3.125 10L8.125 15"]',description:"back"},{selector:'path[d="M3.33301 8H12.6663"] + path[d="M8 3.33331L12.6667 7.99998L8 12.6666"]',description:"forward"},{selector:'path[d="M10 4.16667V15.8333"] + path[d="M4.16699 10H15.8337"]',description:"new or Add button"},{selector:'path[d="M10 10.75C10.4142 10.75 10.75 10.4142 10.75 10C10.75 9.58579 10.4142 9.25 10 9.25C9.58579 9.25 9.25 9.58579 9.25 10C9.25 10.4142 9.58579 10.75 10 10.75Z"] + path[d="M15.833 10.75C16.2472 10.75 16.583 10.4142 16.583 10C16.583 9.58579 16.2472 9.25 15.833 9.25C15.4188 9.25 15.083 9.58579 15.083 10C15.083 10.4142 15.4188 10.75 15.833 10.75Z"] + path[d="M4.16699 10.75C4.58121 10.75 4.91699 10.4142 4.91699 10C4.91699 9.58579 4.58121 9.25 4.16699 9.25C3.75278 9.25 3.41699 9.58579 3.41699 10C3.41699 10.4142 3.75278 10.75 4.16699 10.75Z"]',description:"open menu"},{selector:'path[d="M10 4.16667V15.8333"] + path[d="M4.16699 10H15.8337"]',description:"add filter"},{selector:'path[d="M15 5L5 15"] + path[d="M5 5L15 15"]',description:"close or remove"},{selector:'path[d="M4 6L8 10L12 6"]',description:"open or close dropdown"},{selector:'path[d="M10 17.5C14.1421 17.5 17.5 14.1421 17.5 10C17.5 5.85786 14.1421 2.5 10 2.5C5.85786 2.5 2.5 5.85786 2.5 10C2.5 14.1421 5.85786 17.5 10 17.5Z"] + path[d="M12.5 7.5L7.5 12.5"] + path[d="M7.5 7.5L12.5 12.5"]',description:"clear input"},{selector:'path[d="M3.33301 5.49054H4.81449H16.6663"] + path[d="M7.14286 5.49999V3.99999C7.14286 3.60216 7.29337 3.22063 7.56128 2.93932C7.82919 2.65802 8.19255 2.49998 8.57143 2.49998H11.4286C11.8075 2.49998 12.1708 2.65802 12.4387 2.93932C12.7066 3.22063 12.8571 3.60216 12.8571 3.99999V5.49999M15 5.49999V16C15 16.3978 14.8495 16.7793 14.5816 17.0607C14.3137 17.342 13.9503 17.5 13.5714 17.5H6.42857C6.04969 17.5 5.68633 17.342 5.41842 17.0607C5.15051 16.7793 5 16.3978 5 16V5.49999H15Z"] + path[d="M8.33203 9.23726V13.4039"] + path[d="M11.666 9.23726V13.4039"]',description:"delete"},{selector:'path[d="M13.3334 4L6.00008 11.3333L2.66675 8"]',description:"checked"},{selector:'path[d="M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"]',description:"downward-pointing arrow"},{selector:'path[d="M18.0893 3.08926C18.4147 2.76382 18.4147 2.23618 18.0893 1.91074C17.7638 1.58531 17.2362 1.58531 16.9107 1.91074L18.0893 3.08926ZM9.41074 9.41074L8.82149 10L10 11.1785L10.5893 10.5893L9.41074 9.41074ZM16.9107 1.91074L9.41074 9.41074L10.5893 10.5893L18.0893 3.08926L16.9107 1.91074Z"] + path[d="M17.5 2.5L12.25 17.5L9.25 10.75L2.5 7.75L17.5 2.5Z"]',description:"send"}];var SS=5*60*1e3,Rs=class{constructor(){this.flashingTextElements=[]}static{o(this,"FlashingElementsDetector")}start(){this.stop(),this.flashingTextElements=[],this.observer=new MutationObserver(e=>{e.forEach(t=>{t.addedNodes.length>0&&t.addedNodes.forEach(i=>{i instanceof HTMLElement&&this.includeElement(i)&&setTimeout(()=>{this.flashingTextElements.push(this.processTextElements(i))},1e3)})})}),this.observer.observe(document.body,{childList:!0,subtree:!0}),this.monitoringPeriodTimeout=setTimeout(()=>{this.stop()},SS)}stop(){this.monitoringPeriodTimeout&&(clearTimeout(this.monitoringPeriodTimeout),this.monitoringPeriodTimeout=null),this.observer&&(this.observer.disconnect(),this.observer=null)}get(){let e=this.flashingTextElements.map(i=>i.filter(a=>!a.isConnected||rt(a.parentElement).isHidden)).filter(i=>i.length).map(i=>`<span>${i.map(a=>a.textContent).join("</span><span>")}</span>`),t=new Set(e);return Array.from(t)}stopAndGet(){return this.stop(),this.get()}includeElement(e){return!(e.getElementsByTagName("*").length>50||e.outerHTML.length>5e3)}processTextElements(e){let t=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null),i,a=[];for(;i=t.nextNode();)rt(i.parentNode).isHidden||a.push(i);return a}};var As=class{static{o(this,"AlphaNumericCounter")}constructor(e){this.counter=e??"0"}increment(){let e=this.counter.length-1;for(;e>=0;){let t=this.counter[e];if(t==="9"){this.counter=this.replaceAt(this.counter,e,"a");return}else if(t==="z"){if(this.counter=this.replaceAt(this.counter,e,"0"),e===0){this.counter="1"+this.counter;return}e--}else{this.counter=this.replaceAt(this.counter,e,String.fromCharCode(t.charCodeAt(0)+1));return}}}get(){return this.counter}incrementAndGet(){return this.increment(),this.get()}getAndIncrement(){let e=this.get();return this.increment(),e}replaceAt(e,t,i){return e.substr(0,t)+i+e.substr(t+i.length)}static compare(e,t){let i=e.length,a=t.length;if(i!==a)return i-a;for(let l=0;l<i;l++){let u=e.charCodeAt(l),d=t.charCodeAt(l);if(u!==d)return u-d}return 0}};var li="checksum-ignore",Ds="checksum-get-more-items",zd=20,wS=.7,_s,jd,MS=0,Kd=o((n,{forceIncludeAttribute:e,forceIncludeFileInput:t,forceIncludeElements:i,limit:a})=>{n.excludedElements?.forEach(w=>{w.removeAttribute(li)}),n.excludedElements=new Set;let l=n.element,u=a??Math.min(Math.ceil(l.children.length*.5),l.children.length-zd),d=o(w=>e&&(w.hasAttribute(e)||Array.from(w.querySelectorAll(`[${e}]`)).length>0)||t&&w.tagName.toLowerCase()==="input"&&w.type==="file"?!0:i.includes(w),"isForceIncluded"),f=o(w=>{let M=0;if(n.elementsToKeep.includes(w))return M;let b=il(w);b.length>=n.attributes.length&&M++;let R=b.filter(C=>n.attributes.includes(C)).length;R===n.attributes.length?M+=3:R>0&&M++;let _=sl(w).filter(C=>n.classes.includes(C)).length;return _===n.classes.length?M+=2:_>0&&M++,M},"scoreElement"),h=Array.from(l.children).filter(w=>w.tagName===n.tagName&&!d(w)).map(w=>({element:w,score:f(w)})).sort((w,M)=>M.score-w.score),{inViewportElements:p,outOfViewportElements:v}=h.reduce((w,M)=>{let{element:b}=M;return vs(gt(b,"Element")?b:b?.parentElement)?w.inViewportElements.push(b):w.outOfViewportElements.push(b),w},{inViewportElements:[],outOfViewportElements:[]}),y=o(w=>{for(let M of w)if(n.excludedElements.add(M),n.excludedElements.size===u)return!0},"excludeElements");return y(v)||y(p),xS(n),Array.from(n.excludedElements)},"viewportReducer");function xS(n){let{excludedElements:e,element:t}=n;e.forEach(i=>{i.setAttribute(li,"")}),t._getmoreitemsid||(t._getmoreitemsid="gm"+MS++),n.id=t._getmoreitemsid,t.setAttribute(Ds,n.id)}o(xS,"markTemplateElements");function il(n){return Array.from(n.attributes).filter(e=>!e.name.startsWith("checksum")).map(e=>e.name.replace(/[0-9]/g,""))}o(il,"mapAttributes");function sl(n){return n.className?.split(" ").filter(e=>e)??[]}o(sl,"getElementClasses");function ol(n=document.body,{nodeRepetitionsThreshold:e=zd}={}){try{return console.time("bettertemplatize"),_s=new Set,Yd(n,e),console.timeEnd("bettertemplatize"),console.log("[bettertemplatize] templates found:",Array.from(_s)),Array.from(_s)}catch(t){return console.error("[bettertemplatize] failed during template processing:",t.message),[]}}o(ol,"bettertemplatize");function Yd(n,e){Array.from(n.children).forEach(t=>{if(t instanceof SVGElement)return;let i=t.children.length;if(i>=e){let a=Array.from(t.children),l=Math.ceil(i*wS);for(let u=0;u<i;u++){let d=0,f=a.slice(0,u);for(let h=u+1;h<i&&d+i-h>=l;h++)try{if(Qd(a[u],a[h])){if(d++,d>=l){_s.add({element:t,...jd,elementsToKeep:f});return}}else f.push(a[h])}catch{return}}}Yd(t,e)})}o(Yd,"traverse");var TS=.8,IS=.5,CS=.8,RS=5;function Qd(n,e,t=1){let i,a,l=o(b=>(b&&(jd={attributes:i,classes:a,tagName:n.nodeName}),b),"response");if(n.nodeType!==e.nodeType||n instanceof SVGElement||e instanceof SVGElement)return l(!1);if(n.nodeType===Node.TEXT_NODE)return l(!0);if(n.nodeType!==Node.ELEMENT_NODE)return l(!1);let u=n,d=e;if(u.tagName.toLowerCase()!==d.tagName.toLowerCase())return l(!1);let f=il(u),h=il(d);if(i=f.filter(b=>h.includes(b)),i.length/Math.max(f.length,h.length)<TS)return l(!1);let p=sl(u),v=sl(d);if(a=p.filter(b=>v.includes(b)),a.length/Math.max(p.length,v.length)<IS)return l(!1);if(t>=RS)return l(!0);if(u.shadowRoot&&!d.shadowRoot||!u.shadowRoot&&d.shadowRoot)return l(!1);let y=Array.from(u.shadowRoot?u.shadowRoot.children:u.children),w=Array.from(d.shadowRoot?d.shadowRoot.children:d.children);if(y.length===0&&w.length===0)return l(!0);let M=0;for(let b=0;b<Math.min(y.length,w.length);b++)Qd(y[b],w[b],t+1)&&M++;return M/Math.max(y.length,w.length)<CS?l(!1):l(!0)}o(Qd,"areSimilar");var xn=o(n=>{},"consoleTime"),Tn=o(n=>{},"consoleTimeEnd");var ci=["button","select","input","textarea","option","a","[role=button]","[role=checkbox]","[role=radio]","[role=link]","[type=button]","[aria-disabled=false]",'[id^="react-select"]',"label[for]"],Xd=["pointer","grab","text","vertical-text","zoom-in","zoom-out","help"],Zd=["onClick","onMouseDown","onKeyDown","onKeyPress","onInput","onSelect","onDoubleClick","onDragStart","onDrag","onDragEnd","onDragOver","onDrop","onToggle","onMouseEnter"],al=["onclick","onmousedown","onkeydown","onkeypress","oninput","onselect","ondblclick","ondragstart","ondrag","ondragend","ondragover","ondrop","ontoggle","onmouseenter"];var qn=o((n,e=[])=>{if(!n)return n;let t=window.getComputedStyle(n).cursor,i=o((l,u=()=>!1)=>{let d=l;for(;d;){let f=d.parentElement;if(!f||f.nodeType!==Node.ELEMENT_NODE)return d;if(u(f))break;if(window.getComputedStyle(f).cursor!==t)return d;d=f}},"getClosestElementWithCursor"),a=o(l=>{try{if(l.matches("label[for]")&&!l.matches(ci.concat(e).filter(u=>!!u&&u!=="label[for]").join(","))){let u=l.getAttribute("for");if(!u)return!1;let d=document.getElementById(u);if(!d)return!1;let f=d.getAttribute("type");return f?d.tagName.toLowerCase()==="input"&&["checkbox","radio"].includes(f):!1}}catch(u){console.error("interactableParentIsValid",l,u)}return!0},"interactableParentIsValid");try{if("isContentEditable"in n&&n.isContentEditable)return n;if("closest"in n){let u=Gn(n,ci.concat(e).filter(d=>!!d).join(","));if(u&&a(u)){if(u===n)return n;let d=i(n,f=>f===u);return d||u}}if(["auto","default","context-menu","help","progress","wait"].includes(t))return n;let l=i(n);return l||n}catch(l){return console.error("getCompoundInteractableRootElement",n,l),n}},"getCompoundInteractableRootElement");var Bt=o((n=document,e={},{allowDisabled:t=!1,useDataVisibleAttributes:i=!0,excludeCrossOriginIframes:a=!1,includeCompoundInnerElements:l=!0}={})=>{let u=pt.getInstance("getAllInteractableHTMLElements",{target:n,log:!1}),d=Date.now(),f=o(w=>{let M=w.reduce((b,R)=>!t&&R.state.disabled?b:[...b,R.element],[]);return console.log("[getAllInteractableHTMLElements] done, took",Date.now()-d,"ms"),M},"makeResponse");if(u.hasCache())return f(u.get());let h=we("*",n,{excludeCrossOriginIframes:a});xn("[getAllInteractableHTMLElements] items");let p=h.reduce((w,M)=>{let b="disabled"in M&&!!M.disabled;return M.matches(ci.concat(e.appSpecificInteractableElementsSelectors||[]).filter(T=>!!T).join(","))||Xd.includes(window.getComputedStyle(M).cursor)||M.isContentEditable&&!M.parentElement?.isContentEditable||!e.ignoreEventListenersWhenDeterminingInteractability&&(al.some(T=>M[T])||_S(M))?[...w,{element:M,disabled:b}]:w},[]);Tn("[getAllInteractableHTMLElements] items"),xn("[getAllInteractableHTMLElements] getCompoundInteractableRootElement");let v=p.reduce((w,M)=>{let b=qn(M.element,e.appSpecificInteractableElementsSelectors||[]),R=w.find(T=>T.element===b);return R?!M.disabled&&R.state.disabled&&(R.state.disabled=!1):w.push({element:b,state:{disabled:M.disabled}}),l&&M.element!==b&&AS(M.element)&&w.push({...M,state:{disabled:M.disabled}}),w},[]);Tn("[getAllInteractableHTMLElements] getCompoundInteractableRootElement"),xn("[getAllInteractableHTMLElements] isElementHidden");let y=v.filter(({element:w})=>{if(i){if(!w)return!1;if(w.getAttribute("checksum-data-visible")){let b=w.getAttribute("checksum-data-visible-under-transparent-element")==="true",R=w.getAttribute("checksum-data-transparently-visible")==="true";return!b||R}}return!rt(w,{markTransparentElementsAsHidden:!1}).isHidden});return Tn("[getAllInteractableHTMLElements] isElementHidden"),u.set(y),f(y)},"getAllInteractableHTMLElements"),AS=o(n=>["img","video","audio","a","svg","button"].includes(n.tagName.toLowerCase())?!0:Array.from(n.childNodes).filter(e=>e.nodeType===Node.TEXT_NODE&&e.textContent.trim()).length>0,"hasUniqueFeatures"),_S=o(n=>{if(n._checksum_eventListenerList){let i=n._checksum_eventListenerList;if(al.some(a=>i[a.slice(2)]))return!0}let e=Object.keys(n).find(i=>i.startsWith("__reactFiber")),t=e?n[e]:void 0;return!t||!t.memoizedProps?!1:Zd.some(i=>t.memoizedProps[i])},"hasFrameworkInteractionListener");var Jd=16e3;var DS=!0,ll={markTransparentElementsAsHidden:!1,markElementsHiddenByTransparentElementAsVisible:!0},Sr=class{constructor(){this.checksumIdToRRwebIdMap={};this.flashingElementsDetector=new Rs;this.forceIncludeElements=[];this.preMapReducedHTMLSelectors=!1;this.excludedNodes=0;this.reducePercentage=50;this.defaultReduceHTMLOptions={checkElementInstanceType:!0,extraAllowedAttributes:[],initialChecksumId:void 0,forceIncludeFileInput:!1,forceIncludeAttribute:void 0,invalidateCache:!1,svgIntegration:"aria-label",includeFlashingElements:!0,onForceIncludeElement:o(()=>{},"onForceIncludeElement"),limitNodeRepetitions:50,stopFlashingElementsDetection:!1,assignChecksumIdsToAllElements:!0,assignRrwebIdsToAllElements:!0}}static{o(this,"HTMLReducer")}preprocessDocument(e=document){xn("[preprocessDocument] querySelectorAllExtended");let t=we("*",e,{includeHTML:!0});Tn("[preprocessDocument] querySelectorAllExtended"),xn("[preprocessDocument] isElementHidden");for(let i of t){if(this.shouldIgnoreElement(i))continue;let a=rt(i,ll);i.setAttribute("checksum-data-visible",!a.isHidden&&!a.isTransparent?"true":"false"),!a.isHidden&&a.isTransparent&&i.setAttribute("checksum-data-transparently-visible","true"),a.isBehindTransparentElement&&i.setAttribute("checksum-data-visible-under-transparent-element","true"),a.clickOffset&&i.setAttribute("checksum-data-click-offset",`${a.clickOffset.x};${a.clickOffset.y}`)}Tn("[preprocessDocument] isElementHidden")}setSessionRecorder(e){this.sessionRecorder=e}markInteractableElements(e,t=document,{forceIncludeAttribute:i,forceIncludeFileInput:a}={}){xn("[markInteractableElements]"),this.interactableElements=[];let l=Bt(t,e,{allowDisabled:!0,excludeCrossOriginIframes:!1}),u=o((h,p)=>(h._checksumid||(h._checksumid=p??this.checksumIdCounter.getAndIncrement()),h.setAttribute("checksumid",h._checksumid),h.setAttribute("checksuminteractable","true"),h._checksumid),"setChecksumIdForElement"),d=o((h,p=!1,v)=>{if(this.shouldIgnoreElement(h))return;let y=h.getAttribute("checksum-data-click-offset")?.split(";"),w=y&&{x:parseInt(y[0]),y:parseInt(y[1])},M=u(h,v);this.interactableElements.push({checksumId:M,element:h,forced:p,clickOffset:w})},"handleInteractableElement");l.forEach(h=>d(h));let f=o(h=>{we(h,t,{includeHTML:!0}).forEach(p=>d(p,!0))},"forceIncludeSelector");i&&f(`[${i}]`),a&&f("input[type='file']"),this.forceIncludeElements.filter(({element:h})=>h?.isConnected).forEach(({element:h,checksumid:p})=>d(h,!0,p)),console.log(`Marked ${this.interactableElements.length} interactable elements`),Tn("[markInteractableElements]")}truthyFilter(e){return!!e}shouldIgnoreElement(e){return e.hasAttribute(li)}generateSimplifiedDom(e,t,{extraAllowedAttributes:i=[],checkElementInstanceType:a=!0,forceIncludeAttribute:l=void 0,forceIncludeFileInput:u=!1,svgIntegration:d="aria-label",onForceIncludeElement:f=void 0,contentWindow:h=window,assignChecksumIdsToAllElements:p=!0,assignRrwebIdsToAllElements:v=!0}={}){if(!e)return null;let y=o((B,P=B)=>{if(B._originalNode=P,!gt(B,"Element")||!gt(P,"Element"))return B;let te=B,ee=P;return p&&!ee.hasAttribute("checksumid")&&(ee._checksumid||(ee._checksumid=this.checksumIdCounter.getAndIncrement()),te.setAttribute("checksumid",ee._checksumid),this.nonInteractableElementsFromSimplifiedDom.push({checksumId:ee._checksumid,element:ee})),v&&this.sessionRecorder&&(ee._rrwebid||(ee._rrwebid=this.sessionRecorder.getMeta(ee)?.id?.toString()??""),te.setAttribute("rrwebid",ee._rrwebid)),this.checksumIdToRRwebIdMap[ee._checksumid]=parseInt(ee._rrwebid),B},"processSimplifiedDOMNode"),w=o((B,P=e)=>y(document.createTextNode(B),P),"createTextNode"),M=o((B,P=e)=>y(document.createElement(B),P),"createElementNode");if(e.nodeType===Node.ELEMENT_NODE){let B=e;if(B.tagName.toLowerCase()==="head"||this.shouldIgnoreElement(B))return null}if(e.nodeType===Node.TEXT_NODE)return!e.parentElement||e.parentElement.getAttribute("checksum-data-visible")==="false"&&!e.parentElement.hasAttribute("checksumid")||e.parentElement.tagName.toLowerCase()==="body"?null:e.textContent?.trim()?w(e.textContent+" "):null;if(e.nodeType!==Node.ELEMENT_NODE||a&&!(gt(e,"HTMLElement")||gt(e,"SVGElement")))return null;let b=e,R=b.tagName.toLowerCase()==="iframe"&&b.contentDocument,T=yr(R?b.contentDocument.documentElement:b,{flattenShadowRootChildren:!0});t.esraSelectionRules?.limitChildren?.forEach(B=>{b.matches(B.selector)&&T.length>B.limit&&T.splice(B.limit)});let _=T.map(B=>this.generateSimplifiedDom(B,t,{extraAllowedAttributes:i,checkElementInstanceType:a,forceIncludeAttribute:l,forceIncludeFileInput:u,svgIntegration:d,onForceIncludeElement:f,contentWindow:R?b.contentWindow:h,assignChecksumIdsToAllElements:p,assignRrwebIdsToAllElements:v})).filter(this.truthyFilter),C=b.getAttribute("checksum-data-visible")!=="false",F=b.hasAttribute("checksumid"),G=b.hasAttribute("role"),{customDescription:Q,customDescriptionTarget:le}=this.getElementCustomDescription(b,{enableSVGCustomDescription:!!d}),X=!!Q,se=b.hasAttribute("aria-label")||b.hasAttribute("name")||b.hasAttribute("alt"),he=b.hasAttribute(Ds)||this.forceIncludeElements.map(B=>B.element).includes(b)||!!l&&b.hasAttribute(l)||u&&b.tagName.toLowerCase()==="input"&&b.getAttribute("type")==="file",V=["form","button","input","textarea","a","table","th","tr","td","section","nav","header","footer","main","article","aside","li","ul","select","option","datalist"],W=F||C&&(G||se||X||b.matches(V.join(",")));if(!(W||he)){if(!_.length)return null;if(_.length===1&&!gt(_[0],"Text"))return _[0]}!W&&he&&f?.(b);let Y=o(()=>{if(X)switch(le){case"svg":switch(d){case"aria-label":let P=M("svg");return P.setAttribute("aria-label",Q),{simplifiedNode:P,appendChildren:!1};case"text":if(b.hasAttribute("checksumid")){let ee=M("div");return ee.innerText=Q,{simplifiedNode:ee,appendChildren:!1}}return{simplifiedNode:w(` [${Q}] `),appendChildren:!1}}}let B=b.tagName.toLowerCase()==="body"&&b.ownerDocument!==document?"div":b.tagName;return{simplifiedNode:M(B)}},"makeSimplifiedNode"),{simplifiedNode:z,appendChildren:J=!0}=Y();if(!gt(z,"Element"))return z;let ve=z,et=["aria-.+","data-name","name","type","placeholder","content","value","role","icon","title","checksumid","checksuminteractable","checksum-get-more-items","checked","disabled","selected","label","required","inputmode","min","max","step","minlength","maxlength","alt","hidden","draggable","ondrop","ondragover","contenteditable","href","(data-)?test(-)?id"].concat(i),Ue=b.attributes;for(let B of Ue)for(let P of et)new RegExp("^"+P+"$").test(B.name)&&ve.setAttribute(B.name,B.value??!0);if(b.isContentEditable?ve.setAttribute("contenteditable","true"):!["TEXTAREA","INPUT","SELECT"].includes(b.tagName)&&window.getComputedStyle(b).cursor==="text"&&ve.setAttribute("contenteditable","cursor-text"),gt(b,"HTMLInputElement")&&b.getAttribute("type")==="checkbox")b.checked&&ve.setAttribute("checked","true");else if(gt(b,"HTMLInputElement")||gt(b,"HTMLSelectElement"))ve.setAttribute("value",b.value);else if(gt(b,"HTMLTextAreaElement")&&!b.childNodes.length&&b.value){let B=w(b.value);ve.appendChild(B)}return J&&_.forEach(B=>ve.appendChild(B)),ve}getElementCustomDescription(e,{enableSVGCustomDescription:t=!0}={}){return(gt(e,"SVGElement")||e.tagName.toLowerCase()==="svg")&&t?{customDescriptionTarget:"svg",customDescription:this.getSVGDescriptionForElement(e)}:{}}getSVGDescriptionForElement(e){let t=this.findSvgElementDescriptionFromBank(e);if(t)return t;let i=e.querySelector("title");if(i)return i.textContent}findSvgElementDescriptionFromBank(e){return this.getSvgBank().find(t=>e.matches(`svg:has(${t.selector})`))?.description}getSvgBank(){return qd}restoreDom(e=document){we("*",e).forEach(i=>{i.removeAttribute("checksum-data-visible"),i.removeAttribute("checksum-data-transparently-visible"),i.removeAttribute("checksum-data-visible-under-transparent-element"),i.removeAttribute("checksumid"),i.removeAttribute("checksuminteractable"),i.removeAttribute("checksum-data-click-offset"),i.removeAttribute(li),i.removeAttribute(Ds)})}removeAttribute(e){we("*",document).forEach(i=>{i.removeAttribute(e)})}async mapAndStoreSelectors(){let e={},t=new xt;for(let{checksumId:i,element:a,clickOffset:l,selector:u,locator:d,parentFramesSelectors:f}of await t.injectSelectorsAndLocators(this.interactableElementsFromSimplifiedDom)){if(!u){console.warn("Unable to get selector for element",a);continue}let h=a;e[i]={element:h,selector:u,locator:d,clickOffset:l,parentFramesSelectors:f,innerText:h.innerText,rrwebId:this.checksumIdToRRwebIdMap[i]}}return e}shouldFurtherReduce(e){return e?e.outerHTML.length>Jd:!0}async reduceHTML(e,t={},i=document){console.time("reduceHTML");let{initialChecksumId:a,forceIncludeAttribute:l,forceIncludeFileInput:u,invalidateCache:d,includeFlashingElements:f,limitNodeRepetitions:h,stopFlashingElementsDetection:p}=this.lastReduceHTMLOptions={...this.defaultReduceHTMLOptions,...t},v=pt.getInstance("reduce",{target:i,monitorInput:!0,invalidate:d,log:!1});if(v.hasCache())return v.get();let y=f?this.flashingElementsDetector.get():void 0;p&&this.flashingElementsDetector.stop(),this.nodeRepetitionsThreshold=h,this.reducePercentage=50,this.templateNodes=void 0,this.excludedNodes=0;let w=o(T=>Kd(T,{forceIncludeAttribute:l,forceIncludeFileInput:u,forceIncludeElements:this.forceIncludeElements.map(_=>_.element),limit:Math.min(Math.ceil(T.element.children.length*(this.reducePercentage/100)),T.element.children.length-6)}),"templateReducer");console.log("Running pre-templatize"),this.templatize(w),console.log("Preprocessing document..."),this.preprocessDocument(i);let M;for((a||!this.checksumIdCounter)&&(this.checksumIdCounter=new As(a??"0")),console.log("Marking interactable elements..."),this.markInteractableElements(e,i,{forceIncludeAttribute:l,forceIncludeFileInput:u});;){if(console.log("Generating simplified DOM..."),this.nonInteractableElementsFromSimplifiedDom=[],M=this.generateSimplifiedDom(i.documentElement,e,this.lastReduceHTMLOptions),!M)throw new Error("Unable to get simplified DOM");if(this.shouldFurtherReduce(M)){if(console.log(`Will further reduce (${M.outerHTML.length})...`),!this.templatize(w)){console.log(`Exceeded maximum html reduction, stopping (html size: ${M.outerHTML.length})`);break}}else break}console.log("Simplified DOM generated, length:",M.outerHTML.length);let b=new Set(Array.from(M.querySelectorAll("[checksumid]")).map(T=>T.getAttribute("checksumid")));this.interactableElementsFromSimplifiedDom=this.interactableElements.filter(T=>b.has(T.checksumId)),console.log(`Found ${this.interactableElementsFromSimplifiedDom.length} interactable elements in simplified DOM vs ${this.interactableElements.length} in original DOM`),console.log("Restoring DOM..."),this.restoreDom(i),this.preMapReducedHTMLSelectors=DS?!1:!!e.preMapReducedHTMLSelectors,this.preMapReducedHTMLSelectors?(console.log("Mapping selectors..."),this.selectors=await this.mapAndStoreSelectors(),console.log("Done mapping selectors")):this.selectors={},this.elementsInSimplifiedDomByChecksumId=[...this.interactableElementsFromSimplifiedDom,...this.nonInteractableElementsFromSimplifiedDom].reduce((T,_)=>(T[_.checksumId]=_,T),{});let R={reducedDomHTMLElement:M,reducedHTML:M.outerHTML,currentChecksumId:this.checksumIdCounter.get(),flashingHTML:y};return v.set(R),console.timeEnd("reduceHTML"),R}templatize(e){let t=this.excludedNodes,i=o(()=>Array.from(this.templateNodes).reduce((a,l)=>a+e(l).length,0),"calcExculdedNodes");if(!this.templateNodes)this.templateNodes=ol(document.body,{nodeRepetitionsThreshold:this.nodeRepetitionsThreshold}),this.excludedNodes=i();else do{if(this.reducePercentage<98)this.reducePercentage=Math.min(this.reducePercentage+20,98),console.log("Increasing reduce percentage to",this.reducePercentage);else{if(this.nodeRepetitionsThreshold<=20)return!1;this.reducePercentage=50,this.nodeRepetitionsThreshold-=10,console.log("Reducing node repetitions threshold to",this.nodeRepetitionsThreshold),this.templateNodes=ol(document.body,{nodeRepetitionsThreshold:this.nodeRepetitionsThreshold})}this.excludedNodes=i()}while(t===this.excludedNodes);return console.log(`[templatize] ${this.excludedNodes} elements marked to ignore for ${this.templateNodes.length} templates`),!0}getMoreElementsFromTemplate(e,t){try{let i=this.templateNodes.find(h=>h.id===e);if(!i)throw new Error("Template not found");let{element:a,excludedElements:l}=i;console.log("Preprocessing template node..."),this.preprocessDocument(a),console.log("Marking template interactable elements..."),this.markInteractableElements(t,a,this.lastReduceHTMLOptions);let u=[],d=o(()=>u.map(h=>h.outerHTML).join(""),"getElementsHTML"),f=l.values();for(;d().length<Jd*.5;){let h=f.next().value;if(!h)break;let p=Array.from(h.querySelectorAll("[checksumid]")).concat(h._checksumid?[h]:[]);this.interactableElements.filter(v=>p.includes(v.element)).forEach(v=>{this.elementsInSimplifiedDomByChecksumId[v.element._checksumid]=v}),u.push(this.generateSimplifiedDom(h,t,this.lastReduceHTMLOptions)),l.delete(h)}return this.restoreDom(a),{items:d(),hasMoreItems:l.size>0}}catch(i){console.error("[getMoreElementsFromTemplate] error",i);return}}async getSelectorForChecksumId(e,{forceGenerate:t=!1}={}){let i=o(h=>({selector:e,element:h?h.element:null,locator:"",parentFramesSelectors:[],invalid:!0,rrwebId:this.checksumIdToRRwebIdMap[e],clickOffset:h?.clickOffset,innerText:h?h.element.innerText:""}),"makeDefaultResult"),a=new xt,l=this.elementsInSimplifiedDomByChecksumId[e];if(!l||!l.element.isConnected)return this.preMapReducedHTMLSelectors&&this.selectors[e]?this.selectors[e]:i(l);let{selector:u,locator:d,parentFramesSelectors:f}=await a.getSelectorAndLocator(l.element);return{...i(l),selector:u,locator:d,parentFramesSelectors:f,invalid:!1}}getElementForChecksumId(e){return this.elementsInSimplifiedDomByChecksumId[e]?.element}hasInnerTextByChecksumId(e,{maxLength:t=void 0,minLength:i=void 0}={}){if(!this.preMapReducedHTMLSelectors){let l=this.elementsInSimplifiedDomByChecksumId[e]?.element?.innerText;return!(!l||i&&l.length<i||t&&l.length>t)}return!!this.selectors[e]?.innerText}getInteractableElements(){return this.interactableElements}getInteractableElementsInReducedHTML(){return this.interactableElementsFromSimplifiedDom}startFlashingElementsDetection(){return this.flashingElementsDetector.start()}addForceIncludeElement(e){this.forceIncludeElements.push(e),e.element._checksumid=e.checksumid}};var NS=!0,wr=class{constructor(){this.esraExtractors=[];this.playwrightSelector=new xt;this.defaultModulesState={extractReducedHtmlAndSelector:!1,inspectInteractableElements:!1,extractEsraMetadata:!0,extractPlaywrightSelector:!0};this.previousTargetNodeForReducedHTML=void 0;this.currentReducedHTMLChecksumIdAllocationCount="0";this.htmlReducer=new Sr}static{o(this,"SessionDigesterSelector")}async getSelector(e,{extractPlaywrightSelector:t=!0,extractEsraMetadata:i=this.defaultModulesState.extractEsraMetadata,extractReducedHtmlAndSelector:a=this.defaultModulesState.extractReducedHtmlAndSelector,inspectInteractableElements:l=this.defaultModulesState.inspectInteractableElements}={}){if(!e)return null;console.log("[SessionDigesterSelector] generating for node",e);let u={};if(i){console.log("extracting ESRA metadata...");let d=this.getESRAExtractor(e).extract(e);u.esraMetadata=d.toMetadata(),console.log("ESRA metadata extraction complete")}if(t){console.log("extracting playwright selector...");let{selector:d,locator:f,parentFramesSelectors:h}=await this.playwrightSelector.getSelectorAndLocator(e);u.playwrightSelector=d,u.playwrightLocator=f,u.playwrightParentFramesSelectors=h,console.log("Playwright selector extraction complete")}return a&&(console.log("extracting reduced HTML..."),u.reducedHTML=await this.getReducedHTMLAndTargetNodeSelector(e),console.log("Reduced HTML extraction complete")),l&&(console.log("extracting element inspection..."),u.interactionFoundOnInspection=await this.isElementInteractable(e),console.log("Element inspection extraction complete")),console.log("[SessionDigesterSelector] complete",u),u}async selector(e){return this.playwrightSelector.selector(e)}setAppRules(e){this.appSpecificRules=e}setOptions({defaultExtractReducedHtmlAndSelector:e,defaultInspectInteractableElements:t,defaultExtractEsraMetadata:i}){this.defaultModulesState.extractReducedHtmlAndSelector=e,this.defaultModulesState.inspectInteractableElements=t,this.defaultModulesState.extractEsraMetadata=i}async getReducedHTMLAndTargetNodeSelector(e){let t="checksum-target-node";e.setAttribute(t,"true");let i=this.previousTargetNodeForReducedHTML&&this.previousTargetNodeForReducedHTML!==e;this.previousTargetNodeForReducedHTML=e;let a=!1,l=o(v=>{v.hasAttribute(t)&&(a=!0)},"onForceIncludeElement"),{reducedDomHTMLElement:u,reducedHTML:d,currentChecksumId:f}=await this.htmlReducer.reduceHTML({...this.appSpecificRules,preMapReducedHTMLSelectors:!1},{initialChecksumId:this.currentReducedHTMLChecksumIdAllocationCount,extraAllowedAttributes:[t],checkElementInstanceType:!1,forceIncludeAttribute:NS?t:void 0,invalidateCache:i,onForceIncludeElement:l},e.ownerDocument);e.removeAttribute(t),this.currentReducedHTMLChecksumIdAllocationCount=f;let h=u.matches(`[${t}=true]`)?u:u.querySelector(`[${t}=true]`),p=h?h.getAttribute("checksumid"):void 0;return{html:d,selector:p,targetForceIncluded:a}}getESRAExtractor(e){let t=this.esraExtractors.find(a=>a.isSameDocument(e.ownerDocument));if(t)return t;let i=new lt(e.ownerDocument);return this.esraExtractors.push(i),i}async isElementInteractable(e){let t=this.htmlReducer.getInteractableElements();return t&&t.length?t.some(a=>a.element===e&&!a.forced):(await Bt(e.ownerDocument,this.appSpecificRules)).includes(e)}};var oe;(function(n){n[n.Document=0]="Document",n[n.DocumentType=1]="DocumentType",n[n.Element=2]="Element",n[n.Text=3]="Text",n[n.CDATA=4]="CDATA",n[n.Comment=5]="Comment"})(oe||(oe={}));function lf(n){return n.nodeType===n.ELEMENT_NODE}o(lf,"isElement");function Yn(n){let e=n?.host;return e?.shadowRoot===n}o(Yn,"isShadowRoot");function jn(n){return Object.prototype.toString.call(n)==="[object ShadowRoot]"}o(jn,"isNativeShadowDom");function LS(n){return n.includes(" background-clip: text;")&&!n.includes(" -webkit-background-clip: text;")&&(n=n.replace(/\sbackground-clip:\s*text;/g," -webkit-background-clip: text; background-clip: text;")),n}o(LS,"fixBrowserCompatibilityIssuesInCSS");function OS(n){let{cssText:e}=n;if(e.split('"').length<3)return e;let t=["@import",`url(${JSON.stringify(n.href)})`];return n.layerName===""?t.push("layer"):n.layerName&&t.push(`layer(${n.layerName})`),n.supportsText&&t.push(`supports(${n.supportsText})`),n.media.length&&t.push(n.media.mediaText),t.join(" ")+";"}o(OS,"escapeImportStatement");function Ns(n){try{let e=n.rules||n.cssRules;return e?LS(Array.from(e,ul).join("")):null}catch{return null}}o(Ns,"stringifyStylesheet");function ul(n){let e;if(FS(n))try{e=Ns(n.styleSheet)||OS(n)}catch{}else if(PS(n)&&n.selectorText.includes(":"))return kS(n.cssText);return e||n.cssText}o(ul,"stringifyRule");function kS(n){let e=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return n.replace(e,"$1\\$2")}o(kS,"fixSafariColons");function FS(n){return"styleSheet"in n}o(FS,"isCSSImportRule");function PS(n){return"selectorText"in n}o(PS,"isCSSStyleRule");var ui=class{static{o(this,"Mirror")}constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){var t;if(!e)return-1;let i=(t=this.getMeta(e))===null||t===void 0?void 0:t.id;return i??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){let t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(i=>this.removeNodeFromMap(i))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){let i=t.id;this.idNodeMap.set(i,e),this.nodeMetaMap.set(e,t)}replace(e,t){let i=this.getNode(e);if(i){let a=this.nodeMetaMap.get(i);a&&this.nodeMetaMap.set(t,a)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function Os(){return new ui}o(Os,"createMirror");function fi({element:n,maskInputOptions:e,tagName:t,type:i,value:a,maskInputFn:l}){let u=a||"",d=i&&Vt(i);return(e[t.toLowerCase()]||d&&e[d])&&(l?u=l(u,n):u="*".repeat(u.length)),u}o(fi,"maskInputValue");function Vt(n){return n.toLowerCase()}o(Vt,"toLowerCase");var ef="__rrweb_original__";function HS(n){let e=n.getContext("2d");if(!e)return!0;let t=50;for(let i=0;i<n.width;i+=t)for(let a=0;a<n.height;a+=t){let l=e.getImageData,u=ef in l?l[ef]:l;if(new Uint32Array(u.call(e,i,a,Math.min(t,n.width-i),Math.min(t,n.height-a)).data.buffer).some(f=>f!==0))return!1}return!0}o(HS,"is2DCanvasBlank");function WS(n,e){return!n||!e||n.type!==e.type?!1:n.type===oe.Document?n.compatMode===e.compatMode:n.type===oe.DocumentType?n.name===e.name&&n.publicId===e.publicId&&n.systemId===e.systemId:n.type===oe.Comment||n.type===oe.Text||n.type===oe.CDATA?n.textContent===e.textContent:n.type===oe.Element?n.tagName===e.tagName&&JSON.stringify(n.attributes)===JSON.stringify(e.attributes)&&n.isSVG===e.isSVG&&n.needBlock===e.needBlock:!1}o(WS,"isNodeMetaEqual");function hi(n){let e=n.type;return n.hasAttribute("data-rr-is-password")?"password":e?Vt(e):null}o(hi,"getInputType");function cf(n,e){var t;let i;try{i=new URL(n,e??window.location.href)}catch{return null}let a=/\.([0-9a-z]+)(?:$)/i,l=i.pathname.match(a);return(t=l?.[1])!==null&&t!==void 0?t:null}o(cf,"extractFileExtension");var BS=1,VS=new RegExp("[^a-z0-9-_:]"),Kn=-2;function dl(){return BS++}o(dl,"genId");function US(n){if(n instanceof HTMLFormElement)return"form";let e=Vt(n.tagName);return VS.test(e)?"div":e}o(US,"getValidTagName");function GS(n){let e="";return n.indexOf("//")>-1?e=n.split("/").slice(0,3).join("/"):e=n.split("/")[0],e=e.split("?")[0],e}o(GS,"extractOrigin");var Mr,tf,$S=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,qS=/^(?:[a-z+]+:)?\/\//i,zS=/^www\..*/i,jS=/^(data:)([^,]*),(.*)/i;function Ls(n,e){return(n||"").replace($S,(t,i,a,l,u,d)=>{let f=a||u||d,h=i||l||"";if(!f)return t;if(qS.test(f)||zS.test(f))return`url(${h}${f}${h})`;if(jS.test(f))return`url(${h}${f}${h})`;if(f[0]==="/")return`url(${h}${GS(e)+f}${h})`;let p=e.split("/"),v=f.split("/");p.pop();for(let y of v)y!=="."&&(y===".."?p.pop():p.push(y));return`url(${h}${p.join("/")}${h})`})}o(Ls,"absoluteToStylesheet");var KS=/^[^ \t\n\r\u000c]+/,YS=/^[, \t\n\r\u000c]+/;function QS(n,e){if(e.trim()==="")return e;let t=0;function i(l){let u,d=l.exec(e.substring(t));return d?(u=d[0],t+=u.length,u):""}o(i,"collectCharacters");let a=[];for(;i(YS),!(t>=e.length);){let l=i(KS);if(l.slice(-1)===",")l=xr(n,l.substring(0,l.length-1)),a.push(l);else{let u="";l=xr(n,l);let d=!1;for(;;){let f=e.charAt(t);if(f===""){a.push((l+u).trim());break}else if(d)f===")"&&(d=!1);else if(f===","){t+=1,a.push((l+u).trim());break}else f==="("&&(d=!0);u+=f,t+=1}}}return a.join(", ")}o(QS,"getAbsoluteSrcsetString");var nf=new WeakMap;function xr(n,e){return!e||e.trim()===""?e:ks(n,e)}o(xr,"absoluteToDoc");function XS(n){return!!(n.tagName==="svg"||n.ownerSVGElement)}o(XS,"isSVGElement");function ks(n,e){let t=nf.get(n);if(t||(t=n.createElement("a"),nf.set(n,t)),!e)e="";else if(e.startsWith("blob:")||e.startsWith("data:"))return e;return t.setAttribute("href",e),t.href}o(ks,"getHref");function fl(n,e,t,i){return i&&(t==="src"||t==="href"&&!(e==="use"&&i[0]==="#")||t==="xlink:href"&&i[0]!=="#"||t==="background"&&(e==="table"||e==="td"||e==="th")?xr(n,i):t==="srcset"?QS(n,i):t==="style"?Ls(i,ks(n)):e==="object"&&t==="data"?xr(n,i):i)}o(fl,"transformAttribute");function hl(n,e,t){return(n==="video"||n==="audio")&&e==="autoplay"}o(hl,"ignoreAttribute");function ZS(n,e,t){try{if(typeof e=="string"){if(n.classList.contains(e))return!0}else for(let i=n.classList.length;i--;){let a=n.classList[i];if(e.test(a))return!0}if(t)return n.matches(t)}catch{}return!1}o(ZS,"_isBlockedElement");function di(n,e,t){if(!n)return!1;if(n.nodeType!==n.ELEMENT_NODE)return t?di(n.parentNode,e,t):!1;for(let i=n.classList.length;i--;){let a=n.classList[i];if(e.test(a))return!0}return t?di(n.parentNode,e,t):!1}o(di,"classMatchesRegex");function ml(n,e,t,i){try{let a=n.nodeType===n.ELEMENT_NODE?n:n.parentElement;if(a===null)return!1;if(typeof e=="string"){if(i){if(a.closest(`.${e}`))return!0}else if(a.classList.contains(e))return!0}else if(di(a,e,i))return!0;if(t){if(i){if(a.closest(t))return!0}else if(a.matches(t))return!0}}catch{}return!1}o(ml,"needMaskingText");function JS(n,e,t){let i=n.contentWindow;if(!i)return;let a=!1,l;try{l=i.document.readyState}catch{return}if(l!=="complete"){let d=setTimeout(()=>{a||(e(),a=!0)},t);n.addEventListener("load",()=>{clearTimeout(d),a=!0,e()});return}let u="about:blank";if(i.location.href!==u||n.src===u||n.src==="")return setTimeout(e,0),n.addEventListener("load",e);n.addEventListener("load",e)}o(JS,"onceIframeLoaded");function ew(n,e,t){let i=!1,a;try{a=n.sheet}catch{return}if(a)return;let l=setTimeout(()=>{i||(e(),i=!0)},t);n.addEventListener("load",()=>{clearTimeout(l),i=!0,e()})}o(ew,"onceStylesheetLoaded");function tw(n,e){let{doc:t,mirror:i,blockClass:a,blockSelector:l,needsMask:u,inlineStylesheet:d,maskInputOptions:f={},maskTextFn:h,maskInputFn:p,dataURLOptions:v={},inlineImages:y,recordCanvas:w,keepIframeSrcFn:M,newlyAddedElement:b=!1}=e,R=nw(t,i);switch(n.nodeType){case n.DOCUMENT_NODE:return n.compatMode!=="CSS1Compat"?{type:oe.Document,childNodes:[],compatMode:n.compatMode}:{type:oe.Document,childNodes:[]};case n.DOCUMENT_TYPE_NODE:return{type:oe.DocumentType,name:n.name,publicId:n.publicId,systemId:n.systemId,rootId:R};case n.ELEMENT_NODE:return iw(n,{doc:t,blockClass:a,blockSelector:l,inlineStylesheet:d,maskInputOptions:f,maskInputFn:p,dataURLOptions:v,inlineImages:y,recordCanvas:w,keepIframeSrcFn:M,newlyAddedElement:b,rootId:R});case n.TEXT_NODE:return rw(n,{doc:t,needsMask:u,maskTextFn:h,rootId:R});case n.CDATA_SECTION_NODE:return{type:oe.CDATA,textContent:"",rootId:R};case n.COMMENT_NODE:return{type:oe.Comment,textContent:n.textContent||"",rootId:R};default:return!1}}o(tw,"serializeNode");function nw(n,e){if(!e.hasNode(n))return;let t=e.getId(n);return t===1?void 0:t}o(nw,"getRootId");function rw(n,e){var t;let{needsMask:i,maskTextFn:a,rootId:l}=e,u=n.parentNode&&n.parentNode.tagName,d=n.textContent,f=u==="STYLE"?!0:void 0,h=u==="SCRIPT"?!0:void 0;if(f&&d){try{n.nextSibling||n.previousSibling||!((t=n.parentNode.sheet)===null||t===void 0)&&t.cssRules&&(d=Ns(n.parentNode.sheet))}catch(p){console.warn(`Cannot get CSS styles from text's parentNode. Error: ${p}`,n)}d=Ls(d,ks(e.doc))}return h&&(d="SCRIPT_PLACEHOLDER"),!f&&!h&&d&&i&&(d=a?a(d,n.parentElement):d.replace(/[\S]/g,"*")),{type:oe.Text,textContent:d||"",isStyle:f,rootId:l}}o(rw,"serializeTextNode");function iw(n,e){let{doc:t,blockClass:i,blockSelector:a,inlineStylesheet:l,maskInputOptions:u={},maskInputFn:d,dataURLOptions:f={},inlineImages:h,recordCanvas:p,keepIframeSrcFn:v,newlyAddedElement:y=!1,rootId:w}=e,M=ZS(n,i,a),b=US(n),R={},T=n.attributes.length;for(let C=0;C<T;C++){let F=n.attributes[C];hl(b,F.name,F.value)||(R[F.name]=fl(t,b,Vt(F.name),F.value))}if(b==="link"&&l){let C=Array.from(t.styleSheets).find(G=>G.href===n.href),F=null;C&&(F=Ns(C)),F&&(delete R.rel,delete R.href,R._cssText=Ls(F,C.href))}if(b==="style"&&n.sheet&&!(n.innerText||n.textContent||"").trim().length){let C=Ns(n.sheet);C&&(R._cssText=Ls(C,ks(t)))}if(b==="input"||b==="textarea"||b==="select"){let C=n.value,F=n.checked;R.type!=="radio"&&R.type!=="checkbox"&&R.type!=="submit"&&R.type!=="button"&&C?R.value=fi({element:n,type:hi(n),tagName:b,value:C,maskInputOptions:u,maskInputFn:d}):F&&(R.checked=F)}if(b==="option"&&(n.selected&&!u.select?R.selected=!0:delete R.selected),b==="canvas"&&p){if(n.__context==="2d")HS(n)||(R.rr_dataURL=n.toDataURL(f.type,f.quality));else if(!("__context"in n)){let C=n.toDataURL(f.type,f.quality),F=document.createElement("canvas");F.width=n.width,F.height=n.height;let G=F.toDataURL(f.type,f.quality);C!==G&&(R.rr_dataURL=C)}}if(b==="img"&&h){Mr||(Mr=t.createElement("canvas"),tf=Mr.getContext("2d"));let C=n,F=C.crossOrigin;C.crossOrigin="anonymous";let G=o(()=>{C.removeEventListener("load",G);try{Mr.width=C.naturalWidth,Mr.height=C.naturalHeight,tf.drawImage(C,0,0),R.rr_dataURL=Mr.toDataURL(f.type,f.quality)}catch(Q){console.warn(`Cannot inline img src=${C.currentSrc}! Error: ${Q}`)}F?R.crossOrigin=F:C.removeAttribute("crossorigin")},"recordInlineImage");C.complete&&C.naturalWidth!==0?G():C.addEventListener("load",G)}if(b==="audio"||b==="video"){let C=R;C.rr_mediaState=n.paused?"paused":"played",C.rr_mediaCurrentTime=n.currentTime,C.rr_mediaPlaybackRate=n.playbackRate,C.rr_mediaMuted=n.muted,C.rr_mediaLoop=n.loop,C.rr_mediaVolume=n.volume}if(y||(n.scrollLeft&&(R.rr_scrollLeft=n.scrollLeft),n.scrollTop&&(R.rr_scrollTop=n.scrollTop)),M){let{width:C,height:F}=n.getBoundingClientRect();R={class:R.class,rr_width:`${C}px`,rr_height:`${F}px`}}b==="iframe"&&!v(R.src)&&(n.contentDocument||(R.rr_src=R.src),delete R.src);let _;try{customElements.get(b)&&(_=!0)}catch{}return{type:oe.Element,tagName:b,attributes:R,childNodes:[],isSVG:XS(n)||void 0,needBlock:M,rootId:w,isCustom:_}}o(iw,"serializeElementNode");function De(n){return n==null?"":n.toLowerCase()}o(De,"lowerIfExists");function sw(n,e){if(e.comment&&n.type===oe.Comment)return!0;if(n.type===oe.Element){if(e.script&&(n.tagName==="script"||n.tagName==="link"&&(n.attributes.rel==="preload"||n.attributes.rel==="modulepreload")&&n.attributes.as==="script"||n.tagName==="link"&&n.attributes.rel==="prefetch"&&typeof n.attributes.href=="string"&&cf(n.attributes.href)==="js"))return!0;if(e.headFavicon&&(n.tagName==="link"&&n.attributes.rel==="shortcut icon"||n.tagName==="meta"&&(De(n.attributes.name).match(/^msapplication-tile(image|color)$/)||De(n.attributes.name)==="application-name"||De(n.attributes.rel)==="icon"||De(n.attributes.rel)==="apple-touch-icon"||De(n.attributes.rel)==="shortcut icon")))return!0;if(n.tagName==="meta"){if(e.headMetaDescKeywords&&De(n.attributes.name).match(/^description|keywords$/))return!0;if(e.headMetaSocial&&(De(n.attributes.property).match(/^(og|twitter|fb):/)||De(n.attributes.name).match(/^(og|twitter):/)||De(n.attributes.name)==="pinterest"))return!0;if(e.headMetaRobots&&(De(n.attributes.name)==="robots"||De(n.attributes.name)==="googlebot"||De(n.attributes.name)==="bingbot"))return!0;if(e.headMetaHttpEquiv&&n.attributes["http-equiv"]!==void 0)return!0;if(e.headMetaAuthorship&&(De(n.attributes.name)==="author"||De(n.attributes.name)==="generator"||De(n.attributes.name)==="framework"||De(n.attributes.name)==="publisher"||De(n.attributes.name)==="progid"||De(n.attributes.property).match(/^article:/)||De(n.attributes.property).match(/^product:/)))return!0;if(e.headMetaVerification&&(De(n.attributes.name)==="google-site-verification"||De(n.attributes.name)==="yandex-verification"||De(n.attributes.name)==="csrf-token"||De(n.attributes.name)==="p:domain_verify"||De(n.attributes.name)==="verify-v1"||De(n.attributes.name)==="verification"||De(n.attributes.name)==="shopify-checkout-api-token"))return!0}}return!1}o(sw,"slimDOMExcluded");function zn(n,e){let{doc:t,mirror:i,blockClass:a,blockSelector:l,maskTextClass:u,maskTextSelector:d,skipChild:f=!1,inlineStylesheet:h=!0,maskInputOptions:p={},maskTextFn:v,maskInputFn:y,slimDOMOptions:w,dataURLOptions:M={},inlineImages:b=!1,recordCanvas:R=!1,onSerialize:T,onIframeLoad:_,iframeLoadTimeout:C=5e3,onStylesheetLoad:F,stylesheetLoadTimeout:G=5e3,keepIframeSrcFn:Q=o(()=>!1,"keepIframeSrcFn"),newlyAddedElement:le=!1}=e,{needsMask:X}=e,{preserveWhiteSpace:se=!0}=e;!X&&n.childNodes&&(X=ml(n,u,d,X===void 0));let he=tw(n,{doc:t,mirror:i,blockClass:a,blockSelector:l,needsMask:X,inlineStylesheet:h,maskInputOptions:p,maskTextFn:v,maskInputFn:y,dataURLOptions:M,inlineImages:b,recordCanvas:R,keepIframeSrcFn:Q,newlyAddedElement:le});if(!he)return console.warn(n,"not serialized"),null;let V;i.hasNode(n)?V=i.getId(n):sw(he,w)||!se&&he.type===oe.Text&&!he.isStyle&&!he.textContent.replace(/^\s+|\s+$/gm,"").length?V=Kn:V=dl();let W=Object.assign(he,{id:V});if(i.add(n,W),V===Kn)return null;T&&T(n);let K=!f;if(W.type===oe.Element){K=K&&!W.needBlock,delete W.needBlock;let Y=n.shadowRoot;Y&&jn(Y)&&(W.isShadowHost=!0)}if((W.type===oe.Document||W.type===oe.Element)&&K){w.headWhitespace&&W.type===oe.Element&&W.tagName==="head"&&(se=!1);let Y={doc:t,mirror:i,blockClass:a,blockSelector:l,needsMask:X,maskTextClass:u,maskTextSelector:d,skipChild:f,inlineStylesheet:h,maskInputOptions:p,maskTextFn:v,maskInputFn:y,slimDOMOptions:w,dataURLOptions:M,inlineImages:b,recordCanvas:R,preserveWhiteSpace:se,onSerialize:T,onIframeLoad:_,iframeLoadTimeout:C,onStylesheetLoad:F,stylesheetLoadTimeout:G,keepIframeSrcFn:Q};if(!(W.type===oe.Element&&W.tagName==="textarea"&&W.attributes.value!==void 0))for(let z of Array.from(n.childNodes)){let J=zn(z,Y);J&&W.childNodes.push(J)}if(lf(n)&&n.shadowRoot)for(let z of Array.from(n.shadowRoot.childNodes)){let J=zn(z,Y);J&&(jn(n.shadowRoot)&&(J.isShadow=!0),W.childNodes.push(J))}}return n.parentNode&&Yn(n.parentNode)&&jn(n.parentNode)&&(W.isShadow=!0),W.type===oe.Element&&W.tagName==="iframe"&&JS(n,()=>{let Y=n.contentDocument;if(Y&&_){let z=zn(Y,{doc:Y,mirror:i,blockClass:a,blockSelector:l,needsMask:X,maskTextClass:u,maskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:p,maskTextFn:v,maskInputFn:y,slimDOMOptions:w,dataURLOptions:M,inlineImages:b,recordCanvas:R,preserveWhiteSpace:se,onSerialize:T,onIframeLoad:_,iframeLoadTimeout:C,onStylesheetLoad:F,stylesheetLoadTimeout:G,keepIframeSrcFn:Q});z&&_(n,z)}},C),W.type===oe.Element&&W.tagName==="link"&&typeof W.attributes.rel=="string"&&(W.attributes.rel==="stylesheet"||W.attributes.rel==="preload"&&typeof W.attributes.href=="string"&&cf(W.attributes.href)==="css")&&ew(n,()=>{if(F){let Y=zn(n,{doc:t,mirror:i,blockClass:a,blockSelector:l,needsMask:X,maskTextClass:u,maskTextSelector:d,skipChild:!1,inlineStylesheet:h,maskInputOptions:p,maskTextFn:v,maskInputFn:y,slimDOMOptions:w,dataURLOptions:M,inlineImages:b,recordCanvas:R,preserveWhiteSpace:se,onSerialize:T,onIframeLoad:_,iframeLoadTimeout:C,onStylesheetLoad:F,stylesheetLoadTimeout:G,keepIframeSrcFn:Q});Y&&F(n,Y)}},G),W}o(zn,"serializeNodeWithId");function uf(n,e){let{mirror:t=new ui,blockClass:i="rr-block",blockSelector:a=null,maskTextClass:l="rr-mask",maskTextSelector:u=null,inlineStylesheet:d=!0,inlineImages:f=!1,recordCanvas:h=!1,maskAllInputs:p=!1,maskTextFn:v,maskInputFn:y,slimDOM:w=!1,dataURLOptions:M,preserveWhiteSpace:b,onSerialize:R,onIframeLoad:T,iframeLoadTimeout:_,onStylesheetLoad:C,stylesheetLoadTimeout:F,keepIframeSrcFn:G=o(()=>!1,"keepIframeSrcFn")}=e||{};return zn(n,{doc:n,mirror:t,blockClass:i,blockSelector:a,maskTextClass:l,maskTextSelector:u,skipChild:!1,inlineStylesheet:d,maskInputOptions:p===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:p===!1?{password:!0}:p,maskTextFn:v,maskInputFn:y,slimDOMOptions:w===!0||w==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:w==="all",headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:w===!1?{}:w,dataURLOptions:M,inlineImages:f,recordCanvas:h,preserveWhiteSpace:b,onSerialize:R,onIframeLoad:T,iframeLoadTimeout:_,onStylesheetLoad:C,stylesheetLoadTimeout:F,keepIframeSrcFn:G,newlyAddedElement:!1})}o(uf,"snapshot");var rf=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g;function ow(n,e={}){let t=1,i=1;function a(B){let P=B.match(/\n/g);P&&(t+=P.length);let te=B.lastIndexOf(`
`);i=te===-1?i+B.length:B.length-te}o(a,"updatePosition");function l(){let B={line:t,column:i};return P=>(P.position=new u(B),M(),P)}o(l,"position");class u{static{o(this,"Position")}constructor(P){this.start=P,this.end={line:t,column:i},this.source=e.source}}u.prototype.content=n;let d=[];function f(B){let P=new Error(`${e.source||""}:${t}:${i}: ${B}`);if(P.reason=B,P.filename=e.source,P.line=t,P.column=i,P.source=n,e.silent)d.push(P);else throw P}o(f,"error");function h(){let B=y();return{type:"stylesheet",stylesheet:{source:e.source,rules:B,parsingErrors:d}}}o(h,"stylesheet");function p(){return w(/^{\s*/)}o(p,"open");function v(){return w(/^}/)}o(v,"close");function y(){let B,P=[];for(M(),b(P);n.length&&n.charAt(0)!=="}"&&(B=et()||Ue());)B&&(P.push(B),b(P));return P}o(y,"rules");function w(B){let P=B.exec(n);if(!P)return;let te=P[0];return a(te),n=n.slice(te.length),P}o(w,"match");function M(){w(/^\s*/)}o(M,"whitespace");function b(B=[]){let P;for(;P=R();)P&&B.push(P),P=R();return B}o(b,"comments");function R(){let B=l();if(n.charAt(0)!=="/"||n.charAt(1)!=="*")return;let P=2;for(;n.charAt(P)!==""&&(n.charAt(P)!=="*"||n.charAt(P+1)!=="/");)++P;if(P+=2,n.charAt(P-1)==="")return f("End of comment missing");let te=n.slice(2,P-2);return i+=2,a(te),n=n.slice(P),i+=2,B({type:"comment",comment:te})}o(R,"comment");function T(){for(M();n[0]=="}";)f("extra closing bracket"),n=n.slice(1),M();let B=w(/^(((?<!\\)"(?:\\"|[^"])*"|(?<!\\)'(?:\\'|[^'])*'|[^{])+)/);if(!B)return;let P=B[0].trim().replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,"").replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,te=>te.replace(/,/g,"\u200C"));return _(P).map(te=>te.replace(/\u200C/g,",").trim())}o(T,"selector");function _(B){let P=[],te="",ee=0,Oe=0,ut=null;for(let Xe of B){let it=te.endsWith("\\");ut?ut===Xe&&!it&&(ut=null):Xe==="("?ee++:Xe===")"?ee--:Xe==="["?Oe++:Xe==="]"?Oe--:`'"`.includes(Xe)&&(ut=Xe),Xe===","&&ee===0&&Oe===0?(P.push(te),te=""):te+=Xe}return te&&P.push(te),P}o(_,"customSplit");function C(){let B=l(),P=w(/^(\*?[-#\/\*\\\w]+(\[[0-9a-z_-]+\])?)\s*/);if(!P)return;let te=In(P[0]);if(!w(/^:\s*/))return f("property missing ':'");let ee=w(/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^\)]*?\)|[^};])+)/),Oe=B({type:"declaration",property:te.replace(rf,""),value:ee?In(ee[0]).replace(rf,""):""});return w(/^[;\s]*/),Oe}o(C,"declaration");function F(){let B=[];if(!p())return f("missing '{'");b(B);let P;for(;P=C();)P!==!1&&(B.push(P),b(B)),P=C();return v()?B:f("missing '}'")}o(F,"declarations");function G(){let B,P=[],te=l();for(;B=w(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)P.push(B[1]),w(/^,\s*/);if(P.length)return te({type:"keyframe",values:P,declarations:F()})}o(G,"keyframe");function Q(){let B=l(),P=w(/^@([-\w]+)?keyframes\s*/);if(!P)return;let te=P[1];if(P=w(/^([-\w]+)\s*/),!P)return f("@keyframes missing name");let ee=P[1];if(!p())return f("@keyframes missing '{'");let Oe,ut=b();for(;Oe=G();)ut.push(Oe),ut=ut.concat(b());return v()?B({type:"keyframes",name:ee,vendor:te,keyframes:ut}):f("@keyframes missing '}'")}o(Q,"atkeyframes");function le(){let B=l(),P=w(/^@supports *([^{]+)/);if(!P)return;let te=In(P[1]);if(!p())return f("@supports missing '{'");let ee=b().concat(y());return v()?B({type:"supports",supports:te,rules:ee}):f("@supports missing '}'")}o(le,"atsupports");function X(){let B=l();if(!w(/^@host\s*/))return;if(!p())return f("@host missing '{'");let te=b().concat(y());return v()?B({type:"host",rules:te}):f("@host missing '}'")}o(X,"athost");function se(){let B=l(),P=w(/^@media *([^{]+)/);if(!P)return;let te=In(P[1]);if(!p())return f("@media missing '{'");let ee=b().concat(y());return v()?B({type:"media",media:te,rules:ee}):f("@media missing '}'")}o(se,"atmedia");function he(){let B=l(),P=w(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(P)return B({type:"custom-media",name:In(P[1]),media:In(P[2])})}o(he,"atcustommedia");function V(){let B=l();if(!w(/^@page */))return;let te=T()||[];if(!p())return f("@page missing '{'");let ee=b(),Oe;for(;Oe=C();)ee.push(Oe),ee=ee.concat(b());return v()?B({type:"page",selectors:te,declarations:ee}):f("@page missing '}'")}o(V,"atpage");function W(){let B=l(),P=w(/^@([-\w]+)?document *([^{]+)/);if(!P)return;let te=In(P[1]),ee=In(P[2]);if(!p())return f("@document missing '{'");let Oe=b().concat(y());return v()?B({type:"document",document:ee,vendor:te,rules:Oe}):f("@document missing '}'")}o(W,"atdocument");function K(){let B=l();if(!w(/^@font-face\s*/))return;if(!p())return f("@font-face missing '{'");let te=b(),ee;for(;ee=C();)te.push(ee),te=te.concat(b());return v()?B({type:"font-face",declarations:te}):f("@font-face missing '}'")}o(K,"atfontface");let Y=ve("import"),z=ve("charset"),J=ve("namespace");function ve(B){let P=new RegExp("^@"+B+"\\s*((?:"+['(?<!\\\\)"(?:\\\\"|[^"])*"',"(?<!\\\\)'(?:\\\\'|[^'])*'","[^;]"].join("|")+")+);");return()=>{let te=l(),ee=w(P);if(!ee)return;let Oe={type:B};return Oe[B]=ee[1].trim(),te(Oe)}}o(ve,"_compileAtrule");function et(){if(n[0]==="@")return Q()||se()||he()||le()||Y()||z()||J()||W()||V()||X()||K()}o(et,"atrule");function Ue(){let B=l(),P=T();return P?(b(),B({type:"rule",selectors:P,declarations:F()})):f("selector missing")}return o(Ue,"rule"),cl(h())}o(ow,"parse");function In(n){return n?n.replace(/^\s+|\s+$/g,""):""}o(In,"trim");function cl(n,e){let t=n&&typeof n.type=="string",i=t?n:e;for(let a of Object.keys(n)){let l=n[a];Array.isArray(l)?l.forEach(u=>{cl(u,i)}):l&&typeof l=="object"&&cl(l,i)}return t&&Object.defineProperty(n,"parent",{configurable:!0,writable:!0,enumerable:!1,value:e||null}),n}o(cl,"addParent");var sf={script:"noscript",altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"};function aw(n){let e=sf[n.tagName]?sf[n.tagName]:n.tagName;return e==="link"&&n.attributes._cssText&&(e="style"),e}o(aw,"getTagName");function of(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}o(of,"escapeRegExp");var df=/(max|min)-device-(width|height)/,lw=new RegExp(df.source,"g"),ff=/([^\\]):hover/,cw=new RegExp(ff.source,"g");function af(n,e){let t=e?.stylesWithHoverClass.get(n);if(t)return t;let i=ow(n,{silent:!0});if(!i.stylesheet)return n;let a=[],l=[];function u(f){"selectors"in f&&f.selectors&&f.selectors.forEach(h=>{ff.test(h)&&a.push(h)}),"media"in f&&f.media&&df.test(f.media)&&l.push(f.media),"rules"in f&&f.rules&&f.rules.forEach(u)}o(u,"getSelectors"),u(i.stylesheet);let d=n;if(a.length>0){let f=new RegExp(a.filter((h,p)=>a.indexOf(h)===p).sort((h,p)=>p.length-h.length).map(h=>of(h)).join("|"),"g");d=d.replace(f,h=>{let p=h.replace(cw,"$1.\\:hover");return`${h}, ${p}`})}if(l.length>0){let f=new RegExp(l.filter((h,p)=>l.indexOf(h)===p).sort((h,p)=>p.length-h.length).map(h=>of(h)).join("|"),"g");d=d.replace(f,h=>h.replace(lw,"$1-$2"))}return e?.stylesWithHoverClass.set(n,d),d}o(af,"adaptCssForReplay");function pl(){return{stylesWithHoverClass:new Map}}o(pl,"createCache");function uw(n,e){var t;let{doc:i,hackCss:a,cache:l}=e;switch(n.type){case oe.Document:return i.implementation.createDocument(null,"",null);case oe.DocumentType:return i.implementation.createDocumentType(n.name||"html",n.publicId,n.systemId);case oe.Element:{let u=aw(n),d;n.isSVG?d=i.createElementNS("http://www.w3.org/2000/svg",u):(n.isCustom&&(!((t=i.defaultView)===null||t===void 0)&&t.customElements)&&!i.defaultView.customElements.get(n.tagName)&&i.defaultView.customElements.define(n.tagName,class extends i.defaultView.HTMLElement{}),d=i.createElement(u));let f={};for(let h in n.attributes){if(!Object.prototype.hasOwnProperty.call(n.attributes,h))continue;let p=n.attributes[h];if(u==="option"&&h==="selected"&&p===!1||p===null)continue;if(p===!0&&(p=""),h.startsWith("rr_")){f[h]=p;continue}let v=u==="textarea"&&h==="value",y=u==="style"&&h==="_cssText";if(y&&a&&typeof p=="string"&&(p=af(p,l)),(v||y)&&typeof p=="string"){d.appendChild(i.createTextNode(p)),n.childNodes=[];continue}try{if(n.isSVG&&h==="xlink:href")d.setAttributeNS("http://www.w3.org/1999/xlink",h,p.toString());else if(h==="onload"||h==="onclick"||h.substring(0,7)==="onmouse")d.setAttribute("_"+h,p.toString());else if(u==="meta"&&n.attributes["http-equiv"]==="Content-Security-Policy"&&h==="content"){d.setAttribute("csp-content",p.toString());continue}else u==="link"&&(n.attributes.rel==="preload"||n.attributes.rel==="modulepreload")&&n.attributes.as==="script"||u==="link"&&n.attributes.rel==="prefetch"&&typeof n.attributes.href=="string"&&n.attributes.href.endsWith(".js")||(u==="img"&&n.attributes.srcset&&n.attributes.rr_dataURL?d.setAttribute("rrweb-original-srcset",n.attributes.srcset):d.setAttribute(h,p.toString()))}catch{}}for(let h in f){let p=f[h];if(u==="canvas"&&h==="rr_dataURL"){let v=document.createElement("img");v.onload=()=>{let y=d.getContext("2d");y&&y.drawImage(v,0,0,v.width,v.height)},v.src=p.toString(),d.RRNodeType&&(d.rr_dataURL=p.toString())}else if(u==="img"&&h==="rr_dataURL"){let v=d;v.currentSrc.startsWith("data:")||(v.setAttribute("rrweb-original-src",n.attributes.src),v.src=p.toString())}if(h==="rr_width")d.style.width=p.toString();else if(h==="rr_height")d.style.height=p.toString();else if(h==="rr_mediaCurrentTime"&&typeof p=="number")d.currentTime=p;else if(h==="rr_mediaState")switch(p){case"played":d.play().catch(v=>console.warn("media playback error",v));break;case"paused":d.pause();break}else h==="rr_mediaPlaybackRate"&&typeof p=="number"?d.playbackRate=p:h==="rr_mediaMuted"&&typeof p=="boolean"?d.muted=p:h==="rr_mediaLoop"&&typeof p=="boolean"?d.loop=p:h==="rr_mediaVolume"&&typeof p=="number"&&(d.volume=p)}if(n.isShadowHost)if(!d.shadowRoot)d.attachShadow({mode:"open"});else for(;d.shadowRoot.firstChild;)d.shadowRoot.removeChild(d.shadowRoot.firstChild);return d}case oe.Text:return i.createTextNode(n.isStyle&&a?af(n.textContent,l):n.textContent);case oe.CDATA:return i.createCDATASection(n.textContent);case oe.Comment:return i.createComment(n.textContent);default:return null}}o(uw,"buildNode");function Tr(n,e){let{doc:t,mirror:i,skipChild:a=!1,hackCss:l=!0,afterAppend:u,cache:d}=e;if(i.has(n.id)){let h=i.getNode(n.id),p=i.getMeta(h);if(WS(p,n))return i.getNode(n.id)}let f=uw(n,{doc:t,hackCss:l,cache:d});if(!f)return null;if(n.rootId&&i.getNode(n.rootId)!==t&&i.replace(n.rootId,t),n.type===oe.Document&&(t.close(),t.open(),n.compatMode==="BackCompat"&&n.childNodes&&n.childNodes[0].type!==oe.DocumentType&&(n.childNodes[0].type===oe.Element&&"xmlns"in n.childNodes[0].attributes&&n.childNodes[0].attributes.xmlns==="http://www.w3.org/1999/xhtml"?t.write('<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'):t.write('<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">')),f=t),i.add(f,n),(n.type===oe.Document||n.type===oe.Element)&&!a)for(let h of n.childNodes){let p=Tr(h,{doc:t,mirror:i,skipChild:!1,hackCss:l,afterAppend:u,cache:d});if(!p){console.warn("Failed to rebuild",h);continue}if(h.isShadow&&lf(f)&&f.shadowRoot)f.shadowRoot.appendChild(p);else if(n.type===oe.Document&&h.type==oe.Element){let v=p,y=null;v.childNodes.forEach(w=>{w.nodeName==="BODY"&&(y=w)}),y?(v.removeChild(y),f.appendChild(p),v.appendChild(y)):f.appendChild(p)}else f.appendChild(p);u&&u(p,h.id)}return f}o(Tr,"buildNodeWithSN");function dw(n,e){function t(i){e(i)}o(t,"walk");for(let i of n.getIds())n.has(i)&&t(n.getNode(i))}o(dw,"visit");function fw(n,e){let t=e.getMeta(n);if(t?.type!==oe.Element)return;let i=n;for(let a in t.attributes){if(!(Object.prototype.hasOwnProperty.call(t.attributes,a)&&a.startsWith("rr_")))continue;let l=t.attributes[a];a==="rr_scrollLeft"&&(i.scrollLeft=l),a==="rr_scrollTop"&&(i.scrollTop=l)}}o(fw,"handleScroll");function hf(n,e){let{doc:t,onVisit:i,hackCss:a=!0,afterAppend:l,cache:u,mirror:d=new ui}=e,f=Tr(n,{doc:t,mirror:d,skipChild:!1,hackCss:a,afterAppend:l,cache:u});return dw(d,h=>{i&&i(h),fw(h,d)}),f}o(hf,"rebuild");function Je(n,e,t=document){let i={capture:!0,passive:!0};return t.addEventListener(n,e,i),()=>t.removeEventListener(n,e,i)}o(Je,"on");var Ir=`Please stop import mirror directly. Instead of that,\r
now you can use replayer.getMirror() to access the mirror instance of a replayer,\r
or you can use record.mirror to access the mirror instance during recording.`,mf={map:{},getId(){return console.error(Ir),-1},getNode(){return console.error(Ir),null},removeNodeFromMap(){console.error(Ir)},has(){return console.error(Ir),!1},reset(){console.error(Ir)}};typeof window<"u"&&window.Proxy&&window.Reflect&&(mf=new Proxy(mf,{get(n,e,t){return e==="map"&&console.error(Ir),Reflect.get(n,e,t)}}));function Rr(n,e,t={}){let i=null,a=0;return function(...l){let u=Date.now();!a&&t.leading===!1&&(a=u);let d=e-(u-a),f=this;d<=0||d>e?(i&&(clearTimeout(i),i=null),a=u,n.apply(f,l)):!i&&t.trailing!==!1&&(i=setTimeout(()=>{a=t.leading===!1?0:Date.now(),i=null,n.apply(f,l)},d))}}o(Rr,"throttle");function Qn(n,e,t,i,a=window){let l=a.Object.getOwnPropertyDescriptor(n,e);return a.Object.defineProperty(n,e,i?t:{set(u){setTimeout(()=>{t.set.call(this,u)},0),l&&l.set&&l.set.call(this,u)}}),()=>Qn(n,e,l||{},!0)}o(Qn,"hookSetter");function Ut(n,e,t){try{if(!(e in n))return()=>{};let i=n[e],a=t(i);return typeof a=="function"&&(a.prototype=a.prototype||{},Object.defineProperties(a,{__rrweb_original__:{enumerable:!1,value:i}})),n[e]=a,()=>{n[e]=i}}catch{return()=>{}}}o(Ut,"patch");var Ar=Date.now;/[1-9][0-9]{12}/.test(Date.now().toString())||(Ar=o(()=>new Date().getTime(),"nowTimestamp"));function Fs(n){var e,t,i,a,l,u;let d=n.document;return{left:d.scrollingElement?d.scrollingElement.scrollLeft:n.pageXOffset!==void 0?n.pageXOffset:d?.documentElement.scrollLeft||((t=(e=d?.body)===null||e===void 0?void 0:e.parentElement)===null||t===void 0?void 0:t.scrollLeft)||((i=d?.body)===null||i===void 0?void 0:i.scrollLeft)||0,top:d.scrollingElement?d.scrollingElement.scrollTop:n.pageYOffset!==void 0?n.pageYOffset:d?.documentElement.scrollTop||((l=(a=d?.body)===null||a===void 0?void 0:a.parentElement)===null||l===void 0?void 0:l.scrollTop)||((u=d?.body)===null||u===void 0?void 0:u.scrollTop)||0}}o(Fs,"getWindowScroll");function Ps(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}o(Ps,"getWindowHeight");function Hs(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}o(Hs,"getWindowWidth");function gl(n){return n?n.nodeType===n.ELEMENT_NODE?n:n.parentElement:null}o(gl,"closestElementOfNode");function ze(n,e,t,i){if(!n)return!1;let a=gl(n);if(!a)return!1;try{if(typeof e=="string"){if(a.classList.contains(e)||i&&a.closest("."+e)!==null)return!0}else if(di(a,e,i))return!0}catch{}return!!(t&&(a.matches(t)||i&&a.closest(t)!==null))}o(ze,"isBlocked");function pf(n,e){return e.getId(n)!==-1}o(pf,"isSerialized");function Ws(n,e){return e.getId(n)===Kn}o(Ws,"isIgnored");function vl(n,e){if(Yn(n))return!1;let t=e.getId(n);return e.has(t)?n.parentNode&&n.parentNode.nodeType===n.DOCUMENT_NODE?!1:n.parentNode?vl(n.parentNode,e):!0:!0}o(vl,"isAncestorRemoved");function Bs(n){return!!n.changedTouches}o(Bs,"legacy_isTouchEvent");function Vs(n=window){"NodeList"in n&&!n.NodeList.prototype.forEach&&(n.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in n&&!n.DOMTokenList.prototype.forEach&&(n.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do if(this===t)return!0;while(t=t&&t.parentNode);return!1})}o(Vs,"polyfill");function gf(n){let e={},t=o((a,l)=>{let u={value:a,parent:l,children:[]};return e[a.node.id]=u,u},"putIntoMap"),i=[];for(let a of n){let{nextId:l,parentId:u}=a;if(l&&l in e){let d=e[l];if(d.parent){let f=d.parent.children.indexOf(d);d.parent.children.splice(f,0,t(a,d.parent))}else{let f=i.indexOf(d);i.splice(f,0,t(a,null))}continue}if(u in e){let d=e[u];d.children.push(t(a,d));continue}i.push(t(a,null))}return i}o(gf,"queueToResolveTrees");function yl(n,e){e(n.value);for(let t=n.children.length-1;t>=0;t--)yl(n.children[t],e)}o(yl,"iterateResolveTree");function Cn(n,e){return!!(n.nodeName==="IFRAME"&&e.getMeta(n))}o(Cn,"isSerializedIframe");function Us(n,e){return!!(n.nodeName==="LINK"&&n.nodeType===n.ELEMENT_NODE&&n.getAttribute&&n.getAttribute("rel")==="stylesheet"&&e.getMeta(n))}o(Us,"isSerializedStylesheet");function El(n,e){var t,i;let a=(i=(t=n.ownerDocument)===null||t===void 0?void 0:t.defaultView)===null||i===void 0?void 0:i.frameElement;if(!a||a===e)return{x:0,y:0,relativeScale:1,absoluteScale:1};let l=a.getBoundingClientRect(),u=El(a,e),d=l.height/a.clientHeight;return{x:l.x*u.relativeScale+u.x,y:l.y*u.relativeScale+u.y,relativeScale:d,absoluteScale:u.absoluteScale*d}}o(El,"getBaseDimension");function Qt(n){return!!n?.shadowRoot}o(Qt,"hasShadowRoot");function _r(n,e){let t=n[e[0]];return e.length===1?t:_r(t.cssRules[e[1]].cssRules,e.slice(2))}o(_r,"getNestedRule");function bl(n){let e=[...n],t=e.pop();return{positions:e,index:t}}o(bl,"getPositionsAndIndex");function vf(n){let e=new Set,t=[];for(let i=n.length;i--;){let a=n[i];e.has(a.id)||(t.push(a),e.add(a.id))}return t}o(vf,"uniqueTextMutations");var Cr=class{static{o(this,"StyleSheetMirror")}constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){var t;return(t=this.styleIDMap.get(e))!==null&&t!==void 0?t:-1}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let i;return t===void 0?i=this.id++:i=t,this.styleIDMap.set(e,i),this.idStyleMap.set(i,e),i}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}};function Sl(n){var e,t;let i=null;return((t=(e=n.getRootNode)===null||e===void 0?void 0:e.call(n))===null||t===void 0?void 0:t.nodeType)===Node.DOCUMENT_FRAGMENT_NODE&&n.getRootNode().host&&(i=n.getRootNode().host),i}o(Sl,"getShadowHost");function hw(n){let e=n,t;for(;t=Sl(e);)e=t;return e}o(hw,"getRootShadowHost");function mw(n){let e=n.ownerDocument;if(!e)return!1;let t=hw(n);return e.contains(t)}o(mw,"shadowHostInDom");function Gs(n){let e=n.ownerDocument;return e?e.contains(n)||mw(n):!1}o(Gs,"inDom");var $=(n=>(n[n.DomContentLoaded=0]="DomContentLoaded",n[n.Load=1]="Load",n[n.FullSnapshot=2]="FullSnapshot",n[n.IncrementalSnapshot=3]="IncrementalSnapshot",n[n.Meta=4]="Meta",n[n.Custom=5]="Custom",n[n.Plugin=6]="Plugin",n))($||{}),U=(n=>(n[n.Mutation=0]="Mutation",n[n.MouseMove=1]="MouseMove",n[n.MouseInteraction=2]="MouseInteraction",n[n.Scroll=3]="Scroll",n[n.ViewportResize=4]="ViewportResize",n[n.Input=5]="Input",n[n.TouchMove=6]="TouchMove",n[n.MediaInteraction=7]="MediaInteraction",n[n.StyleSheetRule=8]="StyleSheetRule",n[n.CanvasMutation=9]="CanvasMutation",n[n.Font=10]="Font",n[n.Log=11]="Log",n[n.Drag=12]="Drag",n[n.StyleDeclaration=13]="StyleDeclaration",n[n.Selection=14]="Selection",n[n.AdoptedStyleSheet=15]="AdoptedStyleSheet",n[n.CustomElement=16]="CustomElement",n))(U||{}),ae=(n=>(n[n.MouseUp=0]="MouseUp",n[n.MouseDown=1]="MouseDown",n[n.Click=2]="Click",n[n.ContextMenu=3]="ContextMenu",n[n.DblClick=4]="DblClick",n[n.Focus=5]="Focus",n[n.Blur=6]="Blur",n[n.TouchStart=7]="TouchStart",n[n.TouchMove_Departed=8]="TouchMove_Departed",n[n.TouchEnd=9]="TouchEnd",n[n.TouchCancel=10]="TouchCancel",n))(ae||{}),Xt=(n=>(n[n.Mouse=0]="Mouse",n[n.Pen=1]="Pen",n[n.Touch=2]="Touch",n))(Xt||{}),vt=(n=>(n[n["2D"]=0]="2D",n[n.WebGL=1]="WebGL",n[n.WebGL2=2]="WebGL2",n))(vt||{}),pe=(n=>(n.Start="start",n.Pause="pause",n.Resume="resume",n.Resize="resize",n.Finish="finish",n.FullsnapshotRebuilded="fullsnapshot-rebuilded",n.LoadStylesheetStart="load-stylesheet-start",n.LoadStylesheetEnd="load-stylesheet-end",n.SkipStart="skip-start",n.SkipEnd="skip-end",n.MouseInteraction="mouse-interaction",n.EventCast="event-cast",n.CustomEvent="custom-event",n.Flush="flush",n.StateChange="state-change",n.PlayBack="play-back",n.Destroy="destroy",n))(pe||{});function yf(n){return"__ln"in n}o(yf,"isNodeInLinkedList");var wl=class{static{o(this,"DoubleLinkedList")}constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let i=0;i<e;i++)t=t?.next||null;return t}addNode(e){let t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&yf(e.previousSibling)){let i=e.previousSibling.__ln.next;t.next=i,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,i&&(i.previous=t)}else if(e.nextSibling&&yf(e.nextSibling)&&e.nextSibling.__ln.previous){let i=e.nextSibling.__ln.previous;t.previous=i,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,i&&(i.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;t.next===null&&(this.tail=t),this.length++}removeNode(e){let t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}},Ef=o((n,e)=>`${n}@${e}`,"moveKey"),$s=class{static{o(this,"MutationBuffer")}constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;let e=[],t=new Set,i=new wl,a=o(f=>{let h=f,p=Kn;for(;p===Kn;)h=h&&h.nextSibling,p=h&&this.mirror.getId(h);return p},"getNextId"),l=o(f=>{if(!f.parentNode||!Gs(f)||f.parentNode.tagName==="TEXTAREA")return;let h=Yn(f.parentNode)?this.mirror.getId(Sl(f)):this.mirror.getId(f.parentNode),p=a(f);if(h===-1||p===-1)return i.addNode(f);let v=zn(f,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskTextClass:this.maskTextClass,maskTextSelector:this.maskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:o(y=>{Cn(y,this.mirror)&&this.iframeManager.addIframe(y),Us(y,this.mirror)&&this.stylesheetManager.trackLinkElement(y),Qt(f)&&this.shadowDomManager.addShadowRoot(f.shadowRoot,this.doc)},"onSerialize"),onIframeLoad:o((y,w)=>{this.iframeManager.attachIframe(y,w),this.shadowDomManager.observeAttachShadow(y)},"onIframeLoad"),onStylesheetLoad:o((y,w)=>{this.stylesheetManager.attachLinkElement(y,w)},"onStylesheetLoad")});v&&(e.push({parentId:h,nextId:p,node:v}),t.add(v.id))},"pushAdd");for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(let f of this.movedSet)bf(this.removes,f,this.mirror)&&!this.movedSet.has(f.parentNode)||l(f);for(let f of this.addedSet)!Sf(this.droppedSet,f)&&!bf(this.removes,f,this.mirror)||Sf(this.movedSet,f)?l(f):this.droppedSet.add(f);let u=null;for(;i.length;){let f=null;if(u){let h=this.mirror.getId(u.value.parentNode),p=a(u.value);h!==-1&&p!==-1&&(f=u)}if(!f){let h=i.tail;for(;h;){let p=h;if(h=h.previous,p){let v=this.mirror.getId(p.value.parentNode);if(a(p.value)===-1)continue;if(v!==-1){f=p;break}else{let w=p.value;if(w.parentNode&&w.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){let M=w.parentNode.host;if(this.mirror.getId(M)!==-1){f=p;break}}}}}}if(!f){for(;i.head;)i.removeNode(i.head.value);break}u=f.previous,i.removeNode(f.value),l(f.value)}let d={texts:this.texts.map(f=>{let h=f.node;return h.parentNode&&h.parentNode.tagName==="TEXTAREA"&&this.genTextAreaValueMutation(h.parentNode),{id:this.mirror.getId(h),value:f.value}}).filter(f=>!t.has(f.id)).filter(f=>this.mirror.has(f.id)),attributes:this.attributes.map(f=>{let{attributes:h}=f;if(typeof h.style=="string"){let p=JSON.stringify(f.styleDiff),v=JSON.stringify(f._unchangedStyles);p.length<h.style.length&&(p+v).split("var(").length===h.style.split("var(").length&&(h.style=f.styleDiff)}return{id:this.mirror.getId(f.node),attributes:h}}).filter(f=>!t.has(f.id)).filter(f=>this.mirror.has(f.id)),removes:this.removes,adds:e};!d.texts.length&&!d.attributes.length&&!d.removes.length&&!d.adds.length||(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(d))},this.genTextAreaValueMutation=e=>{let t=this.attributeMap.get(e);t||(t={node:e,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(t),this.attributeMap.set(e,t)),t.attributes.value=Array.from(e.childNodes,i=>i.textContent||"").join("")},this.processMutation=e=>{if(!Ws(e.target,this.mirror))switch(e.type){case"characterData":{let t=e.target.textContent;!ze(e.target,this.blockClass,this.blockSelector,!1)&&t!==e.oldValue&&this.texts.push({value:ml(e.target,this.maskTextClass,this.maskTextSelector,!0)&&t?this.maskTextFn?this.maskTextFn(t,gl(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{let t=e.target,i=e.attributeName,a=e.target.getAttribute(i);if(i==="value"){let u=hi(t);a=fi({element:t,maskInputOptions:this.maskInputOptions,tagName:t.tagName,type:u,value:a,maskInputFn:this.maskInputFn})}if(ze(e.target,this.blockClass,this.blockSelector,!1)||a===e.oldValue)return;let l=this.attributeMap.get(e.target);if(t.tagName==="IFRAME"&&i==="src"&&!this.keepIframeSrcFn(a))if(!t.contentDocument)i="rr_src";else return;if(l||(l={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(l),this.attributeMap.set(e.target,l)),i==="type"&&t.tagName==="INPUT"&&(e.oldValue||"").toLowerCase()==="password"&&t.setAttribute("data-rr-is-password","true"),!hl(t.tagName,i)&&(l.attributes[i]=fl(this.doc,Vt(t.tagName),Vt(i),a),i==="style")){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch{this.unattachedDoc=this.doc}let u=this.unattachedDoc.createElement("span");e.oldValue&&u.setAttribute("style",e.oldValue);for(let d of Array.from(t.style)){let f=t.style.getPropertyValue(d),h=t.style.getPropertyPriority(d);f!==u.style.getPropertyValue(d)||h!==u.style.getPropertyPriority(d)?h===""?l.styleDiff[d]=f:l.styleDiff[d]=[f,h]:l._unchangedStyles[d]=[f,h]}for(let d of Array.from(u.style))t.style.getPropertyValue(d)===""&&(l.styleDiff[d]=!1)}break}case"childList":{if(ze(e.target,this.blockClass,this.blockSelector,!0))return;if(e.target.tagName==="TEXTAREA"){this.genTextAreaValueMutation(e.target);return}e.addedNodes.forEach(t=>this.genAdds(t,e.target)),e.removedNodes.forEach(t=>{let i=this.mirror.getId(t),a=Yn(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);ze(e.target,this.blockClass,this.blockSelector,!1)||Ws(t,this.mirror)||!pf(t,this.mirror)||(this.addedSet.has(t)?(Ml(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&i===-1||vl(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[Ef(i,a)]?Ml(this.movedSet,t):this.removes.push({parentId:a,id:i,isShadow:Yn(e.target)&&jn(e.target)?!0:void 0})),this.mapRemoves.push(t))});break}}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!(this.addedSet.has(e)||this.movedSet.has(e))){if(this.mirror.hasNode(e)){if(Ws(e,this.mirror))return;this.movedSet.add(e);let i=null;t&&this.mirror.hasNode(t)&&(i=this.mirror.getId(t)),i&&i!==-1&&(this.movedMap[Ef(this.mirror.getId(e),i)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);ze(e,this.blockClass,this.blockSelector,!1)||(e.childNodes.forEach(i=>this.genAdds(i)),Qt(e)&&e.shadowRoot.childNodes.forEach(i=>{this.processedNodeManager.add(i,this),this.genAdds(i,e)}))}}}init(e){["mutationCb","blockClass","blockSelector","maskTextClass","maskTextSelector","inlineStylesheet","maskInputOptions","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(t=>{this[t]=e[t]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}};function Ml(n,e){n.delete(e),e.childNodes.forEach(t=>Ml(n,t))}o(Ml,"deepDelete");function bf(n,e,t){return n.length===0?!1:wf(n,e,t)}o(bf,"isParentRemoved");function wf(n,e,t){let{parentNode:i}=e;if(!i)return!1;let a=t.getId(i);return n.some(l=>l.id===a)?!0:wf(n,i,t)}o(wf,"_isParentRemoved");function Sf(n,e){return n.size===0?!1:Mf(n,e)}o(Sf,"isAncestorInSet");function Mf(n,e){let{parentNode:t}=e;return t?n.has(t)?!0:Mf(n,t):!1}o(Mf,"_isAncestorInSet");var mi;function xf(n){mi=n}o(xf,"registerErrorHandler");function Tf(){mi=void 0}o(Tf,"unregisterErrorHandler");var Ee=o(n=>mi?o((...t)=>{try{return n(...t)}catch(i){if(mi&&mi(i)===!0)return;throw i}},"rrwebWrapped"):n,"callbackWrapper");var An=[];function pi(n){try{if("composedPath"in n){let e=n.composedPath();if(e.length)return e[0]}else if("path"in n&&n.path.length)return n.path[0]}catch{}return n&&n.target}o(pi,"getEventTarget");function xl(n,e){var t,i;let a=new $s;An.push(a),a.init(n);let l=window.MutationObserver||window.__rrMutationObserver,u=(i=(t=window?.Zone)===null||t===void 0?void 0:t.__symbol__)===null||i===void 0?void 0:i.call(t,"MutationObserver");u&&window[u]&&(l=window[u]);let d=new l(Ee(a.processMutations.bind(a)));return d.observe(e,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),d}o(xl,"initMutationObserver");function pw({mousemoveCb:n,sampling:e,doc:t,mirror:i}){if(e.mousemove===!1)return()=>{};let a=typeof e.mousemove=="number"?e.mousemove:50,l=typeof e.mousemoveCallback=="number"?e.mousemoveCallback:500,u=[],d,f=Rr(Ee(v=>{let y=Date.now()-d;n(u.map(w=>(w.timeOffset-=y,w)),v),u=[],d=null}),l),h=Ee(Rr(Ee(v=>{let y=pi(v),{clientX:w,clientY:M}=Bs(v)?v.changedTouches[0]:v;d||(d=Ar()),u.push({x:w,y:M,id:i.getId(y),timeOffset:Ar()-d}),f(typeof DragEvent<"u"&&v instanceof DragEvent?U.Drag:v instanceof MouseEvent?U.MouseMove:U.TouchMove)}),a,{trailing:!1})),p=[Je("mousemove",h,t),Je("touchmove",h,t),Je("drag",h,t)];return Ee(()=>{p.forEach(v=>v())})}o(pw,"initMoveObserver");function gw({mouseInteractionCb:n,doc:e,mirror:t,blockClass:i,blockSelector:a,sampling:l}){if(l.mouseInteraction===!1)return()=>{};let u=l.mouseInteraction===!0||l.mouseInteraction===void 0?{}:l.mouseInteraction,d=[],f=null,h=o(p=>v=>{let y=pi(v);if(ze(y,i,a,!0))return;let w=null,M=p;if("pointerType"in v){switch(v.pointerType){case"mouse":w=Xt.Mouse;break;case"touch":w=Xt.Touch;break;case"pen":w=Xt.Pen;break}w===Xt.Touch?ae[p]===ae.MouseDown?M="TouchStart":ae[p]===ae.MouseUp&&(M="TouchEnd"):Xt.Pen}else Bs(v)&&(w=Xt.Touch);w!==null?(f=w,(M.startsWith("Touch")&&w===Xt.Touch||M.startsWith("Mouse")&&w===Xt.Mouse)&&(w=null)):ae[p]===ae.Click&&(w=f,f=null);let b=Bs(v)?v.changedTouches[0]:v;if(!b)return;let R=t.getId(y),{clientX:T,clientY:_}=b;Ee(n)(Object.assign({type:ae[M],id:R,x:T,y:_},w!==null&&{pointerType:w}))},"getHandler");return Object.keys(ae).filter(p=>Number.isNaN(Number(p))&&!p.endsWith("_Departed")&&u[p]!==!1).forEach(p=>{let v=Vt(p),y=h(p);if(window.PointerEvent)switch(ae[p]){case ae.MouseDown:case ae.MouseUp:v=v.replace("mouse","pointer");break;case ae.TouchStart:case ae.TouchEnd:return}d.push(Je(v,y,e))}),Ee(()=>{d.forEach(p=>p())})}o(gw,"initMouseInteractionObserver");function Tl({scrollCb:n,doc:e,mirror:t,blockClass:i,blockSelector:a,sampling:l}){let u=Ee(Rr(Ee(d=>{let f=pi(d);if(!f||ze(f,i,a,!0))return;let h=t.getId(f);if(f===e&&e.defaultView){let p=Fs(e.defaultView);n({id:h,x:p.left,y:p.top})}else n({id:h,x:f.scrollLeft,y:f.scrollTop})}),l.scroll||100));return Je("scroll",u,e)}o(Tl,"initScrollObserver");function vw({viewportResizeCb:n},{win:e}){let t=-1,i=-1,a=Ee(Rr(Ee(()=>{let l=Ps(),u=Hs();(t!==l||i!==u)&&(n({width:Number(u),height:Number(l)}),t=l,i=u)}),200));return Je("resize",a,e)}o(vw,"initViewportResizeObserver");var yw=["INPUT","TEXTAREA","SELECT"],If=new WeakMap;function Ew({inputCb:n,doc:e,mirror:t,blockClass:i,blockSelector:a,ignoreClass:l,ignoreSelector:u,maskInputOptions:d,maskInputFn:f,sampling:h,userTriggeredOnInput:p}){function v(_){let C=pi(_),F=_.isTrusted,G=C&&C.tagName;if(C&&G==="OPTION"&&(C=C.parentElement),!C||!G||yw.indexOf(G)<0||ze(C,i,a,!0)||C.classList.contains(l)||u&&C.matches(u))return;let Q=C.value,le=!1,X=hi(C)||"";X==="radio"||X==="checkbox"?le=C.checked:(d[G.toLowerCase()]||d[X])&&(Q=fi({element:C,maskInputOptions:d,tagName:G,type:X,value:Q,maskInputFn:f})),y(C,p?{text:Q,isChecked:le,userTriggered:F}:{text:Q,isChecked:le});let se=C.name;X==="radio"&&se&&le&&e.querySelectorAll(`input[type="radio"][name="${se}"]`).forEach(he=>{if(he!==C){let V=he.value;y(he,p?{text:V,isChecked:!le,userTriggered:!1}:{text:V,isChecked:!le})}})}o(v,"eventHandler");function y(_,C){let F=If.get(_);if(!F||F.text!==C.text||F.isChecked!==C.isChecked){If.set(_,C);let G=t.getId(_);Ee(n)(Object.assign(Object.assign({},C),{id:G}))}}o(y,"cbWithDedup");let M=(h.input==="last"?["change"]:["input","change"]).map(_=>Je(_,Ee(v),e)),b=e.defaultView;if(!b)return()=>{M.forEach(_=>_())};let R=b.Object.getOwnPropertyDescriptor(b.HTMLInputElement.prototype,"value"),T=[[b.HTMLInputElement.prototype,"value"],[b.HTMLInputElement.prototype,"checked"],[b.HTMLSelectElement.prototype,"value"],[b.HTMLTextAreaElement.prototype,"value"],[b.HTMLSelectElement.prototype,"selectedIndex"],[b.HTMLOptionElement.prototype,"selected"]];return R&&R.set&&M.push(...T.map(_=>Qn(_[0],_[1],{set(){Ee(v)({target:this,isTrusted:!1})}},!1,b))),Ee(()=>{M.forEach(_=>_())})}o(Ew,"initInputObserver");function js(n){let e=[];function t(i,a){if(qs("CSSGroupingRule")&&i.parentRule instanceof CSSGroupingRule||qs("CSSMediaRule")&&i.parentRule instanceof CSSMediaRule||qs("CSSSupportsRule")&&i.parentRule instanceof CSSSupportsRule||qs("CSSConditionRule")&&i.parentRule instanceof CSSConditionRule){let u=Array.from(i.parentRule.cssRules).indexOf(i);a.unshift(u)}else if(i.parentStyleSheet){let u=Array.from(i.parentStyleSheet.cssRules).indexOf(i);a.unshift(u)}return a}return o(t,"recurse"),t(n,e)}o(js,"getNestedCSSRulePositions");function Rn(n,e,t){let i,a;return n?(n.ownerNode?i=e.getId(n.ownerNode):a=t.getId(n),{styleId:a,id:i}):{}}o(Rn,"getIdAndStyleId");function bw({styleSheetRuleCb:n,mirror:e,stylesheetManager:t},{win:i}){if(!i.CSSStyleSheet||!i.CSSStyleSheet.prototype)return()=>{};let a=i.CSSStyleSheet.prototype.insertRule;i.CSSStyleSheet.prototype.insertRule=new Proxy(a,{apply:Ee((p,v,y)=>{let[w,M]=y,{id:b,styleId:R}=Rn(v,e,t.styleMirror);return(b&&b!==-1||R&&R!==-1)&&n({id:b,styleId:R,adds:[{rule:w,index:M}]}),p.apply(v,y)})});let l=i.CSSStyleSheet.prototype.deleteRule;i.CSSStyleSheet.prototype.deleteRule=new Proxy(l,{apply:Ee((p,v,y)=>{let[w]=y,{id:M,styleId:b}=Rn(v,e,t.styleMirror);return(M&&M!==-1||b&&b!==-1)&&n({id:M,styleId:b,removes:[{index:w}]}),p.apply(v,y)})});let u;i.CSSStyleSheet.prototype.replace&&(u=i.CSSStyleSheet.prototype.replace,i.CSSStyleSheet.prototype.replace=new Proxy(u,{apply:Ee((p,v,y)=>{let[w]=y,{id:M,styleId:b}=Rn(v,e,t.styleMirror);return(M&&M!==-1||b&&b!==-1)&&n({id:M,styleId:b,replace:w}),p.apply(v,y)})}));let d;i.CSSStyleSheet.prototype.replaceSync&&(d=i.CSSStyleSheet.prototype.replaceSync,i.CSSStyleSheet.prototype.replaceSync=new Proxy(d,{apply:Ee((p,v,y)=>{let[w]=y,{id:M,styleId:b}=Rn(v,e,t.styleMirror);return(M&&M!==-1||b&&b!==-1)&&n({id:M,styleId:b,replaceSync:w}),p.apply(v,y)})}));let f={};zs("CSSGroupingRule")?f.CSSGroupingRule=i.CSSGroupingRule:(zs("CSSMediaRule")&&(f.CSSMediaRule=i.CSSMediaRule),zs("CSSConditionRule")&&(f.CSSConditionRule=i.CSSConditionRule),zs("CSSSupportsRule")&&(f.CSSSupportsRule=i.CSSSupportsRule));let h={};return Object.entries(f).forEach(([p,v])=>{h[p]={insertRule:v.prototype.insertRule,deleteRule:v.prototype.deleteRule},v.prototype.insertRule=new Proxy(h[p].insertRule,{apply:Ee((y,w,M)=>{let[b,R]=M,{id:T,styleId:_}=Rn(w.parentStyleSheet,e,t.styleMirror);return(T&&T!==-1||_&&_!==-1)&&n({id:T,styleId:_,adds:[{rule:b,index:[...js(w),R||0]}]}),y.apply(w,M)})}),v.prototype.deleteRule=new Proxy(h[p].deleteRule,{apply:Ee((y,w,M)=>{let[b]=M,{id:R,styleId:T}=Rn(w.parentStyleSheet,e,t.styleMirror);return(R&&R!==-1||T&&T!==-1)&&n({id:R,styleId:T,removes:[{index:[...js(w),b]}]}),y.apply(w,M)})})}),Ee(()=>{i.CSSStyleSheet.prototype.insertRule=a,i.CSSStyleSheet.prototype.deleteRule=l,u&&(i.CSSStyleSheet.prototype.replace=u),d&&(i.CSSStyleSheet.prototype.replaceSync=d),Object.entries(f).forEach(([p,v])=>{v.prototype.insertRule=h[p].insertRule,v.prototype.deleteRule=h[p].deleteRule})})}o(bw,"initStyleSheetObserver");function Il({mirror:n,stylesheetManager:e},t){var i,a,l;let u=null;t.nodeName==="#document"?u=n.getId(t):u=n.getId(t.host);let d=t.nodeName==="#document"?(i=t.defaultView)===null||i===void 0?void 0:i.Document:(l=(a=t.ownerDocument)===null||a===void 0?void 0:a.defaultView)===null||l===void 0?void 0:l.ShadowRoot,f=d?.prototype?Object.getOwnPropertyDescriptor(d?.prototype,"adoptedStyleSheets"):void 0;return u===null||u===-1||!d||!f?()=>{}:(Object.defineProperty(t,"adoptedStyleSheets",{configurable:f.configurable,enumerable:f.enumerable,get(){var h;return(h=f.get)===null||h===void 0?void 0:h.call(this)},set(h){var p;let v=(p=f.set)===null||p===void 0?void 0:p.call(this,h);if(u!==null&&u!==-1)try{e.adoptStyleSheets(h,u)}catch{}return v}}),Ee(()=>{Object.defineProperty(t,"adoptedStyleSheets",{configurable:f.configurable,enumerable:f.enumerable,get:f.get,set:f.set})}))}o(Il,"initAdoptedStyleSheetObserver");function Sw({styleDeclarationCb:n,mirror:e,ignoreCSSAttributes:t,stylesheetManager:i},{win:a}){let l=a.CSSStyleDeclaration.prototype.setProperty;a.CSSStyleDeclaration.prototype.setProperty=new Proxy(l,{apply:Ee((d,f,h)=>{var p;let[v,y,w]=h;if(t.has(v))return l.apply(f,[v,y,w]);let{id:M,styleId:b}=Rn((p=f.parentRule)===null||p===void 0?void 0:p.parentStyleSheet,e,i.styleMirror);return(M&&M!==-1||b&&b!==-1)&&n({id:M,styleId:b,set:{property:v,value:y,priority:w},index:js(f.parentRule)}),d.apply(f,h)})});let u=a.CSSStyleDeclaration.prototype.removeProperty;return a.CSSStyleDeclaration.prototype.removeProperty=new Proxy(u,{apply:Ee((d,f,h)=>{var p;let[v]=h;if(t.has(v))return u.apply(f,[v]);let{id:y,styleId:w}=Rn((p=f.parentRule)===null||p===void 0?void 0:p.parentStyleSheet,e,i.styleMirror);return(y&&y!==-1||w&&w!==-1)&&n({id:y,styleId:w,remove:{property:v},index:js(f.parentRule)}),d.apply(f,h)})}),Ee(()=>{a.CSSStyleDeclaration.prototype.setProperty=l,a.CSSStyleDeclaration.prototype.removeProperty=u})}o(Sw,"initStyleDeclarationObserver");function ww({mediaInteractionCb:n,blockClass:e,blockSelector:t,mirror:i,sampling:a,doc:l}){let u=Ee(f=>Rr(Ee(h=>{let p=pi(h);if(!p||ze(p,e,t,!0))return;let{currentTime:v,volume:y,muted:w,playbackRate:M,loop:b}=p;n({type:f,id:i.getId(p),currentTime:v,volume:y,muted:w,playbackRate:M,loop:b})}),a.media||500)),d=[Je("play",u(0),l),Je("pause",u(1),l),Je("seeked",u(2),l),Je("volumechange",u(3),l),Je("ratechange",u(4),l)];return Ee(()=>{d.forEach(f=>f())})}o(ww,"initMediaInteractionObserver");function Mw({fontCb:n,doc:e}){let t=e.defaultView;if(!t)return()=>{};let i=[],a=new WeakMap,l=t.FontFace;t.FontFace=o(function(f,h,p){let v=new l(f,h,p);return a.set(v,{family:f,buffer:typeof h!="string",descriptors:p,fontSource:typeof h=="string"?h:JSON.stringify(Array.from(new Uint8Array(h)))}),v},"FontFace");let u=Ut(e.fonts,"add",function(d){return function(f){return setTimeout(Ee(()=>{let h=a.get(f);h&&(n(h),a.delete(f))}),0),d.apply(this,[f])}});return i.push(()=>{t.FontFace=l}),i.push(u),Ee(()=>{i.forEach(d=>d())})}o(Mw,"initFontObserver");function xw(n){let{doc:e,mirror:t,blockClass:i,blockSelector:a,selectionCb:l}=n,u=!0,d=Ee(()=>{let f=e.getSelection();if(!f||u&&f?.isCollapsed)return;u=f.isCollapsed||!1;let h=[],p=f.rangeCount||0;for(let v=0;v<p;v++){let y=f.getRangeAt(v),{startContainer:w,startOffset:M,endContainer:b,endOffset:R}=y;ze(w,i,a,!0)||ze(b,i,a,!0)||h.push({start:t.getId(w),startOffset:M,end:t.getId(b),endOffset:R})}l({ranges:h})});return d(),Je("selectionchange",d)}o(xw,"initSelectionObserver");function Tw({doc:n,customElementCb:e}){let t=n.defaultView;return!t||!t.customElements?()=>{}:Ut(t.customElements,"define",function(a){return function(l,u,d){try{e({define:{name:l}})}catch{console.warn(`Custom element callback failed for ${l}`)}return a.apply(this,[l,u,d])}})}o(Tw,"initCustomElementObserver");function Iw(n,e){let{mutationCb:t,mousemoveCb:i,mouseInteractionCb:a,scrollCb:l,viewportResizeCb:u,inputCb:d,mediaInteractionCb:f,styleSheetRuleCb:h,styleDeclarationCb:p,canvasMutationCb:v,fontCb:y,selectionCb:w,customElementCb:M}=n;n.mutationCb=(...b)=>{e.mutation&&e.mutation(...b),t(...b)},n.mousemoveCb=(...b)=>{e.mousemove&&e.mousemove(...b),i(...b)},n.mouseInteractionCb=(...b)=>{e.mouseInteraction&&e.mouseInteraction(...b),a(...b)},n.scrollCb=(...b)=>{e.scroll&&e.scroll(...b),l(...b)},n.viewportResizeCb=(...b)=>{e.viewportResize&&e.viewportResize(...b),u(...b)},n.inputCb=(...b)=>{e.input&&e.input(...b),d(...b)},n.mediaInteractionCb=(...b)=>{e.mediaInteaction&&e.mediaInteaction(...b),f(...b)},n.styleSheetRuleCb=(...b)=>{e.styleSheetRule&&e.styleSheetRule(...b),h(...b)},n.styleDeclarationCb=(...b)=>{e.styleDeclaration&&e.styleDeclaration(...b),p(...b)},n.canvasMutationCb=(...b)=>{e.canvasMutation&&e.canvasMutation(...b),v(...b)},n.fontCb=(...b)=>{e.font&&e.font(...b),y(...b)},n.selectionCb=(...b)=>{e.selection&&e.selection(...b),w(...b)},n.customElementCb=(...b)=>{e.customElement&&e.customElement(...b),M(...b)}}o(Iw,"mergeHooks");function Cf(n,e={}){let t=n.doc.defaultView;if(!t)return()=>{};Iw(n,e);let i;n.recordDOM&&(i=xl(n,n.doc));let a=pw(n),l=gw(n),u=Tl(n),d=vw(n,{win:t}),f=Ew(n),h=ww(n),p=o(()=>{},"styleSheetObserver"),v=o(()=>{},"adoptedStyleSheetObserver"),y=o(()=>{},"styleDeclarationObserver"),w=o(()=>{},"fontObserver");n.recordDOM&&(p=bw(n,{win:t}),v=Il(n,n.doc),y=Sw(n,{win:t}),n.collectFonts&&(w=Mw(n)));let M=xw(n),b=Tw(n),R=[];for(let T of n.plugins)R.push(T.observer(T.callback,t,T.options));return Ee(()=>{An.forEach(T=>T.reset()),i?.disconnect(),a(),l(),u(),d(),f(),h(),p(),v(),y(),w(),M(),b(),R.forEach(T=>T())})}o(Cf,"initObservers");function qs(n){return typeof window[n]<"u"}o(qs,"hasNestedCSSRule");function zs(n){return!!(typeof window[n]<"u"&&window[n].prototype&&"insertRule"in window[n].prototype&&"deleteRule"in window[n].prototype)}o(zs,"canMonkeyPatchNestedCSSRule");var gi=class{static{o(this,"CrossOriginIframeMirror")}constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,i,a){let l=i||this.getIdToRemoteIdMap(e),u=a||this.getRemoteIdToIdMap(e),d=l.get(t);return d||(d=this.generateIdFn(),l.set(t,d),u.set(d,t)),d}getIds(e,t){let i=this.getIdToRemoteIdMap(e),a=this.getRemoteIdToIdMap(e);return t.map(l=>this.getId(e,l,i,a))}getRemoteId(e,t,i){let a=i||this.getRemoteIdToIdMap(e);if(typeof t!="number")return t;let l=a.get(t);return l||-1}getRemoteIds(e,t){let i=this.getRemoteIdToIdMap(e);return t.map(a=>this.getRemoteId(e,a,i))}reset(e){if(!e){this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap;return}this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}};var Ks=class{static{o(this,"IframeManager")}constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new gi(dl),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new gi(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){var i;this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),(i=this.loadListener)===null||i===void 0||i.call(this,e),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){let t=e;if(t.data.type!=="rrweb"||t.origin!==t.data.origin||!e.source)return;let a=this.crossOriginIframeMap.get(e.source);if(!a)return;let l=this.transformCrossOriginEvent(a,t.data.event);l&&this.wrappedEmit(l,t.data.isCheckout)}transformCrossOriginEvent(e,t){var i;switch(t.type){case $.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);let a=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,a),this.patchRootIdOnNode(t.data.node,a),{timestamp:t.timestamp,type:$.IncrementalSnapshot,data:{source:U.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case $.Meta:case $.Load:case $.DomContentLoaded:return!1;case $.Plugin:return t;case $.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case $.IncrementalSnapshot:switch(t.data.source){case U.Mutation:return t.data.adds.forEach(a=>{this.replaceIds(a,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(a.node,e);let l=this.crossOriginIframeRootIdMap.get(e);l&&this.patchRootIdOnNode(a.node,l)}),t.data.removes.forEach(a=>{this.replaceIds(a,e,["parentId","id"])}),t.data.attributes.forEach(a=>{this.replaceIds(a,e,["id"])}),t.data.texts.forEach(a=>{this.replaceIds(a,e,["id"])}),t;case U.Drag:case U.TouchMove:case U.MouseMove:return t.data.positions.forEach(a=>{this.replaceIds(a,e,["id"])}),t;case U.ViewportResize:return!1;case U.MediaInteraction:case U.MouseInteraction:case U.Scroll:case U.CanvasMutation:case U.Input:return this.replaceIds(t.data,e,["id"]),t;case U.StyleSheetRule:case U.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case U.Font:return t;case U.Selection:return t.data.ranges.forEach(a=>{this.replaceIds(a,e,["start","end"])}),t;case U.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),(i=t.data.styles)===null||i===void 0||i.forEach(a=>{this.replaceStyleIds(a,e,["styleId"])}),t}}return!1}replace(e,t,i,a){for(let l of a)!Array.isArray(t[l])&&typeof t[l]!="number"||(Array.isArray(t[l])?t[l]=e.getIds(i,t[l]):t[l]=e.getId(i,t[l]));return t}replaceIds(e,t,i){return this.replace(this.crossOriginIframeMirror,e,t,i)}replaceStyleIds(e,t,i){return this.replace(this.crossOriginIframeStyleMirror,e,t,i)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(i=>{this.replaceIdOnNode(i,t)})}patchRootIdOnNode(e,t){e.type!==oe.Document&&!e.rootId&&(e.rootId=t),"childNodes"in e&&e.childNodes.forEach(i=>{this.patchRootIdOnNode(i,t)})}};var Ys=class{static{o(this,"ShadowDomManager")}constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!jn(e)||this.shadowDoms.has(e))return;this.shadowDoms.add(e);let i=xl(Object.assign(Object.assign({},this.bypassOptions),{doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this}),e);this.restoreHandlers.push(()=>i.disconnect()),this.restoreHandlers.push(Tl(Object.assign(Object.assign({},this.bypassOptions),{scrollCb:this.scrollCb,doc:e,mirror:this.mirror}))),setTimeout(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(Il({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){!e.contentWindow||!e.contentDocument||this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){let i=this;this.restoreHandlers.push(Ut(e.prototype,"attachShadow",function(a){return function(l){let u=a.call(this,l);return this.shadowRoot&&Gs(this)&&i.addShadowRoot(this.shadowRoot,t),u}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch{}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}};function Rf(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,i=Object.getOwnPropertySymbols(n);a<i.length;a++)e.indexOf(i[a])<0&&Object.prototype.propertyIsEnumerable.call(n,i[a])&&(t[i[a]]=n[i[a]]);return t}o(Rf,"__rest");function ct(n,e,t,i){function a(l){return l instanceof t?l:new t(function(u){u(l)})}return o(a,"adopt"),new(t||(t=Promise))(function(l,u){function d(p){try{h(i.next(p))}catch(v){u(v)}}o(d,"fulfilled");function f(p){try{h(i.throw(p))}catch(v){u(v)}}o(f,"rejected");function h(p){p.done?l(p.value):a(p.value).then(d,f)}o(h,"step"),h((i=i.apply(n,e||[])).next())})}o(ct,"__awaiter");var Dr="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",yi=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(vi=0;vi<Dr.length;vi++)yi[Dr.charCodeAt(vi)]=vi;var vi,Af=o(function(n){var e=new Uint8Array(n),t,i=e.length,a="";for(t=0;t<i;t+=3)a+=Dr[e[t]>>2],a+=Dr[(e[t]&3)<<4|e[t+1]>>4],a+=Dr[(e[t+1]&15)<<2|e[t+2]>>6],a+=Dr[e[t+2]&63];return i%3===2?a=a.substring(0,a.length-1)+"=":i%3===1&&(a=a.substring(0,a.length-2)+"=="),a},"encode"),_f=o(function(n){var e=n.length*.75,t=n.length,i,a=0,l,u,d,f;n[n.length-1]==="="&&(e--,n[n.length-2]==="="&&e--);var h=new ArrayBuffer(e),p=new Uint8Array(h);for(i=0;i<t;i+=4)l=yi[n.charCodeAt(i)],u=yi[n.charCodeAt(i+1)],d=yi[n.charCodeAt(i+2)],f=yi[n.charCodeAt(i+3)],p[a++]=l<<2|u>>4,p[a++]=(u&15)<<4|d>>2,p[a++]=(d&3)<<6|f&63;return h},"decode");var Df=new Map;function Cw(n,e){let t=Df.get(n);return t||(t=new Map,Df.set(n,t)),t.has(e)||t.set(e,[]),t.get(e)}o(Cw,"variableListFor");var Cl=o((n,e,t)=>{if(!n||!(Nf(n,e)||typeof n=="object"))return;let i=n.constructor.name,a=Cw(t,i),l=a.indexOf(n);return l===-1&&(l=a.length,a.push(n)),l},"saveWebGLVar");function Qs(n,e,t){if(n instanceof Array)return n.map(i=>Qs(i,e,t));if(n===null)return n;if(n instanceof Float32Array||n instanceof Float64Array||n instanceof Int32Array||n instanceof Uint32Array||n instanceof Uint8Array||n instanceof Uint16Array||n instanceof Int16Array||n instanceof Int8Array||n instanceof Uint8ClampedArray)return{rr_type:n.constructor.name,args:[Object.values(n)]};if(n instanceof ArrayBuffer){let i=n.constructor.name,a=Af(n);return{rr_type:i,base64:a}}else{if(n instanceof DataView)return{rr_type:n.constructor.name,args:[Qs(n.buffer,e,t),n.byteOffset,n.byteLength]};if(n instanceof HTMLImageElement){let i=n.constructor.name,{src:a}=n;return{rr_type:i,src:a}}else if(n instanceof HTMLCanvasElement){let i="HTMLImageElement",a=n.toDataURL();return{rr_type:i,src:a}}else{if(n instanceof ImageData)return{rr_type:n.constructor.name,args:[Qs(n.data,e,t),n.width,n.height]};if(Nf(n,e)||typeof n=="object"){let i=n.constructor.name,a=Cl(n,e,t);return{rr_type:i,index:a}}}}return n}o(Qs,"serializeArg");var Xs=o((n,e,t)=>n.map(i=>Qs(i,e,t)),"serializeArgs"),Nf=o((n,e)=>!!["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject","WebGLVertexArrayObjectOES"].filter(a=>typeof e[a]=="function").find(a=>n instanceof e[a]),"isInstanceOfWebGLObject");function Lf(n,e,t,i){let a=[],l=Object.getOwnPropertyNames(e.CanvasRenderingContext2D.prototype);for(let u of l)try{if(typeof e.CanvasRenderingContext2D.prototype[u]!="function")continue;let d=Ut(e.CanvasRenderingContext2D.prototype,u,function(f){return function(...h){return ze(this.canvas,t,i,!0)||setTimeout(()=>{let p=Xs(h,e,this);n(this.canvas,{type:vt["2D"],property:u,args:p})},0),f.apply(this,h)}});a.push(d)}catch{let f=Qn(e.CanvasRenderingContext2D.prototype,u,{set(h){n(this.canvas,{type:vt["2D"],property:u,args:[h],setter:!0})}});a.push(f)}return()=>{a.forEach(u=>u())}}o(Lf,"initCanvas2DMutationObserver");function Rw(n){return n==="experimental-webgl"?"webgl":n}o(Rw,"getNormalizedContextName");function Rl(n,e,t,i){let a=[];try{let l=Ut(n.HTMLCanvasElement.prototype,"getContext",function(u){return function(d,...f){if(!ze(this,e,t,!0)){let h=Rw(d);if("__context"in this||(this.__context=h),i&&["webgl","webgl2"].includes(h))if(f[0]&&typeof f[0]=="object"){let p=f[0];p.preserveDrawingBuffer||(p.preserveDrawingBuffer=!0)}else f.splice(0,1,{preserveDrawingBuffer:!0})}return u.apply(this,[d,...f])}});a.push(l)}catch{console.error("failed to patch HTMLCanvasElement.prototype.getContext")}return()=>{a.forEach(l=>l())}}o(Rl,"initCanvasContextObserver");function Of(n,e,t,i,a,l,u){let d=[],f=Object.getOwnPropertyNames(n);for(let h of f)if(!["isContextLost","canvas","drawingBufferWidth","drawingBufferHeight"].includes(h))try{if(typeof n[h]!="function")continue;let p=Ut(n,h,function(v){return function(...y){let w=v.apply(this,y);if(Cl(w,u,this),"tagName"in this.canvas&&!ze(this.canvas,i,a,!0)){let M=Xs(y,u,this),b={type:e,property:h,args:M};t(this.canvas,b)}return w}});d.push(p)}catch{let v=Qn(n,h,{set(y){t(this.canvas,{type:e,property:h,args:[y],setter:!0})}});d.push(v)}return d}o(Of,"patchGLPrototype");function kf(n,e,t,i,a){let l=[];return l.push(...Of(e.WebGLRenderingContext.prototype,vt.WebGL,n,t,i,a,e)),typeof e.WebGL2RenderingContext<"u"&&l.push(...Of(e.WebGL2RenderingContext.prototype,vt.WebGL2,n,t,i,a,e)),()=>{l.forEach(u=>u())}}o(kf,"initCanvasWebGLMutationObserver");function Ff(n,e){var t=e===void 0?null:e,i=n.toString(),a=i.split(`
`);a.pop(),a.shift();for(var l=a[0].search(/\S/),u=/(['"])__worker_loader_strict__(['"])/g,d=0,f=a.length;d<f;++d)a[d]=a[d].substring(l).replace(u,"$1use strict$2")+`
`;return t&&a.push("//# sourceMappingURL="+t+`
`),a}o(Ff,"funcToSource");function Aw(n,e){var t=Ff(n,e),i=new Blob(t,{type:"application/javascript"});return URL.createObjectURL(i)}o(Aw,"createURL");function Pf(n,e){var t;return o(function(a){return t=t||Aw(n,e),new Worker(t,a)},"WorkerFactory")}o(Pf,"createInlineWorkerFactory");var Hf=Pf(function(){(function(){"__worker_loader_strict__";function n(h,p,v,y){function w(M){return M instanceof v?M:new v(function(b){b(M)})}return o(w,"adopt"),new(v||(v=Promise))(function(M,b){function R(C){try{_(y.next(C))}catch(F){b(F)}}o(R,"fulfilled");function T(C){try{_(y.throw(C))}catch(F){b(F)}}o(T,"rejected");function _(C){C.done?M(C.value):w(C.value).then(R,T)}o(_,"step"),_((y=y.apply(h,p||[])).next())})}o(n,"__awaiter");for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t=typeof Uint8Array>"u"?[]:new Uint8Array(256),i=0;i<e.length;i++)t[e.charCodeAt(i)]=i;var a=o(function(h){var p=new Uint8Array(h),v,y=p.length,w="";for(v=0;v<y;v+=3)w+=e[p[v]>>2],w+=e[(p[v]&3)<<4|p[v+1]>>4],w+=e[(p[v+1]&15)<<2|p[v+2]>>6],w+=e[p[v+2]&63];return y%3===2?w=w.substring(0,w.length-1)+"=":y%3===1&&(w=w.substring(0,w.length-2)+"=="),w},"encode");let l=new Map,u=new Map;function d(h,p,v){return n(this,void 0,void 0,function*(){let y=`${h}-${p}`;if("OffscreenCanvas"in globalThis){if(u.has(y))return u.get(y);let w=new OffscreenCanvas(h,p);w.getContext("2d");let b=yield(yield w.convertToBlob(v)).arrayBuffer(),R=a(b);return u.set(y,R),R}else return""})}o(d,"getTransparentBlobFor");let f=self;f.onmessage=function(h){return n(this,void 0,void 0,function*(){if("OffscreenCanvas"in globalThis){let{id:p,bitmap:v,width:y,height:w,dataURLOptions:M}=h.data,b=d(y,w,M),R=new OffscreenCanvas(y,w);R.getContext("2d").drawImage(v,0,0),v.close();let _=yield R.convertToBlob(M),C=_.type,F=yield _.arrayBuffer(),G=a(F);if(!l.has(p)&&(yield b)===G)return l.set(p,G),f.postMessage({id:p});if(l.get(p)===G)return f.postMessage({id:p});f.postMessage({id:p,type:C,base64:G,width:y,height:w}),l.set(p,G)}else return f.postMessage({id:h.data.id})})}})()},null);var Zs=class{static{o(this,"CanvasManager")}reset(){this.pendingCanvasMutations.clear(),this.resetObservers&&this.resetObservers()}freeze(){this.frozen=!0}unfreeze(){this.frozen=!1}lock(){this.locked=!0}unlock(){this.locked=!1}constructor(e){this.pendingCanvasMutations=new Map,this.rafStamps={latestId:0,invokeId:null},this.frozen=!1,this.locked=!1,this.processMutation=(f,h)=>{(this.rafStamps.invokeId&&this.rafStamps.latestId!==this.rafStamps.invokeId||!this.rafStamps.invokeId)&&(this.rafStamps.invokeId=this.rafStamps.latestId),this.pendingCanvasMutations.has(f)||this.pendingCanvasMutations.set(f,[]),this.pendingCanvasMutations.get(f).push(h)};let{sampling:t="all",win:i,blockClass:a,blockSelector:l,recordCanvas:u,dataURLOptions:d}=e;this.mutationCb=e.mutationCb,this.mirror=e.mirror,u&&t==="all"&&this.initCanvasMutationObserver(i,a,l),u&&typeof t=="number"&&this.initCanvasFPSObserver(t,i,a,l,{dataURLOptions:d})}initCanvasFPSObserver(e,t,i,a,l){let u=Rl(t,i,a,!0),d=new Map,f=new Hf;f.onmessage=M=>{let{id:b}=M.data;if(d.set(b,!1),!("base64"in M.data))return;let{base64:R,type:T,width:_,height:C}=M.data;this.mutationCb({id:b,type:vt["2D"],commands:[{property:"clearRect",args:[0,0,_,C]},{property:"drawImage",args:[{rr_type:"ImageBitmap",args:[{rr_type:"Blob",data:[{rr_type:"ArrayBuffer",base64:R}],type:T}]},0,0]}]})};let h=1e3/e,p=0,v,y=o(()=>{let M=[];return t.document.querySelectorAll("canvas").forEach(b=>{ze(b,i,a,!0)||M.push(b)}),M},"getCanvas"),w=o(M=>{if(p&&M-p<h){v=requestAnimationFrame(w);return}p=M,y().forEach(b=>ct(this,void 0,void 0,function*(){var R;let T=this.mirror.getId(b);if(d.get(T)||b.width===0||b.height===0)return;if(d.set(T,!0),["webgl","webgl2"].includes(b.__context)){let C=b.getContext(b.__context);((R=C?.getContextAttributes())===null||R===void 0?void 0:R.preserveDrawingBuffer)===!1&&C.clear(C.COLOR_BUFFER_BIT)}let _=yield createImageBitmap(b);f.postMessage({id:T,bitmap:_,width:b.width,height:b.height,dataURLOptions:l.dataURLOptions},[_])})),v=requestAnimationFrame(w)},"takeCanvasSnapshots");v=requestAnimationFrame(w),this.resetObservers=()=>{u(),cancelAnimationFrame(v)}}initCanvasMutationObserver(e,t,i){this.startRAFTimestamping(),this.startPendingCanvasMutationFlusher();let a=Rl(e,t,i,!1),l=Lf(this.processMutation.bind(this),e,t,i),u=kf(this.processMutation.bind(this),e,t,i,this.mirror);this.resetObservers=()=>{a(),l(),u()}}startPendingCanvasMutationFlusher(){requestAnimationFrame(()=>this.flushPendingCanvasMutations())}startRAFTimestamping(){let e=o(t=>{this.rafStamps.latestId=t,requestAnimationFrame(e)},"setLatestRAFTimestamp");requestAnimationFrame(e)}flushPendingCanvasMutations(){this.pendingCanvasMutations.forEach((e,t)=>{let i=this.mirror.getId(t);this.flushPendingCanvasMutationFor(t,i)}),requestAnimationFrame(()=>this.flushPendingCanvasMutations())}flushPendingCanvasMutationFor(e,t){if(this.frozen||this.locked)return;let i=this.pendingCanvasMutations.get(e);if(!i||t===-1)return;let a=i.map(u=>Rf(u,["type"])),{type:l}=i[0];this.mutationCb({id:t,type:l,commands:a}),this.pendingCanvasMutations.delete(e)}};var Js=class{static{o(this,"StylesheetManager")}constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new Cr,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(e.length===0)return;let i={id:t,styleIds:[]},a=[];for(let l of e){let u;this.styleMirror.has(l)?u=this.styleMirror.getId(l):(u=this.styleMirror.add(l),a.push({styleId:u,rules:Array.from(l.rules||CSSRule,(d,f)=>({rule:ul(d),index:f}))})),i.styleIds.push(u)}a.length>0&&(i.styles=a),this.adoptedStyleSheetCb(i)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}};var eo=class{static{o(this,"ProcessedNodeManager")}constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){requestAnimationFrame(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(e,t){let i=this.nodeMap.get(e);return i&&Array.from(i).some(a=>a!==t)}add(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}};var Al,Be,to,_l,no=!1;try{if(Array.from([1],n=>n*2)[0]!==2){let n=document.createElement("iframe");document.body.appendChild(n),Array.from=((Al=n.contentWindow)===null||Al===void 0?void 0:Al.Array.from)||Array.from,document.body.removeChild(n)}}catch(n){console.debug("Unable to override Array.from",n)}var Gt=Os();function Zt(n={}){let{emit:e,checkoutEveryNms:t,checkoutEveryNth:i,blockClass:a="rr-block",blockSelector:l=null,ignoreClass:u="rr-ignore",ignoreSelector:d=null,maskTextClass:f="rr-mask",maskTextSelector:h=null,inlineStylesheet:p=!0,maskAllInputs:v,maskInputOptions:y,slimDOMOptions:w,maskInputFn:M,maskTextFn:b,hooks:R,packFn:T,sampling:_={},dataURLOptions:C={},mousemoveWait:F,recordDOM:G=!0,recordCanvas:Q=!1,recordCrossOriginIframes:le=!1,recordAfter:X=n.recordAfter==="DOMContentLoaded"?n.recordAfter:"load",userTriggeredOnInput:se=!1,collectFonts:he=!1,inlineImages:V=!1,plugins:W,keepIframeSrcFn:K=o(()=>!1,"keepIframeSrcFn"),ignoreCSSAttributes:Y=new Set([]),errorHandler:z}=n;xf(z);let J=le?window.parent===window:!0,ve=!1;if(!J)try{window.parent.document&&(ve=!1)}catch{ve=!0}if(J&&!e)throw new Error("emit function is required");F!==void 0&&_.mousemove===void 0&&(_.mousemove=F),Gt.reset();let et=v===!0?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,password:!0}:y!==void 0?y:{password:!0},Ue=w===!0||w==="all"?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:w==="all",headMetaDescKeywords:w==="all"}:w||{};Vs();let B,P=0,te=o(Me=>{for(let Pe of W||[])Pe.eventProcessor&&(Me=Pe.eventProcessor(Me));return T&&!ve&&(Me=T(Me)),Me},"eventProcessor");Be=o((Me,Pe)=>{var Ce;let ke=Me;if(ke.timestamp=Ar(),!((Ce=An[0])===null||Ce===void 0)&&Ce.isFrozen()&&ke.type!==$.FullSnapshot&&!(ke.type===$.IncrementalSnapshot&&ke.data.source===U.Mutation)&&An.forEach(Ge=>Ge.unfreeze()),J)e?.(te(ke),Pe);else if(ve){let Ge={type:"rrweb",event:te(ke),origin:window.location.origin,isCheckout:Pe};window.parent.postMessage(Ge,"*")}if(ke.type===$.FullSnapshot)B=ke,P=0;else if(ke.type===$.IncrementalSnapshot){if(ke.data.source===U.Mutation&&ke.data.isAttachIframe)return;P++;let Ge=i&&P>=i,Te=t&&ke.timestamp-B.timestamp>t;(Ge||Te)&&to(!0)}},"wrappedEmit");let ee=o(Me=>{Be({type:$.IncrementalSnapshot,data:Object.assign({source:U.Mutation},Me)})},"wrappedMutationEmit"),Oe=o(Me=>Be({type:$.IncrementalSnapshot,data:Object.assign({source:U.Scroll},Me)}),"wrappedScrollEmit"),ut=o(Me=>Be({type:$.IncrementalSnapshot,data:Object.assign({source:U.CanvasMutation},Me)}),"wrappedCanvasMutationEmit"),Xe=o(Me=>Be({type:$.IncrementalSnapshot,data:Object.assign({source:U.AdoptedStyleSheet},Me)}),"wrappedAdoptedStyleSheetEmit"),it=new Js({mutationCb:ee,adoptedStyleSheetCb:Xe}),en=new Ks({mirror:Gt,mutationCb:ee,stylesheetManager:it,recordCrossOriginIframes:le,wrappedEmit:Be});for(let Me of W||[])Me.getMirror&&Me.getMirror({nodeMirror:Gt,crossOriginIframeMirror:en.crossOriginIframeMirror,crossOriginIframeStyleMirror:en.crossOriginIframeStyleMirror});let hn=new eo;_l=new Zs({recordCanvas:Q,mutationCb:ut,win:window,blockClass:a,blockSelector:l,mirror:Gt,sampling:_.canvas,dataURLOptions:C});let tn=new Ys({mutationCb:ee,scrollCb:Oe,bypassOptions:{blockClass:a,blockSelector:l,maskTextClass:f,maskTextSelector:h,inlineStylesheet:p,maskInputOptions:et,dataURLOptions:C,maskTextFn:b,maskInputFn:M,recordCanvas:Q,inlineImages:V,sampling:_,slimDOMOptions:Ue,iframeManager:en,stylesheetManager:it,canvasManager:_l,keepIframeSrcFn:K,processedNodeManager:hn},mirror:Gt});to=o((Me=!1)=>{if(!G)return;Be({type:$.Meta,data:{href:window.location.href,width:Hs(),height:Ps()}},Me),it.reset(),tn.init(),An.forEach(Ce=>Ce.lock());let Pe=uf(document,{mirror:Gt,blockClass:a,blockSelector:l,maskTextClass:f,maskTextSelector:h,inlineStylesheet:p,maskAllInputs:et,maskTextFn:b,slimDOM:Ue,dataURLOptions:C,recordCanvas:Q,inlineImages:V,onSerialize:o(Ce=>{Cn(Ce,Gt)&&en.addIframe(Ce),Us(Ce,Gt)&&it.trackLinkElement(Ce),Qt(Ce)&&tn.addShadowRoot(Ce.shadowRoot,document)},"onSerialize"),onIframeLoad:o((Ce,ke)=>{en.attachIframe(Ce,ke),tn.observeAttachShadow(Ce)},"onIframeLoad"),onStylesheetLoad:o((Ce,ke)=>{it.attachLinkElement(Ce,ke)},"onStylesheetLoad"),keepIframeSrcFn:K});if(!Pe)return console.warn("Failed to snapshot the document");Be({type:$.FullSnapshot,data:{node:Pe,initialOffset:Fs(window)}},Me),An.forEach(Ce=>Ce.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&it.adoptStyleSheets(document.adoptedStyleSheets,Gt.getId(document))},"takeFullSnapshot");try{let Me=[],Pe=o(ke=>{var Ge;return Ee(Cf)({mutationCb:ee,mousemoveCb:o((Te,Fr)=>Be({type:$.IncrementalSnapshot,data:{source:Fr,positions:Te}}),"mousemoveCb"),mouseInteractionCb:o(Te=>Be({type:$.IncrementalSnapshot,data:Object.assign({source:U.MouseInteraction},Te)}),"mouseInteractionCb"),scrollCb:Oe,viewportResizeCb:o(Te=>Be({type:$.IncrementalSnapshot,data:Object.assign({source:U.ViewportResize},Te)}),"viewportResizeCb"),inputCb:o(Te=>Be({type:$.IncrementalSnapshot,data:Object.assign({source:U.Input},Te)}),"inputCb"),mediaInteractionCb:o(Te=>Be({type:$.IncrementalSnapshot,data:Object.assign({source:U.MediaInteraction},Te)}),"mediaInteractionCb"),styleSheetRuleCb:o(Te=>Be({type:$.IncrementalSnapshot,data:Object.assign({source:U.StyleSheetRule},Te)}),"styleSheetRuleCb"),styleDeclarationCb:o(Te=>Be({type:$.IncrementalSnapshot,data:Object.assign({source:U.StyleDeclaration},Te)}),"styleDeclarationCb"),canvasMutationCb:ut,fontCb:o(Te=>Be({type:$.IncrementalSnapshot,data:Object.assign({source:U.Font},Te)}),"fontCb"),selectionCb:o(Te=>{Be({type:$.IncrementalSnapshot,data:Object.assign({source:U.Selection},Te)})},"selectionCb"),customElementCb:o(Te=>{Be({type:$.IncrementalSnapshot,data:Object.assign({source:U.CustomElement},Te)})},"customElementCb"),blockClass:a,ignoreClass:u,ignoreSelector:d,maskTextClass:f,maskTextSelector:h,maskInputOptions:et,inlineStylesheet:p,sampling:_,recordDOM:G,recordCanvas:Q,inlineImages:V,userTriggeredOnInput:se,collectFonts:he,doc:ke,maskInputFn:M,maskTextFn:b,keepIframeSrcFn:K,blockSelector:l,slimDOMOptions:Ue,dataURLOptions:C,mirror:Gt,iframeManager:en,stylesheetManager:it,shadowDomManager:tn,processedNodeManager:hn,canvasManager:_l,ignoreCSSAttributes:Y,plugins:((Ge=W?.filter(Te=>Te.observer))===null||Ge===void 0?void 0:Ge.map(Te=>({observer:Te.observer,options:Te.options,callback:o(Fr=>Be({type:$.Plugin,data:{plugin:Te.name,payload:Fr}}),"callback")})))||[]},R)},"observe");en.addLoadListener(ke=>{try{Me.push(Pe(ke.contentDocument))}catch(Ge){console.warn(Ge)}});let Ce=o(()=>{to(),Me.push(Pe(document)),no=!0},"init");return document.readyState==="interactive"||document.readyState==="complete"?Ce():(Me.push(Je("DOMContentLoaded",()=>{Be({type:$.DomContentLoaded,data:{}}),X==="DOMContentLoaded"&&Ce()})),Me.push(Je("load",()=>{Be({type:$.Load,data:{}}),X==="load"&&Ce()},window))),()=>{Me.forEach(ke=>ke()),hn.destroy(),no=!1,Tf()}}catch(Me){console.warn(Me)}}o(Zt,"record");Zt.addCustomEvent=(n,e)=>{if(!no)throw new Error("please add custom event after start recording");Be({type:$.Custom,data:{tag:n,payload:e}})};Zt.freezePage=()=>{An.forEach(n=>n.freeze())};Zt.takeFullSnapshot=n=>{if(!no)throw new Error("please take full snapshot after start recording");to(n)};Zt.mirror=Gt;var be;(function(n){n[n.Document=0]="Document",n[n.DocumentType=1]="DocumentType",n[n.Element=2]="Element",n[n.Text=3]="Text",n[n.CDATA=4]="CDATA",n[n.Comment=5]="Comment"})(be||(be={}));var Dl=class{static{o(this,"Mirror$1")}constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){var t;if(!e)return-1;let i=(t=this.getMeta(e))===null||t===void 0?void 0:t.id;return i??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){let t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(i=>this.removeNodeFromMap(i))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){let i=t.id;this.idNodeMap.set(i,e),this.nodeMetaMap.set(e,t)}replace(e,t){let i=this.getNode(e);if(i){let a=this.nodeMetaMap.get(i);a&&this.nodeMetaMap.set(t,a)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function _w(){return new Dl}o(_w,"createMirror$1");function Dw(n){let e={},t=/;(?![^(]*\))/g,i=/:(.+)/,a=/\/\*.*?\*\//g;return n.replace(a,"").split(t).forEach(function(l){if(l){let u=l.split(i);u.length>1&&(e[Nl(u[0].trim())]=u[1].trim())}}),e}o(Dw,"parseCSSText");function Wf(n){let e=[];for(let t in n){let i=n[t];if(typeof i!="string")continue;let a=kw(t);e.push(`${a}: ${i};`)}return e.join(" ")}o(Wf,"toCSSText");var Nw=/-([a-z])/g,Lw=/^--[a-zA-Z0-9-]+$/,Nl=o(n=>Lw.test(n)?n:n.replace(Nw,(e,t)=>t?t.toUpperCase():""),"camelize"),Ow=/\B([A-Z])/g,kw=o(n=>n.replace(Ow,"-$1").toLowerCase(),"hyphenate"),It=class n{static{o(this,"BaseRRNode")}constructor(...e){this.parentElement=null,this.parentNode=null,this.firstChild=null,this.lastChild=null,this.previousSibling=null,this.nextSibling=null,this.ELEMENT_NODE=Ve.ELEMENT_NODE,this.TEXT_NODE=Ve.TEXT_NODE}get childNodes(){let e=[],t=this.firstChild;for(;t;)e.push(t),t=t.nextSibling;return e}contains(e){if(e instanceof n){if(e.ownerDocument!==this.ownerDocument)return!1;if(e===this)return!0}else return!1;for(;e.parentNode;){if(e.parentNode===this)return!0;e=e.parentNode}return!1}appendChild(e){throw new Error("RRDomException: Failed to execute 'appendChild' on 'RRNode': This RRNode type does not support this method.")}insertBefore(e,t){throw new Error("RRDomException: Failed to execute 'insertBefore' on 'RRNode': This RRNode type does not support this method.")}removeChild(e){throw new Error("RRDomException: Failed to execute 'removeChild' on 'RRNode': This RRNode type does not support this method.")}toString(){return"RRNode"}};function Fw(n){return class Bf extends n{static{o(this,"BaseRRDocument")}constructor(...t){super(t),this.nodeType=Ve.DOCUMENT_NODE,this.nodeName="#document",this.compatMode="CSS1Compat",this.RRNodeType=be.Document,this.textContent=null,this.ownerDocument=this}get documentElement(){return this.childNodes.find(t=>t.RRNodeType===be.Element&&t.tagName==="HTML")||null}get body(){var t;return((t=this.documentElement)===null||t===void 0?void 0:t.childNodes.find(i=>i.RRNodeType===be.Element&&i.tagName==="BODY"))||null}get head(){var t;return((t=this.documentElement)===null||t===void 0?void 0:t.childNodes.find(i=>i.RRNodeType===be.Element&&i.tagName==="HEAD"))||null}get implementation(){return this}get firstElementChild(){return this.documentElement}appendChild(t){let i=t.RRNodeType;if((i===be.Element||i===be.DocumentType)&&this.childNodes.some(l=>l.RRNodeType===i))throw new Error(`RRDomException: Failed to execute 'appendChild' on 'RRNode': Only one ${i===be.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);let a=Bl(this,t);return a.parentElement=null,a}insertBefore(t,i){let a=t.RRNodeType;if((a===be.Element||a===be.DocumentType)&&this.childNodes.some(u=>u.RRNodeType===a))throw new Error(`RRDomException: Failed to execute 'insertBefore' on 'RRNode': Only one ${a===be.Element?"RRElement":"RRDoctype"} on RRDocument allowed.`);let l=zf(this,t,i);return l.parentElement=null,l}removeChild(t){return jf(this,t)}open(){this.firstChild=null,this.lastChild=null}close(){}write(t){let i;if(t==='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "">'?i="-//W3C//DTD XHTML 1.0 Transitional//EN":t==='<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "">'&&(i="-//W3C//DTD HTML 4.0 Transitional//EN"),i){let a=this.createDocumentType("html",i,"");this.open(),this.appendChild(a)}}createDocument(t,i,a){return new Bf}createDocumentType(t,i,a){let l=new(Vf(It))(t,i,a);return l.ownerDocument=this,l}createElement(t){let i=new(Uf(It))(t);return i.ownerDocument=this,i}createElementNS(t,i){return this.createElement(i)}createTextNode(t){let i=new(Gf(It))(t);return i.ownerDocument=this,i}createComment(t){let i=new($f(It))(t);return i.ownerDocument=this,i}createCDATASection(t){let i=new(qf(It))(t);return i.ownerDocument=this,i}toString(){return"RRDocument"}}}o(Fw,"BaseRRDocumentImpl");function Vf(n){return class extends n{static{o(this,"BaseRRDocumentType")}constructor(t,i,a){super(),this.nodeType=Ve.DOCUMENT_TYPE_NODE,this.RRNodeType=be.DocumentType,this.name=t,this.publicId=i,this.systemId=a,this.nodeName=t,this.textContent=null}toString(){return"RRDocumentType"}}}o(Vf,"BaseRRDocumentTypeImpl");function Uf(n){return class extends n{static{o(this,"BaseRRElement")}constructor(t){super(),this.nodeType=Ve.ELEMENT_NODE,this.RRNodeType=be.Element,this.attributes={},this.shadowRoot=null,this.tagName=t.toUpperCase(),this.nodeName=t.toUpperCase()}get textContent(){let t="";return this.childNodes.forEach(i=>t+=i.textContent),t}set textContent(t){this.firstChild=null,this.lastChild=null,this.appendChild(this.ownerDocument.createTextNode(t))}get classList(){return new Ll(this.attributes.class,t=>{this.attributes.class=t})}get id(){return this.attributes.id||""}get className(){return this.attributes.class||""}get style(){let t=this.attributes.style?Dw(this.attributes.style):{},i=/\B([A-Z])/g;return t.setProperty=(a,l,u)=>{if(i.test(a))return;let d=Nl(a);l?t[d]=l:delete t[d],u==="important"&&(t[d]+=" !important"),this.attributes.style=Wf(t)},t.removeProperty=a=>{if(i.test(a))return"";let l=Nl(a),u=t[l]||"";return delete t[l],this.attributes.style=Wf(t),u},t}getAttribute(t){return this.attributes[t]||null}setAttribute(t,i){this.attributes[t]=i}setAttributeNS(t,i,a){this.setAttribute(i,a)}removeAttribute(t){delete this.attributes[t]}appendChild(t){return Bl(this,t)}insertBefore(t,i){return zf(this,t,i)}removeChild(t){return jf(this,t)}attachShadow(t){let i=this.ownerDocument.createElement("SHADOWROOT");return this.shadowRoot=i,i}dispatchEvent(t){return!0}toString(){let t="";for(let i in this.attributes)t+=`${i}="${this.attributes[i]}" `;return`${this.tagName} ${t}`}}}o(Uf,"BaseRRElementImpl");function Pw(n){return class extends n{static{o(this,"BaseRRMediaElement")}attachShadow(t){throw new Error("RRDomException: Failed to execute 'attachShadow' on 'RRElement': This RRElement does not support attachShadow")}play(){this.paused=!1}pause(){this.paused=!0}}}o(Pw,"BaseRRMediaElementImpl");function Gf(n){return class extends n{static{o(this,"BaseRRText")}constructor(t){super(),this.nodeType=Ve.TEXT_NODE,this.nodeName="#text",this.RRNodeType=be.Text,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return`RRText text=${JSON.stringify(this.data)}`}}}o(Gf,"BaseRRTextImpl");function $f(n){return class extends n{static{o(this,"BaseRRComment")}constructor(t){super(),this.nodeType=Ve.COMMENT_NODE,this.nodeName="#comment",this.RRNodeType=be.Comment,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return`RRComment text=${JSON.stringify(this.data)}`}}}o($f,"BaseRRCommentImpl");function qf(n){return class extends n{static{o(this,"BaseRRCDATASection")}constructor(t){super(),this.nodeName="#cdata-section",this.nodeType=Ve.CDATA_SECTION_NODE,this.RRNodeType=be.CDATA,this.data=t}get textContent(){return this.data}set textContent(t){this.data=t}toString(){return`RRCDATASection data=${JSON.stringify(this.data)}`}}}o(qf,"BaseRRCDATASectionImpl");var Ll=class{static{o(this,"ClassList")}constructor(e,t){if(this.classes=[],this.add=(...i)=>{for(let a of i){let l=String(a);this.classes.indexOf(l)>=0||this.classes.push(l)}this.onChange&&this.onChange(this.classes.join(" "))},this.remove=(...i)=>{this.classes=this.classes.filter(a=>i.indexOf(a)===-1),this.onChange&&this.onChange(this.classes.join(" "))},e){let i=e.trim().split(/\s+/);this.classes.push(...i)}this.onChange=t}};function Bl(n,e){return e.parentNode&&e.parentNode.removeChild(e),n.lastChild?(n.lastChild.nextSibling=e,e.previousSibling=n.lastChild):(n.firstChild=e,e.previousSibling=null),n.lastChild=e,e.nextSibling=null,e.parentNode=n,e.parentElement=n,e.ownerDocument=n.ownerDocument,e}o(Bl,"appendChild");function zf(n,e,t){if(!t)return Bl(n,e);if(t.parentNode!==n)throw new Error("Failed to execute 'insertBefore' on 'RRNode': The RRNode before which the new node is to be inserted is not a child of this RRNode.");return e===t||(e.parentNode&&e.parentNode.removeChild(e),e.previousSibling=t.previousSibling,t.previousSibling=e,e.nextSibling=t,e.previousSibling?e.previousSibling.nextSibling=e:n.firstChild=e,e.parentElement=n,e.parentNode=n,e.ownerDocument=n.ownerDocument),e}o(zf,"insertBefore");function jf(n,e){if(e.parentNode!==n)throw new Error("Failed to execute 'removeChild' on 'RRNode': The RRNode to be removed is not a child of this RRNode.");return e.previousSibling?e.previousSibling.nextSibling=e.nextSibling:n.firstChild=e.nextSibling,e.nextSibling?e.nextSibling.previousSibling=e.previousSibling:n.lastChild=e.previousSibling,e.previousSibling=null,e.nextSibling=null,e.parentElement=null,e.parentNode=null,e}o(jf,"removeChild");var Ve;(function(n){n[n.PLACEHOLDER=0]="PLACEHOLDER",n[n.ELEMENT_NODE=1]="ELEMENT_NODE",n[n.ATTRIBUTE_NODE=2]="ATTRIBUTE_NODE",n[n.TEXT_NODE=3]="TEXT_NODE",n[n.CDATA_SECTION_NODE=4]="CDATA_SECTION_NODE",n[n.ENTITY_REFERENCE_NODE=5]="ENTITY_REFERENCE_NODE",n[n.ENTITY_NODE=6]="ENTITY_NODE",n[n.PROCESSING_INSTRUCTION_NODE=7]="PROCESSING_INSTRUCTION_NODE",n[n.COMMENT_NODE=8]="COMMENT_NODE",n[n.DOCUMENT_NODE=9]="DOCUMENT_NODE",n[n.DOCUMENT_TYPE_NODE=10]="DOCUMENT_TYPE_NODE",n[n.DOCUMENT_FRAGMENT_NODE=11]="DOCUMENT_FRAGMENT_NODE"})(Ve||(Ve={}));var Ol={svg:"http://www.w3.org/2000/svg","xlink:href":"http://www.w3.org/1999/xlink",xmlns:"http://www.w3.org/2000/xmlns/"},Hw={altglyph:"altGlyph",altglyphdef:"altGlyphDef",altglyphitem:"altGlyphItem",animatecolor:"animateColor",animatemotion:"animateMotion",animatetransform:"animateTransform",clippath:"clipPath",feblend:"feBlend",fecolormatrix:"feColorMatrix",fecomponenttransfer:"feComponentTransfer",fecomposite:"feComposite",feconvolvematrix:"feConvolveMatrix",fediffuselighting:"feDiffuseLighting",fedisplacementmap:"feDisplacementMap",fedistantlight:"feDistantLight",fedropshadow:"feDropShadow",feflood:"feFlood",fefunca:"feFuncA",fefuncb:"feFuncB",fefuncg:"feFuncG",fefuncr:"feFuncR",fegaussianblur:"feGaussianBlur",feimage:"feImage",femerge:"feMerge",femergenode:"feMergeNode",femorphology:"feMorphology",feoffset:"feOffset",fepointlight:"fePointLight",fespecularlighting:"feSpecularLighting",fespotlight:"feSpotLight",fetile:"feTile",feturbulence:"feTurbulence",foreignobject:"foreignObject",glyphref:"glyphRef",lineargradient:"linearGradient",radialgradient:"radialGradient"},Tt=null;function bi(n,e,t,i=e.mirror||e.ownerDocument.mirror){n=Ww(n,e,t,i),Kf(n,e,t,i),Bw(n,e,t)}o(bi,"diff");function Ww(n,e,t,i){var a;if(t.afterAppend&&!Tt&&(Tt=new WeakSet,setTimeout(()=>{Tt=null},0)),!Vl(n,e)){let l=Ei(e,t.mirror,i);(a=n.parentNode)===null||a===void 0||a.replaceChild(l,n),n=l}switch(e.RRNodeType){case be.Document:{if(!Nr(n,e,t.mirror,i)){let l=i.getMeta(e);l&&(t.mirror.removeNodeFromMap(n),n.close(),n.open(),t.mirror.add(n,l),Tt?.add(n))}break}case be.Element:{let l=n,u=e;switch(u.tagName){case"IFRAME":{let d=n.contentDocument;if(!d)break;bi(d,e.contentDocument,t,i);break}}u.shadowRoot&&(l.shadowRoot||l.attachShadow({mode:"open"}),Kf(l.shadowRoot,u.shadowRoot,t,i)),Vw(l,u,i);break}}return n}o(Ww,"diffBeforeUpdatingChildren");function Bw(n,e,t){var i;switch(e.RRNodeType){case be.Document:{let a=e.scrollData;a&&t.applyScroll(a,!0);break}case be.Element:{let a=n,l=e;switch(l.scrollData&&t.applyScroll(l.scrollData,!0),l.inputData&&t.applyInput(l.inputData),l.tagName){case"AUDIO":case"VIDEO":{let u=n,d=l;d.paused!==void 0&&(d.paused?u.pause():u.play()),d.muted!==void 0&&(u.muted=d.muted),d.volume!==void 0&&(u.volume=d.volume),d.currentTime!==void 0&&(u.currentTime=d.currentTime),d.playbackRate!==void 0&&(u.playbackRate=d.playbackRate),d.loop!==void 0&&(u.loop=d.loop);break}case"CANVAS":{let u=e;if(u.rr_dataURL!==null){let d=document.createElement("img");d.onload=()=>{let f=a.getContext("2d");f&&f.drawImage(d,0,0,d.width,d.height)},d.src=u.rr_dataURL}u.canvasMutations.forEach(d=>t.applyCanvas(d.event,d.mutation,n));break}case"STYLE":{let u=a.sheet;u&&e.rules.forEach(d=>t.applyStyleSheetMutation(d,u));break}}break}case be.Text:case be.Comment:case be.CDATA:{n.textContent!==e.data&&(n.textContent=e.data);break}}Tt?.has(n)&&(Tt.delete(n),(i=t.afterAppend)===null||i===void 0||i.call(t,n,t.mirror.getId(n)))}o(Bw,"diffAfterUpdatingChildren");function Vw(n,e,t){let i=n.attributes,a=e.attributes;for(let l in a){let u=a[l],d=t.getMeta(e);if(d?.isSVG&&Ol[l])n.setAttributeNS(Ol[l],l,u);else if(e.tagName==="CANVAS"&&l==="rr_dataURL"){let f=document.createElement("img");f.src=u,f.onload=()=>{let h=n.getContext("2d");h&&h.drawImage(f,0,0,f.width,f.height)}}else{if(e.tagName==="IFRAME"&&l==="srcdoc")continue;n.setAttribute(l,u)}}for(let{name:l}of Array.from(i))l in a||n.removeAttribute(l);e.scrollLeft&&(n.scrollLeft=e.scrollLeft),e.scrollTop&&(n.scrollTop=e.scrollTop)}o(Vw,"diffProps");function Kf(n,e,t,i){let a=Array.from(n.childNodes),l=e.childNodes;if(a.length===0&&l.length===0)return;let u=0,d=a.length-1,f=0,h=l.length-1,p=a[u],v=a[d],y=l[f],w=l[h],M,b;for(;u<=d&&f<=h;)if(p===void 0)p=a[++u];else if(v===void 0)v=a[--d];else if(Nr(p,y,t.mirror,i))p=a[++u],y=l[++f];else if(Nr(v,w,t.mirror,i))v=a[--d],w=l[--h];else if(Nr(p,w,t.mirror,i)){try{n.insertBefore(p,v.nextSibling)}catch(_){console.warn(_)}p=a[++u],w=l[--h]}else if(Nr(v,y,t.mirror,i)){try{n.insertBefore(v,p)}catch(_){console.warn(_)}v=a[--d],y=l[++f]}else{if(!M){M={};for(let C=u;C<=d;C++){let F=a[C];F&&t.mirror.hasNode(F)&&(M[t.mirror.getId(F)]=C)}}b=M[i.getId(y)];let _=a[b];if(b!==void 0&&_&&Nr(_,y,t.mirror,i)){try{n.insertBefore(_,p)}catch(C){console.warn(C)}a[b]=void 0}else{let C=Ei(y,t.mirror,i);n.nodeName==="#document"&&p&&(C.nodeType===C.DOCUMENT_TYPE_NODE&&p.nodeType===p.DOCUMENT_TYPE_NODE||C.nodeType===C.ELEMENT_NODE&&p.nodeType===p.ELEMENT_NODE)&&(n.removeChild(p),t.mirror.removeNodeFromMap(p),p=a[++u]);try{n.insertBefore(C,p||null)}catch(F){console.warn(F)}}y=l[++f]}if(u>d){let _=l[h+1],C=null;for(_&&(C=t.mirror.getNode(i.getId(_)));f<=h;++f){let F=Ei(l[f],t.mirror,i);try{n.insertBefore(F,C)}catch(G){console.warn(G)}}}else if(f>h)for(;u<=d;u++){let _=a[u];if(!(!_||_.parentNode!==n))try{n.removeChild(_),t.mirror.removeNodeFromMap(_)}catch(C){console.warn(C)}}let R=n.firstChild,T=e.firstChild;for(;R!==null&&T!==null;)bi(R,T,t,i),R=R.nextSibling,T=T.nextSibling}o(Kf,"diffChildren");function Ei(n,e,t){let i=t.getId(n),a=t.getMeta(n),l=null;if(i>-1&&(l=e.getNode(i)),l!==null&&Vl(l,n))return l;switch(n.RRNodeType){case be.Document:l=new Document;break;case be.DocumentType:l=document.implementation.createDocumentType(n.name,n.publicId,n.systemId);break;case be.Element:{let u=n.tagName.toLowerCase();u=Hw[u]||u,a&&"isSVG"in a&&a?.isSVG?l=document.createElementNS(Ol.svg,u):l=document.createElement(n.tagName);break}case be.Text:l=document.createTextNode(n.data);break;case be.Comment:l=document.createComment(n.data);break;case be.CDATA:l=document.createCDATASection(n.data);break}a&&e.add(l,Object.assign({},a));try{Tt?.add(l)}catch{}return l}o(Ei,"createOrGetNode");function Vl(n,e){return n.nodeType!==e.nodeType?!1:n.nodeType!==n.ELEMENT_NODE||n.tagName.toUpperCase()===e.tagName}o(Vl,"sameNodeType");function Nr(n,e,t,i){let a=t.getId(n),l=i.getId(e);return a===-1||a!==l?!1:Vl(n,e)}o(Nr,"nodeMatching");var Xn=class n extends Fw(It){static{o(this,"RRDocument")}get unserializedId(){return this._unserializedId--}constructor(e){super(),this.UNSERIALIZED_STARTING_ID=-2,this._unserializedId=this.UNSERIALIZED_STARTING_ID,this.mirror=jw(),this.scrollData=null,e&&(this.mirror=e)}createDocument(e,t,i){return new n}createDocumentType(e,t,i){let a=new Uw(e,t,i);return a.ownerDocument=this,a}createElement(e){let t=e.toUpperCase(),i;switch(t){case"AUDIO":case"VIDEO":i=new kl(t);break;case"IFRAME":i=new Hl(t,this.mirror);break;case"CANVAS":i=new Fl(t);break;case"STYLE":i=new Pl(t);break;default:i=new Zn(t);break}return i.ownerDocument=this,i}createComment(e){let t=new $w(e);return t.ownerDocument=this,t}createCDATASection(e){let t=new qw(e);return t.ownerDocument=this,t}createTextNode(e){let t=new Gw(e);return t.ownerDocument=this,t}destroyTree(){this.firstChild=null,this.lastChild=null,this.mirror.reset()}open(){super.open(),this._unserializedId=this.UNSERIALIZED_STARTING_ID}},Uw=Vf(It),Zn=class extends Uf(It){static{o(this,"RRElement")}constructor(){super(...arguments),this.inputData=null,this.scrollData=null}},kl=class extends Pw(Zn){static{o(this,"RRMediaElement")}},Fl=class extends Zn{static{o(this,"RRCanvasElement")}constructor(){super(...arguments),this.rr_dataURL=null,this.canvasMutations=[]}getContext(){return null}},Pl=class extends Zn{static{o(this,"RRStyleElement")}constructor(){super(...arguments),this.rules=[]}},Hl=class extends Zn{static{o(this,"RRIFrameElement")}constructor(e,t){super(e),this.contentDocument=new Xn,this.contentDocument.mirror=t}},Gw=Gf(It),$w=$f(It),qw=qf(It);function zw(n){return n instanceof HTMLFormElement?"FORM":n.tagName.toUpperCase()}o(zw,"getValidTagName");function Ul(n,e,t,i){let a;switch(n.nodeType){case Ve.DOCUMENT_NODE:i&&i.nodeName==="IFRAME"?a=i.contentDocument:(a=e,a.compatMode=n.compatMode);break;case Ve.DOCUMENT_TYPE_NODE:{let u=n;a=e.createDocumentType(u.name,u.publicId,u.systemId);break}case Ve.ELEMENT_NODE:{let u=n,d=zw(u);a=e.createElement(d);let f=a;for(let{name:h,value:p}of Array.from(u.attributes))f.attributes[h]=p;u.scrollLeft&&(f.scrollLeft=u.scrollLeft),u.scrollTop&&(f.scrollTop=u.scrollTop);break}case Ve.TEXT_NODE:a=e.createTextNode(n.textContent||"");break;case Ve.CDATA_SECTION_NODE:a=e.createCDATASection(n.data);break;case Ve.COMMENT_NODE:a=e.createComment(n.textContent||"");break;case Ve.DOCUMENT_FRAGMENT_NODE:a=i.attachShadow({mode:"open"});break;default:return null}let l=t.getMeta(n);return e instanceof Xn&&(l||(l=Gl(a,e.unserializedId),t.add(n,l)),e.mirror.add(a,Object.assign({},l))),a}o(Ul,"buildFromNode");function Yf(n,e=_w(),t=new Xn){function i(a,l){let u=Ul(a,t,e,l);if(u!==null)if(l?.nodeName!=="IFRAME"&&a.nodeType!==Ve.DOCUMENT_FRAGMENT_NODE&&(l?.appendChild(u),u.parentNode=l,u.parentElement=l),a.nodeName==="IFRAME"){let d=a.contentDocument;d&&i(d,u)}else(a.nodeType===Ve.DOCUMENT_NODE||a.nodeType===Ve.ELEMENT_NODE||a.nodeType===Ve.DOCUMENT_FRAGMENT_NODE)&&(a.nodeType===Ve.ELEMENT_NODE&&a.shadowRoot&&i(a.shadowRoot,u),a.childNodes.forEach(d=>i(d,u)))}return o(i,"walk"),i(n,null),t}o(Yf,"buildFromDom");function jw(){return new Wl}o(jw,"createMirror");var Wl=class{static{o(this,"Mirror")}constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){var t;if(!e)return-1;let i=(t=this.getMeta(e))===null||t===void 0?void 0:t.id;return i??-1}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){let t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(i=>this.removeNodeFromMap(i))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){let i=t.id;this.idNodeMap.set(i,e),this.nodeMetaMap.set(e,t)}replace(e,t){let i=this.getNode(e);if(i){let a=this.nodeMetaMap.get(i);a&&this.nodeMetaMap.set(t,a)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}};function Gl(n,e){switch(n.RRNodeType){case be.Document:return{id:e,type:n.RRNodeType,childNodes:[]};case be.DocumentType:{let t=n;return{id:e,type:n.RRNodeType,name:t.name,publicId:t.publicId,systemId:t.systemId}}case be.Element:return{id:e,type:n.RRNodeType,tagName:n.tagName.toLowerCase(),attributes:{},childNodes:[]};case be.Text:return{id:e,type:n.RRNodeType,textContent:n.textContent||""};case be.Comment:return{id:e,type:n.RRNodeType,textContent:n.textContent||""};case be.CDATA:return{id:e,type:n.RRNodeType,textContent:""}}}o(Gl,"getDefaultSN");var Qf=new Map;function $l(n,e){let t=Qf.get(n);return t||(t=new Map,Qf.set(n,t)),t.has(e)||t.set(e,[]),t.get(e)}o($l,"variableListFor");function $t(n,e,t){return i=>ct(this,void 0,void 0,function*(){if(i&&typeof i=="object"&&"rr_type"in i)if(t&&(t.isUnchanged=!1),i.rr_type==="ImageBitmap"&&"args"in i){let a=yield $t(n,e,t)(i.args);return yield createImageBitmap.apply(null,a)}else if("index"in i){if(t||e===null)return i;let{rr_type:a,index:l}=i;return $l(e,a)[l]}else if("args"in i){let{rr_type:a,args:l}=i,u=window[a];return new u(...yield Promise.all(l.map($t(n,e,t))))}else{if("base64"in i)return _f(i.base64);if("src"in i){let a=n.get(i.src);if(a)return a;{let l=new Image;return l.src=i.src,n.set(i.src,l),l}}else if("data"in i&&i.rr_type==="Blob"){let a=yield Promise.all(i.data.map($t(n,e,t)));return new Blob(a,{type:i.type})}}else if(Array.isArray(i))return yield Promise.all(i.map($t(n,e,t)));return i})}o($t,"deserializeArg");function Kw(n,e){try{return e===vt.WebGL?n.getContext("webgl")||n.getContext("experimental-webgl"):n.getContext("webgl2")}catch{return null}}o(Kw,"getContext");var Yw=["WebGLActiveInfo","WebGLBuffer","WebGLFramebuffer","WebGLProgram","WebGLRenderbuffer","WebGLShader","WebGLShaderPrecisionFormat","WebGLTexture","WebGLUniformLocation","WebGLVertexArrayObject"];function Qw(n,e){if(!e?.constructor)return;let{name:t}=e.constructor;if(!Yw.includes(t))return;let i=$l(n,t);i.includes(e)||i.push(e)}o(Qw,"saveToWebGLVarMap");function Xf({mutation:n,target:e,type:t,imageMap:i,errorHandler:a}){return ct(this,void 0,void 0,function*(){try{let l=Kw(e,t);if(!l)return;if(n.setter){l[n.property]=n.args[0];return}let u=l[n.property],d=yield Promise.all(n.args.map($t(i,l))),f=u.apply(l,d);Qw(l,f);let h=!1}catch(l){a(n,l)}})}o(Xf,"webglMutation");function Zf({event:n,mutations:e,target:t,imageMap:i,errorHandler:a}){return ct(this,void 0,void 0,function*(){let l=t.getContext("2d");if(!l){a(e[0],new Error("Canvas context is null"));return}let u=e.map(f=>ct(this,void 0,void 0,function*(){return Promise.all(f.args.map($t(i,l)))}));(yield Promise.all(u)).forEach((f,h)=>{let p=e[h];try{if(p.setter){l[p.property]=p.args[0];return}let v=l[p.property];p.property==="drawImage"&&typeof p.args[0]=="string"?(i.get(n),v.apply(l,p.args)):v.apply(l,f)}catch(v){a(p,v)}})})}o(Zf,"canvasMutation");function ql({event:n,mutation:e,target:t,imageMap:i,canvasEventMap:a,errorHandler:l}){return ct(this,void 0,void 0,function*(){try{let u=a.get(n)||e,d="commands"in u?u.commands:[u];if([vt.WebGL,vt.WebGL2].includes(e.type)){for(let f=0;f<d.length;f++){let h=d[f];yield Xf({mutation:h,type:e.type,target:t,imageMap:i,errorHandler:l})}return}yield Zf({event:n,mutations:d,target:t,imageMap:i,errorHandler:l})}catch(u){l(e,u)}})}o(ql,"canvasMutation");var jl={};mS(jl,{default:()=>zl});function zl(n){return{all:n=n||new Map,on:o(function(e,t){var i=n.get(e);i?i.push(t):n.set(e,[t])},"on"),off:o(function(e,t){var i=n.get(e);i&&(t?i.splice(i.indexOf(t)>>>0,1):n.set(e,[]))},"off"),emit:o(function(e,t){var i=n.get(e);i&&i.slice().map(function(a){a(t)}),(i=n.get("*"))&&i.slice().map(function(a){a(e,t)})},"emit")}}o(zl,"mitt");function Jf(n=window,e=document){if("scrollBehavior"in e.documentElement.style&&n.__forceSmoothScrollPolyfill__!==!0)return;let t=n.HTMLElement||n.Element,i=468,a={scroll:n.scroll||n.scrollTo,scrollBy:n.scrollBy,elementScroll:t.prototype.scroll||f,scrollIntoView:t.prototype.scrollIntoView},l=n.performance&&n.performance.now?n.performance.now.bind(n.performance):Date.now;function u(T){let _=["MSIE ","Trident/","Edge/"];return new RegExp(_.join("|")).test(T)}o(u,"isMicrosoftBrowser");let d=u(n.navigator.userAgent)?1:0;function f(T,_){this.scrollLeft=T,this.scrollTop=_}o(f,"scrollElement");function h(T){return .5*(1-Math.cos(Math.PI*T))}o(h,"ease");function p(T){if(T===null||typeof T!="object"||T.behavior===void 0||T.behavior==="auto"||T.behavior==="instant")return!0;if(typeof T=="object"&&T.behavior==="smooth")return!1;throw new TypeError("behavior member of ScrollOptions "+T.behavior+" is not a valid value for enumeration ScrollBehavior.")}o(p,"shouldBailOut");function v(T,_){if(_==="Y")return T.clientHeight+d<T.scrollHeight;if(_==="X")return T.clientWidth+d<T.scrollWidth}o(v,"hasScrollableSpace");function y(T,_){let C=n.getComputedStyle(T,null)["overflow"+_];return C==="auto"||C==="scroll"}o(y,"canOverflow");function w(T){let _=v(T,"Y")&&y(T,"Y"),C=v(T,"X")&&y(T,"X");return _||C}o(w,"isScrollable");function M(T){for(;T!==e.body&&w(T)===!1;)T=T.parentNode||T.host;return T}o(M,"findScrollableParent");function b(T){let _=l(),C,F,G,Q=(_-T.startTime)/i;Q=Q>1?1:Q,C=h(Q),F=T.startX+(T.x-T.startX)*C,G=T.startY+(T.y-T.startY)*C,T.method.call(T.scrollable,F,G),(F!==T.x||G!==T.y)&&n.requestAnimationFrame(b.bind(n,T))}o(b,"step");function R(T,_,C){let F,G,Q,le,X=l();T===e.body?(F=n,G=n.scrollX||n.pageXOffset,Q=n.scrollY||n.pageYOffset,le=a.scroll):(F=T,G=T.scrollLeft,Q=T.scrollTop,le=f),b({scrollable:F,method:le,startTime:X,startX:G,startY:Q,x:_,y:C})}o(R,"smoothScroll"),n.scroll=n.scrollTo=function(){if(arguments[0]!==void 0){if(p(arguments[0])===!0){a.scroll.call(n,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:n.scrollX||n.pageXOffset,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:n.scrollY||n.pageYOffset);return}R.call(n,e.body,arguments[0].left!==void 0?~~arguments[0].left:n.scrollX||n.pageXOffset,arguments[0].top!==void 0?~~arguments[0].top:n.scrollY||n.pageYOffset)}},n.scrollBy=function(){if(arguments[0]!==void 0){if(p(arguments[0])){a.scrollBy.call(n,arguments[0].left!==void 0?arguments[0].left:typeof arguments[0]!="object"?arguments[0]:0,arguments[0].top!==void 0?arguments[0].top:arguments[1]!==void 0?arguments[1]:0);return}R.call(n,e.body,~~arguments[0].left+(n.scrollX||n.pageXOffset),~~arguments[0].top+(n.scrollY||n.pageYOffset))}},t.prototype.scroll=t.prototype.scrollTo=function(){if(arguments[0]===void 0)return;if(p(arguments[0])===!0){if(typeof arguments[0]=="number"&&arguments[1]===void 0)throw new SyntaxError("Value could not be converted");a.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left:typeof arguments[0]!="object"?~~arguments[0]:this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top:arguments[1]!==void 0?~~arguments[1]:this.scrollTop);return}let T=arguments[0].left,_=arguments[0].top;R.call(this,this,typeof T>"u"?this.scrollLeft:~~T,typeof _>"u"?this.scrollTop:~~_)},t.prototype.scrollBy=function(){if(arguments[0]!==void 0){if(p(arguments[0])===!0){a.elementScroll.call(this,arguments[0].left!==void 0?~~arguments[0].left+this.scrollLeft:~~arguments[0]+this.scrollLeft,arguments[0].top!==void 0?~~arguments[0].top+this.scrollTop:~~arguments[1]+this.scrollTop);return}this.scroll({left:~~arguments[0].left+this.scrollLeft,top:~~arguments[0].top+this.scrollTop,behavior:arguments[0].behavior})}},t.prototype.scrollIntoView=function(){if(p(arguments[0])===!0){a.scrollIntoView.call(this,arguments[0]===void 0?!0:arguments[0]);return}let T=M(this),_=T.getBoundingClientRect(),C=this.getBoundingClientRect();T!==e.body?(R.call(this,T,T.scrollLeft+C.left-_.left,T.scrollTop+C.top-_.top),n.getComputedStyle(T).position!=="fixed"&&n.scrollBy({left:_.left,top:_.top,behavior:"smooth"})):n.scrollBy({left:C.left,top:C.top,behavior:"smooth"})}}o(Jf,"polyfill");var ro=class{static{o(this,"Timer")}constructor(e=[],t){this.timeOffset=0,this.raf=null,this.actions=e,this.speed=t.speed}addAction(e){let t=this.raf===!0;if(!this.actions.length||this.actions[this.actions.length-1].delay<=e.delay)this.actions.push(e);else{let i=this.findActionIndex(e);this.actions.splice(i,0,e)}t&&(this.raf=requestAnimationFrame(this.rafCheck.bind(this)))}start(){this.timeOffset=0,this.lastTimestamp=performance.now(),this.raf=requestAnimationFrame(this.rafCheck.bind(this))}rafCheck(){let e=performance.now();for(this.timeOffset+=(e-this.lastTimestamp)*this.speed,this.lastTimestamp=e;this.actions.length;){let t=this.actions[0];if(this.timeOffset>=t.delay)this.actions.shift(),t.doAction();else break}this.actions.length>0?this.raf=requestAnimationFrame(this.rafCheck.bind(this)):this.raf=!0}clear(){this.raf&&(this.raf!==!0&&cancelAnimationFrame(this.raf),this.raf=null),this.actions.length=0}setSpeed(e){this.speed=e}isActive(){return this.raf!==null}findActionIndex(e){let t=0,i=this.actions.length-1;for(;t<=i;){let a=Math.floor((t+i)/2);if(this.actions[a].delay<e.delay)t=a+1;else if(this.actions[a].delay>e.delay)i=a-1;else return a+1}return t}};function Kl(n,e){if(n.type===$.IncrementalSnapshot&&n.data.source===U.MouseMove&&n.data.positions&&n.data.positions.length){let t=n.data.positions[0].timeOffset,i=n.timestamp+t;return n.delay=i-e,i-e}return n.delay=n.timestamp-e,n.delay}o(Kl,"addDelay");function eh(n,e){var t=typeof Symbol=="function"&&n[Symbol.iterator];if(!t)return n;var i,a,l=t.call(n),u=[];try{for(;(e===void 0||e-- >0)&&!(i=l.next()).done;)u.push(i.value)}catch(d){a={error:d}}finally{try{i&&!i.done&&(t=l.return)&&t.call(l)}finally{if(a)throw a.error}}return u}o(eh,"t");var Lr;(function(n){n[n.NotStarted=0]="NotStarted",n[n.Running=1]="Running",n[n.Stopped=2]="Stopped"})(Lr||(Lr={}));var sh={type:"xstate.init"};function Yl(n){return n===void 0?[]:[].concat(n)}o(Yl,"r");function Jn(n){return{type:"xstate.assign",assignment:n}}o(Jn,"o");function th(n,e){return typeof(n=typeof n=="string"&&e&&e[n]?e[n]:n)=="string"?{type:n}:typeof n=="function"?{type:n.name,exec:n}:n}o(th,"i");function io(n){return function(e){return n===e}}o(io,"a");function oh(n){return typeof n=="string"?{type:n}:n}o(oh,"u");function nh(n,e){return{value:n,context:e,actions:[],changed:!1,matches:io(n)}}o(nh,"c");function rh(n,e,t){var i=e,a=!1;return[n.filter(function(l){if(l.type==="xstate.assign"){a=!0;var u=Object.assign({},i);return typeof l.assignment=="function"?u=l.assignment(i,t):Object.keys(l.assignment).forEach(function(d){u[d]=typeof l.assignment[d]=="function"?l.assignment[d](i,t):l.assignment[d]}),i=u,!1}return!0}),i,a]}o(rh,"f");function Ql(n,e){e===void 0&&(e={});var t=eh(rh(Yl(n.states[n.initial].entry).map(function(u){return th(u,e.actions)}),n.context,sh),2),i=t[0],a=t[1],l={config:n,_options:e,initialState:{value:n.initial,actions:i,context:a,matches:io(n.initial)},transition:o(function(u,d){var f,h,p=typeof u=="string"?{value:u,context:n.context}:u,v=p.value,y=p.context,w=oh(d),M=n.states[v];if(M.on){var b=Yl(M.on[w.type]);try{for(var R=function(ve){var et=typeof Symbol=="function"&&Symbol.iterator,Ue=et&&ve[et],B=0;if(Ue)return Ue.call(ve);if(ve&&typeof ve.length=="number")return{next:o(function(){return ve&&B>=ve.length&&(ve=void 0),{value:ve&&ve[B++],done:!ve}},"next")};throw new TypeError(et?"Object is not iterable.":"Symbol.iterator is not defined.")}(b),T=R.next();!T.done;T=R.next()){var _=T.value;if(_===void 0)return nh(v,y);var C=typeof _=="string"?{target:_}:_,F=C.target,G=C.actions,Q=G===void 0?[]:G,le=C.cond,X=le===void 0?function(){return!0}:le,se=F===void 0,he=F??v,V=n.states[he];if(X(y,w)){var W=eh(rh((se?Yl(Q):[].concat(M.exit,Q,V.entry).filter(function(ve){return ve})).map(function(ve){return th(ve,l._options.actions)}),y,w),3),K=W[0],Y=W[1],z=W[2],J=F??v;return{value:J,context:Y,actions:K,changed:F!==v||K.length>0||z,matches:io(J)}}}}catch(ve){f={error:ve}}finally{try{T&&!T.done&&(h=R.return)&&h.call(R)}finally{if(f)throw f.error}}}return nh(v,y)},"transition")};return l}o(Ql,"s");var ih=o(function(n,e){return n.actions.forEach(function(t){var i=t.exec;return i&&i(n.context,e)})},"l");function Xl(n){var e=n.initialState,t=Lr.NotStarted,i=new Set,a={_machine:n,send:o(function(l){t===Lr.Running&&(e=n.transition(e,l),ih(e,oh(l)),i.forEach(function(u){return u(e)}))},"send"),subscribe:o(function(l){return i.add(l),l(e),{unsubscribe:o(function(){return i.delete(l)},"unsubscribe")}},"subscribe"),start:o(function(l){if(l){var u=typeof l=="object"?l:{context:n.config.context,value:l};e={value:u.value,actions:[],context:u.context,matches:io(u.value)}}return t=Lr.Running,ih(e,sh),a},"start"),stop:o(function(){return t=Lr.Stopped,i.clear(),a},"stop"),get state(){return e},get status(){return t}};return a}o(Xl,"v");function Xw(n,e){for(let t=n.length-1;t>=0;t--){let i=n[t];if(i.type===$.Meta&&i.timestamp<=e)return n.slice(t)}return n}o(Xw,"discardPriorSnapshots");function ah(n,{getCastFn:e,applyEventsSynchronously:t,emitter:i}){let a=Ql({id:"player",context:n,initial:"paused",states:{playing:{on:{PAUSE:{target:"paused",actions:["pause"]},CAST_EVENT:{target:"playing",actions:"castEvent"},END:{target:"paused",actions:["resetLastPlayedEvent","pause"]},ADD_EVENT:{target:"playing",actions:["addEvent"]}}},paused:{on:{PLAY:{target:"playing",actions:["recordTimeOffset","play"]},CAST_EVENT:{target:"paused",actions:"castEvent"},TO_LIVE:{target:"live",actions:["startLive"]},ADD_EVENT:{target:"paused",actions:["addEvent"]}}},live:{on:{ADD_EVENT:{target:"live",actions:["addEvent"]},CAST_EVENT:{target:"live",actions:["castEvent"]}}}}},{actions:{castEvent:Jn({lastPlayedEvent:o((l,u)=>u.type==="CAST_EVENT"?u.payload.event:l.lastPlayedEvent,"lastPlayedEvent")}),recordTimeOffset:Jn((l,u)=>{let d=l.timeOffset;return"payload"in u&&"timeOffset"in u.payload&&(d=u.payload.timeOffset),Object.assign(Object.assign({},l),{timeOffset:d,baselineTime:l.events[0].timestamp+d})}),play(l){var u;let{timer:d,events:f,baselineTime:h,lastPlayedEvent:p}=l;d.clear();for(let M of f)Kl(M,h);let v=Xw(f,h),y=p?.timestamp;p?.type===$.IncrementalSnapshot&&p.data.source===U.MouseMove&&(y=p.timestamp+((u=p.data.positions[0])===null||u===void 0?void 0:u.timeOffset)),h<(y||0)&&i.emit(pe.PlayBack);let w=new Array;for(let M of v)if(!(y&&y<h&&(M.timestamp<=y||M===p)))if(M.timestamp<h)w.push(M);else{let b=e(M,!1);d.addAction({doAction:o(()=>{b()},"doAction"),delay:M.delay})}t(w),i.emit(pe.Flush),d.start()},pause(l){l.timer.clear()},resetLastPlayedEvent:Jn(l=>Object.assign(Object.assign({},l),{lastPlayedEvent:null})),startLive:Jn({baselineTime:o((l,u)=>(l.timer.start(),u.type==="TO_LIVE"&&u.payload.baselineTime?u.payload.baselineTime:Date.now()),"baselineTime")}),addEvent:Jn((l,u)=>{let{baselineTime:d,timer:f,events:h}=l;if(u.type==="ADD_EVENT"){let{event:p}=u.payload;Kl(p,d);let v=h.length-1;if(!h[v]||h[v].timestamp<=p.timestamp)h.push(p);else{let M=-1,b=0;for(;b<=v;){let R=Math.floor((b+v)/2);h[R].timestamp<=p.timestamp?b=R+1:v=R-1}M===-1&&(M=b),h.splice(M,0,p)}let y=p.timestamp<d,w=e(p,y);y?w():f.isActive()&&f.addAction({doAction:o(()=>{w()},"doAction"),delay:p.delay})}return Object.assign(Object.assign({},l),{events:h})})}});return Xl(a)}o(ah,"createPlayerService");function lh(n){let e=Ql({id:"speed",context:n,initial:"normal",states:{normal:{on:{FAST_FORWARD:{target:"skipping",actions:["recordSpeed","setSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}},skipping:{on:{BACK_TO_NORMAL:{target:"normal",actions:["restoreSpeed"]},SET_SPEED:{target:"normal",actions:["setSpeed"]}}}}},{actions:{setSpeed:o((t,i)=>{"payload"in i&&t.timer.setSpeed(i.payload.speed)},"setSpeed"),recordSpeed:Jn({normalSpeed:o(t=>t.timer.speed,"normalSpeed")}),restoreSpeed:o(t=>{t.timer.setSpeed(t.normalSpeed)},"restoreSpeed")}});return Xl(e)}o(lh,"createSpeedService");var ch=o(n=>[`.${n} { background: currentColor }`,"noscript { display: none !important; }"],"rules");var so=class{static{o(this,"MediaManager")}constructor(e){this.mediaMap=new Map,this.metadataCallbackMap=new Map,this.warn=e.warn,this.service=e.service,this.speedService=e.speedService,this.emitter=e.emitter,this.getCurrentTime=e.getCurrentTime,this.emitter.on(pe.Start,this.start.bind(this)),this.emitter.on(pe.SkipStart,this.start.bind(this)),this.emitter.on(pe.Pause,this.pause.bind(this)),this.emitter.on(pe.Finish,this.pause.bind(this)),this.speedService.subscribe(()=>{this.syncAllMediaElements()})}syncAllMediaElements(e={pause:!1}){this.mediaMap.forEach((t,i)=>{this.syncTargetWithState(i),e.pause&&i.pause()})}start(){this.syncAllMediaElements()}pause(){this.syncAllMediaElements({pause:!0})}seekTo({time:e,target:t,mediaState:i}){if(i.isPlaying){let l=(e-i.lastInteractionTimeOffset)/1e3*i.playbackRate,u="duration"in t&&t.duration;if(Number.isNaN(u)){this.waitForMetadata(t);return}let d=i.currentTimeAtLastInteraction+l;t.loop&&u!==!1&&(d=d%u),t.currentTime=d}else t.pause(),t.currentTime=i.currentTimeAtLastInteraction}waitForMetadata(e){if(this.metadataCallbackMap.has(e)||!("addEventListener"in e))return;let t=o(()=>{this.metadataCallbackMap.delete(e);let i=this.mediaMap.get(e);i&&this.seekTo({time:this.getCurrentTime(),target:e,mediaState:i})},"onLoadedMetadata");this.metadataCallbackMap.set(e,t),e.addEventListener("loadedmetadata",t,{once:!0})}getMediaStateFromMutation({target:e,timeOffset:t,mutation:i}){var a,l,u,d,f;let h=this.mediaMap.get(e),{type:p,playbackRate:v,currentTime:y,muted:w,volume:M,loop:b}=i;return{isPlaying:p===0||p!==1&&(h?.isPlaying||e.getAttribute("autoplay")!==null),currentTimeAtLastInteraction:(a=y??h?.currentTimeAtLastInteraction)!==null&&a!==void 0?a:0,lastInteractionTimeOffset:t,playbackRate:(l=v??h?.playbackRate)!==null&&l!==void 0?l:1,volume:(u=M??h?.volume)!==null&&u!==void 0?u:1,muted:(d=w??h?.muted)!==null&&d!==void 0?d:e.getAttribute("muted")===null,loop:(f=b??h?.loop)!==null&&f!==void 0?f:e.getAttribute("loop")===null}}syncTargetWithState(e){let t=this.mediaMap.get(e);if(!t)return;let{muted:i,loop:a,volume:l,isPlaying:u}=t,d=this.service.state.matches("paused"),f=t.playbackRate*this.speedService.state.context.timer.speed;try{this.seekTo({time:this.getCurrentTime(),target:e,mediaState:t}),e.volume!==l&&(e.volume=l),e.muted=i,e.loop=a,e.playbackRate!==f&&(e.playbackRate=f),u&&!d?e.play():e.pause()}catch(h){this.warn(`Failed to replay media interactions: ${h.message||h}`)}}addMediaElements(e,t,i){if(!["AUDIO","VIDEO"].includes(e.nodeName))return;let a=e,l=i.getMeta(a);if(!l||!("attributes"in l))return;let u=this.service.state.matches("paused"),d=l.attributes,f=!1;d.rr_mediaState?f=d.rr_mediaState==="played":f=a.getAttribute("autoplay")!==null,f&&u&&a.pause();let h=1;typeof d.rr_mediaPlaybackRate=="number"&&(h=d.rr_mediaPlaybackRate);let p=!1;typeof d.rr_mediaMuted=="boolean"?p=d.rr_mediaMuted:p=a.getAttribute("muted")!==null;let v=!1;typeof d.rr_mediaLoop=="boolean"?v=d.rr_mediaLoop:v=a.getAttribute("loop")!==null;let y=1;typeof d.rr_mediaVolume=="number"&&(y=d.rr_mediaVolume);let w=0;typeof d.rr_mediaCurrentTime=="number"&&(w=d.rr_mediaCurrentTime),this.mediaMap.set(a,{isPlaying:f,currentTimeAtLastInteraction:w,lastInteractionTimeOffset:t,playbackRate:h,volume:y,muted:p,loop:v}),this.syncTargetWithState(a)}mediaMutation({target:e,timeOffset:t,mutation:i}){this.mediaMap.set(e,this.getMediaStateFromMutation({target:e,timeOffset:t,mutation:i})),this.syncTargetWithState(e)}isSupportedMediaElement(e){return["AUDIO","VIDEO"].includes(e.nodeName)}reset(){this.mediaMap.clear()}};var Zw=5*1e3,Jw=zl||jl,uh="[replayer]",Zl={duration:500,lineCap:"round",lineWidth:3,strokeStyle:"red"};function dh(n){return n.type==$.IncrementalSnapshot&&(n.data.source==U.TouchMove||n.data.source==U.MouseInteraction&&n.data.type==ae.TouchStart)}o(dh,"indicatesTouchDevice");var Si=class{static{o(this,"Replayer")}get timer(){return this.service.state.context.timer}constructor(e,t){if(this.usingVirtualDom=!1,this.virtualDom=new Xn,this.mouseTail=null,this.tailPositions=[],this.emitter=Jw(),this.legacy_missingNodeRetryMap={},this.cache=pl(),this.imageMap=new Map,this.canvasEventMap=new Map,this.mirror=Os(),this.styleMirror=new Cr,this.firstFullSnapshot=null,this.newDocumentQueue=[],this.mousePos=null,this.touchActive=null,this.lastMouseDownEvent=null,this.lastSelectionData=null,this.constructedStyleMutations=[],this.adoptedStyleSheets=[],this.handleResize=d=>{this.iframe.style.display="inherit";for(let f of[this.mouseTail,this.iframe])f&&(f.setAttribute("width",String(d.width)),f.setAttribute("height",String(d.height)))},this.applyEventsSynchronously=d=>{for(let f of d){switch(f.type){case $.DomContentLoaded:case $.Load:case $.Custom:continue;case $.FullSnapshot:case $.Meta:case $.Plugin:case $.IncrementalSnapshot:break}this.getCastFn(f,!0)()}},this.getCastFn=(d,f=!1)=>{let h;switch(d.type){case $.DomContentLoaded:case $.Load:break;case $.Custom:h=o(()=>{this.emitter.emit(pe.CustomEvent,d)},"castFn");break;case $.Meta:h=o(()=>this.emitter.emit(pe.Resize,{width:d.data.width,height:d.data.height}),"castFn");break;case $.FullSnapshot:h=o(()=>{var v;if(this.firstFullSnapshot){if(this.firstFullSnapshot===d){this.firstFullSnapshot=!0;return}}else this.firstFullSnapshot=!0;this.mediaManager.reset(),this.styleMirror.reset(),this.rebuildFullSnapshot(d,f),(v=this.iframe.contentWindow)===null||v===void 0||v.scrollTo(d.data.initialOffset)},"castFn");break;case $.IncrementalSnapshot:h=o(()=>{if(this.applyIncremental(d,f),!f&&(d===this.nextUserInteractionEvent&&(this.nextUserInteractionEvent=null,this.backToNormal()),this.config.skipInactive&&!this.nextUserInteractionEvent)){for(let v of this.service.state.context.events)if(!(v.timestamp<=d.timestamp)&&this.isUserInteraction(v)){v.delay-d.delay>this.config.inactivePeriodThreshold*this.speedService.state.context.timer.speed&&(this.nextUserInteractionEvent=v);break}if(this.nextUserInteractionEvent){let v=this.nextUserInteractionEvent.delay-d.delay,y={speed:Math.min(Math.round(v/Zw),this.config.maxSpeed)};this.speedService.send({type:"FAST_FORWARD",payload:y}),this.emitter.emit(pe.SkipStart,y)}}},"castFn");break}return o(()=>{h&&h();for(let y of this.config.plugins||[])y.handler&&y.handler(d,f,{replayer:this});this.service.send({type:"CAST_EVENT",payload:{event:d}});let v=this.service.state.context.events.length-1;if(!this.config.liveMode&&d===this.service.state.context.events[v]){let y=o(()=>{v<this.service.state.context.events.length-1||(this.backToNormal(),this.service.send("END"),this.emitter.emit(pe.Finish))},"finish"),w=50;d.type===$.IncrementalSnapshot&&d.data.source===U.MouseMove&&d.data.positions.length&&(w+=Math.max(0,-d.data.positions[0].timeOffset)),setTimeout(y,w)}this.emitter.emit(pe.EventCast,d)},"wrappedCastFn")},!t?.liveMode&&e.length<2)throw new Error("Replayer need at least 2 events.");let i={speed:1,maxSpeed:360,root:document.body,loadTimeout:0,skipInactive:!1,inactivePeriodThreshold:10*1e3,showWarning:!0,showDebug:!1,blockClass:"rr-block",liveMode:!1,insertStyleRules:[],triggerFocus:!0,UNSAFE_replayCanvas:!1,pauseAnimation:!0,mouseTail:Zl,useVirtualDom:!0,logger:console};this.config=Object.assign({},i,t),this.handleResize=this.handleResize.bind(this),this.getCastFn=this.getCastFn.bind(this),this.applyEventsSynchronously=this.applyEventsSynchronously.bind(this),this.emitter.on(pe.Resize,this.handleResize),this.setupDom();for(let d of this.config.plugins||[])d.getMirror&&d.getMirror({nodeMirror:this.mirror});this.emitter.on(pe.Flush,()=>{if(this.usingVirtualDom){let d={mirror:this.mirror,applyCanvas:o((f,h,p)=>{ql({event:f,mutation:h,target:p,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})},"applyCanvas"),applyInput:this.applyInput.bind(this),applyScroll:this.applyScroll.bind(this),applyStyleSheetMutation:o((f,h)=>{f.source===U.StyleSheetRule?this.applyStyleSheetRule(f,h):f.source===U.StyleDeclaration&&this.applyStyleDeclaration(f,h)},"applyStyleSheetMutation"),afterAppend:o((f,h)=>{for(let p of this.config.plugins||[])p.onBuild&&p.onBuild(f,{id:h,replayer:this})},"afterAppend")};if(this.iframe.contentDocument)try{bi(this.iframe.contentDocument,this.virtualDom,d,this.virtualDom.mirror)}catch(f){console.warn(f)}if(this.virtualDom.destroyTree(),this.usingVirtualDom=!1,Object.keys(this.legacy_missingNodeRetryMap).length)for(let f in this.legacy_missingNodeRetryMap)try{let h=this.legacy_missingNodeRetryMap[f],p=Ei(h.node,this.mirror,this.virtualDom.mirror);bi(p,h.node,d,this.virtualDom.mirror),h.node=p}catch(h){this.warn(h)}this.constructedStyleMutations.forEach(f=>{this.applyStyleSheetMutation(f)}),this.constructedStyleMutations=[],this.adoptedStyleSheets.forEach(f=>{this.applyAdoptedStyleSheet(f)}),this.adoptedStyleSheets=[]}if(this.mousePos&&(this.moveAndHover(this.mousePos.x,this.mousePos.y,this.mousePos.id,!0,this.mousePos.debugData),this.mousePos=null),this.touchActive===!0?this.mouse.classList.add("touch-active"):this.touchActive===!1&&this.mouse.classList.remove("touch-active"),this.touchActive=null,this.lastMouseDownEvent){let[d,f]=this.lastMouseDownEvent;d.dispatchEvent(f)}this.lastMouseDownEvent=null,this.lastSelectionData&&(this.applySelection(this.lastSelectionData),this.lastSelectionData=null)}),this.emitter.on(pe.PlayBack,()=>{this.firstFullSnapshot=null,this.mirror.reset(),this.styleMirror.reset(),this.mediaManager.reset()});let a=new ro([],{speed:this.config.speed});this.service=ah({events:e.map(d=>t&&t.unpackFn?t.unpackFn(d):d).sort((d,f)=>d.timestamp-f.timestamp),timer:a,timeOffset:0,baselineTime:0,lastPlayedEvent:null},{getCastFn:this.getCastFn,applyEventsSynchronously:this.applyEventsSynchronously,emitter:this.emitter}),this.service.start(),this.service.subscribe(d=>{this.emitter.emit(pe.StateChange,{player:d})}),this.speedService=lh({normalSpeed:-1,timer:a}),this.speedService.start(),this.speedService.subscribe(d=>{this.emitter.emit(pe.StateChange,{speed:d})}),this.mediaManager=new so({warn:this.warn.bind(this),service:this.service,speedService:this.speedService,emitter:this.emitter,getCurrentTime:this.getCurrentTime.bind(this)});let l=this.service.state.context.events.find(d=>d.type===$.Meta),u=this.service.state.context.events.find(d=>d.type===$.FullSnapshot);if(l){let{width:d,height:f}=l.data;setTimeout(()=>{this.emitter.emit(pe.Resize,{width:d,height:f})},0)}u&&setTimeout(()=>{var d;this.firstFullSnapshot||(this.firstFullSnapshot=u,this.rebuildFullSnapshot(u),(d=this.iframe.contentWindow)===null||d===void 0||d.scrollTo(u.data.initialOffset))},1),this.service.state.context.events.find(dh)&&this.mouse.classList.add("touch-device")}on(e,t){return this.emitter.on(e,t),this}off(e,t){return this.emitter.off(e,t),this}setConfig(e){Object.keys(e).forEach(t=>{e[t],this.config[t]=e[t]}),this.config.skipInactive||this.backToNormal(),typeof e.speed<"u"&&this.speedService.send({type:"SET_SPEED",payload:{speed:e.speed}}),typeof e.mouseTail<"u"&&(e.mouseTail===!1?this.mouseTail&&(this.mouseTail.style.display="none"):(this.mouseTail||(this.mouseTail=document.createElement("canvas"),this.mouseTail.width=Number.parseFloat(this.iframe.width),this.mouseTail.height=Number.parseFloat(this.iframe.height),this.mouseTail.classList.add("replayer-mouse-tail"),this.wrapper.insertBefore(this.mouseTail,this.iframe)),this.mouseTail.style.display="inherit"))}getMetaData(){let e=this.service.state.context.events[0],t=this.service.state.context.events[this.service.state.context.events.length-1];return{startTime:e.timestamp,endTime:t.timestamp,totalTime:t.timestamp-e.timestamp}}getCurrentTime(){return this.timer.timeOffset+this.getTimeOffset()}getTimeOffset(){let{baselineTime:e,events:t}=this.service.state.context;return e-t[0].timestamp}getMirror(){return this.mirror}play(e=0){var t,i;this.service.state.matches("paused")?this.service.send({type:"PLAY",payload:{timeOffset:e}}):(this.service.send({type:"PAUSE"}),this.service.send({type:"PLAY",payload:{timeOffset:e}})),(i=(t=this.iframe.contentDocument)===null||t===void 0?void 0:t.getElementsByTagName("html")[0])===null||i===void 0||i.classList.remove("rrweb-paused"),this.emitter.emit(pe.Start)}pause(e){var t,i;e===void 0&&this.service.state.matches("playing")&&this.service.send({type:"PAUSE"}),typeof e=="number"&&(this.play(e),this.service.send({type:"PAUSE"})),(i=(t=this.iframe.contentDocument)===null||t===void 0?void 0:t.getElementsByTagName("html")[0])===null||i===void 0||i.classList.add("rrweb-paused"),this.emitter.emit(pe.Pause)}resume(e=0){this.warn("The 'resume' was deprecated in 1.0. Please use 'play' method which has the same interface."),this.play(e),this.emitter.emit(pe.Resume)}destroy(){this.pause(),this.mirror.reset(),this.styleMirror.reset(),this.mediaManager.reset(),this.config.root.removeChild(this.wrapper),this.emitter.emit(pe.Destroy)}startLive(e){this.service.send({type:"TO_LIVE",payload:{baselineTime:e}})}addEvent(e){let t=this.config.unpackFn?this.config.unpackFn(e):e;dh(t)&&this.mouse.classList.add("touch-device"),Promise.resolve().then(()=>this.service.send({type:"ADD_EVENT",payload:{event:t}}))}enableInteract(){this.iframe.setAttribute("scrolling","auto"),this.iframe.style.pointerEvents="auto"}disableInteract(){this.iframe.setAttribute("scrolling","no"),this.iframe.style.pointerEvents="none"}resetCache(){this.cache=pl()}setupDom(){this.wrapper=document.createElement("div"),this.wrapper.classList.add("replayer-wrapper"),this.config.root.appendChild(this.wrapper),this.mouse=document.createElement("div"),this.mouse.classList.add("replayer-mouse"),this.wrapper.appendChild(this.mouse),this.config.mouseTail!==!1&&(this.mouseTail=document.createElement("canvas"),this.mouseTail.classList.add("replayer-mouse-tail"),this.mouseTail.style.display="inherit",this.wrapper.appendChild(this.mouseTail)),this.iframe=document.createElement("iframe");let e=["allow-same-origin"];this.config.UNSAFE_replayCanvas&&e.push("allow-scripts"),this.iframe.style.display="none",this.iframe.setAttribute("sandbox",e.join(" ")),this.disableInteract(),this.wrapper.appendChild(this.iframe),this.iframe.contentWindow&&this.iframe.contentDocument&&(Jf(this.iframe.contentWindow,this.iframe.contentDocument),Vs(this.iframe.contentWindow))}rebuildFullSnapshot(e,t=!1){if(!this.iframe.contentDocument)return this.warn("Looks like your replayer has been destroyed.");Object.keys(this.legacy_missingNodeRetryMap).length&&this.warn("Found unresolved missing node map",this.legacy_missingNodeRetryMap),this.legacy_missingNodeRetryMap={};let i=[],a=o((d,f)=>{if(this.collectIframeAndAttachDocument(i,d),this.mediaManager.isSupportedMediaElement(d)){let{events:h}=this.service.state.context;this.mediaManager.addMediaElements(d,e.timestamp-h[0].timestamp,this.mirror)}for(let h of this.config.plugins||[])h.onBuild&&h.onBuild(d,{id:f,replayer:this})},"afterAppend");this.usingVirtualDom&&(this.virtualDom.destroyTree(),this.usingVirtualDom=!1),this.mirror.reset(),hf(e.data.node,{doc:this.iframe.contentDocument,afterAppend:a,cache:this.cache,mirror:this.mirror}),a(this.iframe.contentDocument,e.data.node.id);for(let{mutationInQueue:d,builtNode:f}of i)this.attachDocumentToIframe(d,f),this.newDocumentQueue=this.newDocumentQueue.filter(h=>h!==d);let{documentElement:l,head:u}=this.iframe.contentDocument;this.insertStyleRules(l,u),this.service.state.matches("playing")||this.iframe.contentDocument.getElementsByTagName("html")[0].classList.add("rrweb-paused"),this.emitter.emit(pe.FullsnapshotRebuilded,e),t||this.waitForStylesheetLoad(),this.config.UNSAFE_replayCanvas&&this.preloadAllImages()}insertStyleRules(e,t){var i;let a=ch(this.config.blockClass).concat(this.config.insertStyleRules);if(this.config.pauseAnimation&&a.push("html.rrweb-paused *, html.rrweb-paused *:before, html.rrweb-paused *:after { animation-play-state: paused !important; }"),this.usingVirtualDom){let l=this.virtualDom.createElement("style");this.virtualDom.mirror.add(l,Gl(l,this.virtualDom.unserializedId)),e.insertBefore(l,t),l.rules.push({source:U.StyleSheetRule,adds:a.map((u,d)=>({rule:u,index:d}))})}else{let l=document.createElement("style");e.insertBefore(l,t);for(let u=0;u<a.length;u++)(i=l.sheet)===null||i===void 0||i.insertRule(a[u],u)}}attachDocumentToIframe(e,t){let i=this.usingVirtualDom?this.virtualDom.mirror:this.mirror,a=[],l=o((u,d)=>{this.collectIframeAndAttachDocument(a,u);let f=i.getMeta(u);if(f?.type===oe.Element&&f?.tagName.toUpperCase()==="HTML"){let{documentElement:h,head:p}=t.contentDocument;this.insertStyleRules(h,p)}if(!this.usingVirtualDom)for(let h of this.config.plugins||[])h.onBuild&&h.onBuild(u,{id:d,replayer:this})},"afterAppend");Tr(e.node,{doc:t.contentDocument,mirror:i,hackCss:!0,skipChild:!1,afterAppend:l,cache:this.cache}),l(t.contentDocument,e.node.id);for(let{mutationInQueue:u,builtNode:d}of a)this.attachDocumentToIframe(u,d),this.newDocumentQueue=this.newDocumentQueue.filter(f=>f!==u)}collectIframeAndAttachDocument(e,t){if(Cn(t,this.mirror)){let i=this.newDocumentQueue.find(a=>a.parentId===this.mirror.getId(t));i&&e.push({mutationInQueue:i,builtNode:t})}}waitForStylesheetLoad(){var e;let t=(e=this.iframe.contentDocument)===null||e===void 0?void 0:e.head;if(t){let i=new Set,a,l=this.service.state,u=o(()=>{l=this.service.state},"stateHandler");this.emitter.on(pe.Start,u),this.emitter.on(pe.Pause,u);let d=o(()=>{this.emitter.off(pe.Start,u),this.emitter.off(pe.Pause,u)},"unsubscribe");t.querySelectorAll('link[rel="stylesheet"]').forEach(f=>{f.sheet||(i.add(f),f.addEventListener("load",()=>{i.delete(f),i.size===0&&a!==-1&&(l.matches("playing")&&this.play(this.getCurrentTime()),this.emitter.emit(pe.LoadStylesheetEnd),a&&clearTimeout(a),d())}))}),i.size>0&&(this.service.send({type:"PAUSE"}),this.emitter.emit(pe.LoadStylesheetStart),a=setTimeout(()=>{l.matches("playing")&&this.play(this.getCurrentTime()),a=-1,d()},this.config.loadTimeout))}}preloadAllImages(){return ct(this,void 0,void 0,function*(){this.service.state;let e=o(()=>{this.service.state},"stateHandler");this.emitter.on(pe.Start,e),this.emitter.on(pe.Pause,e);let t=[];for(let i of this.service.state.context.events)i.type===$.IncrementalSnapshot&&i.data.source===U.CanvasMutation&&(t.push(this.deserializeAndPreloadCanvasEvents(i.data,i)),("commands"in i.data?i.data.commands:[i.data]).forEach(l=>{this.preloadImages(l,i)}));return Promise.all(t)})}preloadImages(e,t){if(e.property==="drawImage"&&typeof e.args[0]=="string"&&!this.imageMap.has(t)){let i=document.createElement("canvas"),a=i.getContext("2d"),l=a?.createImageData(i.width,i.height);l?.data,JSON.parse(e.args[0]),a?.putImageData(l,0,0)}}deserializeAndPreloadCanvasEvents(e,t){return ct(this,void 0,void 0,function*(){if(!this.canvasEventMap.has(t)){let i={isUnchanged:!0};if("commands"in e){let a=yield Promise.all(e.commands.map(l=>ct(this,void 0,void 0,function*(){let u=yield Promise.all(l.args.map($t(this.imageMap,null,i)));return Object.assign(Object.assign({},l),{args:u})})));i.isUnchanged===!1&&this.canvasEventMap.set(t,Object.assign(Object.assign({},e),{commands:a}))}else{let a=yield Promise.all(e.args.map($t(this.imageMap,null,i)));i.isUnchanged===!1&&this.canvasEventMap.set(t,Object.assign(Object.assign({},e),{args:a}))}}})}applyIncremental(e,t){var i,a,l;let{data:u}=e;switch(u.source){case U.Mutation:{try{this.applyMutation(u,t)}catch(d){this.warn(`Exception in mutation ${d.message||d}`,u)}break}case U.Drag:case U.TouchMove:case U.MouseMove:if(t){let d=u.positions[u.positions.length-1];this.mousePos={x:d.x,y:d.y,id:d.id,debugData:u}}else u.positions.forEach(d=>{let f={doAction:o(()=>{this.moveAndHover(d.x,d.y,d.id,t,u)},"doAction"),delay:d.timeOffset+e.timestamp-this.service.state.context.baselineTime};this.timer.addAction(f)}),this.timer.addAction({doAction(){},delay:e.delay-((i=u.positions[0])===null||i===void 0?void 0:i.timeOffset)});break;case U.MouseInteraction:{if(u.id===-1)break;let d=new Event(Vt(ae[u.type])),f=this.mirror.getNode(u.id);if(!f)return this.debugNodeNotFound(u,u.id);this.emitter.emit(pe.MouseInteraction,{type:u.type,target:f});let{triggerFocus:h}=this.config;switch(u.type){case ae.Blur:"blur"in f&&f.blur();break;case ae.Focus:h&&f.focus&&f.focus({preventScroll:!0});break;case ae.Click:case ae.TouchStart:case ae.TouchEnd:case ae.MouseDown:case ae.MouseUp:t?(u.type===ae.TouchStart?this.touchActive=!0:u.type===ae.TouchEnd&&(this.touchActive=!1),u.type===ae.MouseDown?this.lastMouseDownEvent=[f,d]:u.type===ae.MouseUp&&(this.lastMouseDownEvent=null),this.mousePos={x:u.x||0,y:u.y||0,id:u.id,debugData:u}):(u.type===ae.TouchStart&&(this.tailPositions.length=0),this.moveAndHover(u.x||0,u.y||0,u.id,t,u),u.type===ae.Click?(this.mouse.classList.remove("active"),this.mouse.offsetWidth,this.mouse.classList.add("active")):u.type===ae.TouchStart?(this.mouse.offsetWidth,this.mouse.classList.add("touch-active")):u.type===ae.TouchEnd?this.mouse.classList.remove("touch-active"):f.dispatchEvent(d));break;case ae.TouchCancel:t?this.touchActive=!1:this.mouse.classList.remove("touch-active");break;default:f.dispatchEvent(d)}break}case U.Scroll:{if(u.id===-1)break;if(this.usingVirtualDom){let d=this.virtualDom.mirror.getNode(u.id);if(!d)return this.debugNodeNotFound(u,u.id);d.scrollData=u;break}this.applyScroll(u,t);break}case U.ViewportResize:this.emitter.emit(pe.Resize,{width:u.width,height:u.height});break;case U.Input:{if(u.id===-1)break;if(this.usingVirtualDom){let d=this.virtualDom.mirror.getNode(u.id);if(!d)return this.debugNodeNotFound(u,u.id);d.inputData=u;break}this.applyInput(u);break}case U.MediaInteraction:{let d=this.usingVirtualDom?this.virtualDom.mirror.getNode(u.id):this.mirror.getNode(u.id);if(!d)return this.debugNodeNotFound(u,u.id);let f=d,{events:h}=this.service.state.context;this.mediaManager.mediaMutation({target:f,timeOffset:e.timestamp-h[0].timestamp,mutation:u});break}case U.StyleSheetRule:case U.StyleDeclaration:{this.usingVirtualDom?u.styleId?this.constructedStyleMutations.push(u):u.id&&((a=this.virtualDom.mirror.getNode(u.id))===null||a===void 0||a.rules.push(u)):this.applyStyleSheetMutation(u);break}case U.CanvasMutation:{if(!this.config.UNSAFE_replayCanvas)return;if(this.usingVirtualDom){let d=this.virtualDom.mirror.getNode(u.id);if(!d)return this.debugNodeNotFound(u,u.id);d.canvasMutations.push({event:e,mutation:u})}else{let d=this.mirror.getNode(u.id);if(!d)return this.debugNodeNotFound(u,u.id);ql({event:e,mutation:u,target:d,imageMap:this.imageMap,canvasEventMap:this.canvasEventMap,errorHandler:this.warnCanvasMutationFailed.bind(this)})}break}case U.Font:{try{let d=new FontFace(u.family,u.buffer?new Uint8Array(JSON.parse(u.fontSource)):u.fontSource,u.descriptors);(l=this.iframe.contentDocument)===null||l===void 0||l.fonts.add(d)}catch(d){this.warn(d)}break}case U.Selection:{if(t){this.lastSelectionData=u;break}this.applySelection(u);break}case U.AdoptedStyleSheet:{this.usingVirtualDom?this.adoptedStyleSheets.push(u):this.applyAdoptedStyleSheet(u);break}}}applyMutation(e,t){if(this.config.useVirtualDom&&!this.usingVirtualDom&&t&&(this.usingVirtualDom=!0,Yf(this.iframe.contentDocument,this.mirror,this.virtualDom),Object.keys(this.legacy_missingNodeRetryMap).length))for(let h in this.legacy_missingNodeRetryMap)try{let p=this.legacy_missingNodeRetryMap[h],v=Ul(p.node,this.virtualDom,this.mirror);v&&(p.node=v)}catch(p){this.warn(p)}let i=this.usingVirtualDom?this.virtualDom.mirror:this.mirror;e.removes=e.removes.filter(h=>i.getNode(h.id)?!0:(this.warnNodeNotFound(e,h.id),!1)),e.removes.forEach(h=>{var p;let v=i.getNode(h.id);if(!v)return;let y=i.getNode(h.parentId);if(!y)return this.warnNodeNotFound(e,h.parentId);if(h.isShadow&&Qt(y)&&(y=y.shadowRoot),i.removeNodeFromMap(v),y)try{y.removeChild(v),this.usingVirtualDom&&v.nodeName==="#text"&&y.nodeName==="STYLE"&&((p=y.rules)===null||p===void 0?void 0:p.length)>0&&(y.rules=[])}catch(w){if(w instanceof DOMException)this.warn("parent could not remove child in mutation",y,v,e);else throw w}});let a=Object.assign({},this.legacy_missingNodeRetryMap),l=[],u=o(h=>{let p=null;return h.nextId&&(p=i.getNode(h.nextId)),h.nextId!==null&&h.nextId!==void 0&&h.nextId!==-1&&!p},"nextNotInDOM"),d=o(h=>{var p,v;if(!this.iframe.contentDocument)return this.warn("Looks like your replayer has been destroyed.");let y=i.getNode(h.parentId);if(!y)return h.node.type===oe.Document?this.newDocumentQueue.push(h):l.push(h);h.node.isShadow&&(Qt(y)||y.attachShadow({mode:"open"}),y=y.shadowRoot);let w=null,M=null;if(h.previousId&&(w=i.getNode(h.previousId)),h.nextId&&(M=i.getNode(h.nextId)),u(h))return l.push(h);if(h.node.rootId&&!i.getNode(h.node.rootId))return;let b=h.node.rootId?i.getNode(h.node.rootId):this.usingVirtualDom?this.virtualDom:this.iframe.contentDocument;if(Cn(y,i)){this.attachDocumentToIframe(h,y);return}let R=o((C,F)=>{if(!this.usingVirtualDom)for(let G of this.config.plugins||[])G.onBuild&&G.onBuild(C,{id:F,replayer:this})},"afterAppend"),T=Tr(h.node,{doc:b,mirror:i,skipChild:!0,hackCss:!0,cache:this.cache,afterAppend:R});if(h.previousId===-1||h.nextId===-1){a[h.node.id]={node:T,mutation:h};return}let _=i.getMeta(y);if(_&&_.type===oe.Element&&_.tagName==="textarea"&&h.node.type===oe.Text){let C=Array.isArray(y.childNodes)?y.childNodes:Array.from(y.childNodes);for(let F of C)F.nodeType===y.TEXT_NODE&&y.removeChild(F)}else if(_?.type===oe.Document){let C=y;h.node.type===oe.DocumentType&&((p=C.childNodes[0])===null||p===void 0?void 0:p.nodeType)===Node.DOCUMENT_TYPE_NODE&&C.removeChild(C.childNodes[0]),T.nodeName==="HTML"&&C.documentElement&&C.removeChild(C.documentElement)}if(w&&w.nextSibling&&w.nextSibling.parentNode?y.insertBefore(T,w.nextSibling):M&&M.parentNode?y.contains(M)?y.insertBefore(T,M):y.insertBefore(T,null):y.appendChild(T),R(T,h.node.id),this.usingVirtualDom&&T.nodeName==="#text"&&y.nodeName==="STYLE"&&((v=y.rules)===null||v===void 0?void 0:v.length)>0&&(y.rules=[]),Cn(T,this.mirror)){let C=this.mirror.getId(T),F=this.newDocumentQueue.find(G=>G.parentId===C);F&&(this.attachDocumentToIframe(F,T),this.newDocumentQueue=this.newDocumentQueue.filter(G=>G!==F))}(h.previousId||h.nextId)&&this.legacy_resolveMissingNode(a,y,T,h)},"appendNode");e.adds.forEach(h=>{d(h)});let f=Date.now();for(;l.length;){let h=gf(l);if(l.length=0,Date.now()-f>500){this.warn("Timeout in the loop, please check the resolve tree data:",h);break}for(let p of h)i.getNode(p.value.parentId)?yl(p,y=>{d(y)}):this.debug("Drop resolve tree since there is no parent for the root node.",p)}Object.keys(a).length&&Object.assign(this.legacy_missingNodeRetryMap,a),vf(e.texts).forEach(h=>{var p;let v=i.getNode(h.id);if(!v)return e.removes.find(y=>y.id===h.id)?void 0:this.warnNodeNotFound(e,h.id);if(v.textContent=h.value,this.usingVirtualDom){let y=v.parentNode;((p=y?.rules)===null||p===void 0?void 0:p.length)>0&&(y.rules=[])}}),e.attributes.forEach(h=>{var p;let v=i.getNode(h.id);if(!v)return e.removes.find(y=>y.id===h.id)?void 0:this.warnNodeNotFound(e,h.id);for(let y in h.attributes)if(typeof y=="string"){let w=h.attributes[y];if(w===null)v.removeAttribute(y);else if(typeof w=="string")try{if(y==="_cssText"&&(v.nodeName==="LINK"||v.nodeName==="STYLE"))try{let M=i.getMeta(v);Object.assign(M.attributes,h.attributes);let b=Tr(M,{doc:v.ownerDocument,mirror:i,skipChild:!0,hackCss:!0,cache:this.cache}),R=v.nextSibling,T=v.parentNode;if(b&&T){T.removeChild(v),T.insertBefore(b,R),i.replace(h.id,b);break}}catch{}if(y==="value"&&v.nodeName==="TEXTAREA"){let M=v;M.childNodes.forEach(R=>M.removeChild(R));let b=(p=v.ownerDocument)===null||p===void 0?void 0:p.createTextNode(w);b&&M.appendChild(b)}else v.setAttribute(y,w)}catch(M){this.warn("An error occurred may due to the checkout feature.",M)}else if(y==="style"){let M=w,b=v;for(let R in M)if(M[R]===!1)b.style.removeProperty(R);else if(M[R]instanceof Array){let T=M[R];b.style.setProperty(R,T[0],T[1])}else{let T=M[R];b.style.setProperty(R,T)}}}})}applyScroll(e,t){var i,a;let l=this.mirror.getNode(e.id);if(!l)return this.debugNodeNotFound(e,e.id);let u=this.mirror.getMeta(l);if(l===this.iframe.contentDocument)(i=this.iframe.contentWindow)===null||i===void 0||i.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"});else if(u?.type===oe.Document)(a=l.defaultView)===null||a===void 0||a.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"});else try{l.scrollTo({top:e.y,left:e.x,behavior:t?"auto":"smooth"})}catch{}}applyInput(e){let t=this.mirror.getNode(e.id);if(!t)return this.debugNodeNotFound(e,e.id);try{t.checked=e.isChecked,t.value=e.text}catch{}}applySelection(e){try{let t=new Set,i=e.ranges.map(({start:a,startOffset:l,end:u,endOffset:d})=>{let f=this.mirror.getNode(a),h=this.mirror.getNode(u);if(!f||!h)return;let p=new Range;p.setStart(f,l),p.setEnd(h,d);let v=f.ownerDocument,y=v?.getSelection();return y&&t.add(y),{range:p,selection:y}});t.forEach(a=>a.removeAllRanges()),i.forEach(a=>{var l;return a&&((l=a.selection)===null||l===void 0?void 0:l.addRange(a.range))})}catch{}}applyStyleSheetMutation(e){var t;let i=null;e.styleId?i=this.styleMirror.getStyle(e.styleId):e.id&&(i=((t=this.mirror.getNode(e.id))===null||t===void 0?void 0:t.sheet)||null),i&&(e.source===U.StyleSheetRule?this.applyStyleSheetRule(e,i):e.source===U.StyleDeclaration&&this.applyStyleDeclaration(e,i))}applyStyleSheetRule(e,t){var i,a,l,u;if((i=e.adds)===null||i===void 0||i.forEach(({rule:d,index:f})=>{try{if(Array.isArray(f)){let{positions:h,index:p}=bl(f);_r(t.cssRules,h).insertRule(d,p)}else{let h=f===void 0?void 0:Math.min(f,t.cssRules.length);t?.insertRule(d,h)}}catch{}}),(a=e.removes)===null||a===void 0||a.forEach(({index:d})=>{try{if(Array.isArray(d)){let{positions:f,index:h}=bl(d);_r(t.cssRules,f).deleteRule(h||0)}else t?.deleteRule(d)}catch{}}),e.replace)try{(l=t.replace)===null||l===void 0||l.call(t,e.replace)}catch{}if(e.replaceSync)try{(u=t.replaceSync)===null||u===void 0||u.call(t,e.replaceSync)}catch{}}applyStyleDeclaration(e,t){e.set&&_r(t.rules,e.index).style.setProperty(e.set.property,e.set.value,e.set.priority),e.remove&&_r(t.rules,e.index).style.removeProperty(e.remove.property)}applyAdoptedStyleSheet(e){var t;let i=this.mirror.getNode(e.id);if(!i)return;(t=e.styles)===null||t===void 0||t.forEach(d=>{var f;let h=null,p=null;if(Qt(i)?p=((f=i.ownerDocument)===null||f===void 0?void 0:f.defaultView)||null:i.nodeName==="#document"&&(p=i.defaultView),!!p)try{h=new p.CSSStyleSheet,this.styleMirror.add(h,d.styleId),this.applyStyleSheetRule({source:U.StyleSheetRule,adds:d.rules},h)}catch{}});let a=10,l=0,u=o((d,f)=>{let h=f.map(p=>this.styleMirror.getStyle(p)).filter(p=>p!==null);Qt(d)?d.shadowRoot.adoptedStyleSheets=h:d.nodeName==="#document"&&(d.adoptedStyleSheets=h),h.length!==f.length&&l<a&&(setTimeout(()=>u(d,f),0+100*l),l++)},"adoptStyleSheets");u(i,e.styleIds)}legacy_resolveMissingNode(e,t,i,a){let{previousId:l,nextId:u}=a,d=l&&e[l],f=u&&e[u];if(d){let{node:h,mutation:p}=d;t.insertBefore(h,i),delete e[p.node.id],delete this.legacy_missingNodeRetryMap[p.node.id],(p.previousId||p.nextId)&&this.legacy_resolveMissingNode(e,t,h,p)}if(f){let{node:h,mutation:p}=f;t.insertBefore(h,i.nextSibling),delete e[p.node.id],delete this.legacy_missingNodeRetryMap[p.node.id],(p.previousId||p.nextId)&&this.legacy_resolveMissingNode(e,t,h,p)}}moveAndHover(e,t,i,a,l){let u=this.mirror.getNode(i);if(!u)return this.debugNodeNotFound(l,i);let d=El(u,this.iframe),f=e*d.absoluteScale+d.x,h=t*d.absoluteScale+d.y;this.mouse.style.left=`${f}px`,this.mouse.style.top=`${h}px`,a||this.drawMouseTail({x:f,y:h}),this.hoverElements(u)}drawMouseTail(e){if(!this.mouseTail)return;let{lineCap:t,lineWidth:i,strokeStyle:a,duration:l}=this.config.mouseTail===!0?Zl:Object.assign({},Zl,this.config.mouseTail),u=o(()=>{if(!this.mouseTail)return;let d=this.mouseTail.getContext("2d");!d||!this.tailPositions.length||(d.clearRect(0,0,this.mouseTail.width,this.mouseTail.height),d.beginPath(),d.lineWidth=i,d.lineCap=t,d.strokeStyle=a,d.moveTo(this.tailPositions[0].x,this.tailPositions[0].y),this.tailPositions.forEach(f=>d.lineTo(f.x,f.y)),d.stroke())},"draw");this.tailPositions.push(e),u(),setTimeout(()=>{this.tailPositions=this.tailPositions.filter(d=>d!==e),u()},l/this.speedService.state.context.timer.speed)}hoverElements(e){var t;(t=this.lastHoveredRootNode||this.iframe.contentDocument)===null||t===void 0||t.querySelectorAll(".\\:hover").forEach(a=>{a.classList.remove(":hover")}),this.lastHoveredRootNode=e.getRootNode();let i=e;for(;i;)i.classList&&i.classList.add(":hover"),i=i.parentElement}isUserInteraction(e){return e.type!==$.IncrementalSnapshot?!1:e.data.source>U.Mutation&&e.data.source<=U.Input}backToNormal(){this.nextUserInteractionEvent=null,!this.speedService.state.matches("normal")&&(this.speedService.send({type:"BACK_TO_NORMAL"}),this.emitter.emit(pe.SkipEnd,{speed:this.speedService.state.context.normalSpeed}))}warnNodeNotFound(e,t){this.warn(`Node with id '${t}' not found. `,e)}warnCanvasMutationFailed(e,t){this.warn("Has error on canvas update",t,"canvas mutation:",e)}debugNodeNotFound(e,t){this.debug(`Node with id '${t}' not found. `,e)}warn(...e){this.config.showWarning&&this.config.logger.warn(uh,...e)}debug(...e){this.config.showDebug&&this.config.logger.log(uh,...e)}};var _n=class{static{o(this,"EventHandlersBase")}setSessionReplayer(e){}skipEvents(e){}preCastEvent(e){}preEvent(e){}postEvent(e,t){return t}handleMeta(e,t){}handleViewportResize(e){}handleMutation(e,t){}handleInput(e,t){}handleClick(e,t){}handleDblClick(e,t){}handleMouseDown(e,t){}handleMouseUp(e,t){}handleMouseMove(e,t){}handleFocus(e,t){}handleBlur(e,t){}handleContentEditableInput(e,t){}handleKeyStroke(e,t){}handleURLChange(e,t){}};var mh=ni(oo());var ao=class extends _n{constructor({sessionMirror:t,elementSelector:i}){super();this.numberOfRetries=3;this.currentHref=void 0;this.previousMousePositionsNodeSelectors={};this.hasUndefinedFocusNode=!1;this.lastMouseUpTime=0;this.lastMouseDownExtract=void 0;this.allInteractableElementsMetadata={mouseMove:void 0,mouseDown:void 0};this.currentEventIndex=-1;this.enableRecordingAvailableInteractableElements=!0;this.useTextInputFastForward=!0;this.getBoundingBox=o(t=>{let i=qn(this.sessionMirror.getNodeById(t),this.appSpecificRules.appSpecificInteractableElementsSelectors);if(i)return i?.getBoundingClientRect()},"getBoundingBox");this.isPointWithinBoundingBox=o((t,i,a)=>t>=a.left&&t<=a.right&&i>=a.top&&i<=a.bottom,"isPointWithinBoundingBox");this.isPointWithinNodeBoundingBox=o((t,i,a)=>{let l=this.getBoundingBox(t);return l?i>=l.left&&i<=l.right&&a>=l.top&&a<=l.bottom:!1},"isPointWithinNodeBoundingBox");this.elementSelector=i,this.sessionMirror=t}static{o(this,"SessionDigesterEventHandlers")}setEvents(t){this.events=t}setConfiguration({enableRecordingAvailableInteractableElements:t,useTextInputFastForward:i=!0}){this.enableRecordingAvailableInteractableElements=t,this.useTextInputFastForward=i}setAppRules(t){this.appSpecificRules=t}skipEvents(t){this.currentEventIndex+=t.length}preEvent(t){++this.currentEventIndex}async postEvent(t,i){return i&&(!i.availableInteractableElementsAtStart&&this.enableRecordingAvailableInteractableElements&&t.type===$.IncrementalSnapshot&&(t.data.source===U.MouseInteraction||t.data.source===U.Input||t.data.source===U.MediaInteraction)&&(i.availableInteractableElementsAtStart=await this.getInteractableElementsMetadata()),i)}handleMeta(t){if(t.href!==this.currentHref)return this.currentHref=t.href,{eventCode:"navigation",url:t.href}}getNextUserTriggeredInputEvent(t){for(let i=this.currentEventIndex+1;i<this.events.length;++i){let a=this.events[i];if(a.type===$.IncrementalSnapshot&&a.data.source===U.Input&&a.data.userTriggered)return a;if(a.timestamp>t)return}}async handleInput(t,i){if(!t.userTriggered)return;let a=await this.getNodeById(t.id),l=this.getInputEventCode(a,t);if(l==="input"&&this.useTextInputFastForward){this.textInputFastForwardInitialSelector||(this.textInputFastForwardInitialSelector=await this.elementSelector.getSelector(a));let d={eventCode:l,...this.textInputFastForwardInitialSelector};return await o(async()=>{let h=this.getNextUserTriggeredInputEvent(i.timestamp+2e3);if(h){let p=h.data,v=await this.getNodeById(p.id);return v!==a?!1:this.getInputEventCode(v,p)==="input"}return!1},"isNextInputEventForSameNode")()||(this.textInputFastForwardInitialSelector=void 0),d}let u=await this.elementSelector.getSelector(a);return{eventCode:l,...u}}async handleMouseMove(t){if(this.previousMousePositions=t.positions,this.previousMousePositionsNodeSelectors={},this.isLastMouseMoveEventBeforeMouseDownOrUndefinedFocus()){this.previousMousePositionsNodeSelectors={};let i={};for(let a of this.previousMousePositions){let l=a.id;if(i[l])continue;i[l]=!0;let u=await this.getNodeById(l);try{this.previousMousePositionsNodeSelectors[l]=await this.elementSelector.getSelector(u)}catch(d){console.warn("error with extracting selector for node during previousMousePositionsNodeSelectors mapping",u,d)}}this.allInteractableElementsMetadata.mouseMove=await this.getInteractableElementsMetadata()}}isLastMouseMoveEventBeforeMouseDownOrUndefinedFocus(){for(let t=this.currentEventIndex+1;t<this.events.length;++t){let i=this.events[t];if(i.type===$.IncrementalSnapshot)switch(i.data.source){case U.MouseMove:return!1;case U.MouseInteraction:switch(i.data.type){case ae.Click:case ae.MouseDown:return!0;case ae.Focus:return i.data.id===-1}}}return!1}async handleMouseDown(t){let i=await this.getNodeById(t.id);try{this.lastMouseDownExtract={node:i,selector:await this.elementSelector.getSelector(i)},this.allInteractableElementsMetadata.mouseDown=await this.getInteractableElementsMetadata()}catch(a){console.warn("error with extracting selector for node during handleMouseDown",i,a)}this.previousMouseDownData=t}async handleMouseUp(t,i){this.lastMouseUpTime=i.timestamp}isLastMouseDownValidForClick(t){return!!this.lastMouseDownExtract&&t-this.lastMouseUpTime<10}invalidateLastMouseDown(){this.lastMouseUpTime=0,this.lastMouseDownExtract=void 0,this.allInteractableElementsMetadata.mouseDown=void 0}async handleFocus(t){this.hasUndefinedFocusNode=t.id===-1}async handleClick(t,i){if(t.x===void 0||t.y===void 0)return;let a=this.isLastMouseDownValidForClick(i.timestamp),u=await o(async()=>{if(a)return{...this.lastMouseDownExtract.selector,playwrightSelectorForSnapshot:(await this.elementSelector.getSelector(this.lastMouseDownExtract.node,{extractEsraMetadata:!1}))?.playwrightSelector,availableInteractableElementsAtStart:this.allInteractableElementsMetadata.mouseDown};let d=this.getNodeIdForClick(t,i),f=await this.getNodeById(d);return this.previousMousePositionsNodeSelectors[d]?{...this.previousMousePositionsNodeSelectors[d],playwrightSelectorForSnapshot:(await this.elementSelector.getSelector(f,{extractEsraMetadata:!1}))?.playwrightSelector,availableInteractableElementsAtStart:this.allInteractableElementsMetadata.mouseMove}:this.elementSelector.getSelector(f)},"getSelector")();return this.invalidateLastMouseDown(),{eventCode:"click",...u}}getNextMouseMoveEvent(){for(let t=this.currentEventIndex+1;t<this.events.length;++t){let i=this.events[t];if(i.type===$.IncrementalSnapshot&&i.data.source===U.MouseMove)return i}}getNodeIdForClick(t,i){if(this.hasUndefinedFocusNode&&this.previousMouseDownData&&this.previousMouseDownData.id!==t.id){let a=o(()=>{let v=this.getNextMouseMoveEvent();if(v){let w=[...v.data.positions].reverse().find(M=>v.timestamp+M.timeOffset<i.timestamp);if(w)return w.id}},"findByNextMousePosition"),l=o(()=>{if(this.previousMousePositions){let v=[...this.previousMousePositions].reverse().find(y=>!0);if(v)return v.id}},"findByPreviousMousePosition"),u=o(()=>{try{let v=this.sessionMirror.getNodeById(t.id),y=Array.from(yr(v)).filter(M=>window.getComputedStyle(M).pointerEvents==="none"),w=[];if(y.length){y.forEach(b=>{let R=b,T=R.getAttribute("style");w.push(T),R.setAttribute("style",T+";pointer-events:auto !important")});let M=document.querySelector("iframe").contentDocument.elementFromPoint(t.x,t.y);if(y.forEach((b,R)=>{b.setAttribute("style",w[R])}),M){let b=this.sessionMirror.getMeta(M);if(b)return b.id}}}catch(v){console.warn("element from point calc error",v)}},"findByElementFromPoint"),d={next:a(),previous:l(),point:u(),original:t.id},f=d.next||d.previous||t.id,h=o(()=>{if(f===d.point)return!1;let v=this.sessionMirror.getNodeById(f);return this.isPointWithinBoundingBox(t.x,t.y,v.getBoundingClientRect())},"isElementFromPointContainedInCandidate");return d.point&&h()?d.point:f}return t.id}async getNodeById(t,{retriesLeft:i=this.numberOfRetries,useCompoundInteractableDetection:a=!0}={}){if(!i)return console.error("no node"),null;let l=this.sessionMirror.getNodeById(t);return l?a?qn(l,this.appSpecificRules.appSpecificInteractableElementsSelectors):l:(await(0,mh.default)(100*(this.numberOfRetries-i+1)),this.getNodeById(t,{retriesLeft:i-1,useCompoundInteractableDetection:a}))}getInputEventCode(t,i){switch(t.getAttribute("type")){case"checkbox":case"radio":return i.isChecked?"check":"uncheck";case"text":default:return"input"}}async getInteractableElementsMetadata(){if(!this.enableRecordingAvailableInteractableElements)return[];let i=document.querySelector("iframe").contentWindow.document;console.log("Getting all interactable elements...");let a=Bt(i,this.appSpecificRules);console.log(`Got ${a.length} interactable elements`),console.log("Extracting ESRA metadata for all interactable elements...");let l=new lt(i),u=await Promise.all(a.map(async d=>({esraMetadata:l.extract(d).toMetadata()})));return console.log("Done processing all interactable elements..."),u}};var lo=class{constructor({eventHandlers:e}){this.preCastEvent=o(async e=>this.handlers.preCastEvent(e),"preCastEvent");this.processEvent=o(async(e,t=!0)=>{this.handlers.preEvent(e);let i=t?await this.handleEvent(e):void 0,a=await this.handlers.postEvent(e,i);return this.handlers.controlledReturn?this.handlers.getReturnValue():a},"processEvent");this.skipEvents=o(async e=>this.handlers.skipEvents(e),"skipEvents");this.handlers=e}static{o(this,"EventProcessor")}setHandlers(e){this.handlers=e}async handleEvent(e){switch(e.type){case $.Meta:return this.handlers.handleMeta(e.data,e);case $.IncrementalSnapshot:switch(e.data.source){case U.ViewportResize:return this.handlers.handleViewportResize(e.data,e);case U.Mutation:return this.handlers.handleMutation(e.data,e);case U.Input:return this.handlers.handleInput(e.data,e);case U.MouseInteraction:return this.handleMouseInteraction(e.data,e);case U.MouseMove:return this.handlers.handleMouseMove(e.data,e);default:break}break;case $.Custom:switch(e.data.tag){case"contenteditable-input":return this.handlers.handleContentEditableInput(e.data.payload,e);case"key-stroke":return this.handlers.handleKeyStroke(e.data.payload,e);case"url-change":return this.handlers.handleURLChange(e.data.payload,e)}break;default:break}}async handleMouseInteraction(e,t){switch(e.type){case ae.Click:return this.handlers.handleClick(e,t);case ae.DblClick:return this.handlers.handleDblClick(e,t);case ae.MouseDown:return this.handlers.handleMouseDown(e,t);case ae.MouseUp:return this.handlers.handleMouseUp(e,t);case ae.Focus:return this.handlers.handleFocus(e,t);case ae.Blur:return this.handlers.handleBlur(e,t);default:break}}};var Jl=ni(oo());var co=class{constructor(e={}){this.events=[];this.castedEvents=[];this.isLive=!0;this.currentTraveledTimestamp=void 0;this.config={enableInteract:!1};this.useTimestampCompression=!0;this.fastForward=o(async(e,t=!1)=>{if(!t&&!this.isLive){this.liveEvents.push(...e);return}let i=e.sort((l,u)=>l.timestamp-u.timestamp);if(this.useTimestampCompression){let l=Date.now();i=i.map((u,d)=>({...u,timestamp:l+d,originalTimestamp:this.getOriginalTimestamp(u)??u.timestamp}))}this.events=[...this.events,...i];let a=new Promise(l=>{this.onEventCast=u=>{this.castedEvents.push(u),this.castedEvents.length===this.events.length&&(this.onEventCast=void 0,l())}});for(let l of i)this.replayer.addEvent(l);return a},"fastForward");this.stop=o(()=>{this.replayer.destroy()},"stop");this.getOriginalTimestamp=o(e=>e.originalTimestamp,"getOriginalTimestamp");this.getNodeById=o(e=>this.replayer.getMirror().getNode(e),"getNodeById");this.getMeta=o(e=>this.replayer.getMirror().getMeta(e),"getMeta");this.config={...this.config,...e}}static{o(this,"SessionReplayer")}start(e){this.startOptions=e;let{firstEventTimestamp:t,speed:i=8,useTimestampCompression:a=!0}=e;this.replayer=new Si([],{mouseTail:!1,pauseAnimation:!1,speed:i,triggerFocus:!0,UNSAFE_replayCanvas:!0,liveMode:!0,showDebug:!1,skipInactive:!0}),this.config.enableInteract?this.replayer.enableInteract():this.replayer.disableInteract(),this.useTimestampCompression=a,this.replayer.startLive(this.useTimestampCompression?Date.now():t),this.replayer.on("event-cast",l=>{this.onEventCast&&this.onEventCast(l)})}async goBack(e,{sleepAfter:t=1e3,beforeTimestamp:i=!1}={}){this.currentTraveledTimestamp!==e&&(this.currentTraveledTimestamp=e,this.isLive&&(this.liveEvents=this.events),this.stop(),this.events=[],this.castedEvents=[],this.start(this.startOptions),this.isLive=!1,await this.fastForward(this.liveEvents.filter(a=>i?this.getOriginalTimestamp(a)<e:this.getOriginalTimestamp(a)<=e),!0),t&&await(0,Jl.default)(t))}async goLive(e=1e3){this.isLive||(this.stop(),this.currentTraveledTimestamp=void 0,this.events=[],this.castedEvents=[],this.start(this.startOptions),this.isLive=!0,await this.fastForward(this.liveEvents),e&&await(0,Jl.default)(e))}};var Dn=class{static{o(this,"Streamer")}constructor(e={}){this.sessionReplayer=new co(e),this.eventProcessor=new lo({eventHandlers:new _n})}setEventHandlers(e){e.setSessionReplayer(this.sessionReplayer),this.eventHandlers=e,this.eventProcessor.setHandlers(this.eventHandlers)}start(e){this.sessionReplayer.start(e)}async handleEvent(e){return await this.eventProcessor.preCastEvent(e),await this.sessionReplayer.fastForward([e]),await this.eventProcessor.processEvent(e)}async skipEvents(e){await this.eventProcessor.skipEvents(e),await this.sessionReplayer.fastForward(e)}stop(){this.sessionReplayer.stop()}};var uo=class extends Dn{constructor(){super({enableInteract:!0});this.elementSelector=new wr;this.setEventHandlers(new ao({sessionMirror:this.sessionReplayer,elementSelector:this.elementSelector}))}static{o(this,"ChecksumSessionDigester")}setConfiguration({enableRecordingAvailableInteractableElements:t,useTextInputFastForward:i}){this.eventHandlers.setConfiguration({enableRecordingAvailableInteractableElements:t,useTextInputFastForward:i})}setEvents(t){this.eventHandlers.setEvents(t)}setOptions(t){this.elementSelector.setOptions({defaultExtractReducedHtmlAndSelector:t.extractReducedHTML,defaultInspectInteractableElements:t.inspectInteractables,defaultExtractEsraMetadata:t.extractESRAMetadata})}setAppRules(t){this.appSpecificRules=t,this.elementSelector.setAppRules(t),this.eventHandlers.setAppRules(t)}async handleEvent(t){return await super.handleEvent(t)}};var fo=class{constructor(e){this.attributes={};this.classes={};if(typeof e=="object")for(let t in e)this[t]=e[t];else if(typeof e=="string"){let t=JSON.parse(e);for(let i in t)this[i]=t[i]}}static{o(this,"ESRAElementMetadata")}serialize(){return JSON.stringify(this)}};var yh=ni(vh());var ec=class{constructor(){this.weightsSum=0;this.config={attributes:{qualification:{globalUniquenessThreshold:.99,tagUniquenessThreshold:.99},decisionWeight:this.makeWeight(2/5)},classes:{qualification:{globalUniquenessThreshold:.99,tagUniquenessThreshold:.99},decisionWeight:this.makeWeight(2/5)},tagName:{decisionWeight:this.makeWeight(3/5)},style:{inlineWeight:.6,computedWeight:.4,decisionWeight:this.makeWeight(2/5)},innerText:{decisionWeight:this.makeWeight(3/5),qualification:{exactMatchMax:20,containsMatchMax:10,maxLength:256,minLength:1},ignoreSimilarityScoreBelow:.6},innerFeatures:{decisionWeight:this.makeWeight(4/5)},visualVicinity:{decisionWeight:this.makeWeight(1/5)},structuralVicinity:{decisionWeight:this.makeWeight(1/5)}}}static{o(this,"ESRASimilarityConfigClass")}makeWeight(e){return this.weightsSum+=e,e}get(){return this.config}weight(e){return e/this.weightsSum}},Le=new ec;var mo=class{constructor(e){this.qualifiedAttributes=[];this.qualifiedAttributesMap={};this.qualifiedClasses=[];this.unqualifiedClasses=[];this.qualifiedInnerText=void 0;this.visualVicinityComparable=[];this.structuralVicinityComparable=[];this.innerFeaturesComparable=[];this.rank=o(e=>{if(this.isDealBreaker(e))return{score:0,scores:{}};let t=this.tagSimilarity(e),i=this.attributesSimilarity(e),a=this.classSimilarity(e),l=this.styleSimilarity(e),u=this.innerTextSimilarity(e),d=this.innerFeaturesSimilarity(e),f=this.visualVicinitySimilarity(e),h=this.structuralVicinitySimilarity(e),p=this.svgsSimilarity(e),v={tagScore:t,attributesScore:i,classesScore:a,styleScore:l,innerTextScore:u,innerFeaturesScore:d,visualVicinityScore:f,structuralVicinityScore:h,svgsScore:p},y={tagScore:Le.weight(Le.get().tagName.decisionWeight)*t,attributesScore:Le.weight(Le.get().attributes.decisionWeight)*i,classesScore:Le.weight(Le.get().classes.decisionWeight)*a,innerTextScore:Le.weight(Le.get().innerText.decisionWeight)*u,innerFeaturesScore:Le.weight(Le.get().innerFeatures.decisionWeight)*d,styleScore:Le.weight(Le.get().style.decisionWeight)*l,visualVicinityScore:Le.weight(Le.get().visualVicinity.decisionWeight)*f,structuralVicinityScore:Le.weight(Le.get().structuralVicinity.decisionWeight)*h};return{score:Object.values(y).reduce((M,b)=>M+b,0),scores:v}},"rank");this.targetElementESRAMetadata=e,this.setQualifiedAttributes(),this.setQualifiedClasses(),this.setQualifiedInnerText(),this.setVisualVicinityComparable(),this.setStructuralVicinityComparable(),this.setInnerFeaturesComparable()}static{o(this,"ESRASimilarity")}getQualifiedAttributes(){return this.qualifiedAttributes}getQualifiedClasses(){return this.qualifiedClasses}getQualifiedInnerText(){return this.qualifiedInnerText}setQualifiedAttributes(){let e=this.targetElementESRAMetadata.attributes,{qualifiedAttributes:t,qualifiedAttributesMap:i}=this.makeQualifiedAttributes(e);this.qualifiedAttributes=t,this.qualifiedAttributesMap=i}makeQualifiedAttributes(e,t){let i=Object.keys(e).filter(l=>{switch(t){case"input":if(l==="value")return!1;break}let u=e[l];for(let d in u)d.endsWith("Uniqenuess")&&(u[d.replace("Uniqenuess","Uniqueness")]=u[d]);return u.globalUniqueness>Le.get().attributes.qualification.globalUniquenessThreshold||u.tagUniqueness>Le.get().attributes.qualification.tagUniquenessThreshold}),a=i.reduce((l,u)=>(l[u]=e[u].value,l),{});return{qualifiedAttributes:i,qualifiedAttributesMap:a}}setQualifiedClasses(){this.qualifiedClasses=this.makeQualifiedClasses(this.targetElementESRAMetadata.classes),this.unqualifiedClasses=Object.keys(this.targetElementESRAMetadata.classes).filter(e=>!this.qualifiedClasses.includes(e))}isValidClass(e){return/^[A-Za-z_-][0-9A-Za-z_-]*$/.test(e)}makeQualifiedClasses(e){return Object.keys(e).filter(t=>{let i=e[t];return!this.isValidClass(t)||t.startsWith("jss")||t.startsWith("css-")||t===":hover"?!1:i.globalUniqueness>Le.get().classes.qualification.globalUniquenessThreshold||i.tagUniqueness>Le.get().classes.qualification.tagUniquenessThreshold})}setQualifiedInnerText(){this.qualifiedInnerText=this.makeQualifiedInnerText(this.targetElementESRAMetadata.innerText)}makeQualifiedInnerText(e){return e&&e.content?.length<=Le.get().innerText.qualification.maxLength&&e.content?.length>=Le.get().innerText.qualification.minLength?e:null}makeBasicElementPropertiesComparable(e){return e.reduce((t,i)=>{let a=i.position?`${i.tag}.${i.position.slice(0,2).join(",")}`:i.tag,l=`${a}+${i.relativePosition}`,u=this.makeQualifiedClasses(i.classes).map(p=>`${a}.${p}`),d=[];this.makeQualifiedAttributes(i.attributes).qualifiedAttributes.forEach(p=>{d.push(`${a}[${p}]`),d.push(`${a}[${p}]=${i.attributes[p].value}`)});let f=i.feature?this.makeInnerFeaturesComparable([i.feature],{customTag:a,includeTag:!1,featureTypeWhiteList:[6]}):[],h=[...t,a,l,...u,...d,...f];return i.text&&(h.push(`${a}<>`),h.push(`${a}<${i.text}>`)),i.distance&&(h.push(`${a}->${i.distance}`),h.push(`${a}->[]${this.getDistanceRange(i.distance)}`)),h},[])}getDistanceRange(e){let t=[10,20,30,40,50,60,70,80,90,100];for(let i of t)if(e<i)return i;return t[t.length-1]}setVisualVicinityComparable(){this.visualVicinityComparable=this.makeVisualVicinityComparable(this.targetElementESRAMetadata.visualVicinity)}makeVisualVicinityComparable(e){return this.makeBasicElementPropertiesComparable(e)}setStructuralVicinityComparable(){this.structuralVicinityComparable=this.makeStructuralVicinityComparable(this.targetElementESRAMetadata.structuralVicinity)}makeStructuralVicinityComparable(e){return this.makeBasicElementPropertiesComparable(e)}makeInnerFeaturesComparable(e,{customTag:t=void 0,includeTag:i=!0,featureTypeWhiteList:a=void 0}={}){return e.reduce((l,u)=>{if(a&&!a.includes(u.type)||u.isHidden)return l;let d=t??u.tag,f=i?[...l,d]:l;switch(u.type){case 3:f.push(`${d}[type=${u.buttonType}]`);break;case 4:u.inputType&&f.push(`${d}[type=${u.inputType}]`),u.placeholder&&f.push(`${d}[placeholder=${u.placeholder}]`);break;case 6:u.components.forEach(h=>{let p=[];for(let v in h.attributes)p.push(`[${v}=${h.attributes[v]}]`);f.push(`${d}${p.join("")}`)});break}return"text"in u&&u.text&&(f.push(`${d}<>`),f.push(`${d}<${u.text}>`)),f},[])}setInnerFeaturesComparable(){this.innerFeaturesComparable=this.makeInnerFeaturesComparable(this.targetElementESRAMetadata.innerFeatures)}isDealBreaker(e){if(this.targetElementESRAMetadata.tag==="input"&&e.tag==="input"){let t=o(l=>l.type?l.type.value:"text","getType"),i=t(this.targetElementESRAMetadata.attributes),a=t(e.attributes);if(i!==a)return!0}return!1}tagSimilarity(e){return e.tag===this.targetElementESRAMetadata.tag?1:0}attributesSimilarity(e){let t=o(a=>[...this.keyValueObjectToArray(a),...Object.keys(a)],"makeJaccardParam"),{qualifiedAttributesMap:i}=this.makeQualifiedAttributes(e.attributes);return this.jaccard(t(this.qualifiedAttributesMap),t(i))}indicativeAttributesSimilarity(e){return this.qualifiedAttributesMap.placehoder&&e.attributes.placehoder&&this.qualifiedAttributesMap.placehoder===e.attributes.placehoder.value?1:0}classSimilarity(e){return this.jaccard(this.qualifiedClasses,this.makeQualifiedClasses(e.classes))}innerTextSimilarity(e){if(!this.targetElementESRAMetadata.innerText&&!e.innerText)return 1;let t=this.makeQualifiedInnerText(e.innerText);if(!this.qualifiedInnerText||!t)return 0;if(this.qualifiedInnerText.content===t.content)return 1;Object.values({email:/^[^\s@]+@[^\s@]+\.[^\s@]+$/,url:/^(http|https):\/\/[^ "]+$/}).forEach(l=>{if(l.test(this.qualifiedInnerText.content)&&l.test(t.content))return .5});try{return new Date(this.qualifiedInnerText.content),new Date(t.content),.5}catch{}let a=o(l=>l.replace(/\d/g,"d").replace(/[a-zA-Z]/g,"s"),"template");return a(this.qualifiedInnerText.content)===a(t.content)?.5:0}innerFeaturesSimilarity(e){return this.jaccard(this.innerFeaturesComparable,this.makeInnerFeaturesComparable(e.innerFeatures))}visualVicinitySimilarity(e){return this.jaccard(this.visualVicinityComparable,this.makeVisualVicinityComparable(e.visualVicinity))}structuralVicinitySimilarity(e){return this.jaccard(this.structuralVicinityComparable,this.makeStructuralVicinityComparable(e.structuralVicinity))}styleSimilarity(e){let t=o(l=>[...this.keyValueObjectToArray(l),...Object.keys(l)],"makeJaccardParam"),i=this.jaccard(t(this.targetElementESRAMetadata.style.inline??{}),t(e.style.inline??{})),a=this.jaccard(t(this.targetElementESRAMetadata.style.computed??{}),t(e.style.computed??{}));return i*Le.get().style.inlineWeight+a*Le.get().style.computedWeight}svgsSimilarity(e){return!this.targetElementESRAMetadata.svgs&&!e.svgs||this.targetElementESRAMetadata.svgs&&e.svgs&&JSON.stringify(this.targetElementESRAMetadata.svgs)===JSON.stringify(e.svgs)?1:0}keyValueObjectToArray(e,t="=",i=void 0){let a=o(l=>i?i(e,l):e[l],"getValue");return Object.keys(e).map(l=>`${l}${t}${a(l)}`)}jaccard(e,t){return Array.isArray(e)&&Array.isArray(t)&&!e.length&&!t.length?1:(0,yh.jaccard)(e,t)}};var tr=class n{constructor(e,t){this.POSITIONING_SATISFACTORY_SCORE=1;this.targetElementStaticData={};this.qualifiedAttributes=[];this.qualifiedAttributesMap={};this.qualifiedClasses=[];this.candidateQueries=[];this.candidates=[];this.uniqueCandidates=[];this.queryCandidates=[];this.interactableCandidates=[];this.rankedCandidates=[];this.filteredAndSortedRankedCandidates=[];this.finalCandidates=[];this.weightsSum=0;this.config={innerText:{dropIfMoreThanNCandidates:5},innerFeatures:{mandatoryPercentage:.6,mandatoryMax:6},results:{scorePercentile:.75,epsilon:.01}};this.getSelectionResultForCandidate=o(e=>{let t=pt.getInstance("getElementSelectionResult",{log:!1}),i=t.get();if(i||(i=new Map,t.set(i)),i.has(e))return i.get(e);this.checkTimeout();let a=this.extractMetadata(e),{score:l,scores:u}=this.similarity.rank(a),d={score:l,candidate:e,scores:u,esraMetadata:a};return i.set(e,d),t.set(i),d},"getSelectionResultForCandidate");this.targetElementESRAMetadata=e,this.targetElementStaticData=t||e.staticMetadata,this.similarity=new mo(this.targetElementESRAMetadata),this.esraMetadataExtractor=new lt(document)}static{o(this,"ESRASelector")}makeWeight(e){return this.weightsSum+=e,e}getWeight(e){return e/this.weightsSum}extractMetadata(e){return new fo(this.esraMetadataExtractor.extract(e).toMetadata())}getLastSelectionLogs(e=5){if(!this.candidates?.length)return{};let t=new XMLSerializer,i=o((u,d=50)=>u.slice(0,d).map(f=>({score:f.score,metadata:f.metadata,element:t.serializeToString(f.candidate).substring(0,200)})),"printCandidates"),a=this.rankedCandidates[Math.min(this.rankedCandidates.length-1,e)].score,l=o(u=>i(u,e).filter(d=>d.score>=a),"filterByScore");return{candidatesQuery:this.candidateQueries.filter(u=>!!u.length).join(","),totalUniqueCandidates:this.uniqueCandidates.length,topRankingCandidates:i(this.rankedCandidates,e),topRemovedCandidates:{hidden:l(this.removedCandidates.hidden),staticData:l(this.removedCandidates.static)}}}selectByPositioning(){let e=this.targetElementESRAMetadata.positioning;if(window.innerWidth!==e.viewport.size.width||window.innerHeight!==e.viewport.size.height)return;let t=document.elementFromPoint(e.viewport.element.left*window.innerWidth,e.viewport.element.top*window.innerHeight),i=this.extractMetadata(t),{score:a}=this.similarity.rank(i);return a>=this.POSITIONING_SATISFACTORY_SCORE?{candidate:t,score:a,esraMetadata:i}:void 0}collectCandidates(){this.setQualifiedAttributesQueries(),this.setQualifiedClassesQueries(),this.setInnerFeaturesQueries(),this.candidates=[];let e=this.candidateQueries.filter(t=>!!t.length).join(",");this.queryCandidates=[],e.length&&(this.queryCandidates=we(e)),this.interactableCandidates=[],this.elementsFiltering!==0&&(this.interactableCandidates=Bt())}select(){console.log("selecting elements, filtering: ",ri[this.elementsFiltering]);let e=o(l=>{switch(l){case 0:return this.queryCandidates;case 1:return this.intersectElements(this.queryCandidates,this.interactableCandidates);case 2:return this.interactableCandidates;case 3:return this.queryCandidates.concat(this.interactableCandidates)}},"filterElements");for(;this.candidates=e(this.elementsFiltering),!(this.candidates.length||this.elementsFiltering===3);)console.log(`no candidates found, expanding selection to ${ri[this.elementsFiltering+1]}`),this.elementsFiltering++;console.log("# of query/interactable/total candidates:",this.queryCandidates.length,this.interactableCandidates.length,this.candidates.length),this.candidates.push(...this.getInnerTextCandidates()),this.candidates.length||this.candidates.push(...this.getTagCandidates()),this.uniqueCandidates=this.candidates.filter((l,u,d)=>d.indexOf(l)===u);let t=n.limitChildren;t?.length&&(t=t.map(l=>({...l,parent:document.querySelector(l.selector)})),this.uniqueCandidates=this.uniqueCandidates.filter(l=>{for(var u of t)if(u.parent&&this.isDescendant(u.parent,l)&&u.limit--<=0)return!1;return!0})),this.checkTimeout(),this.rankedCandidates=this.uniqueCandidates.filter(l=>l instanceof Er(l).HTMLElement||l instanceof Er(l).SVGElement).map(this.getSelectionResultForCandidate).sort((l,u)=>u.score-l.score),this.removedCandidates={hidden:[],static:[]},this.filteredAndSortedRankedCandidates=this.rankedCandidates.filter(l=>{let{isHidden:u,clickOffset:d}=this.isHidden(l.candidate);return u===!0?(this.removedCandidates.hidden.push(l),!1):(d&&(l.clickOffset=d),bs(this.targetElementStaticData)&&!Bd(this.formatStaticCandidates(l.esraMetadata.staticCandidates),this.targetElementStaticData)?(l.metadata=JSON.stringify(l.esraMetadata.staticCandidates),this.removedCandidates.static.push(l),!1):!0)}),this.checkTimeout(),this.removedCandidates.hidden.slice().reverse().forEach((l,u,d)=>{l.candidate.tagName==="INPUT"&&this.filteredAndSortedRankedCandidates.find(f=>f.score>.1&&f.candidate.contains(l.candidate))&&(this.removedCandidates.hidden.splice(d.length-1-u,1),this.filteredAndSortedRankedCandidates.push(l))}),this.filteredAndSortedRankedCandidates=this.filteredAndSortedRankedCandidates.sort((l,u)=>u.score-l.score);let i=this.filteredAndSortedRankedCandidates.length*(1-this.config.results.scorePercentile);this.finalCandidates=[];let a=null;for(let l=0;l<this.filteredAndSortedRankedCandidates.length;++l){let u=this.filteredAndSortedRankedCandidates[l];if(l>=i&&(!a||a.score-u.score>this.config.results.epsilon))break;a=u,this.finalCandidates.push(u)}return this.finalCandidates}intersectElements(e,t){let i=o((d,{useElementSize:f=!1}={})=>{let h=new Set;return d.forEach(p=>{let v=2,y=p;for(;y&&v-- >0&&(h.add(y),!(f&&Math.abs(y.parentElement.clientWidth-y.clientWidth)>y.clientWidth*.3&&Math.abs(y.parentElement.clientHeight-y.clientHeight)>y.clientHeight*.3));)y=y.parentElement}),h},"normalize"),a=i(e),l=i(t),u=new Set;return a.forEach(d=>{l.has(d)&&u.add(d)}),Array.from(u)}checkTimeout(){if(n.timeout&&Date.now()-this.processStartTime>n.timeout)throw new po}selectOne({elementsFiltering:e=1,minSelectionScore:t=.3}={}){try{if(this.elementsFiltering=e,this.processStartTime=Date.now(),this.targetElementESRAMetadata.tag==="html"){let a=document.querySelector("html");return{candidate:a,score:1,esraMetadata:this.extractMetadata(a)}}let i=this.selectByPositioning();if(i)return console.log("Found element by positioning"),i;for(this.collectCandidates();;){let a=this.select();if(!a.length)break;let{score:l}=a[0];if(l<t&&this.elementsFiltering!==3){this.elementsFiltering++,console.log(`Best matching element is below threshold (${l}/${t}), expanding selection to ${ri[this.elementsFiltering]}`);continue}return a[0]}}catch(i){i instanceof po?console.error("ESRA selection timeout"):console.error("ESRA selection error",i)}return{candidate:void 0,score:0,esraMetadata:void 0}}getFinalCandidates(){return this.finalCandidates}setQualifiedAttributesQueries(){this.candidateQueries.push(this.similarity.getQualifiedAttributes().map(e=>`[${e}="${this.targetElementESRAMetadata.attributes[e].value}"]`).join(","))}setQualifiedClassesQueries(){this.candidateQueries.push(this.similarity.getQualifiedClasses().map(e=>`.${e}`).join(","))}setInnerFeaturesQueries(){let e=this.targetElementESRAMetadata.innerFeatures.filter(l=>!l.isRoot);e.length>10&&(e=Object.values(e.reduce((l,u)=>{let d=`${u.type}_${u.tag}`;return l[d]?l:{...l,[d]:u}},{})));let t=Math.min(Math.ceil(e.length*this.config.innerFeatures.mandatoryPercentage),this.config.innerFeatures.mandatoryMax);o(l=>l.reduce((u,d)=>{let f=u.map(h=>[...h,d]).filter(h=>h.length<=t);return u.concat(f)},[[]]),"combinations")(e).filter(l=>l.length===t).forEach(l=>{let u=[];l.forEach(f=>u.push(this.getFeatureSelector(f))),this.cartesian(u).forEach(f=>this.candidateQueries.push("*"+f.map(h=>`:has(${h})`).join("")))})}cartesian(e){if(!e.length)return[];var t=[],i=e.length-1;function a(l,u){for(var d=0,f=e[u].length;d<f;d++){var h=l.slice(0);h.push(e[u][d]),u===i?t.push(h):a(h,u+1)}}return o(a,"helper"),a([],0),t}getFeatureSelector(e){let t=[e.tag];switch(e.type){case 0:e.src&&t.push(`${e.tag}[src="${e.src}"]`);break;case 2:t.push(`${e.tag}[href="${e.href}"]`);break;case 3:break;case 4:t.push(`${e.tag}[type="${e.inputType}"]`),e.placeholder&&t.push(`${e.tag}[placeholder="${e.placeholder}"]`);break}return t}getInnerTextCandidates(){let e=this.similarity.getQualifiedInnerText();if(!e)return[];let t=Ud(e.content);return t.length>this.config.innerText.dropIfMoreThanNCandidates?[]:t}getTagCandidates(){return we(this.targetElementESRAMetadata.tag)}isDescendant(e,t){return e.contains(t)}formatStaticCandidates(e){let t={};return Object.keys(e).forEach(i=>{t[i]=e[i]}),t}isHidden(e){return rt(e,{useCache:!0})}},po=class extends Error{static{o(this,"ESRATimeoutError")}constructor(){super("ESRA selection timeout")}};var Eh=o(n=>{let e=o(l=>l&&(l instanceof HTMLInputElement&&/|text|email|number|password|search|tel|url/.test(l.type||"")||l instanceof HTMLTextAreaElement)?!(l.disabled||l.readOnly):!1,"isEditableInputOrTextArea"),t=o((l,u)=>{n({key:l,eventTarget:u})},"sendKeyEvent"),i=o(l=>(l.ctrlKey?"ctrl ":"")+(l.altKey?"alt ":"")+(l.shiftKey?"shift ":"")+(l.metaKey?"meta ":"")+l.key,"formatKeyProperties"),a=o(l=>{try{if(e(l.target))return;t(i(l),l.target)}catch{}},"onKeyUp");window.addEventListener("keyup",l=>{a(l)})},"startKeyboardObserver");var go=class n{constructor(e=document,t){this.target=e;this.onEvent=t;this.monitoredTextElements=[];this.inputEnabledSelectors=["[contenteditable=true]"].join(",");this.iframeObservers=[];this.monitorInputEnabledElement=o(e=>{e.addEventListener("input",t=>{this.onEvent({text:t.target?.innerText,eventTarget:t.target})})},"monitorInputEnabledElement")}static{o(this,"ContendEditableObserver")}startObserver(){this.startIframesObserver(),this.observer=new MutationObserver(e=>{e.forEach(t=>{t.addedNodes.forEach(i=>{if(i.querySelector){let a=i.querySelector("iframe");a&&console.log("FFF",a)}if(i.nodeType===Node.ELEMENT_NODE&&i.nodeType===Node.ELEMENT_NODE){let a=i;a.matches(this.inputEnabledSelectors)||a.isContentEditable?this.monitorInputEnabledElement(a):Array.from(we("*",a)).filter(l=>l.matches&&l.matches(this.inputEnabledSelectors)||l.isContentEditable).forEach(this.monitorInputEnabledElement)}})})}),this.observer.observe(this.target,{childList:!0,subtree:!0,attributes:!0,characterData:!0,attributeOldValue:!0,characterDataOldValue:!0}),this.startInputMonitoring()}startIframesObserver(){setInterval(()=>{we("iframe",this.target).forEach(t=>{if(this.iframeObservers.find(u=>u.iframe===t))return;let i=o(u=>{if(u.iframe.contentWindow)try{u.observer=new n(u.iframe.contentWindow.document,this.onEvent),u.observer.startObserver()}catch{}},"observeIframe"),a=t,l={iframe:a,observer:null};this.iframeObservers.push(l),a.contentWindow?i(l):a.addEventListener("load",()=>{i(l)})})},500)}startInputMonitoring(){this.monitoredTextElements=we(this.inputEnabledSelectors,this.target),this.monitoredTextElements.forEach(this.monitorInputEnabledElement)}};var vo=class{constructor(e){this.onEvent=e;this.onURLChange=o(()=>{setTimeout(()=>{let e=window.location.href;if(e!==this.currentURL){this.currentURL=e;try{this.onEvent({url:e})}catch{}}})},"onURLChange")}static{o(this,"URLObserver")}start(){window.addEventListener("popstate",i=>{this.onURLChange()}),window.addEventListener("locationchange",i=>{this.onURLChange()}),window.addEventListener("hashchange",i=>{this.onURLChange()});let e=window.history.pushState;window.history.pushState=(...i)=>(this.onURLChange(),e.apply(window.history,i));let t=window.history.replaceState;window.history.replaceState=(...i)=>(this.onURLChange(),t.apply(window.history,i))}};var yo=class{constructor(e){this.logNativeMutationObserver=!1;this.stopRRWebRecording=o(()=>{},"stopRRWebRecording");this.start=o(()=>{this.stopRRWebRecording=Zt({emit:this.eventHandler,sampling:{mousemove:!1},userTriggeredOnInput:!0}),this.logNativeMutationObserver&&this.selfObserve(),this.startURLObserver(),this.startKeyboardObserver(),this.startContentEditableObserver()},"start");this.stop=o(()=>{this.stopRRWebRecording()},"stop");this.startURLObserver=o(()=>{this.urlObserver=new vo(({url:e})=>{let t={url:e};this.addCustomEvent("url-change",t)}),this.urlObserver.start()},"startURLObserver");this.startContentEditableObserver=o(()=>{this.contentEditableObserver=new go(document,({text:e,eventTarget:t})=>{let i={text:e,id:this.tryGetMetaFromEventTarget(t)?.id};this.addCustomEvent("contenteditable-input",i)}),this.contentEditableObserver.startObserver()},"startContentEditableObserver");this.startKeyboardObserver=o(()=>{Eh(({key:e,eventTarget:t})=>{let i={key:e,id:this.tryGetMetaFromEventTarget(t)?.id};this.addCustomEvent("key-stroke",i)})},"startKeyboardObserver");this.addCustomEvent=o((e,t)=>{Zt.addCustomEvent(e,t)},"addCustomEvent");this.tryGetMetaFromEventTarget=o(e=>{try{return this.getMeta(e)}catch{}},"tryGetMetaFromEventTarget");this.selfObserve=o(()=>{let e=document.getElementsByTagName("body"),t={attributes:!0,childList:!0,subtree:!0},i=o((l,u)=>{for(let d of l)d.type==="childList"?console.log("A child node has been added or removed.",d):d.type==="attributes"&&console.log(`The ${d.attributeName} attribute was modified.`,d)},"callback");new MutationObserver(i).observe(e[0],t)},"selfObserve");this.getNodeById=o(e=>Zt.mirror.getNode(e),"getNodeById");this.getMeta=o(e=>Zt.mirror.getMeta(e),"getMeta");this.eventHandler=e,this.currentURL=window.location.href}static{o(this,"SessionRecorder")}};var bh=["aria-label","aria-labelledby","label","title","alt"];function wh(n){return n._debugSource?.fileName?n._debugSource?.fileName:""}o(wh,"getComponentpath");function Sh(n,e){if(n==="Unknown"||typeof n!="string"||n[0]!==n[0].toUpperCase()||e.type.$$typeof===Symbol.for("react.context")||e.type.$$typeof===Symbol.for("react.forward_ref")||e.type.$$typeof===Symbol.for("react.memo")||e.type.$$typeof===Symbol.for("react.profiler")||e.type.$$typeof===Symbol.for("react.suspense"))return!1;let t=wh(e);return!(/.*\/node_modules\//.test(t)||n===t||/^(?!.*src).*$/.test(t))}o(Sh,"isComponentAllowed");function tc(n,e={}){if(!n)return["",{}];let t=n.type,i=t?t.name||t:"Unknown",a="";if(Sh(i,n)){a+=`<${i}>`;let l=wh(n);e[i]=l}if(n.child){let[l,u]=tc(n.child,e);a+=l,e={...e,...u}}if(Sh(i,n)&&(a+=`</${i}>`),n.sibling){let[l,u]=tc(n.sibling,e);a+=l,e={...e,...u}}return[a,e]}o(tc,"traverseReactTree");function Mh(n){let e=n._reactRootContainer?._internalRoot.current;return e||console.log("No react tree in element",n),tc(e)}o(Mh,"getReactTree");var xi=class n{static{o(this,"FrontendLogger")}static{this.original={}}static setPrefix(e){["log","warn","error"].forEach(t=>{n.original[t]||(n.original[t]=console[t]),console[t]=(...i)=>{i.unshift(e),n.original[t].apply(console,i)}})}};var Eo=class{constructor(e=a=>a.map(l=>l.target),t={childList:!0,subtree:!0,attributes:!0,attributeOldValue:!0},i={collectElement:!0}){this.filterElements=e;this.observeOptions=t;this.options=i;this.mutationEventListeners=[]}static{o(this,"MutationDetector")}addEventListener(e,t){this.mutationEventListeners.push({selector:e,listener:t})}startListening(){this.elements=[],this.observer=new MutationObserver(e=>{this.options.collectElement&&(this.elements=[...this.elements,...this.filterElements(e)]),this.mutationEventListeners.length&&e.forEach(t=>{t.addedNodes.forEach(i=>{if(i.nodeType!==Node.ELEMENT_NODE)return;let a=i;this.mutationEventListeners.forEach(l=>{a.matches(l.selector)?l.listener(a):a.querySelectorAll(l.selector).forEach(u=>{l.listener(u)})})})})}),this.observer.observe(document.body,this.observeOptions)}stopListening(){return this.observer.disconnect(),this.elements}};function xh(n){let e=n.filter(i=>i.addedNodes.length>0).reduce((i,a)=>[...i,...a.addedNodes],[]),t=n.filter(i=>i.type==="attributes"&&i.attributeName==="style"&&i.target instanceof HTMLElement&&/display\s*:\s*none/.test(i.oldValue)&&ys(i.target).visible).map(i=>i.target);return[...e,...t]}o(xh,"poppingElementsFilter");var kr;function Th(n){kr=!1;let e=Ih(n);return kr?e:null}o(Th,"getElementCaptionKey");var Ih=o(n=>{let e=o(l=>{if(!(l.tagName.toLowerCase()in gs))return l.tagName.toLowerCase();let u=gs[l.tagName.toLowerCase()].map(d=>`${d}:${l.getAttribute(d)}`).join(",");return u?(kr=!0,`SVG:${u}`):l.tagName.toLowerCase()},"getSVGKey"),t=o(l=>{kr=!0;let u=i(l);return`IMG:${l.src}`+(u!==l.tagName.toLowerCase()?`(${u})`:"")},"getIMGKey"),i=o(l=>{let u=window.getComputedStyle(l).backgroundImage;if(u&&u!=="none"){let d=u.match(/url\("(.+)"\)/);if(d)return kr=!0,`BGIMG:${l.tagName.toLowerCase()+d[1]}`}for(let d of["::before","::after"]){let f=window.getComputedStyle(l,d).content.replace(/['"]/g,""),h=window.getComputedStyle(l,d).fontFamily;if(f!=="none"&&f!==""){kr=!0;let p=f.charCodeAt(0).toString(16).padStart(4,"0");return`FONT:${l.tagName.toLowerCase()+h+p}`}}return l.tagName.toLowerCase()},"getElementKey");if(!n||n.nodeType===Node.TEXT_NODE||!n.tagName)return;let a=n instanceof SVGElement?e(n):n instanceof HTMLImageElement?t(n):i(n);if(n.childNodes.length>0){let l=Array.from(n.childNodes).map(Ih).filter(Boolean).join("+");l&&l.length>0&&(a+="("+l+")")}return a},"walk");function tM(n,e){let t=new Set;for(;n;)t.add(n),n=n.parentNode;for(;e;){if(t.has(e))return e;e=e.parentNode}return null}o(tM,"findCommonAncestor");function nc(n,e){let t=tM(n,e),i=0,a;if(!t)return 99999;for(a=n;a&&a!==t;)i++,a=a.parentNode;for(a=e;a&&a!==t;)i++,a=a.parentNode;return i}o(nc,"distanceBetweenNodes");var rc=class{constructor(){this.lastHighlights=[]}static{o(this,"ElementHighlighter")}clearHighlights(){this.lastHighlights.length&&(this.lastHighlights.forEach(e=>e.remove()),this.lastHighlights=[])}highlightElement(e,{highlightStyle:t={},textStyle:i={},mousePosition:a,text:l,textType:u="static",textPosition:d="overlap",textWidthType:f="rect",clear:h=!0,shouldFlipHighlightTextOutsideViewport:p=!0,pointerEvents:v,classNames:y=[]}={}){if(h&&this.clearHighlights(),!e)return;let w=e.ownerDocument,M=Qa(e),b=e.getBoundingClientRect(),R=w.createElement("div");if(R.style.outline="2px dashed rgba(255,0,0,.75)",R.style.position=M?"fixed":"absolute",R.style.left=b.left+"px",R.style.top=b.top+"px",R.style.width=b.right-b.left+"px",R.style.height=b.bottom-b.top+"px",R.style.pointerEvents=v??"none",R.style.zIndex="2147483647",R.className=["checksum-dom-cache-ignore",...y].join(" "),this.mergeStyle(R,t),a){let C=w.createElement("div");if(C.style.position="absolute",C.style.left=+a.x-16+"px",C.style.top=+a.y-16+"px",C.style.color="#004DFF",C.className=["checksum-dom-cache-ignore","mouse-cross",...y].join(" "),C.style.zIndex="2147483648",!w.head.querySelector("style[role=mouse-location]")){var T=w.head.appendChild(w.createElement("style"));T.setAttribute("role","mouse-location"),T.innerHTML=".mouse-cross:before, .mouse-cross:after {position: absolute;left: 15px;content: ' ';height: 33px;width: 3px;background-color: #004DFF;}.mouse-cross:before {transform: rotate(0deg);}.mouse-cross:after {transform: rotate(-90deg);}"}w.body.appendChild(C),this.lastHighlights.push(C)}let _=w.createElement("div");l&&(_.className=["checksum-dom-cache-ignore",...y].join(" "),_.innerText=l,_.style.fontSize="12px",_.style.width=f==="rect"?`${b.width}px`:"auto",_.style.background="#000000a1",_.style.color="white",_.style.padding="5px",_.style.position="absolute",_.style.pointerEvents="none",_.style.userSelect="none",d==="above"?_.style.bottom=`${b.height}px`:d==="below"&&(_.style.top=`${b.height}px`),this.mergeStyle(_,i),R.appendChild(_),R.style.pointerEvents=v??"none",u==="hover"&&(_.style.display="none",R.addEventListener("mouseover",()=>{_.style.display="block"}),R.addEventListener("mouseout",()=>{_.style.display="none"}))),w.body.appendChild(R),d==="above"&&Xa(_)>0?(_.style.bottom="initial",_.style.top=`${b.height}px`):d==="below"&&Za(_)>0&&(_.style.top="initial",_.style.bottom=`${b.height}px`),this.lastHighlights.push(R),p&&this.flipHighlightTextPositionOutsideViewport(_,d,b.height)}mergeStyle(e,t){for(let i in t)e.style[i]=t[i]}flipHighlightTextPositionOutsideViewport(e,t,i){t==="above"&&Xa(e)>0?(e.style.bottom="initial",e.style.top=`${i}px`):t==="below"&&Za(e)>0&&(e.style.top="initial",e.style.bottom=`${i}px`)}},Nn=new rc;var bo=class{constructor(e,t){this.rawDbName=e;this.storeName=t;this.db=null}static{o(this,"IndexedDBClient")}getDBName(){if(!this._dbName){if(!window.name){let e=window.sessionStorage.getItem("nextTabIndex")??"0";window.name=e,window.sessionStorage.setItem("nextTabIndex",`${parseInt(e)+1}`)}this._dbName=`${this.rawDbName}-${window.name}`}return this._dbName}open(e=1){return new Promise((t,i)=>{let a=indexedDB.open(this.getDBName(),e);a.onupgradeneeded=l=>{this.db=a.result,this.db.objectStoreNames.contains(this.storeName)||this.db.createObjectStore(this.storeName)},a.onsuccess=l=>{this.db=a.result,t(this.db)},a.onerror=l=>{console.log("IndexedDBClient.open() error",l,a.error),i(a.error)}})}count(){return new Promise((e,t)=>{if(!this.db){t("Database has not been initialized");return}let l=this.db.transaction([this.storeName]).objectStore(this.storeName).count();l.onsuccess=()=>e(l.result),l.onerror=()=>t(l.error)})}set(e,t){return new Promise((i,a)=>{if(!this.db){a("Database has not been initialized");return}let d=this.db.transaction([this.storeName],"readwrite").objectStore(this.storeName).add(e,t);d.onsuccess=()=>i(),d.onerror=()=>a(d.error)})}get(e,t,i){return new Promise((a,l)=>{if(!this.db){l("Database has not been initialized");return}let d=this.db.transaction([this.storeName]).objectStore(this.storeName),f=e?d.getAll(t,i):d.get(t);f.onsuccess=()=>a(f.result),f.onerror=()=>l(f.error)})}getOne(e){return this.get(!1,e)}getAll(e,t){return this.get(!0,e,t)}};var ic=class{constructor(){this.initialized=!1;this.rrwebEventsLoaded=!1;this.loadRRwebEvents=[];this.rrwebCrossFrameEventIdCounter=0}static{o(this,"RrwebEventsStorageManager")}async initRRwebEvents(){if(this.initialized){console.warn("[RrwebEventsStorageManager] initRRwebEvents called more than once");return}this.initialized=!0,this.rrwebEventsIndexedDB=new bo("checksum","rrwebEvents");try{await this.rrwebEventsIndexedDB.open()}catch{return}this.rrwebCrossFrameEventIdCounter=await this.rrwebEventsIndexedDB.count(),this.loadRRwebEvents.forEach(e=>{this.rrwebEventsIndexedDB.set(e,this.rrwebCrossFrameEventIdCounter++)}),this.rrwebEventsLoaded=!0}onRRwebEvent(e){this.rrwebEventsLoaded?this.rrwebEventsIndexedDB.set(e,this.rrwebCrossFrameEventIdCounter++):this.loadRRwebEvents.push(e)}isInitialized(){return this.initialized}getLastRRwebEventKey(){return this.rrwebCrossFrameEventIdCounter-1}async postRRwebEvents(e){if(!this.rrwebEventsLoaded)return[];let t=await this.rrwebEventsIndexedDB.getAll();return fetch(e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)})}async getRRwebEvents(e){return this.rrwebEventsLoaded?await this.rrwebEventsIndexedDB.getAll(IDBKeyRange.lowerBound(e)):[]}async getRRwebEvent(e){return this.rrwebEventsLoaded?this.rrwebEventsIndexedDB.getOne(e):null}},Ln=new ic;var nM="$checksum",So=class extends Dn{constructor(t={}){xi.setPrefix(nM);super();this.options={skipElementHighlighting:!1};this.testIdCounter=0;this.initialized=!1;this.elementSelector=new xt,this.options={...this.options,...t},this.htmlReducer=new Sr}static{o(this,"ChecksumTestGenerator")}init(t,i={},{sessionRecorder:a=!0}={},l={}){this.appSpecificRules=t,this.config=i,this.options={...this.options,...l},!this.initialized&&(this.initialized=!0,a&&(this.sessionMirror=new yo(u=>(Ln.onRRwebEvent(u),this.eventProcessor.processEvent(u))),Ln.initRRwebEvents()),this.sessionMirror&&(this.sessionMirror.start(),this.htmlReducer.setSessionRecorder(this.sessionMirror)),tr.limitChildren=this.appSpecificRules?.esraSelectionRules?.limitChildren??[],tr.timeout=this.config.esraTimeout,this.config.logPrefix?.length&&xi.setPrefix(this.config.logPrefix))}getElementSelector(){return this.elementSelector}getLastSelectionLogs(){return this.currentESRASelector?this.currentESRASelector.getLastSelectionLogs():{}}getBestMatchingElementSimilarityScore(t){return this.currentESRASelector=new tr(t),this.currentESRASelector.selectOne().score}async extractESRAMetadata(t){return new lt(document).extract(t).toMetadata()}async select(t,i){return await this.elementSelector.selector(t,i)}async getSelectionDataForSelector(t,i){try{let a=await this.elementSelector.selector(t,i);if(!a)return console.warn("could not find element for selector: "+t),null;let{locator:l}=await this.elementSelector.getSelectorAndLocator(a,{testIdSelector:this.appSpecificRules?.esraSelectionRules?.testIdSelector}),u=await this.extractESRAMetadata(a);return{generatedLocator:l,esraMetadata:u,selector:t,parentFramesSelectors:i}}catch(a){console.log("getMetadataForSelector exception",a);return}}async getMatchingElementSelectionData(t,{minSelectionScore:i,cachedSelector:a,staticMetadata:l}={minSelectionScore:.3},u=!1){try{let d,f,h;if(a&&(console.log("Trying to locate using cached selector",a),d=await this.elementSelector.selector(a)),!d){console.log("Trying to locate using ESRA",t),bs(l)&&console.log("and static data",l),this.currentESRASelector=new tr(t,l);let v=this.currentESRASelector.selectOne({minSelectionScore:i});v.score>=i?(d=v.candidate,f=v.score,h=v.clickOffset):console.log("Best matching element was below threshold",v)}if(console.log(d?[`Located with score ${f}`,d]:"Element not located"),!d)return;u&&new Kt(d).scrollIntoView(),this.highlightElement(d);let p=await this.makeMatchingElementSelectionData(d,f);return h&&(p.clickOffset=h),p}catch(d){console.log("getMatchingElementSelectionData exception",d);return}}getAllInteractableElementsForLastSelectQuery(){let t=this.currentESRASelector.getFinalCandidates();return Promise.all(t.map(async i=>({esraMetadata:i.esraMetadata,selectionData:await this.makeMatchingElementSelectionData(i.candidate,i.score)})))}async getInteractableElementsRaw(){return Bt()}async getInteractableElements(){let t=Bt(),i=new lt(document);return Promise.all(t.map(async a=>{let l=i.extract(a).toMetadata(),u=await this.makeMatchingElementSelectionData(a);return{esraMetadata:l,selectionData:u}}))}getCurrentESRASelector(){return this.currentESRASelector}startFlashingElementsDetection(){return this.htmlReducer.startFlashingElementsDetection()}async postRRwebEvents(t){return Ln.postRRwebEvents(t)}async getRRwebEvents(t){return Ln.getRRwebEvents(t)}async reduceHTML(t={},i={},a=document){let l=await this.htmlReducer.reduceHTML({...this.appSpecificRules,...t},i,a),u=Ln.isInitialized()?Ln.getLastRRwebEventKey():void 0;if(u){let d=await Ln.getRRwebEvent(u);d&&(l.lastRRwebEvent={key:u,timestamp:d.timestamp})}if(i.extractESRAForInterpretationRequiredElements){console.log("Extracting ESRA for interpretation required elements...");let d=this.htmlReducer.getInteractableElementsInReducedHTML();l.elementsForNodeInterpretation=d.reduce((f,{checksumId:h,element:p})=>{if(!(p instanceof HTMLElement)||p.innerText?.trim().length)return f;let y=new lt(document).extract(p).toMetadata();return[...f,{checksumId:h,esraMetadata:y}]},[]),console.log("Done with ESRA extraction for interpretation required elements")}return l}getMoreItemsForTemplate(t,i={}){return this.htmlReducer.getMoreElementsFromTemplate(t,{...this.appSpecificRules,...i})}displayInterpretationForElements(t){this.clearHighlights(),this.htmlReducer.getInteractableElements().forEach(({checksumId:a,element:l})=>{let u=t[a];if(u){if(!l.isConnected){console.log(`Element ${a} is not connected to the DOM, skipping display`);return}this.highlightElement(l,{text:u,textType:"hover",clear:!1,textStyle:{width:"120px"}})}})}async overlayInteractableElementsWithChecksumId({reduceBeforeRender:t=!1,mode:i="full",textPosition:a=i==="tag"?"above":void 0,shouldFlipHighlightTextOutsideViewport:l=!0,scrollIntoView:u=!1}={}){this.clearHighlights(),t&&await this.reduceHTML();let d=o((h,p,v)=>{if(!p.isConnected){console.log(`Element ${h} is not connected to the DOM, skipping display`);return}let{width:y,height:w}=p.getBoundingClientRect();if(y<=0||w<=0)return;function M(T){switch(i){case"tag":return{background:T,width:"initial",left:"-2px",border:`3px dashed ${T}`,"font-weight":"bold"};case"full":return{background:"black",height:"100%"}}}o(M,"getTextStyleByMode");function b(T){let _=["red","gold","green","steelBlue","orange","hotPink","darkViolet","brown"];return T?_[T%_.length]:"red"}o(b,"getColor");let R=b(v);this.highlightElement(p,{text:h,clear:!1,highlightStyle:{outline:i==="tag"?`3px dashed ${R}`:"none"},...a?{textPosition:a}:{},textStyle:M(R),shouldFlipHighlightTextOutsideViewport:l})},"overlayElement");this.htmlReducer.getInteractableElementsInReducedHTML().filter(h=>!rt(h.element,{...ll,scrollIntoView:u}).isHidden).forEach(({checksumId:h,element:p},v)=>{d(h,p,v)})}async getElementForChecksumId(t){return(await this.htmlReducer.getSelectorForChecksumId(t))?.element}async getSelectorForChecksumId(t){let i=await this.htmlReducer.getSelectorForChecksumId(t),{element:a,innerText:l,...u}=i;return u}hasInnerTextByChecksumId(t){return this.htmlReducer.hasInnerTextByChecksumId(t)}async getSelectorByPosition(t,i){let a=document.elementFromPoint(t,i),{selector:l,locator:u,parentFramesSelectors:d}=await this.elementSelector.getSelectorAndLocator(a);return{selector:l,locator:u,parentFramesSelectors:d}}isInput(t){let i=we(t);if(i.length)return["input","textarea"].includes(i[0].tagName.toLowerCase())}querySelectorExtended(t){return we(t)}getReactTree(t){return Mh(t)}isHidden(t,i){return rt(t,i)}showGrid(){this.removeGrid();let t=document.createElement("style");t.id="checksum_grid_style",t.innerHTML=`
                  .checksum_grid {
                        background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAAAXNSR0IArs4c6QAAAJ1JREFUaEPtksEJgDAUxX73H1oRxAECkSrppacXaNI1M8f84Kz7Idf95XP0kM3yVWSzIFORikgG+lqSWIytCFYnDSsiicXYimB10rAikliMrQhWJw0rIonF2IpgddKwIpJYjK0IVicNKyKJxdiKYHXSsCKSWIytCFYnDSsiicXYimB10rAikliMrQhWJw0rIonF2IpgddLwKSLx38Oej8ZiASoSUGMAAAAASUVORK5CYII=");
                        background-repeat: repeat;
                        background-size: 20px;
                        background-position: 0px 0px;
                        position: absolute;
                        top: 0;
                        left: 0;
                        bottom: 0;
                        width: 100%;
                        height: 100%;
                        z-index: 1000;
                  }
`,document.body.prepend(t);let i=document.createElement("div");i.classList.add("checksum_grid"),document.body.prepend(i)}removeGrid(){let t=document.querySelector("#checksum_grid_style");t&&t.remove();let i=document.querySelector(".checksum_grid");i&&i.remove()}clearHighlights(){Nn.clearHighlights()}highlightElement(t,i={}){this.options.skipElementHighlighting||Nn.highlightElement(t,i)}async getInspectedElementSelectionResultByRRwebId(t,i={fromTimeMachine:!1}){let l=await(i.fromTimeMachine?window.checksum.timeMachine.sessionReplayer:this.sessionMirror).getNodeById(t);if(l)return await this.elementSelector.getSelectorAndLocator(l,{ignoredIframesSelectors:i.fromTimeMachine?[".replayer-wrapper > iframe"]:[]})}getNodeSelector(t){return new wr().getSelector(t)}startListeningForHTMLChanges(){this.mutationDetector&&this.mutationDetector.stopListening(),this.mutationDetector=new Eo(xh),this.mutationDetector.startListening()}stopListeningForHTMLChanges(t){let i=this.mutationDetector.stopListening();switch(t){default:return i.map(a=>(a.innerText??a.textContent)?.trim())}}async recordScrollPosition(t){let i=await this.getElementForChecksumId(t);if(!i)return;let a=new Kt(i);a.getScrollableParentsPositions(),i._checksumScrollHelper=a}async restoreScrollPosition(t){let i=await this.getElementForChecksumId(t);!i||!("_checksumScrollHelper"in i)||(i._checksumScrollHelper.restore(),delete i._checksumScrollHelper)}async getElementCaptioningKeyForChecksumId(t){let i=this.htmlReducer.getElementForChecksumId(t);if(!i){console.warn(`Element with checksumId ${t} not found`);return}return Th(i)}determineClosestNode(t,i,a){return nc(t,a)-nc(i,a)}addForceIncludeElement(t,i){this.htmlReducer.addForceIncludeElement({element:t,checksumid:i})}shouldCaptionElement(t,{recursive:i}={recursive:!0}){let a=this.htmlReducer.getElementForChecksumId(t);if(!a)return!1;let l=bh,u=o(p=>{let v=p.parentElement;if(!v||v.nodeType!==Node.ELEMENT_NODE)return!1;let{width:y,height:w}=v.getBoundingClientRect(),{width:M,height:b}=p.getBoundingClientRect();return Math.abs(y-M)<15&&Math.abs(w-b)<15},"shouldCheckParent"),d=!1,f=a,h=o(()=>(d?f=f?.parentElement:d=!0,f),"getNextParent");for(;;){let p=h();if(l.some(v=>p.getAttribute(v))||p.querySelectorAll("[checksuminteractable]").length>0||l.filter(v=>p.querySelectorAll(`[${v}]`)).length===1)return!1;if(!i||!u(p))break}return!0}async makeMatchingElementSelectionData(t,i,a){try{let l=this.setAndGetTestId(t),u=this.getVisibleParent(t),d=this.setAndGetTestId(u),f=this.getElementAtCenterOfElement(t),h=this.setAndGetTestId(f),p={element:l,visibleElement:d===l?void 0:d,atPointElement:h===l||h===d?void 0:h},v=await this.elementSelector.getSelectorAndLocator(t,{testIdSelector:this.appSpecificRules?.esraSelectionRules?.testIdSelector}),y=await this.elementSelector.getSelectorAndLocator(f,{testIdSelector:this.appSpecificRules?.esraSelectionRules?.testIdSelector}),w=await this.elementSelector.getSelectorAndLocator(u,{testIdSelector:this.appSpecificRules?.esraSelectionRules?.testIdSelector}),M={element:v?.selector,visibleElement:w?.selector,atPointElement:y?.selector},b={element:v?.parentFramesSelectors,visibleElement:w?.parentFramesSelectors,atPointElement:y?.parentFramesSelectors},R=o(G=>({tag:G.tagName.toLowerCase()}),"makeElementData"),T={element:R(t),visibleElement:p.visibleElement?R(u):void 0,atPointElement:p.atPointElement?R(f):void 0},_=o(async G=>G===t&&a?a:new lt(document).extract(G).toMetadata(),"makeESRAMetadata"),C={element:await _(t),visibleElement:p.visibleElement?await _(u):void 0,atPointElement:p.atPointElement?await _(f):void 0},F=v?.locator;return{testIds:p,selectors:M,parentFramesSelectors:b,elementData:T,score:i,esraMetadata:C,generatedLocator:F}}catch(l){return console.log("[makeMatchingElementSelectionData] exception",l),{testIds:{element:void 0},selectors:{element:void 0},parentFramesSelectors:{element:void 0},elementData:{element:void 0},esraMetadata:{element:void 0},generatedLocator:void 0}}}getElementAtCenterOfElement(t){let{x:i,y:a}=t.getBoundingClientRect(),l=t.ownerDocument.elementFromPoint(i,a);return l instanceof HTMLElement?l:void 0}setAndGetTestId(t){if(!t)return;let i=t.getAttribute("data-checksum-testid");if(i)return i;let a=(this.testIdCounter++).toString();return t.setAttribute("data-checksum-testid",a),a}getVisibleParent(t){return!(t instanceof HTMLElement)||t.offsetParent!==null?t:this.getVisibleParent(fn(t))}};var wo=class{static{o(this,"GoalTracker")}constructor(){this.goals={}}async init(){}recordGoalFinished(e){console.log(`Goal reached: ${e}`),this.goals[e]||(this.goals[e]=0),this.goals[e]+=1,window.checksumai?.capture("goal_reached",{goalName:e})}getGoals(){return this.goals}};var Mo=class extends Dn{constructor(){super({enableInteract:!0});this.shouldHandleEvents=!0}static{o(this,"TimeMachine")}setEventHandlers(t,i=!0){this.shouldHandleEvents=i,super.setEventHandlers(t)}async handleEvents(t,i){console.log("starting handleEvents",i);try{for(let a of t)await this.eventProcessor.processEvent(a,this.shouldHandleEvents),await this.skipEvents([a])}catch(a){console.error(a)}console.log("done handleEvents",i)}setShouldHandleEvents(t){this.shouldHandleEvents=t}goBack(t,i={}){return t?this.sessionReplayer.goBack(t,i):this.goLive()}getElementByRRwebId(t){return this.sessionReplayer.getNodeById(t)}goLive(){return this.sessionReplayer.goLive()}};var Ch=ni(oo());var xo=class{constructor(){this.esraExtractors=[];this.playwrightSelector=new xt}static{o(this,"TimeMachineElementSelection")}async getSelector(e,{extractPlaywrightSelector:t=!0,extractEsraMetadata:i=!0}={}){if(!e)return null;console.log("[SessionDigesterSelector] generating for node",e);let a={};if(i)try{console.log("extracting ESRA metadata...");let l=this.getESRAExtractor(e).extract(e);a.esraMetadata=l.toMetadata(),console.log("ESRA metadata extraction complete")}catch(l){console.error("Failed to extract ESRA metadata",l)}if(t){console.log("extracting playwright selector...");let{selector:l,locator:u,parentFramesSelectors:d}=await this.playwrightSelector.getSelectorAndLocator(e);a.playwrightSelector=l,a.playwrightLocator=u,a.playwrightParentFramesSelectors=d,console.log("Playwright selector extraction complete")}return a}getESRAExtractor(e){let t=e.ownerDocument;if(!t)throw console.warn("Node does not have an owner document",e),new Error("Node does not have an owner document");let i=this.esraExtractors.find(l=>l.isSameDocument(t));if(i)return i;let a=new lt(t);return this.esraExtractors.push(a),a}};var To=class n{static{o(this,"SequenceMatcher")}findSequence(e,t,i){for(let a=0;a<=e.length-t.length;a++){let l=this.findMatch(a,e,t,i);if(l!==null)return l}return null}findMatch(e,t,i,a){let l={},u=[];for(let d=0;d<i.length;d++){let f=t[e+d],h=i[d];if(!this.matchItem(h,f,l,a??f))return null;u.push(f)}return{items:u,token_values:l}}matchItem(e,t,i,a){if(Array.isArray(e)&&Array.isArray(t))return this.matchArray(e,t,i,a);if(typeof e=="object"&&e!==null&&typeof t=="object"&&t!==null){for(let l in e){let u=e[l],d=t[l];if(typeof u=="string"&&u.startsWith("$")){if(i[u]===void 0)i[u]={value:d,item:a};else if(i[u].value!==d)return!1}else if(typeof u=="object"&&u!==null){if(!this.matchItem(u,d,i,a))return!1}else if(u!==d)return!1}return!0}else return e===t}matchArray(e,t,i,a){for(let l=0;l<=t.length-e.length;l++){let u=t.slice(l,l+e.length),d=this.findSequence(u,e,a);if(d){for(let f in d.token_values)if(i[f]===void 0)i[f]={value:d.token_values[f].value,item:a};else if(i[f].value!==d.token_values[f].value)return!1;return!0}}return!1}runExample(){let e=[{x:"banana",id:"1gf3",class:"fruit",index:"3",details:{a:1,b:2,nested:{key:"value1"}},arr:[{a:3,b:2},{a:1,b:2}]},{y:"apple",id:"4gs2",class:"fruit",parentIndex:"3",index:"7",details:{a:1,b:2,nested:{key:"value1"}}}],t=[{class:"$1",index:"$2",details:{a:1,b:"$3",nested:{key:"$4"}},arr:[{a:1,b:"$5"}]},{class:"$1",parentIndex:"$2",details:{a:1,b:"$3",nested:{key:"$4"}}}],a=new n().findSequence(e,t);console.log(a)}};var Io=class extends _n{constructor(){super();this.events=[];this.interactions=[];this.lastInteractionEventIndex=0;this.sequences=[];this.sequenceMatcher=new To;this.inputFilter=void 0;this.clickFilter=void 0;this.releasePendingInputAction=o(()=>{clearTimeout(this.inputFilter.timeout),this.addInteraction(this.inputFilter.action),this.inputFilter=void 0},"releasePendingInputAction");this.releasePendingClickActions=o((t=!0)=>{clearTimeout(this.clickFilter.timeout),t&&this.clickFilter.actions.forEach(i=>this.addInteraction(i)),this.clickFilter=void 0},"releasePendingClickActions");this.dragAndDropSequence={events:[{type:$.IncrementalSnapshot,data:{source:U.MouseInteraction,type:ae.MouseDown}},{type:$.IncrementalSnapshot,data:{source:U.Mutation,adds:[{parentId:"$dropzoneId",node:{id:"$draggableId"}}],removes:[{id:"$draggableId"}]}}],handler:o(async({token_values:{$dropzoneId:t,$draggableId:i},items:a})=>{await this.sessionReplayer.goBack(i.item.timestamp);let l=i.value,u=await this.getNodeById(l);if(!u)return;let d=await this.elementSelector.getSelector(u);if(!d)return;await this.sessionReplayer.goBack(t.item.timestamp);let f=t.value,h=await this.getNodeById(f);if(!h)return;let p=await this.elementSelector.getSelector(h);if(p)return console.log("Drag and drop",d.playwrightLocator,p.playwrightLocator),[this.makePageAction("drag_and_drop",a[0],d,{dropTarget:{selector:p.playwrightSelector,locator:p.playwrightLocator,parentFramesSelectors:p.playwrightParentFramesSelectors,esraMetadata:p.esraMetadata}})]},"handler")};this.maxNumberOfGetNodeRetries=3;this.elementSelector=new xo,this.buildSequences()}static{o(this,"VisualTestGenerationTimeMachineEventHandlers")}setSessionReplayer(t){this.sessionReplayer=t}getInteractions(t=0){return this.interactions.slice(t)}preEvent(t){this.inputFilter&&this.isActionEvent(t)&&!this.isConsecutiveInputEvent(t)&&this.releasePendingInputAction(),this.clickFilter&&this.isActionEvent(t)&&!this.isConsecutiveClickEvent(t)&&this.releasePendingClickActions(),this.events.push(t)}async postEvent(t,i){try{await this.performSequenceSearch()}catch(a){console.error("performSequenceSearch",a)}}async handleInput(t,i,a=!1){if(this.inputFilter){this.inputFilter.action.fillValue=t.text,this.inputFilter.timeout=this.setInputWaitTimeout();return}if(!t.userTriggered)return;let l=await this.getNodeById(t.id);if(!l)return;let u=await this.elementSelector.getSelector(l);if(!u)return;let d=this.makePageAction(this.getInputEventCode(l,t),i,u);if(d.eventCode==="input"){d.fillValue=t.text,this.inputFilter={action:d,nodeId:t.id,contenteditable:a,timeout:this.setInputWaitTimeout()};return}d.eventCode==="upload_files"&&(d.files=[],d.files.push(t.text)),this.addInteraction(d)}isConsecutiveInputEvent(t){return this.inputFilter?this.inputFilter.contenteditable?t.type===$.Custom&&t.data.tag==="contenteditable-input"&&t.data.payload.id===this.inputFilter.nodeId:t.type===$.IncrementalSnapshot&&t.data.source===U.Input&&t.data.id===this.inputFilter.nodeId&&!!t.data.userTriggered:!1}setInputWaitTimeout(){return this.inputFilter?.timeout&&clearTimeout(this.inputFilter.timeout),setTimeout(this.releasePendingInputAction,1e3)}handleContentEditableInput(t,i){this.handleInput({userTriggered:!0,id:t.id,text:t.text,isChecked:!1,source:U.Input},i,!0)}handleKeyStroke(t,i){}async handleClick(t,i){if(t.x===void 0||t.y===void 0)return;let a=await this.getNodeById(t.id);if(!a)return;let l=await this.elementSelector.getSelector(a);if(!l)return;let u=this.makePageAction("click",i,l);if(this.clickFilter){this.clickFilter.actions.push(u);return}this.clickFilter={actions:[u],nodeId:t.id,timeout:this.setClickWaitTimeout()}}isConsecutiveClickEvent(t){return this.clickFilter?t.type===$.IncrementalSnapshot&&t.data.source===U.MouseInteraction&&t.data.type===ae.Click&&t.data.id===this.clickFilter.nodeId:!1}setClickWaitTimeout(){return this.clickFilter?.timeout&&clearTimeout(this.clickFilter.timeout),setTimeout(this.releasePendingClickActions,600)}async handleDblClick(t,i){if(t.x===void 0||t.y===void 0)return;let a=await this.getNodeById(t.id);if(!a)return;let l=await this.elementSelector.getSelector(a);if(!l)return;let u=this.makePageAction("double_click",i,l);this.addInteraction(u),this.releasePendingClickActions(!1)}buildSequences(){this.sequences.push(this.dragAndDropSequence)}async performSequenceSearch(){let t=this.events.slice(this.lastInteractionEventIndex);for(let i of this.sequences){let a=this.sequenceMatcher.findSequence(t,i.events);if(a){let l=await i.handler(a);l&&l.forEach(u=>this.addInteraction(u))}}await this.sessionReplayer.goLive()}isActionEvent(t){switch(t.type){case $.Meta:return!1;case $.IncrementalSnapshot:switch(t.data.source){case U.Input:return t.data.userTriggered;case U.MouseInteraction:case U.MouseMove:return!0;default:return!1}case $.Custom:switch(t.data.tag){case"contenteditable-input":return!0;default:return!1}default:return!1}}addInteraction(t){this.interactions.push(t),this.lastInteractionEventIndex=this.events.length}makePageAction(t,i,a,l={}){return{nodeId:this.interactions.length.toString(),eventCode:t,selector:a.playwrightSelector,locator:a.playwrightLocator,parentFramesSelectors:a.playwrightParentFramesSelectors,esraMetadata:a.esraMetadata,pageId:void 0,timestamp:i.timestamp,...l}}async getNodeById(t,{retriesLeft:i=this.maxNumberOfGetNodeRetries,useCompoundInteractableDetection:a=!0}={}){if(!i)return console.error("no node"),null;let l=this.sessionReplayer.getNodeById(t);return l?a?qn(l,[]):l:(await(0,Ch.default)(100*(this.maxNumberOfGetNodeRetries-i+1)),this.getNodeById(t,{retriesLeft:i-1,useCompoundInteractableDetection:a}))}getInputEventCode(t,i){switch(t.getAttribute("type")){case"file":return"upload_files";case"checkbox":case"radio":return i.isChecked?"check":"uncheck";case"text":default:return"input"}}};var Co=class n{constructor(e=document,t,i){this.rootDocument=e;this.defaultView=t;this.topLevelInspector=i;this.wasHoveredElementSelected=!1;this.selected=[];this.singleSelection=!0;this.subDocumentInspector=null;this.listening=!1;this.onMouseOver=o(async e=>{let t=e.composedPath()[0];if("getRootNode"in t){let d=t.getRootNode();if(d!==this.rootDocument){this.handleSubDocument(d,this.defaultView);return}}if(t instanceof this.defaultView.HTMLIFrameElement){this.handleSubDocument(t.contentDocument,t.contentDocument.defaultView);return}if(this.subDocumentInspector&&this.stopSubDocumentInspector(!0),!(t instanceof this.defaultView.Element)||t===this.hoveredElement||t.matches(".element-inspector-ignore"))return;Nn.clearHighlights(),this.hoveredElement&&this.hoveredElement.removeEventListener("click",this.onClick,{capture:!0});let{locator:i,selector:a,parentFramesSelectors:l}=await this.playwrightElementSelectorGenerator.getSelectorAndLocator(t);Nn.highlightElement(t,{text:i.replace("frameLocator('iframe').",""),textPosition:"below",textWidthType:"auto",pointerEvents:"none",classNames:["element-inspector-ignore"]});let u=await this.playwrightElementSelectorGenerator.selector(a,l);u!==t&&Nn.highlightElement(u,{clear:!1,pointerEvents:"none",classNames:["element-inspector-ignore"]}),this.hoveredElement=t,this.hoveredElementSelection={locator:i,selector:a,parentFramesSelectors:l},this.wasHoveredElementSelected=!1,t.addEventListener("click",this.onClick,{capture:!0})},"onMouseOver");this.onClick=o(async e=>{e.stopPropagation(),e.preventDefault(),!this.wasHoveredElementSelected&&(this.wasHoveredElementSelected=!0,this.selected.push(this.hoveredElementSelection),this.singleSelection&&(this.topLevelInspector?this.topLevelInspector.stop():this.stop()),console.log("selected",this.selected))},"onClick");this.handleSubDocument=o((e,t)=>{if(this.subDocumentInspector){if(this.subDocumentInspector.rootDocument===e)return!0;this.stopSubDocumentInspector(!0)}return this.subDocumentInspector=new n(e,t,this.topLevelInspector??this),this.subDocumentInspector.start(this.singleSelection),!0},"handleSubDocument");this.stopSubDocumentInspector=o(e=>{this.subDocumentInspector&&(this.subDocumentInspector.stop(e),this.subDocumentInspector=null)},"stopSubDocumentInspector");this.playwrightElementSelectorGenerator=new xt,t||(this.defaultView=this.rootDocument.nodeType===Node.DOCUMENT_NODE?this.rootDocument.defaultView:window)}static{o(this,"ElementInspector")}start(e=!0){this.singleSelection=e,this.stop(),this.cleanSelection(),this.rootDocument.addEventListener("mouseover",this.onMouseOver),this.listening=!0}stop(e=!1){this.listening&&(this.listening=!1,this.subDocumentInspector&&this.stopSubDocumentInspector(e),Nn.clearHighlights(),this.hoveredElement&&this.hoveredElement.removeEventListener("click",this.onClick,{capture:!0}),this.hoveredElement=null,this.wasHoveredElementSelected=!1,this.rootDocument.removeEventListener("mouseover",this.onMouseOver),e&&this.cleanSelection())}cleanSelection(){this.subDocumentInspector&&this.subDocumentInspector.cleanSelection(),this.selected=[]}consumeSelections(){if(this.subDocumentInspector)return this.subDocumentInspector.consumeSelections();let e=this.selected;return this.cleanSelection(),e}};var Ro=class{constructor(e){this.timeMachine=e;this.lengthOfConsumedInteractions=0;this.eventHandlers=new Io}static{o(this,"VisualTestGenerator")}init(e=!0){this.timeMachine.setEventHandlers(this.eventHandlers,e)}consumeInteractions(){let e=this.eventHandlers.getInteractions(this.lengthOfConsumedInteractions);return this.lengthOfConsumedInteractions+=e.length,e}startInspector(e=!0,t){this.elementInspector=new Co(t??this.getRRwebReplayerDocument()),this.elementInspector.start(e)}getRRwebReplayerDocument(){return document.querySelector(".replayer-wrapper > iframe").contentDocument}stopInspector(){this.elementInspector.stop()}consumeSelections(){return this.elementInspector.consumeSelections()}};(function(){let n=Element.prototype.addEventListener;Element.prototype.addEventListener=function(e,t,i){n.call(this,e,t,i),this._checksum_eventListenerList||(this._checksum_eventListenerList={}),this._checksum_eventListenerList[e]||(this._checksum_eventListenerList[e]=[]),this._checksum_eventListenerList[e].push(t)}})();if(!window.checksum){let n=new So,e=new uo,t=new wo,i=new Mo,a=new Ro(i);window.checksum={testGenerator:n,sessionDigester:e,goalTracker:t,timeMachine:i,visualTestGenerator:a}}})();
/*! Bundled license information:

lodash/lodash.js:
  (**
   * @license
   * Lodash <https://lodash.com/>
   * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
   * Released under MIT license <https://lodash.com/license>
   * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
   * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
   *)

rrweb/es/rrweb/ext/tslib/tslib.es6.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)

rrweb/es/rrweb/_virtual/image-bitmap-data-url-worker.js:
  (*! *****************************************************************************
      Copyright (c) Microsoft Corporation.
  
      Permission to use, copy, modify, and/or distribute this software for any
      purpose with or without fee is hereby granted.
  
      THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
      REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
      AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
      INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
      LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
      OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
      PERFORMANCE OF THIS SOFTWARE.
      ***************************************************************************** *)

rrweb/es/rrweb/ext/@xstate/fsm/es/index.js:
  (*! *****************************************************************************
  Copyright (c) Microsoft Corporation.
  
  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.
  
  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** *)
*/
